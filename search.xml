<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Android æ‰“å¡ Day2 - é¡¹ç›®ç»“æ„</title>
      <link href="/2023/07/01/android_day2/"/>
      <url>/2023/07/01/android_day2/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><h2 id="SDK-Version"><a href="#SDK-Version" class="headerlink" title="SDK Version"></a>SDK Version</h2><p>æœ‰äº›æ–‡ç« çœ‹çš„äº‘é‡Œé›¾é‡Œï¼Œæ¦‚å¿µæ€§çš„å†…å®¹è¿˜æ˜¯çœ‹å®˜æ–¹ğŸ‘‰ï¼š</p><p><a href="https://developer.android.com/studio/releases/platforms?hl=zh-cn">å®˜æ–¹ - SDK å¹³å°ç‰ˆæœ¬è¯´æ˜</a><br><a href="https://developer.android.com/guide/topics/manifest/uses-sdk-element?hl=zh-cn#ApiLevels">å®˜æ–¹ - API çº§åˆ«è¯´æ˜</a></p><h2 id="Android-Studio-é¡¹ç›®ç›®å½•ç»“æ„"><a href="#Android-Studio-é¡¹ç›®ç›®å½•ç»“æ„" class="headerlink" title="Android Studio é¡¹ç›®ç›®å½•ç»“æ„"></a>Android Studio é¡¹ç›®ç›®å½•ç»“æ„</h2><p>åœ¨ Android Studio ä¸­ï¼Œæ–°å»ºä¸€ä¸ªå·¥ç¨‹ã€è¿›å…¥ <strong>Project</strong> æ ‡ç­¾é¡µã€‚<strong>Project</strong> æ ‡ç­¾é¡µä¼šæ˜¾ç¤ºé¡¹ç›®çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹å·¦å›¾ã€‚å®˜æ–¹è¯´ <strong>å¦‚æœ‰å¿…è¦ï¼Œè¯·ä» Project æ ‡ç­¾é¡µçš„ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© Android</strong>ï¼Œå¦‚ä¸‹å³å›¾ï¼š</p><blockquote><p>è¿™å°±æ˜¯æ‚¨ä½¿ç”¨çš„æ ‡å‡†æ–‡ä»¶è§†å›¾å’Œç»„ç»‡æ–¹å¼ï¼Œåœ¨ç¼–å†™é¡¹ç›®ä»£ç æ—¶ä¼šéå¸¸æœ‰ç”¨ï¼Œå› ä¸ºæ‚¨å¯ä»¥è½»æ¾è®¿é—®å°†åœ¨åº”ç”¨ä¸­ä½¿ç”¨çš„å„ä¸ªæ–‡ä»¶ã€‚ä¸è¿‡ï¼Œå¦‚æœæ‚¨æ˜¯é€šè¿‡æ–‡ä»¶æµè§ˆå™¨ï¼ˆå¦‚ Finder æˆ– Windows èµ„æºç®¡ç†å™¨ï¼‰æµè§ˆæ–‡ä»¶ï¼Œåˆ™æ–‡ä»¶å±‚æ¬¡ç»“æ„çš„ç»„ç»‡æ–¹å¼ä¼šæ˜æ˜¾ä¸åŒã€‚</p></blockquote><center>    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/Project.png" class width="300"></div>    <div style="display:inline-block;margin-left:10px;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/Android.png" class width="333"></div></center><p>ç¡®å®ï¼ŒProject æ¯” Android ç›®å½•çœ‹ç€é—¹å¿ƒå¤šäº†ï¼Œæˆ‘è¯´æ€ä¹ˆç¬¬ä¸€æ¬¡çœ‹å…¬å¸ Android çš„ä»£ç ä¹±ä¸ƒå…«ç³Ÿçš„å‘¢ï¼Œä»–ä»¬å‡ ä¸ªä¹Ÿä¸å‘Šè¯‰æˆ‘ï¼Œåäººï¼Œå•Šå“ˆå“ˆå“ˆ~ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡</p><p>æˆªå›¾æ˜¯ä»¥ä¸Šæ¬¡çš„ Tip Time Demo ä¸ºä¾‹ï¼š</p><table><thead><tr><th>ç›®å½•æ–‡ä»¶</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>.gradle</td><td>gradle é¡¹ç›®äº§ç”Ÿçš„æ–‡ä»¶å¤¹ï¼ˆè‡ªåŠ¨ç¼–è¯‘å·¥å…·äº§ç”Ÿçš„æ–‡ä»¶ï¼‰</td></tr><tr><td>.idea</td><td>IDEA é¡¹ç›®æ–‡ä»¶å¤¹ï¼ˆå¼€å‘å·¥å…·äº§ç”Ÿçš„æ–‡ä»¶ï¼‰</td></tr><tr><td>app</td><td>module æ¨¡å—</td></tr><tr><td>build</td><td>æ„å»ºæ—¶ç”Ÿæˆæ–‡ä»¶çš„åœ°æ–¹</td></tr><tr><td>gradle</td><td>gradle ç¯å¢ƒæ”¯æŒæ–‡ä»¶å¤¹</td></tr><tr><td>.gitignore</td><td>git æºç ç®¡ç†æ–‡ä»¶</td></tr><tr><td>build.gradle</td><td>gradle é¡¹ç›®è‡ªåŠ¨ç¼–è¯‘çš„é…ç½®æ–‡ä»¶</td></tr><tr><td>gradlew</td><td>è‡ªåŠ¨å®Œæˆ gradle ç¯å¢ƒçš„ linux mac è„šæœ¬ï¼Œé…åˆ gradle æ–‡ä»¶å¤¹ä½¿ç”¨</td></tr><tr><td>gradlew.bat</td><td>è‡ªåŠ¨å®Œæˆ gradle ç¯å¢ƒçš„ windows è„šæœ¬ï¼Œé…åˆ gradle æ–‡ä»¶å¤¹ä½¿ç”¨</td></tr><tr><td>local.properties</td><td>Android SDK NDK ç¯å¢ƒè·¯å¾„é…ç½®</td></tr><tr><td>setting.gradle</td><td>gradle é¡¹ç›®çš„å­é¡¹ç›®åŒ…å«æ–‡ä»¶</td></tr></tbody></table><h3 id="gradle"><a href="#gradle" class="headerlink" title=".gradle"></a>.gradle</h3><p>.gradle æ˜¯ASè‡ªåŠ¨ç”Ÿæˆçš„ç›®å½•ï¼Œä¸€èˆ¬æƒ…å†µä¸åšä¿®æ”¹ã€‚</p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/day2g.png" style="zoom:50%;"><h3 id="idea"><a href="#idea" class="headerlink" title=".idea"></a>.idea</h3><p>idea æ˜¯ASè‡ªåŠ¨ç”Ÿæˆçš„ç›®å½•ï¼Œä¸€èˆ¬æƒ…å†µä¸åšä¿®æ”¹ã€‚</p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/day2i.png" style="zoom:50%;"><h3 id="app"><a href="#app" class="headerlink" title="app"></a>app</h3><p>åº”ç”¨çš„ä¸»ç›®å½•ã€æ¨¡å—ç›®å½•ã€‚</p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/day2a.png" style="zoom:50%;"><table><thead><tr><th>ç›®å½•æ–‡ä»¶</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td>build</td><td>ç¼–è¯‘æ—¶ç”Ÿæˆ</td></tr><tr><td>libs</td><td>å­˜æ”¾ç¬¬ä¸‰æ–¹çš„ jar åŒ…</td></tr><tr><td>src</td><td>app æ¨¡å—çš„æºç </td></tr><tr><td>.gitignore</td><td>git æºç ç®¡ç†æ–‡ä»¶</td></tr><tr><td>build.gradle</td><td>app æ¨¡å—çš„ gradle æ„å»ºè„šæœ¬</td></tr><tr><td>proguard-rules.pro</td><td>æŒ‡å®šä»£ç æ··æ·†</td></tr></tbody></table><h4 id="1ï¸âƒ£-build-ç›®å½•"><a href="#1ï¸âƒ£-build-ç›®å½•" class="headerlink" title="1ï¸âƒ£ build ç›®å½•"></a>1ï¸âƒ£ build ç›®å½•</h4><p>å’Œå¤–å±‚çš„ build ç±»ä¼¼ä¸»è¦åŒ…å«ç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆçš„å†…å®¹, å…¶ä¸­åœ¨ outputs æ–‡ä»¶å¤¹ä¸‹å­˜æ”¾æ‰“åŒ…å¥½çš„ apk æ–‡ä»¶ï¼ˆdebug å’Œ releaseï¼‰ã€‚</p><h4 id="2ï¸âƒ£-libs-ç›®å½•"><a href="#2ï¸âƒ£-libs-ç›®å½•" class="headerlink" title="2ï¸âƒ£ libs ç›®å½•"></a>2ï¸âƒ£ libs ç›®å½•</h4><p>å¦‚æœé¡¹ç›®ä¸­æ˜¯ç”¨äº†ç¬¬ä¸‰æ–¹çš„ jar åŒ…ï¼Œå°±éœ€è¦æŠŠ jar åŒ…æ”¾åˆ° libs ç›®å½•ä¸‹ï¼Œç„¶å jar åŒ…ä¼šè¢«è‡ªåŠ¨æ·»åŠ åˆ°æ„å»ºè·¯å¾„ï¼ˆå¦‚é›†æˆç™¾åº¦åœ°å›¾ sdkï¼ŒæŠŠ jar åŒ…æ”¾åˆ° libs ç›®å½•ã€‚å¯ä»¥åœ¨ build.gradleï¼ˆappï¼‰æ–‡ä»¶ä¸­æŸ¥çœ‹å½“å‰é¡¹ç›®ä¾èµ–ï¼‰ã€‚</p><h4 id="3ï¸âƒ£-src-ç›®å½•"><a href="#3ï¸âƒ£-src-ç›®å½•" class="headerlink" title="3ï¸âƒ£ src ç›®å½•"></a>3ï¸âƒ£ src ç›®å½•</h4><p>module æºç æ‰€åœ¨ç›®å½•ã€‚</p><ul><li>AndroidTest - ç”¨æ¥ç¼–å†™ Android test æµ‹è¯•ç”¨ä¾‹çš„ï¼Œå¯ä»¥å¯¹é¡¹ç›®è¿›è¡Œä¸€äº›è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</li><li>Java - æ”¾ Java ä»£ç çš„åœ°æ–¹ã€‚</li><li>res - å­˜æ”¾å„ç§èµ„æºæ–‡ä»¶çš„åœ°æ–¹ï¼Œæœ‰å›¾ç‰‡ã€å­—ç¬¦ä¸²ï¼ŒåŠ¨ç”»ã€éŸ³é¢‘ç­‰ï¼Œè¿˜æœ‰å„ç§å½¢å¼çš„ XML æ–‡ä»¶ã€‚</li></ul><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ğŸ¤“  res [main] ğŸ”¥ tree -L 1</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ drawable</span><br><span class="line">â”œâ”€â”€ drawable-v24</span><br><span class="line">â”œâ”€â”€ layout</span><br><span class="line">â”œâ”€â”€ mipmap-anydpi-v26</span><br><span class="line">â”œâ”€â”€ mipmap-hdpi</span><br><span class="line">â”œâ”€â”€ mipmap-mdpi</span><br><span class="line">â”œâ”€â”€ mipmap-xhdpi</span><br><span class="line">â”œâ”€â”€ mipmap-xxhdpi</span><br><span class="line">â”œâ”€â”€ mipmap-xxxhdpi</span><br><span class="line">â”œâ”€â”€ values</span><br><span class="line">â”œâ”€â”€ values-night</span><br><span class="line">â”œâ”€â”€ values-zh-rCN</span><br><span class="line">â””â”€â”€ xml</span><br></pre></td></tr></table></figure><ul><li>AndroidManifest.xml - æ•´ä¸ªé¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œå››å¤§ç»„ä»¶éƒ½éœ€è¦åœ¨è¿™é‡Œæ³¨å†Œæ‰èƒ½æ­£å¸¸çš„è¿è¡Œã€‚</li><li>test - ç”¨æ¥ç¼–å†™ Unit Test æµ‹è¯•ç”¨ä¾‹çš„ï¼Œæ˜¯å¯¹é¡¹ç›®è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•çš„å¦ä¸€ç§æ–¹å¼ã€‚</li></ul><h4 id="4ï¸âƒ£-src-gt-res-èµ„æºä»‹ç»"><a href="#4ï¸âƒ£-src-gt-res-èµ„æºä»‹ç»" class="headerlink" title="4ï¸âƒ£ src-&gt;res èµ„æºä»‹ç»"></a>4ï¸âƒ£ src-&gt;res èµ„æºä»‹ç»</h4><p><a href="https://blog.csdn.net/qq_40959750/article/details/107076963">ä»¥ä¸‹å†…å®¹è½¬è½½è‡ª</a></p><h5 id="ğŸ’¯-å›¾ç‰‡èµ„æº"><a href="#ğŸ’¯-å›¾ç‰‡èµ„æº" class="headerlink" title="ğŸ’¯ å›¾ç‰‡èµ„æº"></a>ğŸ’¯ å›¾ç‰‡èµ„æº</h5><p>drawableï¼šå­˜æ”¾å„ç§ä½å›¾æ–‡ä»¶ï¼Œ(.png/.jpg/.9png/.gif ç­‰) é™¤æ­¤ä¹‹å¤–å¯èƒ½æ˜¯ä¸€äº›å…¶ä»–çš„ drawable ç±»å‹çš„ XML æ–‡ä»¶ï¼›<br>mipmap-hdpiï¼šé«˜åˆ†è¾¨ç‡ï¼Œä¸€èˆ¬æŠŠå›¾ç‰‡æ”¾è¿™é‡Œï¼›<br>mipmap-mdpiï¼šä¸­ç­‰åˆ†è¾¨ç‡ï¼Œå¾ˆå°‘ï¼Œé™¤éå…¼å®¹çš„çš„æ‰‹æœºå¾ˆæ—§ï¼›<br>mipmap-xhdpiï¼šè¶…é«˜åˆ†è¾¨ç‡ï¼Œæ‰‹æœºå±å¹•æè´¨è¶Šæ¥è¶Šå¥½ï¼Œä»¥åä¼°è®¡ä¼šæ…¢æ…¢å¾€è¿™é‡Œè¿‡æ¸¡ï¼›<br>mipmap-xxhdpiï¼šè¶…è¶…é«˜åˆ†è¾¨ç‡ï¼Œè¿™ä¸ªåœ¨é«˜ç«¯æœºä¸Šæœ‰æ‰€ä½“ç°ï¼›</p><h5 id="ğŸ’¯-å¸ƒå±€èµ„æº"><a href="#ğŸ’¯-å¸ƒå±€èµ„æº" class="headerlink" title="ğŸ’¯ å¸ƒå±€èµ„æº"></a>ğŸ’¯ å¸ƒå±€èµ„æº</h5><p>layoutï¼šè¯¥ç›®å½•ä¸‹å­˜æ”¾çš„å°±æ˜¯æˆ‘ä»¬çš„å¸ƒå±€æ–‡ä»¶ï¼Œå¦å¤–åœ¨ä¸€äº›ç‰¹å®šçš„æœºå‹ä¸Šï¼Œæˆ‘ä»¬åšå±å¹•é€‚é…ï¼Œæ¯”å¦‚ 480*320 è¿™æ ·çš„æ‰‹æœºï¼Œæˆ‘ä»¬ä¼šå¦å¤–åˆ›å»ºä¸€å¥—å¸ƒå±€ï¼Œå°±åƒï¼šlayout-480x320 è¿™æ ·çš„æ–‡ä»¶å¤¹ã€‚</p><h5 id="ğŸ’¯-values-ç›®å½•"><a href="#ğŸ’¯-values-ç›®å½•" class="headerlink" title="ğŸ’¯ values ç›®å½•"></a>ğŸ’¯ values ç›®å½•</h5><p>emens.xmlï¼šå®šä¹‰å°ºå¯¸èµ„æºï¼›<br>string.xmlï¼šå®šä¹‰å­—ç¬¦ä¸²èµ„æºï¼›<br>styles.xmlï¼šå®šä¹‰æ ·å¼èµ„æºï¼›<br>colors.xmlï¼šå®šä¹‰é¢œè‰²èµ„æºï¼›<br>arrays.xmlï¼šå®šä¹‰æ•°ç»„èµ„æºï¼›<br>attrs.xmlï¼šè‡ªå®šä¹‰æ§ä»¶æ—¶ç”¨çš„è¾ƒå¤šï¼Œè‡ªå®šä¹‰æ§ä»¶çš„å±æ€§ï¼›<br>theme ä¸»é¢˜æ–‡ä»¶ï¼šå’Œ styles å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯ä¼šå¯¹æ•´ä¸ªåº”ç”¨ä¸­çš„ Actvitiy æˆ–æŒ‡å®š Activity èµ·ä½œç”¨ï¼Œä¸€èˆ¬æ˜¯æ”¹å˜çª—å£å¤–è§‚çš„ï¼Œå¯åœ¨ Java ä»£ç ä¸­é€šè¿‡ setTheme ä½¿ç”¨ï¼Œæˆ–è€…åœ¨ Androidmanifest.xml ä¸­ä¸º &lt;applicationâ€¦&gt; æ·»åŠ  theme çš„å±æ€§ã€‚</p><p>PS: ä½ å¯èƒ½çœ‹åˆ°è¿‡è¿™æ ·çš„ values ç›®å½•ï¼švalues-w820dpï¼Œvalues-v11 ç­‰ï¼Œå‰è€… w ä»£è¡¨å¹³æ¿è®¾å¤‡ï¼Œ820dp ä»£è¡¨å±å¹•å®½åº¦ï¼›è€Œ v11 è¿™æ ·ä»£è¡¨åœ¨ API(11)ï¼Œå³ android 3.0 åæ‰ä¼šç”¨åˆ°çš„ã€‚</p><h5 id="ğŸ’¯-raw-ç›®å½•"><a href="#ğŸ’¯-raw-ç›®å½•" class="headerlink" title="ğŸ’¯ raw ç›®å½•"></a>ğŸ’¯ raw ç›®å½•</h5><p>ç”¨äºå­˜æ”¾å„ç§åŸç”Ÿèµ„æº (éŸ³é¢‘ï¼Œè§†é¢‘ï¼Œä¸€äº› XML æ–‡ä»¶ç­‰)ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ openRawResource(int id) æ¥è·å¾—èµ„æºçš„äºŒè¿›åˆ¶æµã€‚å…¶å®å’Œ Assets å·®ä¸å¤šï¼Œä¸è¿‡è¿™é‡Œé¢çš„èµ„æºä¼šåœ¨ R æ–‡ä»¶é‚£é‡Œç”Ÿæˆä¸€ä¸ªèµ„æº id è€Œå·²ã€‚</p><h5 id="ğŸ’¯-åŠ¨ç”»èµ„æº"><a href="#ğŸ’¯-åŠ¨ç”»èµ„æº" class="headerlink" title="ğŸ’¯ åŠ¨ç”»èµ„æº"></a>ğŸ’¯ åŠ¨ç”»èµ„æº</h5><p>animatorï¼šå­˜æ”¾å±æ€§åŠ¨ç”»çš„ XML æ–‡ä»¶ï¼›<br>animï¼šå­˜æ”¾è¡¥é—´åŠ¨ç”»çš„ XML æ–‡ä»¶ï¼›</p><h5 id="ğŸ’¯-å¦‚ä½•ä½¿ç”¨èµ„æº"><a href="#ğŸ’¯-å¦‚ä½•ä½¿ç”¨èµ„æº" class="headerlink" title="ğŸ’¯ å¦‚ä½•ä½¿ç”¨èµ„æº"></a>ğŸ’¯ å¦‚ä½•ä½¿ç”¨èµ„æº</h5><p>æˆ‘ä»¬æ‰€æœ‰çš„èµ„æºæ–‡ä»¶éƒ½ä¼šåœ¨ R.java æ–‡ä»¶ä¸‹ç”Ÿæˆä¸€ä¸ªèµ„æº idï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªèµ„æº id æ¥å®Œæˆèµ„æºçš„è®¿é—®ï¼Œä½¿ç”¨æƒ…å†µæœ‰ä¸¤ç§ï¼šJava ä»£ç ä¸­ä½¿ç”¨å’Œ XML ä»£ç ä¸­ä½¿ç”¨ã€‚</p><ul><li>Java ä»£ç ä¸­ä½¿ç”¨ï¼š</li></ul><p>æ–‡å­—ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">txtName.setText(getResources().getText(R.string.name)); </span><br></pre></td></tr></table></figure><p>å›¾ç‰‡ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">imgIcon.setBackgroundDrawableResource(R.drawable.icon); </span><br></pre></td></tr></table></figure><p>é¢œè‰²ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">txtName.setTextColor(getResouces().getColor(R.color.red)); </span><br></pre></td></tr></table></figure><p>å¸ƒå±€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setContentView(R.layout.main);</span><br></pre></td></tr></table></figure><p>æ§ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">txtName = (TextView)findViewById(R.id.txt_name);</span><br></pre></td></tr></table></figure><ul><li>XML ä»£ç ä¸­ä½¿ç”¨ï¼š</li></ul><p>é€šè¿‡ @xxx å³å¯å¾—åˆ°ï¼Œæ¯”å¦‚è¿™é‡Œè·å–æ–‡æœ¬å’Œå›¾ç‰‡:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;TextView android:text=&quot;@string/hello_world&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:background = &quot;@drawable/img_back&quot;/&gt;</span><br></pre></td></tr></table></figure><p>è¯¥è¯´ä¸è¯´ï¼Œè¿™ä¸ªèµ„æºçš„åˆ†å¸ƒå’Œå¼•ç”¨æ–¹å¼ï¼ŒçœŸçš„æ¯” iOS æ–¹ä¾¿å¾ˆå¤šâ€¦ğŸš°</p><h2 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h2><p><a href="https://developer.android.com/studio/build?hl=zh-cn">å®˜æ–¹æ–‡æ¡£</a></p><blockquote><p>Android Studio ä½¿ç”¨é«˜çº§æ„å»ºå·¥å…·åŒ… <a href="http://www.gradle.org/">Gradle</a> æ¥è‡ªåŠ¨æ‰§è¡Œå’Œç®¡ç†æ„å»ºæµç¨‹ï¼ŒåŒæ—¶ä¹Ÿå…è®¸æ‚¨è‡ªè¡ŒæŒ‡å®šçµæ´»çš„ build é…ç½®ã€‚æ¯é¡¹ build é…ç½®å‡å¯å®šä¹‰å„è‡ªçš„ä¸€ç»„ä»£ç å’Œèµ„æºï¼ŒåŒæ—¶é‡å¤åˆ©ç”¨æ‰€æœ‰åº”ç”¨ç‰ˆæœ¬å…±ç”¨çš„éƒ¨åˆ†ã€‚Android Gradle æ’ä»¶ä¸è¯¥æ„å»ºå·¥å…·åŒ…æ­é…ä½¿ç”¨ï¼Œæä¾›ä¸“ç”¨äºæ„å»ºå’Œæµ‹è¯• Android åº”ç”¨çš„æµç¨‹å’Œå¯é…ç½®è®¾ç½®ã€‚</p><p>Gradle å’Œ Android Gradle æ’ä»¶ç‹¬ç«‹äº Android Studio è¿è¡Œã€‚è¿™æ„å‘³ç€ï¼Œæ‚¨å¯ä»¥åœ¨ Android Studio å†…ã€è®¡ç®—æœºä¸Šçš„å‘½ä»¤è¡Œæˆ–æœªå®‰è£… Android Studio çš„è®¡ç®—æœºï¼ˆå¦‚æŒç»­é›†æˆæœåŠ¡å™¨ï¼‰ä¸Šæ„å»º Android åº”ç”¨ã€‚</p></blockquote><p>å¯¹äºæˆ‘è¿™ç§åˆå­¦è€…æ¥è¯´ï¼ŒçŸ¥é“ Gradle æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–æ„å»ºå·¥å…·ï¼ˆç®¡ç†é¡¹ç›®ä¸­çš„ä¾èµ–ã€æ‰“åŒ…ã€ç¼–è¯‘ï¼‰ã€åŸºäº Groovy çš„ DSLç­‰å°±å¯ä»¥äº†ï¼Œä¸æ€¥ï¼Œåé¢æ…¢æ…¢æ¥ç†è§£ã€‚å¥½å§ï¼Œä¸»è¦æ˜¯æœ‰äº›å†…å®¹æˆ‘æ²¡çœ‹æ‡‚ğŸ¤“ï¼Œä½†æ˜¯ä¸æ€¥ï¼Œå…ˆç”¨èµ·æ¥ã€‚</p><p>é€‰ä¸­ä¸‹æ‹‰èœå• -&gt; Androidï¼Œå¯ä»¥çœ‹åˆ° Gradle Scripts åŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">build.gradle(Project:Tip_Time)</span><br><span class="line">build.gradle(Module :app)</span><br><span class="line">proguard-rules.pro(ProGuard Rules <span class="keyword">for</span> <span class="string">&quot;:app&quot;</span>)</span><br><span class="line">gradle.properties(Project Properties)</span><br><span class="line">gradle.properties(Global Properties)</span><br><span class="line">gradle-wrapper.properties(Gradle Version)</span><br><span class="line">local.properties(SDK Location)</span><br><span class="line">settings.gradle(Project Settings)</span><br></pre></td></tr></table></figure><p>PS: Tip Time å·¥ç¨‹å¤ªç®€å•ï¼Œå¤æ‚çš„é¡¹ç›®åº”è¯¥ä¸æ­¢è¿™äº›æ–‡ä»¶ã€‚</p><h3 id="1ï¸âƒ£-settings-gradle"><a href="#1ï¸âƒ£-settings-gradle" class="headerlink" title="1ï¸âƒ£ settings.gradle"></a>1ï¸âƒ£ settings.gradle</h3><p>(Project Settings)ä½äºé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œæ­¤è®¾ç½®æ–‡ä»¶ä¼šå®šä¹‰é¡¹ç›®çº§ä»“åº“è®¾ç½®ï¼Œå¹¶å‘ŠçŸ¥ Gradle åœ¨æ„å»ºåº”ç”¨æ—¶åº”å°†å“ªäº›æ¨¡å—åŒ…å«åœ¨å†…ã€‚å¤šæ¨¡å—é¡¹ç›®éœ€è¦æŒ‡å®šåº”åŒ…å«åœ¨æœ€ç»ˆ build ä¸­çš„æ¯ä¸ªæ¨¡å—ã€‚å¯èƒ½åŒ…å«ä¸€ä¸‹è¿™å‡ éƒ¨åˆ†ï¼š</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">pluginManagement &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        gradlePluginPortal()</span><br><span class="line">        google()</span><br><span class="line">        mavenCentral()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">dependencyResolutionManagement &#123;</span><br><span class="line">    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)</span><br><span class="line">    repositories &#123;</span><br><span class="line">        google()</span><br><span class="line">        mavenCentral()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">rootProject.name = <span class="string">&quot;Tip Time&quot;</span><span class="comment">//åº”ç”¨åç§°</span></span><br><span class="line">include <span class="string">&#x27;:app&#x27;</span><span class="comment">//æ‰€åŒ…å«çš„æ¨¡å—</span></span><br></pre></td></tr></table></figure><h4 id="âœ…pluginManagement"><a href="#âœ…pluginManagement" class="headerlink" title="âœ…pluginManagement"></a>âœ…pluginManagement</h4><p><code>pluginManagement &#123;repositions &#123;...&#125;&#125;</code> å—ç”¨æ¥é…ç½® Gradle ç”¨äºæœç´¢æˆ–ä¸‹è½½ Gradle æ’ä»¶åŠå…¶å¯ä¼ é€’ä¾èµ–é¡¹çš„å­˜å‚¨åº“ã€‚Gradle é¢„å…ˆé…ç½®äº†å¯¹è¿œç¨‹å­˜å‚¨åº“ï¼ˆå¦‚ JCenterã€Maven Central å’Œ Ivyï¼‰çš„æ”¯æŒã€‚è¿˜å¯ä»¥ä½¿ç”¨æœ¬åœ°å­˜å‚¨åº“æˆ–å®šä¹‰è‡ªå·±çš„è¿œç¨‹å­˜å‚¨åº“ã€‚ä¸Šé¢çš„ä»£ç å®šä¹‰äº† Gradle æ’ä»¶é—¨æˆ·ã€è°·æ­Œçš„ Maven å­˜å‚¨åº“å’Œ Maven ä¸­å¤®å­˜å‚¨åº“ï¼Œä½œä¸º Gradle åº”è¯¥ç”¨æ¥æŸ¥æ‰¾å…¶ä¾èµ–å…³ç³»çš„å­˜å‚¨åº“ã€‚ </p><h4 id="âœ…dependencyResolutionManagement"><a href="#âœ…dependencyResolutionManagement" class="headerlink" title="âœ…dependencyResolutionManagement"></a>âœ…dependencyResolutionManagement</h4><p><code>dependencyResolutionManagement &#123;repositions &#123;...&#125;&#125;</code> ç”¨äºé…ç½®é¡¹ç›®ä¸­æ‰€æœ‰æ¨¡å—ä½¿ç”¨çš„å­˜å‚¨åº“å’Œä¾èµ–é¡¹ï¼Œä¾‹å¦‚ç”¨äºåˆ›å»ºåº”ç”¨ç¨‹åºçš„åº“ã€‚ä½†æ˜¯ï¼Œåº”è¯¥åœ¨æ¯ä¸ªæ¨¡å—çº§ build.gradle æ–‡ä»¶ä¸­é…ç½®ç‰¹å®šäºæ¨¡å—çš„ä¾èµ–é¡¹ã€‚å¯¹äºæ–°é¡¹ç›®ï¼ŒAndroid Studio é»˜è®¤æƒ…å†µä¸‹åŒ…æ‹¬è°·æ­Œçš„ Maven å­˜å‚¨åº“å’Œ Maven ä¸­å¤®å­˜å‚¨åº“ï¼Œä½†å®ƒä¸é…ç½®ä»»ä½•ä¾èµ–é¡¹ï¼ˆé™¤éæˆ‘ä»¬é€‰æ‹©éœ€è¦ä¸€äº›ä¾èµ–é¡¹çš„æ¨¡æ¿ï¼‰ã€‚</p><h3 id="2ï¸âƒ£-build-gradle-Project-Tip-Time"><a href="#2ï¸âƒ£-build-gradle-Project-Tip-Time" class="headerlink" title="2ï¸âƒ£ build.gradle(Project:Tip_Time)"></a>2ï¸âƒ£ build.gradle(Project:Tip_Time)</h3><p>Project çš„æ„å»ºæ–‡ä»¶ã€‚**// Top-level build file where you can add configuration options common to all sub-projects/modules.** ä»è¿™å¥æ³¨é‡Šå¤§æ¦‚èƒ½çœ‹å‡ºå®ƒçš„åœ°ä½äº†ã€‚é¡¶å±‚ <code>build.gradle</code> æ–‡ä»¶ä½äºé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ã€‚å®ƒç”¨äºå®šä¹‰é€‚ç”¨äºé¡¹ç›®ä¸­æ‰€æœ‰æ¨¡å—çš„ä¾èµ–é¡¹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œé¡¶å±‚ build æ–‡ä»¶ä½¿ç”¨ <code>plugins</code> ä»£ç å—å®šä¹‰é¡¹ç›®ä¸­æ‰€æœ‰æ¨¡å—å…±ç”¨çš„ Gradle ä¾èµ–é¡¹ã€‚æ­¤å¤–ï¼Œé¡¶å±‚ build æ–‡ä»¶è¿˜åŒ…å«ç”¨äºæ¸…ç† build ç›®å½•çš„ä»£ç ã€‚</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Top-level build file where you can add configuration options common to all sub-projects/modules.</span></span><br><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;com.android.application&#x27;</span> version <span class="string">&#x27;7.2.2&#x27;</span> apply <span class="literal">false</span></span><br><span class="line">    id <span class="string">&#x27;com.android.library&#x27;</span> version <span class="string">&#x27;7.2.2&#x27;</span> apply <span class="literal">false</span></span><br><span class="line">    id <span class="string">&#x27;org.jetbrains.kotlin.android&#x27;</span> version <span class="string">&#x27;1.7.10&#x27;</span> apply <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task clean(<span class="attr">type:</span> Delete) &#123;</span><br><span class="line">    delete rootProject.buildDir</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3ï¸âƒ£-build-gradle-Module-app"><a href="#3ï¸âƒ£-build-gradle-Module-app" class="headerlink" title="3ï¸âƒ£ build.gradle(Module :app)"></a>3ï¸âƒ£ build.gradle(Module :app)</h3><p>æ¨¡å—çº§ <code>build.gradle</code> æ–‡ä»¶ä½äºæ¯ä¸ª <code>project/module/</code> ç›®å½•ä¸­ï¼Œç”¨äºä¸ºå…¶æ‰€åœ¨çš„ç‰¹å®šæ¨¡å—é…ç½® build è®¾ç½®ã€‚å¯ä»¥é€šè¿‡é…ç½®è¿™äº› build è®¾ç½®æä¾›è‡ªå®šä¹‰æ‰“åŒ…é€‰é¡¹ï¼ˆå¦‚é¢å¤–çš„ build ç±»å‹å’Œäº§å“å˜ç§ï¼‰ï¼Œä»¥åŠæ›¿æ¢ <code>main/</code> åº”ç”¨æ¸…å•æˆ–è€…é¡¶å±‚ <code>build.gradle</code> æ–‡ä»¶ä¸­çš„è®¾ç½®ã€‚</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id <span class="string">&#x27;com.android.application&#x27;</span></span><br><span class="line">    id <span class="string">&#x27;org.jetbrains.kotlin.android&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    compileSdk <span class="number">33</span><span class="comment">//è®¾ç½®ç¼–è¯‘æ—¶ç”¨çš„Androidç‰ˆæœ¬</span></span><br><span class="line"></span><br><span class="line">    buildFeatures &#123;</span><br><span class="line">        viewBinding = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        applicationId <span class="string">&quot;com.example.tiptime&quot;</span><span class="comment">//é¡¹ç›®çš„åŒ…å</span></span><br><span class="line">        minSdk <span class="number">28</span><span class="comment">//é¡¹ç›®æœ€ä½å…¼å®¹çš„ç‰ˆæœ¬</span></span><br><span class="line">        targetSdk <span class="number">33</span><span class="comment">//é¡¹ç›®çš„ç›®æ ‡ç‰ˆæœ¬</span></span><br><span class="line">        versionCode <span class="number">1</span><span class="comment">//ç‰ˆæœ¬å·</span></span><br><span class="line">        versionName <span class="string">&quot;1.0&quot;</span><span class="comment">//ç‰ˆæœ¬åç§°</span></span><br><span class="line"></span><br><span class="line">        testInstrumentationRunner <span class="string">&quot;androidx.test.runner.AndroidJUnitRunner&quot;</span><span class="comment">//è¡¨æ˜è¦ä½¿ç”¨AndroidJUnitRunnerè¿›è¡Œå•å…ƒæµ‹è¯•</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled <span class="literal">false</span></span><br><span class="line">            proguardFiles getDefaultProguardFile(<span class="string">&#x27;proguard-android-optimize.txt&#x27;</span>), <span class="string">&#x27;proguard-rules.pro&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    compileOptions &#123;</span><br><span class="line">        sourceCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">        targetCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">    &#125;</span><br><span class="line">    kotlinOptions &#123;</span><br><span class="line">        jvmTarget = <span class="string">&#x27;1.8&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;<span class="comment">//è¯¥æ¨¡å—çš„ä¾èµ–å…³ç³»</span></span><br><span class="line"></span><br><span class="line">    implementation <span class="string">&#x27;androidx.core:core-ktx:1.7.0&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;androidx.appcompat:appcompat:1.6.1&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;com.google.android.material:material:1.9.0&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;androidx.constraintlayout:constraintlayout:2.1.4&#x27;</span></span><br><span class="line">    testImplementation <span class="string">&#x27;junit:junit:4.13.2&#x27;</span></span><br><span class="line">    androidTestImplementation <span class="string">&#x27;androidx.test.ext:junit:1.1.5&#x27;</span></span><br><span class="line">    androidTestImplementation <span class="string">&#x27;androidx.test.espresso:espresso-core:3.5.1&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="âœ…plugins"><a href="#âœ…plugins" class="headerlink" title="âœ…plugins"></a>âœ…plugins</h4><p>æŒ‡å®š <code>android &#123;&#125;</code> å—ä½¿ç”¨çš„æ„å»ºé€‰é¡¹ã€‚</p><ul><li>com.android.application - è¡¨ç¤ºè¯¥æ¨¡å—ä¸ºåº”ç”¨ç¨‹åºæ¨¡å—ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œï¼Œæ‰“åŒ…å¾—åˆ°çš„æ˜¯.apk æ–‡ä»¶ï¼›</li><li>com.android.library - è¡¨ç¤ºè¯¥æ¨¡å—ä¸ºåº“æ¨¡å—ï¼Œåªèƒ½ä½œä¸ºä»£ç åº“ä¾é™„äºåˆ«çš„åº”ç”¨ç¨‹åºæ¨¡å—æ¥è¿è¡Œï¼Œæ‰“åŒ…å¾—åˆ°çš„æ˜¯.aaræ–‡ä»¶ï¼›</li><li>org.jetbrains.kotlin.android - è¡¨ç¤ºè¯¥æ¨¡å—ä½¿ç”¨ kotlin å¼€å‘ã€‚</li></ul><h4 id="âœ…android"><a href="#âœ…android" class="headerlink" title="âœ…android"></a>âœ…android</h4><p>æŒ‡å®šè¯¥æ¨¡å—çš„å„ç§æ„å»ºå±æ€§ã€‚</p><h4 id="âœ…dependencies"><a href="#âœ…dependencies" class="headerlink" title="âœ…dependencies"></a>âœ…dependencies</h4><p>æŒ‡å®šä»…æ„å»ºè¯¥æ¨¡å—æœ¬èº«æ‰€éœ€çš„ä¾èµ–é¡¹ã€‚</p><h3 id="4ï¸âƒ£-Properties"><a href="#4ï¸âƒ£-Properties" class="headerlink" title="4ï¸âƒ£ Properties"></a>4ï¸âƒ£ Properties</h3><p>Gradle çš„å±æ€§æ–‡ä»¶ï¼Œé¡¹ç›®å…¨å±€çš„é…ç½®(å¦‚ AndroidX ç­‰)ã€æ„å»ºçš„å…¨å±€é…ç½®(ä¾‹å¦‚ç½‘ç»œä»£ç†ç­‰)ã€æœ¬åœ°ç¯å¢ƒçš„é…ç½®(å¦‚ SDK çš„è·¯å¾„ç­‰)ã€‚</p><p>gradle.properties(Project Properties)<br>gradle.properties(Global Properties)<br>local.properties(SDK Location)</p><p><a href="https://cloud.tencent.com/developer/article/1742368">çœ‹åˆ°ä¸€ç¯‡æ¯”è¾ƒç»†è‡´çš„æ–‡ç« ï¼Œä¸è¿‡æœ‰äº›é…ç½®é¡¹æ¯”è¾ƒè€äº†ğŸ”½</a></p><h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><p>ä»…ç”¨äºè®°å½•å­¦ä¹ è¿‡ç¨‹ï¼Œä¸å…·å¤‡æŒ‡å¯¼æ€§ã€‚ğŸ¤“</p><p><a href="https://github.com/ATommyGirl/android">Demo-Github</a></p><hr><p>ä¸‹ä¸€æ—¥ç›®æ ‡ï¼šè†œæ‹œä¸€ä¸‹å››å¤§ç»„ä»¶ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android æ‰“å¡ Day1 - å°ç›®æ ‡</title>
      <link href="/2023/06/29/android_day1/"/>
      <url>/2023/06/29/android_day1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><p>æ˜¨å¤©å¿™å®Œå·¥ä½œï¼Œè„‘å­çªç„¶ä¸€çƒ­å¯¹å®‰å“äº§ç”Ÿäº†å…´è¶£ï¼Œå› ä¸ºå¬å‘¨å›´çš„äººè®¨è®ºé—®é¢˜æŒºæœ‰æ„æ€ï¼Œäºæ˜¯ä¹â€¦ä»Šå¤©å¼€æ•´ã€‚</p><p>å…ˆå®šä¸‰ä¸ªå°ç›®æ ‡ï¼š</p><ol><li>Hello World!</li><li>Dice Roller</li><li>Tip Time</li></ol><p>å¯¹ Android äº†è§£ç”šå°‘ï¼Œä»Šå¤©ä¸»è¦ç›®çš„æ˜¯å€ŸåŠ©ä¸¤ä¸ªå° demo æ¥è§¦ä¸€ä¸‹ Android Studio å’Œ Android å·¥ç¨‹ç»“æ„ã€‚</p><h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World!"></a>Hello World!</h2><p>ä¸šç•Œä¼—æ‰€å‘¨çŸ¥ï¼Œä¸‡ç‰©çš†å§‹äº<strong>Hello World</strong>ï¼Œæ¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€éƒ½é€ƒä¸è¿‡çš„å®šå¾‹ã€‚ä½†æ˜¯ï¼ŒAndroid Studio æ–°å»ºä¸€ä¸ªç©ºçš„ Activityï¼Œç•Œé¢ä¸­é—´å°±æ˜¯ä¸€ä¸ª Hello World!ï¼Œå¥½å§ï¼Œè¿™ä¸ªç›®æ ‡è‡ªåŠ¨å®Œæˆï¼Œå“ˆå“ˆã€‚Next~</p><span id="more"></span><h2 id="Dice-Roller"><a href="#Dice-Roller" class="headerlink" title="Dice Roller"></a>Dice Roller</h2><p>çœ‹åˆ°å‡ ä¸ª Android æ•™ç¨‹éƒ½æ˜¯ä»¥æ‘‡éª°å­ä½œä¸ºæ¡ˆä¾‹ï¼Œéšæ‰‹ç‚¹å¼€ä¸€ä¸ªè§†é¢‘è·Ÿç€å†™äº†ä¸€ä¸‹ï¼š</p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/dice_roller.png" style="zoom: 33%;"><p>å¿½ç•¥é…è‰²ï¼Œç›®å‰ä¸é‡è¦ğŸ¤“ã€‚æ‹–æ‹–æ‹½æ‹½å‡ ä¸ªæ§ä»¶ã€éšæœºæ‘‡åˆ°æ•°å­—ã€éšæœºå±•ç¤ºå›¾ç‰‡â€¦åˆæ­¥æ„Ÿå—ï¼š</p><ol><li>ä¸ Android Studio ç›¸æ¯”ï¼ŒXcode ç®€ç›´æ˜¯ä¸ªå‘†å­ï¼Œä»–ä»¬çš„ç¼–è¯‘å™¨ä¹Ÿå¤ªå¥½ç”¨äº†ï¼›</li><li>å¯¹äºå¸ƒå±€æ–‡ä»¶ï¼Œæ—¢å¯ä»¥é€šè¿‡å›¾å½¢ç•Œé¢æ¥æ“ä½œï¼Œä¹Ÿå¯ä»¥é€šè¿‡ xml æ–‡ä»¶æ¥ä¿®æ”¹ï¼Œè¿™ä¸€ç‚¹æ˜¯ç›®å‰ iOS åšä¸åˆ°çš„ï¼›</li><li>å„æ§ä»¶å¸ƒå±€æ—¶çš„çº¦æŸå…³ç³»ï¼Œä¸ªäººè§‰å¾—æ²¡æœ‰ iOS çš„ AutoLayout æ™ºèƒ½å’Œä¸¥è°¨ï¼›</li><li>å…³äºéšæœºå±•ç¤ºéª°å­ç‚¹æ•°çš„å›¾ç‰‡ï¼š</li></ol><p>å‡è®¾å…­å¼ å›¾ç‰‡å¯¹åº” 1~6 çš„ç‚¹æ•°ï¼Œå›¾ç‰‡åç§°ä¸€èˆ¬å¯èƒ½å®šä¹‰ä¸º dice_1ã€dice_2ã€dice_3ã€dice_4ã€dice_5ã€dice_6ï¼Œåœ¨ iOS ä¸­çš„åšæ³•å¯èƒ½ä¼šæ˜¯</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç”¨ä¼ªä»£ç ä»£æ›¿</span></span><br><span class="line">num = random [<span class="number">1</span>,<span class="number">6</span>] ä½œä¸ºæ‘‡åˆ°çš„ç‚¹æ•°</span><br><span class="line">imageName = <span class="string">&quot;dice_&quot;</span> + num.toString æ‹¼æ¥å›¾ç‰‡åç§°</span><br><span class="line">image = Image.withName(imageName)</span><br><span class="line">imageView.setImage(image)</span><br></pre></td></tr></table></figure><p>æˆ‘çœ‹åœ¨ Android ä¸­ï¼Œå›¾ç‰‡èµ„æºä¼šæ”¾åœ¨å·¥ç¨‹ä¸­çš„ res -&gt; drawable æ–‡ä»¶å¤¹ä¸‹ï¼Œé€šè¿‡å½¢å¦‚ R.drawable.dice_1 è·å–å›¾ç‰‡çš„ idï¼ŒR.drawable å°±å¯¹åº” res -&gt; drawableã€‚é—®äº†ä¸€ä¸‹å®‰å“åŒäº‹ã€è°·æ­Œäº†å‡ ä¸ªåšå®¢å¾ˆå¤šéƒ½è¯´åªé€šè¿‡è¿™ç§æ–¹å¼æ¥åšï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…ˆæŠŠå›¾ç‰‡éƒ½æ”¾åˆ°ä¸€ä¸ªé›†åˆä¸­</span></span><br><span class="line"><span class="comment">//random åˆ°çš„æ•°å­—ä½œä¸º indexï¼Œå†è¯»å–å¯¹åº”çš„â€œéšæœºâ€å›¾ç‰‡</span></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">rollDice</span><span class="params">()</span></span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">val</span> num = (<span class="number">1.</span><span class="number">.6</span>).random()</span><br><span class="line">  <span class="keyword">val</span> images = arrayOf(</span><br><span class="line">      R.drawable.dice_1,</span><br><span class="line">      R.drawable.dice_2,</span><br><span class="line">      R.drawable.dice_3,</span><br><span class="line">      R.drawable.dice_4,</span><br><span class="line">      R.drawable.dice_5,</span><br><span class="line">      R.drawable.dice_6</span><br><span class="line">  )</span><br><span class="line">  diceImageView.setImageResource(images[num-<span class="number">1</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£å¦‚æœæœ‰ 100 å¼ å›¾ç‰‡ï¼Œä¹Ÿè¦éƒ½æ”¾åˆ°æ•°ç»„ä¸­å—ï¼Ÿä¸è§£ï¼Œæ˜¯ä¸ºäº†ä¿è¯å›¾ç‰‡ä¸€å®šå­˜åœ¨ï¼Ÿï¼Ÿã€‚ç¿»äº†ç¿»æ–‡æ¡£+é—®åŒå­¦ï¼Œæ‰¾åˆ°å¦ä¸€ä¸ª APIï¼Œå¯ä»¥é€šè¿‡å­—ç¬¦ä¸²æ¥æ‹¼æ¥å›¾ç‰‡åç§°ï¼Œä¸è¿‡æˆ‘ä¸æ¸…æ¥šè¿™ç§æ–¹å¼æœ‰æ²¡æœ‰ä»€ä¹ˆéšå«çš„æŠ€æœ¯é—®é¢˜ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">rollDice</span><span class="params">()</span></span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">val</span> num = (<span class="number">1.</span><span class="number">.6</span>).random()</span><br><span class="line">  <span class="keyword">val</span> imageName = <span class="string">&quot;dice_<span class="variable">$num</span>&quot;</span></span><br><span class="line">  diceImage.setImageResource(getDrawableResource(<span class="keyword">this</span>, imageName))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">fun</span> <span class="title">getDrawableResource</span><span class="params">(context: <span class="type">Context</span>, name: <span class="type">String</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">val</span> packageName = context.packageName</span><br><span class="line">    <span class="keyword">return</span> context.resources.getIdentifier(name, <span class="string">&quot;drawable&quot;</span>, packageName)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Tip-Time"><a href="#Tip-Time" class="headerlink" title="Tip Time"></a>Tip Time</h2><p>å¦ä¸€ä¸ª demo æ˜¯ç”¨äºè®¡ç®—å°è´¹çš„ï¼š</p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/tip_time.png" style="zoom:33%;"><ol><li>when è¯­æ³•å—è¿˜æŒºä¼˜é›…ï¼š</li></ol><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> tipPercentage = <span class="keyword">when</span>(binding.radioGroup.checkedRadioButtonId) &#123;</span><br><span class="line">    R.id.amazing_21 -&gt; <span class="number">0.21</span></span><br><span class="line">    R.id.good_16 -&gt; <span class="number">0.16</span></span><br><span class="line">    <span class="keyword">else</span> -&gt; <span class="number">0.10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><strong>View binding</strong> è§†å›¾ç»‘å®šã€‚å¯¹äºå¿«é€Ÿæ„å»ºç®€å•çš„é¡µé¢è¿˜æ˜¯æŒºæ–¹ä¾¿çš„ã€‚è¿™ä¸€ç‚¹è²Œä¼¼ä¹Ÿæ¯” iOS æ–¹ä¾¿ï¼Œä¸éœ€è¦è®¾ç½®æ’åº§å˜é‡ã€æ‹–æ¥æ‹–å»çš„â€œç”µçº¿â€ï¼Œä½†æ˜¯ Android ä¸­æ¯ä¸€ä¸ªæ§ä»¶éƒ½éœ€è¦æ‰‹åŠ¨è®¾ç½® id?â€¦Ummmmmï¼š</li></ol><p><a href="https://developer.android.google.cn/topic/libraries/view-binding?hl=en">View binding å®˜æ–¹æ–‡æ¡£</a></p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// build.gradle(Module:xxx.app) ä¸­æ‰“å¼€è§†å›¾ç»‘å®šçš„é…ç½®</span></span><br><span class="line">android &#123;</span><br><span class="line">    ...</span><br><span class="line">    buildFeatures &#123;</span><br><span class="line">        viewBinding = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹Ÿå¯ä»¥åœ¨æŸä¸ªä¸æƒ³ä½¿ç”¨è§†å›¾ç»‘å®šçš„é¡µé¢ä¸­å¿½ç•¥å®ƒ</span></span><br><span class="line">&lt;LinearLayout</span><br><span class="line">        ...</span><br><span class="line">        tools:viewBindingIgnore=<span class="string">&quot;true&quot;</span> &gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/LinearLayout&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨ Activity ä¸­ä½¿ç”¨è§†å›¾ç»‘å®š</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">lateinit</span> <span class="keyword">var</span> binding: ActivityMainBinding</span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">    binding = ActivityMainBinding.inflate(layoutInflater)</span><br><span class="line">    setContentView(binding.root)</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// ä½¿ç”¨è§†å›¾ç»‘å®šæ¥å¼•ç”¨è§†å›¾</span></span><br><span class="line">binding.calculate.setOnClickListener &#123;</span><br><span class="line">  calculateTip()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> tipPercentage = <span class="keyword">when</span>(binding.radioGroup.checkedRadioButtonId) &#123;</span><br><span class="line">    R.id.amazing_21 -&gt; <span class="number">0.21</span></span><br><span class="line">    R.id.good_16 -&gt; <span class="number">0.16</span></span><br><span class="line">    <span class="keyword">else</span> -&gt; <span class="number">0.10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å¸ƒå±€æ–‡ä»¶ä¸­æŒ‡å®šè§†å›¾ id è²Œä¼¼ä¸€èˆ¬æ˜¯ç”¨å°å†™å•è¯å¹¶ä»¥ _ ä¸‹åˆ’çº¿éš”å¼€ï¼Œâ€™android:id=â€@+id/radio_groupâ€ é€šè¿‡ R æ¥å¼•ç”¨è§†å›¾æ˜¯å½¢å¦‚ R.id.radio_groupï¼Œid è¿˜æ˜¯å°å†™çš„ã€‚ä½†æ˜¯å½“é€šè¿‡è§†å›¾ç»‘å®šæ¥å¼•ç”¨çš„è¯ï¼Œid ä¼šè‡ªåŠ¨å˜ä¸ºé©¼å³°çš„å½¢å¼ï¼Œradio_group è¢«å¼•ç”¨æ—¶å½¢å¦‚ binding.radioGroupã€‚</p><ol start="3"><li>è¯´åˆ° RadioGroupï¼ŒAndroid çš„ç³»ç»Ÿç»„ä»¶ä¹Ÿå¤ªä¸°å¯Œäº†å§ï¼Œéƒ½æ˜¯ç°æˆçš„ï¼ŒiOS æ²¡æœ‰â€¦å‡ ä¹å¾ˆå¤šç»„ä»¶éƒ½éœ€è¦è‡ªå·±æ¥ç»˜åˆ¶ã€‚è¿˜æœ‰ï¼Œæåˆ° Switch ç»„ä»¶ï¼Œå°±æ›´å¤§æ— è¯­äº†ï¼ŒAndroid é‡Œçš„ Switch è¿˜è‡ªå¸¦æ–‡æœ¬ï¼ŒiOS ç³»ç»Ÿæä¾›çš„ Switch ç»„ä»¶è¿™ä¹ˆå¤šå¹´äº†è¿æ”¹å¤§å°éƒ½ä¸è¡Œï¼Œå•Šå•Šå•Šå•Šå•Šï¼Œå®¶äººä»¬è°æ‡‚å•Šï¼Œå¥½æƒ³éª‚äººã€‚è¿™æ ·æƒ³æ¥ Android å¼€å‘è€…ä¹Ÿå¤ªå¹¸ç¦äº†å§ã€‚ğŸ¤¡</li><li>åœ¨ Android Studio ç¼–è¾‘é¡µé¢ä¸­çš„å˜é‡/å‚æ•°ä¸‹é¢å‡ºç°ä¸‹åˆ’çº¿ï¼Œæ˜¯æŒ‡è¯¥å˜é‡ä¸º Reassigned parameterï¼Œå³è¯¥å˜é‡å¯ä»¥è¢«å¤šæ¬¡èµ‹å€¼ã€‚val æ˜¯åªè¯»å˜é‡ï¼Œvar æ˜¯å¯å˜å˜é‡ã€‚è¿˜å¯ä»¥è®¾ç½®ä¸‹åˆ’çº¿çš„æ ·å¼ï¼Œè®¾ç½®çš„ä½ç½® ï¼š Editor -&gt; Color Scheme -&gt; Language Defaults -&gt; Identifiers -&gt; Reassigned parametersã€‚</li></ol><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/var_line.jpg" style="zoom:67%;"><h2 id="Error"><a href="#Error" class="headerlink" title="Error"></a>Error</h2><p>Demo æœŸé—´é‡åˆ°äº†å¥½å¤šä¸ªé”™è¯¯â€¦å½“ç„¶ï¼Œæˆ‘ä¸€ç‚¹ä¹Ÿçœ‹ä¸æ‡‚æ˜¯ä¸ºä»€ä¹ˆï¼Œå¸Œæœ›åé¢å­¦ä¹ æ·±å…¥ä»¥åèƒ½ææ¸…æ¥šï¼š</p><h3 id="âŒ-6-issues-were-found-when-checking-AAR-metadata"><a href="#âŒ-6-issues-were-found-when-checking-AAR-metadata" class="headerlink" title="âŒ: 6 issues were found when checking AAR metadata:"></a>âŒ: 6 issues were found when checking AAR metadata:</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">6</span> issues were found <span class="keyword">when</span> checking AAR metadata:</span><br><span class="line"></span><br><span class="line">  <span class="number">1.</span>  Dependency <span class="string">&#x27;androidx.appcompat:appcompat-resources:1.6.1&#x27;</span> requires libraries and applications that</span><br><span class="line">      depend on it to compile against version <span class="number">33</span> or later of the</span><br><span class="line">      Android APIs.</span><br><span class="line"></span><br><span class="line">      :app <span class="keyword">is</span> currently compiled against android-<span class="number">32.</span></span><br><span class="line"></span><br><span class="line">      Recommended action: Update <span class="keyword">this</span> project to use a newer compileSdkVersion</span><br><span class="line">      of at least <span class="number">33</span>, <span class="keyword">for</span> example <span class="number">33.</span></span><br><span class="line"></span><br><span class="line">      Note that updating a library or application<span class="string">&#x27;s compileSdkVersion (which</span></span><br><span class="line"><span class="string">      allows newer APIs to be used) can be done separately from updating</span></span><br><span class="line"><span class="string">      targetSdkVersion (which opts the app in to new runtime behavior) and</span></span><br><span class="line"><span class="string">      minSdkVersion (which determines which devices the app can be installed</span></span><br><span class="line"><span class="string">      on).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">...</span></span><br></pre></td></tr></table></figure><p>æ˜¯è¯´é€‰æ‹©çš„ android ç‰ˆæœ¬å¤ªä½äº†å—ï¼Ÿä½†æ˜¯å†™éª°å­çš„æ—¶å€™è¿˜æ˜¯å¯ä»¥çš„ï¼Œç®—å°è´¹çš„æ—¶å€™å°±ä¸è¡Œäº†â€¦æ”¹äº†ä¸€ä¸‹é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    compileSdk 33</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="âš ï¸-Use-SwitchCompat-from-AppCompat-or-SwitchMaterial-from-Material-library"><a href="#âš ï¸-Use-SwitchCompat-from-AppCompat-or-SwitchMaterial-from-Material-library" class="headerlink" title="âš ï¸: Use SwitchCompat from AppCompat or SwitchMaterial from Material library."></a>âš ï¸: Use SwitchCompat from AppCompat or SwitchMaterial from Material library.</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Use SwitchCompat from AppCompat or SwitchMaterial from Material library  Use SwitchCompat from AppCompat or SwitchMaterial from Material library  Issue id: UseSwitchCompatOrMaterialXml  Vendor: Android Open Source Project Identifier: androidx.appcompat Feedback: https:<span class="comment">//issuetracker.google.com/issues/new?component=460343 </span></span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/notthin/article/details/121903846">å‚è€ƒçš„è¿™é‡Œï¼š</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch</span><br><span class="line">android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">    android:layout_height=&quot;wrap_content&quot; /&gt;</span><br><span class="line">    </span><br><span class="line">//æ”¹ä¸º</span><br><span class="line"></span><br><span class="line">&lt;androidx.appcompat.widget.SwitchCompat</span><br><span class="line">android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">android:layout_height=&quot;wrap_content&quot;/&gt;</span><br></pre></td></tr></table></figure><p>å› ä¸º Switch å¯¹äºæ—§ç‰ˆæœ¬çš„ Android æœ‰ä¸åŒçš„å¤–è§‚ã€‚åˆ™ä½¿ç”¨ SwitchCompat å¯ä»¥ä¸ºæ‰€æœ‰ Android ç‰ˆæœ¬æä¾›ä¸€è‡´çš„å¤–è§‚ã€‚</p><blockquote><p>SwitchCompat æ˜¯æ ¸å¿ƒ Switch æ§ä»¶çš„å®Œæ•´å‘åç§»æ¤ç‰ˆï¼Œå®ƒå°†è¯¥æ§ä»¶çš„è§†è§‰æ•ˆæœå’ŒåŠŸèƒ½å¸¦åˆ°äº†æ—§ç‰ˆæœ¬çš„å¹³å°ã€‚ä¸æ­¤åŒ…ä¸­çš„å…¶ä»–æ§ä»¶ä¸åŒï¼ŒSwitchCompat ä¸ä¼šè‡ªåŠ¨ç”¨äºä½¿ç”¨è¯¥å…ƒç´ çš„å¸ƒå±€ä¸­ã€‚ç›¸åï¼Œæ‚¨éœ€è¦åœ¨å¸ƒå±€ä¸­æ˜¾å¼ä½¿ç”¨ &lt;androidx.appcompat.widget.SwitchCompat&gt; å’ŒåŒ¹é…çš„å±æ€§ã€‚</p></blockquote><h3 id="âŒ-system-process-E-JavaBinder-FAILED-BINDER-TRANSACTION-parcel-size-108"><a href="#âŒ-system-process-E-JavaBinder-FAILED-BINDER-TRANSACTION-parcel-size-108" class="headerlink" title="âŒ: system_process E/JavaBinder: !!! FAILED BINDER TRANSACTION !!! (parcel size = 108)"></a>âŒ: system_process E/JavaBinder: !!! FAILED BINDER TRANSACTION !!! (parcel size = 108)</h3><p>ä¸çŸ¥é“ã€‚</p><h3 id="âš ï¸-Unknown-attribute-android-importantForAutofill"><a href="#âš ï¸-Unknown-attribute-android-importantForAutofill" class="headerlink" title="âš ï¸: Unknown attribute android:importantForAutofill"></a>âš ï¸: Unknown attribute android:importantForAutofill</h3><p>ä¸çŸ¥é“ã€‚</p><h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h2><p>ä»…ç”¨äºè®°å½•å­¦ä¹ è¿‡ç¨‹ï¼Œä¸å…·å¤‡æŒ‡å¯¼æ€§ã€‚ğŸ¤“</p><p><a href="https://github.com/ATommyGirl/android">Demo-Github</a></p><hr><p>ä¸‹ä¸€æ—¥ç›®æ ‡ï¼šäº†è§£ SDK versionã€Android versionã€Gradle ä¹‹é—´çš„å…³ç³»ã€å·¥ç¨‹ç»“æ„ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UICollectionView å›¾ç‰‡é—ªçƒ</title>
      <link href="/2023/06/16/SDWebImage_blink/"/>
      <url>/2023/06/16/SDWebImage_blink/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><p>&#8195;&#8195;å‰ä¸¤å¤©æµ‹è¯•æäº†ä¸€ä¸ªé—®é¢˜ï¼Œä¸æ–¹ä¾¿å‘å›¾ç‰‡å’Œè§†é¢‘ï¼Œé‚£å…ˆç®€å•æè¿°ä¸€ä¸‹ App æ„é€ ï¼šApp æ˜¯ç±»ä¼¼é’‰é’‰çš„ä¸€ä¸ªåŠå…¬è½¯ä»¶ï¼Œé¦–é¡µä¹Ÿæ˜¯ç±»ä¼¼é’‰é’‰ã€ŒåŠå…¬ä¸“åŒºã€çš„é¡µé¢ã€‚æµ‹è¯•åé¦ˆä»åå°å›åˆ°å‰å°æ—¶ï¼Œåªè¦ Tab åˆ‡æ¢åˆ°é¦–é¡µï¼Œé¦–é¡µä¸­ UICollectionView çš„éƒ¨åˆ†å›¾æ ‡å°±ä¸€å®šä¼šé—ªä¸€ä¸‹ï¼›å¦‚æœåœ¨å‰å°åˆ‡æ¢ Tab é¡µç­¾çš„è¯ï¼Œå¶å°”èƒ½å¤ç°â€¦</p><p>&#8195;&#8195;ç”¨äº†è¿™ä¹ˆä¹…çš„ UICollectionViewï¼Œæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡é‡åˆ°è¿™ç§æƒ…å†µï¼Œä¸€å¼€å§‹ç”šè‡³æŠŠé”…ä¸¢ç»™äº†è‹¹æœï¼Œä¸ç¦æ„Ÿå¹äº†ä¸€ä¸‹è‹¹æœç³»ç»Ÿåšçš„è¶Šæ¥è¶Šä¸ç¨³å®šğŸ¤“ï¼›æ²¡åŠæ³•ï¼Œè¿™ç§ç”©é”…çš„è¡Œä¸ºä¹Ÿä¸æ˜¯å’±çš„ä½œé£ï¼Œå¼€å§‹è§£å†³å§ï¼š<br>&#8195;&#8195;çœ‹åˆ°å¾ˆå¤šç½‘å‹éƒ½åœ¨è®¨è®º UICollectionViewCell é—ªçƒçš„é—®é¢˜ï¼ŒæŠŠè§£å†³é—®é¢˜çš„æ–¹å‘ä¹Ÿå®šåœ¨äº†è¿™é‡Œï¼Œé’ˆå¯¹ UICollectionView çš„ reload æ—¶æœºã€é¢‘ç‡ã€Cell å¤ç”¨æœºåˆ¶ã€åˆ‡æ¢å¤šçº¿ç¨‹ï¼Œå„ç§æ–¹æ¡ˆå°è¯•äº†ä¸€ä¸ªéï¼Œå†ç»ä¸¤å¤©ä¸€æ™šçš„æ—¶é—´ï¼Œæˆ‘æˆåŠŸæŠŠå®ƒæ”¹çš„æ¯ä¸€æ¬¡éƒ½é—ªçƒäº†å‘¢ï¼ŒçœŸæ£’ğŸ˜‚â€¦â€¦å›¾æ ‡é—ªçƒçš„é€Ÿåº¦ä¹Ÿæ˜¯ç›¸å½“å¿«ï¼Œå¿«åˆ°è‚‰çœ¼çœ‹ä¸æ¸…ï¼Œçªç„¶æƒ³èµ·æ¥å½•ä¸ªå±ã€è‡ªå·±ä¸åœçš„å›æ”¾ã€æ…¢æ”¾ã€æ¥å›æ‹–æ‹½è¿›åº¦æ¡â€¦ç»ˆäºæ‰¾åˆ°äº†å…ƒå‡¶ â€“ <code>SDWebImage</code>ï¼Œé—ªçƒçš„å›¾æ ‡ä¼šå…ˆå±•ç¤ºç›®æ ‡å›¾ç‰‡ã€åˆå±•ç¤ºäº†ä¸€æ¬¡å ä½å›¾ã€åˆå±•ç¤ºäº†ä¸€æ¬¡ç›®æ ‡å›¾ç‰‡ï¼Œå ä½å›¾æ˜¯ä¸€ä¸ªç©ºä½å›¾ï¼Œæ‰€ä»¥è§†è§‰ä¸Šçœ‹åˆ°çš„æ˜¯é—ªçƒä¸€ä¸‹ã€‚</p><center>    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/sd_1.png" class width="100"></div> -->    <div style="display:inline-block;margin-left:10px;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/sd_0.png" class width="100"></div>-->    <div style="display:inline-block;margin-left:10px;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/sd_1.png" class width="100"></div></center><p>å…³äº UICollectionView é—ªçƒçš„é—®é¢˜ï¼Œå°è±¡ä¸­çœ‹çš„å‡ ç¯‡æ–‡ç« ï¼Œæœ‰å…´è¶£çš„è‡ªå·±çœ‹å§ï¼Œæˆ‘ä¸æƒ³è½¬è½½äº†ï¼Œçœ‹åˆ°å®ƒä»¬å¤´ç–¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">https://stackoverflow.com/questions/23740782/uicollectionview-reloaddata-but-view-blinks</span><br><span class="line">https://blog.csdn.net/u013712343/article/details/126748755</span><br><span class="line">https://maweefeng.github.io/15766567217978.html</span><br><span class="line">https://www.jianshu.com/p/94f3912c3e8a</span><br></pre></td></tr></table></figure><p>å…³äºä½¿ç”¨ SDWebImage é—ªçƒçš„é—®é¢˜ï¼Œå…¶å® SDK ä¸­å·²ç»ç»™å‡ºäº†è§£å†³æ–¹æ¡ˆï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * By default, when the memory cache miss, we query the disk cache asynchronously. This mask can force to query disk cache (when memory cache miss) synchronously.</span></span><br><span class="line"><span class="comment"> * @note These 3 query options can be combined together. For the full list about these masks combination, see wiki page.</span></span><br><span class="line"><span class="comment"> * @note Query data synchronously is not recommend, unless you want to ensure the image is loaded in the same runloop to avoid flashing during cell reusing.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">SDWebImageQueryDiskDataSync = <span class="number">1</span> &lt;&lt; <span class="number">14</span>,</span><br></pre></td></tr></table></figure><p>@note Query data synchronously is not recommend, unless you want to ensure the image is loaded in the same runloop to <strong>avoid flashing during cell reusing</strong>.</p><p>SDK ä¸­å·²ç»ç»™å‡ºäº†éå¸¸æ˜ç¡®çš„æ³¨é‡Šï¼Œä¸€å¼€å§‹çš„æ–¹å‘å®Œå…¨æ˜¯é”™è¯¯çš„ã€‚å“­ç¬‘ä¸å¾—ï¼Œæ—¶é—´éƒ½æµªè´¹äº†ï¼Œæ‰€ä»¥ä¸€å®šè¦å…ˆææ¸…æ¥šé—®é¢˜çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Œè°‹å®šè€ŒååŠ¨ï¼Œè€Œä¸”æ€ä¹ˆæŠŠå†…åŠŸå¿ƒæ³•å¿˜äº†å‘¢ï¼š<strong>RTFSC - Read the fucking source code.</strong> </p><hr><p>SDWebImageOptions çš„æ³¨é‡Šç¿»è¯‘ï¼š</p><table style="border: 1px solid #C1C1C1;rules: rows;frame: box;cellpadding: 3px;">      <caption style="border: 0.5px solid #C1C1C1;color: #29B177;">SDWebImageOptions æ³¨é‡Šç¿»è¯‘</caption>    <thead style="border: 0.5px solid #C1C1C1;">      <tr>        <th scope="col" style="border: 0.5px solid #C1C1C1;color: #29B177;">Option</th>        <th scope="col" style="border: 0.5px solid #C1C1C1;color: #29B177;">æ³¨é‡Š</th>      </tr>    </thead>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageRetryFailed</td>        <td style="border: 0.5px solid #C1C1C1">ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ªURLä¸‹è½½å¤±è´¥åä¼šè¢«åŠ å…¥é»‘åå•ç»„ç»‡ä¸‹æ¬¡ä¸‹è½½ï¼Œå¦‚æœè®¾ç½®äº†è¿™ä¸ªoptionï¼Œåˆ™ä¸ä¼šåŠ å…¥é»‘åå•ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageLowPriority</td>        <td style="border: 0.5px solid #C1C1C1">é»˜è®¤æƒ…å†µä¸‹å›¾ç‰‡ä¼šåœ¨äº¤äº’å‘ç”Ÿæ—¶å¼€å§‹ä¸‹è½½ï¼Œè®¾ç½®äº†è¿™ä¸ªoptionå›¾ç‰‡å°±ä¼šå»¶è¿Ÿä¸‹è½½ï¼Œä¾‹å¦‚æ»‘åŠ¨ TableView æ—¶ï¼Œä¼šåœ¨ scrollview å‡é€Ÿæ—¶æ‰å¼€å§‹ä¸‹è½½ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageProgressiveLoad</td>        <td style="border: 0.5px solid #C1C1C1">è¿™ä¸ªoptionæ˜¯å¯ç”¨äº†æ¸è¿›å¼ä¸‹è½½ï¼Œåƒç½‘é¡µåŠ è½½ä¸€æ ·ä¸€ç‚¹ä¸€ç‚¹æ˜¾ç¤ºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸€æ¬¡æ˜¾ç¤ºå®Œå…¨ä¸‹è½½çš„å›¾ç‰‡ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageRefreshCached</td>        <td style="border: 0.5px solid #C1C1C1">å¯¹ç¼“å­˜è¿›è¡Œåˆ·æ–°ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageContinueInBackground</td>        <td style="border: 0.5px solid #C1C1C1">åå°ç»§ç»­ä¸‹è½½ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageHandleCookies</td>        <td style="border: 0.5px solid #C1C1C1">é€šè¿‡è®¾ç½® NSMutableURLRequest.HTTPShouldHandleCookies = YES; å¤„ç† Cookieã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageAllowInvalidSSLCertificates</td>        <td style="border: 0.5px solid #C1C1C1">å…è®¸ä½¿ç”¨ä¸å—ä¿¡ä»»çš„SSLè¯ä¹¦ï¼Œä¸€èˆ¬ç”¨äºæµ‹è¯•ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageHighPriority</td>        <td style="border: 0.5px solid #C1C1C1">é»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾ç‰‡æŒ‰ç…§ä»–ä»¬åŠ è½½ä¸‹è½½é˜Ÿåˆ—ä¸­çš„é¡ºåºä¸‹è½½ï¼Œè¿™ä¸ª option æé«˜ä¸‹è½½ä¼˜å…ˆçº§ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageDelayPlaceholder</td>        <td style="border: 0.5px solid #C1C1C1">é»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾ç‰‡å¼€å§‹åŠ è½½å°±æ˜¾ç¤ºé»˜è®¤å›¾ç‰‡ï¼Œè¿™ä¸ª option å»¶è¿Ÿäº†é»˜è®¤å›¾çš„æ˜¾ç¤ºçŸ¥é“å›¾ç‰‡åŠ è½½å®Œæˆã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageTransformAnimatedImage</td>        <td style="border: 0.5px solid #C1C1C1">é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¸ä¼šå¯¹ä¸‹è½½çš„å›¾ç‰‡è¿›è¡Œå˜æ¢ï¼Œå› ä¸ºå¯èƒ½å¯¹å›¾ç‰‡é€ æˆæŸä¼¤ï¼Œè¿™ä¸ª option å¯ä»¥è®©æˆ‘ä»¬å¯¹å›¾ç‰‡è¿›è¡Œä»»æ„å˜æ¢ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageAvoidAutoSetImage</td>        <td style="border: 0.5px solid #C1C1C1">é»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾ç‰‡åœ¨ä¸‹è½½åè¢«è‡ªåŠ¨æ·»åŠ åˆ°imageViewä¸Šã€‚è¿™ä¸ª option å¯ä»¥è®©æˆ‘ä»¬æ‰‹åŠ¨æ·»åŠ å›¾ç‰‡åˆ° imageView ä¸Šã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageScaleDownLargeImages</td>        <td style="border: 0.5px solid #C1C1C1">å½“ä¸‹è½½çš„å›¾ç‰‡å¤ªå¤§æ—¶ï¼Œå…è®¸æŠŠå®ƒç¼©å°åˆ°ä¸€ä¸ªåˆé€‚çš„å¤§å°å†æ˜¾ç¤ºã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageQueryMemoryData</td>        <td style="border: 0.5px solid #C1C1C1">é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“imageå·²ç»ç¼“å­˜åˆ°å†…å­˜ä¸­æ—¶ï¼Œä¸ä¼šå†æŸ¥è¯¢imageDataï¼Œè¿™ä¸ª option å¯ä»¥è®¾ç½®åŒæ—¶æŸ¥è¯¢imageDataï¼Œè¿™ä¸ªæŸ¥è¯¢æ˜¯å¼‚æ­¥çš„ï¼Œé™¤éæŒ‡å®š&#39;SDWebImageQueryMemoryDataSync&#39;ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageQueryMemoryDataSync</td>        <td style="border: 0.5px solid #C1C1C1">é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ åªæŒ‡å®š&#39;SDWebImageQueryMemoryData&#39;æ—¶ï¼Œä¼šå¼‚æ­¥æŸ¥è¯¢å†…å­˜imageDataã€‚ç»“åˆæ­¤æ©ç å¯ä»¥åŒæ­¥æŸ¥è¯¢ã€‚ä½†ä¸å»ºè®®åŒæ­¥æŸ¥è¯¢ï¼Œé™¤éä½ æƒ³ç¡®ä¿å›¾åƒåŠ è½½åœ¨åŒä¸€ä¸ªrunloopä¸­ï¼Œä»¥é¿å…å•å…ƒæ ¼é‡ç”¨æ—¶é—ªçƒã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageQueryDiskDataSync</td>        <td style="border: 0.5px solid #C1C1C1">é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“å†…å­˜ç¼“å­˜ä¸¢å¤±æ—¶ï¼Œå¼‚æ­¥æŸ¥è¯¢ç£ç›˜ç¼“å­˜ã€‚è¯¥optionå¯ä»¥å¼ºåˆ¶åŒæ­¥æŸ¥è¯¢ç£ç›˜ç¼“å­˜ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageFromCacheOnly</td>        <td style="border: 0.5px solid #C1C1C1">è¿™ä¸ª option å¯ä»¥è®¾ç½®åªå…è®¸ä»ç¼“å­˜ä¸­è·å–å›¾ç‰‡ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageFromLoaderOnly</td>        <td style="border: 0.5px solid #C1C1C1">è¿™ä¸ª option å¯ä»¥è®¾ç½®åªå…è®¸ä»åŠ è½½å™¨åŠ è½½å›¾ç‰‡ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageForceTransition</td>        <td style="border: 0.5px solid #C1C1C1">é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ ä½¿ç”¨â€œSDWebImageTransitionâ€åœ¨å›¾åƒåŠ è½½å®Œæˆååšä¸€äº›è§†å›¾è½¬æ¢æ—¶ï¼Œè¿™ä¸ªè½¬æ¢åªé€‚ç”¨äºä»ç½‘ç»œä¸‹è½½çš„å›¾åƒã€‚è¿™ä¸ªoptionå¯ä»¥å¼ºåˆ¶åº”ç”¨å†…å­˜å’Œç£ç›˜ç¼“å­˜çš„è§†å›¾ä¹Ÿè½¬æ¢ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageAvoidDecodeImage</td>        <td style="border: 0.5px solid #C1C1C1">é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†åœ¨æŸ¥è¯¢ç¼“å­˜æˆ–è€…ä»ç½‘ç»œä¸‹è½½ä¹‹åç›´æ¥è§£ç å›¾åƒã€‚è¿™æœ‰åŠ©äºæé«˜æ€§èƒ½ï¼Œå› ä¸ºåœ¨å±å¹•ä¸Šå‘ˆç°å›¾åƒæ—¶ï¼Œé¦–å…ˆéœ€è¦å¯¹å…¶è¿›è¡Œè§£ç ã€‚ä½†è¿™å‘ç”Ÿåœ¨Core Animationçš„ä¸»é˜Ÿåˆ—ä¸Šã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªè¿›ç¨‹å¯èƒ½ä¼šå¯¼è‡´å†…å­˜ä½¿ç”¨è¿‡å¤§ã€‚å¦‚æœç”±äºå†…å­˜æ¶ˆè€—è¿‡å¤šè€Œé‡åˆ°é—®é¢˜ï¼Œæ­¤optionå¯ä»¥é˜»æ­¢å¯¹å›¾åƒè¿›è¡Œè§£ç ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageDecodeFirstFrameOnly</td>        <td style="border: 0.5px solid #C1C1C1">é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šå¯¹åŠ¨å›¾è¿›è¡Œè§£ç ã€‚è¿™ä¸ªoptionå¼ºåˆ¶åªè§£ç ç¬¬ä¸€å¸§å¹¶äº§ç”Ÿé™æ€å›¾åƒã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImagePreloadAllFrames</td>        <td style="border: 0.5px solid #C1C1C1">é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯¹äºSDAnimatedImageï¼Œæ˜¯åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­è§£ç åŠ¨ç”»å›¾åƒå¸§ä»¥å‡å°‘å†…å­˜ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œå½“åŠ¨ç”»å›¾åƒè¢«è®¸å¤šimageViewså…±äº«æ—¶ï¼Œå¯ä»¥æŒ‡å®šå°†åŠ¨å›¾æ‰€æœ‰å¸§é¢„åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œä»¥å‡å°‘CPUå ç”¨ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageMatchAnimatedImageClass</td>        <td style="border: 0.5px solid #C1C1C1">ä½¿ç”¨è¿™ä¸ªoptionï¼Œå¯ä»¥ç¡®ä¿æŒ‰ç…§ç”¨æˆ·æä¾›çš„ç±»å›è°ƒç›¸åº”å›¾åƒã€‚å¦‚æœæ— æ³•ç”Ÿæˆï¼Œåˆ™ä¼šä½¿ç”¨ä»£ç â€œSDWebImageErrorBadImageDataâ€çš„é”™è¯¯ã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageWaitStoreCache</td>        <td style="border: 0.5px solid #C1C1C1">ç­‰å¾…å›¾ç‰‡å†™å…¥ç¼“å­˜å®Œæˆå†å›è°ƒã€‚</td>    </tr>    <tr>        <td style="border: 0.5px solid #C1C1C1">SDWebImageTransformVectorImage</td>        <td style="border: 0.5px solid #C1C1C1">ä¸€èˆ¬æƒ…å†µä¸‹ä¸ä¼šå¯¹çŸ¢é‡å›¾åƒåšå˜æ¢ï¼Œå› ä¸ºçŸ¢é‡å›¾åƒåœ¨åšå˜æ¢æ—¶ä¼šä¸¢å¤±ç»†èŠ‚ã€‚è¿™ä¸ªoption å¯ä»¥éšæ„è½¬æ¢çŸ¢é‡å›¾ã€‚</td>    </tr></table>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼€å§‹æ‡‚äº†</title>
      <link href="/2023/06/14/let_it_go/"/>
      <url>/2023/06/14/let_it_go/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><video controls src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/Tommy.mp4" type="video/mp4">æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæ’­æ”¾è¯¥è§†é¢‘ï¼</video></p><h2 id="çˆ±æƒ…æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#çˆ±æƒ…æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="çˆ±æƒ…æ˜¯ä»€ä¹ˆï¼Ÿ"></a>çˆ±æƒ…æ˜¯ä»€ä¹ˆï¼Ÿ</h2><hr><p>æŸå¤©æ™šä¸Š 11 ç‚¹å¤šçªç„¶é—®äº†èåœå›ä¸€ä¸ªé—®é¢˜ï¼šâ€ä½ è§‰å¾—çˆ±æƒ…æ˜¯ä»€ä¹ˆï¼Ÿâ€œã€‚ä»–è¯´ï¼šâ€çˆ±æƒ…å°±æ˜¯ä½ çµ®çµ®å¨å¨åŠä¸ªå¤šå°æ—¶ï¼Œä¸è®©æˆ‘ç¡è§‰ï¼Œæˆ‘å´æ²¡æœ‰æ‰“ä½ ã€‚â€â€¦ğŸ¤“â€¦å‡¶å·´å·´ã€‚</p><p>è¿™å‡ å¤©é—®äº†å¥½å¤šäººè¿™ä¸ªé—®é¢˜â€¦â€¦</p><h3 id="æˆ‘é‚£å¯¹äºç½‘æ‹æœ€æœ‰å‘è¨€æƒçš„å¥½é—ºèœœè¯´"><a href="#æˆ‘é‚£å¯¹äºç½‘æ‹æœ€æœ‰å‘è¨€æƒçš„å¥½é—ºèœœè¯´" class="headerlink" title="æˆ‘é‚£å¯¹äºç½‘æ‹æœ€æœ‰å‘è¨€æƒçš„å¥½é—ºèœœè¯´"></a>æˆ‘é‚£å¯¹äºç½‘æ‹æœ€æœ‰å‘è¨€æƒçš„å¥½é—ºèœœè¯´</h3><p>æ¢ç´¢å†…å¿ƒçš„è¿‡ç¨‹[æ—ºæŸ´]ï¼Œåªæœ‰è¿‡ç¨‹ã€‚å°±æ˜¯çˆ±æƒ…ã€‚<br>éš¾é“ä¸æ˜¯ä¹ˆï¼Œé‡åˆ°ä»€ä¹ˆäººï¼Œä¼šæœ‰ä»€ä¹ˆæ„Ÿè§‰ï¼Œä»€ä¹ˆååº”ï¼Œé«˜å…´ï¼Œéš¾è¿‡ï¼Œæ„ŸåŠ¨ï¼Œæ‚”æ¨ï¼Œå¾ˆç¥å¥‡çš„ä¸œè¥¿ï¼Œä»æ¥ä¸ä¼šè€ƒè™‘ç»“æœï¼Œåªæœ‰è¿‡ç¨‹[æ—ºæŸ´]ã€‚</p><h3 id="å¤šå¹´æœªè§çš„è€åŒå­¦è¯´"><a href="#å¤šå¹´æœªè§çš„è€åŒå­¦è¯´" class="headerlink" title="å¤šå¹´æœªè§çš„è€åŒå­¦è¯´"></a>å¤šå¹´æœªè§çš„è€åŒå­¦è¯´</h3><p>æˆ‘è§‰å¾—çˆ±æƒ…æ˜¯ï¼š<br>å¦‚æœæ˜¯å°æ—¶å€™ä¼šè§‰å¾—çˆ±æƒ…æ˜¯æƒ³å¿µï¼Œæ€»ä¼šæœ‰æ„æ— æ„ä¸­æƒ³çŸ¥é“å¯¹æ–¹çš„åŠ¨å‘ï¼Œä¼šå› ä¸ºå¯¹æ–¹çš„è¡Œä¸ºå¼€å¿ƒæˆ–è€…ç”Ÿæ°”ï¼Œä¼šè‡ªç§çš„æƒ³å æœ‰ã€‚<br>å¦‚æœæˆç†Ÿåè§‰å¾—çˆ±æƒ…æ˜¯ç›¸å®ˆã€æ˜¯å½¼æ­¤å°Šé‡ï¼Œèƒ½å¤Ÿç»™å½¼æ­¤ç©ºé—´ï¼Œæ˜¯äº²æƒ…å¤§äºæ–°é²œæ„Ÿåè¿˜ä¾ç„¶èƒ½å¤Ÿä¸ç¦»ä¸å¼ƒå§ï¼Œæ˜¯å……åˆ†ç£¨åˆåèµ°è¿›å©šå§»ï¼Œå³ä¾¿ç›¸éš”å¾ˆè¿œéƒ½èƒ½å¤Ÿåœ¨ç›¸äº’å¸å¼•ä¸‹ä¸ä¼šåèˆªï¼Œæ˜¯å¤±å»çš„ç¬é—´ä¼šå¿ƒå¾ˆç–¼ã€‚</p><h3 id="ç»ç‰ˆå•èº«ç‹—è¯´"><a href="#ç»ç‰ˆå•èº«ç‹—è¯´" class="headerlink" title="ç»ç‰ˆå•èº«ç‹—è¯´"></a>ç»ç‰ˆå•èº«ç‹—è¯´</h3><p>ç›¸äº’éœ€è¦å§ã€‚<br>å°±æ˜¯æœ‰åˆ†äº«æ¬²  ä»€ä¹ˆäº‹æƒ…éƒ½æƒ³å’Œå¯¹æ–¹è¯´ã€‚<br>è¿™ä¹ˆè¯´å§ã€‚é—ºèœœå’Œå“¥ä»¬æ˜¯é”¦ä¸Šæ·»èŠ±ã€‚<br>ä½ å’‹æƒ³èµ·æ¥é—®è¿™ä¸ªâ€¦</p><p>æ‰€ä»¥ä½ çœ‹ï¼Œå•èº«éƒ½æ˜¯æœ‰åŸå› çš„ã€‚ğŸ˜‚</p><h3 id="æœ€è¿‘å¤±æ„çš„äººè¯´"><a href="#æœ€è¿‘å¤±æ„çš„äººè¯´" class="headerlink" title="æœ€è¿‘å¤±æ„çš„äººè¯´"></a>æœ€è¿‘å¤±æ„çš„äººè¯´</h3><p>çˆ±æƒ…æœ¬å°±æ˜¯è‡ªç§çš„ï¼Œæœ‰å æœ‰æ¬²å’Œå¹´é¾„æ— å…³ï¼Œä½†ä¹Ÿæ˜¯æ— ç§çš„ï¼Œä¸ä¼šè®¡è¾ƒå¾—å¤±ã€æƒè¡¡åˆ©å¼Šçš„å»åçˆ±ä¸€ä¸ªäººï¼Œæ‰€è°“çš„ç£¨åˆä¹Ÿæ˜¯æ„¿æ„ä¸ºå¯¹æ–¹å»æ”¹å˜ï¼Œè€Œä¸æ˜¯ä¸€ç§â€œåº”è¯¥â€œä¸ºå¯¹æ–¹æ”¹å˜è‡ªå·±çš„è§‚å¿µï¼›è‰¯å¥½çš„å…³ç³»é‡Œï¼Œä¸¤ä¸ªäººæ˜¯å½¼æ­¤æˆå°±ã€å½¼æ­¤æˆå…¨ï¼Œè¿˜æœ‰æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯å…±åŒè¿›æ­¥ï¼Œæœ‰ä¸€æ–¹æ‡ˆæ€ äº†å°±å®¹æ˜“èµ°æ•£ï¼›å°Šé‡å’Œç©ºé—´å°±ä¸ç”¨è¯´äº†ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä¸€ç›´å¾ˆçœ‹é‡çš„ã€‚</p><h3 id="ç¢ç£¨å…ˆç”Ÿè¯´-å¿ƒç†å­¦å¦‚ä½•å®šä¹‰çˆ±æƒ…"><a href="#ç¢ç£¨å…ˆç”Ÿè¯´-å¿ƒç†å­¦å¦‚ä½•å®šä¹‰çˆ±æƒ…" class="headerlink" title="ç¢ç£¨å…ˆç”Ÿè¯´ - å¿ƒç†å­¦å¦‚ä½•å®šä¹‰çˆ±æƒ…"></a>ç¢ç£¨å…ˆç”Ÿè¯´ - å¿ƒç†å­¦å¦‚ä½•å®šä¹‰çˆ±æƒ…</h3><p>  æ¯ä¸ªäººè¯´èµ·çˆ±æƒ…ï¼Œéƒ½æœ‰ä¸€å¥—è‡ªå·±çš„ç†è®ºï¼Œæ¯”å¦‚æˆ‘çš„ç†è®ºæ˜¯è¿™æ ·çš„ï¼š</p><p>  æˆ‘ä¸çŸ¥é“çˆ±æ˜¯ä»€ä¹ˆï¼Œä½†æˆ‘çŸ¥é“çˆ±ä¸æ˜¯ä»€ä¹ˆã€‚çˆ±ä¸æ˜¯å æœ‰ï¼Œå› ä¸ºä½ çš„å­˜åœ¨ï¼Œå¥¹æ›´èƒ½äº«å—åˆ°è‡ªç”±ã€‚çˆ±ä¸æ˜¯å¨èƒï¼Œå› ä¸ºä½ çš„å­˜åœ¨ï¼Œå¥¹æ›´èƒ½æ„Ÿåˆ°å®‰å…¨ã€‚çˆ±ä¸æ˜¯æ”¹å˜ï¼Œå› ä¸ºä½ çš„å­˜åœ¨ï¼Œå¥¹æ›´èƒ½å‘ç°è‡ªå·±çš„ç¾å¥½ã€‚çˆ±ä¸æ˜¯è‡ªæˆ‘å¯‚å¯çš„æ»¡è¶³ï¼Œå½“å½¼æ­¤é è¿‘æ—¶ï¼Œè§‰å¾—ç”Ÿå‘½ä»æ­¤å®Œæ•´ï¼Œä¸ç®¡å‘¨é­ç¯å¢ƒå¦‚ä½•æ¶åŠ£ï¼Œå¿ƒä¸­éƒ½å……æ»¡äº†é™è°§ã€‚</p><p>  æˆ‘æ¯•ç«Ÿæ˜¯ä¸ªæ–‡ç§‘ç”Ÿï¼Œå¯¹çˆ±æƒ…çš„å®šä¹‰è¿˜æ˜¯ä»æ„Ÿæ€§çš„è§’åº¦å‡ºå‘ï¼Œé‚£ä¹ˆå¿ƒç†å­¦åˆ°åº•å¦‚ä½•å®šä¹‰çˆ±æƒ…å‘¢ï¼Ÿæˆ‘ä»¬å¬å¬ç½—ä¼¯ç‰¹Â·æ–¯å¦ä¼¯æ ¼æ•™æˆçš„ç ”ç©¶ã€‚å¦‚æœä½ ä¹‹å‰å¬è¿‡ä»–åœ¨è€¶é²å¤§å­¦è®²çš„ã€Šå¿ƒç†å­¦å¯¼è®ºã€‹ï¼Œåº”è¯¥å¯¹ä»–ä¸ä¼šé™Œç”Ÿã€‚</p><p>  æ ¹æ®ç½—ä¼¯ç‰¹Â·æ–¯å¦ä¼¯æ ¼æ•™æˆçš„ç ”ç©¶ï¼ŒæŠŠçˆ±æƒ…å®šä¹‰ä¸ºä¸‰ä¸ªè¦ç´ çš„ç»„åˆï¼Œè¿™ä¸‰ä¸ªè¦ç´ åˆ†åˆ«æ˜¯ï¼š</p><pre><code>äº²å¯†ï¼ˆIntimacyï¼‰ï¼›æ¿€æƒ…ï¼ˆPassionï¼‰ï¼›æ‰¿è¯ºï¼ˆCommitmentï¼‰ã€‚</code></pre><p>  äº²å¯†å°±æ˜¯ä¸¤ä¸ªäººåˆ†äº«ç§˜å¯†ï¼Œå½¼æ­¤å¦è¯šï¼Œè€Œä¸”æœ‰äº›è¯åªè·Ÿå¯¹æ–¹è¯´èµ·ï¼Œæ²¡äº‹å°±è…»æ­ªåœ¨ä¸€èµ·èŠå¤©ã€‚</p><p>  æ¿€æƒ…å°±æ˜¯æ€§çš„å†²åŠ¨ï¼Œè‚‰ä½“çš„å¸å¼•ï¼Œè·Ÿå¯¹æ–¹åœ¨ä¸€èµ·å°±ä¼šæ¬²ç«ç„šèº«ï¼Œæœ‰åŸå§‹çš„å†²åŠ¨ã€‚</p><p>  æ‰¿è¯ºå°±æ˜¯ç”¨è¡ŒåŠ¨ç»´ç³»è¿™æ®µæ„Ÿæƒ…ï¼Œä¸€èµ·åˆ›é€ æœªæ¥ï¼Œèµ°è¿›å©šå§»ï¼Œç›¸ä¼´ç»ˆè€ã€‚</p><p>  æˆ‘å°è¯•ç€æŠŠä¸‰ä¸ªå› ç´ çš„ç»„åˆç”»äº†ä¸€å¼ è¡¨ï¼Œå¦‚ä¸‹ï¼š</p>  <img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/letitgo0.png" style="zoom:67%;"><p>  å¦‚ä¸Šè¡¨æ‰€ç¤ºï¼Œå¯ä»¥æŠŠå…³ç³»ç»„åˆæˆå…«ç§æƒ…å†µï¼š</p><p>  ç¬¬ä¸€ç§æƒ…å†µï¼Œæ²¡æœ‰ç§˜å¯†å¯ä»¥åˆ†äº«ï¼Œä¹Ÿæ²¡æœ‰æ¿€æƒ…ï¼Œä¹Ÿæ²¡æœ‰æ‰¿è¯ºï¼Œè¿™å°±æ˜¯åŒ†åŒ†è¿‡å®¢ï¼Œèæ°´ç›¸é€¢ï¼Œå•¥éƒ½è°ˆä¸ä¸Šã€‚è¿™å°±æ˜¯æ— çˆ±ï¼Œå¾ˆå¤šäººè·Ÿè‡ªå·±åº”è¯¥éƒ½æ˜¯æ— çˆ±ï¼Œè¿™ä¸ªä¸–ç•Œä¸Šä¸æ˜¯æ¯ä¸ªäººéƒ½è¦è·Ÿè‡ªå·±å‘ç”Ÿå…³ç³»çš„ï¼Œå¤§éƒ¨åˆ†äººéƒ½æ˜¯ä½ å¥½æˆ‘å¥½å¤§å®¶å¥½ï¼Œé€¢åœºä½œæˆï¼Œç„¶åæ¡æ‰‹å†è§ã€‚</p><p>  ç¬¬äºŒç§æƒ…å†µï¼Œå–œæ¬¢åˆ†äº«ç§˜å¯†ï¼Œä½†æ²¡æœ‰æ€§å†²åŠ¨ï¼Œä¹Ÿä¸å¯¹æœªæ¥çš„å…³ç³»æŒä¹…æœ‰æ‰¿è¯ºï¼Œè¿™å°±ä»…ä»…æ˜¯å–œæ¬¢ã€‚å¥½æœ‹å‹ä¹Ÿå¯ä»¥æ˜¯è¿™ç§æƒ…å†µï¼Œèƒ½è·Ÿä½ åœ¨ä¸€èµ·è¯´è¯´è¯å°±å¾ˆæ£’ã€‚æˆ‘ä»¬è¯´çš„çº¢é¢œçŸ¥å·±ï¼Œæˆ–è€…è“é¢œçŸ¥å·±éƒ½æ˜¯è¿™ç§æƒ…å†µã€‚é‡åˆ°çƒ¦å¿ƒäº‹ï¼Œæ‰“ä¸ªç”µè¯å°±å‡ºæ¥ååï¼ŒèŠå®Œå„å›å„å®¶ã€‚</p><p>  ç¬¬ä¸‰ç§æƒ…å†µï¼Œå½¼æ­¤ä¸åˆ†äº«ç§˜å¯†ï¼Œä¹Ÿä¸å¯¹æœªæ¥æœ‰æ‰¿è¯ºï¼Œä½†æ˜¯åœ¨ä¸€èµ·éå¸¸æœ‰æ¿€æƒ…ï¼Œè§äº†é¢ä¹°ä¸€å †é›¶é£Ÿï¼Œç„¶åå¼€å§‹äº²çƒ­ï¼Œé¥¿äº†åƒï¼Œåƒäº†äº²çƒ­ã€‚æƒ³æƒ³ä¹Ÿæ˜¯æ€ªç´¯çš„ï¼Œè¿™å«è¿·æ‹å¼çˆ±æƒ…ï¼Œä¸€è§å°±é’Ÿæƒ…ï¼Œä¸‰å¤©å°±ç»“å©šï¼Œå¾€å¾€ä¸€æ®µçˆ±æƒ…çš„å¼€å§‹é˜¶æ®µéƒ½æ˜¯è¿™ä¸ªçŠ¶æ€ã€‚</p><p>  ç¬¬å››ç§æƒ…å†µï¼Œä¸è·Ÿå¯¹æ–¹åˆ†äº«ç§˜å¯†ï¼Œä¹Ÿä¸äº²çƒ­ï¼Œåªæ˜¯å¯¹å½¼æ­¤æœ‰æ‰¿è¯ºï¼Œè¿™å«ç©ºæ´çš„çˆ±ã€‚æˆ–è®¸æ˜¯å› ä¸ºå®¶åº­ï¼Œæˆ–è®¸æ˜¯å› ä¸ºå­©å­ï¼Œæˆ–è®¸æ˜¯å› ä¸ºå£°èª‰ï¼Œä½†æ˜¯â€œä¸€ä¸åšäºŒä¸ä¼‘â€ï¼Œå°±è¿™ä¹ˆè€—ç€ã€‚å¥½åƒå¾ˆå¤šè²Œåˆç¥ç¦»çš„å©šå§»éƒ½æ˜¯è¿™ç§æƒ…å†µï¼Œæƒ³æƒ³éƒ½å¥½å¯æ‚²ã€‚</p><p>  ç¬¬äº”ç§æƒ…å†µï¼Œå½¼æ­¤åˆ†äº«ç§˜å¯†ï¼Œä¹Ÿå¯¹å½¼æ­¤èº«ä½“éå¸¸è¿·æ‹ï¼Œä½†ä¸å¯¹æœªæ¥æœ‰æ‰¿è¯ºï¼Œå°±æ˜¯ä¸è°ˆç»“å©šè¿™ç§äº‹æƒ…ï¼Œè¿™å«æµªæ¼«çš„çˆ±ã€‚æˆ‘é‡åˆ°è¿‡ä¸€äº›è¿™æ ·çš„æœ‹å‹ï¼ŒåŒå±…å¤šå¹´ï¼Œå…³ç³»ä¹Ÿå¥½å¾—å¾ˆï¼Œå‡ºé—¨èµ°ä¸¤æ­¥éƒ½è¿˜è¦äº²å˜´çš„é‚£ç§ï¼Œä½†å°±æ˜¯ä¸ç»“å©šã€‚æˆ–è®¸æ˜¯å› ä¸ºè§‰å¾—ç»“å©šä¼šèƒŒè´Ÿå¤ªå¤šçš„å‹åŠ›å§ï¼Œæˆ–è®¸å°±æ˜¯å•çº¯ä¸å–œæ¬¢ä¸ˆæ¯å¨˜å§ï¼Œè°çŸ¥é“å‘¢ã€‚</p><p>  ç¬¬å…­ç§æƒ…å†µï¼Œå½¼æ­¤åˆ†äº«ç§˜å¯†ï¼Œä¹Ÿå¯¹æœªæ¥æœ‰æ‰¿è¯ºï¼Œè¦å¥½å¥½åœ¨ä¸€èµ·ï¼Œä½†æ˜¯å½¼æ­¤æ²¡æœ‰æ¿€æƒ…ï¼Œè¿™æ˜¯å‹è°Šã€‚å…¶å®æˆ‘è§‰å¾—ä¸¤å£å­æ—¥å­è¿‡ä¹…äº†ï¼Œå·®ä¸å¤šéƒ½æ˜¯è¿™æ ·å§ã€‚åœ¨ä¸€èµ·å°±åƒå·¦æ‰‹æ‘¸å³æ‰‹ï¼Œä¸€ç‚¹æ„Ÿè§‰éƒ½æ²¡æœ‰ã€‚ä½†æ˜¯è¿˜æœ‰è¯å¯ä»¥è¯´ï¼Œè¿˜æœ‰å©šå§»è¦ç»´ç³»ã€‚å‘ƒï¼ŒæŸæ‹‰å›¾å¼çš„çˆ±æƒ…åº”è¯¥æ˜¯è¿™ç§å§ã€‚</p><p>  ç¬¬ä¸ƒç§æƒ…å†µï¼Œå½¼æ­¤æ²¡å¤šå°‘è¯å¯ä»¥è¯´ï¼Œä½†å¯ä»¥å˜¿å’»ï¼Œä¹Ÿå¯ä»¥ç»“å©šã€‚è¿™å«æ„šæ˜§çš„çˆ±ã€‚æˆ‘æƒ³ä¹Ÿæ˜¯å•Šï¼Œä¸¤ä¸ªäººæ²¡ä»€ä¹ˆè¯å¯ä»¥è¯´ï¼Œä»…ä»…æ˜¯å› ä¸ºå¯ä»¥å˜¿å’»è€Œç»“å©šï¼Œå¾ˆå®¹æ˜“å‡ºè½¨çš„å§ï¼Ÿçˆ±æƒ…å¾ˆé‡è¦çš„åœ¨äºå¯ä»¥å½¼æ­¤ç†è§£ã€‚å¼ å°å¨´ä¸æ˜¯è¯´ï¼šâ€œé‡åˆ°çˆ±é‡åˆ°æ€§éƒ½ä¸æ˜¯ç¨€ç½•äº‹ï¼Œç¨€ç½•çš„æ˜¯é‡åˆ°ç†è§£ã€‚â€</p><p>  ç¬¬å…«ç§æƒ…å†µï¼Œæœ‰å¾ˆå¤šè¯å¯ä»¥è¯´ï¼Œä¹Ÿå¯ä»¥å˜¿å’»ï¼Œä¹Ÿå¯¹æœªæ¥æœ‰æ‰¿è¯ºã€‚å—¯ï¼Œè¿™ç®—æ˜¯çœŸçˆ±äº†ã€‚è¿™å¥½åƒæ²¡å•¥å¥½è§£é‡Šçš„ï¼Œé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ å°±å«äº†å§ã€‚</p><p>  åˆ†æå®Œäº†ï¼Œæˆ‘è¿˜è´´å¿ƒåœ°ç»™åšäº†ä¸€ä¸ªç©ºç™½çš„è¡¨ï¼Œä½ å¯ä»¥è‡ªå·±å¡«å†™ä¸€ä¸‹ï¼Œçœ‹çœ‹ä½ å‘¨å›´çš„äººéƒ½å±äºå“ªä¸ªæ ¼å­ï¼Œç„¶åä½ å°±çŸ¥é“è¯¥å¦‚ä½•å¤„ç†è¿™ä¸ªå…³ç³»äº†ã€‚</p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/letitgo1.png" style="zoom:67%;"><p>â€”â€” æ‘˜å½•æ¥è‡ªã€Šä»¥å¹½é»˜çš„æ–¹å¼è¿‡ä¸€ç”Ÿã€‹ç¢ç£¨å…ˆç”Ÿ<br><a href="https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewBook?id=0">https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewBook?id=0</a><br>æ­¤ææ–™å¯èƒ½å—ç‰ˆæƒä¿æŠ¤ã€‚</p><hr><p>ç°åœ¨æ›´æ„¿æ„ç›¸ä¿¡ï¼šçˆ±æƒ…åªæ˜¯ä¸€ä¸ªè¿‡ç¨‹ï¼Œä½•å¿…æ¿€åŠ¨ç€è¦ç†ç”±ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> è¯»ä¹¦ </tag>
            
            <tag> æˆ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¶å®ä½ æ²¡é‚£ä¹ˆé‡è¦</title>
      <link href="/2023/06/07/Not_important/"/>
      <url>/2023/06/07/Not_important/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><video controls src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/Tommy.mp4" type="video/mp4">æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæ’­æ”¾è¯¥è§†é¢‘ï¼</video></p><p>çªç„¶é‡Šæ€€çš„ç¬‘ã€‚</p><hr><p>&#8195;&#8195;å‰ä¸¤å¤©ä¸€ä¸ªåŒäº‹å’Œæˆ‘ç¢ç¢å¿µï¼šâ€æˆ‘ä¸€ç›´ä»¥ä¸ºå’ŒæŸä¸ªåŒäº‹å…³ç³»æŒºå¥½çš„ï¼Œä»–æœ‰é—®é¢˜æˆ‘å°±å¸®ä»–ï¼Œç»“æœæˆ‘æœ‰é—®é¢˜çš„æ—¶å€™ï¼Œä»–éƒ½æ²¡æœ‰å‡†å¤‡ä»æ¤…å­ä¸Šç«™èµ·æ¥ï¼Œæˆ‘å°±ä¸‹æ¥¼æŠ½äº†æ ¹çƒŸï¼Œç„¶åå°±æƒ³æ˜ç™½äº†â€¦â€œ ä¹ä¸€å¬æœ‰ç‚¹åƒå°å­¦ç”Ÿåµæ¶äº†ä¼¼çš„ï¼Œå“ˆå“ˆï¼ŒåŒäº‹é©¬ä¸Šå°±å¼€å§‹å¯¹è‡ªå·±çš„äººé™…å…³ç³»ã€äººæ€§å±•å¼€äº†åæ€ï¼Œå¯¹æ–¹æœ‰é”™å—ï¼Ÿæ²¡é”™ã€‚é”™åªé”™åœ¨æˆ‘ä»¬å¸¸å¸¸è‡ªä»¥ä¸ºè‡ªå·±å¾ˆé‡è¦ï¼Œå¯æ˜¯è‡ªä»¥ä¸ºè¿™ä¸ªä¸œè¥¿ï¼Œç»ˆç©¶éƒ½æ˜¯æ²¡æœ‰é€»è¾‘çš„é”™è§‰ã€‚</p><p>&#8195;&#8195;å¦ä¸€ä¸ªä¾‹å­ï¼Œæ˜¯ä¸€å¯¹äº’ç›¸æš§æ˜§çš„ç”·å¥³ä¸»è§’ã€‚ç”·ç”Ÿç»å¸¸è·Ÿå¥³ç”Ÿè¯´ï¼Œä»–çš„å¿§éƒã€å•èº«çš„å›°å¢ƒã€çˆ¶æ¯å‚¬å©šï¼Œå¥³ç”Ÿå¿ƒé‡Œå……æ»¡äº†æœŸå¾…ï¼Œâ€ä»–è¿™æ˜¯æœ‰è·Ÿæˆ‘è¡¨ç™½çš„è®¡åˆ’å—ï¼Ÿâ€œï¼Œå¹¶ä¸”è¯¢é—®è¿‡ç”·ç”Ÿæ˜¯å¦æœ‰è¿™æ–¹é¢çš„æ„å‘ï¼Œä¼¼ä¹æ²¡æœ‰å¾—åˆ°æ˜ç¡®çš„ç­”æ¡ˆï¼Œå¥³ç”Ÿè‡ªä»¥ä¸ºç”·ç”Ÿè‡ªå‘äº†â€¦å…¶å®ï¼Œå¯¹æ–¹åªæ˜¯éœ€è¦ä¸€ä¸ªæ²Ÿé€šçš„å‡ºå£ï¼›ç”·ç”Ÿç»™å¥³ç”Ÿåˆ†äº«äº†ä¸€é¦–é™ˆå¥•è¿…çš„ã€Šé™ªä½ åº¦è¿‡æ¼«é•¿å²æœˆã€‹ï¼Œå¥³ç”Ÿæ¬¢å–œé›€è·ƒï¼Œç«‹é©¬æ‰“å¼€ç½‘æ˜“äº‘å¬äº†èµ·æ¥ï¼Œä¸é”™è¿‡æ­Œè¯çš„æ¯ä¸€è¡Œæ¯ä¸€ä¸ªå­—ï¼Œå¥¹å¼€å¿ƒçš„ä¸åªæ˜¯æ­Œè¯çš„ç¾å¥½ï¼Œè¿˜å› ä¸ºå‰å‡ å¤©å¥¹åˆšåˆšå‘Šè¯‰ç”·ç”Ÿï¼Œå¥¹æœ€å–œæ¬¢çš„æ­Œæ‰‹æ˜¯é™ˆå¥•è¿…ï¼Œæ‰€ä»¥å¥³ç”Ÿè‡ªä»¥ä¸ºå¯¹æ–¹è¿™æ˜¯ä¸“é—¨åˆ†äº«ç»™å¥¹çš„ï¼Œè¿˜è°ƒä¾ƒçš„é—®é“ï¼šæ€ä¹ˆåˆè½¬æˆ˜é…·ç‹—äº†ï¼Ÿâ€¦å…¶å®ï¼Œè¿™é¦–æ­Œæ˜¯ç”·ç”Ÿå‡†å¤‡å‘å±•çš„â€ç»“å©šå¯¹è±¡â€œåˆ†äº«ç»™ä»–çš„æ­Œæ›²ï¼›520 å½“å¤©ï¼Œå¥³ç”Ÿç»™ç”·ç”Ÿåˆ†äº«ç…§ç‰‡ï¼Œç”·ç”Ÿçš„ç¬¬ä¸€å¥è¯æ˜¯â€æˆ‘æ²¡æœ‰å‡ºå»ç©â€œâ€æˆ‘è‡ªå·±å»åƒäº†ç«é”…â€œï¼Œå¥³ç”Ÿè‡ªä»¥ä¸ºç”·ç”Ÿæ˜¯å› ä¸ºå’Œå¥¹å¼‚åœ°ï¼Œæ²¡æœ‰å¥¹ï¼Œæ‰€ä»¥æ²¡æœ‰å‡ºå»ç©â€¦å…¶å®ï¼Œâ€æˆ‘æ²¡æœ‰å‡ºå»ç©â€œå¯¹åº”çš„æ˜¯ï¼Œ520 é‚£å¤©ç”·ç”Ÿçš„â€ç»“å©šå¯¹è±¡â€œå’Œå…¶ä»–å‡ ä¸ªç”·ç”Ÿå‡ºå»ç©äº†ï¼Œä»–å´æ²¡æœ‰å‡ºå»ç©â€¦â€¦å“ˆå“ˆï¼Œæˆ‘ä»¬ä¸è®¨è®ºä»–ã€‚é‚£å¥³ç”Ÿæ˜¯æ‹çˆ±è„‘ï¼Ÿè‡ªæˆ‘è®¤çŸ¥ä¸å‡†ç¡®ï¼Ÿè‡ªæ‹ï¼Ÿæˆ‘è§‰å¾—ä¸æ˜¯ï¼Œç”·ç”Ÿçš„è¯¸å¤šè¡¨ç°è®©å¥³ç”Ÿè‡ªä»¥ä¸ºåœ¨å¯¹æ–¹çš„å¿ƒé‡Œä¹Ÿæ˜¯ä¸€æ ·çš„æƒ…æ„Ÿã€è‡ªä»¥ä¸ºåœ¨å¯¹æ–¹çš„å¿ƒé‡Œå¥¹å¾ˆé‡è¦ï¼Œå› ä¸ºå¥¹å¯¹ç”·ç”ŸåŠ¨æƒ…äº†ï¼Œå› ä¸ºç”·ç”Ÿå¯¹äºå¥¹æ¥è¯´ï¼Œæ˜¯é‡è¦çš„ã€‚ä½ çœ‹å§ï¼Œå…¶å®ä½ æ²¡é‚£ä¹ˆé‡è¦ã€‚</p><p>&#8195;&#8195;å†è¯´è¯´æˆ‘è‡ªå·±çš„ä¸€ä¸ªçŠ¶æ€ï¼Œå‰äº›å¹´æœ‰ä¸€æ®µæ—¶é—´ç‰¹åˆ«å¹¼ç¨šã€æ•æ„Ÿã€å¤šç–‘ã€‚æ•æ„Ÿåˆ°ä»€ä¹ˆç¨‹åº¦ï¼Œç»™åŒäº‹å‘æ¶ˆæ¯ï¼Œå¯¹æ–¹å›å¤å‰ï¼Œåœ¨å…¶ä»–å¤šä¸ªå·¥ä½œç¾¤é‡Œèƒ½çœ‹åˆ°åŒäº‹å›å¤å„ç§æ¶ˆæ¯ï¼Œä½†æ˜¯ä»–æ²¡å›å¤æˆ‘ï¼Œä»€ä¹ˆæ„æ€ï¼Ÿé’ˆå¯¹æˆ‘ï¼Ÿå¿½è§†æˆ‘ï¼Ÿä¸é‡è§†æˆ‘çš„å·¥ä½œï¼Ÿè¿™ä¸€ä¸²é—®é¢˜ä¸‹æ¥ï¼Œæ˜¯ä¸æ˜¯å¬èµ·æ¥å¤´éƒ½å¤§äº†ã€‚å…¶å®å¯¹æ–¹åªæ˜¯å› ä¸ºæŸå‡ ä¸ªé‡è¦çš„é¡¹ç›®ç¾¤ç½®é¡¶äº†ã€æ‰‹æœºæ»¡å±ç½®é¡¶ï¼Œä¸ªäººæ¶ˆæ¯æ²¡çœ‹åˆ°æˆ–è€…å¾ˆå¤šäººçš„æ¶ˆæ¯è¿˜æ²¡é¡¾ä¸Šå›å¤ã€‚æ‰€ä»¥â€¦æ‰€ä»¥ä»€ä¹ˆï¼Œæ‰€ä»¥æˆ‘ä»¬å…¶å®æ€»æ˜¯è‡ªä»¥ä¸ºè‡ªå·±å¾ˆé‡è¦ï¼Œç”šè‡³å¯èƒ½è‡ªä»¥ä¸ºå¯¹æ–¹è¦æŠŠæˆ‘ä»¬ç½®é¡¶æ‰ç®—å°Šé‡ğŸ˜‚ï¼Œç°åœ¨æƒ³èµ·æ¥çœŸæ˜¯å¯ç¬‘ã€‚æ•æ„Ÿçš„äººç»å¸¸ä¼šè®¤ä¸ºåˆ«äººåœ¨é’ˆå¯¹ä»–ï¼Œä½†æˆ‘ä»¬ä¸€ä¸ªå¹³å¹³æ— å¥‡çš„å°å·¥ï¼Œå¯¹æ–¹ä½•å¿…èŠ±è¿™ä¹ˆå¤šå¿ƒæ€å»é’ˆå¯¹å‘¢ï¼Œæœ‰æ—¶é—´ä»–è¿˜ä¸å¦‚å–æ¯å’–å•¡ã€æŠ½æ ¹çƒŸã€æ‘¸æ‘¸é±¼å‘¢ã€‚ä½ å†çœ‹å§ï¼Œå…¶å®ä½ æ²¡é‚£ä¹ˆé‡è¦ã€‚</p><p>&#8195;&#8195;å¦ä¸€ä¸ªé‡è¦çš„ç¤¾ä¼šå…³ç³»â€”â€”æœ‹å‹ï¼Œäººä¼šæœ‰å„ç§æœ‹å‹ï¼Œäº¤æƒ…æ·±çš„æµ…çš„ï¼Œè®¤è¯†æ—¶é—´é•¿çš„çŸ­çš„ï¼Œç”·çš„å¥³çš„ï¼Œå„ç§å„ç§â€¦æˆ‘ç»å¸¸é‡åˆ°æœ‰çš„äººï¼Œä»–å’Œè‡ªå·±çš„å¥½å“¥ä»¬å¯ä»¥äº’ç›¸æ‰¶æŒï¼Œè¿™ç§æƒ…æ„Ÿä¾èµ–ä¼šä¸è‡ªè§‰çš„æŠ•å°„åˆ°æ‰€æœ‰çš„æœ‹å‹èº«ä¸Šï¼Œåœ¨ä»–çœ¼é‡Œæ‰€æœ‰çš„æœ‹å‹å°±åº”è¯¥æ˜¯ç›¸äº’æ‰¶æŒã€äº’åŠ©äº’çˆ±çš„ï¼Œä½†å…¶å®å¤§å®¶éƒ½çŸ¥é“ï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚æŸä¸ªæœ‹å‹åœ¨ä½ å¿ƒé‡Œé‡è¦ï¼Œåªæ˜¯å› ä¸ºè¿™æ˜¯ä½ çš„å†…å¿ƒï¼Œä¹Ÿæ˜¯ä¸€ç§â€è‡ªä»¥ä¸ºâ€œï¼Œåœ¨æœ‹å‹çš„çœ¼é‡Œï¼Œä½ å…¶å®æ²¡æœ‰é‚£ä¹ˆé‡è¦ã€‚è®°å¾—ä¹‹å‰çœ‹è¿‡ä¸€æœ¬ä¹¦ã€Šä»¥å¹½é»˜çš„æ–¹å¼è¿‡ä¸€ç”Ÿã€‹ï¼Œç®€å•æåˆ°è¿‡æœ‹å‹è¿™ä¸ªè¯é¢˜ï¼š</p><blockquote><p>æœ‹å‹å¦‚ä¸‰é¤ã€‚</p><p>ä¸€ç±»æœ‹å‹å¦‚æ—©é¤ï¼Œå¯¹æ–¹å†å¥½ä¹Ÿåªä¼šæµ…å°è¾„æ­¢ï¼Œå˜´ä¸Šè¯´é‡è¦ï¼Œä½†å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯å¯æœ‰å¯æ— ã€‚</p><p>ä¸€ç±»æœ‹å‹å¦‚åˆé¤ï¼Œå¥½ä¸å¥½ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯éœ€è¦ï¼Œä¸ºäº†ç”Ÿå­˜ï¼Œæ¯å¤©éƒ½å¾—å®¢å®¢æ°”æ°”ï¼Œç»ä¸å¯å°‘ï¼Œæ·±äº¤ä¸äº†ï¼Œä¹Ÿå¾—ç½ªä¸èµ·ã€‚</p><p>ä¸€ç±»æœ‹å‹å¦‚æ™šé¤ï¼Œåœ¨ä½ æœ€ç–²å€¦æœ€è„†å¼±çš„æ—¶å€™é™ªç€ä½ ï¼Œç»†åš¼æ…¢å’½ï¼Œæ–¹å“å¾—å…¶ä¸­æ»‹å‘³ã€‚</p><p>å…¶å®è¿˜æœ‰ä¸€ç±»æœ‹å‹å¦‚æ¶ˆå¤œï¼Œä»–ä»¬æ˜¯çº¢é¢œæˆ–è€…è“é¢œçŸ¥å·±ï¼Œæ·±æ›´åŠå¤œæ— è¯ä¸è°ˆï¼Œå¶å°”è®©äººè ¢è ¢æ¬²åŠ¨ï¼Œå´ä¸èƒ½ä½œä¸ºä¸»é¤ï¼Œåƒå¤šäº†å¯¹èº«ä½“ä¸å¥½ã€‚</p></blockquote><p>æœ‹å‹å¦‚ä¸‰é¤ï¼Œä¸‰é¤è¿˜å¯ä»¥å»¶ä¼¸å‡ºæ›´å¤šç§â€¦æ€ä¹ˆå¯èƒ½ä¸€æ ·çš„é‡è¦ã€‚</p><p>&#8195;&#8195;å¾ˆå¤šäººè§‰å¾—å‘ç”Ÿåœ¨è‡ªå·±èº«ä¸Šçš„äº‹ï¼Œå°±æ˜¯å¤©å¤§çš„äº‹å„¿ï¼Œè§‰å¾—å…¨ä¸–ç•Œçš„ç›®å…‰éƒ½è¯¥èšç„¦åœ¨è‡ªå·±èº«ä¸Šï¼Œæ›´åˆ«è¯´æœ‹å‹äº†ï¼Œä»–ä»¬åº”è¯¥é©¬ä¸Šæ”¾ä¸‹æ‰‹å¤´çš„äº‹æƒ…æ¥å¸®è‡ªå·±ã€‚åªè¦åˆ«äººè€½æä¸€ä¼šï¼Œéƒ½è§‰å¾—ä¸å¤Ÿå…³å¿ƒè‡ªå·±ã€‚æ— è®ºä»€ä¹ˆäº‹ï¼Œå‘ç”Ÿäº†å°±å‘ç”Ÿäº†ï¼Œè‚ å­æ‚”é’äº†ä¹Ÿå‘ç”Ÿäº†ï¼ŒæŠ“ç‹‚ã€ç„¦è™‘ã€æ‚”æ¨ã€å°´å°¬ï¼Œä¸ç®¡ä½•ç§æƒ…ç»ªï¼Œäº‹æƒ…éƒ½å·²ç»å‘ç”Ÿäº†ã€‚ä¸å¿…æŠŠè‡ªå·±çœ‹å¾—é‚£ä¹ˆé‡ï¼Œæ²¡äººé‚£ä¹ˆåœ¨ä¹ä½ çš„ï¼Œä¸€æƒ³æˆ–è®¸å°±é€šäº†ï¼Œè‡ªå·±è®¤ä¸ºå¤©å¤§çš„äº‹ï¼Œåœ¨åˆ«äººçœ¼ä¸­æˆ–è®¸æ ¹æœ¬ä¸å€¼ä¸€æï¼Œå…¶å®æ”¾ä¸ä¸‹çš„åªæ˜¯è‡ªå·±ã€‚<strong>å‘ç”Ÿäº†ï¼Œæ¥å—ï¼Œæ¥ä¸‹æ¥ï¼Œé¢å¯¹ï¼Œè‡ªå·±å‹‡æ•¢é¢å¯¹äº†ï¼Œä¹Ÿå°±æˆé•¿äº†ã€‚</strong>ä½ å†çœ‹çœ‹å§ï¼Œå…¶å®ä½ æ²¡é‚£ä¹ˆé‡è¦ã€‚</p><p>&#8195;&#8195;çªç„¶æƒ³èµ·æ¥ä¹‹å‰åœ¨çŸ­è§†é¢‘é‡Œå¬æ¥çš„ä¸€å¥è¯ï¼š<strong>åˆ«äººçœ¼ä¸­çš„ä½ ï¼Œä¸æ˜¯ä½ ï¼›ä½ çœ¼ä¸­çš„åˆ«äººï¼Œæ‰æ˜¯ä½ ã€‚</strong>åœ¨ä½ çœ¼ä¸­ï¼ŒåŒäº‹åº”è¯¥å’Œä½ äº’å¸®äº’åŠ©ï¼Œåªå› ä¸ºä½ å°±æ˜¯å¦‚æ­¤å¯¹åŒäº‹çš„ï¼Œåªå› ä¸ºä½ æ˜¯ä¸€ä¸ªçƒ­å¿ƒçš„äººï¼›åœ¨ä½ çœ¼ä¸­ï¼Œç”·ç”Ÿåˆ†äº«æ—¥å¸¸å°±è¡¨ç¤ºå–œæ¬¢ä½ ï¼Œåªå› ä¸ºä½ å°±æ˜¯å–œæ¬¢ä»–æ‰€ä»¥æ‰ä¼šåˆ†äº«ç»™ä»–ï¼›åœ¨ä½ çœ¼ä¸­ï¼Œå¯¹æ–¹ä¸å›æ¶ˆæ¯å°±æ˜¯é’ˆå¯¹ä½ ï¼Œåªå› ä¸ºä½ é’ˆå¯¹åˆ«äººçš„æ—¶å€™å°±æ˜¯ä¼šæ•…æ„ä¸å›æ¶ˆæ¯ï¼›åœ¨ä½ çœ¼ä¸­ï¼Œæ¯ä¸€ä¸ªæœ‹å‹å°±åº”è¯¥æœ‰æ±‚å¿…åº”ï¼Œåªå› ä¸ºä½ å°±æ˜¯å¯¹æœ‹å‹æœ‰æ±‚å¿…åº”çš„äººã€‚å½“æˆ‘ä»¬å¯¹ä»»ä½•äº‹ç‰©æœ‰æœŸå¾…çš„æ—¶å€™ï¼Œå¯èƒ½åªæ˜¯å› ä¸ºæˆ‘ä»¬è‡ªå·±æ˜¯è¿™æ ·çš„ä¸€ä¸ªäººï¼Œè€Œå¹¶ä¸æ˜¯å¯¹æ–¹å¦‚ä½•å¦‚ä½•ï¼Œæ‰€ä»¥ï¼Œæ²¡æœ‰è°å¯¹è°é”™ï¼Œåªæ˜¯éœ€è¦æ‘†æ­£è‡ªå·±çš„ä½ç½®ï¼Œè®¤æ¸…è‡ªå·±ã€‚æˆ‘æ€»è§‰å¾—äººå’Œäººçš„ç›¸å¤„ï¼Œåšåˆ°åŸºæœ¬çš„çœŸè¯šï¼Œè¶³çŸ£ï¼Œé€‚å½“çš„â€çœ‹è½»â€œè‡ªå·±ï¼Œå¯ä»¥è§„é¿å¾ˆå¤šçƒ¦æ¼ï¼Œè‡³äºçŸ¥å·±ï¼Œå¾—ä¹‹æˆ‘å¹¸å¤±ä¹‹æˆ‘å‘½ï¼Œå…¨å‡­ç¼˜åˆ†ã€‚æ¥ï¼Œè®©æˆ‘ä»¬é»˜å¿µä¸‰éï¼Œå…¶å®ä½ æ²¡é‚£ä¹ˆé‡è¦ï¼Œå…¶å®ä½ æ²¡é‚£ä¹ˆé‡è¦ï¼Œå…¶å®ä½ çœŸçš„æ²¡é‚£ä¹ˆé‡è¦ã€‚</p><p>&#8195;&#8195;è¾¹å†™è¾¹å’Œæœ‹å‹åœ¨èŠå¤©ï¼Œä»–é—®ï¼Œ<strong>å¦‚æœå©šååˆé‡åˆ°æ›´å–œæ¬¢çš„äººæ€ä¹ˆåŠï¼Ÿ</strong>å¬äº†è®©äººå•¼ç¬‘çš†éï¼Œä»–éƒ½æ²¡ç»“å©šå‘¢å±…ç„¶æ€è€ƒè¿™äº›â€¦è¿˜æ˜¯å€Ÿç”¨åˆšåˆšä¹¦ä¸­çš„è¯å§ï¼š</p><blockquote><p>å¦‚æœç°ä»»ç¬¦åˆæœŸå¾…ï¼Œç‰¢è®°å¯¹æ–¹çš„è¿™äº›ä¼˜ç‚¹ï¼Œåœ¨å‡†å¤‡è§å¼‚æ€è¿çš„æ—¶å€™ï¼Œä»å¿ƒé‡Œç¿»å‡ºæ¥æƒ³æƒ³ã€‚</p><p>å¦‚æœä½ è§‰å¾—è‡ªå·±çœŸçš„ä¸å†åœ¨æ„å¯¹æ–¹è¿™äº›ä¼˜ç‚¹ï¼Œè€Œä¸”ä¸¥é‡åˆ°åŒæ–¹å·²ç»å®Œå…¨æ— æ³•æ²Ÿé€šï¼Œé€‰æ‹©ç¦»å©šä¹Ÿå¥½ï¼Œç¦»å©šä¹Ÿæ˜¯æ³•å¾‹èµ‹äºˆä½ çš„æƒåˆ©ï¼Œç„¶åå»å¯»æ‰¾æ–°çš„æœŸå¾…ã€‚</p><p>å¦‚æœä½ è§‰å¾—å¯¹æ–¹è¿™äº›ä¼˜ç‚¹ï¼Œä¾ç„¶éå¸¸çè´µï¼Œè€Œä¸”è¿˜æ˜¯è‡ªå·±æœ€åœ¨ä¹çš„ï¼Œå°±åœ¨è·Ÿæ–°æ¬¢æŠ•é™å‰ï¼Œæ‚¬å´–å‹’é©¬ã€‚å¦åˆ™ï¼Œè§ä¸€ä¸ªçˆ±ä¸€ä¸ªï¼Œè§‰å¾—ä¸ªä¸ªéƒ½æ˜¯çœŸçˆ±ï¼Œç›¸ä¿¡æˆ‘ï¼Œé‚£è‚¯å®šæ˜¯è¢«æ€§å™¨å®˜ç»‘æ¶äº†è‡ªå·±çš„çˆ±æƒ…è§‚ã€‚</p><p>åœ¨ä»Šå¤©è¿™æ ·çš„ç¤¾äº¤æ—¶ä»£ï¼Œè¦è®¤è¯†ä¸€ä¸ªäººä½•å…¶å®¹æ˜“ï¼Œæ‹¿èµ·æ‰‹æœºæ‘‡ä¸€æ‘‡å°±å¯ä»¥äº†ã€‚</p><p>æœ€éš¾çš„æ˜¯ï¼Œä¸€ä¸ªäººå§‹ç»ˆäº†è§£è‡ªå·±çœŸæ­£çš„éœ€è¦ã€‚</p></blockquote><p>æ˜¯å•Šï¼Œ<strong>ä¸€ä¸ªäººå§‹ç»ˆäº†è§£è‡ªå·±çœŸæ­£çš„éœ€è¦</strong>ï¼ŒæŒºéš¾çš„ï¼ŒçœŸéš¾ã€‚ä½ å¸Œæœ›è¿‡ä»€ä¹ˆæ ·çš„ç”Ÿæ´»ï¼Œå¸Œæœ›æ‰¾ä¸€ä¸ªä»€ä¹ˆæ ·çš„ä¼´ä¾£ï¼Œå¸Œæœ›è‡ªå·±æˆä¸ºä»€ä¹ˆæ ·çš„äººï¼Œå¸Œæœ›è‡ªå·±çš„å¢“å¿—é“­ä¸Šå†™ä»€ä¹ˆâ€¦</p><p>è·‘é¢˜äº†ï¼Œä¸è¿‡ä¸é‡è¦ï¼Œéƒ½æ˜¯çæ‰¯æ·¡ã€‚é€ç»™æ‰€æœ‰æœ‰ç¼˜äººä¸€å¥è¯å§ï¼š<strong>ã€‚</strong></p><hr><p>æœ€åå†åˆ†äº«ä¸€æ®µä¹¦ä¸­çš„é€‰æ®µå§~å“ˆå“ˆï¼Œè¿™æœ¬ä¹¦æˆ‘çœ‹äº†ä¸¤ä¸‰éï¼Œç¡®å®å–œæ¬¢ï¼Œå¾ˆå¤šæƒ³æ³•å’Œä½œè€…ä¹Ÿæ˜¯ä¸è°‹è€Œåˆã€‚</p><blockquote><p>ã€Šä½ é‚£ç‚¹äº‹ï¼Œæœ‰ä»€ä¹ˆå¥½è¯´çš„ã€‹</p><p>æˆ‘ä»¬æ¯å¤©é¢å¯¹çš„äº‹æƒ…ï¼Œå¤§è‡´å¯ä»¥åˆ†ä¸ºä¸‰ç±»ã€‚</p><p>ç¬¬ä¸€ç±»äº‹æƒ…æ˜¯ä¸èƒ½å‘Šè¯‰åˆ«äººçš„ï¼Œç‰¹åˆ«æ˜¯æœ¬èº«è‡ªå·±å°±åšé”™äº†çš„äº‹æƒ…ã€‚æ¯”å¦‚ï¼Œæˆ‘ä¸€ä¸ªæœ‹å‹å› ä¸ºæŒªç”¨å…¬æ¬¾è¢«å¼€é™¤äº†ï¼Œè¿™ç§äº‹æƒ…ä½ å½“ç„¶æˆ–è®¸æœ‰è‡ªå·±å§”å±ˆçš„éƒ¨åˆ†ï¼Œä½†æ‰“æ­»éƒ½ä¸èƒ½ä¸»åŠ¨å‘Šè¯‰åˆ«äººï¼Œåªèƒ½æ†‹ç€ã€‚</p><p>å› ä¸ºæ¯ä¸ªäººç”Ÿæ´»éƒ½ä¸å®¹æ˜“ï¼Œéƒ½æœ‰ä¸å¦‚æ„çš„åœ°æ–¹ï¼Œåªæ˜¯æœ‰äººæœ‰ä¸€ç‚¹ç—›å°±é¾‡ç‰™å’§å˜´å”¯æå¤©ä¸‹ä¸æƒŠï¼Œæœ‰äººé—·å¤´å’¬ç€ç‰™å‰è¡Œã€‚ä¸å¿…å¤¸å¤§è‡ªå·±çš„ç—›è‹¦æ¥æ„ŸåŠ¨è‡ªå·±ï¼Œåœ¨æ­£ç»å†æ›´å¤§ç—›è‹¦çš„äººçœ¼é‡Œè¿™æ˜¯çŸ«æƒ…ã€‚ç§‹é£è™½èµ·ï¼Œä¾ç„¶åœ¨å¯’è‹¥å†°éœœçš„ä¼¤å£ä¸Šç¬‘é¥å¦‚èŠ±ï¼Œè¿é£è€Œè¡Œã€‚</p><p>è¿™ç±»äº‹æƒ…å¦‚æœéœ€è¦è‡ªæˆ‘å¤„ç†ï¼Œå¯ä»¥å€Ÿé‰´å¿ƒç†å­¦é‡Œçš„PRPæ¨¡å‹ï¼Œè¿™ä¸ªæ¨¡å‹åˆ†ä¸‰æ­¥æ¥åˆ†æé—®é¢˜ï¼š</p></blockquote><pre><code>å…¨ç„¶æ¥å—ï¼ˆPermissionï¼‰ï¼šæ¥å—è‡ªå·±çš„æƒ…ç»ªï¼Œä¸ç®¡å¥½çš„è¿˜æ˜¯ä¸å¥½çš„ï¼Œå¦‚æœ‰å¿…è¦å†™å‡ºæ¥ã€‚è®¤çŸ¥é‡å»ºï¼ˆReconstructingï¼‰ï¼šæŠŠå¯¹ä¸€ä¸ªäº‹ä»¶çš„è§£é‡Šä»è´Ÿé¢è½¬å˜æˆæ­£é¢ï¼Œçœ‹ä¼šå¸¦æ¥å“ªäº›æœ‰ä»·å€¼çš„å½±å“ã€‚å…¨å±€å±•æœ›ï¼ˆPerspectiveï¼‰ï¼šä»¥æ›´å¹¿é˜”å‰ç»æ€§çš„è§†è§’æ¥çœ‹å¾…çœ¼å‰çš„æƒ…å½¢ï¼Œä¸€å¹´åæˆ‘å¦‚ä½•çœ‹å¾…è¿™ä¸ªæƒ…å½¢ã€‚</code></pre><blockquote><p>ç¬¬äºŒç±»äº‹æƒ…æ˜¯å¯ä»¥å‘Šè¯‰åˆ«äººï¼Œä½†åˆ«äººæ ¹æœ¬å¸®ä¸ä¸Šçš„äº‹æƒ…ã€‚æ¯”å¦‚ï¼Œä½ ç”Ÿç—…äº†ï¼Œé‚£ä½ å»æŒ‚åŠç“¶å°±å¥½äº†ï¼Œæœ€å¤šå°±æ˜¯å‘ä¸ªæœ‹å‹åœˆå‘Šè¯‰å¤§å®¶ï¼Œä½ è‡ªå·±æ²¡æœ‰æ”¾å¼ƒæ²»ç–—ï¼Œå¤§å®¶æ¥ç»™ä½ ç‚¹ä¸ªèµï¼Œä»…æ­¤è€Œå·²ã€‚å‘Šè¯‰äº†åˆ«äººï¼Œä½ è¯¥å—çš„ç½ªç»§ç»­å—ï¼Œåˆ«äººçš„æ—¥å­ä¹Ÿç…§æ ·è¿‡ã€‚ä½†è¿™ç±»äº‹æƒ…å‘Šè¯‰åˆ«äººçš„å¥½å¤„ï¼Œå°±æ˜¯å¯ä»¥æ»¡è¶³è‡ªå·±çš„çŸ«æƒ…ã€‚</p><p>ç¬¬ä¸‰ç±»äº‹æƒ…æ˜¯å¯ä»¥å‘Šè¯‰åˆ«äººï¼Œåˆ«äººä¹Ÿå¯ä»¥å¸®ä¸Šçš„ã€‚è¿™ç±»äº‹æƒ…å°±è¦å»æ‰¾åˆ°é‚£ä¸ªèƒ½å¸®å¾—ä¸Šçš„äººï¼Œè¯¥è¯·å®¢è¯·å®¢ï¼Œè¯¥æ‰˜å…³ç³»æ‰˜å…³ç³»ï¼Œè¯¥èµ°æ³•é™¢èµ°æ³•é™¢ï¼Œç„¶åå®šç‚¹ç²¾å‡†è·Ÿè¸ªã€‚</p><p>æ‰€è°“æƒ…å•†é«˜ï¼Œæ— éå°±æ˜¯åœ¨é‡åˆ°äº‹æƒ…åï¼Œåˆ†æ¸…æ¥šä¸Šè¿°ä¸‰ç±»ï¼Œç„¶åé€‰æ‹©æ€åº¦å¤„ç†è€Œå·²ã€‚ä½ å”¯ç‹¬æ²¡å¿…è¦åšçš„äº‹æƒ…ï¼Œå°±æ˜¯å‡†å¤‡è½°è½°çƒˆçƒˆåœ°æ¶ä¸ªå¤§å–‡å­å‘Šè¯‰å…¨ä¸–ç•Œï¼šæˆ‘é‡åˆ°äº‹äº†ã€‚</p></blockquote><p>â€”â€” æ‘˜å½•æ¥è‡ªã€Šä»¥å¹½é»˜çš„æ–¹å¼è¿‡ä¸€ç”Ÿã€‹ç¢ç£¨å…ˆç”Ÿ<br><a href="https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewBook?id=0">https://itunes.apple.com/WebObjects/MZStore.woa/wa/viewBook?id=0</a><br>æ­¤ææ–™å¯èƒ½å—ç‰ˆæƒä¿æŠ¤ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> è¯»ä¹¦ </tag>
            
            <tag> æˆ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è½¬è½½ã€‘Centos7 å®‰è£… Python3.8 è¯¦ç»†æ•™ç¨‹</title>
      <link href="/2023/03/30/Centos7_update_Python3.8/"/>
      <url>/2023/03/30/Centos7_update_Python3.8/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://blog.csdn.net/fanxl10/article/details/106854062">è½¬è½½è‡ª</a></p><hr><h2 id="å®‰è£…ç¼–è¯‘ç›¸å…³å·¥å…·"><a href="#å®‰è£…ç¼–è¯‘ç›¸å…³å·¥å…·" class="headerlink" title="å®‰è£…ç¼–è¯‘ç›¸å…³å·¥å…·"></a>å®‰è£…ç¼–è¯‘ç›¸å…³å·¥å…·</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="literal">-y</span> groupinstall <span class="string">&quot;Development tools&quot;</span></span><br><span class="line">yum <span class="literal">-y</span> install zlib<span class="literal">-devel</span> bzip2<span class="literal">-devel</span> openssl<span class="literal">-devel</span> ncurses<span class="literal">-devel</span> sqlite<span class="literal">-devel</span> readline<span class="literal">-devel</span> tk<span class="literal">-devel</span> gdbm<span class="literal">-devel</span> db4<span class="literal">-devel</span> libpcap<span class="literal">-devel</span> xz<span class="literal">-devel</span></span><br><span class="line">yum install libffi<span class="literal">-devel</span> <span class="literal">-y</span></span><br></pre></td></tr></table></figure><h2 id="ä¸‹è½½-python-å®‰è£…åŒ…"><a href="#ä¸‹è½½-python-å®‰è£…åŒ…" class="headerlink" title="ä¸‹è½½ python å®‰è£…åŒ…"></a>ä¸‹è½½ python å®‰è£…åŒ…</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wget</span> https://www.python.org/ftp/python/<span class="number">3.8</span>.<span class="number">3</span>/Python<span class="literal">-3</span>.<span class="number">8.3</span>.tgz</span><br><span class="line">tar <span class="literal">-zxvf</span>  Python<span class="literal">-3</span>.<span class="number">8.3</span>.tgz</span><br></pre></td></tr></table></figure><h2 id="ç¼–è¯‘å®‰è£…-python"><a href="#ç¼–è¯‘å®‰è£…-python" class="headerlink" title="ç¼–è¯‘å®‰è£… python"></a>ç¼–è¯‘å®‰è£… python</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /usr/local/python3 <span class="comment">#åˆ›å»ºç¼–è¯‘å®‰è£…ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> Python<span class="literal">-3</span>.<span class="number">8.3</span></span><br><span class="line">./configure -<span class="literal">-prefix</span>=/usr/local/python3</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>å®‰è£…è¿‡ï¼Œå‡ºç°ä¸‹é¢ä¸¤è¡Œå°±æˆåŠŸäº†</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Installing collected packages: setuptools, pip</span><br><span class="line">Successfully installed pip<span class="literal">-19</span>.<span class="number">2.3</span> setuptools<span class="literal">-41</span>.<span class="number">2.0</span></span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºè½¯è¿æ¥"><a href="#åˆ›å»ºè½¯è¿æ¥" class="headerlink" title="åˆ›å»ºè½¯è¿æ¥"></a>åˆ›å»ºè½¯è¿æ¥</h2><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰pythonè½¯è¿æ¥</span></span><br><span class="line">ll /usr/bin/ |grep python</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">lrwxrwxrwx    <span class="number">1</span> root root           <span class="number">7</span> Nov <span class="number">26</span>  <span class="number">2018</span> python -&gt; python2</span><br><span class="line">lrwxrwxrwx    <span class="number">1</span> root root           <span class="number">9</span> Nov <span class="number">26</span>  <span class="number">2018</span> python2 -&gt; python2.<span class="number">7</span></span><br><span class="line"><span class="literal">-rwxr</span><span class="literal">-xr</span><span class="literal">-x</span>      <span class="number">1</span> root root        <span class="number">7216</span> Jul <span class="number">13</span>  <span class="number">2018</span> python2.<span class="number">7</span></span><br></pre></td></tr></table></figure><p>é»˜è®¤ç³»ç»Ÿå®‰è£…çš„æ˜¯ python2.7<br>åˆ é™¤ python è½¯è¿æ¥</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> <span class="literal">-rf</span> /usr/bin/python</span><br></pre></td></tr></table></figure><p>é…ç½®è½¯è¿æ¥ä¸º python3</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ·»åŠ python3çš„è½¯é“¾æ¥ </span></span><br><span class="line">ln <span class="literal">-s</span> /usr/local/python3/bin/python3 /usr/bin/python</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™çœ‹ä¸‹ python é»˜è®¤ç‰ˆæœ¬</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python <span class="literal">-V</span></span><br></pre></td></tr></table></figure><p>åˆ é™¤é»˜è®¤ pip è½¯è¿æ¥ï¼Œå¹¶æ·»åŠ  pip3 æ–°çš„è½¯è¿æ¥</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> <span class="literal">-rf</span> /usr/bin/pip</span><br><span class="line"><span class="comment">#æ·»åŠ  pip3 çš„è½¯é“¾æ¥ </span></span><br><span class="line">ln <span class="literal">-s</span> /usr/local/python3/bin/pip3 /usr/bin/pip</span><br></pre></td></tr></table></figure><h2 id="æ›´æ”¹-yum-é…ç½®"><a href="#æ›´æ”¹-yum-é…ç½®" class="headerlink" title="æ›´æ”¹ yum é…ç½®"></a>æ›´æ”¹ yum é…ç½®</h2><p>å› ä¸ºå…¶è¦ç”¨åˆ° python2 æ‰èƒ½æ‰§è¡Œï¼Œå¦åˆ™ä¼šå¯¼è‡´ yum ä¸èƒ½æ­£å¸¸ä½¿ç”¨ï¼ˆä¸ç®¡å®‰è£… python3 çš„é‚£ä¸ªç‰ˆæœ¬ï¼Œéƒ½å¿…é¡»è¦åšçš„ï¼‰</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/bin/yum </span><br><span class="line">æŠŠ <span class="comment">#! /usr/bin/python ä¿®æ”¹ä¸º #! /usr/bin/python2 </span></span><br><span class="line">vi /usr/libexec/urlgrabber<span class="literal">-ext</span><span class="literal">-down</span> </span><br><span class="line">æŠŠ <span class="comment">#! /usr/bin/python ä¿®æ”¹ä¸º #! /usr/bin/python2</span></span><br><span class="line">vi /usr/bin/yum<span class="literal">-config</span><span class="literal">-manager</span></span><br><span class="line"><span class="comment">#!/usr/bin/python æ”¹ä¸º #!/usr/bin/python2</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æœåŠ¡å™¨ </tag>
            
            <tag> CentOS </tag>
            
            <tag> è½¬è½½ </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è½¬è½½ã€‘ä½¿ç”¨ systemd ç®¡ç† Node.js åº”ç”¨</title>
      <link href="/2023/03/30/Systemctl_nodejs/"/>
      <url>/2023/03/30/Systemctl_nodejs/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://harttle.land/2016/08/04/systemd-nodejs-app.html">è½¬è½½è‡ª</a></p><hr><p><a href="https://zh.wikipedia.org/wiki/Systemd">systemd</a> æ˜¯ Linux ä¸‹çš„ä¸€æ¬¾ç³»ç»Ÿå’ŒæœåŠ¡ç®¡ç†å™¨ï¼Œè¯¥è½¯ä»¶çš„åˆè¡·æ˜¯æä¾›ç²¾ç¡®çš„æœåŠ¡é—´ä¾èµ–ï¼Œä»¥æ­¤æ”¯æŒå¹¶è¡Œå¯åŠ¨æ¥æé«˜æ€§èƒ½ã€‚è¶Šæ¥è¶Šå¤šçš„ Linux å‘è¡Œç‰ˆéƒ½ç”± sysvinit è¿ç§»åˆ°äº† systemdï¼ˆåŒ…æ‹¬ Debianï¼ï¼‰ã€‚åœ¨è¿™äº› Linux ç³»ç»Ÿä¸­ï¼Œç”¨åŸç”Ÿçš„ systemd æ¥æ‰˜ç®¡ <a href="http://nodejs.org/">Node.js</a> è¿›ç¨‹è¶³å¤Ÿæ»¡è¶³ä¸€èˆ¬å¼€å‘è€…çš„è¦æ±‚ï¼Œå€Ÿç”± systemd å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¤„ç†ä¾èµ–å…³ç³»å’Œç›‘æµ‹æ—¥å¿—ã€‚</p><h2 id="systemctl"><a href="#systemctl" class="headerlink" title="systemctl"></a>systemctl</h2><p><code>systemctl</code> æ˜¯æŸ¥è¯¢å’Œæ§åˆ¶ systemd çš„ä¸»è¦å‘½ä»¤ï¼Œä¸‹é¢ä»¥ <code>mongod</code> ä¸ºä¾‹ä»‹ç»å¸¸ç”¨å‚æ•°ï¼š</p><blockquote><p> <a href="https://www.mongodb.com/">MongoDB</a> æ˜¯ <a href="http://nodejs.org/">Node.js</a> ä¸‹éå¸¸å¸¸è§çš„ NoSQL æ•°æ®åº“ï¼Œåœ¨ ArchLinux ä¸‹é€šè¿‡ pacman å®‰è£…ï¼š<code>pacman install mongodb</code>ï¼Œå®‰è£…æˆåŠŸå <code>mongod</code> å³ä¸ºå¯ç”¨çš„ systemd æœåŠ¡ã€‚</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span></span><br><span class="line">systemctl status mongod</span><br><span class="line"><span class="comment"># å¯åŠ¨æœåŠ¡</span></span><br><span class="line">systemctl <span class="built_in">start</span> mongod</span><br><span class="line"><span class="comment"># åœæ­¢æœåŠ¡</span></span><br><span class="line">systemctl stop mongod</span><br><span class="line"><span class="comment"># é‡å¯æœåŠ¡</span></span><br><span class="line">systemctl restart mongod</span><br><span class="line"><span class="comment"># è®¾ä¸ºè‡ªå¯åŠ¨</span></span><br><span class="line">systemctl enable mongod</span><br><span class="line"><span class="comment"># å–æ¶ˆè‡ªå¯åŠ¨</span></span><br><span class="line">systemctl disable mongod</span><br></pre></td></tr></table></figure><blockquote><p>æ›´å¤šä¿¡æ¯å¯æŸ¥é˜… man pageï¼š<code>man systemctl</code></p></blockquote><h2 id="å•å…ƒæ–‡ä»¶"><a href="#å•å…ƒæ–‡ä»¶" class="headerlink" title="å•å…ƒæ–‡ä»¶"></a>å•å…ƒæ–‡ä»¶</h2><p>æ¯ä¸ª systemd æœåŠ¡å‡ç”±ä¸€ä¸ª <a href="http://www.freedesktop.org/software/systemd/man/systemd.unit.html">å•å…ƒæ–‡ä»¶</a> æ¥å®šä¹‰ã€‚è¿™äº›å•å…ƒæ–‡ä»¶ä½äº <code>/usr/lib/systemd/system/</code> å’Œ <code>/etc/systemd/system/</code>ï¼Œåˆ†åˆ«å­˜æ”¾å®‰è£…è½¯ä»¶åŒ…ï¼ˆæ¯”å¦‚ <a href="https://www.mongodb.com/">MongoDB</a>ï¼‰å’Œç³»ç»Ÿç®¡ç†å‘˜çš„å•å…ƒæ–‡ä»¶ã€‚ systemd å¯åŠ¨æ—¶ä¼šæ‰«æä¸Šè¿°è·¯å¾„å¹¶è½½å…¥ç›¸åº”çš„å•å…ƒã€‚</p><p>Systemd Unit Files Locations (<a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/chap-Managing_Services_with_systemd.html#tabl-Managing_Services_with_systemd-Introduction-Units-Locations">provided by redhat</a>):</p><table><thead><tr><th>Directory</th><th>Description</th></tr></thead><tbody><tr><td><code>/usr/lib/systemd/system/</code></td><td>Systemd unit files distributed with installed RPM packages.</td></tr><tr><td><code>/run/systemd/system/</code></td><td>Systemd unit files created at run time. This directory takes precedence over the directory with installed service unit files.</td></tr><tr><td><code>/etc/systemd/system/</code></td><td>Systemd unit files created by systemctl enable as well as unit files added for extending a service. This directory takes precedence over the directory with runtime unit files.</td></tr></tbody></table><p>æ‰€ä»¥åœ¨ä¿®æ”¹æˆ–æ·»åŠ å•å…ƒæ–‡ä»¶åï¼Œéœ€è¦è®© systemd é‡æ–°åŠ è½½æ‰«æå¹¶åŠ è½½è¿™äº›æ–‡ä»¶ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon<span class="literal">-reload</span></span><br></pre></td></tr></table></figure><p>å•å…ƒæ–‡ä»¶çš„è¯­æ³•éå¸¸ç®€å•ï¼Œç±»ä¼¼äº Windows çš„ <code>.ini</code> æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Unit</span>]</span><br><span class="line">Description=myapp</span><br><span class="line"></span><br><span class="line">[<span class="type">Service</span>]</span><br><span class="line">WorkingDirectory=/home/harttle/myapp</span><br><span class="line">ExecStart=/usr/bin/node bin/www</span><br><span class="line">Restart=always</span><br><span class="line">StandardOutput=syslog</span><br><span class="line">StandardError=syslog</span><br><span class="line">SyslogIdentifier=myapp</span><br></pre></td></tr></table></figure><p>å°†ä¸Šè¿°æ–‡ä»¶ä¿å­˜ä¸º <code>/etc/systemd/system/myapp.service</code>ï¼Œè¿è¡Œ <code>systemctl start myapp</code> å³å¯å¯åŠ¨å®ƒã€‚é€šè¿‡ <code>systemctl status myapp</code> æ¥æŸ¥çœ‹çŠ¶æ€ï¼Œé€šè¿‡ <code>journalctl</code> æ¥æŸ¥çœ‹æ—¥å¿—ï¼Œè§ä¸‹æ–‡ã€‚</p><blockquote><p>æ›´å¤šä¿¡æ¯å¯æŸ¥è¯¢ man page: <code>man systemd.unit</code></p></blockquote><h2 id="ç›‘æµ‹æ—¥å¿—"><a href="#ç›‘æµ‹æ—¥å¿—" class="headerlink" title="ç›‘æµ‹æ—¥å¿—"></a>ç›‘æµ‹æ—¥å¿—</h2><p>systemd é‡‡ç”¨ cgroups æ¥ç›‘æµ‹è¿›ç¨‹ï¼Œè¿™æ„å‘³ç€ fork å¾—åˆ°çš„å­è¿›ç¨‹ä¹Ÿä¸ä¼šè„±ç¦»æ—¥å¿—ã€‚systemd å•å…ƒé»˜è®¤çš„æ—¥å¿—è¾“å‡ºä¸º syslogï¼Œå¯é€šè¿‡ <code>journalctl</code> æ¥æŸ¥çœ‹ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŒ‡å®šsystemdå•å…ƒï¼ˆunitï¼‰</span></span><br><span class="line">journalctl <span class="literal">-u</span> myapp</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">journalctl <span class="operator">-f</span></span><br></pre></td></tr></table></figure><h2 id="ä¾èµ–å…³ç³»"><a href="#ä¾èµ–å…³ç³»" class="headerlink" title="ä¾èµ–å…³ç³»"></a>ä¾èµ–å…³ç³»</h2><p><a href="http://nodejs.org/">Node.js</a> åº”ç”¨é€šå¸¸ä¼šä¾èµ–äºå…¶ä»–çš„æœåŠ¡ï¼Œæ¯”å¦‚ <a href="https://www.mongodb.com/">MongoDB</a>ã€<a href="https://github.com/antirez/redis">Redis</a> ç­‰ã€‚è¿™æ„å‘³ç€ myapp åœ¨å¼€æœºå¯åŠ¨æ—¶å¯èƒ½ä¼šå› è¿™äº›è¿›ç¨‹æœªå¯åŠ¨è€Œå¤±è´¥ã€‚å¯ä»¥åœ¨å•å…ƒæ–‡ä»¶ä¸­æŒ‡å®šä¾èµ–å…³ç³»ï¼Œsystemd ä¾¿ä¼šå…ˆå¯åŠ¨é‚£äº›ä¾èµ–ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Unit</span>]</span><br><span class="line">Description=myapp</span><br><span class="line">Requires=mongodb.service redis.service</span><br><span class="line">After=mongodb.service redis.service</span><br></pre></td></tr></table></figure><h2 id="ç¯å¢ƒä¸ç”¨æˆ·ç»„"><a href="#ç¯å¢ƒä¸ç”¨æˆ·ç»„" class="headerlink" title="ç¯å¢ƒä¸ç”¨æˆ·ç»„"></a>ç¯å¢ƒä¸ç”¨æˆ·ç»„</h2><p>systemd æ”¯æŒä¸ºæ¯ä¸ªå•å…ƒæ–‡ä»¶è®¾ç½®ç”¨æˆ·ç»„ï¼Œä»¥åŠç¯å¢ƒå˜é‡ã€‚ è¿™åœ¨ <a href="http://nodejs.org/">Node.js</a> çš„ Web åº”ç”¨éƒ¨ç½²å’Œå®‰å…¨æä¾›äº†æ–¹ä¾¿ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Service</span>]</span><br><span class="line">Environment=DEBUG=<span class="string">&#x27;myapp:*&#x27;</span></span><br><span class="line">User=www</span><br><span class="line"><span class="built_in">Group</span>=http</span><br></pre></td></tr></table></figure><p>è®¾ç½®å¤šä¸ªç¯å¢ƒå˜é‡å¯ä»¥ç¼–å†™å¤šæ¡ <code>Environment=</code> è¯­å¥ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Environment=PORT=<span class="number">3000</span></span><br><span class="line">Environment=HOST=localhost</span><br></pre></td></tr></table></figure><p>ç”¨æˆ·å’Œç»„åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹è¾ƒä¸ºæœ‰ç”¨ï¼Œç”¨ç‰¹å®šçš„ç”¨æˆ·æ¥è¿è¡Œ <a href="http://nodejs.org/">Node.js</a> åº”ç”¨å¯ä»¥åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šé™åˆ¶ç½‘ç»œæ”»å‡»é€ æˆçš„ç ´åã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> æœåŠ¡å™¨ </tag>
            
            <tag> CentOS </tag>
            
            <tag> è½¬è½½ </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SDWebImageErrorDomain</title>
      <link href="/2023/03/24/SDWebImageErrorDomain/"/>
      <url>/2023/03/24/SDWebImageErrorDomain/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><code>SDCycleScrollView</code> å’Œ <code>SDWebImage</code> æ˜¯ iOS å¼€å‘å¾ˆå¸¸ç”¨çš„ä¸¤ä¸ªæ¡†æ¶ï¼Œåšå›¾ç‰‡è½®æ’­ã€å›¾æ ‡ç¼“å­˜æ—¶æœ€å¸¸ç”¨ã€‚å‰å‡ å¤©çªç„¶æŠ¥é”™äº†ï¼Œè½®æ’­å›¾ç‰‡åŠ è½½ä¸å‡ºæ¥ï¼ŒæŸ¥çœ‹ Log çš„é”™è¯¯ä¿¡æ¯ä¹Ÿæ˜¯å“­ç¬‘ä¸å¾—äº†â€¦</p><p>æµ‹è¯•çš„åŒäº‹åé¦ˆï¼Œè½®æ’­å›¾ç‰‡ä¸€ç›´ä¸æ˜¾ç¤ºï¼Œä¸»è¦çš„é”™è¯¯ä¿¡æ¯å°±æ˜¯ <strong>SDWebImageErrorDomain</strong>ï¼š</p><p>å‰æœŸæç¤ºï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error Domain=SDWebImageErrorDomain Code=<span class="number">2002</span> <span class="string">&quot;Operation cancelled by user during sending the request&quot;</span> UserInfo=&#123;<span class="built_in">NSLocalizedDescription</span>=Operation cancelled by user during sending the request&#125;</span><br></pre></td></tr></table></figure><p>è¿ç»­åˆ·æ–°æµ‹è¯•æç¤ºï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Error Domain=SDWebImageErrorDomain Code=<span class="number">1003</span> <span class="string">&quot;Image url is blacklisted&quot;</span> UserInfo=&#123;<span class="built_in">NSLocalizedDescription</span>=Image url is blacklisted&#125;</span><br></pre></td></tr></table></figure><p>å¶å°”æç¤ºï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Error Domain=<span class="built_in">NSURLErrorDomain</span> Code=<span class="number">-1017</span> <span class="string">&quot;æ— æ³•è§£æå“åº”&quot;</span> UserInfo=&#123;_kCFStreamErrorCodeKey=<span class="number">-1</span>, <span class="built_in">NSUnderlyingError</span>=<span class="number">0x282ea4660</span> &#123;Error Domain=kCFErrorDomainCFNetwork Code=<span class="number">-1017</span> <span class="string">&quot;(null)&quot;</span> UserInfo=&#123;<span class="built_in">NSErrorPeerAddressKey</span>=&lt;<span class="built_in">CFData</span> <span class="number">0x2802f6bc0</span> [<span class="number">0x2133ecfd0</span>]&gt;&#123;length = <span class="number">16</span>, capacity = <span class="number">16</span>, bytes = <span class="number">0x100222b8c0a81dc40000000000000000</span>&#125;, _kCFStreamErrorCodeKey=<span class="number">-1</span>, _kCFStreamErrorDomainKey=<span class="number">4</span>&#125;&#125;, _NSURLErrorFailingURLSessionTaskErrorKey=LocalDataTask &lt;<span class="number">78</span>D3EF9A-BA05<span class="number">-43</span>FC-B373<span class="number">-740</span>CE983D263&gt;.&lt;<span class="number">1</span>&gt;, _NSURLErrorRelatedURLSessionTaskErrorKey=(</span><br><span class="line">    <span class="string">&quot;LocalDataTask &lt;78D3EF9A-BA05-43FC-B373-740CE983D263&gt;.&lt;1&gt;&quot;</span></span><br><span class="line">), <span class="built_in">NSLocalizedDescription</span>=æ— æ³•è§£æå“åº”, <span class="built_in">NSErrorFailingURLStringKey</span>=https:<span class="comment">//xxx.xxx.xx/xx/xx, NSErrorFailingURLKey=https://xxx.xxx.xx/xx/xx, _kCFStreamErrorDomainKey=4&#125;</span></span><br></pre></td></tr></table></figure><p>ä¹ä¸€çœ‹è«åå…¶å¦™çš„ï¼Œç½‘ç»œæŠ“åŒ…çœ‹ä¸€ä¸‹ï¼Œå…¶å®æ˜¯å› ä¸ºç½‘ç»œè¯·æ±‚å¤±è´¥äº†ï¼Œè®¿é—®å›¾ç‰‡çš„ URL éœ€è¦è¿‡è®¤è¯ï¼Œä½†æ˜¯å®¢æˆ·ç«¯ç¼ºå°‘äº†ä¸€ä¸ª cookieï¼Œè¢«é‡å®šå‘åˆ°ä¸šåŠ¡ç³»ç»Ÿçš„ç™»å½•é¡µé¢äº†â€¦ç„¶ååŒä¸€ä¸ªæœåŠ¡å‡ºç°å¤ªå¤šæ¬¡è¯·æ±‚å¤±è´¥ï¼Œ <code>SDWebImage</code> å°±ä¼šä¸­æ–­å¼‚å¸¸çš„è¯·æ±‚ã€ç”šè‡³â€œæ‹‰é»‘â€ï¼Œå“ˆå“ˆã€‚ã€Œæ— æ³•è§£æå“åº”ã€æ˜¯æœåŠ¡ç«¯çš„é—®é¢˜ï¼Œä¼ è¿‡æ¥çš„å›¾ç‰‡æµè¢«ä¸­æ–­äº†<strong>EOF: Premature EOF encountered</strong> æˆ–è€… <strong>transfer closed with outstanding read data remaining</strong>ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WKWebView Cookie è¯•é”™</title>
      <link href="/2023/01/03/WKWebView-XHR/"/>
      <url>/2023/01/03/WKWebView-XHR/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/wkxhr.png"></p><p>Too young too naiveâ€¦</p><hr><h2 id="è®©äººå¤´ç–¼çš„é—®é¢˜"><a href="#è®©äººå¤´ç–¼çš„é—®é¢˜" class="headerlink" title="è®©äººå¤´ç–¼çš„é—®é¢˜"></a>è®©äººå¤´ç–¼çš„é—®é¢˜</h2><p>&#8195;&#8195;åœ¨é¡¹ç›®ä¸­æ›¿æ¢ UIWebView ä¹‹å‰ï¼Œæˆ‘çœ‹äº† WKWebView çš„æ–‡æ¡£ã€ä¹Ÿçœ‹äº†ç½‘ä¸Šå¤§éƒ¨åˆ†çš„åšå®¢ï¼Œç®—æ˜¯åšäº†ä¸€äº›è¯„ä¼°ï¼Œä¼˜ç¼ºç‚¹éƒ½æŒºæ˜æ˜¾ï¼šä¼˜åœ¨æ€§èƒ½æ›´å¥½ï¼ˆä¹Ÿæœ‰ç½‘å‹è¯´å¾’æœ‰å…¶è¡¨ï¼‰ã€è‹¹æœå®˜æ–¹ä¸»æ¨ï¼Œç¼ºåœ¨ API è¿˜æ²¡å®Œå…¨æˆå‹ã€Cookie åŒæ­¥ç­‰å†å²é—®é¢˜ï¼Œç½‘ä¸Šå…³äº Cookie çš„è§£å†³æ–¹æ¡ˆäº”èŠ±å…«é—¨ï¼ˆå…¶å®æŠ„æ¥æŠ„å»çš„ä¹Ÿéƒ½å·®ä¸å¤šï¼‰ï¼Œçœ‹å®Œæˆ‘è§‰å¾—æˆ‘è¡Œäº†ï¼Œæœæ–­æ¢â„¢çš„ã€‚</p><p>&#8195;&#8195;ä¹‹å‰åœ¨<a href="/2021/12/11/WKWebView-Use/">WKWebView å®æˆ˜ç¯‡</a> - 4. ä¸€ä¸ªç®€å•çš„ Cookie åŒæ­¥æ–¹æ¡ˆ æåˆ°è¿‡ä¸€ä¸ªéå¸¸ç®€é™‹çš„ Cookie åŒæ­¥çš„æ–¹å¼ï¼Œç®€é™‹å°±ç®—äº†ï¼Œä¸»è¦æ˜¯å‘ç°äº†éå¸¸ä¸¥é‡çš„é—®é¢˜ ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡ğŸ¤¡</p><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&gt;<br>NSHTTPCookieStorage å‘ WKHTTPCookieStore åŒæ­¥</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (@available(iOS <span class="number">11.0</span>, *)) &#123;</span><br><span class="line">    <span class="built_in">NSArray</span> *cookies = [[<span class="built_in">NSHTTPCookieStorage</span> sharedHTTPCookieStorage] cookies];</span><br><span class="line">    <span class="built_in">WKHTTPCookieStore</span> *cookieStroe = <span class="keyword">self</span>.webView.configuration.websiteDataStore.httpCookieStore;</span><br><span class="line">    <span class="keyword">if</span> (cookies.count == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSHTTPCookie</span> *cookie <span class="keyword">in</span> cookies) &#123;</span><br><span class="line">        [cookieStroe setCookie:cookie completionHandler:^&#123;</span><br><span class="line">            <span class="keyword">if</span> ([[cookies lastObject] isEqual:cookie]) &#123;</span><br><span class="line">                <span class="comment">//Sync end</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Fallback on earlier versions</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€¦â€¦<br>&lt;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p><p>&#8195;&#8195;å…ˆè¯´ä¸€ä¸‹åº”ç”¨åœºæ™¯ï¼šApp åŸºç¡€åŠŸèƒ½æ˜¯åŸç”Ÿçš„é¡µé¢ï¼ŒåŒ…æ‹¬ç™»å½•è®¤è¯ç­‰ï¼Œå¯¹äºä¸€äº›ä¸šåŠ¡æµç¨‹é‡‡ç”¨çš„æ˜¯ H5 é¡µé¢ï¼Œæ‰€ä»¥æ‰ç”¨åˆ°äº† WKWebViewã€‚ä¸ºäº†å®ç° SSOï¼Œåœ¨æ‰“å¼€ H5 é¡µé¢æ—¶éœ€è¦æŠŠåŸç”Ÿè·å–åˆ°çš„è®¤è¯ä¿¡æ¯ä¼ é€’ç»™é¡µé¢â€¦ç„¶åå°±æœ‰äº†ä¸Šé¢ Cookie åŒæ­¥çš„éœ€æ±‚ã€‚å¯¹äºç³»ç»Ÿå‹å·ï¼ŒåŸæœ¬è®¡åˆ’æ”¯æŒçš„èŒƒå›´æ˜¯ ios12.x~ios 16.x(å½“å¹´æœ€æ–°ç‰ˆæœ¬)ï¼Œä½†æ˜¯è²Œä¼¼è‹¹æœåœ¨ç•¥ä½ç‰ˆæœ¬çš„å®ç°ä¸Šè¿˜æ˜¯æœ‰ç‚¹å„¿å·®åˆ«ï¼Œåˆæˆ–è€…ä½ç‰ˆæœ¬çš„ç³»ç»Ÿæ€§èƒ½è·Ÿä¸ä¸Š API é¢„æœŸçš„é€Ÿåº¦ã€‚</p><p>âŒ é—®é¢˜ä¸€ï¼šé›†ä¸­å‡ºç°åœ¨ ios13.xã€ios14.x çš„ç³»ç»Ÿï¼Œæœ€åˆçš„æ–¹å¼æ˜¯é‡‡ç”¨ <code>defaultDataStore</code> æ¥é…ç½® WebViewï¼Œé…åˆ <code>WKHTTPCookieStore</code> çš„ API åŒæ­¥ Cookieã€‚åœ¨ ios13.* çš„æœºå‹ä¸Šï¼Œç™»å½•ç”¨æˆ· Aã€æ‰“å¼€ H5 é¡µé¢ï¼Œè®¤è¯æ­£å¸¸ï¼›æ¸…ç†åŸç”Ÿçš„ Cookieã€åˆ‡æ¢ç”¨æˆ· Bã€æ‰“å¼€ H5 é¡µé¢ï¼Œè®¤è¯çš„è¿˜æ˜¯ç”¨æˆ· Aï¼Œè¿™ä¸ªæ—¶å€™å…³é—­ H5 ã€å†æ¬¡æ‰“å¼€ï¼Œç”¨æˆ· B è®¤è¯æˆåŠŸã€‚ä½“ç°äº†ä¸¤ä¸ªé—®é¢˜ï¼šä¸€ æ–°çš„ Cookie å¹¶æ²¡æœ‰æˆåŠŸåŒæ­¥è¿‡å»ã€æˆ–è€…è¯´æœ‰éå¸¸ä¸¥é‡çš„æ—¶å·®ï¼›äºŒ <code>defaultDataStore</code> é»˜è®¤ä¼šè¯»å–å­˜å‚¨åœ¨æœ¬åœ°æ²™ç›’çš„ç¼“å­˜ã€ä¹Ÿæœ‰ä¸€å®šçš„æ—¶å·®ï¼Œåœ¨å®˜æ–¹æ³¨é‡Šä¸­ä¹Ÿç¡®å®æ ‡æ˜äº†ç›‘å¬ Cookie å˜åŒ–å¯èƒ½ä¼šå­˜åœ¨æ˜æ˜¾çš„å»¶è¿Ÿï¼›è¿™äº›å»¶è¿Ÿæˆ‘æ€€ç–‘æ˜¯è¯»å†™æ–‡ä»¶å¯¼è‡´çš„ã€‚</p><p>&#8195;&#8195;å¯¹äºæ‰“å¼€ H5 çš„æ–¹å¼ï¼Œå¾ˆå¤šç½‘å‹ä¹Ÿæåˆ°äº†ä¸€ä¸ªæ–¹æ¡ˆï¼šå…ˆåŠ è½½ä¸€ä¸ªå¤§å°ä¸º 0 ä¸å¯è§çš„ WebViewï¼Œç„¶åå†åŠ è½½å¦ä¸€ä¸ªå¯è§çš„ WebViewï¼Œè¿™ç§æ–¹å¼å¯¹äº Ticket åªèƒ½ç”¨ä¸€æ¬¡çš„è®¤è¯æ–¹æ¡ˆè²Œä¼¼ä¸å¤ªå‹å¥½ï¼›å¦ä¸€ç§å¤§å‚æ–¹æ¡ˆæ˜¯æ‹¦æˆª WKWebView çš„æ‰€æœ‰è¯·æ±‚ï¼ŒæŠŠè®¤è¯ä¿¡æ¯æ‰‹åŠ¨æ·»åŠ åˆ°è¯·æ±‚å¤´ä¸­ï¼Œè¿™ä¸ªéœ€è¦ä¿®æ”¹ H5 æ¡†æ¶æ¥é…åˆï¼Ÿã€‚è¿™ä¸¤ç§æ–¹å¼å¯¹äºæˆ‘çš„åœºæ™¯å¯èƒ½æ²¡èµ·ä½œç”¨æˆ–è€…ä¸å¤ªé€‚ç”¨ï¼Œåœ¨çº ç»“æ–¹æ¡ˆæ—¶ç•™æ„åˆ°äº†ä¸€ä¸ªä¹‹å‰æ¼æ‰çš„ API ğŸ‘‡ğŸ»</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">WKWebsiteDataStore</span> : <span class="title">NSObject</span> &lt;<span class="title">NSSecureCoding</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* @abstract Returns the default data store. */</span></span><br><span class="line">+ (<span class="built_in">WKWebsiteDataStore</span> *)defaultDataStore;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** @abstract Returns a new non-persistent data store.</span></span><br><span class="line"><span class="comment"> @discussion If a WKWebView is associated with a non-persistent data store, no data will</span></span><br><span class="line"><span class="comment"> be written to the file system. This is useful for implementing &quot;private browsing&quot; in a web view.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">+ (<span class="built_in">WKWebsiteDataStore</span> *)nonPersistentDataStore;</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><code>nonPersistentDataStore</code> è¿”å›ä¸€ä¸ªéæŒä¹…æ€§æ•°æ®å­˜å‚¨ã€‚å¦‚æœ WKWebView ä¸éæŒä¹…æ€§æ•°æ®å­˜å‚¨å…³è”ï¼Œåˆ™ä¸ä¼šæœ‰ä»»ä½•æ•°æ®è¢«å†™å…¥æ–‡ä»¶ç³»ç»Ÿï¼Œæˆ‘ç†è§£æ˜¯ç±»ä¼¼â€æ— ç—•æµè§ˆâ€ã€‚å¯¹äºå½¼æ­¤æ²¡æœ‰å…³è”çš„ä¸šåŠ¡é¡µé¢ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼è²Œä¼¼æ›´åˆç†ï¼Œä¹Ÿå¯ä»¥é¿å… Cookie äº’ç›¸æ±¡æŸ“ã€‚äºæ˜¯ä¹â€¦â€¦å°è¯•äº†ä¸€ä¸‹ï¼Œå€¼å¾—å¼€å¿ƒçš„æ˜¯ï¼Œåœ¨ ios13.* ä¸Šçš„é—®é¢˜æ²¡æœ‰å†å‡ºç°ï¼Œä½†æ˜¯å‡ºç°äº†ä¸ªé—®é¢˜äºŒâ€¦â€¦ğŸ¤¹â€â™€ï¸ğŸ¤¹â€â™€ï¸ğŸ¤¹â€â™€ï¸ğŸ¤¹â€â™€ï¸ğŸ¤¹â€â™€ï¸</p><p>âŒ é—®é¢˜äºŒï¼šé›†ä¸­å‡ºç°åœ¨ ios12.* çš„ç³»ç»Ÿã€‚æ”¹ä¸ºä½¿ç”¨ <code>nonPersistentDataStore</code> ä»¥åï¼Œä½¿ç”¨æ—§ Cookie çš„é—®é¢˜ä¸å­˜åœ¨äº†ï¼Œä½†æ˜¯åœ¨ ios12.* çš„æœºå‹ä¸Šï¼Œæ‰“å¼€ H5 é¡µé¢ï¼Œä¸€ä¸ª Cookie éƒ½åŒæ­¥ä¸è¿‡å»ï¼Œä¹Ÿä¸å¯¹ï¼Œè¿™æ ·è¯´ä¸ä¸¥è°¨ï¼Œåœ¨åˆšæ‰“å¼€é¡µé¢çš„æ—¶å€™å¯ä»¥åŒæ­¥è¿‡å»ä¸€ä¸ªï¼Œå…¶ä»–å‡ ä¸ªæ²¡åŒæ­¥è¿‡å»ï¼Œç„¶åï¼Œæœ€å¯ç¬‘çš„å°±æ˜¯ç„¶åï¼Œç›‘å¬ ğŸ‘‡ğŸ»</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)cookiesDidChangeInCookieStore:(<span class="built_in">WKHTTPCookieStore</span> *)cookieStore;</span><br></pre></td></tr></table></figure><p>ï¼Œæˆ‘ç›¯ç€æ§åˆ¶å°çš„è¾“å‡ºå¤§æ¦‚ç­‰äº†ä¸€å¹´åŠè½½ï¼Œå…¶ä»–å‡ ä¸ª Cookie æ‰æ˜¾ç¤ºåŒæ­¥æˆåŠŸã€‚ä¸æ˜¯è¯´ <strong>no data will be written to the file system</strong> å—ï¼Ÿè‹äº†å¤©äº†ã€‚</p><p>æ‰€ä»¥å“ªä¸ªé—®é¢˜æ›´ä¸¥é‡å‘¢ï¼Ÿå¥½åƒæ˜¯é—®é¢˜äºŒâ€¦ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£</p><p>âš ï¸ å¯¹äºé—®é¢˜ä¸€ï¼Œæˆ–è®¸æœ‰å¦ä¸€ä¸ª API å¯ä»¥å‚è€ƒï¼šåœ¨é€€å‡ºç™»å½•ï¼ˆåˆ‡æ¢ç”¨æˆ·ï¼‰æ—¶ï¼Œä¸æ­¢æ¸…ç©ºåŸç”Ÿçš„ä¼šè¯ä¿¡æ¯ï¼ŒæŠŠ WKWebView å­˜å‚¨åœ¨æ²™ç›’ä¸­çš„è®°å½•ä¹Ÿåˆ é™¤ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="built_in">WKWebsiteDataStore</span>* dataStore = [<span class="built_in">WKWebsiteDataStore</span> defaultDataStore];</span><br><span class="line">  <span class="comment">//Delete all data store åˆ é™¤æ‰€æœ‰æ•°æ®å­˜å‚¨</span></span><br><span class="line">  <span class="built_in">NSDate</span>* dateFrom = [<span class="built_in">NSDate</span> dateWithTimeIntervalSince1970:<span class="number">0</span>];</span><br><span class="line">  [dataStore removeDataOfTypes:[<span class="built_in">WKWebsiteDataStore</span> allWebsiteDataTypes] modifiedSince:dateFrom completionHandler:^&#123;</span><br><span class="line">      LogDebug(<span class="string">@&quot;Removed all WKWebView data&quot;</span>);</span><br><span class="line">      <span class="keyword">self</span>.webView.configuration.processPool = [[<span class="built_in">WKProcessPool</span> alloc] init]; <span class="comment">// create new process pool to flush all data</span></span><br><span class="line">  &#125;];</span><br><span class="line">  </span><br><span class="line">  ...</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//ios11.* or later Deletes all cookies</span></span><br><span class="line">  <span class="built_in">WKHTTPCookieStore</span>* cookieStore = dataStore.httpCookieStore;</span><br><span class="line">  [cookieStore getAllCookies:^(<span class="built_in">NSArray</span>* cookies) &#123;</span><br><span class="line">      <span class="built_in">NSHTTPCookie</span>* cookie;</span><br><span class="line">      <span class="keyword">for</span>(cookie <span class="keyword">in</span> cookies)&#123;</span><br><span class="line">          [cookieStore deleteCookie:cookie completionHandler:<span class="literal">nil</span>];</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;];</span><br><span class="line">  </span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Only deletes domain Cookies (not session Cookies) åˆ é™¤ file system ä¸­çš„éƒ¨åˆ† cookie</span></span><br><span class="line">  [dataStore fetchDataRecordsOfTypes:[<span class="built_in">WKWebsiteDataStore</span> allWebsiteDataTypes]</span><br><span class="line">   completionHandler:^(<span class="built_in">NSArray</span>&lt;<span class="built_in">WKWebsiteDataRecord</span> *&gt; * __<span class="keyword">nonnull</span> records) &#123;</span><br><span class="line">       <span class="keyword">for</span> (<span class="built_in">WKWebsiteDataRecord</span> *record  <span class="keyword">in</span> records)&#123;</span><br><span class="line">           <span class="built_in">NSSet</span>&lt;<span class="built_in">NSString</span>*&gt;* dataTypes = record.dataTypes;</span><br><span class="line">           <span class="keyword">if</span>([dataTypes containsObject:<span class="built_in">WKWebsiteDataTypeCookies</span>])&#123;</span><br><span class="line">               [[<span class="built_in">WKWebsiteDataStore</span> defaultDataStore] removeDataOfTypes:record.dataTypes</span><br><span class="line">                     forDataRecords:@[record]</span><br><span class="line">                     completionHandler:^&#123;&#125;];</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;];</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>ç²˜ä¸€æ®µ ChatGPT å›å¤çš„ä¼šè¯ Cookie å’Œ é•¿æ•ˆ Cookie çš„åŒºåˆ«ï¼š</p><p>â“ Cookie æ˜¯å¦åˆ†ä¸ºä¼šè¯ Cookie å’Œé•¿æ•ˆ Cookie ï¼Ÿ</p><p>&#8195;&#8195;Cookie å¯ä»¥åˆ†ä¸ºä¼šè¯ Cookieï¼ˆSession Cookieï¼‰å’Œé•¿æ•ˆ Cookieï¼ˆPersistent Cookieï¼‰ä¸¤ç§ç±»å‹ã€‚</p><ol><li>ä¼šè¯ Cookieï¼ˆSession Cookieï¼‰ï¼š<br>ä¼šè¯Cookieæ˜¯ä¸€ç§ä¸´æ—¶æ€§çš„Cookieï¼Œå®ƒä¿å­˜åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­ï¼Œåªåœ¨ç”¨æˆ·çš„ä¼šè¯æœŸé—´æœ‰æ•ˆã€‚ä¼šè¯æœŸé—´é€šå¸¸æ˜¯æŒ‡ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç½‘ç«™ç›´åˆ°å…³é—­æµè§ˆå™¨çš„è¿™æ®µæ—¶é—´ã€‚ä¸€æ—¦ç”¨æˆ·å…³é—­æµè§ˆå™¨ï¼Œä¼šè¯ Cookie å°±ä¼šè¢«åˆ é™¤ï¼Œä¸ä¼šåœ¨ç”¨æˆ·çš„è®¡ç®—æœºä¸Šä¿ç•™ä»»ä½•ä¿¡æ¯ã€‚ä¼šè¯Cookieé€šå¸¸ç”¨äºå­˜å‚¨ä¸´æ—¶çš„ã€ä¸ç”¨æˆ·ä¼šè¯ç›¸å…³çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ç”¨æˆ·ç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦å†…å®¹ç­‰ã€‚</li><li>é•¿æ•ˆ Cookieï¼ˆPersistent Cookieï¼‰ï¼š<br>é•¿æ•ˆ Cookie æ˜¯ä¸€ç§æ›´æŒä¹…çš„ Cookieï¼Œå®ƒä¹Ÿä¿å­˜åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­ï¼Œä½†å…·æœ‰ä¸€å®šçš„è¿‡æœŸæ—¶é—´ã€‚é•¿æ•ˆ Cookie ä¸ä¼šéšç€ç”¨æˆ·ä¼šè¯çš„ç»“æŸè€Œè¢«åˆ é™¤ï¼Œè€Œæ˜¯åœ¨è®¾ç½®çš„è¿‡æœŸæ—¶é—´åˆ°è¾¾ä¹‹å‰ä¸€ç›´æœ‰æ•ˆã€‚é•¿æ•ˆ Cookie é€šå¸¸ç”¨äºè·Ÿè¸ªç”¨æˆ·çš„åå¥½è®¾ç½®ã€å¹¿å‘Šå®šå‘ã€ç”¨æˆ·æ ‡è¯†ç­‰ã€‚è¿™æ ·ï¼Œå½“ç”¨æˆ·é‡æ–°è®¿é—®ç½‘ç«™æ—¶ï¼Œç½‘ç«™å¯ä»¥è¯»å–é•¿æ•ˆ Cookie ä¸­å­˜å‚¨çš„ä¿¡æ¯ï¼Œå¹¶æ ¹æ®ä¹‹å‰çš„æ´»åŠ¨æä¾›æ›´åŠ ä¸ªæ€§åŒ–çš„ä½“éªŒã€‚</li></ol><p>æ€»ç»“ï¼š</p><ul><li>ä¼šè¯ Cookie æ˜¯ä¸´æ—¶æ€§çš„ï¼Œåœ¨ç”¨æˆ·ä¼šè¯æœŸé—´æœ‰æ•ˆï¼Œå…³é—­æµè§ˆå™¨åä¼šè¢«åˆ é™¤ã€‚</li><li>é•¿æ•ˆ Cookie æ˜¯æŒä¹…æ€§çš„ï¼Œå…·æœ‰è¿‡æœŸæ—¶é—´ï¼Œåœ¨è¿‡æœŸä¹‹å‰ä¸€ç›´æœ‰æ•ˆã€‚</li></ul><p>â“ æœåŠ¡ç«¯æ˜¯å¦‚ä½•æŒ‡å®šä¸åŒç±»å‹çš„ Cookieï¼Ÿ</p><p>&#8195;&#8195;åœ¨æœåŠ¡ç«¯ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® Cookie çš„å±æ€§æ¥æŒ‡å®šå®ƒçš„ç±»å‹æ˜¯ä¼šè¯ Cookie è¿˜æ˜¯é•¿æ•ˆ Cookieã€‚è¿™å¯ä»¥é€šè¿‡åœ¨ HTTP å“åº”å¤´ä¸­è®¾ç½® Cookie çš„ â€œMax-Ageâ€ï¼ˆæœ€å¤§å¹´é¾„ï¼‰æˆ– â€œExpiresâ€ï¼ˆè¿‡æœŸæ—¶é—´ï¼‰å±æ€§æ¥å®ç°ã€‚</p><ol><li><p>è®¾ç½®ä¼šè¯ Cookieï¼š<br>å¦‚æœå¸Œæœ› Cookie åœ¨ç”¨æˆ·ä¼šè¯æœŸé—´æœ‰æ•ˆï¼Œå³åœ¨ç”¨æˆ·å…³é—­æµè§ˆå™¨åè¢«åˆ é™¤ï¼Œå¯ä»¥åœ¨ HTTP å“åº”å¤´ä¸­è®¾ç½® â€œSet-Cookieâ€ å­—æ®µï¼Œå¹¶çœç•¥ â€œMax-Ageâ€ å’Œ â€œExpiresâ€ å±æ€§ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: cookie_name=cookie_value; path=/; HttpOnly</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;â€HttpOnlyâ€ å±æ€§å¯ä»¥é˜²æ­¢ JavaScript è®¿é—® Cookieï¼Œæé«˜å®‰å…¨æ€§ã€‚</p></li><li><p>è®¾ç½®é•¿æ•ˆ Cookieï¼š<br>å¦‚æœå¸Œæœ› Cookie åœ¨ä¸€å®šçš„æ—¶é—´å†…ä¿æŒæœ‰æ•ˆï¼Œå¯ä»¥è®¾ç½® â€œMax-Ageâ€ å±æ€§æ¥æŒ‡å®šCookieçš„å­˜æ´»æ—¶é—´ï¼ˆå•ä½ä¸ºç§’ï¼‰ï¼Œæˆ–è€…ä½¿ç”¨ â€œExpiresâ€ å±æ€§æ¥æŒ‡å®šè¿‡æœŸæ—¥æœŸå’Œæ—¶é—´ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: cookie_name=cookie_value; path=/; Max-Age=3600; HttpOnly</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;ä¸Šè¿°ä¾‹å­ä¸­ï¼Œâ€Max-Age=3600â€ è¡¨ç¤º Cookie å°†åœ¨è®¾ç½®åçš„3600ç§’ï¼ˆ1å°æ—¶ï¼‰åè¿‡æœŸã€‚</p></li></ol><p>&#8195;&#8195;æˆ–è€…ä½¿ç”¨ â€œExpiresâ€ å±æ€§ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: cookie_name=cookie_value; path=/; Expires=Wed, 20 Jul 2023 12:00:00 GMT; HttpOnly</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;ä¸Šè¿°ä¾‹å­ä¸­ï¼Œâ€Expiresâ€ å±æ€§æŒ‡å®šäº†ä¸€ä¸ªå…·ä½“çš„è¿‡æœŸæ—¥æœŸå’Œæ—¶é—´ï¼Œå½“åˆ°è¾¾æŒ‡å®šæ—¶é—´åï¼ŒCookie å°†è¿‡æœŸå¤±æ•ˆã€‚</p><p>&#8195;&#8195;è¯·æ³¨æ„ï¼Œâ€Max-Ageâ€ å’Œ â€œExpiresâ€ å±æ€§æ˜¯äº’æ–¥çš„ï¼Œåªéœ€è¦è®¾ç½®å…¶ä¸­ä¸€ä¸ªå³å¯ã€‚åŒæ—¶ï¼Œå¦‚æœä¸¤è€…éƒ½è®¾ç½®äº†ï¼Œâ€Max-Ageâ€ å±æ€§ä¼˜å…ˆäº â€œExpiresâ€ å±æ€§ã€‚</p><p>&#8195;&#8195;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè®¾ç½®äº†é•¿æ•ˆ Cookieï¼Œé‚£ä¹ˆè¿™ä¸ª Cookie å°†åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­ä¿æŒæœ‰æ•ˆï¼Œç›´åˆ°è¾¾åˆ°æŒ‡å®šçš„è¿‡æœŸæ—¶é—´æˆ–è€…ç”¨æˆ·æ‰‹åŠ¨åˆ é™¤äº†è¿™ä¸ª Cookie ä¸ºæ­¢ã€‚è€Œä¼šè¯ Cookie åˆ™ä¼šåœ¨ç”¨æˆ·å…³é—­æµè§ˆå™¨åè‡ªåŠ¨åˆ é™¤ï¼Œä¸ä¼šåœ¨ç”¨æˆ·è®¡ç®—æœºä¸Šä¿ç•™ä»»ä½•ä¿¡æ¯ã€‚</p><hr><h2 id="å…³äº-WKWebView-çš„å‡ ç¯‡æ–‡ç« ï¼š"><a href="#å…³äº-WKWebView-çš„å‡ ç¯‡æ–‡ç« ï¼š" class="headerlink" title="å…³äº WKWebView çš„å‡ ç¯‡æ–‡ç« ï¼š"></a><strong>å…³äº WKWebView çš„å‡ ç¯‡æ–‡ç« ï¼š</strong></h2><p><a href="/2021/12/01/WKWebView/">WKWebView åŸºç¡€ç¯‡</a><br><a href="/2021/12/02/WKWebView-Protocol/">WKWebView åè®®ç¯‡</a><br><a href="/2021/12/11/WKWebView-Use/">WKWebView å®æˆ˜ç¯‡</a></p><h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a><strong>Demo</strong></h2><p><a href="https://github.com/ATommyGirl/WebView">WebView çš„ Demo</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> WebView </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2022å¹´å°ç»“å„¿</title>
      <link href="/2022/12/31/2022%E5%B9%B4%E5%B0%8F%E7%BB%93%E5%84%BF/"/>
      <url>/2022/12/31/2022%E5%B9%B4%E5%B0%8F%E7%BB%93%E5%84%BF/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/kn_dou.PNG" style="zoom:60%;"><p>Ummmmmâ€¦â€¦</p><hr><p>ä»Šå¹´ä¸€æ•´ä¸ªçš„çŠ¶æ€å°±æ˜¯ Ummmmmâ€¦â€¦</p><h2 id="å·¥ä½œ"><a href="#å·¥ä½œ" class="headerlink" title="å·¥ä½œ"></a>å·¥ä½œ</h2><h3 id="iOS-å¼€å‘"><a href="#iOS-å¼€å‘" class="headerlink" title="iOS å¼€å‘"></a>iOS å¼€å‘</h3><p>&#8195;&#8195;å¡«å‘ã€‚ç»™åˆ«äººæ“¦å±è‚¡ã€å¡«å‘ï¼›ç»™è‡ªå·±æŒ–å‘ã€å¡«å‘ã€‚å”¯ä¸€çš„è¿›æ­¥æ˜¯è¿™å‡ å¤©å’Œ WKWebView ä½œæ–—äº‰æœ‰äº†äº›å‘ç°å’Œå¿ƒå¾—ã€‚Soâ€¦Ummmmmâ€¦â€¦</p><h3 id="ç®¡ç†"><a href="#ç®¡ç†" class="headerlink" title="ç®¡ç†"></a>ç®¡ç†</h3><p>&#8195;&#8195;ä¸å¹ä¸é»‘è¿˜æ˜¯æœ‰è¿›æ­¥çš„ï¼Œæˆ‘çš„é£æ ¼æ˜¯ä»¥çœŸè¯šå–èƒœ - å¾…äººçœŸè¯šã€å¾…äº‹ç”¨å¿ƒã€‚ã€Œå¯¹äº‹ä¸å¯¹äººã€æ˜¯å¾ˆéš¾çš„ä¸€ä»¶äº‹ï¼Œä¸æ˜¯æ¯ä¸ªäººéƒ½èƒ½åšå¾—åˆ°ï¼Œä½†æƒ³çœŸè¯šé‚£å°±è¦ä»¥è¿™ä¸ªä¸ºåŸºå‡†ï¼Œæ¯æ¬¡å½“æˆ‘æƒ³è€å°æ€§å­é’ˆå¯¹è°çš„æ—¶å€™ï¼Œå°±ä¼šå…ˆå›æƒ³ä¸€ä¸‹è¿™å¥è¯ï¼Œæ¯•ç«Ÿå·±æ‰€ä¸æ¬²å‹¿æ–½äºäººã€‚å®åœ¨çœ‹ä¸é¡ºçœ¼çš„äººï¼Œå°± let it go å§â€¦</p><p>&#8195;&#8195;ç”¨çœŸå¿ƒâ€¦</p><h3 id="æ‹“å®½æŠ€æœ¯æ ˆ"><a href="#æ‹“å®½æŠ€æœ¯æ ˆ" class="headerlink" title="æ‹“å®½æŠ€æœ¯æ ˆ"></a>æ‹“å®½æŠ€æœ¯æ ˆ</h3><p>&#8195;&#8195;æ•´ç†äº†å‡ ç¯‡ Linux å…¥é—¨å°çŸ¥è¯†ï¼Œç»§ç»­åŠªåŠ›ã€‚</p><span id="more"></span><p>=============================================</p><p>&#8195;&#8195;å…¶å®ä»Šå¹´ <code>Ummmmm......</code> çš„ä¸»è¦åŸå› å°±æ˜¯å› ä¸ºå·¥ä½œï¼Œæ„Ÿè§‰æ‰å…¥äº†ä¸€ä¸ªé™·é˜±â€¦</p><p>&#8195;&#8195;å››ä¸ªå·¥ç§æˆ‘ä»¬å…ˆå‡è®¾ä¸ºï¼šå¨å¸ˆã€æ“¦æ¡Œå­/æ‰«åœ°ã€å€’åƒåœ¾ï¼Œå‘å±•ç©ºé—´ä»é«˜åˆ°ä½æ’åˆ—ï¼Œæ“¦æ¡Œå­/æ‰«åœ° åˆ—ä¸ºåŒä¸€çº§åˆ«ã€‚æ¯ä¸ªäººéƒ½æ˜¯ä»å€’åƒåœ¾èµ·æ­¥ï¼Œæ…¢æ…¢å¾€ä¸Šæå‡ã€‚è®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä½ çš„ä¸‹ä¸€é˜¶æ®µç›®æ ‡æ˜¯ã€Œæ“¦æ¡Œå­ã€ï¼Œä½†æ˜¯ã€ŒåŸæœ¬æ‰«åœ°ã€çš„äººå‘Šè¯‰ä½ ï¼Œâ€œä¸è¡Œå‘€ï¼Œæˆ‘è·Ÿåº—é•¿åé¦ˆçš„ä½ç½®æ˜¯â€˜æ‰«åœ°â€™ï¼Œä½ å¾€æˆ‘è¿™ä¸ªæ–¹å‘åŠªåŠ›å§â€¦â€ã€‚å¥½ï¼èƒ½æå‡å¯èƒ½ä½ ä¹Ÿæ¥å—äº†ï¼Œå‡†å¤‡å¾€ã€Œæ‰«åœ°ã€æ–¹å‘å‡ºå‡»ï¼Œä½†æ˜¯è¿™ä¸€å¹´è®©ä½ å¹²çš„æ´»å´æ˜¯ã€Œæ“¦æ¡Œå­+æ‰«åœ°ã€ï¼Œå¹¶ä¸”è¢«æ¡Œå­çš„è¾¹è¾¹è§’è§’å„ç§ç»†èŠ‚æ¶ˆç£¨äº†å¤§éƒ¨åˆ†çš„æ—¶å…‰ï¼Œæ‰«åœ°ä¹Ÿåšäº†ï¼Œä½†æ²¡æœ‰è¾¾åˆ°ä½ é¢„æƒ³çš„æå‡ç©ºé—´ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºã€ŒåŸæœ¬æ‰«åœ°ã€çš„äººæƒ³å»åšå¨å¸ˆäº†ï¼Œæ­£å¥½æ‰¾ä¸ªäººæ¥ç›˜ï¼Œå¯èƒ½ä¹Ÿæœ‰åŸ¹å…»ä½ æ‰«åœ°çš„åˆå¿ƒå§ï¼Œå¯æƒœåˆå¿ƒæœ‰ä½†ä¸å¤šï¼ˆæˆ‘æ˜¯æ›´å–œæ¬¢åŒèµ¢çš„ï¼‰ã€‚åˆ°äº†å¹´åº•æ€»ç»“ç»©æ•ˆçš„æ—¶å€™ï¼šã€Œæ“¦æ¡Œå­ã€çš„ä»˜å‡ºä¸€å¥ä¸æäº†ï¼Œå› ä¸ºä½ çš„ä½ç½®æ˜¯ã€Œæ‰«åœ°ã€å‘€ã€‚</p><p>&#8195;&#8195;Soâ€¦Ummmmmâ€¦â€¦</p><h2 id="ç”Ÿæ´»"><a href="#ç”Ÿæ´»" class="headerlink" title="ç”Ÿæ´»"></a>ç”Ÿæ´»</h2><h3 id="æŠ—ç–«"><a href="#æŠ—ç–«" class="headerlink" title="æŠ—ç–«"></a>æŠ—ç–«</h3><p>1  æœˆä»½ - åšï¼Œæ ¸ï¼ŒğŸ‹ã€‚<br>2  æœˆä»½ - åšï¼Œæ ¸ï¼ŒğŸ‹ã€‚<br>3  æœˆä»½ - åšï¼Œæ ¸ï¼ŒğŸ‹ã€‚<br>4  æœˆä»½ - åšï¼Œæ ¸ï¼ŒğŸ‹ã€‚<br>5  æœˆä»½ - åšï¼Œæ ¸ï¼ŒğŸ‹ã€‚<br>6  æœˆä»½ - åšï¼Œæ ¸ï¼ŒğŸ‹ã€‚<br>7  æœˆä»½ - åšï¼Œæ ¸ï¼ŒğŸ‹ã€‚<br>8  æœˆä»½ - åšï¼Œæ ¸ï¼ŒğŸ‹ã€‚<br>9  æœˆä»½ - åšï¼Œæ ¸ï¼ŒğŸ‹ã€‚<br>10 æœˆä»½ - åšï¼Œæ ¸ï¼ŒğŸ‹ã€‚<br>11 æœˆä»½ - åšï¼Œæ ¸ï¼ŒğŸ‹ã€‚<br>12 æœˆä»½ - ğŸ‘ å’©å’©~äº†ã€‚</p><p>Soâ€¦Ummmmmâ€¦â€¦</p><h3 id="çˆ±å¥½"><a href="#çˆ±å¥½" class="headerlink" title="çˆ±å¥½"></a>çˆ±å¥½</h3><h4 id="åšæ‰‹å·¥"><a href="#åšæ‰‹å·¥" class="headerlink" title="åšæ‰‹å·¥"></a>åšæ‰‹å·¥</h4><p>&#8195;&#8195;åšæ‰‹å·¥çš„ä¹ æƒ¯è¿˜ç®—åšæŒçš„ä¸é”™ã€‚å»å¹´å…¥äº†æ‰‹å·¥çš®å…·çš„å‘ï¼Œæ–°æ‰‹å·¥å…·å·²å¤‡é½ï¼Œåšäº†å‡ ä¸ªç›¸å½“ä¸é”™çš„åŒ…åŒ…ã€‚</p><p>&#8195;&#8195;ä»Šå¹´é™ªä¼´æˆ‘6å¹´çš„ç”µè„‘åŒ…ç ´æ‰äº†ï¼Œåˆå®åœ¨æ˜¯ç”¨ä¹ æƒ¯äº†è¿™ç§æ¬¾å¼çš„åŒ…ï¼Œæƒ³ä¹°ä¸ªçš®çš„åˆä¹°ä¸åˆ°åŒæ¬¾ï¼Œæ‰€ä»¥åªèƒ½è‡ªå·±åšäº†ï¼Œæœ€ç»ˆä¸€å…±èŠ±è´¹70ä¸ªå°æ—¶åšäº†ä¸€ä¸ªç‰›çš®çš„ç”µè„‘åŒ…ï¼šå­¦äº†ä¸¤å¤© CADï¼ŒåŠ ä¸Šç”»å›¾ã€æ‰“å°ã€è£å‰ªã€åšåŒ…çš„ä¸€å¥—æµç¨‹ç­‰ç­‰â€¦ğŸ¤“â€¦</p><p>&#8195;&#8195;å¿½ç•¥è‰²å·®ï¼ŒçœŸå®é¢œè‰²æ˜¯å‰ä¸‰å¼ çš„é¢œè‰²ï¼Œæ‹ç€å¯å¼€å¿ƒäº†ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿå ªæ¯”æŸäº›å“ç‰Œäº†ï¼Œå•Šå“ˆå“ˆå“ˆã€‚</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/bg01.JPG"></td><td><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/bg02.JPG"></td></tr><tr><td><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/bg03.png"></td><td><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/bg04.JPG"></td></tr></tbody></table><h3 id="æ—…æ¸¸"><a href="#æ—…æ¸¸" class="headerlink" title="æ—…æ¸¸"></a>æ—…æ¸¸</h3><p>&#8195;&#8195;ä»Šå¹´å›½åº†èŠ‚çš„è¿”ç¨‹æœºç¥¨è¢«å–æ¶ˆäº†å…«ç™¾éï¼Œå‡ºå»äº†å°±å¯èƒ½å›ä¸æ¥ã€‚è¿˜æƒ³å‡ºå»ç©ï¼Ÿåšæ¢¦å‘¢ï¼Œä½†æˆ‘çœŸçš„å¾ˆæƒ³å»â€¦è¿™ä¸¤å¤©æˆ‘æ€»æ˜¯å“¼å”±ä¸¤å¥æ­Œè¯ï¼šâ€œçˆ¸çˆ¸å¦ˆå¦ˆå»æ¸¸ç©å„¿ï¼Œè€Œæˆ‘å»ä¸Šç­ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚â€¦â€</p><p>&#8195;&#8195;Soâ€¦Ummmmmâ€¦â€¦</p><h2 id="7788"><a href="#7788" class="headerlink" title="7788"></a>7788</h2><h2 id><a href="#" class="headerlink" title></a></h2><p>å¯èƒ½å²æ•°å¤§äº†æ€»æ˜¯å®¹æ˜“æ„Ÿæ…¨ï¼Œè¿™ä¸¤å¹´å¯¹æˆ‘å½±å“æ¯”è¾ƒå¤§çš„ä¸¤æ–¹é¢å°±æ˜¯ï¼šäººæ€§å’Œå› æœã€‚</p><ul><li>åˆ†åˆ«çš„æ—¶å€™ä¸€å®šè¦å¥½å¥½é“åˆ«ï¼Œä¸ç„¶å¯èƒ½å†ä¹Ÿæ²¡æœ‰æœºä¼šäº†ã€‚</li></ul><blockquote><p>æˆ‘ä»¥ä¸ºå¾ˆå¿«å°±èƒ½è§é¢ï¼Œæ‰€ä»¥é‚£å¤©æ²¡æœ‰å¥½å¥½é“åˆ«ã€‚</p></blockquote><ul><li><p>å‡¡äº‹éƒ½æœ‰<strong>å› æœ</strong>ï¼Œæ‹æ¸…æ¥šå› å’Œæœï¼Œå¦‚æœè¿˜æœ‰ä¸æ˜äº†çš„ï¼Œä¹Ÿå°±å’Œè‡ªå·±æ²¡å…³ç³»äº†ï¼Œæ”¾ä¸‹å°±å¥½ã€‚</p></li><li><p>è¿œç¦»å–„äºâ€œæ§æ€â€çš„äººã€‚é˜´é™©ã€‚</p></li><li><p>çæƒœæ„¿æ„æŒ‡å‡ºæˆ‘ä»¬ä¸è¶³çš„äººï¼Œå½“ç„¶å‰ææ˜¯æ— æ¶æ„æ”»å‡»çš„ï¼Œæ¯•ç«Ÿèº«å¤„ä¸€ä¸ªè™šä¼ªçš„ä¸–ç•Œï¼ŒçœŸè¯è¶Šæ¥è¶Šéš¾å¬åˆ°äº†ã€‚</p></li></ul><blockquote><p>é—»å–„è¨€åˆ™æ‹œï¼Œå‘Šæœ‰è¿‡åˆ™å–œã€‚</p></blockquote><ul><li>çæƒœå‘¨å›´çˆ±æˆ‘ä»¬çš„å®¶äººå’Œæœ‹å‹ã€‚å¼•ç”¨æ‘ä¸Šæ˜¥æ ‘çš„ä¸€æ®µè¯ï¼š</li></ul><blockquote><p>ä½ è¦è®°ä½å¤§é›¨ä¸­ä¸ºä½ æ’‘ä¼çš„äººï¼Œå¸®ä½ æŒ¡ä½å¤–æ¥ä¹‹ç‰©çš„äººï¼Œé»‘æš—ä¸­é»˜é»˜æŠ±ç´§ä½ çš„äººï¼Œé€—ä½ ç¬‘çš„äººï¼Œé™ªä½ å½»å¤œèŠå¤©çš„äººï¼Œåè½¦æ¥çœ‹æœ›ä½ çš„äººï¼Œé™ªä½ å“­è¿‡çš„äººï¼Œåœ¨åŒ»é™¢é™ªä½ çš„äººï¼Œæ€»æ˜¯ä»¥ä½ ä¸ºé‡çš„äººã€‚ æ˜¯è¿™äº›äººç»„æˆä½ ç”Ÿå‘½ä¸­ä¸€ç‚¹ä¸€æ»´çš„æ¸©æš–ï¼Œæ˜¯è¿™äº›æ¸©æš–ä½¿ä½ è¿œç¦»é˜´éœ¾ï¼Œæ˜¯è¿™äº›æ¸©æš–ä½¿ä½ æˆä¸ºå–„è‰¯çš„äººã€‚</p></blockquote><p>ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> 7788 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SDWebImage ä¸æºå¸¦ Cookie çš„é—®é¢˜</title>
      <link href="/2022/11/15/SDWebImage/"/>
      <url>/2022/11/15/SDWebImage/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><p>&#8195;&#8195;OC ä¸­å¸¸ç”¨çš„è½®æ’­å›¾æ§ä»¶æ˜¯ <code>SDCycleScrollView</code>ï¼ŒåŸºæœ¬ä¸Šæ»¡è¶³è½®æ’­çš„éœ€æ±‚ï¼Œå½“ç„¶ï¼Œå¦‚æœéœ€è¦èŠ±é‡Œèƒ¡å“¨çš„è‡ªå®šä¹‰æ ·å¼ï¼Œè¿˜æ˜¯è¦è‡ªå·±æ”¹çš„â€¦</p><p>&#8195;&#8195;ä»Šå¤©æƒ³è®°å½•çš„ä¸€ä¸ªå°é—®é¢˜æ˜¯ï¼šè½®æ’­å›¾è¦åŠ è½½çš„å›¾ç‰‡éœ€è¦é€šè¿‡è®¤è¯æ‰å¯ä»¥è®¿é—®ï¼Œè€Œè®¤è¯ä¿¡æ¯æ˜¯ç”±æœåŠ¡å™¨é¢å‘ã€é€šè¿‡ Cookie ä¸‹å‘åˆ°å®¢æˆ·ç«¯ã€‚é—®é¢˜æ˜¯è½®æ’­å›¾æ²¡æœ‰è‡ªåŠ¨æºå¸¦ Cookieï¼Œå¯¼è‡´è®¤è¯å¤±è´¥ã€å›¾ç‰‡åŠ è½½å¤±è´¥ã€‚</p><h2 id="SDK-çš„ç‰ˆæœ¬ï¼š"><a href="#SDK-çš„ç‰ˆæœ¬ï¼š" class="headerlink" title="SDK çš„ç‰ˆæœ¬ï¼š"></a>SDK çš„ç‰ˆæœ¬ï¼š</h2><p><code>SDCycleScrollView</code> v1.82<br><code>SDWebImage</code> v5.12.6</p><h2 id="åˆ†æè¿‡ç¨‹ï¼š"><a href="#åˆ†æè¿‡ç¨‹ï¼š" class="headerlink" title="åˆ†æè¿‡ç¨‹ï¼š"></a>åˆ†æè¿‡ç¨‹ï¼š</h2><p>ä¸æƒ³çœ‹çš„è¯ï¼Œè¯·ç›´æ¥è·³åˆ°<a href="#%E7%BB%93%E6%9E%9C%EF%BC%9A">ã€ç»“æœã€‘</a>ã€‚</p><ol><li><code>SDCycleScrollView</code> ç»™æ¯ä¸€ä¸ª cell è®¾ç½®å›¾ç‰‡çš„ä½ç½®ä¸º SDCycleScrollView.m:</li></ol><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">UICollectionViewCell</span> *)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView cellForItemAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath</span><br><span class="line">&#123;</span><br><span class="line">    SDCollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:ID forIndexPath:indexPath];</span><br><span class="line">  ...</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>.onlyDisplayText &amp;&amp; [imagePath isKindOfClass:[<span class="built_in">NSString</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([imagePath hasPrefix:<span class="string">@&quot;http&quot;</span>]) &#123;</span><br><span class="line">            [cell.imageView sd_setImageWithURL:[<span class="built_in">NSURL</span> URLWithString:imagePath] placeholderImage:<span class="keyword">self</span>.placeholderImage];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ...</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">return</span> cell;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å¯è§ï¼Œå¦‚æœæ˜¯ç½‘ç»œå›¾ç‰‡ï¼Œä½¿ç”¨çš„ API æ˜¯ -[SDAnimatedImageView sd_setImageWithURL:placeholderImage:];ï¼Œé‚£å¦‚æœå¤„ç† Cookie çš„è¯ï¼Œåº”è¯¥ä¹Ÿæ˜¯é’ˆå¯¹ <code>SDWebImage</code>ã€‚</p><ol start="2"><li><code>SDWebImage</code> -&gt; <code>SDAnimatedImageView.h</code> æä¾›çš„å‡ ä¸ª API å…¶å®è°ƒç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªæ–¹æ³•ï¼š</li></ol><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Set the imageView `image` with an `url`, placeholder, custom options and context.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * The download is asynchronous and cached.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * @param url            The url for the image.</span></span><br><span class="line"><span class="comment"> * @param placeholder    The image to be set initially, until the image request finishes.</span></span><br><span class="line"><span class="comment"> * @param options        The options to use when downloading the image. @see SDWebImageOptions for the possible values.</span></span><br><span class="line"><span class="comment"> * @param context        A context contains different options to perform specify changes or processes, see `SDWebImageContextOption`. This hold the extra objects which `options` enum can not hold.</span></span><br><span class="line"><span class="comment"> * @param progressBlock  A block called while image is downloading</span></span><br><span class="line"><span class="comment"> *                       @note the progress block is executed on a background queue</span></span><br><span class="line"><span class="comment"> * @param completedBlock A block called when operation has been completed. This block has no return value</span></span><br><span class="line"><span class="comment"> *                       and takes the requested UIImage as first parameter. In case of error the image parameter</span></span><br><span class="line"><span class="comment"> *                       is nil and the second parameter may contain an NSError. The third parameter is a Boolean</span></span><br><span class="line"><span class="comment"> *                       indicating if the image was retrieved from the local cache or from the network.</span></span><br><span class="line"><span class="comment"> *                       The fourth parameter is the original image url.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)sd_setImageWithURL:(<span class="keyword">nullable</span> <span class="built_in">NSURL</span> *)url</span><br><span class="line">          placeholderImage:(<span class="keyword">nullable</span> <span class="built_in">UIImage</span> *)placeholder</span><br><span class="line">                   options:(SDWebImageOptions)options</span><br><span class="line">                   context:(<span class="keyword">nullable</span> SDWebImageContext *)context</span><br><span class="line">                  progress:(<span class="keyword">nullable</span> SDImageLoaderProgressBlock)progressBlock</span><br><span class="line">                 completed:(<span class="keyword">nullable</span> SDExternalCompletionBlock)completedBlock;</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;éœ€è¦æ³¨æ„ä¸€ä¸ªå‚æ•°ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* @param options        The options to use when downloading the image. @see SDWebImageOptions <span class="keyword">for</span> the possible values.</span><br><span class="line"></span><br><span class="line"><span class="comment">/// WebCache options</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_OPTIONS</span>(<span class="built_in">NSUInteger</span>, SDWebImageOptions) &#123;</span><br><span class="line">  ...</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Handles cookies stored in NSHTTPCookieStore by setting</span></span><br><span class="line"><span class="comment">     * NSMutableURLRequest.HTTPShouldHandleCookies = YES;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    SDWebImageHandleCookies = <span class="number">1</span> &lt;&lt; <span class="number">5</span>,</span><br><span class="line">  ...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;æˆ‘çœ‹ç½‘ä¸Šå¤§éƒ¨åˆ†åšå®¢éƒ½åœ¨è¯´ï¼ŒæŠŠè¿™ä¸€ä¸ªé€‰é¡¹è®¾ç½®ä¸€ä¸‹ï¼Œåœ¨ SDCycleScrollView.m ä¸­ä½¿ç”¨å¦ä¸€ä¸ª API è®¾ç½®å›¾ç‰‡å°±å¯ä»¥äº†ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">UICollectionViewCell</span> *)collectionView:(<span class="built_in">UICollectionView</span> *)collectionView cellForItemAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath</span><br><span class="line">&#123;</span><br><span class="line">    SDCollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:ID forIndexPath:indexPath];</span><br><span class="line">  ...</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">if</span> (!<span class="keyword">self</span>.onlyDisplayText &amp;&amp; [imagePath isKindOfClass:[<span class="built_in">NSString</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([imagePath hasPrefix:<span class="string">@&quot;http&quot;</span>]) &#123;</span><br><span class="line">            [cell.imageView sd_setImageWithURL:[<span class="built_in">NSURL</span> URLWithString:imagePath] placeholderImage:<span class="keyword">self</span>.placeholderImage options:SDWebImageHandleCookies];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ...</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">return</span> cell;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;é¦–å…ˆï¼Œå¯¹äºæ”¹ä¸‰æ–¹ SDK æºç çš„è¡Œä¸ºï¼Œå°å’ªæ˜¯ç›¸å½“é„™è§†çš„ğŸ˜‚ï¼Œå…¶æ¬¡ï¼Œæ”¹äº†ä»¥åå¹¶ä¸ç®¡ç”¨å‘€ğŸ˜‚ï¼Œæ˜¯æˆ‘å“ªé‡Œç†è§£é”™äº†å—â€¦ä¸çŸ¥é“é‚£äº›åšå®¢æ˜¯ä¸æ˜¯äº’ç›¸æŠ„æ¥æŠ„å»ï¼Œæ ‡ç‚¹ç¬¦å·éƒ½ä¸€æ¨¡ä¸€æ ·ã€‚<br>&#8195;&#8195;ä½†æ—¢ç„¶ <code>SDWebImage</code> çš„æ³¨é‡Šéƒ½è¯´äº†ï¼Œè®¾ç½® cookie å°±æ˜¯ç”¨è¿™ä¸ª optionï¼Œé‚£æˆ‘ä»¬ç‚¹è¿›å»çœ‹çœ‹ä¸ºä»€ä¹ˆæ²¡èµ·ä½œç”¨ï¼Œä¸€å±‚ä¸€å±‚è°ƒç”¨å…³ç³»çš„æŸ¥çœ‹ï¼Œçœ‹åˆ°æœ€åä¸‹è½½å›¾ç‰‡çš„æ“ä½œéƒ½æ˜¯åœ¨åŒä¸€ä¸ªåœ°æ–¹ï¼š<code>SDWebImageDownloader</code>ã€‚</p><ol start="3"><li><code>SDWebImageDownloader.m</code> ä¸­æŠŠ <code>SDWebImageHandleCookies</code> è½¬ä¸ºäº† <code>SDWebImageDownloaderHandleCookies</code>ï¼Œä¸¤ä¸ª option çš„å«ä¹‰å…¶å®æ˜¯ä¸€æ ·çš„ã€‚</li></ol><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">id</span>&lt;SDWebImageOperation&gt;)requestImageWithURL:(<span class="built_in">NSURL</span> *)url options:(SDWebImageOptions)options context:(SDWebImageContext *)context progress:(SDImageLoaderProgressBlock)progressBlock completed:(SDImageLoaderCompletedBlock)completedBlock &#123;</span><br><span class="line">    <span class="built_in">UIImage</span> *cachedImage = context[SDWebImageContextLoaderCachedImage];</span><br><span class="line">    </span><br><span class="line">    SDWebImageDownloaderOptions downloaderOptions = <span class="number">0</span>;</span><br><span class="line">  ...</span><br><span class="line">    <span class="keyword">if</span> (options &amp; SDWebImageHandleCookies) downloaderOptions |= SDWebImageDownloaderHandleCookies;</span><br><span class="line">  ...</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> downloadImageWithURL:url options:downloaderOptions context:context progress:progressBlock completed:completedBlock];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;ç»§ç»­å¾€ return çš„ä¸‹ä¸€ä¸ªæ–¹æ³•é‡Œçœ‹ï¼Œå°±èƒ½æ‰¾åˆ°å…³é”®çš„ä½ç½®äº†ï¼š</p><p>&#8195;&#8195;åœ¨ä¸‹é¢è¿™ä¸ªæ–¹æ³•ä¸­åˆå§‹åŒ–äº†ä¸€ä¸ª <code>SDWebImageDownloaderOperation</code> å’Œ <code>SDWebImageDownloadToken</code> ç”¨æ¥å‘è¯·æ±‚ä¸‹è½½å›¾ç‰‡ï¼Œä½†æ˜¯åœ¨è¿™é‡Œæ‹¦æˆªåˆ°çš„ request header è¿˜æ˜¯æ²¡æœ‰ cookie çš„ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">nullable</span> SDWebImageDownloadToken *)downloadImageWithURL:(<span class="keyword">nullable</span> <span class="built_in">NSURL</span> *)url</span><br><span class="line">                                                   options:(SDWebImageDownloaderOptions)options</span><br><span class="line">                                                   context:(<span class="keyword">nullable</span> SDWebImageContext *)context</span><br><span class="line">                                                  progress:(<span class="keyword">nullable</span> SDWebImageDownloaderProgressBlock)progressBlock</span><br><span class="line">                                                 completed:(<span class="keyword">nullable</span> SDWebImageDownloaderCompletedBlock)completedBlock &#123;</span><br><span class="line">...</span><br><span class="line">    </span><br><span class="line">    SD_LOCK(_operationsLock);</span><br><span class="line">    <span class="keyword">id</span> downloadOperationCancelToken;</span><br><span class="line">    <span class="built_in">NSOperation</span>&lt;SDWebImageDownloaderOperation&gt; *operation = [<span class="keyword">self</span>.URLOperations objectForKey:url];</span><br><span class="line">    <span class="comment">// There is a case that the operation may be marked as finished or cancelled, but not been removed from `self.URLOperations`.</span></span><br><span class="line">    <span class="keyword">if</span> (!operation || operation.isFinished || operation.isCancelled) &#123;</span><br><span class="line">        operation = [<span class="keyword">self</span> createDownloaderOperationWithUrl:url options:options context:context];</span><br><span class="line">...</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">...</span><br><span class="line">    &#125;</span><br><span class="line">    SD_UNLOCK(_operationsLock);</span><br><span class="line">    </span><br><span class="line">    SDWebImageDownloadToken *token = [[SDWebImageDownloadToken alloc] initWithDownloadOperation:operation];</span><br><span class="line">    token.url = url;</span><br><span class="line">    token.request = operation.request;</span><br><span class="line">    token.downloadOperationCancelToken = downloadOperationCancelToken;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> token;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»§ç»­å¾€ä¸‹çœ‹ â†“</p><p><code>operation = [self createDownloaderOperationWithUrl:url options:options context:context];</code> </p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">NSOperation</span>&lt;SDWebImageDownloaderOperation&gt; *)createDownloaderOperationWithUrl:(<span class="keyword">nonnull</span> <span class="built_in">NSURL</span> *)url</span><br><span class="line">                                                                                  options:(SDWebImageDownloaderOptions)options</span><br><span class="line">                                                                                  context:(<span class="keyword">nullable</span> SDWebImageContext *)context &#123;</span><br><span class="line">    <span class="built_in">NSTimeInterval</span> timeoutInterval = <span class="keyword">self</span>.config.downloadTimeout;</span><br><span class="line">    <span class="keyword">if</span> (timeoutInterval == <span class="number">0.0</span>) &#123;</span><br><span class="line">        timeoutInterval = <span class="number">15.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// In order to prevent from potential duplicate caching (NSURLCache + SDImageCache) we disable the cache for image requests if told otherwise</span></span><br><span class="line">    <span class="built_in">NSURLRequestCachePolicy</span> cachePolicy = options &amp; SDWebImageDownloaderUseNSURLCache ? <span class="built_in">NSURLRequestUseProtocolCachePolicy</span> : <span class="built_in">NSURLRequestReloadIgnoringLocalCacheData</span>;</span><br><span class="line">    <span class="built_in">NSMutableURLRequest</span> *mutableRequest = [[<span class="built_in">NSMutableURLRequest</span> alloc] initWithURL:url cachePolicy:cachePolicy timeoutInterval:timeoutInterval];</span><br><span class="line">    mutableRequest.HTTPShouldHandleCookies = SD_OPTIONS_CONTAINS(options, SDWebImageDownloaderHandleCookies);</span><br><span class="line">    mutableRequest.HTTPShouldUsePipelining = <span class="literal">YES</span>;</span><br><span class="line">    SD_LOCK(_HTTPHeadersLock);</span><br><span class="line">    mutableRequest.allHTTPHeaderFields = <span class="keyword">self</span>.HTTPHeaders;</span><br><span class="line">    SD_UNLOCK(_HTTPHeadersLock);</span><br><span class="line">    </span><br><span class="line">...                                                                                    </span><br><span class="line">                                                                                    </span><br><span class="line">    <span class="keyword">return</span> operation;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€¦</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™å¥ SDWebImageDownloaderHandleCookies è¿˜ç¡®å®æ˜¯åŠ äº†ã€‚</span></span><br><span class="line">mutableRequest.HTTPShouldHandleCookies = SD_OPTIONS_CONTAINS(options, SDWebImageDownloaderHandleCookies);</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;ä½†æ˜¯â€¦æ³¨æ„è¢«å°ğŸ”åŒ…å›´çš„è¿™å¥ä»£ç ï¼Œæˆ‘ä»¬çŸ¥é“ cookie æ˜¯ HTTP åè®®å¤´éƒ¨ä¿¡æ¯ä¸­çš„ä¸€ä¸ªå­—æ®µï¼Œåœ¨è¿™é‡Œä½¿ç”¨ <code>self.HTTPHeaders</code> è¦†ç›–äº† <code>allHTTPHeaderFields</code>ï¼Œä¼šå¯¼è‡´æ‰€æœ‰çš„å¤´éƒ¨ä¿¡æ¯éƒ½æ˜¯ç©ºçš„ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å•ç‹¬ç»™  <code>self.HTTPHeaders</code> æ·»åŠ å†…å®¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SD_LOCK(_HTTPHeadersLock);</span><br><span class="line">mutableRequest.allHTTPHeaderFields = self.HTTPHeaders;</span><br><span class="line">SD_UNLOCK(_HTTPHeadersLock);</span><br></pre></td></tr></table></figure><p>åˆ†æè¿‡ç¨‹ Endâ€¦</p><h2 id="ç»“æœï¼š"><a href="#ç»“æœï¼š" class="headerlink" title="ç»“æœï¼š"></a>ç»“æœï¼š</h2><p>æ‰¾ä¸€ä¸ªåˆé€‚çš„ä½ç½®ç»™ <code>SDWebImageDownloader</code> æ·»åŠ å¿…è¦çš„å¤´éƒ¨ä¿¡æ¯å°±å¯ä»¥äº†ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç»™SDè®¾ç½®ä¸€ä¸ªæ–°çš„cookie</span></span><br><span class="line"><span class="built_in">NSString</span> *sdCookie = <span class="string">@&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">NSHTTPCookie</span> *cookie <span class="keyword">in</span> [<span class="built_in">NSHTTPCookieStorage</span> sharedHTTPCookieStorage].cookies) &#123;</span><br><span class="line">    sdCookie = [sdCookie stringByAppendingFormat:<span class="string">@&quot;%@=%@;&quot;</span>, cookie.name, cookie.value];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> ([sdCookie hasSuffix:<span class="string">@&quot;;&quot;</span>]) &#123;</span><br><span class="line">    sdCookie = [sdCookie substringToIndex:sdCookie.length - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">SDWebImageDownloader *downloader = [SDWebImageManager sharedManager].imageLoader;</span><br><span class="line">[downloader setValue:sdCookie forHTTPHeaderField:<span class="string">@&quot;Cookie&quot;</span>];</span><br></pre></td></tr></table></figure><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies">[HTTP Cookie æ–‡æ¡£å‚è€ƒ]</a>å¯ä»¥éšä¾¿æ¡ä¸€ä¸ªç½‘ç»œè¯·æ±‚çš„ header çœ‹çœ‹å†…å®¹â€¦</p><ol><li>æœåŠ¡ç«¯ä¸‹å‘ cookie æ˜¯é€šè¿‡å“åº”æ ‡å¤´ä¸­ <code>Set-Cookie</code> å­—æ®µï¼Œå¤šä¸ª cookie å°±åŠ å¤šä¸ª <code>Set-Cookie</code>ï¼Œæ¨¡æ‹Ÿä¸€ä¸‹ï¼š</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ğŸ¤“  ~  <span class="built_in">curl</span> <span class="string">&#x27;https://tommygirl.cn/httpbin/cookies/set?yummy_cookie=choco&amp;tasty_cookie=strawberry&#x27;</span> <span class="literal">-i</span></span><br><span class="line">HTTP/<span class="number">1.1</span> <span class="number">302</span> FOUND</span><br><span class="line">Server: nginx</span><br><span class="line">Date: Thu, <span class="number">08</span> Dec <span class="number">2022</span> <span class="number">08</span>:<span class="number">52</span>:<span class="number">34</span> GMT</span><br><span class="line">Content<span class="literal">-Type</span>: text/html; charset=utf<span class="literal">-8</span></span><br><span class="line">Content<span class="literal">-Length</span>: <span class="number">223</span></span><br><span class="line">Connection: keep<span class="literal">-alive</span></span><br><span class="line">Location: /cookies</span><br><span class="line"><span class="built_in">Set-Cookie</span>: yummy_cookie=choco; Path=/</span><br><span class="line"><span class="built_in">Set-Cookie</span>: tasty_cookie=strawberry; Path=/</span><br><span class="line">Access<span class="literal">-Control</span><span class="literal">-Allow</span><span class="literal">-Origin</span>: *</span><br><span class="line">Access<span class="literal">-Control</span><span class="literal">-Allow</span><span class="literal">-Credentials</span>: true</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">&quot;-//W3C//DTD HTML 3.2 Final//EN&quot;</span>&gt;</span><br><span class="line">&lt;title&gt;Redirecting...&lt;/title&gt;</span><br><span class="line">&lt;h1&gt;Redirecting...&lt;/h1&gt;</span><br><span class="line">&lt;p&gt;You should be redirected automatically to target URL: &lt;a href=<span class="string">&quot;/cookies&quot;</span>&gt;/cookies&lt;/a&gt;.  <span class="keyword">If</span> not click the link.%</span><br></pre></td></tr></table></figure><ol start="2"><li>å®¢æˆ·ç«¯è®¿é—®æœåŠ¡å™¨æ—¶ï¼Œä¼šæ ¹æ® cookie çš„è·¯å¾„å’Œæœ‰æ•ˆæœŸç­‰å±æ€§ï¼Œé€‰æ‹©æºå¸¦å“ªäº› cookieï¼Œå¯¹åº”è¯·æ±‚æ ‡å¤´ä¸­ <code>Cookie</code> å­—æ®µï¼Œå¤šä¸ª cookie ä½¿ç”¨ <code>;</code> åˆ†éš”ï¼Œæ¨¡æ‹Ÿä¸€ä¸‹ï¼š</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">ğŸ¤“  ~  <span class="built_in">curl</span> <span class="string">&#x27;https://tommygirl.cn/httpbin/anything&#x27;</span> <span class="literal">-i</span></span><br><span class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</span><br><span class="line">Server: nginx/<span class="number">1.20</span>.<span class="number">1</span></span><br><span class="line">Date: Thu, <span class="number">08</span> Dec <span class="number">2022</span> <span class="number">09</span>:<span class="number">01</span>:<span class="number">06</span> GMT</span><br><span class="line">Content<span class="literal">-Type</span>: application/json</span><br><span class="line">Content<span class="literal">-Length</span>: <span class="number">390</span></span><br><span class="line">Connection: keep<span class="literal">-alive</span></span><br><span class="line">Access<span class="literal">-Control</span><span class="literal">-Allow</span><span class="literal">-Credentials</span>: true</span><br><span class="line">Access<span class="literal">-Control</span><span class="literal">-Allow</span><span class="literal">-Origin</span>: *</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;args&quot;</span>: &#123;&#125;,</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="string">&quot;form&quot;</span>: &#123;&#125;,</span><br><span class="line">  <span class="string">&quot;headers&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;Accept&quot;</span>: <span class="string">&quot;*/*&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Connection&quot;</span>: <span class="string">&quot;close&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Host&quot;</span>: <span class="string">&quot;localhost:8000&quot;</span>,</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;curl/7.79.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Cookie&quot;</span>: <span class="string">&quot;yummy_cookie=choco; tasty_cookie=strawberry&quot;</span>,</span><br><span class="line">    <span class="string">&quot;X-Forwarded-For&quot;</span>: <span class="string">&quot;*.*.*.*&quot;</span>,</span><br><span class="line">    <span class="string">&quot;X-Real-Ip&quot;</span>: <span class="string">&quot;*.*.*.*&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;json&quot;</span>: &#123;&#125;,</span><br><span class="line">  <span class="string">&quot;method&quot;</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">  <span class="string">&quot;url&quot;</span>: <span class="string">&quot;/anything&quot;</span>,</span><br><span class="line">  <span class="string">&quot;server_endpoints&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;172.21.0.13:8000&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;client&quot;</span>: <span class="string">&quot;127.0.0.1:34076&quot;</span></span><br><span class="line">&#125;%</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;è‡³äº <code>Cookie</code> æœ«å°¾çš„ <code>;</code> å¯åˆ å¯ä¸åˆ ï¼ŒåŠŸèƒ½ä¸Šæš‚æ—¶æ²¡å‘ç°æœ‰ä»€ä¹ˆå½±å“ï¼Œä½†æ—¢ç„¶æ ¼å¼éƒ½æ˜¯ HTTP æ ‡å‡†è§„å®šçš„ï¼Œé‚£è¿˜æ˜¯åˆ ä¸€ä¸‹å§ã€‚</p><hr><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/flag.jpeg"></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOS å¼€å‘ä¸­å¸¸ç”¨çš„å‹å·å’Œå°ºå¯¸</title>
      <link href="/2022/09/15/iPhone_dev_size/"/>
      <url>/2022/09/15/iPhone_dev_size/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ç»å¸¸å¿˜äº†ä¸€äº›é‡è¦å°ºå¯¸ï¼Œåšä¸ªå¤‡å¿˜ï¼š</p><h2 id="ä¸€ã€å±å¹•å°ºå¯¸-å¯åŠ¨å›¾ä½œå›¾å¤§å°"><a href="#ä¸€ã€å±å¹•å°ºå¯¸-å¯åŠ¨å›¾ä½œå›¾å¤§å°" class="headerlink" title="ä¸€ã€å±å¹•å°ºå¯¸/å¯åŠ¨å›¾ä½œå›¾å¤§å°"></a>ä¸€ã€å±å¹•å°ºå¯¸/å¯åŠ¨å›¾ä½œå›¾å¤§å°</h2><table><thead><tr><th align="left">å‹å·</th><th align="center">å±å¹•å°ºå¯¸(inch)</th><th align="center">å±å¹•å¯†åº¦(ppi)</th><th align="center">å±å¹•å®½é«˜(pt)</th><th align="center">å±å¹•åˆ†è¾¨ç‡(px)</th><th align="center">å€å›¾</th></tr></thead><tbody><tr><td align="left">iPhone 4/4S</td><td align="center">3.5</td><td align="center">326</td><td align="center">320 * 480</td><td align="center">640 * 960</td><td align="center">@2x</td></tr><tr><td align="left">iPhone 5/5C/5S/SE</td><td align="center">4.0</td><td align="center">326</td><td align="center">320 * 568</td><td align="center">640 * 1136</td><td align="center">@2x</td></tr><tr><td align="left">iPhone 6/6s/7/8/SE 2</td><td align="center">4.7</td><td align="center">326</td><td align="center">375 * 667</td><td align="center">750 * 1334</td><td align="center">@2x</td></tr><tr><td align="left">iPhone 6/6S/7/8 Plus</td><td align="center">5.5</td><td align="center">401</td><td align="center">414 * 736</td><td align="center">1242 * 2208</td><td align="center">@3x</td></tr><tr><td align="left">iPhone X / XS / 11 Pro</td><td align="center">5.8</td><td align="center">458</td><td align="center">375 * 812</td><td align="center">1125 * 2436</td><td align="center">@3x</td></tr><tr><td align="left">iPhone Xr / 11</td><td align="center">6.1</td><td align="center">326</td><td align="center">414 * 896</td><td align="center">828 * 1792</td><td align="center">@2x</td></tr><tr><td align="left">iPhone XS Max / 11 Pro Max</td><td align="center">6.5</td><td align="center">458</td><td align="center">414 * 896</td><td align="center">1242 * 2688</td><td align="center">@3x</td></tr><tr><td align="left">iPhone 12 mini</td><td align="center">5.4</td><td align="center">476</td><td align="center">375 * 812</td><td align="center">1125 * 2436</td><td align="center">@3x</td></tr><tr><td align="left">iPhone 12 / 12 Pro</td><td align="center">6.1</td><td align="center">460</td><td align="center">390 * 844</td><td align="center">1170 * 2532</td><td align="center">@3x</td></tr><tr><td align="left">iPhone 12 Pro Max</td><td align="center">6.7</td><td align="center">458</td><td align="center">428 * 926</td><td align="center">1284 * 2778</td><td align="center">@3x</td></tr><tr><td align="left">iPhone 13 mini</td><td align="center">5.4</td><td align="center">476</td><td align="center">375 * 812</td><td align="center">1125 * 2436</td><td align="center">@3x</td></tr><tr><td align="left">iPhone 13 / 13 Pro</td><td align="center">6.1</td><td align="center">460</td><td align="center">390 * 844</td><td align="center">1170 * 2532</td><td align="center">@3x</td></tr><tr><td align="left">iPhone 13 Pro Max</td><td align="center">6.7</td><td align="center">458</td><td align="center">428 * 926</td><td align="center">1284 * 2778</td><td align="center">@3x</td></tr><tr><td align="left">iPhone 14</td><td align="center">6.1</td><td align="center">460</td><td align="center">375 * 812</td><td align="center">1125 * 2436</td><td align="center">@3x</td></tr><tr><td align="left">iPhone 14 Plus</td><td align="center">6.7</td><td align="center">458</td><td align="center">428 * 926</td><td align="center">1284 * 2778</td><td align="center">@3x</td></tr><tr><td align="left">iPhone 14 Pro</td><td align="center">6.1</td><td align="center">460</td><td align="center">393 * 852</td><td align="center">1179 * 2556</td><td align="center">@3x</td></tr><tr><td align="left">iPhone 14 Pro Max</td><td align="center">6.7</td><td align="center">460</td><td align="center">430 * 932</td><td align="center">1290 * 2796</td><td align="center">@3x</td></tr></tbody></table><span id="more"></span><h2 id="äºŒã€APP-æ¡Œé¢logoå›¾ç‰‡å°ºå¯¸"><a href="#äºŒã€APP-æ¡Œé¢logoå›¾ç‰‡å°ºå¯¸" class="headerlink" title="äºŒã€APP æ¡Œé¢logoå›¾ç‰‡å°ºå¯¸"></a>äºŒã€APP æ¡Œé¢logoå›¾ç‰‡å°ºå¯¸</h2><table><thead><tr><th align="center">æ ‡æ³¨</th><th align="center">å°ºå¯¸(px)</th></tr></thead><tbody><tr><td align="center">iPhone Notification 20pt @2x</td><td align="center">40 * 40</td></tr><tr><td align="center">iPhone Notification 20pt @3x</td><td align="center">60 * 60</td></tr><tr><td align="center">iPhone Settings 29pt @2x</td><td align="center">58 * 58</td></tr><tr><td align="center">iPhone Settings 29pt @3x</td><td align="center">87 * 87</td></tr><tr><td align="center">iPhone Spotlight 40pt @2x</td><td align="center">80 * 80</td></tr><tr><td align="center">iPhone Spotlight 40pt @3x</td><td align="center">120 * 120</td></tr><tr><td align="center">iPhone App 60pt @2x</td><td align="center">120 * 120</td></tr><tr><td align="center">iPhone App 60pt @3x</td><td align="center">180 * 180</td></tr><tr><td align="center">App Store 1024pt @1x</td><td align="center">1024 * 1024</td></tr></tbody></table><p>Xcode 14 ä¸æ˜¯è¯´åªéœ€è¦ä¸€å¼  1024 å—ï¼Œä½†æˆ‘è¯•ç€ä¸å¤ªå¯¹ï¼Œæ˜¯æˆ‘æé”™äº†å—â€¦ğŸ˜¢</p><h2 id="ä¸‰ã€å®‰å…¨åŒº"><a href="#ä¸‰ã€å®‰å…¨åŒº" class="headerlink" title="ä¸‰ã€å®‰å…¨åŒº"></a>ä¸‰ã€å®‰å…¨åŒº</h2><table><thead><tr><th align="center">å‹å·</th><th align="center">Edge(Top, Left, Bottom, Right)</th></tr></thead><tbody><tr><td align="center">iPhone SE / 5S</td><td align="center">â€”â€”</td></tr><tr><td align="center">iPhone 6s / 7 / 8</td><td align="center">â€”â€”</td></tr><tr><td align="center">iPhone 6 / 7 / 8 Plus</td><td align="center">â€”â€”</td></tr><tr><td align="center">iPhone X / XS</td><td align="center">(44, 0, 34, 0)</td></tr><tr><td align="center">iPhone Xr / 11</td><td align="center">(48, 0, 34, 0)</td></tr><tr><td align="center">iPhone XS Max / 11 Pro Max</td><td align="center">(44, 0, 34, 0)</td></tr><tr><td align="center">iPhone 12 mini / 13mini</td><td align="center">(50, 0, 34, 0)</td></tr><tr><td align="center">iPhone 12 / 12 Pro / 13 / 13 Pro</td><td align="center">(47, 0, 34, 0)</td></tr><tr><td align="center">iPhone 12 Pro Max / 13 Pro Max</td><td align="center">(47, 0, 34, 0)</td></tr><tr><td align="center">iPhone 14</td><td align="center">(47, 0, 34, 0)</td></tr><tr><td align="center">iPhone 14 Plus</td><td align="center">(47, 0, 34, 0)</td></tr><tr><td align="center">iPhone 14 Pro</td><td align="center">(59, 0, 34, 0)</td></tr><tr><td align="center">iPhone 14 Pro Max</td><td align="center">(59, 0, 34, 0)</td></tr></tbody></table><h2 id="å››ã€Tabbar-ä½œå›¾å¤§å°"><a href="#å››ã€Tabbar-ä½œå›¾å¤§å°" class="headerlink" title="å››ã€Tabbar ä½œå›¾å¤§å°"></a>å››ã€Tabbar ä½œå›¾å¤§å°</h2><table><thead><tr><th align="center">å‹å·</th><th align="center">å°ºå¯¸(px)</th><th align="center">Tabbar é«˜åº¦(pt)</th></tr></thead><tbody><tr><td align="center">iPhone SE / 5S</td><td align="center">640 * 98</td><td align="center">49</td></tr><tr><td align="center">iPhone 6s / 7 / 8</td><td align="center">750 * 98</td><td align="center">49</td></tr><tr><td align="center">iPhone 6 / 7 / 8 Plus</td><td align="center">1242 * 147</td><td align="center">49</td></tr><tr><td align="center">iPhone X / XS</td><td align="center">1125 * 249</td><td align="center">83</td></tr><tr><td align="center">iPhone Xr / 11</td><td align="center">828 * 166</td><td align="center">83</td></tr><tr><td align="center">iPhone XS Max / 11 Pro Max</td><td align="center">1242 * 249</td><td align="center">83</td></tr><tr><td align="center">iPhone 12 mini / 13mini</td><td align="center">1080 * 249</td><td align="center">83</td></tr><tr><td align="center">iPhone 12 / 12 Pro / 13 / 13 Pro</td><td align="center">1170 * 249</td><td align="center">83</td></tr><tr><td align="center">iPhone 12 Pro Max / 13 Pro Max</td><td align="center">1284 * 249</td><td align="center">83</td></tr><tr><td align="center">iPhone 14</td><td align="center">1170 * 249</td><td align="center">83</td></tr><tr><td align="center">iPhone 14 Plus</td><td align="center">1284 * 249</td><td align="center">83</td></tr><tr><td align="center">iPhone 14 Pro</td><td align="center">1179 * 249</td><td align="center">83</td></tr><tr><td align="center">iPhone 14 Pro Max</td><td align="center">1290 * 249</td><td align="center">83</td></tr></tbody></table><h2 id="äº”ã€ç¡¬ä»¶ä¿¡æ¯-è®¾å¤‡åç§°"><a href="#äº”ã€ç¡¬ä»¶ä¿¡æ¯-è®¾å¤‡åç§°" class="headerlink" title="äº”ã€ç¡¬ä»¶ä¿¡æ¯/è®¾å¤‡åç§°"></a>äº”ã€ç¡¬ä»¶ä¿¡æ¯/è®¾å¤‡åç§°</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="built_in">NSString</span> *)getDeviceString &#123;</span><br><span class="line">    <span class="keyword">struct</span> utsname systemInfo;</span><br><span class="line">    uname(&amp;systemInfo);</span><br><span class="line">    <span class="built_in">NSString</span> *platform = [<span class="built_in">NSString</span> stringWithCString:systemInfo.machine encoding:<span class="built_in">NSASCIIStringEncoding</span>];</span><br><span class="line">    <span class="built_in">NSDictionary</span> *dic = @&#123;</span><br><span class="line">                          <span class="comment">//iPhone</span></span><br><span class="line">                          <span class="string">@&quot;iPhone1,1&quot;</span> : <span class="string">@&quot;iPhone 1G&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone1,2&quot;</span> : <span class="string">@&quot;iPhone 3G&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone2,1&quot;</span> : <span class="string">@&quot;iPhone 3GS&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone3,1&quot;</span> : <span class="string">@&quot;iPhone 4&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone3,2&quot;</span> : <span class="string">@&quot;iPhone 4&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone3,3&quot;</span> : <span class="string">@&quot;iPhone 4&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone4,1&quot;</span> : <span class="string">@&quot;iPhone 4S&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone5,1&quot;</span> : <span class="string">@&quot;iPhone 5&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone5,2&quot;</span> : <span class="string">@&quot;iPhone 5&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone5,3&quot;</span> : <span class="string">@&quot;iPhone 5C&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone5,4&quot;</span> : <span class="string">@&quot;iPhone 5C&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone6,1&quot;</span> : <span class="string">@&quot;iPhone 5S&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone6,2&quot;</span> : <span class="string">@&quot;iPhone 5S&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone7,1&quot;</span> : <span class="string">@&quot;iPhone 6 Plus&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone7,2&quot;</span> : <span class="string">@&quot;iPhone 6&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone8,1&quot;</span> : <span class="string">@&quot;iPhone 6S&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone8,2&quot;</span> : <span class="string">@&quot;iPhone 6s Plus&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone8,4&quot;</span> : <span class="string">@&quot;iPhone SE&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone9,1&quot;</span> : <span class="string">@&quot;iPhone 7&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone9,3&quot;</span> : <span class="string">@&quot;iPhone 7&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone9,2&quot;</span> : <span class="string">@&quot;iPhone 7 Plus&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone9,4&quot;</span> : <span class="string">@&quot;iPhone 7 Plus&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone10,1&quot;</span> : <span class="string">@&quot;iPhone 8&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone10,4&quot;</span> : <span class="string">@&quot;iPhone 8&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone10,2&quot;</span> : <span class="string">@&quot;iPhone 8 Plus&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone10,5&quot;</span> : <span class="string">@&quot;iPhone 8 Plus&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone10,3&quot;</span> : <span class="string">@&quot;iPhone X&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone10,6&quot;</span> : <span class="string">@&quot;iPhone X&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone11,8&quot;</span> : <span class="string">@&quot;iPhone XR&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone11,2&quot;</span> : <span class="string">@&quot;iPhone XS&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone11,6&quot;</span> : <span class="string">@&quot;iPhone XS Max&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone11,4&quot;</span> : <span class="string">@&quot;iPhone XS Max&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone12,1&quot;</span> : <span class="string">@&quot;iPhone 11&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone12,3&quot;</span> : <span class="string">@&quot;iPhone 11 Pro&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone12,5&quot;</span> : <span class="string">@&quot;iPhone 11 Pro Max&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone12,8&quot;</span> : <span class="string">@&quot;iPhone SE 2&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone13,1&quot;</span> : <span class="string">@&quot;iPhone 12 mini&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone13,2&quot;</span> : <span class="string">@&quot;iPhone 12&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone13,3&quot;</span> : <span class="string">@&quot;iPhone 12 Pro&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone13,4&quot;</span> : <span class="string">@&quot;iPhone 12 Pro Max&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone14,4&quot;</span> : <span class="string">@&quot;iPhone 13 mini&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone14,5&quot;</span> : <span class="string">@&quot;iPhone 13&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone14,2&quot;</span> : <span class="string">@&quot;iPhone 13 Pro&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone14,3&quot;</span> : <span class="string">@&quot;iPhone 13 Pro Max&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone14,6&quot;</span> : <span class="string">@&quot;iPhone SE 3&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone14,7&quot;</span> : <span class="string">@&quot;iPhone 14&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone14,8&quot;</span> : <span class="string">@&quot;iPhone 14 Plus&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone15,2&quot;</span> : <span class="string">@&quot;iPhone 14 Pro&quot;</span>,</span><br><span class="line">                          <span class="string">@&quot;iPhone15,3&quot;</span> : <span class="string">@&quot;iPhone 14 Pro Max&quot;</span></span><br><span class="line">                          &#125;;</span><br><span class="line">    <span class="keyword">if</span> ([dic valueForKey:platform]) &#123;</span><br><span class="line">        <span class="keyword">return</span> [dic valueForKey:platform];</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> platform;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://www.theiphonewiki.com/wiki/Models">FYI-å‚è€ƒåœ°å€ï¼šhttps://www.theiphonewiki.com/wiki/Models</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MacOS ä¸Šåˆ¶ä½œä¸€ä¸ªå°å°çš„å¯æ‰§è¡Œæ–‡ä»¶</title>
      <link href="/2022/07/28/MacOS%20%E4%B8%8A%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E5%B0%8F%E5%B0%8F%E7%9A%84%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6/"/>
      <url>/2022/07/28/MacOS%20%E4%B8%8A%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AA%E5%B0%8F%E5%B0%8F%E7%9A%84%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><p>&#8195;&#8195;è¯è¯´æˆ‘çš„ Linux å­¦ä¹ è®¡åˆ’æœ€è¿‘å¤„äºåŠç»ˆæ­¢çŠ¶æ€ï¼ŒæŠ½ç©ºå°±å­¦ä¸€ä¸¢ä¸¢ï¼Œä¹Ÿä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™å¯ä»¥å‡ºå¸ˆã€‚è¿™ç¯‡ç›®çš„æ˜¯è®°å½•ä¸€ä¸ªå°å°çš„è¿›åº¦ï¼šä»Šå¤©å†™äº†ä¸¤è¡Œ shell è„šæœ¬â€¦ğŸ¤</p><p>ä¸¾ä¾‹ï¼Œå‡è®¾éœ€è¦å®ç°çš„åŠŸèƒ½æ˜¯è·Ÿè‡ªå·±æ‰“ä¸€å£°æ‹›å‘¼ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">print <span class="string">&#x27;Hello YYLittleCat, Just do IT.&#x27;</span></span><br></pre></td></tr></table></figure><p>å†™å®Œä»¥åæŠŠè„šæœ¬ä¿å­˜ä¸º <code>hello.sh</code> çš„æ–‡ä»¶ï¼Œä¸‹ä¸€æ­¥æ˜¯ç»™è¿™ä¸ªæ–‡ä»¶æ·»åŠ å¯æ‰§è¡Œæƒé™ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> chmod +x hello.sh</span><br><span class="line"><span class="comment"># sudo çœ‹è´¦å·çš„æƒé™æ˜¯å¦éœ€è¦</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œè„šæœ¬çš„æ–¹å¼ï¼š</p><ul><li>./hello.sh</li><li>æŠŠ hello.sh æ‹–åˆ°æ§åˆ¶å°</li><li>sh hello.sh</li></ul><p>&#8195;&#8195;éƒ½å¯ä»¥ï¼Œå¦‚æœæç¤º <code>Permission denied.</code> çš„è¯ï¼Œå¯èƒ½éœ€è¦åŠ ä¸€ä¸‹æ»¡çº§æƒé™ 777 - <code>chmod 777 hello.sh</code>ã€‚</p><p>&#8195;&#8195;ä½†è¿™æ ·çš„è¯ï¼Œæ¯æ¬¡æ‰§è¡Œè¿™ä¸ªè„šæœ¬éƒ½éœ€è¦åœ¨æ§åˆ¶å°å»æ“ä½œï¼Œæˆ‘å¸Œæœ›å¯ä»¥åƒåˆ«çš„æ­£ç» Unix å¯æ‰§è¡Œæ–‡ä»¶ä¸€æ ·ï¼Œæ–‡ä»¶çš„å›¾æ ‡æ˜¯ exec å°é»‘æ¡†çš„å›¾æ ‡ã€åŒå‡»å°±å¯ä»¥æ‰§è¡Œé‚£ç§ ğŸ˜‚ ã€‚åŒäº‹è¯´æŠŠ .sh çš„æ–‡ä»¶åç¼€å»æ‰å°±å¯ä»¥äº†ï¼Œæˆ‘åœ¨ Finder ä¸­ç›´æ¥åˆ é™¤äº†åç¼€ï¼Œå‘ç°å¹¶æ²¡æœ‰èµ·ä½œç”¨ï¼Œå³å‡»æ‰“å¼€ã€Œæ˜¾ç¤ºç®€ä»‹ã€ï¼Œä¼šå‘ç°æ–‡ä»¶çš„åç¼€è¿˜åœ¨ï¼š</p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/hello-sh.png" style="zoom:67%;"><p>&#8195;&#8195;&#8195;æ‰€ä»¥â€œå…ƒå‡¶â€å°±æ˜¯è¿™é‡Œ Finder çš„å°çŒ«è…» -&gt; éšè—æ‰©å±•åï¼Œåœ¨ Finder é‡Œç›´æ¥åˆ é™¤æ‰©å±•åï¼Œå…¶å®æ˜¯å‹¾é€‰äº†è¿™ä¸ªé€‰é¡¹ï¼Œæ–‡ä»¶åå®é™…ä¸Šæ²¡å˜ï¼Œæƒ³çœŸæ­£å»æ‰æ‰©å±•åå¾—åœ¨ç®€ä»‹é‡Œæ”¹ã€‚å¹¶ä¸”æœ‰æ—¶å€™æ–‡ä»¶åä¸­æœ‰å¤šæ®µæ‰©å±•åï¼Œç³»ç»Ÿéšè—äº†ä¸€ä¸ªï¼Œå‰©ä¸‹çš„é‚£ä¸ªä¼šè¢«è¯¯ä»¥ä¸ºæ˜¯æ‰©å±•åï¼Œå…¶å®ä¸æ˜¯ï¼Œä¸€èˆ¬æ§åˆ¶å°é‡Œçœ‹åˆ°çš„æ‰æ˜¯çœŸå®åç§°ã€‚ç»Ÿä¸€æ”¹çš„è¯æ˜¯åœ¨ Finder çš„åå¥½è®¾ç½®ä¸­ï¼š</p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/finder-set.jpg" style="zoom:50%;"><p>å»æ‰çœŸæ­£çš„æ‰©å±•åä»¥åï¼Œå°±å¯ä»¥çœ‹åˆ°å°é»‘æ¡†äº†ï¼Œç¾æ»‹æ»‹~</p><hr>]]></content>
      
      
      
        <tags>
            
            <tag> Mac </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½ åœ¨ç‹—å«ä»€ä¹ˆ</title>
      <link href="/2022/07/26/%E4%BD%A0%E5%9C%A8%E7%8B%97%E5%8F%AB%E4%BB%80%E4%B9%88/"/>
      <url>/2022/07/26/%E4%BD%A0%E5%9C%A8%E7%8B%97%E5%8F%AB%E4%BB%80%E4%B9%88/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><h2 id="ä½ åœ¨ç‹—å«ä»€ä¹ˆ"><a href="#ä½ åœ¨ç‹—å«ä»€ä¹ˆ" class="headerlink" title="ä½ åœ¨ç‹—å«ä»€ä¹ˆ"></a>ä½ åœ¨ç‹—å«ä»€ä¹ˆ</h2><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/wof-wof.png"></p><p>&#8195;&#8195;å‰ä¸¤å¤©è¢«ä¸€åªåœŸæ‹¨é¼ â€œå’¬äº†â€ï¼Œæ¯«æ— æ­£ç»ç†ç”±ä¸€é€šç‹‚éª‚ï¼Œç”šè‡³æœ‰ç‚¹äººèº«æ”»å‡»äº†ã€‚ä»¥å‰åªè§‰å¾—ä¸Šå¸å¯¹ä¸‹å±çš„æ¶æ„æ”»å‡»ã€è‚†æ„è°©éª‚åªä¼šå‡ºç°åœ¨ä¸€äº›ä¼ä¸šæ–‡åŒ–ç´ è´¨åä½çš„å…¬å¸ï¼Œæ²¡æƒ³åˆ°åœ¨è¿™ä¸ªè¿˜ç®—äººæ€§åŒ–çš„åœ°æ–¹ä¹Ÿå‘ç”Ÿäº†ã€‚ä¸è¿‡å½“æ—¶æˆ‘å¥½åƒä¹Ÿå¹¶æ²¡æœ‰ç”Ÿæ°”ï¼Œç”šè‡³æœ‰ç‚¹æƒ³ç¬‘ï¼Œç°åœ¨æ‰ä½“ä¼šåˆ°è€äººä»¬è¯´çš„ - â€œæ²¡å¿…è¦â€æ˜¯ä»€ä¹ˆæ„æ€ã€‚</p><p>&#8195;&#8195;ä¹‹å‰èµ·è¿™ä¸ªæ ‡é¢˜çš„æ—¶å€™æˆ‘æ˜¯æœ‰ç‚¹æƒ…ç»ªåœ¨çš„ï¼šä½ åœ¨ç‹—å«ä»€ä¹ˆï¼Ÿæœ€è¿‘æˆ‘çœ‹æ¸¸æˆé‡Œé‚£äº›äººäº’å–·éƒ½åœ¨éª‚è¿™å¥è¯ï¼Œæ‹¿æ¥å€Ÿç”¨ä¸€ä¸‹ã€‚ä½†å‘¨æœ«æ‹¿å‡ºæˆ‘å°˜å°å·²ä¹…çš„æ‹³å¥—ï¼Œå‡æƒ³æ‹³é¶å°±æ˜¯åœŸæ‹¨é¼ ï¼Œå¯¹ç€æ‹³é¶å­æ‰“äº†åŠå°æ—¶ï¼Œé‚£ä¸€ä¸æƒ…ç»ªä¹Ÿå°±è¿‡å»äº†ã€‚æ‰€ä»¥åŸæœ¬æƒ³åœ¨è¿™é‡Œåæ§½ä»–ä¸€ä¸‹ï¼Œå¯æ˜¯æƒ³åˆ°ä¸èƒ½è„äº†ç½‘å‹çš„çœ¼ç›ï¼Œè‡ªå·±ä¹Ÿä¸æ˜¯ä¼ æ’­è´Ÿèƒ½é‡çš„äººï¼Œè¿˜æ˜¯ç®—äº†ï¼Œä¸è¿‡æ ‡é¢˜æˆ‘ä¹Ÿæ˜¯ä¸æ‰“ç®—æ”¹äº†ã€‚æ€ä¹ˆè¯´å‘¢ï¼Œå°±â€¦è¿˜æ˜¯è§‰å¾—å“­ç¬‘ä¸å¾—ï¼Œæç¬‘äº†ã€‚</p><p>&#8195;&#8195;åƒä¸‡åƒä¸‡ä¸è¦æ„¤æ€’ã€‚</p><h2 id="è®°å½•å‘¨å›´çš„äºº"><a href="#è®°å½•å‘¨å›´çš„äºº" class="headerlink" title="è®°å½•å‘¨å›´çš„äºº"></a>è®°å½•å‘¨å›´çš„äºº</h2><p>&#8195;&#8195;æˆ‘æŒºå–œæ¬¢è§‚å¯Ÿåˆ«äººï¼Œæ³¨æ„ è¿™é‡Œçš„è§‚å¯Ÿä¸æ˜¯ä¸Šä¸‹æ‰“é‡ã€çœ¼ç¥è½»è”‘é‚£ç§å“¦ï¼Œå°±æ˜¯å¹³å¹³æ— å¥‡çš„è§‚å¯Ÿã€‚å†™åœ¨è¿™é‡Œä¹Ÿåªæ˜¯å› ä¸ºè§‰å¾—ä»–ä»¬æœ‰æ„æ€ğŸ˜‚ï¼Œä¸çŸ¥é“çœ‹å®˜è¿‡å®¢ä»¬æ˜¯å¦ä¹Ÿé‡åˆ°äº†ã€‚</p><h3 id="â€œå†·ç¬‘â€å›"><a href="#â€œå†·ç¬‘â€å›" class="headerlink" title="â€œå†·ç¬‘â€å›"></a>â€œå†·ç¬‘â€å›</h3><p>æˆ‘ä»å«ç”Ÿé—´å›æ¥ï¼Œç«™åœ¨å·¥ä½æ—è¾¹æ“¦æ‰‹ï¼Œä»–æ‰“é‡æˆ‘ã€å†çœ‹çœ‹æˆ‘çš„æ‰‹ï¼Œç„¶åå†·ç¬‘ä¸€ä¸‹â€¦<br>æˆ‘ç©¿ä¸€ä¸ªå›¾æ–‡è¢œå­ï¼Œä»–ç›¯ç€æˆ‘çœ‹ã€æˆ‘éƒ½èµ°åˆ°ä»–èº«åäº†ï¼Œè¿˜è·Ÿç€çœ‹å‘¢ï¼Œç„¶åå†·ç¬‘ä¸€ä¸‹â€¦<br>æˆ‘å»ä»–å¯¹é¢å·¥ä½ä¸Šå’ŒåŒäº‹æ²Ÿé€šäº‹æƒ…ï¼Œä»–çœ‹ç€æˆ‘ä»¬èŠå¤©ï¼Œç„¶åå†·ç¬‘ä¸€ä¸‹â€¦<br>æˆ‘è·ŸåŒäº‹æˆ–è€…é¢†å¯¼åƒé¥­å›æ¥æ™šäº†ï¼Œä»–æ‰“é‡æˆ‘ä»¬ä¸€åœˆå„¿ï¼Œç„¶åå†·ç¬‘ä¸€ä¸‹â€¦</p><p>â€¦</p><p>è§‚å¯Ÿç»“æœï¼šå°±â€¦è«åå…¶å¦™çš„ã€å“­ç¬‘ä¸å¾—ã€å•¼ç¬‘çš†éã€‚å“¥ä»¬å„¿å¯èƒ½æ˜¯åœ¨é”»ç‚¼è‡ªå·±çš„é¢éƒ¨è‚Œç¾¤ï¼Œæ‰€ä»¥ä¹Ÿæœ‰å¯èƒ½æˆ‘æƒ³å¤šäº†â€¦ğŸ¤“</p><h3 id="â€œæ¯”è¾ƒâ€å›"><a href="#â€œæ¯”è¾ƒâ€å›" class="headerlink" title="â€œæ¯”è¾ƒâ€å›"></a>â€œæ¯”è¾ƒâ€å›</h3><p>&#8195;&#8195;å’±å¤©æœäººçš„ä¸€å¤§ç‰¹ç‚¹ï¼Œå°±æ˜¯çˆ±å’Œäººæ¯”è¾ƒï¼Œè¿™ä¸ªåœ¨è€å®¶é‚£è¾¹å·²ç»ä¹ ä»¥ä¸ºå¸¸äº†ã€‚æˆ‘è§‚å¯Ÿåˆ°çš„è¿™ä½é«˜äººï¼Œè®©æˆ‘ä½©æœçš„ç‚¹æ˜¯ä»–ä¸ä»…æ‹¿è‡ªå·±å’Œåˆ«äººæ¯”è¾ƒï¼Œåœ¨è‡ªå·±æ¯”ä¸è¿‡çš„æ—¶å€™ï¼Œä¼šæ¬å‡ºä»–çš„çˆ¶æ¯ã€ä»–çš„å§¥çˆ·ã€ä»–åª³å¦‡å„¿çš„çˆ¶æ¯å’Œå§¥çˆ·ã€æ— ä¸­ç”Ÿå‹çš„æŸä½â€œæœ‹å‹â€ç­‰ç­‰å»å’Œåˆ«äººæ¯”è¾ƒï¼Œæ€»ä¹‹ä¸€å®šè¦æ¯”èµ¢ã€å‹äººä¸€å¤´ï¼Œæ‰èƒ½ç»´æŠ¤ä»–çš„ä¼˜è¶Šæ„Ÿã€‚å°è±¡ä¸­ï¼Œæœ‰ä¸€æ¬¡ä»–æ‹¿ä»–åª³å¦‡å„¿çš„å§¥çˆ·çš„é’ˆçº¿æ´»æ°´å¹³å’Œæˆ‘æ¯”è¾ƒâ€¦è·Ÿæˆ‘æ¯”è¿™ä¸ªåšä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä¸€ä¸ªå°å­¦ç”Ÿåœ¨ä¹é’ˆçº¿æ´»å¥½ä¸å¥½å—ï¼Ÿ</p><p>è§‚å¯Ÿç»“æœï¼šæˆ‘ä¸ªäººä¸æ˜¯å¾ˆä¼šå»å’Œäººä½œæ¯”è¾ƒï¼Œå±äºç‰¹ç«‹ç‹¬è¡Œçš„ç±»å‹ï¼Œæ‰€ä»¥æ›´å¤šçš„æ˜¯ä¸ç†è§£å›½äººçš„è¿™ä¸ªä¹ æƒ¯ï¼Œæœ‰ä»€ä¹ˆå¥½æ¯”çš„â€¦è´¹è§£ğŸ¤·â€â™€ï¸ã€‚</p><h3 id="â€œå¼ºè¿«ç—‡â€å›"><a href="#â€œå¼ºè¿«ç—‡â€å›" class="headerlink" title="â€œå¼ºè¿«ç—‡â€å›"></a>â€œå¼ºè¿«ç—‡â€å›</h3><p>&#8195;&#8195;å«ç”Ÿé—´çš„æ´—æ‰‹æ± æ˜¯ç”·å¥³å…±ç”¨çš„ï¼Œä¸€å·¦ä¸€å³ä¸¤ä¸ªã€‚ç„¶é¹…ï¼Œä»–åªç”¨å·¦è¾¹ï¼Œå³ä½¿æœ‰äººæ­£åœ¨ä½¿ç”¨å·¦è¾¹çš„æ± å­ï¼Œä»–ä¹Ÿä¸ç”¨å³è¾¹ï¼Œè€Œæ˜¯ç«™åœ¨è¿œè¿œçš„ä¸€ä¸ªä½ç½®ç­‰å¾…â€¦æ´—å®Œæ‰‹ä»¥åï¼Œä¼šå›ºå®šçš„ç”©ä¸¤æ¬¡ï¼Œèº«ä½“ä» 0 ç‚¹ä½ç½®é¡ºæ—¶é’ˆè½¬ä¸€åœˆåˆ° 9 ç‚¹é’Ÿæ–¹å‘ï¼Œä»åŸæœ¬å°±åœ¨ 9 ç‚¹é’Ÿæ–¹å‘çš„èµ°å»Šå›å·¥ä½ï¼Œæˆ‘é‡åˆ°çš„æ¯ä¸€æ¬¡éƒ½æ˜¯ï¼Œevery timeâ€¦</p><p>è§‚å¯Ÿç»“æœï¼šè‡ªå¾‹è®©äººå¿«ä¹~ğŸ¤“</p><h3 id="â€œé“è²Œå²¸ç„¶â€å›"><a href="#â€œé“è²Œå²¸ç„¶â€å›" class="headerlink" title="â€œé“è²Œå²¸ç„¶â€å›"></a>â€œé“è²Œå²¸ç„¶â€å›</h3><p>åœ¨ç”¨è¿™ä¸ªè¯ä¹‹å‰ï¼Œæˆ‘ç‰¹æ„æŸ¥äº†ä¸€ä¸‹ç™¾ç§‘ï¼š</p><blockquote><p>é“è²Œå²¸ç„¶ï¼Œ<a href="https://baike.baidu.com/item/%E6%B1%89%E8%AF%AD%E6%88%90%E8%AF%AD/1768958">æ±‰è¯­æˆè¯­</a>ï¼Œæ‹¼éŸ³æ˜¯dÃ o mÃ o Ã n rÃ¡nï¼Œæ„æ€æ˜¯ç¥æ€åº„é‡ä¸¥è‚ƒï¼Œè£…ä½œä¸€æœ¬æ­£ç»çš„æ ·å­ï¼›ç°å¤šè®½åˆºå‡è£…æ­£ç»ã€è¡¨é‡Œä¸ä¸€ã€‚å‡ºè‡ªæ¸…Â·<a href="https://baike.baidu.com/item/%E8%92%B2%E6%9D%BE%E9%BE%84/28998">è’²æ¾é¾„</a>ã€Š<a href="https://baike.baidu.com/item/%E8%81%8A%E6%96%8B%E5%BF%97%E5%BC%82/75053">èŠæ–‹å¿—å¼‚</a>Â·æˆä»™ã€‹ã€‚</p></blockquote><p>çœ‹æ¥æˆ‘ç†è§£çš„æ²¡é”™ã€‚</p><p>&#8195;&#8195;ä¸è®°å¾—åœ¨å“ªå„¿çœ‹åˆ°ä¸€å¥è¯ï¼š<strong>ä¸­å›½äººæœ€é‡è¦çš„ç›®æ ‡ï¼Œå°±æ˜¯æˆä¸ºä¸€ä¸ªåˆæ ¼çš„ä¼ªå›å­ã€‚</strong>å‘œå‘¼~æ€»ç»“çš„è¿˜æŒºåˆ°ä½ã€‚ä¸ºäº†èå…¥ç¤¾ä¼šä¹Ÿç½¢ã€å¼•ç”³åˆ°æ‰€è°“çš„æƒ…å•†ä¹Ÿç½¢ï¼Œå¥½åƒæƒ³è¦åˆç¾¤ã€è¦åŠæˆäº‹å„¿å°±å¿…é¡»å¯¹è¿™å¥è¯æœ‰ä¸€å®šçš„è®¤çŸ¥ï¼Œä¸Šä¸‹äº”åƒå¹´å®šä¸‹çš„åŸºè°ƒï¼Œç¡®å®ä¹Ÿæ— (dou)å¯(shi)åš(gou)é(pi)ã€‚æœ‰æ„æ€çš„æ˜¯å¾ˆå¤šäººæ„è¯†åˆ°è¿™ä¸€ç‚¹çš„å¼Šç«¯ï¼Œè¿˜å¿ƒç”˜æƒ…æ„¿å¾€é‡Œè·³ã€‚å€’ä¸æ˜¯çœŸçš„å»è¯„åˆ¤è°è™šä¼ªï¼Œéƒ½æ˜¯ä¸ºäº†ç»´æŠ¤ç¤¾ä¼šå…³ç³»å˜›ï¼Œå¯æ˜¯â€œé“è²Œå²¸ç„¶å›â€ä¸€è¾¹è·Ÿæˆ‘å®£æ‰¬ç¤¾ä¼šé£æ°”ä¸å¥½ï¼Œä¸€è¾¹è·µè¡Œç€ä»–çš„ä¼ªå›å­è¡Œå¾„ï¼Œæ€»ç»™æˆ‘ä¸€ç§â€œåˆå½“åˆç«‹â€çš„é”™è§‰ã€‚</p><p>&#8195;&#8195;å¯èƒ½æœ‰äººè¦è¯´äº†â€œç†æƒ³å¾ˆä¸°æ»¡ã€ç°å®å¾ˆéª¨æ„Ÿâ€ï¼Œéš¾é“è¿˜ä¸è®©äººæœ‰ç†æƒ³äº†å—ï¼Ÿç†æƒ³å½“ç„¶è¦æœ‰ï¼Œæ€•åªæ€•æœ‰äº›äººä¼ªç€ä¼ªç€è‡ªå·±ä¹Ÿä¿¡äº†ï¼Œäº¦æˆ–è€…æ‹¿è¿™ç§â€œç¤¾ä¼šè§„åˆ™â€åšæŒ¡ç®­ç‰Œæ¥æ©ç›–è‡ªå·±äººæ€§çš„å¼±ç‚¹ï¼Œâ€œä½ çœ‹ï¼Œç¤¾ä¼šå°±æ˜¯è¿™æ ·ï¼Œæˆ‘ä¹Ÿæ²¡åŠæ³•ï¼Œä½ å¿ä¸€å¿å§~~â€ğŸ˜‚ï¼Œæ˜¯å·²ç»åˆ°äº†ç”Ÿæ­»å­˜äº¡ä¹‹ç§‹ä¸å¾—ä¸ä¼ªå—ï¼Ÿå…¶å®å¤§å¤šæ•°æƒ…å†µä¹Ÿæœªå¿…å§ã€‚è¦çœŸæ˜¯æ•¢åšæ•¢å½“å½“ï¼Œä¼ªåˆ°åº•ä¹Ÿè¡Œï¼Œåˆåšä¸åˆ°ï¼Œéª—äººéª—å·±ç½¢äº†ï¼Œä¸ç´¯å—ï¼Ÿ</p><p>è§‚å¯Ÿç»“æœï¼šæœ¬æ¬¡è§‚å¯Ÿæœ‰ç‚¹ç‹­éš˜äº†ã€‚ğŸ¤“</p><h3 id="â€œåè¯â€å›"><a href="#â€œåè¯â€å›" class="headerlink" title="â€œåè¯â€å›"></a>â€œåè¯â€å›</h3><p>&#8195;&#8195;æ¯å½“æˆ‘è¦å’Œä¸€ä¸ªæ–°å›¢é˜Ÿã€æ–°åŒäº‹åˆä½œçš„æ—¶å€™ï¼Œåè¯å›å°±å¼€å§‹å¿™ç¢Œäº†ï¼Œæ¯å½“æˆ‘å¤¸ä¸€ä¸ªäººçš„æ—¶å€™ï¼Œåè¯å›æ›´åŠ å¿™ç¢Œï¼Œä¼šè·Ÿæˆ‘ç»†æ•°å¯¹æ–¹çš„å„ç§ç¼ºç‚¹ã€‚å…ˆå‰æˆ‘ä»¥ä¸ºæ˜¯ä¸ºæˆ‘å¥½ï¼Œæé†’æˆ‘è¦å°å¿ƒæé˜²ï¼Œæ¯•ç«Ÿäººå¿ƒéš”è‚šçš®ã€‚ä¹…è€Œä¹…ä¹‹ï¼Œå¯¼è‡´çš„ä¸€ä¸ªç»“æœæ˜¯ï¼šæˆ‘åœ¨å’Œè¿™äº›äººåˆä½œä¹‹å‰å°±å·²ç»æˆ´äº†æœ‰è‰²çœ¼é•œğŸ˜‚ã€‚å¹¶ä¸æ˜¯è´¨ç–‘ä»–çš„ä¸ºäººå’Œåˆå¿ƒï¼Œäººæ€§éƒ½æ˜¯ç»ä¸èµ·è¯•æ¢çš„ï¼Œåªæ˜¯æˆ‘è¿˜å¤ªå¹´è½»ğŸ¤“ï¼Œè‡ªèº«çš„ç£åœºè¿˜ä¸å¤Ÿå¼ºå¤§ï¼Œå®¹æ˜“å—è´Ÿé¢ç£åœºçš„å¹²æ‰°ã€‚</p><p>è§‚å¯Ÿç»“æœï¼šå‚²æ…¢å’Œåè§æ˜¯å¾ˆå¯æ€•çš„ï¼Œå°½é‡æ‘’å¼ƒï¼ŒåŒæ—¶å°½é‡è¿œç¦»â€œåè¯â€å›ï¼Œä¸ªäººè§‰å¾—è¿™ä¸æ˜¯ä¸€ä¸ªè‰¯å¥½çš„åˆä½œä¼™ä¼´åº”è¯¥æœ‰çš„å“è´¨~</p><p>æ‰“å®Œï¼Œæ”¶å·¥ã€‚Wi wong wong ~ Wi wong wong~</p><hr>]]></content>
      
      
      
        <tags>
            
            <tag> æˆ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšä¸€ä¸ªé«˜æ•°å¤§ä½¬</title>
      <link href="/2022/06/14/%E5%81%9A%E4%B8%80%E4%B8%AA%E9%AB%98%E6%95%B0%E5%A4%A7%E4%BD%AC/"/>
      <url>/2022/06/14/%E5%81%9A%E4%B8%80%E4%B8%AA%E9%AB%98%E6%95%B0%E5%A4%A7%E4%BD%AC/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><p>&#8195;&#8195;å¿™å¿™å¨å¨å¥½å‡ å¤©ï¼Œæ”¾æ¾å‡ åˆ†é’Ÿã€‚æƒ³è·Ÿæœ‹å‹èŠèŠå¤©ï¼Œå¯ä»–ä»¬å¤ªå¿™äº†ï¼Œæ²¡äººå›å¤æˆ‘ğŸ˜‚ã€‚é‚£æˆ‘åªèƒ½å†™ä¸‹æ¥è·Ÿè‡ªå·±è¯´äº†ã€‚</p><p>&#8195;&#8195;æ—¢ç„¶æ˜¯æ— èŠäº†ï¼Œæ€ä¹ˆèƒ½å°‘çš„äº†çŸ¥ä¹å‘¢ï¼Œæ¯•ç«Ÿå…¨çƒçš„é«˜ç«¯äººå£«éƒ½åœ¨ä¸Šé¢å¹ç‰›çš®ï¼Œå“¦ä¸å¯¹ï¼Œæ˜¯ç•…æ‰€æ¬²è¨€ã€‚çƒ­æ¦œä¸Šæœ‰ä¸€ä¸ªé—®é¢˜è¿›å…¥äº†è§†çº¿ - æ€ä¹ˆæ ·èƒ½å…‹åˆ¶ä½å¯¹ä¸€ä¸ªäººçš„å–œæ¬¢ï¼Ÿè¯¶å‘¦ï¼Œæ ‡é¢˜æŒºæœ‰æ„æ€ï¼Œé‚£æˆ‘è¦å»çœ‹ä¸€çœ‹ã€‚ğŸ¤“</p><blockquote><p> æƒ³ä»–ä¸€æ¬¡å°±å†™ä¸€é“é«˜æ•°é¢˜ï¼Œä¹…è€Œä¹…ä¹‹ï¼Œè¦ä¹ˆå˜æˆé«˜æ•°å¤§ä½¬ï¼Œè¦ä¹ˆæƒ³èµ·ä»–å°±æ¶å¿ƒï¼ˆåŒæ¶ç–—æ³•ï¼‰ã€‚</p></blockquote><p>&#8195;&#8195;è¢«è¿™ä¸ªç­”æ¡ˆé€—ç¬‘äº†ã€‚å½“å­¦ç”ŸçœŸå¥½ï¼Œè¿˜å¯ä»¥ç”¨é«˜æ•°é¢˜æ¥æ²»ç–—å¤±æ‹ğŸ˜‚ï¼Œåƒæˆ‘è¿™ç§ä¸Šå²æ•°çš„äººå°±ä¸å¤ªè¡Œï¼Œä¹Ÿä¸æ˜¯è¯´ä¸çˆ±å­¦ä¹ ï¼Œæ˜¯çœŸçœ‹ä¸æ‡‚äº†ï¼Œå“ˆå“ˆå“ˆã€‚</p><p>&#8195;&#8195;æœ€è¿‘æ˜¯çœŸè§‰å¾—è‡ªå·±â€œè€äº†â€ï¼Œç›¸è²Œè‡ªç„¶æ²¡ä»€ä¹ˆå¤§çš„å˜åŒ–ï¼Œè„¸ä¸Šä¾æ—§èƒ½çœ‹å‡ºä¸¤ä¸ªå­— - beauty ğŸ¤“ã€‚é¦–å…ˆæ˜¯è¿‘ä¸¤å¹´çš„ç²¾åŠ›æ²¡æœ‰ä»¥å‰å……è¶³äº†ï¼Œå‰ä¸€æ®µæ—¶é—´è¿˜æŸ¥å‡ºäº†å„ç§è¿‡æ•åŸï¼Œæåˆ°è¿‡æ•ï¼Œæˆ‘åˆè¦å“­ç¬‘ä¸å¾—äº†ï¼Œå…»äº†å¤šå¹´çš„çŒ«ï¼Œå±…ç„¶å¯¹çŒ«è¿‡æ•äº†ï¼Œæ›¾ç»æˆ‘è¿˜ä¸€åº¦æ€€ç–‘è‡ªå·±æ˜¯å¾—äº†å“®å–˜æˆ–è€…èŠ±ç”Ÿè¿‡æ•æ‰ä¼šå„ç§ä¸èˆ’æœï¼Œç»“æœèŠ±ç”Ÿæ²¡äº‹å„¿ï¼ŒçŒ«ä¸èƒ½å…»äº†ï¼Œæ‹¿åˆ°åŒ»é™¢æŠ¥å‘Šå•çš„æ—¶å€™æˆ‘å“­äº†ï¼Œæ–­æ–­ç»­ç»­å“­äº†ä¸€å¤©â€¦ä¸è¿‡å¥½åœ¨æœ€è¿‘åšæŒè¿åŠ¨äº†ä¸¤ä¸‰ä¸ªæœˆï¼Œæ»¡è¡€å¤æ´»äº†ï¼›å¦ä¸€ä¸ªç‰¹å¾æ˜¯è®°å¿†åŠ›ä¸‹é™ï¼Œæ˜¨å¤©åŒäº‹æèµ·å¤šå¹´å‰æˆ‘æ•™ä¸‰æ–¹å‚å•†â€œåšäººâ€çš„äº‹å„¿ï¼Œæˆ‘ç«Ÿç„¶ä¸€ç‚¹å„¿éƒ½ä¸è®°å¾—äº†â€¦ä¹Ÿå¯èƒ½æ˜¯æˆ‘ç°åœ¨å­¦ä¹–äº†ï¼ˆæŒ¨éª‚æŒ¨å¤šäº†ï¼‰ï¼Œä¸å†è½»æ˜“æ•™åˆ«äººåšäººğŸ˜‚ï¼›å¦ä¸€ä¸ªæ·±åˆ‡å½±å“æˆ‘çš„åŸå› æ˜¯ï¼Œå‘¨å›´äººçš„èº«ä½“ä¼¼ä¹éƒ½åœ¨å‡ºçŠ¶å†µï¼Œå‰ä¸€é˜µå¬è¯´å®¶é‡Œçš„ä¸€ä½å§‘å§‘æˆªè‚¢äº†ã€æœ‹å‹æ£€æŸ¥å‡ºæ…¢æ€§è‚¾è¡°ç«­ã€æ¯äº²ç”²çŠ¶è…ºå‡ºé—®é¢˜ç­‰ç­‰ï¼Œå‰ä¸¤å¤©å¼Ÿå¼Ÿå‘Šè¯‰æˆ‘ä»–å¯èƒ½èƒ¸é‡Œé¢é•¿äº†ä¸ªå°ç˜¤ï¼Œä¸€å®šæ¦‚ç‡è¦åšæ‰‹æœ¯â€¦æç„¶é—´æ‰è§‰å¾—å¯æ€•çš„ä¸æ˜¯å’ŒåŒé¾„äººè„±èŠ‚ã€ç”Ÿæ´»ä¸åœ¨åŒä¸€ä¸ªèŠ‚å¥ï¼Œä¹Ÿä¸æ˜¯çˆ¶æ¯å‚¬ç”Ÿï¼Œæ˜¯æˆ‘è¢«å‘¨å›´äººâ€œå‚¬ç€è€äº†â€ï¼Œé¡¿æ„Ÿå‹åŠ›æš´å¢â€¦â€œåˆ«å“­ å‰é¢ä¸€å®šæœ‰è·¯â€~</p><p>&#8195;&#8195;æ°é¥­å»ï¼Œä¸å†™äº†â€¦</p><p>&#8195;&#8195;åšä»€ä¹ˆé«˜æ•°å¤§ä½¬ï¼Œèµ¶å¿«çˆ¬èµ·æ¥è¿åŠ¨è¿åŠ¨å§ã€‚æˆå¹´äººçš„ç›®æ ‡ - å¥½å¥½æ´»ç€ï¼Œå› ä¸ºæˆ‘çœŸçš„å¥½æƒ³ï¼Œçˆ±è¿™ä¸ªä¸–ç•Œã€‚</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/adult_fatigue.gif"></p><hr>]]></content>
      
      
      
        <tags>
            
            <tag> æˆ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UIModalPresentationFullScreen å¯¼è‡´æ¸å˜å›¾å±‚å¼‚å¸¸</title>
      <link href="/2022/05/12/UIModalPresentationFullScreen_CAGradientLayer/"/>
      <url>/2022/05/12/UIModalPresentationFullScreen_CAGradientLayer/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><p>iOS 13 ä¹‹å‰æ¨¡æ€å¼¹å‡ºä¸€ä¸ªé¡µé¢é»˜è®¤æ˜¯å…¨å±å±•ç¤ºï¼Œä» iOS 13 å¼€å§‹ï¼Œå¦‚æœä¸ç‰¹æ„æŒ‡å®šæ§åˆ¶å™¨çš„ <code>modalPresentationStyle</code> å±æ€§ï¼Œæ¨¡æ€å‡ºçš„é¡µé¢ä¼šæ˜¯å¡ç‰‡å¼ã€éå…¨å±ï¼Œå…¨å±çš„è¯éœ€è¦æŒ‡å®šï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vc.modalPresentationStyle = <span class="built_in">UIModalPresentationFullScreen</span>;</span><br></pre></td></tr></table></figure><p>è¿™ä¸€ç‚¹ç›¸ä¿¡å¾ˆå¤šå¹´å¹´åšé€‚é…çš„åŒè¡Œæ—©å°±çŸ¥é“äº†ï¼Œæ‰€ä»¥è¿™ä¸æ˜¯å°å’ªè¦è¯´çš„é‡ç‚¹ã€‚</p><p>å°å’ªè¦è¯´çš„æ˜¯ä»Šå¤©ä¿®æ”¹ä¸€ä¸ªæè€çš„é¡¹ç›®ï¼ŒL é¡µé¢æ˜¯æ¨¡æ€å¼¹å‡ºçš„ï¼Œæ‰€ä»¥ç”¨æ–°çš„ç¼–è¯‘ç¯å¢ƒæ‰“åŒ…çš„è¯æ˜¯ä¸€å®šè¦é€‚é…ä¸Šé¢è¿™ä¸€é¡¹çš„ã€‚ç„¶ååˆå‡ºç°æ–°çš„é—®é¢˜äº†â€¦å®¢æˆ·è¦æ±‚ L é¡µçš„èƒŒæ™¯æ˜¯æ¸å˜è‰²ï¼Œå½“æ—¶é‡‡ç”¨çš„æ˜¯ä¸‹é¢çš„æ–¹å¼ç»˜åˆ¶ä¸€å±‚æ¸å˜å›¾å±‚ï¼ŒåŠ åˆ° L é¡µçš„ View ä¸Šã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CAGradientLayer</span> *gl = [<span class="built_in">CAGradientLayer</span> layer];</span><br><span class="line">gl.frame = <span class="built_in">CGRectMake</span>(<span class="number">0</span>, <span class="number">0</span>, SCREEN_WIDTH, SCREEN_HEIGHT);</span><br><span class="line">gl.colors = @[(__bridge <span class="keyword">id</span>)RGBA(<span class="number">246</span>, <span class="number">135</span>, <span class="number">72</span>, <span class="number">.9</span>f).CGColor, (__bridge <span class="keyword">id</span>)RGBA(<span class="number">230</span>, <span class="number">69</span>, <span class="number">90</span>, <span class="number">.9</span>f).CGColor];</span><br><span class="line">gl.startPoint = <span class="built_in">CGPointMake</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">gl.endPoint = <span class="built_in">CGPointMake</span>(<span class="number">0</span>, <span class="number">1.0</span>);</span><br><span class="line">[<span class="keyword">self</span>.view.layer addSublayer:gl];</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ä¿®æ”¹ <code>modalPresentationStyle</code> ä»¥åï¼Œæ¸å˜å›¾å±‚è·‘åˆ°äº†æœ€ä¸Šé¢ï¼Œä¹Ÿå°±æ˜¯é®æŒ¡ä½äº† L.view çš„æ‰€æœ‰å­æ§ä»¶ï¼Œå­æ§ä»¶çš„äº‹ä»¶å“åº”ä¹Ÿè¢«é˜»æ–­äº†â€¦ä¸´æ—¶çš„è§£å†³åŠæ³•æ˜¯æ‰‹åŠ¨æŠŠå®ƒå¾€åæŒªäº†ä¸€å±‚ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CALayer</span> *temp = [<span class="keyword">self</span>.view.layer.sublayers lastObject];</span><br><span class="line">[<span class="keyword">self</span>.view.layer insertSublayer:gl below:temp];</span><br></pre></td></tr></table></figure><p>è§†è§‰æ•ˆæœå’Œå“åº”ä¸Šå€’æ˜¯æ¢å¤äº†ï¼Œä½†æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„å›¾å±‚é¡ºåºå˜åŒ–å‘¢â€¦å°å’ªæ™•äº†â€¦æœ‰é‡åˆ°åŒæ ·é—®é¢˜çš„å°ä¼™ä¼´å—ï¼Ÿ</p><hr>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ä»¶ç™½ T æ¤</title>
      <link href="/2022/05/12/%E4%B8%80%E4%BB%B6%E7%99%BDT%E6%81%A4/"/>
      <url>/2022/05/12/%E4%B8%80%E4%BB%B6%E7%99%BDT%E6%81%A4/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><blockquote><p>è¶Šè¿‡å±±ä¸˜</p><p>æ‰å‘ç°æ— äººç­‰å€™</p><p>â€¦</p><p>å–‹å–‹ä¸ä¼‘</p><p>æ—¶ä¸æˆ‘ä¸çš„å“€æ„</p><p>ä¸è‡ªé‡åŠ›åœ°è¿˜æ‰‹</p><p>ç›´è‡³æ­»æ–¹ä¼‘</p><p>â€¦</p></blockquote><p>å†™äº†ä¸‰å¤©çš„ BUGï¼Œå¬å¬éŸ³ä¹ä¼‘æ¯ 5 åˆ†é’Ÿ~</p><p>å¿µå¨ä¸¤å¥å°å’ªçš„ä¸€ä»¶ç™½ T æ¤ï¼šå®ƒæ˜¯ä¸€ä»¶ç‰¹åˆ«æ™®é€šçš„ç™½è‰²é•¿è¢–Tæ¤ï¼Œåœ†é¢†ï¼Œå‰é¢æ²¡æœ‰ä»»ä½•å›¾æ¡ˆï¼ŒåèƒŒæœ‰ä¸€ä¸ªè“è‰²çš„ä»€ä¹ˆå›¾æ¡ˆï¼Œå°å’ªè¿™ä¼šå„¿ç«Ÿç„¶å¿˜äº†ğŸ˜‚ï¼Œæ€»è€Œè¨€ä¹‹å§ï¼Œå°å’ªå¾ˆå–œæ¬¢ã€‚T æ¤æ˜¯åœ¨æŸå®ä¸Šä¹°çš„ï¼Œå› ä¸ºéš¾å¾—ç©¿ç€èˆ’æœï¼Œæ‰€ä»¥åˆåœ¨åŒä¸€å®¶åº—ä¹°äº†åŒæ ·çš„ä¸¤ä»¶ï¼Œä½†æ˜¯æç¬‘çš„æ˜¯æ˜æ˜æ˜¯ä¹°çš„ä¸€ä¸ªç æ•°ï¼Œåä¹°çš„ä¸¤ä»¶å±…ç„¶å¤§äº†ï¼Œè€Œä¸”æ•´ä½“ç‰ˆå‹æœ‰äº›å˜å½¢â€¦å“­ç¬‘ä¸å¾—â€¦ä¸çŸ¥é“åˆ«äººä¼šä¸ä¼šè¿™æ ·ï¼Œå°å’ªè¿™æ˜¯ç¬¬äºŒæ¬¡ä¹°åŒæ ·çš„è¡£æœï¼Œè¯´åˆ°è¿™é‡Œå°å’ªåˆæƒ³èµ·æ¥ä¸Šæ¬¡å‘ç”Ÿè¿™ç§æƒ…å†µï¼Œä¹Ÿæ˜¯å› ä¸ºé‡åˆ°äº†ä¸€ä»¶éš¾å¾—ç©¿ç€åˆèº«çš„ç‰›ä»”è£¤ï¼Œä¸è¿‡ä¸Šæ¬¡è§‰æ‚Ÿçš„å¤ªæ™šäº†ï¼Œç­‰å°å’ªæƒ³èµ·æ¥ä¹°ç¬¬äºŒä»¶çš„æ—¶å€™ï¼Œé‚£å®¶åº—å·²ç»å€’é—­äº†ï¼Œåœ¨å¦å¤–çš„åœ°æ–¹æœåŒæ¬¾ï¼Œç»“æœä¹°åˆ°çš„å®Œå…¨ä¸æ˜¯ä¸€ä¸ªâ€œåŒæ¬¾â€ã€‚</p><p>æ‰€ä»¥ï¼Œæœ‰å–œæ¬¢çš„ä¸œè¥¿å°±æ”¾å¿ƒå¤§èƒ†çš„ä¹°ï¼Œä¸è¦çŠ¹è±«ï¼ŒçŠ¹è±«å°±ä¼šè´¥åŒ—ã€‚</p><p>å’³å’³ï¼Œè·‘åäº†ï¼Œè¯´å›ç™½ T æ¤ã€‚ç”±äºç»å¸¸ç©¿ï¼Œç»å¸¸æ´—ï¼Œè¡£æœåé¢çš„è“è‰²å›¾æ¡ˆå·²ç»ç•¥å¾®æ˜¾å¾—è¤ªè‰²äº†ã€‚æœ‰æ¬¡å–é…’å–å¤šäº†ï¼Œè¡£æœä¸Šè¿˜ä¸å°å¿ƒæ²¾åˆ°äº†çº¢é…’æ¸ï¼Œæ´—ä¹Ÿæ´—ä¸æ‰ã€‚å½“ç„¶ï¼Œçº¢é…’æ¸å¹¶ä¸ä¼šå½±å“å°å’ªå¯¹å®ƒçš„å–œå¥½ï¼Œæ‰€ä»¥è¿™ä¸¤å¹´å»å“ªå„¿éƒ½ä¾æ—§å¸¦ç€å®ƒï¼Œå¸¦ç€å®ƒå»çˆ¬å±±ï¼Œå»å¤§ç†ï¼Œå»å¥½å¤šåœ°æ–¹â€¦</p><p>æ˜¨å¤©æ—©ä¸Šå‡ºé—¨å‰ï¼Œå°å’ªçº ç»“ç©¿ä»€ä¹ˆè¡£æœæ—¶ï¼Œåˆæƒ³åˆ°äº†ç™½ T æ¤ã€‚ä½†æ˜¯å¾ˆå¥‡æ€ªï¼Œæ˜¨å¤©å¾ˆè®¨åŒå®ƒçš„åœ†é¢†ï¼Œéå¸¸æƒ³è¦ä¸€ä¸ªå¤§ V é¢†ï¼Œæ¯•ç«Ÿå°å’ªçš„é”éª¨è¿˜æ˜¯éå¸¸æ€§æ„Ÿçš„ï¼Œè—èµ·æ¥å¯æƒœäº†ã€‚äºæ˜¯ä¹~æ‹¿èµ·å‰ªåˆ€æŠŠå®ƒå’”åš“äº†ï¼š</p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/white-T-shirt.png" style="zoom:67%;"><p>ä»åœ†é¢†å‰ªæˆäº†å° vï¼Œå¯æ˜¯ç©¿ä¸Šçš„æ•ˆæœå·®å¼ºäººæ„ï¼Œäºæ˜¯åˆå‰ªæˆäº†å¤§ Vâ€¦ç„¶åï¼Œè¿™ä»¶è¡£æœå°±å˜æˆäº†ä¸€ä»¶ä¸€å­—é¢†çš„è¡£æœã€‚ç°åœ¨å¥½äº†ï¼Œä¸ä»…å¯ä»¥éœ²é”éª¨ï¼Œè‚©è†€éƒ½å¯ä»¥æ¼å‡ºæ¥äº†ğŸ¤·â€â™€ï¸ã€‚å¥³äººï¼Œå‘µå‘µã€‚</p><p>äººçœŸæ˜¯å¥‡æ€ªï¼Œç°åœ¨ä¸ä»…ä¸å–œæ¬¢åœ†é¢†äº†ï¼Œè¿çº¢é…’æ¸éƒ½å¼€å§‹å«Œå¼ƒäº†ï¼Œéš¾é“æ˜¯å› ä¸ºå°å’ªä¸å†å–é…’çš„ç¼˜æ•…å—ï¼Ÿå¯¹ï¼Œâ€œæˆ’é…’â€ä¸€å¹´å¤šäº†ï¼Œå¯èƒ½æœ‰å…³ç³»å§ã€‚æ‰€ä»¥è¿™æ¬¡æ”¹é€ è¡£æœæ‚Ÿå‡ºä¸€ä¸ªäººç”Ÿå“²ç†ï¼šV é¢†ä¸é€‚åˆä¼‘é—²ã€åè‚¥çš„è¡£æœï¼Œé€‚åˆåä¿®èº«çš„è¡£æœï¼Œå“ï¼Œå‰ªä¹‹å‰å°å’ªæ€ä¹ˆæ²¡æƒ³åˆ°å‘¢ã€‚å¼€ç©ç¬‘å•¦ï¼Œæœ€è¿‘å°å’ªçœŸå¿ƒè§‰å¾—ï¼Œå‡¡æ˜¯ä¸å¼€å¿ƒçš„ã€ä¸åˆé€‚çš„ã€ä¸èˆ’æœçš„ã€ä¸äº¤å¿ƒçš„äººå’Œäº‹ï¼Œåº”è¯¥æœæ–­çš„å’”åš“æ‰ï¼Œå³ä½¿æ›¾ç»ç…§äº®è¿‡å½¼æ­¤â€¦é‚£æ˜¯ä¸æ˜¯æŠŠè¿™ä»½ç¾å¥½å°å­˜åœ¨è®°å¿†ä¸­å°±å¥½äº†ï¼Œæ—¶ä¸æ—¶æ‹¿å‡ºæ¥å›å¿†ä¸€ä¸‹ï¼Œè¶³å¤Ÿã€‚åƒä¸‡ä¸è¦å› ä¸ºâ€œæ²‰é»˜æˆæœ¬â€äº§ç”Ÿè¿‡å¤šçš„çº ç»“ï¼Œéš¾ä¸ºäº†åˆ«äººä¹Ÿå¼ºè¿«äº†è‡ªå·±ã€‚</p><p>å¦ä¸€ä¸ªæ„Ÿæ‚Ÿæ˜¯ï¼Œå°½é‡ä¸è¦è¯•å›¾æŠŠæœ‹å‹å˜æˆåŒäº‹ï¼ŒåŒæ ·ï¼Œä¹Ÿæ°¸è¿œä¸è¦å’Œè‡ªå·±çš„é¢†å¯¼åšæœ‹å‹ã€‚åˆ«äººæ˜¯å µä¸€å¤´å„¿å¼€ä¸€å¤´å„¿ï¼Œå°å’ªå‰ä¸€é˜µå„¿å€’å¥½ï¼Œå µä¸€å¤´å„¿çœ‹æ¸…äº†ä¸¤å¤´å„¿ï¼Œä¹ŸæŒºå¥½çš„ï¼Œæœ‰ç—…æ—©æ²»ï¼Œæ—©æ²»æ—©æ­»ã€‚</p><p>â€¦</p><p>è¶Šé•¿å¤§è¶Šå­¤å•ï¼Œä¸ä»…ä»…æ˜¯ä¸€å¥æ­Œè¯è€Œå·²ã€‚å› ä¸ºæˆ‘ä»¬æ€»æ˜¯åœ¨ä¸æ–­çš„å¤±å»ï¼Œå»å¹´ä¸¢äº†ä¸€ä¸ªæ²»å¥½å°å’ªâ€œç¡çœ ç„¦è™‘â€çš„äººï¼Œä»Šå¹´ä¸¢äº†ä¸€ä¸ªé™ªå°å’ªæ‰¯æ·¡ä¸ƒå…«å¹´çš„æœ‹å‹ã€‚å¤©å‘ï¼Œé‚£æ˜¯ä¸€ç›´åœ¨å¤±å»å—ï¼Ÿåº”è¯¥ä¸æ˜¯å§ï¼Œæœ‰åˆ†å‰çš„ï¼Œå°±æœ‰èšåˆçš„ï¼Œåªæ˜¯çœ‹æˆ‘ä»¬èƒ½ä¸èƒ½ä¿æŒä¸€ä¸ªå¹³è¡¡æˆ–è€…å°½é‡è®© èšåˆ &gt; åˆ†å‰ã€‚å¤±å»ä¸€ä¸ªäººä¹Ÿä¸æ˜¯ä¸€ç¬é—´çš„äº‹å„¿ï¼Œå¾€å¾€å¾ˆæ—©å°±æœ‰äº†é¢„å…†ï¼Œå¯èƒ½éƒ½æ˜¯å½“å±€è€…è¿·å§ï¼Œæˆ–è®¸å¤§å®¶çš„å¾ˆå¤šè§‚å¿µæ—©å°±æ…¢æ…¢ä¸ä¸€è‡´äº†ï¼Œåªæ˜¯ä¸€æ–¹æ²¡æœ‰å¦ä¸€æ–¹ç†æ™ºï¼Œä¾‹å¦‚å°å’ªã€‚å°å’ªè¿˜æ˜¯åæ„Ÿæ€§äº†ç‚¹ï¼Œå®¹æ˜“è¢«éª—ï¼Œæœ‰äººéª—äº†å°å’ªä¸€å¹´â€¦æ‰æ…¢æ…¢ååº”è¿‡æ¥è¢«éª—äº†ï¼Œé‚£å¯èƒ½ä½ è¦é—®äº†ï¼Œéª—äº†ä»€ä¹ˆğŸ¤“ï¼Ÿéª—äº†ä¿¡ä»»ã€æ„Ÿæƒ…ï¼Œæœ€ä¸å€¼é’±ä¹Ÿæœ€éš¾é‡åˆ°çš„ä¸œè¥¿ã€‚å¯¹äºä¼¤å®³æˆ‘ä»¬çš„äººâ€¦å¥½åƒä¹Ÿæ— èƒ½ä¸ºåŠ›å¯¹å§ï¼Œè°©éª‚ï¼Ÿè¯…å’’ï¼Ÿäººèº«æ”»å‡»ï¼Ÿä¸å¤ªè¡Œå‘¢ï¼Œå°å’ªç‰¹åˆ«æƒ³è¯…å’’æ¬ºéª—è¿‡å°å’ªçš„äººã€ä¼¤å®³è¿‡å°å’ªçš„äººèƒ½å¾—ä¸ªä»€ä¹ˆç™Œç—‡å•Šè€å¹´ç—´å‘†å•Šä»€ä¹ˆçš„ï¼Œå¯æ˜¯å°å’ªçš„å®¶æ•™ä¸å…è®¸ã€‚å°å’ªè¿˜æ˜¯é€‰æ‹©åšä¸€ä¸ªå–„è‰¯çš„äººï¼Œå…¶ä»–çš„äº¤ç»™å› æœå§ã€‚</p><p>å¼•ç”¨å°å’ªä¸ååˆ†ç¡®å®šå“ªä½è¯´çš„è¯ï¼ˆç½‘ä¸Šè¯´æ˜¯è‘£å¿ï¼‰ï¼šæ— è®ºæˆ‘ä»¬æœ€åç”Ÿç–æˆä»€ä¹ˆæ ·å­ï¼Œæ›¾ç»å¯¹ä½ çš„å¥½éƒ½æ˜¯çœŸçš„ï¼Œå°±ç®—ç»ˆæœ‰ä¸€æ•£ï¼Œä¹Ÿåˆ«è¾œè´Ÿç›¸é‡ï¼Œå¸Œæœ›ä½ ä¸åæ‚”è®¤è¯†æˆ‘ï¼Œä¹Ÿæ˜¯çœŸçš„å¿«ä¹è¿‡ï¼Œå¦‚æœèƒ½å›åˆ°ä»¥å‰ï¼Œæˆ‘ä¼šé€‰æ‹©ä¸è®¤è¯†ä½ ï¼Œä¸æ˜¯æˆ‘åæ‚”ï¼Œæ˜¯æˆ‘ä¸èƒ½é¢å¯¹ç°åœ¨çš„ç»“å±€â€¦â€¦</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œå°å’ªçš„ç™½ T æ¤ç®—æ˜¯åºŸäº†ï¼Œå“ˆå“ˆå“ˆâ€¦å»ä¹°ä¸€ä»¶çœŸæ­£é€‚åˆ V é¢†çš„è¡£æœï¼Œæ€§æ„Ÿä¸€ä¸‹~</p><hr>]]></content>
      
      
      
        <tags>
            
            <tag> æˆ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux å­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰- è¿›ç¨‹ç®¡ç†</title>
      <link href="/2022/04/28/Linux_Progress/"/>
      <url>/2022/04/28/Linux_Progress/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><p>æ— è®ºæ˜¯ç³»ç»Ÿç®¡ç†å‘˜è¿˜æ˜¯æ™®é€šç”¨æˆ·ï¼Œç›‘è§†ç³»ç»Ÿè¿›ç¨‹çš„è¿è¡Œæƒ…å†µï¼Œå¹¶é€‚æ—¶ç»ˆæ­¢ä¸€äº›å¤±æ§çš„è¿›ç¨‹æ˜¯æ¯å¤©çš„ä¾‹è¡Œäº‹åŠ¡â€¦å°±åƒäººç”Ÿä¸€æ ·ï¼Œæ€»æœ‰é‚£ä¹ˆå‡ ä¸ªå¤±æ§çš„ç¬é—´ï¼Œæ€ä¹ˆåŠå‘¢ï¼Œæ‰¼æ€æ‰å®ƒã€‚ğŸ¤“</p><h2 id="å¿«é€Ÿä¸Šæ‰‹ï¼šç»“æŸä¸€ä¸ªå¤±æ§çš„ç¨‹åº"><a href="#å¿«é€Ÿä¸Šæ‰‹ï¼šç»“æŸä¸€ä¸ªå¤±æ§çš„ç¨‹åº" class="headerlink" title="å¿«é€Ÿä¸Šæ‰‹ï¼šç»“æŸä¸€ä¸ªå¤±æ§çš„ç¨‹åº"></a>å¿«é€Ÿä¸Šæ‰‹ï¼šç»“æŸä¸€ä¸ªå¤±æ§çš„ç¨‹åº</h2><p>ä¼ è¯´ä¸­æœ‰ä¸€ä¸ªå¤è€è€Œæœ‰åçš„â€œæ¶ä½œå‰§â€ç¨‹åºï¼Œä¼šåœ¨ Shell ä¸­ä¸åœåœ°åˆ›å»ºç›®å½•å’Œæ–‡ä»¶ã€‚å¦‚æœä¸èµ¶å¿«ç»ˆæ­¢ï¼Œé‚£ä¹ˆå®ƒå°†åœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€æ£µå¾ˆæ·±çš„ç›®å½•æ ‘ï¼š</p><ol><li>åœ¨ä¸»ç›®å½•ä¸­ç”¨æ–‡æœ¬ç¼–è¾‘å™¨åˆ›å»ºä¸€ä¸ªåä¸º badpro çš„æ–‡æœ¬æ–‡ä»¶ï¼ŒåŒ…å«ä»¥ä¸‹å†…å®¹:</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">echo</span> <span class="string">&quot;I&#x27;m making files! !&quot;</span></span><br><span class="line"><span class="keyword">do</span> </span><br><span class="line">mkdir adir</span><br><span class="line"><span class="built_in">cd</span> adir</span><br><span class="line">touch afile</span><br><span class="line"></span><br><span class="line">sleep 2s</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€ä¸ª Shell è„šæœ¬, ä¼šä¸åœçš„æ–°å»ºç›®å½•å’Œæ–‡ä»¶ã€‚ä¸ºäº†è®©è¿™ä¸ªæ¶ä½œå‰§è¡¨ç°å¾—å°½å¯èƒ½â€œæ¸©å’Œâ€ï¼Œè¿™é‡Œè®©å®ƒåœ¨æ¯æ¬¡å»ºå®Œç›®å½•å’Œæ–‡ä»¶åä¼‘æ¯2ç§’é’Ÿã€‚</p><ol start="2"><li>å°†è¿™ä¸ªæ–‡ä»¶åŠ ä¸Šå¯æ‰§è¡Œæƒé™ï¼Œå¹¶ä»åå°æ‰§è¡Œã€‚</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> sudo chmod +x badpro</span><br><span class="line"><span class="variable">$</span> ./badpro &amp;</span><br></pre></td></tr></table></figure><p><strong>FYI</strong>ï¼šè¿è¡Œè¿™ä¸ªç¨‹åºå­˜åœ¨ä¸€äº›é£é™©ã€‚åƒä¸‡ä¸è¦æ¼äº† sleep 2s è¿™ä¸€è¡Œï¼Œå¦åˆ™åˆ›å»ºçš„ç›®å½•æ ‘çš„æ·±åº¦ä¼šå¾ˆå¿«è¶…å‡ºç³»ç»Ÿçš„å…è®¸èŒƒå›´ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½å¿…é¡»è¦ä½¿ç”¨ <code>rm -fr adir</code> æ¥åˆ é™¤è¿™äº›â€œåƒåœ¾â€ç›®å½•ã€‚ä¸ºä»€ä¹ˆè¦ä»åå°è¿è¡Œï¼ŸåŸå› åªæœ‰ä¸€ä¸ªï¼Œå³è¿«ä½¿è‡ªå·±ä½¿ç”¨ kill å‘½ä»¤æ€æ­»è¿™ä¸ªè¿›ç¨‹ã€‚</p><ol start="3"><li>ç°åœ¨ç¨‹åºå·²ç»è·‘èµ·æ¥äº†ï¼Œå¯ä»¥çœ‹åˆ°ç»ˆç«¯åœ¨ä¸åœåœ°è¾“å‡º Iâ€™m making files! ! ã€‚æ–°å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œä½¿ç”¨ <code>ps</code> å‘½ä»¤çœ‹ä¸€ä¸‹ badpro çš„è¿›ç¨‹ä¿¡æ¯ï¼Œä½¿ç”¨ç®¡é“é…åˆ <code>grep</code> å‘½ä»¤æŸ¥æ‰¾ PIDï¼Œè¿™é‡Œ PID å”¯ä¸€è¡¨ç¤ºä¸€ä¸ªè¿›ç¨‹ã€‚<code>ps</code> å‘½ä»¤çš„è¾“å‡ºä¸­ç¬¬äºŒä¸ªå­—æ®µè¡¨ç¤º PIDï¼Œæ ¹æ® <code>grep</code> çš„æœç´¢ç»“æœï¼Œå¯ä»¥åˆ¤æ–­å‡º 10221 å°±æ˜¯ badpro çš„ PIDã€‚</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">ps</span> aux | grep badpro</span><br><span class="line">tommy   <span class="number">10221</span>  <span class="number">0.0</span>  <span class="number">0.0</span> <span class="number">113288</span>  <span class="number">1408</span> pts/<span class="number">0</span>    S    <span class="number">10</span>:<span class="number">08</span>   <span class="number">0</span>:<span class="number">00</span> /bin/bash ./badpro</span><br><span class="line">tommy   <span class="number">10764</span>  <span class="number">0.0</span>  <span class="number">0.0</span> <span class="number">112828</span>   <span class="number">984</span> pts/<span class="number">1</span>    <span class="built_in">R</span>+   <span class="number">10</span>:<span class="number">10</span>   <span class="number">0</span>:<span class="number">00</span> grep -<span class="literal">-color</span>=auto badpro</span><br></pre></td></tr></table></figure><ol start="4"><li>ç°åœ¨ä½¿ç”¨ <code>kill</code> å‘½ä»¤â€æ€æ­»â€œæ¯”å°”ï¼Œå“¦ä¸ï¼Œæ˜¯â€æ€æ­»â€œè¿™ä¸ªè¿›ç¨‹ã€‚</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">kill</span> <span class="number">10221</span></span><br></pre></td></tr></table></figure><ol start="5"><li>å›åˆ°è¿è¡Œ badpro çš„ç»ˆç«¯ï¼Œå¯ä»¥çœ‹åˆ°ç¨‹åºå·²ç»ç»ˆæ­¢äº†ï¼Œè®°å¾—æŠŠ adir åˆ æ‰å°±å¥½äº†</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">rm</span> <span class="literal">-r</span> adir</span><br></pre></td></tr></table></figure><h2 id="ä»€ä¹ˆæ˜¯è¿›ç¨‹"><a href="#ä»€ä¹ˆæ˜¯è¿›ç¨‹" class="headerlink" title="ä»€ä¹ˆæ˜¯è¿›ç¨‹"></a>ä»€ä¹ˆæ˜¯è¿›ç¨‹</h2><blockquote><p>çœ‹ä¼¼ç®€å•çš„æ¦‚å¿µå¾€å¾€å¾ˆéš¾ç»™å‡ºå®šä¹‰ï¼Œä¸€ä¸ªæ¯”è¾ƒâ€œæ­£è§„â€çš„è¯´æ³•æ˜¯ï¼šè¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿçš„ä¸€ç§æŠ½è±¡æ¦‚å¿µï¼Œç”¨æ¥è¡¨ç¤ºæ­£åœ¨è¿è¡Œçš„ç¨‹åºã€‚å…¶å®ï¼Œè¯»è€…å¯ä»¥ç®€å•åœ°æŠŠè¿›ç¨‹ç†è§£ä¸ºæ­£åœ¨è¿è¡Œçš„ç¨‹åºã€‚Linux æ˜¯ä¸€ç§å¤šç”¨æˆ·ã€å¤šè¿›ç¨‹çš„æ“ä½œç³»ç»Ÿã€‚åœ¨ Linux çš„å†…æ ¸ä¸­ï¼Œç»´æŠ¤ç€ä¸€å¼ è¡¨ã€‚è¿™å¼ è¡¨è®°å½•äº†å½“å‰ç³»ç»Ÿä¸­è¿è¡Œçš„æ‰€æœ‰è¿›ç¨‹çš„å„ç§ä¿¡æ¯ã€‚Linux å†…æ ¸ä¼šè‡ªåŠ¨å®Œæˆå¯¹è¿›ç¨‹çš„æ§åˆ¶å’Œè°ƒåº¦ã€‚å½“ç„¶ï¼Œè¿™æ˜¯æ‰€æœ‰æ“ä½œç³»ç»Ÿéƒ½å¿…é¡»æ‹¥æœ‰çš„åŸºæœ¬åŠŸèƒ½ã€‚å†…æ ¸ä¸­ä¸€äº›é‡è¦çš„è¿›ç¨‹ä¿¡æ¯å¦‚ä¸‹:</p><ul><li>è¿›ç¨‹çš„å†…å­˜åœ°å€;<br>è¿›ç¨‹å½“å‰çš„çŠ¶æ€;<br>è¿›ç¨‹æ­£åœ¨ä½¿ç”¨çš„èµ„æº;<br>è¿›ç¨‹çš„ä¼˜å…ˆçº§(è°¦è®©åº¦);<br>è¿›ç¨‹çš„å±ä¸»ã€‚</li></ul><p>Linux æä¾›äº†è®©ç”¨æˆ·å¯ä»¥å¯¹è¿›ç¨‹è¿›è¡Œç›‘è§†å’Œæ§åˆ¶çš„å·¥å…·ã€‚åœ¨è¿™æ–¹é¢ï¼ŒLinux å¯¹ç³»ç»Ÿè¿›ç¨‹å’Œç”¨æˆ·è¿›ç¨‹ä¸€è§†åŒä»ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿç”¨ä¸€å¥—å·¥å…·æ§åˆ¶è¿™ä¸¤ç§è¿›ç¨‹ã€‚</p></blockquote><p>è¯»åˆ°è¿™é‡Œï¼Œå°å’ªçªç„¶æƒ³èµ·æ¥ä¸Šå¤§å­¦çš„æ—¶å€™å­¦ä¹ æ“ä½œç³»ç»Ÿï¼Œé‚£æ˜¯ä¸€æœ¬é»‘è‰²å°é¢çš„æ•™æï¼Œåå­—å°±æ˜¯ã€Šæ“ä½œç³»ç»Ÿã€‹ï¼Œæ•´æœ¬ä¹¦æ²¡æœ‰ä¸€ä¸ªå›¾ç‰‡ï¼Œå…¨â„¢æ˜¯æ–‡å­—ï¼Œç»™æˆ‘ä»¬ä¸Šè¯¾çš„å¥³è€å¸ˆæ˜¯è®¡ç®—æœºç³»çš„å‰¯ä¸»ä»»ï¼Œè¿™é—¨è¯¾çœŸçš„æ˜¯æ‰€è°“çš„â€è¯»ä¹¦â€œï¼Œå¥¹å…¨ç¨‹éƒ½æ˜¯åœ¨è¯»ï¼Œå¯æƒ³è€ŒçŸ¥è¿™é—¨è¯¾æ˜¯æ—·è¯¾ç‡æœ€é«˜çš„â€¦å“ˆå“ˆå“ˆâ€¦å¥½äº†ï¼Œä¸é—¹äº†~æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç®€å•çš„ç†è§£ä¸ºä¸€ä¸ªè¿›ç¨‹å°±æ˜¯ä¸€ä¸ªç¨‹åºã€‚</p><h2 id="è¿›ç¨‹çš„å±æ€§"><a href="#è¿›ç¨‹çš„å±æ€§" class="headerlink" title="è¿›ç¨‹çš„å±æ€§"></a>è¿›ç¨‹çš„å±æ€§</h2><h3 id="PID-è¿›ç¨‹çš„-ID-å·"><a href="#PID-è¿›ç¨‹çš„-ID-å·" class="headerlink" title="PID: è¿›ç¨‹çš„ ID å·"></a>PID: è¿›ç¨‹çš„ ID å·</h3><p>ç”¨æˆ·ç®¡ç†é‚£ä¸€ç¯‡æ›¾ç»å­¦åˆ°è¿‡ï¼Œç³»ç»Ÿä¸ºæ¯ä¸ªç”¨æˆ·éƒ½åˆ†é…äº†ç”¨äºæ ‡è¯†å…¶èº«ä»½çš„ ID å·(UID)ã€‚åŒæ ·åœ°ï¼Œè¿›ç¨‹ä¹Ÿæœ‰è¿™æ ·ä¸€ä¸ª ID å·ï¼Œè¢«ç§°ä½œ PIDã€‚ç”¨ ID ç¡®å®šè¿›ç¨‹çš„æ–¹æ³•æ˜¯éå¸¸æœ‰å¥½å¤„çš„ï¼Œå¯¹äºè®¡ç®—æœºè€Œè¨€ï¼Œè®¤è¯†æ•°å­—æ°¸è¿œæ¯”è®¤è¯†ä¸€ä¸²å­—ç¬¦æ–¹ä¾¿å¾—å¤šï¼ŒLinux æ²¡æœ‰å¿…è¦å»ç†è§£é‚£äº›å¯¹äººç±»éå¸¸â€œæœ‰æ„ä¹‰â€çš„è¿›ç¨‹åã€‚Linux ä¸ä»…è‡ªå·±ä½¿ç”¨ PID æ¥ç¡®å®šè¿›ç¨‹ï¼Œè¿˜è¦æ±‚ç”¨æˆ·åœ¨ç®¡ç†è¿›ç¨‹æ—¶ä¹Ÿæä¾›ç›¸åº”çš„ PID å·ã€‚å‡ ä¹æ‰€æœ‰çš„è¿›ç¨‹ç®¡ç†å·¥å…·éƒ½æ¥å— PID å·ï¼Œè€Œä¸æ˜¯è¿›ç¨‹åã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨â€œå¿«é€Ÿä¸Šæ‰‹â€ç¯èŠ‚ä¸­å¿…éœ€è¦ä½¿ç”¨ ps å‘½ä»¤è·å¾— PID å·çš„åŸå› ã€‚</p><h3 id="PPID-çˆ¶è¿›ç¨‹çš„-PID"><a href="#PPID-çˆ¶è¿›ç¨‹çš„-PID" class="headerlink" title="PPID: çˆ¶è¿›ç¨‹çš„ PID"></a>PPID: çˆ¶è¿›ç¨‹çš„ PID</h3><p>åœ¨ Linux ä¸­ï¼Œæ‰€æœ‰çš„è¿›ç¨‹éƒ½å¿…é¡»ç”±å¦ä¸€ä¸ªè¿›ç¨‹åˆ›å»ºä¸€é™¤äº†åœ¨ç³»ç»Ÿå¼•å¯¼æ—¶ï¼Œç”±å†…æ ¸è‡ªä¸»åˆ›å»ºå¹¶å®‰è£…çš„é‚£å‡ ä¸ªè¿›ç¨‹ã€‚å½“ä¸€ä¸ªè¿›ç¨‹è¢«åˆ›å»ºæ—¶ï¼Œåˆ›å»ºå®ƒçš„é‚£ä¸ªè¿›ç¨‹è¢«ç§°ä½œçˆ¶è¿›ç¨‹ï¼Œè€Œè¿™ä¸ªè¿›ç¨‹åˆ™ç›¸åº”åœ°è¢«ç§°ä½œå­è¿›ç¨‹ã€‚å­è¿›ç¨‹ä½¿ç”¨ PPID æŒ‡å‡ºè°æ˜¯å…¶â€œçˆ¶äº²â€ï¼Œå¾ˆå®¹æ˜“å¯ä»¥ç†è§£ï¼ŒPPID å°±ç­‰äºå…¶çˆ¶è¿›ç¨‹çš„ PIDã€‚</p><p>åœ¨åˆšæ‰çš„å™è¿°ä¸­ï¼Œå¤šæ¬¡ç”¨åˆ°äº†â€œåˆ›å»ºâ€è¿™ä¸ªè¯ï¼Œè¿™æ˜¯å‡ºäºè¡¨è¿°å’Œç†è§£ä¸Šçš„æ–¹ä¾¿ã€‚äº‹å®ä¸Šåœ¨ Linux ä¸­ï¼Œè¿›ç¨‹æ˜¯ä¸èƒ½è¢«â€œå‡­ç©ºâ€åˆ›å»ºçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒLinux å¹¶æ²¡æœ‰æä¾›ä¸€ç§ç³»ç»Ÿè°ƒç”¨è®©åº”ç”¨ç¨‹åºâ€œåˆ›å»ºâ€ä¸€ä¸ªè¿›ç¨‹ã€‚åº”ç”¨ç¨‹åºåªèƒ½é€šè¿‡å…‹éš†è‡ªå·²æ¥äº§ç”Ÿæ–°è¿›ç¨‹ã€‚å› æ­¤ï¼Œå­è¿›ç¨‹åº”è¯¥æ˜¯å…¶çˆ¶è¿›ç¨‹çš„å…‹éš†ä½“ã€‚æ‰€ä»¥ Gra-Gra-Gra Father æ˜¯ğŸ¤“ï¼Ÿ</p><h3 id="UID-å’Œ-EUIDï¼šçœŸå®å’Œæœ‰æ•ˆçš„ç”¨æˆ·-ID"><a href="#UID-å’Œ-EUIDï¼šçœŸå®å’Œæœ‰æ•ˆçš„ç”¨æˆ·-ID" class="headerlink" title="UID å’Œ EUIDï¼šçœŸå®å’Œæœ‰æ•ˆçš„ç”¨æˆ· ID"></a>UID å’Œ EUIDï¼šçœŸå®å’Œæœ‰æ•ˆçš„ç”¨æˆ· ID</h3><p>åªæœ‰è¿›ç¨‹çš„åˆ›å»ºè€…å’Œ root ç”¨æˆ·æ‰æœ‰æƒåˆ©å¯¹è¯¥è¿›ç¨‹è¿›è¡Œæ“ä½œã€‚äºæ˜¯ï¼Œè®°å½•ä¸€ä¸ªè¿›ç¨‹çš„åˆ›å»ºè€…(ä¹Ÿå°±æ˜¯å±ä¸»)å°±æ˜¾å¾—éå¸¸å¿…è¦ã€‚è¿›ç¨‹çš„ UID å°±æ˜¯å…¶åˆ›å»ºè€…çš„ç”¨æˆ· ID å·ï¼Œç”¨äºæ ‡è¯†è¿›ç¨‹çš„å±ä¸»ã€‚Linux è¿˜ä¸ºè¿›ç¨‹ä¿å­˜äº†ä¸€ä¸ªâ€œæœ‰æ•ˆç”¨æˆ· ID å·â€ï¼Œè¢«ç§°ä½œ EUIDã€‚è¿™ä¸ªç‰¹æ®Šçš„ UID å·ç”¨æ¥ç¡®å®šè¿›ç¨‹å¯¹æŸäº›èµ„æºå’Œæ–‡ä»¶çš„è®¿é—®æƒé™ã€‚åœ¨ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¿›ç¨‹çš„ UID å’Œ EUID æ˜¯ä¸€æ ·çš„ï¼Œé™¤äº†è‘—åçš„ setuid ç¨‹åºã€‚</p><p>ä»€ä¹ˆæ˜¯ setuid ç¨‹åºï¼Ÿç”¨æˆ·ç®¡ç†ä¸­çš„ passwd å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤å…è®¸ç”¨æˆ·ä¿®æ”¹è‡ªå·±çš„ç™»å½•å£ä»¤ã€‚ä½†æ˜¯å¯†ç ä¿å­˜åœ¨ /etc/shadow æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶å¯¹æ™®é€šç”¨æˆ·æ˜¯ä¸å¯è¯»çš„ï¼Œé‚£ä¹ˆç”¨æˆ·æ€ä¹ˆèƒ½å¤Ÿé€šè¿‡ä¿®æ”¹ shadow æ–‡ä»¶æ¥ä¿®æ”¹è‡ªå·±çš„å£ä»¤å‘¢ï¼Ÿè¿™å°±æ˜¯ setuid çš„å¦™å¤„äº†ï¼Œé€šè¿‡ä½¿ passwd åœ¨æ‰§è¡Œé˜¶æ®µå…·æœ‰æ–‡ä»¶æ‰€æœ‰è€…(ä¹Ÿå°±æ˜¯ root)çš„æƒé™ï¼Œè®©ç”¨æˆ·ä¸´æ—¶æœ‰äº†ä¿®æ”¹ shadow æ–‡ä»¶çš„èƒ½åŠ›(å½“ç„¶è¿™ç§èƒ½åŠ›æ˜¯å—åˆ°é™åˆ¶çš„)ã€‚å› æ­¤ï¼Œpasswd å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ setuid ç¨‹åºï¼Œå…¶ UID æ˜¯å½“å‰æ‰§è¡Œè¿™ä¸ªå‘½ä»¤çš„ç”¨æˆ· IDï¼Œè€Œ EUID åˆ™æ˜¯ root ç”¨æˆ·çš„ ID (ä¹Ÿå°±æ˜¯0)ã€‚</p><h3 id="GID-å’Œ-EGIDï¼šçœŸå®å’Œæœ‰æ•ˆçš„ç»„-ID"><a href="#GID-å’Œ-EGIDï¼šçœŸå®å’Œæœ‰æ•ˆçš„ç»„-ID" class="headerlink" title="GID å’Œ EGIDï¼šçœŸå®å’Œæœ‰æ•ˆçš„ç»„ ID"></a>GID å’Œ EGIDï¼šçœŸå®å’Œæœ‰æ•ˆçš„ç»„ ID</h3><p>ç±»ä¼¼çš„ï¼Œè¿›ç¨‹çš„ GID å°±æ˜¯å…¶åˆ›å»ºè€…æ‰€å±ç»„çš„ IDï¼ŒEGID å¯ä»¥é€šè¿‡ setgid ç¨‹åºæ¥è®¾ç½®ã€‚ä½†å¥½åƒæ—¥å¸¸æ²¡ä»€ä¹ˆç”¨~</p><h3 id="è°¦è®©åº¦å’Œä¼˜å…ˆçº§"><a href="#è°¦è®©åº¦å’Œä¼˜å…ˆçº§" class="headerlink" title="è°¦è®©åº¦å’Œä¼˜å…ˆçº§"></a>è°¦è®©åº¦å’Œä¼˜å…ˆçº§</h3><p>é¡¾åæ€ä¹‰ï¼Œè¿›ç¨‹çš„ä¼˜å…ˆçº§å†³å®šäº†å…¶å—åˆ° CPU â€œä¼˜å¾…â€çš„ç¨‹åº¦ã€‚ä¼˜å…ˆçº§é«˜çš„è¿›ç¨‹èƒ½å¤Ÿæ›´æ—©åœ°è¢«å¤„ç†ï¼Œå¹¶è·å¾—æ›´å¤šçš„å¤„ç†å™¨æ—¶é—´ã€‚Linux å†…æ ¸ä¼šç»¼åˆè€ƒè™‘ä¸€ä¸ªè¿›ç¨‹çš„å„ç§å› ç´ æ¥å†³å®šå…¶ä¼˜å…ˆçº§ã€‚è¿™äº›å› ç´ åŒ…æ‹¬è¿›ç¨‹å·²ç»æ¶ˆè€—çš„ CPU æ—¶é—´ã€è¿›ç¨‹å·²ç»ç­‰å¾…çš„æ—¶é—´ç­‰ã€‚åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå†³å®šè¿›ç¨‹ä½•æ—¶è¢«å¤„ç†æ˜¯å†…æ ¸çš„äº‹æƒ…ï¼Œä¸éœ€è¦ç”¨æˆ·æ’æ‰‹ã€‚</p><p>ç”¨æˆ·å¯ä»¥é€šè¿‡è®¾ç½®è¿›ç¨‹çš„â€œè°¦è®©åº¦â€æ¥å½±å“å†…æ ¸çš„æƒ³æ³•ã€‚â€œè°¦è®©åº¦â€ å’Œâ€œä¼˜å…ˆçº§â€åˆšå¥½æ˜¯ä¸€å¯¹ç›¸åçš„æ¦‚å¿µï¼Œé«˜â€œè°¦è®©åº¦â€æ„å‘³ç€ä½â€œä¼˜å…ˆçº§â€ï¼Œåä¹‹äº¦ç„¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿›ç¨‹ç®¡ç†å·¥å…·è®©ç”¨æˆ·è®¾ç½®çš„æ€»æ˜¯â€œè°¦è®©åº¦â€ï¼Œè€Œä¸æ˜¯â€œä¼˜å…ˆçº§â€ã€‚å¦‚æœå¸Œæœ›è®©ä¸€ä¸ªè¿›ç¨‹æ›´æ—©åœ°è¢«å¤„ç†ï¼Œé‚£ä¹ˆåº”è¯¥æŠŠå®ƒçš„è°¦è®©åº¦è®¾ç½®å¾—ä½ä¸€äº›ï¼Œä½¿å…¶å˜å¾—ä¸é‚£ä¹ˆâ€œè°¦è®©â€ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Go ä¹±ä¸ƒå…«ç³Ÿä¹‹ GoLand ä¸æç¤ºä¸é«˜äº®</title>
      <link href="/2022/04/22/Go_No_Code_Tips/"/>
      <url>/2022/04/22/Go_No_Code_Tips/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><p>å½“æˆ‘æ­£åœ¨æ„‰å¿«çš„ä½¿ç”¨ Go ç¼–å†™ â€œHello, World!â€ æ—¶ï¼ŒGoLand å¼¹å‡ºäº†ä¸€ä¸ªæç¤ºæ¡†ã€æœ‰ä¸‰ä¸¤ä¸ªé€‰é¡¹ï¼Œè¯´å®è¯æˆ‘æ²¡ç»†çœ‹å°±éšä¾¿é€‰äº†ä¸€ä¸ªï¼Œç„¶åâ€¦å†æ•²ä»£ç æ—¶ï¼Œcode è‡ªåŠ¨æç¤ºæ²¡æœ‰äº†ã€pkg è‡ªåŠ¨å¼•å…¥æ²¡æœ‰äº†ã€æ¢è¡Œæ—¶è‡ªåŠ¨ç¼©è¿›æ²¡æœ‰äº†ã€ä»£ç é«˜äº®æ²¡æœ‰äº†ã€æ–¹æ³•æ—è¾¹çš„ç»¿è‰²å°æŒ‰é’®ä¹Ÿä¸è§äº†ã€æ‰“å¼€ â€œHello, World!â€ é¡¹ç›®å±…ç„¶éƒ½è¦è½¬åŠåˆ†é’Ÿçš„èŠèŠ±â€¦</p><p>â€¦å“­ç¬‘ä¸å¾—â€¦</p><p>è·ŸåŒäº‹é¼“æ£äº†åŠå¤© File Encodingsï¼Œå‘ç°å¹¶ä¸æ˜¯ç¼–ç æ ¼å¼çš„äº‹å„¿ã€‚å°±åœ¨æˆ‘è¦é‡è£… GoLand æ—¶ï¼Œåœ¨åå¥½è®¾ç½®é‡Œå‘ç°äº†ä¸€ä¸ªå¾ˆçªå…€çš„ <code>2</code>â€¦</p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/go-no-tips0.png" style="zoom:50%;"><p>æ˜¯çš„ï¼ŒPreferences -&gt; Editor -&gt; File Typesï¼Œé€‰ä¸­ Go files ï¼Œå‘ç° Go æ–‡ä»¶çš„åç¼€ *.go é‡Œå¤šäº†ä¸€ä¸ª 2ï¼Œç„¶å Text ç±»å‹æ–‡ä»¶çš„åç¼€é‡Œå¤šäº†ä¸€ä¸ª *.go â€¦<br>æ‰€ä»¥æŠŠ Text ä¸­çš„ *.go åˆ æ‰ï¼ŒæŠŠ Go files ä¸­çš„ *.go2 æ”¹ä¸º *.go å°±å¥½äº†ã€‚</p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/go-no-tips1.png" style="zoom: 50%;"><p>ç ´æ¡ˆäº†ç ´æ¡ˆäº†ï¼Œè‡³äºä¸ºä»€ä¹ˆâ€¦å°å’ªè¡¨ç¤ºä¹Ÿä¸çŸ¥é“â€¦ğŸ˜‚<br>å°±â€¦è¿˜æ˜¯â€¦å“­ç¬‘ä¸å¾—â€¦</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/%E5%99%97%E5%97%A4.gif"></p><hr>]]></content>
      
      
      
        <tags>
            
            <tag> Go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Go ä¹±ä¸ƒå…«ç³Ÿä¹‹ command-line-arguments</title>
      <link href="/2022/04/20/Go_command_line_arguments/"/>
      <url>/2022/04/20/Go_command_line_arguments/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><p>æœ‰æ®µæ—¶é—´æ²¡æœ‰å­¦ä¹  Go çš„å¼€å‘ï¼ŒåŠ ä¹‹æœ€è¿‘æ¢äº†ç”µè„‘ï¼Œå¯¼è‡´ Go çš„å¼€å‘ç¯å¢ƒéœ€è¦é‡æ–°å®‰è£…ä¸€éï¼Œä½†æ—¶é—´éš”å¾—å¤ªä¹…æˆ‘ç”šè‡³è¿ç¼–è¯‘æ–¹å¼éƒ½å¿«å¿˜å…‰äº†ğŸ˜‚â€¦â€¦èµ¶ç´§åšä¸ªè®°å½•ã€‚<br>ä»Šå¤©é‡åˆ°çš„å°é—®é¢˜æ˜¯åœ¨è·‘ä¹‹å‰çš„ä¸€ä¸ª Demo æ—¶ï¼Œæç¤ºæ–¹æ³•æ‰¾ä¸åˆ°ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># command-line-arguments</span></span><br><span class="line">./main.go:<span class="number">29</span>:<span class="number">14</span>: undefined: Add</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>Demo çš„ç›®å½•ç»“æ„æ˜¯ï¼š</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">hello</span><br><span class="line">â”œâ”€â”€ bin</span><br><span class="line">â”œâ”€â”€ pkg</span><br><span class="line">â””â”€â”€ src</span><br><span class="line">    â””â”€â”€ main</span><br><span class="line">        â”œâ”€â”€ func<span class="built_in">_</span>use.go</span><br><span class="line">        â”œâ”€â”€ loop<span class="built_in">_</span>use.go</span><br><span class="line">        â”œâ”€â”€ main.go</span><br><span class="line">        â”œâ”€â”€ map<span class="built_in">_</span>use.go</span><br><span class="line">        â”œâ”€â”€ method<span class="built_in">_</span>use.go</span><br><span class="line">        â”œâ”€â”€ slice<span class="built_in">_</span>use.go</span><br><span class="line">        â””â”€â”€ type<span class="built_in">_</span>use.go</span><br></pre></td></tr></table></figure><p>å¯¼è‡´ä¸Šé¢é—®é¢˜çš„åŸå› æ˜¯ï¼ŒAdd æ–¹æ³•æ˜¯åœ¨ type_use.go å†…å®šä¹‰çš„ï¼Œä½†æ˜¯ç¼–è¯‘çš„æ—¶å€™åªç¼–è¯‘äº† main.go æ–‡ä»¶â€¦<br>å¦‚æœä½ ä½¿ç”¨çš„ IDE ä¹Ÿæ˜¯ GoLandï¼Œå¯ä»¥å°è¯•è¿™æ ·ä¿®æ”¹ä¸€ä¸‹â€”â€”ä¿®æ”¹ç¼–è¯‘æ–¹å¼:</p><p>1ã€æ‰“å¼€ Edit Configurationsâ€¦</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/command-line-arguments-0.png"></p><p>2ã€Run kind é€‰æ‹©çš„æ˜¯ File ç±»å‹ï¼Œåªç¼–è¯‘æŒ‡å®šçš„æ–‡ä»¶ï¼Œæ‰€ä»¥å…¶ä»– go æ–‡ä»¶å†…çš„æ–¹æ³•æ‰¾ä¸åˆ°æ˜¯æ­£å¸¸çš„ã€‚</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/command-line-arguments-1.png"></p><p>3ã€å°† Run kind æ”¹ä¸º Directory ç±»å‹ï¼ŒæŒ‡å®šå¥½ç¼–è¯‘ç›®å½•ã€‚</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/command-line-arguments-2.png"></p><p>æ”¹å®Œä»¥åï¼Œä¼°è®¡å°±å¯ä»¥è§åˆ° â€œäººç”Ÿè‹¦çŸ­ï¼ŒLetâ€™s Go!â€ äº†ï¼Œç¾æ»‹æ»‹~~</p><hr>]]></content>
      
      
      
        <tags>
            
            <tag> Go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºè°ƒæ•´ cordova.js æ³¨å…¥æ—¶æœºçš„è®¨è®º</title>
      <link href="/2022/04/15/InjectCordova/"/>
      <url>/2022/04/15/InjectCordova/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><p>Cordova æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ç§»åŠ¨ç«¯æ··åˆå¼€å‘æ¡†æ¶ï¼Œåœ¨å…¬å¸é¡¹ç›®ä¸­æ‹…ä»»æ¡¥æ¥å™¨çš„ä½œç”¨ï¼Œä¸ºå‰ç«¯æä¾›ä¸€äº›åŸç”Ÿåº•å±‚èƒ½åŠ›ï¼Œåœ¨â€œæ’ä»¶â€ä¸­ä»¥å¼‚æ­¥çš„å½¢å¼å°†æ‰§è¡Œç»“æœè¿”å›ç»™å‰ç«¯ã€‚è€ƒè™‘åˆ°å‰ç«¯çš„é¡µé¢å¯èƒ½åœ¨æœ¬åœ°ã€è¿œç¨‹ã€è·¨å„ç§åŸŸç­‰ç­‰é—®é¢˜ï¼Œä¸€èˆ¬çš„åšæ³•æ˜¯æŠŠ<br>www/cordova.js<br>www/cordova_plugins.jsâ€¦<br>www/plugins/*.js<br>â€¦<br>è¿™ä¸€è¿ä¸²çš„ js æ”¾åœ¨åŸç”Ÿçš„å·¥ç¨‹ä¸­ï¼Œç”±åŸç”ŸåŠ¨æ€æ³¨å…¥åˆ°é¡µé¢ä¸­ã€‚åŠŸèƒ½æ–¹é¢æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯æ’ä»¶çš„è°ƒç”¨æ€§èƒ½å´ä¸€ç›´è¢«å‰ç«¯çš„åŒäº‹è¯Ÿç—…ï¼šç›®å‰åªèƒ½ç­‰åˆ° cordova å‘å‡º â€œdevicereadyâ€ é€šçŸ¥ä»¥åï¼Œæ‰å¯ä»¥æ­£å¸¸è°ƒç”¨æ’ä»¶åŠŸèƒ½ã€‚è¿™å¯¼è‡´é¡µé¢æƒ³ä½¿ç”¨æ’ä»¶çš„ä¿¡æ¯é¢„åŠ è½½æŸäº›å†…å®¹æ—¶(ä¾‹å¦‚æå‰åšè®¤è¯ç­‰ç­‰)æ²¡åŠæ³•æ­£å¸¸è®¿é—®åˆ°æ’ä»¶ï¼Œä¼šæç¤º Undefineâ€¦è‚‰çœ¼å¯è§çš„æ•ˆæœå°±æ˜¯é¡µé¢å‰æœŸä¼šç™½é¡µä¸€ä¸¤ç§’ã€‚</p><p>è¿™ä¸¤å¤©æŠ½ç©ºåšäº†ä¸€ä¸‹ Android ç«¯çš„å°è¯•ï¼Œæƒ³è¦çš„æ•ˆæœå°±æ˜¯å°½é‡æå‰å®Œæˆ cordova ç›¸å…³ js çš„æ³¨å…¥ã€‚Demo ä¸­è¾¾åˆ°äº†æˆ‘é¢„æœŸçš„æ•ˆæœï¼Œé«˜å…´çš„ä¸€æ™šä¸Šæ²¡ç¡ç€è§‰ï¼Œä½†æ˜¯ï¼ŒAndroid å’Œå‰ç«¯æˆ‘åªæ˜¯ç•¥æ‡‚çš®æ¯›ï¼Œä¸ç¡®å®šæµ‹è¯•çš„æ–¹æ¡ˆæœ‰æ²¡æœ‰é—®é¢˜ã€åº”å¯¹å¤æ‚çš„åœºæ™¯æ˜¯å¦å¯è¡Œï¼Œæ‰€ä»¥å†™åœ¨è¿™é‡Œåšä¸€ä¸ªè®¨è®ºï¼Œå¸Œæœ›æœ‰å…±åŒéœ€æ±‚çš„æœ‹å‹ä¸€èµ·æ¢è®¨ä¸€ä¸‹ã€‚</p><h2 id="Android-ç«¯æ‰€ä½œçš„å°è¯•"><a href="#Android-ç«¯æ‰€ä½œçš„å°è¯•" class="headerlink" title="Android ç«¯æ‰€ä½œçš„å°è¯•"></a>Android ç«¯æ‰€ä½œçš„å°è¯•</h2><p><a href="https://github.com/ATommyGirl/cordova.git">Demo åœ¨æ­¤ã€‚</a></p><h3 id="å°è¯•å‰"><a href="#å°è¯•å‰" class="headerlink" title="å°è¯•å‰"></a>å°è¯•å‰</h3><p>æœäº†ä¸€ä¸‹ Android ç«¯æ³¨å…¥ js çš„æ–¹å¼ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯é‡‡ç”¨ä¸‹é¢çš„æ–¹æ¡ˆï¼ˆç›®æµ‹æ­¤æ–¹æ¡ˆæ˜¯å¯¹æ ‡è‡ª GitHub ä¸Šçš„ä¸€ä¸ª InjectCordova æ’ä»¶ï¼‰ï¼š<br>1ã€ç›‘å¬ WebView çš„ <code>onPageFinished</code> äº‹ä»¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç›‘å¬ onPageFinished äº‹ä»¶</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">CordovaActivity</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  ...</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">onMessage</span><span class="params">(String id, Object data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (id.equals(<span class="string">&quot;onPageFinished&quot;</span>)) &#123;</span><br><span class="line">            injectCordova(mEngine); <span class="comment">//æ ‡ç­¾æ³¨å…¥</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2ã€æ‹¼æ¥ä¸€ä¸ª <code>&lt;script&gt;</code> æ ‡ç­¾ - é€šè¿‡ <code>document.createElement()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ª <code>&lt;script&gt;</code> æ ‡ç­¾ï¼Œæ ‡ç­¾å†…å®¹æ˜¯æ‰€æœ‰è¦æ³¨å…¥çš„ js æºç æ‹¼æ¥è€Œæˆçš„å­—ç¬¦ä¸²ï¼Œå†ä½¿ç”¨ <code>appendChild()</code> æ–¹æ³•æŠŠ <code>&lt;script&gt;</code> æ‹¼æ¥åœ¨ <code>&lt;head&gt;</code> æ ‡ç­¾çš„åé¢ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">CordovaActivity</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  ...</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ArrayList&lt;String&gt; preInjectionFileNames = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">injectCordova</span><span class="params">(CordovaWebViewEngine engine)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; jsPaths = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String path: preInjectionFileNames) &#123;</span><br><span class="line">            jsPaths.add(path);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        jsPaths.add(<span class="string">&quot;www/cordova.js&quot;</span>);</span><br><span class="line">        jsPaths.addAll(jsPathsToInject(getResources().getAssets(), <span class="string">&quot;www/plugins&quot;</span>));</span><br><span class="line">        jsPaths.add(<span class="string">&quot;www/cordova_plugins.js&quot;</span>);</span><br><span class="line"></span><br><span class="line">        StringBuilder jsToInject = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span> (String path: jsPaths) &#123;</span><br><span class="line">            jsToInject.append(readFile(getResources().getAssets(), path));</span><br><span class="line">        &#125;</span><br><span class="line">        String jsUrl = <span class="string">&quot;javascript:var script = document.createElement(&#x27;script&#x27;);&quot;</span>;</span><br><span class="line">        jsUrl += <span class="string">&quot;script.src=\&quot;data:text/javascript;charset=utf-8;base64,&quot;</span>;</span><br><span class="line"></span><br><span class="line">        jsUrl += Base64.encodeToString(jsToInject.toString().getBytes(), Base64.NO_WRAP);</span><br><span class="line">        jsUrl += <span class="string">&quot;\&quot;;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        jsUrl += <span class="string">&quot;document.getElementsByTagName(&#x27;head&#x27;)[0].appendChild(script);&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//webView.getEngine().loadUrl(jsUrl, false);</span></span><br><span class="line">        engine.loadUrl(jsUrl, <span class="keyword">false</span>);<span class="comment">//falseå‚æ•°è¡¨ç¤ºï¼Œä¸é‡å¯pluginï¼Œç”¨äºåŠ è½½jsåº“æ–‡ä»¶</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">readFile</span><span class="params">(AssetManager assets, String filePath)</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">          <span class="comment">//è¯¦è§ Demoã€‚</span></span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;String&gt; <span class="title">jsPathsToInject</span><span class="params">(AssetManager assets, String path)</span> </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">          <span class="comment">//è¯¦è§ Demoã€‚</span></span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3ã€ä½¿ç”¨ WebView.loadUrl() æ–¹æ³•æ³¨å…¥æ‹¼æ¥åçš„ jsã€‚</p><p>ä¸Šé¢çš„æ–¹æ¡ˆæ¶‰åŠåˆ°äº†è·å–ã€æ‹¼æ¥æ ‡ç­¾å…ƒç´ ï¼Œå¦‚æœæƒ³åœ¨ WebView åŠ è½½å®Œæˆä¹‹å‰æå‰æ³¨å…¥ä¼¼ä¹æ˜¯ä¸å¤ªç°å®çš„ï¼Œå› ä¸ºæ—¶æœºå¤ªæ—©çš„è¯ï¼Œæ˜¯æ‹¿ä¸åˆ°æ ‡ç­¾çš„ã€‚</p><h3 id="å°è¯•å"><a href="#å°è¯•å" class="headerlink" title="å°è¯•å"></a>å°è¯•å</h3><p>è¯»äº†ä¸€ä¸‹ Android WebView çš„ API æ–‡æ¡£ï¼Œè²Œä¼¼èƒ½å¤Ÿå®ç° js æ³¨å…¥çš„æ–¹æ³•åªæœ‰ä¸¤ä¸ªï¼š<code>loadUrl(String url)</code> å’Œ <code>evaluateJavascript(String, ValueCallback)</code>ã€‚è€ƒè™‘åˆ° cordova ç›¸å…³ js ä¸­ä¸€èˆ¬ä¸ä¼šé’ˆå¯¹å‰ç«¯æ ‡ç­¾åšä»€ä¹ˆæ“ä½œï¼Œæ˜¯åœ¨é¡µé¢ä¸­å£°æ˜ä¸€ä¸ªåä¸º cordova çš„â€œæ¨¡å—â€ï¼Œè¿™ä¸ªæ¨¡å—åˆå®šä¹‰äº†è‹¥å¹²ä¸ªæ’ä»¶æ¨¡å—å’Œæ–¹æ³•ï¼Œå³ä½¿æ˜¯è‡ªå·±å†™çš„æ’ä»¶ï¼Œç›®çš„ä¹Ÿæ˜¯ä¸ºäº†èƒ½è®©å‰ç«¯ä½¿ç”¨åŸç”Ÿèƒ½åŠ›(ç›¸æœºã€ç›¸å†Œç­‰ç­‰)ï¼Œé‚£æ˜¯å¦ä¸éœ€è¦ç­‰åˆ° WebView æŠŠ DOM çš„å†…å®¹éƒ½æ¸²æŸ“å®Œæˆæ‰å¯ä»¥å¼€å§‹æ³¨å…¥ï¼Ÿäºæ˜¯åšäº†å¦‚ä¸‹çš„å°è¯•ï¼š</p><p>ä¸ä¹‹å‰çš„æ–¹æ¡ˆç›¸ä¼¼ï¼Œä¾æ—§æ˜¯å¾ªç¯è¯»å–å„ä¸ª js ä¸­çš„æºç ï¼Œä½†ä¸å†æ‹¼æ¥ <code>&lt;script&gt;</code> æ ‡ç­¾ï¼Œè€Œæ˜¯ä½¿ç”¨ <code>evaluateJavascript(String, ValueCallback)</code> å°†æ¯æ®µ js æ³¨å…¥åˆ°é¡µé¢ä¸­ï¼Œå¹¶ä¸”æ³¨å…¥æ—¶æœºæå‰åˆ° <code>onPageStarted</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">CordovaActivity</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  ...</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">onMessage</span><span class="params">(String id, Object data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (id.equals(<span class="string">&quot;onPageStarted&quot;</span>)) &#123;</span><br><span class="line">            evaluateCordovaJavascript(mWebView); <span class="comment">//æ‰§è¡Œ js æ³¨å…¥</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">evaluateCordovaJavascript</span><span class="params">(WebView webView)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; jsPaths = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String path: preInjectionFileNames) &#123;</span><br><span class="line">            jsPaths.add(path);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        jsPaths.add(<span class="string">&quot;www/cordova.js&quot;</span>);</span><br><span class="line">        jsPaths.addAll(jsPathsToInject(getResources().getAssets(), <span class="string">&quot;www/plugins&quot;</span>));</span><br><span class="line">        jsPaths.add(<span class="string">&quot;www/cordova_plugins.js&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (String path: jsPaths) &#123;</span><br><span class="line">            String js = readFile(getResources().getAssets(), path);</span><br><span class="line">            webView.evaluateJavascript(js, <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬åšéªŒè¯ï¼Œåœ¨ index.js ä¸­æ·»åŠ å¦‚ä¸‹æµ‹è¯•ä»£ç ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ­£å¸¸æƒ…å†µä¸‹éœ€ç›‘å¬åˆ° cordova çš„ deviceready é€šçŸ¥åï¼Œæ‰å¯ä»¥è°ƒç”¨æ’ä»¶æ–¹æ³•ï¼š</span></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;deviceready&#x27;</span>, onDeviceReady, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onDeviceReady</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Cordova is now initialized. Have fun!</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;YY: Running cordova - &#x27;</span> + cordova.platformId + <span class="string">&#x27;@&#x27;</span> + cordova.version);</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;deviceready&#x27;</span>).classList.add(<span class="string">&#x27;ready&#x27;</span>);</span><br><span class="line">    testMyPlugin(<span class="string">&#x27;Device Ready: &#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™é‡Œæˆ‘ä»¬ç”¨ä¸€ä¸ª IIFE - ç«‹å³è°ƒç”¨å‡½æ•°ï¼Œä½¿å¾— index.js åŠ è½½çš„æ—¶å€™ç«‹å³æ‰§è¡Œè¿™ä¸ªæ–¹æ³•æ¥è°ƒç”¨ cordova çš„æ’ä»¶ï¼š</span></span><br><span class="line">(</span><br><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;YY: Just do IT!&#x27;</span>);</span><br><span class="line">    testMyPlugin(<span class="string">&#x27;Device Start: &#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">)();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testMyPlugin</span>(<span class="params">tag</span>) </span>&#123;</span><br><span class="line">   MPKeyChain.getValueForKey(</span><br><span class="line">        <span class="string">&#x27;username&#x27;</span>,</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">success</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;YY: &#x27;</span>+ tag + result);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;YY: &#x27;</span>+ tag + <span class="string">&quot;è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">    MPKeyChain.getServerUrl(</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">success</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;YY: &#x27;</span>+ tag + result);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;YY: &#x27;</span>+ tag + <span class="string">&quot;è·å–æœåŠ¡å™¨ä¿¡æ¯å¤±è´¥&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ¹æ® log è¾“å‡ºçš„ç»“æœï¼Œç¡®å®åƒæˆ‘æ‰€é¢„æœŸçš„æ•ˆæœï¼Œæ˜¯å¯ä»¥æå‰æ³¨å…¥çš„ï¼š</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;YY: Just do IT!&quot;, source: https://localhost/js/index.js (39)</span><br><span class="line">&quot;YY: Device Start: zhengyt&quot;, source: https://localhost/js/index.js (49)</span><br><span class="line">&quot;YY: Device Start: https://tommygirl.cn&quot;, source: https://localhost/js/index.js (59)</span><br><span class="line">&quot;YY: Running cordova - android@10.1.1&quot;, source: https://localhost/js/index.js (70)</span><br><span class="line">&quot;YY: Device Ready: zhengyt&quot;, source: https://localhost/js/index.js (49)</span><br><span class="line">&quot;YY: Device Ready: https://tommygirl.cn&quot;, source: https://localhost/js/index.js (59)</span><br></pre></td></tr></table></figure><p>è¿›è¡Œåˆ°è¿™ä¸€æ­¥çš„æ—¶å€™ï¼Œæœ‰ä¸¤ç‚¹æˆ‘ä¸å¤ªç¡®å®šï¼šä¸€ä¸ªæ˜¯ Android WebView æä¾›çš„ onPageStartedã€onPageFinished äº‹ä»¶ä¸ DOM çš„å„ä¸ªç”Ÿå‘½å‘¨æœŸ DOMContentLoadedã€Load äº‹ä»¶ä¹‹é—´çš„å…³ç³»ï¼ŒäºŒæ˜¯åœ¨ DOM çš„ç”Ÿå‘½å‘¨æœŸå®Œæˆä¹‹å‰æ³¨å…¥ js æ˜¯å¦å­˜åœ¨ä»€ä¹ˆæˆ‘ä¸æ‡‚çš„é—®é¢˜ã€‚</p><p>åœ¨ index.js ä¸­å¢åŠ äº†å¯¹ DOM ç”Ÿå‘½å‘¨æœŸçš„ç›‘å¬ï¼Œæ‰“å°äº†ä¸€ä¸‹è¿™äº›äº‹ä»¶çš„é¡ºåºï¼š</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">2022-04-15 11:25:26.259 I/System.out: YY: onProgressChanged - 10</span><br><span class="line">2022-04-15 11:25:26.321 I/System.out: YY: onMessage - onPageStarted</span><br><span class="line">2022-04-15 11:25:26.355 I/System.out: YY: onMessage - spinner</span><br><span class="line">2022-04-15 11:25:26.361 I/chromium: [INFO:CONSOLE(39)] &quot;YY: Just do IT!&quot;, source: https://localhost/js/index.js (39)</span><br><span class="line">2022-04-15 11:25:26.363 I/chromium: [INFO:CONSOLE(49)] &quot;YY: Device Start: zhengyt&quot;, source: https://localhost/js/index.js (49)</span><br><span class="line">2022-04-15 11:25:26.363 I/chromium: [INFO:CONSOLE(59)] &quot;YY: Device Start: https://tommygirl.cn&quot;, source: https://localhost/js/index.js (59)</span><br><span class="line">2022-04-15 11:25:26.364 I/chromium: [INFO:CONSOLE(33)] &quot;YY: Ready state change!&quot;, source: https://localhost/js/index.js (33)</span><br><span class="line">2022-04-15 11:25:26.364 I/chromium: [INFO:CONSOLE(25)] &quot;YY: DOMContentLoaded&quot;, source: https://localhost/js/index.js (25)</span><br><span class="line">2022-04-15 11:25:26.364 I/System.out: YY: onProgressChanged - 80</span><br><span class="line">2022-04-15 11:25:26.365 I/chromium: [INFO:CONSOLE(33)] &quot;YY: Ready state change!&quot;, source: https://localhost/js/index.js (33)</span><br><span class="line">2022-04-15 11:25:26.365 I/chromium: [INFO:CONSOLE(29)] &quot;YY: Load&quot;, source: https://localhost/js/index.js (29)</span><br><span class="line">2022-04-15 11:25:26.365 I/System.out: YY: onProgressChanged - 100</span><br><span class="line">2022-04-15 11:25:26.365 I/System.out: YY: onProgressChanged - 100</span><br><span class="line">2022-04-15 11:25:26.365 I/chromium: [INFO:CONSOLE(70)] &quot;YY: Running cordova - android@10.1.1&quot;, source: https://localhost/js/index.js (70)</span><br><span class="line">2022-04-15 11:25:26.366 I/System.out: YY: onMessage - onPageFinished</span><br><span class="line">2022-04-15 11:25:26.367 I/chromium: [INFO:CONSOLE(49)] &quot;YY: Device Ready: zhengyt&quot;, source: https://localhost/js/index.js (49)</span><br><span class="line">2022-04-15 11:25:26.367 I/chromium: [INFO:CONSOLE(59)] &quot;YY: Device Ready: https://tommygirl.cn&quot;, source: https://localhost/js/index.js (59)</span><br></pre></td></tr></table></figure><p>é¡ºåºå¯è§ï¼šonPageStarted -&gt; IIFE ä¸­å¯ä»¥è°ƒç”¨æ’ä»¶ -&gt; DOMContentLoaded -&gt; Load -&gt; onPageFinished -&gt; cordova é€šçŸ¥ devicereadyã€‚</p><p>é‚£è¿™æ ·æ˜¯å¦å¯ä»¥è¯æ˜æå‰å®Œæˆæ³¨å…¥æ˜¯å¯è¡Œçš„å‘¢ï¼Ÿåˆæˆ–è€…æˆ‘è¿›å…¥äº†â€œè¶Šæ— çŸ¥è¶Šæ‹¥æœ‰è«åå…¶å¦™å‹‡æ°”â€çš„è¯¯åŒºï¼ŸğŸ¤“å“ˆå“ˆå“ˆï¼Œæ±‚è·¯è¿‡çš„å„ä½å¤§ä½¬èµæ•™ã€è®¨è®ºã€‚</p><h2 id="iOS-UIWebView"><a href="#iOS-UIWebView" class="headerlink" title="iOS - UIWebView"></a>iOS - UIWebView</h2><p>cordova 4.0 ä¹‹åï¼Œåœ¨ UIWebView ä¸­æ³¨å…¥ JS ä¹Ÿéœ€è¦è‡ªå·±æ‰‹åŠ¨å®Œæˆï¼Œä½† 4.0 ä¹‹å‰æ˜¯æ€ä¹ˆæ ·çš„æˆ‘è®°ä¸æ¸…äº†â€¦<a href="https://github.com/ATommyGirl/cordova.git">Demo åœ¨æ­¤ã€‚</a> å€ŸåŠ© InjectCordova çš„æ’ä»¶ç›‘å¬ <code>CDVPageDidLoadNotification</code> é€šçŸ¥ï¼Œåœ¨æ”¶åˆ°é€šçŸ¥åä½¿ç”¨ UIWebView çš„ <code>stringByEvaluatingJavaScriptFromString:</code> æ–¹æ³•æŠŠ JS æ³¨å…¥è¿›å»ã€‚å…¶å®å®Œå…¨ä¸ç”¨æ’ä»¶ï¼Œåœ¨ç»§æ‰¿è‡ª <code>CDVViewController</code> çš„å­ç±»ä¸­ï¼Œåšè¿™ä¸ªç›‘å¬ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p><p>UIWebView ä¸­ç›®å‰ä¸çŸ¥é“æ€ä¹ˆå¯ä»¥æå‰å®Œæˆæ³¨å…¥ï¼Œè²Œä¼¼ iOS ä¸­ <code>webViewDidStartLoad</code> å’Œ <code>webViewDidFinishLoad</code> çš„æ¦‚å¿µï¼ŒåŒ Android ä¸­çš„æ¦‚å¿µä¸æ˜¯ä¸€å›äº‹å„¿ã€‚ä½†â€¦ç®¡å®ƒå‘¢ï¼Œå‡çº§ WKWebView å§ï¼Œç¾æ»‹æ»‹~~</p><h2 id="iOS-WKWebView"><a href="#iOS-WKWebView" class="headerlink" title="iOS - WKWebView"></a>iOS - WKWebView</h2><p>å¦‚æœå‡çº§è‡³ WKWebView çš„è¯å®Œå…¨ä¸ç”¨çº ç»“ä¸Šé¢çš„å†…å®¹ï¼Œä¹‹å‰çš„æ–‡ç« ä¸­æˆ‘ä»¬ä¹Ÿæåˆ°è¿‡äº†ï¼Œé€šè¿‡ <a href="/2021/12/01/WKWebView/#WKUserScript">WKUserScriptã€WKUserScriptInjectionTimeAtDocumentStart</a> å¯ä»¥è½»æ¾å®ç°æå‰æ³¨å…¥ï¼Œå…³äºæ³¨å…¥çš„ js ä½œç”¨åŸŸçš„é—®é¢˜ï¼Œä¹Ÿæ¬¢è¿åœ¨åšå®¢ä¸­è®¨è®ºã€‚åœ¨æ­¤ä¸å†èµ˜è¿°ã€‚</p><hr>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> Cordova </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux å­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰- æ–‡ä»¶ç³»ç»Ÿ</title>
      <link href="/2022/03/15/Linux_FileSystem/"/>
      <url>/2022/03/15/Linux_FileSystem/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><p>&#8195;&#8195;è¯´å®è¯æˆ‘çœ‹äº†ä¸€ä¸‹æ–‡ä»¶ç³»ç»Ÿæ¶æ„çš„ä»‹ç»ï¼Œä¸æ˜¯å¾ˆæ˜ç™½ï¼Œè‡³å°‘æŒ‰ç…§ã€ŠLinux ä»å…¥é—¨åˆ°ç²¾é€šã€‹çš„é¡ºåºè¯»åˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œæˆ‘æ²¡çœ‹æ˜ç™½ï¼ŒåªçŸ¥é“ Linux é‡Œå‡ ä¹æ‰€æœ‰æ“ä½œæœ€ç»ˆéƒ½å¯ä»¥ç†è§£ä¸ºå¯¹æ–‡ä»¶çš„ä¿®æ”¹ã€‚æ‰€ä»¥æˆ‘å°±ä¸åœ¨è¿™é‡Œå†™å¤ªå¤šçš„å­¦ä¹ ç¬”è®°äº†ï¼Œå€Ÿç”¨ä½œè€…ä¹¦ä¸­çš„ä¸€æ®µè¯ï¼š</p><blockquote><p>è¦ç†è§£Linuxçš„æ–‡ä»¶ç³»ç»Ÿæ¶æ„ï¼Œçœ‹æ¥çš„ç¡®éœ€è¦è€—è´¹ä¸€å®šçš„è„‘åŠ›ã€‚ å¦‚æœç»è¿‡åŠªåŠ›ä»ç„¶ä¸æ˜ç™½ä¸Šé¢è¿™äº›æ–‡å­—åœ¨è¯´äº›ä»€ä¹ˆï¼Œä¸€ä¸ªå¥½çš„å»ºè®®æ˜¯ï¼šä¸è¦ç®¡é‚£ä¹ˆå¤šï¼Œå…ˆä½¿ç”¨ã€‚æ²¡æœ‰äººä¼šä¸ºäº†ä¸Šç½‘è€Œé¦–å…ˆå»å­¦ä¹ è·¯ç”±å™¨åŸç†ï¼Œä½†ä¸€ä¸ªæ¥è§¦äº†å‡ å¹´ç½‘ç»œçš„äººæ€»èƒ½å¯¹è·¯ç”±å™¨æ˜¯ä»€ä¹ˆè¿™ä¸ªé—®é¢˜è¯´ä¸Šå‡ å¥ã€‚æ‰€ä»¥æ— è®ºå¦‚ä½•ï¼Œé¦–å…ˆå»<strong>å®è·µ</strong>ã€‚</p></blockquote><p>Soâ€¦â€¦ ç®¡ä»–å‘¢ï¼Œå…ˆå®è·µèµ·æ¥~</p><h2 id="Linux-ç³»ç»Ÿä¸»è¦ç›®å½•åŠå…¶å†…å®¹"><a href="#Linux-ç³»ç»Ÿä¸»è¦ç›®å½•åŠå…¶å†…å®¹" class="headerlink" title="Linux ç³»ç»Ÿä¸»è¦ç›®å½•åŠå…¶å†…å®¹"></a>Linux ç³»ç»Ÿä¸»è¦ç›®å½•åŠå…¶å†…å®¹</h2><span id="more"></span><table><thead><tr><th>ç›®å½•</th><th>å†…å®¹</th></tr></thead><tbody><tr><td>/bin</td><td>æ„å»ºæœ€å°ç³»ç»Ÿæ‰€éœ€è¦çš„å‘½ä»¤(æœ€å¸¸ç”¨çš„å‘½ä»¤)</td></tr><tr><td>/boot</td><td>å†…æ ¸ä¸å¯åŠ¨æ–‡ä»¶</td></tr><tr><td>/dev</td><td>å„ç§è®¾å¤‡æ–‡ä»¶</td></tr><tr><td>/etc</td><td>ç³»ç»Ÿè½¯ä»¶çš„å¯åŠ¨å’Œé…ç½®æ–‡ä»¶</td></tr><tr><td>/home</td><td>ç”¨æˆ·çš„ä¸»ç›®å½•</td></tr><tr><td>/lib</td><td>C ç¼–è¯‘å™¨çš„åº“</td></tr><tr><td>/media</td><td>å¯ç§»åŠ¨ä»‹è´¨çš„å®‰è£…ç‚¹</td></tr><tr><td>/opt</td><td>å¯é€‰çš„åº”ç”¨è½¯ä»¶åŒ…(å¾ˆå°‘ä½¿ç”¨)</td></tr><tr><td>/proc</td><td>è¿›ç¨‹çš„æ˜ åƒ</td></tr><tr><td>/root</td><td>è¶…çº§ç”¨æˆ· root çš„ä¸»ç›®å½•</td></tr><tr><td>/sbin</td><td>å’Œç³»ç»Ÿæ“ä½œæœ‰å…³çš„å‘½ä»¤</td></tr><tr><td>/tmp</td><td>ä¸´æ—¶æ–‡ä»¶å­˜æ”¾ç‚¹</td></tr><tr><td>/usr</td><td>éç³»ç»Ÿçš„ç¨‹åºå’Œå‘½ä»¤</td></tr><tr><td>/var</td><td>ç³»ç»Ÿä¸“ç”¨çš„æ•°æ®å’Œé…ç½®æ–‡ä»¶</td></tr></tbody></table><h2 id="å¿«é€Ÿä¸Šæ‰‹ï¼šæä¸€ä¸ªå°å›¢ä½“"><a href="#å¿«é€Ÿä¸Šæ‰‹ï¼šæä¸€ä¸ªå°å›¢ä½“" class="headerlink" title="å¿«é€Ÿä¸Šæ‰‹ï¼šæä¸€ä¸ªå°å›¢ä½“"></a>å¿«é€Ÿä¸Šæ‰‹ï¼šæä¸€ä¸ªå°å›¢ä½“</h2><p>&#8195;&#8195;å…±äº«æ–‡ä»¶å¯¹ä¸€ä¸ªå›¢é˜Ÿè€Œè¨€éå¸¸é‡è¦ã€‚å›¢é˜Ÿçš„æˆå‘˜å¸¸å¸¸éœ€è¦åœ¨ä¸€å°æœåŠ¡å™¨ä¸Šå…±åŒå®Œæˆä¸€é¡¹ä»»åŠ¡ã€‚é‚£æˆ‘ä»¬æ¥åˆ›å»ºä¸€ä¸ªâ€œå°å›¢ä½“â€å§ï¼Œçœ‹çœ‹å¦‚ä½•å®ç°æˆå‘˜é—´çš„æ–‡ä»¶å…±äº«ï¼Œå‡è®¾å›¢é˜Ÿæˆå‘˜å¦‚ä¸‹ï¼š</p><p>ç”¨æˆ·ç»„ï¼šfancy<br>å·¥ä½œç›®å½•ï¼š/home/blog/<br>ç»„é•¿ï¼šyylittlecat<br>æˆå‘˜ï¼štommyã€archie<br>ç¼–å¤–äººå‘˜ï¼šapple</p><ul><li>åˆ›å»ºç”¨æˆ·ç»„å’Œç”¨æˆ·æˆå‘˜ï¼š</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªåä¸º fancy çš„ç”¨æˆ·ç»„</span></span><br><span class="line"><span class="variable">$</span> sudo groupadd fancy</span><br><span class="line"><span class="comment"># æ–°å»ºç”¨æˆ·ï¼Œå¹¶å½’å…¥ fancy ç»„</span></span><br><span class="line"><span class="variable">$</span> sudo useradd <span class="literal">-G</span> fancy yylittlecat</span><br><span class="line"><span class="variable">$</span> sudo passwd yylittlecat <span class="comment"># ä¸ºç”¨æˆ· yylittlecat è®¾ç½®ç™»å½•å¯†ç </span></span><br><span class="line"><span class="variable">$</span> sudo useradd <span class="literal">-G</span> fancy tommy</span><br><span class="line"><span class="variable">$</span> sudo passwd tommy <span class="comment"># ä¸ºç”¨æˆ· tommy è®¾ç½®ç™»å½•å¯†ç </span></span><br><span class="line"><span class="variable">$</span> sudo useradd <span class="literal">-G</span> fancy archie</span><br><span class="line"><span class="variable">$</span> sudo passwd archie <span class="comment"># ä¸ºç”¨æˆ· archie è®¾ç½®ç™»å½•å¯†ç </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å»ºç¼–å¤–ç”¨æˆ·ï¼Œä¸åœ¨åˆ†äº«èŒƒç•´å†…</span></span><br><span class="line"><span class="variable">$</span> sudo useradd <span class="literal">-G</span> apple apple</span><br><span class="line"><span class="variable">$</span> sudo passwd apple <span class="comment">#ä¸ºç”¨æˆ· apple è®¾ç½®ç™»å½•å¯†ç </span></span><br></pre></td></tr></table></figure><ul><li>æ–°å»ºåšå®¢çš„å·¥ä½œç›®å½•ï¼š</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> /home</span><br><span class="line"><span class="variable">$</span> sudo mkdir blog</span><br></pre></td></tr></table></figure><ul><li>ç°åœ¨ï¼Œä»»ä½•äººéƒ½å¯ä»¥è®¿é—®è¿™ä¸ªæ–°å»ºçš„ç›®å½•ï¼Œè€Œåªæœ‰ root ç”¨æˆ·æ‰æ‹¥æœ‰è¯¥ç›®å½•çš„å†™æƒé™ï¼Œæˆ‘ä»¬å¸Œæœ›è®© fancy ç»„çš„æˆå‘˜æ‹¥æœ‰è¿™ä¸ªç›®å½•çš„è¯»å†™æƒé™ï¼Œå¹¶ç¦æ­¢å…¶ä»–æ— å…³çš„ç”¨æˆ·æŸ¥çœ‹è¿™ä¸ªç›®å½•ï¼š</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> sudo chgrp fancy blog/        <span class="comment"># å°† blog ç›®å½•çš„æ‰€æœ‰æƒäº¤ç»™ fancy ç»„</span></span><br><span class="line"><span class="variable">$</span> sudo chmod g+rwx blog/        <span class="comment"># å¢åŠ  fancy ç»„å¯¹ blog ç›®å½•çš„è¯»ã€å†™ã€æ‰§è¡Œæƒé™</span></span><br><span class="line"><span class="variable">$</span> sudo chmod o<span class="literal">-rwx</span> blog/        <span class="comment"># æ’¤é”€å…¶ä»–ç”¨æˆ·å¯¹ blog ç›®å½•çš„è¯»ã€å†™ã€æ‰§è¡Œæƒé™</span></span><br><span class="line"><span class="variable">$</span> sudo chown yylittlecat blog/<span class="comment"># å°† blog ç›®å½•çš„æ‰€æœ‰è€…æ”¹ä¸º yylittlecat</span></span><br></pre></td></tr></table></figure><p>&#8195;&#8195;è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ /home ç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨å’Œä»–ä»¬çš„æƒé™æ˜¯è¿™æ ·çš„ï¼Œä¸ºäº†æ–¹ä¾¿æŸ¥çœ‹ï¼Œæˆ‘ä»¬æŠŠä¸»æœºå’Œç›®å½•ä¿¡æ¯è´´ä¸Šï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">yylittlecat</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> <span class="type">home</span>]<span class="variable">$</span> <span class="built_in">ls</span> <span class="literal">-l</span></span><br><span class="line">æ€»ç”¨é‡ <span class="number">20</span></span><br><span class="line">drwxrwx--- <span class="number">4</span> yylittlecat fancy <span class="number">4096</span> <span class="number">7</span>æœˆ  <span class="number">22</span> <span class="number">2021</span>  blog</span><br><span class="line">drwxr<span class="literal">-xr</span><span class="literal">-x</span> <span class="number">2</span> root        root  <span class="number">4096</span> <span class="number">7</span>æœˆ  <span class="number">22</span> <span class="number">2021</span>  httpbin</span><br><span class="line">drwx------ <span class="number">2</span> archie      fancy <span class="number">4096</span> <span class="number">3</span>æœˆ  <span class="number">16</span> <span class="number">17</span>:<span class="number">23</span> archie</span><br><span class="line">drwx------ <span class="number">2</span> apple       apple <span class="number">4096</span> <span class="number">3</span>æœˆ  <span class="number">16</span> <span class="number">18</span>:<span class="number">35</span> apple</span><br><span class="line">drwx------ <span class="number">2</span> tommy       fancy <span class="number">4096</span> <span class="number">2</span>æœˆ  <span class="number">21</span> <span class="number">14</span>:<span class="number">03</span> tommy</span><br><span class="line">drwx------ <span class="number">2</span> yylittlecat fancy <span class="number">4096</span> <span class="number">3</span>æœˆ  <span class="number">11</span> <span class="number">09</span>:<span class="number">43</span> yylittlecat</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;æ­¤åˆ» /home/blog ç›®å½•çš„æƒé™ï¼Œå¯¹äºæ‹¥æœ‰è€… yylittlecat å’Œå±äº fancy ç”¨æˆ·ç»„çš„æˆå‘˜éƒ½å…·å¤‡å¯è¯»å¯å†™å¯æ‰§è¡Œçš„æƒé™ï¼Œä½†æˆ‘ä»¬è®¡åˆ’äº†ä¸€ä½â€œç¼–å¤–äººå‘˜â€ apple å¯¹å§ï¼Œæˆ‘ä»¬åˆ‡æ¢åˆ° apple ï¼Œä¼šå‘ç°ä»–æ²¡æœ‰æƒé™è®¿é—®è¯¥ç›®å½•ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">apple</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> <span class="type">home</span>]<span class="variable">$</span> <span class="built_in">cd</span> blog</span><br><span class="line">bash: <span class="built_in">cd</span>: blog: æƒé™ä¸å¤Ÿ</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;æˆªæ­¢åˆ°è¿™é‡Œï¼Œå»ºç«‹å°å›¢ä½“ä½“éªŒå®Œæ¯•äº†ã€‚/home/blog/ å­˜æ”¾çš„æ˜¯æˆ‘ä»¬çš„åšå®¢å†…å®¹ï¼Œè¿™ä¸ªæ—¶å€™ä¼šå‘ç°è®¿é—®åšå®¢ 403 äº†ï¼Œå“ˆå“ˆå“ˆâ€¦403 çŠ¶æ€ç æ„ä¸ºæœåŠ¡å™¨æˆåŠŸè§£æäº†è¯·æ±‚ä½†æ˜¯å®¢æˆ·ç«¯æ²¡æœ‰è®¿é—®è¯¥èµ„æºçš„æƒé™ã€‚é‚£è¿™åˆæ˜¯æ€ä¹ˆå›äº‹å„¿å‘¢ï¼Ÿ</p><h2 id="æ–‡ä»¶å’Œç›®å½•çš„æƒé™"><a href="#æ–‡ä»¶å’Œç›®å½•çš„æƒé™" class="headerlink" title="æ–‡ä»¶å’Œç›®å½•çš„æƒé™"></a>æ–‡ä»¶å’Œç›®å½•çš„æƒé™</h2><p>&#8195;&#8195;ä¸Šé¢æˆ‘ä»¬é€šè¿‡ <code>ll</code> æˆ–è€… <code>ls -l</code> å‘½ä»¤æŸ¥çœ‹åˆ°çš„æ–‡ä»¶å±æ€§ï¼Œ(é€‰å‡ è¡Œä¸ºä¾‹)ä»å·¦è‡³å³ä¾æ¬¡æ˜¯ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶çš„æƒé™æ ‡å¿— | æ–‡ä»¶çš„é“¾æ¥ä¸ªæ•° | æ–‡ä»¶æ‰€æœ‰è€…çš„ç”¨æˆ·å | è¯¥ç”¨æˆ·æ‰€åœ¨çš„ç”¨æˆ·ç»„ | æ–‡ä»¶çš„å¤§å° | æœ€åä¸€æ¬¡è¢«ä¿®æ”¹çš„æ—¥æœŸ | ç›®å½•/æ–‡ä»¶å </span><br><span class="line">drwxrwx---     <span class="number">4</span>              yylittlecat        fancy              <span class="number">4096</span>       <span class="number">7</span>æœˆ  <span class="number">22</span> <span class="number">2021</span>         blog        </span><br><span class="line">drwxr<span class="literal">-xr</span><span class="literal">-x</span>      <span class="number">2</span>              root               root               <span class="number">4096</span>       <span class="number">7</span>æœˆ  <span class="number">22</span> <span class="number">2021</span>         httpbin     </span><br><span class="line">drwx------    <span class="number">2</span>              archie             fancy              <span class="number">4096</span>       <span class="number">3</span>æœˆ  <span class="number">16</span> <span class="number">17</span>:<span class="number">23</span>        archie      </span><br><span class="line"><span class="literal">-rwxr</span><span class="literal">-xr</span><span class="literal">-x</span>      <span class="number">1</span>              root               root               <span class="number">24323</span>      <span class="number">3</span>æœˆ  <span class="number">14</span> <span class="number">17</span>:<span class="number">23</span>        gDark.css   </span><br></pre></td></tr></table></figure><p>&#8195;&#8195;æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œæƒé™æ ‡å¿—è²Œä¼¼æ˜¯ä¸€äº›ç‰¹æ®Šçš„ç¬¦å·ï¼šdã€rã€wã€x ã€- ç­‰ç­‰ï¼Œé€šè¿‡ chmod å‘½ä»¤ä¿®æ”¹çš„ä¹Ÿæ˜¯è¿™äº›å†…å®¹ï¼Œè¿™å‡ ä¸ªç¬¦å·åˆ°åº•ä»£è¡¨ä»€ä¹ˆå‘¢ï¼Ÿè®©æˆ‘ä»¬ä¸€æ¢ç©¶ç«Ÿï¼š</p><h3 id="æƒé™"><a href="#æƒé™" class="headerlink" title="æƒé™"></a>æƒé™</h3><p>&#8195;&#8195;Linux ä¸º 3 ç§äººå‡†å¤‡äº†æƒé™â€”â€”æ–‡ä»¶æ‰€æœ‰è€… (å±ä¸»)ã€æ–‡ä»¶å±ç»„ç”¨æˆ·å’Œå…¶ä»–äººã€‚å› ä¸ºæœ‰äº†â€œå…¶ä»–äººâ€ï¼Œè¿™æ ·çš„åˆ†ç±»å°†ä¸–ç•Œä¸Šæ‰€æœ‰çš„äººéƒ½åŒ…å«è¿›æ¥äº†ã€‚ä½† root ç”¨æˆ·å…¶å®æ˜¯ä¸åº”è¯¥è¢«ç®—åœ¨â€œå…¶ä»–äººâ€é‡Œé¢çš„ã€‚root ç”¨æˆ·å¯ä»¥æŸ¥çœ‹ã€ä¿®æ”¹ã€åˆ é™¤æ‰€æœ‰äººçš„æ–‡ä»¶â€”â€”å³ä¸è¦å¿˜äº† root æ‹¥æœ‰æ§åˆ¶ä¸€å°è®¡ç®—æœºçš„å®Œæ•´æƒé™ã€‚</p><p>&#8195;&#8195;<strong>æ–‡ä»¶æ‰€æœ‰è€…</strong>é€šå¸¸æ˜¯æ–‡ä»¶çš„åˆ›å»ºè€…ï¼Œä½†è¿™ä¹Ÿä¸æ˜¯ä¸€å®šçš„ã€‚å¯ä»¥ä¸­é€”æ”¹å˜ä¸€ä¸ªæ–‡ä»¶çš„å±ä¸»ç”¨æˆ·ï¼Œè¿™å¿…é¡»ç›´æ¥ç”± root ç”¨æˆ·æ¥å®æ–½ã€‚è¿™å¥è¯æ¢ä¸€ç§è¯´æ³•æˆ–è®¸æ›´è´´åˆ‡ï¼šæ–‡ä»¶çš„åˆ›å»ºè€…è‡ªåŠ¨æˆä¸ºæ–‡ä»¶æ‰€æœ‰è€…(å±ä¸»)ï¼Œæ–‡ä»¶çš„æ‰€æœ‰æƒå¯ä»¥è½¬è®©ï¼Œè½¬è®©â€œæ‰‹ç»­â€å¿…é¡»ä½¿ç”¨ root æƒé™åŠç†ã€‚</p><p>&#8195;&#8195;å¯ä»¥(ä¹Ÿå¿…é¡»)æŠŠæ–‡ä»¶äº¤ç»™ä¸€ä¸ªç»„ï¼Œè¿™ä¸ªç»„å°±æ˜¯<strong>æ–‡ä»¶çš„å±ç»„</strong>ã€‚æ–‡ä»¶å±ç»„ä¸­çš„ç”¨æˆ·æŒ‰ç…§è®¾ç½®å¯¹è¯¥æ–‡ä»¶äº«æœ‰ç‰¹å®šçš„æƒé™ã€‚é€šå¸¸æ¥è¯´ï¼Œå½“æŸä¸ªç”¨æˆ·(å¦‚ tommy)å»ºç«‹ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œè¿™ä¸ªæ–‡ä»¶çš„å±ä¸»å°±æ˜¯ tommyï¼Œæ–‡ä»¶çš„å±ç»„æ˜¯åªåŒ…å«ä¸€ä¸ªç”¨æˆ· tommy çš„ tommy ç»„ã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æ–‡ä»¶çš„å±ç»„æ˜¯ä¸€ä¸ªä¸åŒ…æ‹¬æ–‡ä»¶æ‰€æœ‰è€…çš„ç»„ï¼Œåœ¨æ–‡ä»¶æ‰€æœ‰è€…æ‰§è¡Œæ–‡ä»¶æ“ä½œæ—¶ï¼Œç³»ç»Ÿåªå…³å¿ƒå±ä¸»æƒé™ï¼Œè€Œç»„æƒé™å¯¹å±ä¸»æ˜¯æ²¡æœ‰å½±å“çš„ã€‚</p><p>&#8195;&#8195;æœ€åï¼Œâ€œ<strong>å…¶ä»–äºº</strong>â€ å°±æ˜¯ä¸åŒ…æ‹¬å‰ä¸¤ç±»äººå’Œrootç”¨æˆ·åœ¨å†…çš„â€œå…¶ä»–â€ç”¨æˆ·ã€‚é€šå¸¸æ¥è¯´ï¼Œâ€œå…¶ä»–äººâ€æ€»æ˜¯äº«æœ‰æœ€ä½çš„æƒé™(æˆ–è€…å¹²è„†æ²¡æœ‰æƒé™)ã€‚</p><p>&#8195;&#8195;é‚£éƒ½éœ€è¦è®¾ç½®å“ªäº›æƒé™å‘¢ï¼Ÿ</p><p>&#8195;&#8195;å¯ä»¥èµ‹äºˆæŸç±»ç”¨æˆ·å¯¹æ–‡ä»¶å’Œç›®å½•äº«æœ‰ 3 ç§æƒé™ï¼šå¯è¯»(read)æƒé™ï¼Œå¯å†™(write)æƒé™ï¼Œå¯æ‰§è¡Œ(execute)æƒé™ã€‚å¯¹äºæ–‡ä»¶è€Œè¨€ï¼Œæ‹¥æœ‰è¯»å–æƒé™æ„å‘³ç€å¯ä»¥æ‰“å¼€å¹¶æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹ï¼Œå†™å…¥ä½æ§åˆ¶ç€å¯¹æ–‡ä»¶çš„ä¿®æ”¹æƒé™ã€‚è€Œæ˜¯å¦èƒ½å¤Ÿåˆ é™¤å’Œé‡å‘½åä¸€ä¸ªæ–‡ä»¶åˆ™æ˜¯ç”±å…¶çˆ¶ç›®å½•çš„æƒé™è®¾ç½®æ‰€æ§åˆ¶çš„ã€‚</p><p>&#8195;&#8195;è¦è®©ä¸€ä¸ªæ–‡ä»¶å¯æ‰§è¡Œï¼Œå¿…é¡»è®¾ç½®å…¶æ‰§è¡Œæƒé™ã€‚å¯æ‰§è¡Œæ–‡ä»¶æœ‰ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯å¯ä»¥ç›´æ¥ç”± CPU æ‰§è¡Œçš„äºŒè¿›åˆ¶ä»£ç ï¼›å¦ä¸€ç±»æ˜¯ Shell è„šæœ¬ç¨‹åºï¼Œä¾‹å¦‚æˆ‘ä»¬å¸¸ç”¨çš„å‘½ä»¤ã€‚</p><p>&#8195;&#8195;å¯¹ç›®å½•è€Œè¨€ï¼Œæ‰€è°“çš„å¯æ‰§è¡Œæƒé™å®é™…æ§åˆ¶äº†ç”¨æˆ·èƒ½å¦è¿›å…¥è¯¥ç›®å½•ï¼›è€Œå¯è¯»æƒé™åˆ™è´Ÿè´£ç¡®å®šèƒ½å¦åˆ—å‡ºè¯¥ç›®å½•ä¸­çš„å†…å®¹ï¼›å¯å†™æƒé™æ§åˆ¶ç€åœ¨ç›®å½•ä¸­åˆ›å»ºã€åˆ é™¤å’Œé‡å‘½åæ–‡ä»¶ã€‚å› æ­¤ç›®å½•çš„å¯æ‰§è¡Œæƒé™æ˜¯å…¶æœ€åŸºæœ¬çš„æƒé™ï¼Œæ¢å¥è¯è¯´æ˜¯æƒ³è®¿é—®ä¸€ä¸ªç›®å½•ä»¥åŠé‡Œé¢çš„æ–‡ä»¶ï¼Œè‡³å°‘è¦ç»™åˆ°å¯è¯»å¯æ‰§è¡Œä¸¤ä¸ªæƒé™ï¼Œåªæœ‰å¯è¯»ï¼Œæˆ‘ä»¬è¿˜æ˜¯è®¿é—®ä¸äº†çš„ã€‚</p><p>&#8195;&#8195;<strong>FYIï¼šåªæœ‰æ–‡ä»¶çš„æ‰€æœ‰è€…å’Œ root ç”¨æˆ·æ‰æœ‰æƒä¿®æ”¹æ–‡ä»¶çš„æƒé™ã€‚</strong></p><p>&#8195;&#8195;<strong>drwxrwxrwx</strong> è¿™ä¸ªæƒé™æ ‡å¿—ä¸€å…±10ä½ï¼Œ<strong>ç¬¬ 1 ä½</strong> ä»£è¡¨æ–‡ä»¶ç±»å‹ï¼Œå¸¸ç”¨æœ‰ä¸¤ä¸ªæ•°å€¼ï¼š<code>d</code> å’Œ <code>-</code>ï¼Œ<code>d</code> ä»£è¡¨ç›®å½•ï¼Œ<code>-</code> ä»£è¡¨éç›®å½•ï¼Œå½“ç„¶è¿˜æœ‰å…¶ä»–çš„ï¼ˆã€bã€cï¼‰ã€‚åé¢ 9 ä½å¯ä»¥æ‹†åˆ†ä¸º 3 ç»„æ¥çœ‹ï¼Œåˆ†åˆ«å¯¹åº”ä¸åŒç”¨æˆ·ï¼š<strong>2-4</strong> ä½ä»£è¡¨æ‰€æœ‰è€… user çš„æƒé™è¯´æ˜ï¼Œ<strong>5-7</strong> ä½ä»£è¡¨ç»„ç¾¤ group çš„æƒé™è¯´æ˜ï¼Œ<strong>8-10</strong> ä½ä»£è¡¨å…¶ä»–äºº other çš„æƒé™è¯´æ˜ã€‚<code>r</code> ä»£è¡¨å¯è¯»(read)æƒé™ï¼Œ<code>w</code> ä»£è¡¨å¯å†™(write)æƒé™ï¼Œ<code>x</code> ä»£è¡¨å¯æ‰§è¡Œ(execute)æƒé™ï¼Œå 9 ä½ä¸­ <code>-</code> è¡¨ç¤ºä¸å…·å¤‡å¯¹åº”çš„æƒé™ã€‚<code>drwxrwxrwx</code> è¡¨ç¤ºæ‰€æœ‰ç”¨æˆ·éƒ½å¯¹è¿™ä¸ªç›®å½•æœ‰å¯è¯»å¯å†™å¯æ‰§è¡Œæƒé™ã€‚</p><p>Linux ä¸­çš„æ–‡ä»¶ç±»å‹ï¼š</p><table><thead><tr><th>æ–‡ä»¶ç±»å‹</th><th align="center">ç¬¦å·</th><th>æ–‡ä»¶ç±»å‹</th><th align="center">ç¬¦å·</th></tr></thead><tbody><tr><td>æ™®é€šæ–‡ä»¶</td><td align="center">-</td><td>æœ¬åœ°åŸŸå¥—æ¥å£</td><td align="center">s</td></tr><tr><td>ç›®å½•</td><td align="center">d</td><td>æœ‰åç®¡é“</td><td align="center">p</td></tr><tr><td>ç¬¦å·è®¾å¤‡æ–‡ä»¶</td><td align="center">c</td><td>ç¬¦å·é“¾æ¥</td><td align="center">l</td></tr><tr><td>å—è®¾å¤‡æ–‡ä»¶</td><td align="center">b</td><td></td><td align="center"></td></tr></tbody></table><h3 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h3><p>è¯´å›ä¿®æ”¹æƒé™çš„å‘½ä»¤ï¼Œä¸å¥½è®°çš„è¯ï¼Œç¬”è€…è§‰å¾—è®°è‹±æ–‡ç¼©å†™æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼š</p><blockquote><p>chmod - change file mode bits</p></blockquote><h4 id="ä½¿ç”¨å­—æ¯ä¿®æ”¹æƒé™ï¼š"><a href="#ä½¿ç”¨å­—æ¯ä¿®æ”¹æƒé™ï¼š" class="headerlink" title="ä½¿ç”¨å­—æ¯ä¿®æ”¹æƒé™ï¼š"></a>ä½¿ç”¨å­—æ¯ä¿®æ”¹æƒé™ï¼š</h4><p>u ä»£è¡¨æ‰€æœ‰è€…ï¼ˆuserï¼‰<br>g ä»£è¡¨æ‰€æœ‰è€…æ‰€åœ¨çš„ç»„ç¾¤ï¼ˆgroupï¼‰<br>o ä»£è¡¨å…¶ä»–äººï¼Œä½†ä¸æ˜¯ u å’Œ g ï¼ˆotherï¼‰<br>a ä»£è¡¨å…¨éƒ¨çš„äººï¼Œä¹Ÿå°±æ˜¯åŒ…æ‹¬ uã€g å’Œ o</p><p>&#8195;&#8195;æ‰€ä»¥ chmod å‚æ•°çš„ç®€å•æ‹¼æ¥æ–¹å¼å°±æ˜¯ï¼Œä¿®æ”¹è°çš„æƒé™å°±ä½¿ç”¨å¯¹åº”ä½ç½®çš„å­—æ¯ï¼Œæˆäºˆæƒé™å°±æ˜¯ +ï¼Œåˆ é™¤æƒé™å°±æ˜¯ - ï¼Œç›´æ¥è®¾ç½®æƒé™ç”¨ =ï¼Œåé¢è·Ÿä¸Šæƒ³ä¿®æ”¹çš„æƒé™ã€è¦æ“ä½œçš„ç›®å½•ã€‚</p><p>ä¸¾ä¾‹ - ç»™å…¶ä»–äºº(other)æˆäºˆå†™ /home/apple/test è¿™ä¸ªæ–‡ä»¶çš„æƒé™ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> sudo chmod o+w /home/apple/test</span><br></pre></td></tr></table></figure><p>ä¸¾ä¾‹ - åˆ é™¤ç»„ç¾¤(group)å’Œå…¶ä»–äºº(other)å¯¹ /home/apple/test è¿™ä¸ªæ–‡ä»¶çš„è¯»å’Œå†™çš„æƒé™ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> sudo chmod go<span class="literal">-rw</span> /home/apple/test</span><br></pre></td></tr></table></figure><p>ä¸¾ä¾‹ - ç»™æ‰€æœ‰è€…ï¼ˆuserï¼‰ã€ç”¨æˆ·ç»„ï¼ˆgroupï¼‰è®¾ç½®è¯»å†™æƒé™ï¼Œå…¶ä»–äººï¼ˆotherï¼‰åªè¯»ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> sudo chmod ug=rw,o=<span class="built_in">r</span> /home/apple/test</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨æ•°å­—ä¿®æ”¹æƒé™ï¼š"><a href="#ä½¿ç”¨æ•°å­—ä¿®æ”¹æƒé™ï¼š" class="headerlink" title="ä½¿ç”¨æ•°å­—ä¿®æ”¹æƒé™ï¼š"></a>ä½¿ç”¨æ•°å­—ä¿®æ”¹æƒé™ï¼š</h4><p>&#8195;&#8195;rã€wã€x æœ‰å¯¹åº”çš„æ•°å­—ï¼šr - 4ï¼Œw - 2ï¼Œx - 1ã€‚é‚£è¿™äº›æ•°å­—æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿrwx åœ¨è®¡ç®—ä¸­å®é™…ä¸Šå ç”¨äº† 3 ä½ï¼Œå¯¹äºä¸€ä¸ªæƒé™åªæœ‰ 1 å’Œ 0 ï¼Œä¹Ÿå°±æ˜¯æœ‰æ²¡æœ‰çš„åŒºåˆ«ï¼Œå¯¹åº”åˆ°äºŒè¿›åˆ¶ä¸Šï¼Œ3 ä½äºŒè¿›åˆ¶æ•°å¯¹åº” 1 ä½å…«è¿›åˆ¶æ•°ï¼Œå› æ­¤å°±å¯ä»¥ç”¨ä¸€ä¸ªå…«è¿›åˆ¶æ•°å­—è¡¨ç¤ºä¸€ç»„æƒé™ã€‚å‰é¢è¯´äº†æƒé™æ ‡å¿—åä½ä¸­çš„åä¹ä½åˆ†ä¸ºä¸‰ç»„ï¼Œç”¨æ•°å­—ä¿®æ”¹æƒé™æ—¶ä¹Ÿæ˜¯å¯¹åº”ä¸‰ç»„ï¼Œæ¯ä¸‰ä¸ªä¸€ç»„æŠŠæƒ³ä¿®æ”¹çš„æƒé™æ•°å­—åŠ èµ·æ¥ï¼Œå¾—åˆ°ä¸‰ä½æ•°çš„ä¸€ä¸ªæ•°å­—ã€‚</p><p>ä¸¾ä¾‹ - é’ˆå¯¹ /home/blog/www ç›®å½•ï¼Œç»™æ‰€æœ‰äººæˆäºˆå¯è¯»å¯å†™å¯æ‰§è¡Œçš„æƒé™ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> sudo chmod  <span class="literal">-R</span> <span class="number">777</span> /home/blog/www</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;æŒ‰ç…§è§„åˆ™ï¼šuser çš„ä¸‰ä¸ªåŠ èµ·æ¥ 4+2+1=7ï¼Œgroup çš„ä¸‰ä¸ªåŠ èµ·æ¥ 4+2+1=7ï¼Œother çš„ä¸‰ä¸ªåŠ èµ·æ¥ 4+2+1=7ï¼Œ=&gt;777ã€‚å¯¹åº”çš„ï¼š5=4+1ï¼Œè¡¨ç¤ºæ‹¥æœ‰å¯è¯»å¯æ‰§è¡Œæƒé™ï¼Œä½†æ˜¯æ²¡æœ‰å†™æƒé™ï¼›0 ä»£è¡¨æ²¡æœ‰ä»»ä½•æƒé™ã€‚æƒ³è®°çš„è¯ï¼Œä¹Ÿå¯ä»¥ç®—å‡ ä¸ªå¸¸ç”¨çš„ï¼š<br><code>-rw-------</code> (600) åªæœ‰æ‰€æœ‰è€…æ‰æœ‰è¯»å’Œå†™çš„æƒé™<br><code>-rw-r--r--</code> (644) åªæœ‰æ‰€æœ‰è€…æ‰æœ‰è¯»å’Œå†™çš„æƒé™ï¼Œç»„ç¾¤å’Œå…¶ä»–äººåªæœ‰è¯»çš„æƒé™<br><code>-rwx------</code> (700) åªæœ‰æ‰€æœ‰è€…æ‰æœ‰è¯»ï¼Œå†™ï¼Œæ‰§è¡Œçš„æƒé™<br><code>-rwxr-xr-x</code> (755) åªæœ‰æ‰€æœ‰è€…æ‰æœ‰è¯»ï¼Œå†™ï¼Œæ‰§è¡Œçš„æƒé™ï¼Œç»„ç¾¤å’Œå…¶ä»–äººåªæœ‰è¯»å’Œæ‰§è¡Œçš„æƒé™<br><code>-rwxâ€“-x--x</code> (711) åªæœ‰æ‰€æœ‰è€…æ‰æœ‰è¯»ï¼Œå†™ï¼Œæ‰§è¡Œçš„æƒé™ï¼Œç»„ç¾¤å’Œå…¶ä»–äººåªæœ‰æ‰§è¡Œçš„æƒé™<br><code>-rw-rw-rw-</code> (666) æ¯ä¸ªäººéƒ½æœ‰è¯»å†™çš„æƒé™</p><table><thead><tr><th align="center">å…«è¿›åˆ¶</th><th align="center">äºŒè¿›åˆ¶</th><th align="center">æƒé™</th><th align="center">å…«è¿›åˆ¶</th><th align="center">äºŒè¿›åˆ¶</th><th align="center">æƒé™</th></tr></thead><tbody><tr><td align="center">0</td><td align="center">000</td><td align="center"><code>---</code></td><td align="center">4</td><td align="center">100</td><td align="center"><code>r--</code></td></tr><tr><td align="center">1</td><td align="center">001</td><td align="center"><code>--x</code></td><td align="center">5</td><td align="center">101</td><td align="center"><code>r-x</code></td></tr><tr><td align="center">2</td><td align="center">010</td><td align="center"><code>-w-</code></td><td align="center">6</td><td align="center">110</td><td align="center"><code>rw-</code></td></tr><tr><td align="center">3</td><td align="center">011</td><td align="center"><code>-wx</code></td><td align="center">7</td><td align="center">111</td><td align="center"><code>rwx</code></td></tr></tbody></table><p>è¿™ä¸ªå¥½åƒä¹Ÿä¸ç”¨æ­»è®°ç¡¬èƒŒï¼Œä¼š 8 ä»¥å†…çš„åŠ å‡æ³•æ˜¯ä¸æ˜¯å°±å¯ä»¥äº†~ğŸ˜‚</p><h3 id="chown"><a href="#chown" class="headerlink" title="chown"></a>chown</h3><blockquote><p>chown - change file owner and group</p></blockquote><p>ç”¨äºè®¾ç½®æ–‡ä»¶æ‰€æœ‰è€…å’Œæ–‡ä»¶å…³è”çš„ç»„ï¼Œéœ€è¦ root æƒé™ã€‚</p><h3 id="chgrp"><a href="#chgrp" class="headerlink" title="chgrp"></a>chgrp</h3><blockquote><p>chgrp - change group ownership</p></blockquote><p>ç”¨äºå˜æ›´æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç¾¤ç»„ï¼Œä¸ chown å‘½ä»¤ä¸åŒï¼Œchgrp å…è®¸æ™®é€šç”¨æˆ·æ”¹å˜æ–‡ä»¶æ‰€å±çš„ç»„ï¼Œåªè¦è¯¥ç”¨æˆ·æ˜¯è¯¥ç»„çš„ä¸€å‘˜ã€‚</p><p>æ›´å¤šçš„ä½¿ç”¨æ–¹å¼åœ¨å®è·µä¸­è¿›è¡Œå§~~</p><h3 id="R"><a href="#R" class="headerlink" title="-R"></a>-R</h3><blockquote><p> -R  Change the user ID and/or the group ID for the file hierarchies rooted in the files instead of just the files themselves.</p></blockquote><p>è¿™ä¸‰ä¸ªå‘½ä»¤å¸¸ç”¨çš„ä¸€ä¸ªé€‰é¡¹æ˜¯ <code>-R</code>ï¼Œæ³¨æ„è¿™é‡Œæ˜¯å¤§å†™ã€‚åŠ ä¸Šè¿™ä¸ªé€‰é¡¹ä¼šå¾ªç¯æŠŠè¯¥ç›®å½•ä¸‹çš„å­ç›®å½•ã€å­æ–‡ä»¶çš„æƒé™ã€æ‰€æœ‰è€…ç­‰ç­‰éƒ½ä¸€èµ·è¿›è¡Œä¿®æ”¹ï¼Œä¸ç„¶æ”¹çš„åªæ˜¯çˆ¶ç›®å½•ï¼Œç­‰æˆ‘ä»¬éœ€è¦è®¿é—®å­ç›®å½•çš„æ—¶å€™å°±å‘ç°æœ‰é—®é¢˜å•¦â€¦</p><h2 id="æ“ä½œæ–‡ä»¶å’Œç›®å½•"><a href="#æ“ä½œæ–‡ä»¶å’Œç›®å½•" class="headerlink" title="æ“ä½œæ–‡ä»¶å’Œç›®å½•"></a>æ“ä½œæ–‡ä»¶å’Œç›®å½•</h2><p>å­¦ä¼šå»ºç«‹æ–‡ä»¶å’Œç›®å½•ï¼Œæ˜¯ Linux ç³»ç»Ÿç®¡ç†çš„ç¬¬ä¸€æ­¥ã€‚è™½ç„¶æˆ‘æ²¡æœ‰å…ˆå­¦è¿™é‡Œï¼Œå“ˆå“ˆâ€¦</p><h3 id="å»ºç«‹ç›®å½•-mkdir"><a href="#å»ºç«‹ç›®å½•-mkdir" class="headerlink" title="å»ºç«‹ç›®å½• - mkdir"></a>å»ºç«‹ç›®å½• - mkdir</h3><blockquote><p>mkdir - make directories</p><p>å¯ä»¥å»ºç«‹ä¸€ä¸ªæˆ–å¤šä¸ªç›®å½•ã€‚</p><p>-m, â€“mode=MODE<br>    set file mode (as in chmod), not a=rwx - umask</p><p>-p, â€“parents<br>    no error if existing, make parent directories as needed</p></blockquote><p>ä¸¾ä¾‹ - åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹æ–°å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹ documentã€pictureï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> ~ <span class="comment"># è¿›å…¥ç”¨æˆ·ä¸»ç›®å½•</span></span><br><span class="line"><span class="variable">$</span> mkdir document picture <span class="comment"># æ–°å»ºä¸¤ä¸ªç›®å½•</span></span><br></pre></td></tr></table></figure><p>ä¸¾ä¾‹ - ç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„æ¥æ–°å»ºç›®å½•ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> mkdir ~/picture/temp <span class="comment"># åœ¨ä¸»ç›®å½•ä¸‹æ–°å»ºåä¸ºtempçš„ç›®å½•</span></span><br></pre></td></tr></table></figure><p>ç”±äºä¸»ç›®å½•ä¸‹ picture å·²ç»å­˜åœ¨ï¼Œå› æ­¤è¿™æ¡å‘½ä»¤æ˜¯åˆæ³•çš„ã€‚ä½†æ˜¯å½“ç”¨æˆ·è¯•å›¾è¿è¡Œä¸‹é¢è¿™æ¡å‘½ä»¤æ—¶ï¼Œmkdir å°†æç¤ºé”™è¯¯ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> mkdir ~/test/temp</span><br><span class="line">mkdir: æ— æ³•åˆ›å»ºç›®å½•<span class="string">&quot;/home/tommy/test/temp&quot;</span>: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯å› ä¸ºå½“å‰åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹å¹¶æ²¡æœ‰ test è¿™ä¸ªç›®å½•,è‡ªç„¶ä¹Ÿæ— æ³•åœ¨ test ä¸‹åˆ›å»º temp ç›®å½•äº†ã€‚ä¸ºæ­¤ mkdir æä¾›äº† <code>-p</code> é€‰é¡¹ï¼Œç”¨äºå®Œæ•´åœ°åˆ›å»ºä¸€ä¸ªå­ç›®å½•ç»“æ„ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> mkdir <span class="literal">-p</span> ~/test/temp</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œmkdir ä¼šé¦–å…ˆåˆ›å»º test ç›®å½•ï¼Œç„¶ååˆ›å»º tempï¼Œåœ¨éœ€è¦åˆ›å»ºä¸€ä¸ªå®Œæ•´ç›®å½•ç»“æ„çš„æ—¶å€™ï¼Œè¿™ä¸ªé€‰é¡¹æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚</p><p>&#8195;&#8195;å¦å¤–ä¸€ä¸ªå¸¸ç”¨çš„é€‰é¡¹æ˜¯ <code>-m</code> ï¼Œåœ¨æ–°å»ºç›®å½•çš„åŒæ—¶æŒ‡å®šå¯¹åº”çš„æƒé™ï¼š<code>mkdir -p -m 700 ~/test/tempx</code>ï¼Œåˆ°è¿™é‡Œä¸ç¦è¦é—®äº†ï¼Œä¸ç‰¹æ„æŒ‡å®šçš„è¯é»˜è®¤æƒé™æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿè¿™å°±æ¶‰åŠåˆ°å¦ä¸€ä¸ªå‘½ä»¤ï¼šumaskã€‚</p><h3 id="æƒé™æ©ç -umask"><a href="#æƒé™æ©ç -umask" class="headerlink" title="æƒé™æ©ç  - umask"></a>æƒé™æ©ç  - umask</h3><blockquote><p>umask (1) - bash built-in commands, see bash(1)?<br>æŒ‡å®šåœ¨å»ºç«‹æ–‡ä»¶æ—¶é¢„è®¾çš„æƒé™æ©ç ã€‚</p></blockquote><p>&#8195;&#8195;umask å¯ç”¨æ¥è®¾å®š[æƒé™æ©ç ]ã€‚[æƒé™æ©ç ]æ˜¯ç”±3ä¸ªå…«è¿›åˆ¶çš„æ•°å­—æ‰€ç»„æˆï¼Œå°†â€æ»¡çº§(a=rwx)(777)â€çš„æƒé™å‡æ‰æƒé™æ©ç åï¼Œå³å¯äº§ç”Ÿå»ºç«‹æ–‡ä»¶æ—¶é¢„è®¾çš„æƒé™ã€‚ä½¿ç”¨ <code>umask</code> æŸ¥çœ‹8è¿›åˆ¶æ•°å­—æˆ–è€… <code>umask -S</code> æŸ¥çœ‹ä»¥ç¬¦å·å½¢å¼è¡¨ç¤ºçš„æƒé™æ©ç ï¼Œå¦‚æœåé¢è·Ÿä¸Šå‚æ•°ï¼Œé‚£æ„å‘³ç€é‡æ–°æŒ‡å®šæƒé™æ©ç æˆ–è®¾å®šé»˜è®¤æƒé™ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> umask</span><br><span class="line"><span class="number">0022</span></span><br><span class="line"><span class="variable">$</span> umask <span class="literal">-S</span></span><br><span class="line">u=rwx,g=rx,o=rx</span><br><span class="line"><span class="variable">$</span> umask <span class="literal">-S</span> g=rwx  <span class="comment"># ä»¥ç¬¦å·ç±»å‹è®¾ç½®é»˜è®¤æƒé™</span></span><br><span class="line">u=rwx,g=rwx,o=rx  <span class="comment"># ä¿®æ”¹ä»¥åï¼Œæ–°ç›®å½•çš„é»˜è®¤æƒé™å°±æ˜¯ drwxrwxr-x äº†</span></span><br><span class="line"><span class="variable">$</span> umask <span class="number">0002</span>      <span class="comment"># ä»¥æ•°å­—å½¢å¼æ¢å¤æ©ç </span></span><br></pre></td></tr></table></figure><p>&#8195;&#8195;æ‰€ä»¥æˆ‘ç”¨çš„è¿™å°è™šæ‹Ÿæœºä¸Šï¼Œç›®å½•çš„é»˜è®¤æƒé™å°±æ˜¯ <code>drwxr-xr-x</code> ï¼Œä¹Ÿå°±æ˜¯ <code>777-022=755</code> ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">yylittlecat</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> <span class="type">test</span>]<span class="variable">$</span> ll</span><br><span class="line">æ€»ç”¨é‡ <span class="number">20</span></span><br><span class="line">drwxr<span class="literal">-xr</span><span class="literal">-x</span> <span class="number">2</span> yylittlecat fancy <span class="number">4096</span> <span class="number">3</span>æœˆ  <span class="number">22</span> <span class="number">17</span>:<span class="number">59</span> temp    <span class="comment"># ä½¿ç”¨ mkdir -p ~/test/temp åˆ›å»º</span></span><br><span class="line">drwx------ <span class="number">2</span> yylittlecat fancy <span class="number">4096</span> <span class="number">3</span>æœˆ  <span class="number">22</span> <span class="number">18</span>:<span class="number">01</span> tempx   <span class="comment"># ä½¿ç”¨ mkdir -p -m 700 ~/test/tempx åˆ›å»º</span></span><br></pre></td></tr></table></figure><h3 id="å»ºç«‹ç©ºæ–‡ä»¶-touch"><a href="#å»ºç«‹ç©ºæ–‡ä»¶-touch" class="headerlink" title="å»ºç«‹ç©ºæ–‡ä»¶ - touch"></a>å»ºç«‹ç©ºæ–‡ä»¶ - touch</h3><blockquote><p>touch â€“ change file access and modification times</p><p>è®¾ç½®æ–‡ä»¶çš„è®¿é—®å’Œä¿®æ”¹æ—¶é—´ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨çš„è¯ï¼Œä¼šä½¿ç”¨é»˜è®¤æƒé™åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶ã€‚</p></blockquote><p>ä¸¾ä¾‹ - åœ¨å½“å‰ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º test çš„æ–‡ä»¶ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> touch test</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;ç”¨ touch å‘½ä»¤å»ºç«‹çš„æ–‡ä»¶æ˜¯ç©ºæ–‡ä»¶(ä¹Ÿå°±æ˜¯ä¸åŒ…å«ä»»ä½•å†…å®¹çš„æ–‡ä»¶)ã€‚ç©ºæ–‡ä»¶å¯¹å»ºç«‹æŸäº›ç‰¹å®šçš„å®éªŒç¯å¢ƒæ˜¯æœ‰ç”¨ã€‚å¦å¤–ï¼Œå½“æŸäº›åº”ç”¨ç¨‹åºå› ä¸ºç¼ºå°‘æ–‡ä»¶è€Œæ— æ³•å¯åŠ¨ï¼Œè€Œè¿™ä¸ªæ–‡ä»¶å®é™…ä¸Šå¹¶ä¸é‚£ä¹ˆé‡è¦æ—¶ï¼Œå¯ä»¥å»ºç«‹ä¸€ä¸ªç©ºæ–‡ä»¶æš‚æ—¶â€œéª—è¿‡â€è¿™ä¸ªç¨‹åºã€‚<br>&#8195;&#8195;touch å‘½ä»¤çš„å¦ä¸€ä¸ªç”¨é€”æ˜¯æ›´æ–°ä¸€ä¸ªæ–‡ä»¶çš„å»ºç«‹æ—¥æœŸå’Œæ—¶é—´ã€‚ä¾‹å¦‚ï¼Œå¯¹äº hello è¿™ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨ <code>ls-l</code> å‘½ä»¤æ˜¾ç¤ºè¿™ä¸ªæ–‡ä»¶çš„å»ºç«‹æ—¶é—´ä¸º2022å¹´2æœˆ18æ—¥çš„10ç‚¹30åˆ†ï¼Œå¹¶ä¸”æ–‡ä»¶æ˜¯æœ‰å†…å®¹çš„ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">ls</span> <span class="literal">-l</span></span><br><span class="line"><span class="literal">-rwxrwxrwx</span>  <span class="number">1</span> yylittlecat fancy    <span class="number">6</span> <span class="number">2</span>æœˆ  <span class="number">18</span> <span class="number">10</span>:<span class="number">30</span> hello</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> hello</span><br><span class="line">Hello, World!</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ touch å‘½ä»¤æ›´æ–°åï¼Œå»ºç«‹æ—¶é—´å˜æˆäº†2022å¹´3æœˆ15æ—¥çš„15ç‚¹18åˆ†ï¼Œä½†å†…å®¹å¹¶æ²¡æœ‰å˜åŒ–ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> touch hello</span><br><span class="line"><span class="variable">$</span> <span class="built_in">ls</span> <span class="literal">-l</span></span><br><span class="line"><span class="literal">-rwxrwxrwx</span>  <span class="number">1</span> yylittlecat fancy   <span class="number">14</span> <span class="number">3</span>æœˆ  <span class="number">15</span> <span class="number">15</span>:<span class="number">18</span> hello</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> hello</span><br><span class="line">Hello, World!</span><br></pre></td></tr></table></figure><p>touch å‘½ä»¤çš„è¿™ä¸ªåŠŸèƒ½åœ¨è‡ªåŠ¨å¤‡ä»½å’Œæ•´ç†æ–‡ä»¶æ—¶éå¸¸æœ‰ç”¨ï¼Œè¿™ä½¿å¾—ç¨‹åºå¯ä»¥å†³å®šå“ªäº›æ–‡ä»¶å·²ç»è¢«å¤‡ä»½æˆ–æ•´ç†è¿‡äº†ã€‚</p><h3 id="ç§»åŠ¨å’Œé‡å‘½å-mv"><a href="#ç§»åŠ¨å’Œé‡å‘½å-mv" class="headerlink" title="ç§»åŠ¨å’Œé‡å‘½å - mv"></a>ç§»åŠ¨å’Œé‡å‘½å - mv</h3><blockquote><p>mv - move (rename) files</p><p>å¯¹æ–‡ä»¶æˆ–ç›®å½•è¿›è¡Œç§»åŠ¨ã€é‡å‘½åã€‚</p></blockquote><p>æµ‹è¯•ç›®å½•ï¼šç”¨æˆ·ä¸»ç›®å½• ~ å’Œä¸»ç›®å½•ä¸‹çš„ test/ ç›®å½•ã€‚<br>å¯ä»¥ç§»åŠ¨æ–‡ä»¶æˆ–è€…ç›®å½•ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">mv</span> hello test/</span><br><span class="line"><span class="variable">$</span> <span class="built_in">mv</span> Photo/ test/</span><br></pre></td></tr></table></figure><p>mv å‘½ä»¤åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸ä¼šæ˜¾ç¤ºä»»ä½•æç¤ºä¿¡æ¯ï¼Œé‚£å¦‚æœç›®å½•ä¸‹æœ‰ä¸€ä¸ªåŒåæ–‡ä»¶ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿåšä¸€ä¸ªå°æµ‹è¯•ï¼š<br>(1) é¦–å…ˆåœ¨ä¸»ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º hello çš„æ–‡ä»¶ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> ~</span><br><span class="line"><span class="variable">$</span> <span class="built_in">echo</span> <span class="string">&quot;Hello in ~, named hello.&quot;</span> &gt; hello</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> hello</span><br><span class="line">Hello <span class="keyword">in</span> ~, named hello.</span><br></pre></td></tr></table></figure><p>(2) åœ¨ä¸»ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª test ç›®å½•ï¼Œç„¶ååœ¨ test/ ä¸‹åŒæ ·å»ºç«‹ä¸€ä¸ªåä¸º hello çš„æ–‡ä»¶ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> mkdir test</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> test/</span><br><span class="line"><span class="variable">$</span> <span class="built_in">echo</span> <span class="string">&quot;Hello in ~/test/, named hello.&quot;</span> &gt; hello</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> hello</span><br><span class="line">Hello <span class="keyword">in</span> ~/test/, named hello.</span><br></pre></td></tr></table></figure><p>(3) æˆ‘ä»¬åœ¨ä¸¤ä¸ª hello æ–‡ä»¶çš„å†…å®¹ä¸Šåšäº†åŒºåˆ†ï¼Œç°åœ¨æŠŠä¸»ç›®å½•ä¸‹çš„ hello ç§»åŠ¨åˆ° test/ ç›®å½•ä¸‹ï¼Œå¹¶ä¸”æŸ¥çœ‹ test/hello çš„å†…å®¹ï¼Œä¼šå‘ç°æ–‡ä»¶ä¸­åŸæœ¬çš„å†…å®¹å·²ç»è¢«è¦†ç›–äº†ï¼Œä¹Ÿå°±æ˜¯ mv æŠŠ test/ ç›®å½•ä¸‹çš„åŒåæ–‡ä»¶æ›¿æ¢äº†ï¼Œä½†å´æ²¡æœ‰ç»™å‡ºä»»ä½•è­¦å‘Šï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> ..</span><br><span class="line"><span class="variable">$</span> <span class="built_in">mv</span> hello test/</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> test/</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> hello</span><br><span class="line">Hello <span class="keyword">in</span> ~, named hello.</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;è¿™æ ·æœ‰æ²¡æœ‰é—®é¢˜å‘¢ï¼Ÿå¯èƒ½æœ‰ã€‚ç”¨æˆ·å¯èƒ½ä¸ç»æ„é—´å°±æŠŠä¸€ä¸ªé‡è¦æ–‡ä»¶ç»™åˆ é™¤äº†ã€‚ä¸ºæ­¤ mv æä¾›äº†ä¸€ä¸ª <code>-i</code> é€‰é¡¹ç”¨äºå‘ç°è¿™æ ·çš„æƒ…å†µï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">mv</span> <span class="literal">-i</span> hello test/</span><br><span class="line"><span class="built_in">mv</span>: æ˜¯å¦è¦†ç›–<span class="string">&quot;test/hello&quot;</span>ï¼Ÿ</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å›ç­” y è¡¨ç¤ºè¦†ç›–ï¼Œå›ç­” n è¡¨ç¤ºè·³è¿‡è¿™ä¸ªæ–‡ä»¶ï¼ˆä¿æŒåŸæ ·ä¸åŠ¨ï¼‰ã€‚<br>&#8195;&#8195;å¦ä¸€ä¸ªæ¯”è¾ƒæœ‰ç”¨çš„é€‰é¡¹æ˜¯ <code>-b</code>ã€‚è¿™ä¸ªé€‰é¡¹ç”¨ä¸€ç§ä¸åŒçš„æ–¹å¼æ¥å¤„ç†åˆšæ‰è¿™ä¸ªé—®é¢˜ã€‚åœ¨ç§»åŠ¨æ–‡ä»¶å‰ï¼Œé¦–å…ˆåœ¨ç›®æ ‡ç›®å½•çš„åŒåæ–‡ä»¶çš„æ–‡ä»¶åååŠ ä¸€ä¸ªâ€œ~â€å·ï¼Œä»è€Œé¿å…è¿™ä¸ªæ–‡ä»¶è¢«è¦†ç›–ã€‚ä¾‹å¦‚:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">mv</span> <span class="literal">-b</span> hello test/</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> test/</span><br><span class="line"><span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line">hello</span><br><span class="line">hello~</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;Linux æ²¡æœ‰â€œé‡å‘½åâ€è¿™ä¸ªå‘½ä»¤ï¼ŒåŸå› å¾ˆç®€å•ï¼Œå³æ²¡æœ‰è¿™ä¸ªå¿…è¦ã€‚é‡å‘½åæ— éå°±æ˜¯å°†ä¸€ä¸ªæ–‡ä»¶åœ¨åŒä¸€ä¸ªç›®å½•é‡Œç§»åŠ¨ï¼Œè¿™æ˜¯ mv æœ€æ“…é•¿çš„å·¥ä½œã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">mv</span> hello~ hello_bak</span><br><span class="line"><span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line">hello</span><br><span class="line">hello_bak</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å› æ­¤å¯¹ mv æ¯”è¾ƒå‡†ç¡®çš„æè¿°æ˜¯ï¼Œmv å¯ä»¥åœ¨ç§»åŠ¨æ–‡ä»¶å’Œç›®å½•çš„åŒæ—¶å¯¹å…¶é‡å‘½åã€‚<br>&#8195;&#8195;è¯¶ï¼Œé‚£å¦‚æœ test/ ç›®å½•ä¸‹å·²ç»å­˜åœ¨ä¸€ä¸ª <code>hello~</code>ï¼Œé‡å¤æ‰§è¡Œ <code>mv -b hello test/</code> ä¼šæ˜¯ä»€ä¹ˆæ•ˆæœå‘¢ï¼Ÿåˆæˆ–è€…åŒæ—¶ä½¿ç”¨è¿™ä¸¤ä¸ªé€‰é¡¹ <code>mv -i -b hello test/</code> ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿæˆ‘æœ‰å¤Ÿæ— èŠï¼Œæ˜¯ä¸æ˜¯~å“ˆå“ˆğŸ˜‚</p><h3 id="å¤åˆ¶æ–‡ä»¶å’Œç›®å½•-cp"><a href="#å¤åˆ¶æ–‡ä»¶å’Œç›®å½•-cp" class="headerlink" title="å¤åˆ¶æ–‡ä»¶å’Œç›®å½• - cp"></a>å¤åˆ¶æ–‡ä»¶å’Œç›®å½• - cp</h3><blockquote><p>cp â€“ copy files<br>å¤åˆ¶æ–‡ä»¶å’Œç›®å½•ã€‚</p></blockquote><p>&#8195;&#8195;cpå‘½ä»¤ç”¨æ¥å¤åˆ¶æ–‡ä»¶å’Œç›®å½•ã€‚ä¸‹é¢è¿™æ¡å‘½ä»¤å°†æ–‡ä»¶ hello.log å¤åˆ¶åˆ° test ç›®å½•ä¸‹ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cp</span> test.php test/</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å’Œ mvå‘½ä»¤ä¸€æ ·ï¼Œcp é»˜è®¤æƒ…å†µä¸‹ä¼šè¦†ç›–ç›®æ ‡ç›®å½•ä¸­çš„åŒåæ–‡ä»¶ã€‚å¯ä»¥ä½¿ç”¨ -i é€‰é¡¹å¯¹è¿™ç§æƒ…å†µè¿›è¡Œæç¤ºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ -b é€‰é¡¹å¯¹åŒåæ–‡ä»¶æ”¹ååå†å¤åˆ¶ã€‚è¿™ä¸¤ä¸ªé€‰é¡¹çš„ä½¿ç”¨å’Œ mv å‘½ä»¤ä¸­ä¸€æ ·ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cp</span> <span class="literal">-i</span> hello.log test/</span><br><span class="line"><span class="built_in">cp</span>:æ˜¯å¦è¦†ç›–<span class="string">&quot;test/hello.log&quot;</span>?</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å›ç­” y è¡¨ç¤ºè¦†ç›–ï¼Œå›ç­” n è¡¨ç¤ºè·³è¿‡è¿™ä¸ªæ–‡ä»¶ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cp</span> <span class="literal">-b</span> hello.log test/</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> test/</span><br><span class="line"><span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line">hello.log</span><br><span class="line">hello.log~</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;cpå‘½ä»¤åœ¨æ‰§è¡Œå¤åˆ¶ä»»åŠ¡çš„æ—¶å€™ä¼šè‡ªåŠ¨è·³è¿‡ç›®å½•ã€‚ä¾‹å¦‚:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cp</span> test/ document/</span><br><span class="line"><span class="built_in">cp</span>:ç•¥è¿‡ç›®å½•<span class="string">&quot;test/&quot;</span></span><br></pre></td></tr></table></figure><p>&#8195;&#8195;ä¸ºæ­¤ï¼Œå¯ä»¥ä½¿ç”¨ -r é€‰é¡¹ï¼Œè¿™ä¸ªé€‰é¡¹å°†å­ç›®å½•è¿åŒå…¶ä¸­çš„æ–‡ä»¶ä¸€èµ·å¤åˆ¶åˆ°å¦ä¸€ä¸ªå­ç›®å½•ä¸‹ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cp</span> <span class="literal">-r</span> test/ document/</span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤ç›®å½•å’Œæ–‡ä»¶-rmdirã€rm"><a href="#åˆ é™¤ç›®å½•å’Œæ–‡ä»¶-rmdirã€rm" class="headerlink" title="åˆ é™¤ç›®å½•å’Œæ–‡ä»¶ - rmdirã€rm"></a>åˆ é™¤ç›®å½•å’Œæ–‡ä»¶ - rmdirã€rm</h3><blockquote><p>rmdir â€“ remove directories</p><p>åˆ é™¤ç›®å½•ã€‚</p><p>rm, unlink â€“ remove files or directories</p><p>åˆ é™¤æ–‡ä»¶ã€ç›®å½•ã€‚</p></blockquote><p>&#8195;&#8195;rmdir å‘½ä»¤ç”¨äºåˆ é™¤ç›®å½•ã€‚ä½¿ç”¨èµ·æ¥å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨åé¢è·Ÿä¸Šè¦åˆ é™¤çš„ç›®å½•ä½œä¸ºå‚æ•°å³å¯ï¼Œä¹Ÿå¯ä»¥åŒæ—¶åˆ é™¤å¤šä¸ªç›®å½•ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">rmdir</span> temp</span><br><span class="line"><span class="variable">$</span> <span class="built_in">rmdir</span> tempx tempxx tempxxx    <span class="comment">#æˆ–è€… rmdir temp*</span></span><br></pre></td></tr></table></figure><p>&#8195;&#8195;ä½†æ˜¯ rmdir åªèƒ½åˆ é™¤ç©ºç›®å½•ï¼Œåˆ é™¤éç©ºç›®å½•ä¼šæç¤ºé”™è¯¯ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">rmdir</span> test</span><br><span class="line"><span class="built_in">rmdir</span>: åˆ é™¤ <span class="string">&quot;test&quot;</span> å¤±è´¥: ç›®å½•éç©º</span><br><span class="line"><span class="variable">$</span> <span class="built_in">ls</span> test/</span><br><span class="line">hello</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å› æ­¤ï¼Œåœ¨ä½¿ç”¨ rmdir åˆ é™¤ä¸€ä¸ªç›®å½•ä¹‹å‰ï¼Œé¦–å…ˆè¦å°†è¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶å’Œå­ç›®å½•åˆ é™¤ã€‚åˆ é™¤æ–‡ä»¶éœ€è¦ç”¨åˆ° rm å‘½ä»¤äº†ï¼Œå½“ç„¶ rm ä¹Ÿå¯ä»¥ç”¨æ¥åˆ é™¤ç›®å½•ï¼Œè€Œä¸”æ¯” rmdir æ›´ä¸ºâ€œé«˜æ•ˆâ€ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">ls</span> test/</span><br><span class="line">hello hello1 hello2 hello3</span><br><span class="line"><span class="variable">$</span> <span class="built_in">rm</span> test/hello*<span class="comment">#åˆ é™¤ test ç›®å½•ä¸‹æ‰€æœ‰ä»¥ hello å¼€å¤´çš„æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å’Œ mv ç­‰å‘½ä»¤ä¸€æ ·ï¼Œrm ä¸ä¼šå¯¹æ­¤ä½œä»»ä½•æç¤ºã€‚é€šè¿‡ rm å‘½ä»¤åˆ é™¤çš„æ–‡ä»¶å°†æ°¸è¿œåœ°ä»ç³»ç»Ÿä¸­æ¶ˆå¤±äº†ï¼Œè€Œä¸ä¼šè¢«æ”¾å…¥ä¸€ä¸ªç§°ä½œâ€œå›æ”¶ç«™â€çš„ä¸´æ—¶ç›®å½•ä¸‹(å°½ç®¡æŸäº›æ¢å¤è½¯ä»¶å¯èƒ½æ‰¾å›ä¸€äº›æ–‡ä»¶ï¼Œä½†åªæ˜¯â€œå¯èƒ½â€è€Œå·²)ã€‚ä¸€ä¸ªæ¯”è¾ƒå®‰å…¨çš„ä½¿ç”¨ rm å‘½ä»¤çš„æ–¹å¼æ˜¯ä½¿ç”¨ -i é€‰é¡¹ï¼Œè¿™ä¸ªé€‰é¡¹ä¼šåœ¨åˆ é™¤æ–‡ä»¶å‰ç»™å‡ºæç¤ºï¼Œå¹¶ç­‰å¾…ç”¨æˆ·ç¡®è®¤ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">rm</span> <span class="literal">-i</span> test/hello</span><br><span class="line"><span class="built_in">rm</span>ï¼šæ˜¯å¦åˆ é™¤æ™®é€šæ–‡ä»¶ â€œtest/hello<span class="string">&quot; ?</span></span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å›ç­” y è¡¨ç¤ºç¡®è®¤åˆ é™¤ï¼Œå›ç­” n è¡¨ç¤ºè·³è¿‡è¿™ä¸ªæ–‡ä»¶ã€‚å¯¹äºåªè¯»æ–‡ä»¶ï¼Œå³ä¾¿ä¸åŠ ä¸Š -i é€‰é¡¹ï¼Œrm å‘½ä»¤ä¹Ÿä¼šå¯¹æ­¤è¿›è¡Œæç¤ºã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">rm</span> hello_bak</span><br><span class="line"><span class="built_in">rm</span>ï¼šæ˜¯å¦åˆ é™¤æœ‰å†™ä¿æŠ¤çš„æ™®é€šæ–‡ä»¶ â€œhello_bak<span class="string">&quot;?</span></span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å¯ä»¥ä½¿ç”¨ -f é€‰é¡¹æ¥é¿å…è¿™æ ·çš„äº¤äº’å¼æ“ä½œã€‚rm ä¼šè‡ªåŠ¨å¯¹è¿™äº›é—®é¢˜å›ç­” yã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">rm</span> <span class="operator">-f</span> hello_bak</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å¸¦æœ‰ -r å‚æ•°çš„ rm å‘½ä»¤ä¼šé€’å½’åœ°åˆ é™¤ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å’Œå­ç›®å½•ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢è¿™ä¸ªå‘½ä»¤ä¼šåˆ é™¤  Photos ç›®å½•ä¸‹æ‰€æœ‰çš„ç›®å½•ã€å­ç›®å½•åŠå­ç›®å½•ä¸‹çš„æ–‡ä»¶å’Œå­ç›®â€¦..æœ€ååˆ é™¤ Photosç›®å½•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠŠ Photos ç›®å½•å®Œæ•´åœ°ä»ç£ç›˜ä¸Šç§»é™¤äº†(å½“ç„¶å‰ææ˜¯æ‹¥æœ‰è¿™æ ·æ“ä½œçš„æƒé™)ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">rm</span> <span class="literal">-r</span> Photos/</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;ä½¿ç”¨ rm å‘½ä»¤çš„æ—¶å€™åº”è¯¥æ ¼å¤–å°å¿ƒï¼Œç‰¹åˆ«æ˜¯ä»¥ root èº«ä»½æ‰§è¡Œè¯¥å‘½ä»¤æ—¶ã€‚æ— è®ºç†Ÿä¸ç†Ÿæ‚‰ Linuxï¼Œå¯èƒ½å¤§å®¶éƒ½çœ‹è¿‡ä¸‹é¢è¿™ä¸ªåŠ¨å›¾ï¼Œå“ˆå“ˆï¼Œè¯´çš„å°±æ˜¯è¿™ä¸ªæ„æ€ï¼š</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/sudo-rm.gif"></p><p>&#8195;&#8195;å‰é¢çš„å­¦ä¹ ä¸­æåˆ°è¿‡ï¼Œ<code>/</code> è¡¨ç¤º Linux çš„æ ¹ç›®å½•ï¼Œ<code>~</code> è¡¨ç¤ºç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œå›¾ä¸­çš„å‘½ä»¤æ˜¯æŠŠæ ¹ç›®å½•çš„ä¸€åˆ‡éƒ½åˆ é™¤æ‰äº†ã€‚æˆ‘æ€€ç–‘æ˜¯ä¸æ˜¯æœ‰äººä¹ æƒ¯æ€§çš„æŠŠ <code>/</code> ç†è§£ä¸ºå½“å‰æ‰€å·¥ä½œçš„ç›®å½•äº†ï¼Œå› ä¸ºæˆ‘æœ‰ä¸¤æ¬¡æ‰‹è´±ä¹Ÿåœ¨æƒ³è¦æ‰“å¼€çš„å­ç›®å½•å‰é¢è¾“å…¥ <code>/</code> ï¼Œæç¤ºæˆ‘ç›®å½•ä¸å­˜åœ¨ï¼Œæ‰ååº”è¿‡æ¥è¾“é”™äº†ğŸ˜‚â€¦â€¦<br>&#8195;&#8195;æ‰€ä»¥åœ¨åˆ é™¤ä¸€ä¸ªæ–‡ä»¶/ç›®å½•å‰ï¼Œä¸€å®šè¦è®¤çœŸè¯„ä¼°åæœã€‚å¦‚æœè¦ä½¿ç”¨ -f å’Œ -r é€‰é¡¹ï¼Œè¦ç¡®å®šè¿™æ˜¯å¿…é¡»çš„ã€‚</p><h2 id="è¾“å…¥è¾“å‡ºé‡å®šå‘å’Œç®¡é“"><a href="#è¾“å…¥è¾“å‡ºé‡å®šå‘å’Œç®¡é“" class="headerlink" title="è¾“å…¥è¾“å‡ºé‡å®šå‘å’Œç®¡é“"></a>è¾“å…¥è¾“å‡ºé‡å®šå‘å’Œç®¡é“</h2><h3 id="è¾“å‡ºé‡å®šå‘-gt-ã€-gt-gt"><a href="#è¾“å‡ºé‡å®šå‘-gt-ã€-gt-gt" class="headerlink" title="è¾“å‡ºé‡å®šå‘ - &gt;ã€&gt;&gt;"></a>è¾“å‡ºé‡å®šå‘ - &gt;ã€&gt;&gt;</h3><p>&#8195;&#8195;ç¨‹åºåœ¨é»˜è®¤æƒ…å†µä¸‹è¾“å‡ºç»“æœçš„åœ°æ–¹è¢«ç§°ä¸ºæ ‡å‡†è¾“å‡º(stdout)ã€‚é€šå¸¸æ¥è¯´ï¼Œæ ‡å‡†è¾“å‡ºæ€»æ˜¯æŒ‡å‘æ˜¾ç¤ºå™¨ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ ls å‘½ä»¤è·å–å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨,å¹¶å°†å…¶è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼Œäºæ˜¯ç”¨æˆ·åœ¨å±å¹•ä¸Šçœ‹åˆ°äº†è¿™äº›æ–‡ä»¶åï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> ~</span><br><span class="line"><span class="variable">$</span> <span class="built_in">ls</span> ~</span><br><span class="line">document  hello  picture  test</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;è¾“å‡ºé‡å®šå‘ç”¨äºæŠŠç¨‹åºçš„è¾“å‡ºè½¬ç§»åˆ°å¦ä¸€ä¸ªåœ°æ–¹å»ã€‚ä¸‹é¢è¿™æ¡å‘½ä»¤å°† ls çš„è¾“å‡ºé‡å®šå‘åˆ° ls_out æ–‡ä»¶ä¸­ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">ls</span> ~ &gt; test/ls_out</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;è¿™æ ·ï¼Œls çš„è¾“å‡ºå°±ä¸ä¼šåœ¨æ˜¾ç¤ºå™¨ä¸Šæ˜¾ç¤ºå‡ºæ¥ï¼Œè€Œæ˜¯å‡ºç°åœ¨ test ç›®å½•ä¸‹çš„ ls_out æ–‡ä»¶ä¸­ï¼Œæ¯è¡Œæ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶å:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> test/ls_out</span><br><span class="line">document</span><br><span class="line">hello</span><br><span class="line">picture</span><br><span class="line">test</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å¦‚æœ ls_out æ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè¾“å‡ºé‡å®šå‘ç¬¦å· <code>&gt;</code> ä¼šè¯•å›¾å»ºç«‹è¿™ä¸ªæ–‡ä»¶ã€‚å¦‚æœ ls_out æ–‡ä»¶å·²ç»å­˜åœ¨äº†ï¼Œé‚£ä¹ˆ <code>&gt;</code> ä¼šåˆ é™¤æ–‡ä»¶ä¸­åŸæœ‰çš„å†…å®¹ï¼Œç„¶åç”¨æ–°å†…å®¹æ›¿ä»£ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> uname <span class="literal">-r</span> &gt; test/ls_out</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> test/ls_out</span><br><span class="line"><span class="number">3.10</span>.<span class="number">0</span><span class="literal">-1160</span>.<span class="number">31.1</span>.el7.x86_64</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å¯ä»¥çœ‹åˆ°ï¼Œ<code>&gt;</code> å¹¶ä¸ä¼šç¤¼è²Œåœ°åœ¨åŸæ¥é‚£å †æ–‡ä»¶åçš„åé¢æ·»ä¸Šç‰ˆæœ¬ä¿¡æ¯ï¼Œè€Œæ˜¯ç›´æ¥è¦†ç›–äº†åˆšåˆš ls å‘½ä»¤çš„è¾“å‡ºã€‚å¦‚æœè¦ä¿ç•™åŸæ¥æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œåº”è¯¥ä½¿ç”¨è¾“å‡ºé‡å®šå‘ç¬¦å· <code>&gt;&gt;</code>ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> date &gt; test/date_out                 <span class="comment"># å°† date å‘½ä»¤çš„è¾“å‡ºé‡å®šå‘åˆ° date_out æ–‡ä»¶</span></span><br><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> test/date_out                   <span class="comment"># æŸ¥çœ‹ date_out æ–‡ä»¶çš„å†…å®¹</span></span><br><span class="line"><span class="number">2022</span>å¹´ <span class="number">03</span>æœˆ <span class="number">15</span>æ—¥ æ˜ŸæœŸäºŒ <span class="number">16</span>:<span class="number">12</span>:<span class="number">00</span> CST</span><br><span class="line"><span class="variable">$</span> uname <span class="literal">-r</span> &gt;&gt; test/date_out           <span class="comment"># å°† uname å‘½ä»¤äº§ç”Ÿçš„ç‰ˆæœ¬ä¿¡æ¯è¿½åŠ åˆ° date_out æ–‡ä»¶çš„æœ«å°¾</span></span><br><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> test/date_out                   <span class="comment"># å†æ¬¡æŸ¥çœ‹ date_out æ–‡ä»¶çš„å†…å®¹</span></span><br><span class="line"><span class="number">2022</span>å¹´ <span class="number">03</span>æœˆ <span class="number">15</span>æ—¥ æ˜ŸæœŸäºŒ <span class="number">16</span>:<span class="number">12</span>:<span class="number">00</span> CST</span><br><span class="line"><span class="number">3.10</span>.<span class="number">0</span><span class="literal">-1160</span>.<span class="number">31.1</span>.el7.x86_64</span><br></pre></td></tr></table></figure><h3 id="è¾“å…¥é‡å®šå‘-lt-ã€-lt-lt"><a href="#è¾“å…¥é‡å®šå‘-lt-ã€-lt-lt" class="headerlink" title="è¾“å…¥é‡å®šå‘ - &lt;ã€&lt;&lt;"></a>è¾“å…¥é‡å®šå‘ - &lt;ã€&lt;&lt;</h3><p>&#8195;&#8195;å’Œæ ‡å‡†è¾“å‡ºç±»ä¼¼ï¼Œç¨‹åºé»˜è®¤æƒ…å†µä¸‹æ¥æ”¶è¾“å…¥çš„åœ°æ–¹è¢«ç§°ä¸ºæ ‡å‡†è¾“å…¥(stdin)ã€‚é€šå¸¸æ¥è¯´ï¼Œæ ‡å‡†è¾“å…¥æ€»æ˜¯æŒ‡å‘é”®ç›˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½¿ç”¨ä¸å¸¦ä»»ä½•å‚æ•°çš„ cat å‘½ä»¤ï¼Œé‚£ä¹ˆ cat ä¼šåœåœ¨é‚£é‡Œï¼Œç­‰å¾…ä»æ ‡å‡†è¾“å…¥(ä¹Ÿå°±æ˜¯é”®ç›˜)è·å–æ•°æ®ã€‚ä¹¦ä¸Šè¯´ä½¿ç”¨ <code>&lt;</code> é‡å®šå‘ç¬¦å·å¯ä»¥è®©ç¨‹åºä»ä¸€ä¸ªæ–‡æœ¬ä¸­è·å–è¾“å…¥â€¦â€¦æ‰€ä»¥ä¸‹é¢çš„ä¸¤ä¸ªå‘½ä»¤æ˜¯ä¸€å›äº‹å„¿å§ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> ~</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> &lt; test/date_out</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> test/data_out</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å¦ä¸€ç§è¾“å…¥é‡å®šå‘çš„ä¾‹å­è¢«ç§°ä¸ºç«‹å³æ–‡æ¡£(here document)ã€‚è¿™ç§é‡å®šå‘æ–¹å¼ä½¿ç”¨æ“ä½œç¬¦ <code>&lt;&lt;</code>ã€‚ç«‹å³æ–‡æ¡£æ˜ç¡®å‘Šè¯‰ Shell ä»é”®ç›˜æ¥å—è¾“å…¥ï¼Œå¹¶ä¼ é€’ç»™ç¨‹åºã€‚ç°åœ¨çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cat</span>&lt;&lt; EOF</span><br><span class="line">&gt; Hello</span><br><span class="line">&gt; Bye</span><br><span class="line">Hello</span><br><span class="line">Bye</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;cat å‘½ä»¤ä»é”®ç›˜æ¥å—ä¸¤è¡Œè¾“å…¥ï¼Œå¹¶å°†å…¶é€å¾€æ ‡å‡†è¾“å‡ºã€‚å’Œæœ¬èŠ‚å¼€å¤´çš„ä¾‹å­ä¸åŒçš„æ˜¯ï¼Œç»™ç«‹å³æ–‡æ¡£æŒ‡å®šäº†ä¸€ä¸ªä»£è¡¨è¾“å…¥ç»“æŸçš„åˆ†éš”ç¬¦(åœ¨è¿™é‡Œæ˜¯å•è¯ EOF)ï¼Œå½“ Shell é‡åˆ°è¿™ä¸ªå•è¯çš„æ—¶å€™ï¼Œå³è®¤ä¸ºè¾“å…¥ç»“æŸï¼Œå¹¶æŠŠåˆšæ‰çš„é”®ç›˜è¾“å…¥ä¸€èµ·ä¼ é€’ç»™å‘½ä»¤ã€‚æ‰€ä»¥è¿™æ¬¡ cat å‘½ä»¤ä¼šå°†ç”¨æˆ·çš„è¾“å…¥ä¸€å—æ˜¾ç¤ºï¼Œè€Œä¸æ˜¯æ¯æ”¶åˆ°ä¸€è¡Œå°±è¿«ä¸åŠå¾…åœ°æŠŠå®ƒæ‰“å°å‡ºæ¥ã€‚<br>&#8195;&#8195;ç”¨æˆ·å¯ä»¥é€‰æ‹©ä»»æ„ä¸€ä¸ªå•è¯ä½œä¸ºç«‹å³æ–‡æ¡£çš„åˆ†éš”ç¬¦ï¼Œåƒ EOFã€ENDã€eof ç­‰éƒ½æ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œåªè¦å¯ä»¥ç¡®ä¿å®ƒä¸æ˜¯æ­£æ–‡çš„ä¸€éƒ¨åˆ†å³å¯ã€‚<br>&#8195;&#8195;é‚£ä¹ˆï¼Œæ˜¯å¦å¯ä»¥è®©è¾“å…¥é‡å®šå‘å’Œè¾“å‡ºé‡å®šå‘ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> &lt;&lt; <span class="keyword">END</span> &gt;&gt; test/date_out</span><br><span class="line">&gt; Hi Tommy,</span><br><span class="line">&gt; it<span class="string">&#x27;s time to be off duty!</span></span><br><span class="line"><span class="string">&gt; Let&#x27;</span>s go to the bar.</span><br><span class="line">&gt; <span class="keyword">END</span></span><br></pre></td></tr></table></figure><p>&#8195;&#8195;è¿™æ¡å‘½ä»¤é¦–å…ˆè®© cat å‘½ä»¤ä»¥ç«‹å³æ–‡æ¡£çš„æ–¹å¼è·å–è¾“å…¥ï¼Œç„¶åå†æŠŠ cat çš„è¾“å‡ºé‡å®šå‘åˆ° date_out æ–‡ä»¶ã€‚æŸ¥çœ‹ date_out æ–‡ä»¶ï¼Œåº”è¯¥å¯ä»¥çœ‹åˆ°æ‹¼æ¥çš„è¿™äº›å†…å®¹:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> test/date_out</span><br><span class="line"><span class="number">2022</span>å¹´ <span class="number">03</span>æœˆ <span class="number">15</span>æ—¥ æ˜ŸæœŸäºŒ <span class="number">16</span>:<span class="number">12</span>:<span class="number">00</span> CST</span><br><span class="line"><span class="number">3.10</span>.<span class="number">0</span><span class="literal">-1160</span>.<span class="number">31.1</span>.el7.x86_64</span><br><span class="line">Hi Tommy,</span><br><span class="line">it<span class="string">&#x27;s time to be off duty!</span></span><br><span class="line"><span class="string">Let&#x27;</span>s go to the bar.</span><br></pre></td></tr></table></figure><h3 id="ç®¡é“"><a href="#ç®¡é“" class="headerlink" title="ç®¡é“ - |"></a>ç®¡é“ - |</h3><p>&#8195;&#8195;ç®¡é“å°†â€œé‡å®šå‘â€å†å‘å‰æ¨è¿›äº†ä¸€æ­¥ã€‚é€šè¿‡ä¸€æ ¹ç«–çº¿ <code>|</code>ï¼Œå°†ä¸€æ¡å‘½ä»¤çš„è¾“å‡ºè¿æ¥åˆ°å¦ä¸€æ¡å‘½ä»¤è¾“å…¥ã€‚ä¸‹é¢è¿™æ¡å‘½ä»¤æ˜¾ç¤ºäº†å¦‚ä½•åœ¨æ–‡ä»¶åˆ—è¡¨ä¸­æŸ¥æ‰¾æ–‡ä»¶åä¸­åŒ…å«æŸä¸ªç‰¹å®šå­—ç¬¦ä¸²çš„æ–‡ä»¶:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> test/</span><br><span class="line"><span class="variable">$</span> <span class="built_in">ls</span> | grep out</span><br><span class="line">date_out</span><br><span class="line">ls_out</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;ls é¦–å…ˆåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åï¼Œç®¡é“ <code>|</code> æ¥æ”¶åˆ°è¿™äº›è¾“å‡ºï¼Œå¹¶æŠŠå®ƒä»¬å‘é€ç»™ grep å‘½ä»¤ä½œä¸ºå…¶è¾“å…¥ï¼Œæœ€å grep åœ¨è¿™å †æ–‡ä»¶åˆ—è¡¨ä¸­æŸ¥æ‰¾åŒ…å«å­—ç¬¦ä¸² out çš„æ–‡ä»¶åï¼Œå¹¶åœ¨æ ‡å‡†è¾“å‡º(ä¹Ÿå°±æ˜¯æ˜¾ç¤ºå™¨)æ˜¾ç¤ºã€‚<br>&#8195;&#8195;å¯ä»¥åœ¨ä»¥è¡Œå‘½ä»¤ä¸­ä½¿ç”¨å¤šä¸ªç®¡é“ï¼Œå°†å¤šä¸ªå‘½ä»¤ç»“åˆèµ·æ¥ï¼Œå†™å‡ºå¤æ‚çš„ Shell è„šæœ¬ã€‚çœ‹ä¹¦çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä»¿ä½›å·²ç»ä¼šå†™è„šæœ¬äº†ä¸€æ ·ï¼Œå“ˆå“ˆå“ˆ~ğŸ¤“</p><hr><p>Linux çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæš‚æ—¶å­¦ä¹ åˆ°è¿™é‡Œã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux å­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰- Shell åŸºç¡€å‘½ä»¤</title>
      <link href="/2022/02/24/Linux_Shell1/"/>
      <url>/2022/02/24/Linux_Shell1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><h2 id="æŸ¥çœ‹ç›®å½•å’Œæ–‡ä»¶"><a href="#æŸ¥çœ‹ç›®å½•å’Œæ–‡ä»¶" class="headerlink" title="æŸ¥çœ‹ç›®å½•å’Œæ–‡ä»¶"></a>æŸ¥çœ‹ç›®å½•å’Œæ–‡ä»¶</h2><h3 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h3><blockquote><p>æ˜¾ç¤ºå½“å‰æ‰€åœ¨çš„ä½ç½®ï¼Œå³å·¥ä½œç›®å½•ã€‚</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">blog</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> ~]<span class="variable">$</span> <span class="built_in">pwd</span></span><br><span class="line">/home/blog</span><br></pre></td></tr></table></figure><h3 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h3><blockquote><p>æ”¹å˜ç›®å½•ã€‚</p></blockquote><p>æ—¥å¸¸ç”¨æ³•ï¼š<br><code>cd /home/blog</code> è¿›å…¥ /home/blog ç›®å½•ï¼›<br><code>cd ..</code> è¿”å›ä¸Šä¸€å±‚ç›®å½•ï¼›<br><code>cd /</code> è¿›å…¥æ ¹ç›®å½•ï¼Œ<code>cd .. / ..</code> ä¹Ÿæ˜¯è¿›å…¥æ ¹ç›®å½•ï¼›<br><code>cd</code> ä¸å¸¦å‚æ•°æ€»æ˜¯å¯ä»¥å›åˆ°è‡ªå·±ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œæˆ–è€… <code>cd ~</code> ä¹Ÿæ˜¯ä¸€æ ·çš„æ•ˆæœã€‚<br><strong>FYI</strong>ï¼šåœ¨ Shell ä¸­ï¼Œ<code>..</code> ä»£è¡¨å½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•ï¼Œè€Œ <code>.</code> åˆ™ä»£è¡¨å½“å‰ç›®å½•ï¼Œå¦å¤–ï¼Œ<code>~</code> ä»£è¡¨ç”¨æˆ·ä¸»ç›®å½•ã€‚</p><span id="more"></span><h3 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h3><blockquote><p>åˆ—å‡ºç›®å½•å†…å®¹ã€‚</p></blockquote><p>ls æ˜¯ list çš„ç®€å†™ã€‚å¸¸ç”¨é€‰é¡¹ï¼š<br><code>ls</code> ä¸å¸¦å‚æ•°æ—¶ï¼Œä¼šåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç›®å½•æ˜¾ç¤ºä¸ºè“è‰²ï¼Œæ™®é€šæ–‡ä»¶æ˜¾ç¤ºä¸ºé»‘è‰²ï¼Œå¯æ‰§è¡Œæ–‡ä»¶æ˜¾ç¤ºä¸ºè‰ç»¿è‰²ï¼Œæ·¡è“è‰²åˆ™è¡¨ç¤ºè¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªé“¾æ¥æ–‡ä»¶(ç›¸å½“äº Windows ä¸‹çš„å¿«æ·æ–¹å¼)ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">blog</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> ~]<span class="variable">$</span> <span class="built_in">cd</span> /etc/</span><br><span class="line">[<span class="type">blog</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> <span class="type">etc</span>]<span class="variable">$</span> <span class="built_in">ls</span></span><br><span class="line">acpi                     e2fsck.conf    libreport                 pm              shells.rpmnew</span><br><span class="line">adjtime                  environment    libuser.conf              polkit<span class="literal">-1</span>        skel</span><br><span class="line">aliases                  ethertypes     locale.conf               popt.d          sos.conf</span><br><span class="line">alternatives             exports        localtime                 postfix         ssh</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><code>ls -F</code> ç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨å¸¦ -F é€‰é¡¹çš„ ls å‘½ä»¤ã€‚å¯ä»¥çœ‹åˆ°ï¼Œ-F é€‰é¡¹ä¼šåœ¨æ¯ä¸ªç›®å½•ååŠ ä¸Š /ï¼Œåœ¨å¯æ‰§è¡Œæ–‡ä»¶ååŠ  *ï¼Œåœ¨é“¾æ¥æ–‡ä»¶ååŠ ä¸Š @ã€‚è¿™ä¸ªé€‰é¡¹åœ¨æŸäº›æ— æ³•æ˜¾ç¤ºé¢œè‰²çš„ç»ˆç«¯ä¸Šä¼šæ¯”è¾ƒæœ‰ç”¨:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">blog</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> ~]<span class="variable">$</span> <span class="built_in">cd</span> /etc/</span><br><span class="line">[<span class="type">blog</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> <span class="type">etc</span>]<span class="variable">$</span> <span class="built_in">ls</span> <span class="operator">-F</span></span><br><span class="line">acpi/                    e2fsck.conf    libreport/                pm/              shells.rpmnew</span><br><span class="line">adjtime                  environment    libuser.conf              polkit<span class="literal">-1</span>/        skel/</span><br><span class="line">aliases                  ethertypes     locale.conf               popt.d/          sos.conf</span><br><span class="line">alternatives/            exports        localtime<span class="selector-tag">@</span>                postfix/         ssh/</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><code>ls -a</code> æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶ã€‚<br><code>ls -aF</code> å‘½ä»¤çš„é€‰é¡¹ä¹Ÿå¯ä»¥ç»„åˆä½¿ç”¨ï¼Œåªéœ€è¦ä¸€ä¸ª <code>-</code> ç¬¦å·ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">blog</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> <span class="type">etc</span>]<span class="variable">$</span> <span class="built_in">ls</span> <span class="literal">-aF</span></span><br><span class="line">./                       dracut.conf.d/  libreport/                polkit<span class="literal">-1</span>/        skel/</span><br><span class="line">../                      e2fsck.conf     libuser.conf              popt.d/          sos.conf</span><br><span class="line">acpi/                    environment     locale.conf               postfix/         ssh/</span><br><span class="line">adjtime                  ethertypes      localtime<span class="selector-tag">@</span>                ppp/             ssl/</span><br></pre></td></tr></table></figure><p><code>ls -l</code> æŸ¥çœ‹æ–‡ä»¶çš„å±æ€§ï¼Œä»å·¦è‡³å³ä¾æ¬¡æ˜¯ï¼šæ–‡ä»¶çš„æƒé™æ ‡å¿—ï¼›æ–‡ä»¶çš„é“¾æ¥ä¸ªæ•°ï¼›æ–‡ä»¶æ‰€æœ‰è€…çš„ç”¨æˆ·åï¼›è¯¥ç”¨æˆ·æ‰€åœ¨çš„ç”¨æˆ·ç»„ï¼›æ–‡ä»¶çš„å¤§å°ï¼›æœ€åä¸€æ¬¡è¢«ä¿®æ”¹çš„æ—¥æœŸï¼›æ–‡ä»¶åã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">blog</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> <span class="type">etc</span>]<span class="variable">$</span> <span class="built_in">ls</span> <span class="literal">-l</span></span><br><span class="line">æ€»ç”¨é‡ <span class="number">1536</span></span><br><span class="line">drwxr<span class="literal">-xr</span><span class="literal">-x</span>.  <span class="number">4</span> root root     <span class="number">4096</span> <span class="number">4</span>æœˆ  <span class="number">11</span> <span class="number">2018</span> acpi</span><br><span class="line"><span class="literal">-rw</span><span class="literal">-r</span>-<span class="literal">-r</span>--.  <span class="number">1</span> root root       <span class="number">16</span> <span class="number">4</span>æœˆ  <span class="number">21</span> <span class="number">2016</span> adjtime</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><code>ls [è·¯å¾„]</code> è·¯å¾„ä½œä¸ºå‚æ•°ï¼Œå°±æ˜¯æŸ¥çœ‹è¯¥å­ç›®å½•çš„å†…å®¹ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">blog</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> ~]<span class="variable">$</span> <span class="built_in">ls</span> /etc/yum</span><br><span class="line">fssnap.d  pluginconf.d  protected.d  vars  version<span class="literal">-groups</span>.conf</span><br></pre></td></tr></table></figure><h3 id="dir-vdir"><a href="#dir-vdir" class="headerlink" title="dir/vdir"></a>dir/vdir</h3><p><code>dir</code> ç±»ä¼¼ <code>ls</code>ï¼Œ<code>vdir</code> ç±»ä¼¼ <code>ls -l</code>ã€‚</p><h3 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h3><blockquote><p>ç”¨äºæŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼Œåé¢è·Ÿæ–‡ä»¶åä½œä¸ºå‚æ•°ã€‚</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> helloworld</span><br><span class="line"><span class="variable">$</span> <span class="built_in">cat</span> <span class="literal">-n</span> helloworld <span class="comment"># å¸¦è¡Œå·çš„ -n </span></span><br></pre></td></tr></table></figure><p>cat ä¼šå°†æ–‡ä»¶çš„æ‰€æœ‰å†…å®¹æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œé‚£å¯¹äºå¤§æ–‡ä»¶æ¥è¯´ï¼Œcat æ˜¾å¾—æ¯«æ— ç”¨å¤„ã€‚</p><h3 id="more"><a href="#more" class="headerlink" title="more"></a>more</h3><blockquote><p>è€ƒè™‘åˆ° cat å‘½ä»¤çš„ç¼ºç‚¹ï¼ŒLinux æä¾›äº† more å‘½ä»¤ä¸€é¡µä¸€é¡µçš„æ˜¾ç¤ºæ–‡ä»¶å†…å®¹â€¦</p></blockquote><p>&#8195;&#8195;å¯ä»¥çœ‹åˆ°ï¼Œmore å‘½ä»¤ä¼šåœ¨æœ€åæ˜¾ç¤ºä¸€ä¸ªç™¾åˆ†æ¯”ï¼Œè¡¨ç¤ºå·²æ˜¾ç¤ºå†…å®¹å æ•´ä¸ªæ–‡ä»¶çš„æ¯”ä¾‹ï¼ŒæŒ‰ä¸‹ç©ºæ ¼é”®å‘ä¸‹ç¿»åŠ¨ä¸€é¡µï¼ŒæŒ‰ Enter é”®å‘ä¸‹æ»šåŠ¨ä¸€è¡Œï¼ŒæŒ‰ Q é”®é€€å‡ºï¼Œæˆ–è€…æ»šåˆ°æœ€åä¸€è¡Œæ—¶è‡ªåŠ¨å°±é€€å‡ºäº†ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> more <span class="number">404</span>.html</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD XHTML 1.1//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;html xmlns=<span class="string">&quot;http://www.w3.org/1999/xhtml&quot;</span> xml:lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;The page is not found&lt;/title&gt;</span><br><span class="line">        &lt;meta http<span class="literal">-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=UTF-8&quot;</span> /&gt;</span><br><span class="line">        &lt;style <span class="built_in">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><br><span class="line">            /*&lt;![<span class="type">CDATA</span>[*/</span><br><span class="line">            <span class="type">body</span> &#123;</span><br><span class="line">                <span class="type">background</span>-<span class="type">color</span>: <span class="comment">#fff;</span></span><br><span class="line">                <span class="type">color</span>: <span class="comment">#000;</span></span><br><span class="line">                <span class="type">font</span>-<span class="type">size</span>: <span class="number">0.9</span><span class="type">em</span>;</span><br><span class="line">                <span class="type">font</span>-<span class="type">family</span>: <span class="type">sans</span>-<span class="type">serif</span>,<span class="type">helvetica</span>;</span><br><span class="line">                <span class="type">margin</span>: <span class="number">0</span>;</span><br><span class="line">                <span class="type">padding</span>: <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            :<span class="type">link</span> &#123;</span><br><span class="line">                <span class="type">color</span>: <span class="comment">#c00;</span></span><br><span class="line">            &#125;</span><br><span class="line">            :<span class="type">visited</span> &#123;</span><br><span class="line">                <span class="type">color</span>: <span class="comment">#c00;</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">a</span>:<span class="type">hover</span> &#123;</span><br><span class="line">                <span class="type">color</span>: <span class="comment">#f50;</span></span><br><span class="line">            &#125;</span><br><span class="line">--<span class="type">More</span>--(<span class="number">41</span>%)</span><br></pre></td></tr></table></figure><h3 id="head"><a href="#head" class="headerlink" title="head"></a>head</h3><blockquote><p>æ˜¾ç¤ºæ–‡ä»¶çš„å¼€å¤´ã€‚</p></blockquote><h3 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h3><blockquote><p>æ˜¾ç¤ºæ–‡ä»¶çš„ç»“å°¾ã€‚</p></blockquote><p>head å’Œ tail å¯ä»¥ä½¿ç”¨ <code>-n</code> å‚æ•°æŒ‡å®šæ˜¾ç¤ºçš„è¡Œæ•°ã€‚é»˜è®¤ä¸æŒ‡å®šè¡Œæ•°çš„è¯ï¼Œæˆ‘ä¹Ÿä¸å¤ªæ¸…æ¥šå®ƒæ˜¾ç¤ºçš„è¡Œæ•°æ˜¯æ ¹æ®ä»€ä¹ˆåˆ¤æ–­çš„ğŸ˜‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> head <span class="literal">-n</span> <span class="number">5</span> <span class="number">404</span>.html</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD XHTML 1.1//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;html xmlns=<span class="string">&quot;http://www.w3.org/1999/xhtml&quot;</span> xml:lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;The page is not found&lt;/title&gt;</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> tail <span class="literal">-n</span> <span class="number">5</span> <span class="number">404</span>.html</span><br><span class="line">                    width=<span class="string">&quot;88&quot;</span> height=<span class="string">&quot;31&quot;</span> /&gt;&lt;/a&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> head <span class="literal">-n</span> <span class="number">2</span> index.html search.xml</span><br><span class="line">==&gt; index.html &lt;==</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=zh&gt;</span><br><span class="line"></span><br><span class="line">==&gt; search.xml &lt;==</span><br><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="line">&lt;search&gt;</span><br></pre></td></tr></table></figure><p>ä¸¤ä¸ªå‘½ä»¤å¦‚æœæŸ¥çœ‹å¤šä¸ªæ–‡ä»¶çš„è¯ï¼Œé»˜è®¤ä¼šæŠŠæ–‡ä»¶åè¾“å‡ºï¼Œæ”¾åœ¨ ==&gt; å’Œ &lt;== ä¹‹é—´ã€‚</p><h3 id="less"><a href="#less" class="headerlink" title="less"></a>less</h3><p>&#8195;&#8195;less å’Œ more éå¸¸ç›¸ä¼¼ï¼Œä½†å…¶åŠŸèƒ½æ›´ä¸ºå¼ºå¤§ã€‚less æ”¹è¿›äº† more å‘½ä»¤çš„å¾ˆå¤šç»†èŠ‚ï¼Œå¹¶æ·»åŠ äº†è®¸å¤šçš„ç‰¹æ€§ã€‚è¿™äº›ç‰¹æ€§è®© less çœ‹èµ·æ¥æ›´åƒæ˜¯ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåªæ˜¯å»æ‰äº†æ–‡æœ¬ç¼–è¾‘åŠŸèƒ½ã€‚æ€»ä½“æ¥è¯´ï¼Œless å‘½ä»¤æä¾›äº†ä¸‹é¢è¿™äº›å¢å¼ºåŠŸèƒ½ï¼š</p><ul><li>ä½¿ç”¨å…‰æ ‡é”®åœ¨æ–‡æœ¬æ–‡ä»¶ä¸­å‰å(ç”šè‡³å·¦å³)æ»šå±;</li><li>ç”¨è¡Œå·æˆ–ç™¾åˆ†æ¯”ä½œä¸ºä¹¦ç­¾æµè§ˆæ–‡ä»¶;</li><li>å®ç°å¤æ‚çš„æ£€ç´¢ã€é«˜äº®æ˜¾ç¤ºç­‰æ“ä½œ;</li><li>å…¼å®¹å¸¸ç”¨çš„å­—å¤„ç†ç¨‹åº(å¦‚Emacsã€Vim)çš„é”®ç›˜æ“ä½œ;</li><li>é˜…è¯»åˆ°æ–‡ä»¶ç»“æŸæ—¶ less å‘½ä»¤ä¸ä¼šé€€å‡ºï¼ŒæŒ‰ Q é”®é€€å‡º;</li><li>å±å¹•åº•éƒ¨çš„ä¿¡æ¯æç¤ºæ›´å®¹æ˜“æ§åˆ¶ä½¿ç”¨ï¼Œè€Œä¸”æä¾›äº†æ›´å¤šçš„ä¿¡æ¯ã€‚</li></ul><p>ä¸‹é¢ç®€å•åœ°ä»‹ç» less å‘½ä»¤çš„ä½¿ç”¨æ–¹æ³•ã€‚ä»¥åšå®¢çš„ index.html æ–‡ä»¶ä¸ºä¾‹ï¼Œæ‰§è¡Œ <code>less index.html</code> ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=zh&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;!-- so meta --&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta http<span class="literal">-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;HandheldFriendly&quot;</span> content=<span class="string">&quot;True&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=5&quot;</span> /&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;description&quot;</span> content=<span class="string">&quot;èƒ½æ”¹å˜è‡ªå·±çš„éƒ½æ˜¯ç¥ï¼Œæƒ³æ”¹å˜åˆ«äººçš„éƒ½æ˜¯ç¥ç»ç—…ã€‚&lt;U+1F34A&gt;&quot;</span>&gt;</span><br><span class="line">&lt;meta property=<span class="string">&quot;og:type&quot;</span> content=<span class="string">&quot;website&quot;</span>&gt;</span><br><span class="line">&lt;meta property=<span class="string">&quot;og:title&quot;</span> content=<span class="string">&quot;è¿·&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ­¤å¤„çœç•¥ä¸€éƒ¨åˆ†</span></span><br><span class="line">...</span><br><span class="line">        &lt;!-- mathjax --&gt;</span><br><span class="line"></span><br><span class="line">:</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å¯ä»¥çœ‹åˆ°ï¼Œless åœ¨å±å¹•åº•éƒ¨æ˜¾ç¤ºä¸€ä¸ªå†’å·â€œ:â€ç­‰å¾…ç”¨æˆ·è¾“å…¥å‘½ä»¤ã€‚å¦‚æœæƒ³å‘ä¸‹ç¿»ä¸€é¡µï¼Œå¯ä»¥æŒ‰ä¸‹<strong>ç©ºæ ¼é”®</strong>ï¼Œå¦‚æœæƒ³å‘ä¸Šç¿»ä¸€é¡µï¼ŒæŒ‰ä¸‹ <strong>B é”®</strong>ï¼Œä¹Ÿå¯ä»¥ç”¨å…‰æ ‡é”®å‘<strong>å‰ã€åã€</strong>ç”šè‡³<strong>å·¦å³</strong>ç§»åŠ¨ã€‚å¦‚æœè¦åœ¨æ–‡ä»¶ä¸­æœç´¢æŸä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ å¯ä»¥ä½¿ç”¨æ­£æ–œæ <strong>â€œ/â€</strong>è·Ÿä¸Šæƒ³è¦æŸ¥æ‰¾çš„å†…å®¹ï¼Œless ä¼šæŠŠæ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæœç´¢ç›®æ ‡é«˜äº®æ˜¾ç¤ºï¼Œè¦ç»§ç»­æŸ¥æ‰¾ç›¸åŒçš„å†…å®¹ï¼Œåªè¦<strong>å†æ¬¡è¾“å…¥</strong>æ­£æ–œæ <strong>â€œ/â€</strong>ï¼Œå¹¶æŒ‰ä¸‹å›è½¦é”®å°±å¯ä»¥äº†ã€‚<br>&#8195;&#8195;ä½¿ç”¨å¸¦ <code>-M</code> å‚æ•°å¯ä»¥æ˜¾ç¤ºæ›´å¤šæ–‡ä»¶ä¿¡æ¯ï¼Œ<code>less -M index.html</code> :</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=zh&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;!-- so meta --&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;utf-8&quot;</span>&gt;</span><br><span class="line">    &lt;meta http<span class="literal">-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> content=<span class="string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;HandheldFriendly&quot;</span> content=<span class="string">&quot;True&quot;</span>&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, initial-scale=1, maximum-scale=5&quot;</span> /&gt;</span><br><span class="line">    &lt;meta name=<span class="string">&quot;description&quot;</span> content=<span class="string">&quot;èƒ½æ”¹å˜è‡ªå·±çš„éƒ½æ˜¯ç¥ï¼Œæƒ³æ”¹å˜åˆ«äººçš„éƒ½æ˜¯ç¥ç»ç—…ã€‚&lt;U+1F34A&gt;&quot;</span>&gt;</span><br><span class="line">&lt;meta property=<span class="string">&quot;og:type&quot;</span> content=<span class="string">&quot;website&quot;</span>&gt;</span><br><span class="line"><span class="comment">#æ­¤å¤„çœç•¥ä¸€éƒ¨åˆ†</span></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">        &lt;!-- mathjax --&gt;</span><br><span class="line"></span><br><span class="line">index.html lines <span class="number">1</span><span class="literal">-48</span>/<span class="number">338</span> <span class="number">19</span>%</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ° less åœ¨åº•éƒ¨æ˜¾ç¤ºäº†â€œæ–‡ä»¶åå­— å½“å‰è¡Œæ•°èŒƒå›´/æ€»è¡Œæ•° å½“å‰ä½ç½®å æ€»æ–‡ä»¶çš„ç™¾åˆ†æ¯”â€ã€‚</p><h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h3><blockquote><p>åœ¨å¾ˆå¤šæ—¶å€™ï¼Œå¹¶ä¸éœ€è¦åˆ—å‡ºæ–‡ä»¶çš„å…¨éƒ¨å†…å®¹ï¼Œæˆ‘ä»¬æƒ³åšçš„å¯èƒ½åªæ˜¯æ‰¾åˆ°åŒ…å«æŸäº›å…³é”®ä¿¡æ¯çš„æŸå‡ è¡Œã€‚è¿™ä¸ªæ—¶å€™ä½¿ç”¨ more å‘½ä»¤è‚¯å®šå°±å¾ˆéº»çƒ¦äº†ï¼Œå¯ä»¥ç”¨ grep â€¦</p></blockquote><p>å‘½ä»¤æ ¼å¼ï¼š<code>grep [OPTION] PATTERN [FILE...]</code> ã€‚è¿˜æ˜¯ä»¥åšå®¢ä¸»é¡µä¸ºä¾‹ï¼Œæˆ‘ä»¬æœç´¢â€œèƒ½æ”¹å˜è‡ªå·±çš„éƒ½æ˜¯ç¥ï¼Œæƒ³æ”¹å˜åˆ«äººçš„éƒ½æ˜¯ç¥ç»ç—…ã€‚ğŸŠâ€ ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> grep èƒ½æ”¹å˜è‡ªå·±çš„éƒ½æ˜¯ç¥ï¼Œæƒ³æ”¹å˜åˆ«äººçš„éƒ½æ˜¯ç¥ç»ç—…ã€‚ index.html</span><br><span class="line">    &lt;meta name=<span class="string">&quot;description&quot;</span> content=<span class="string">&quot;èƒ½æ”¹å˜è‡ªå·±çš„éƒ½æ˜¯ç¥ï¼Œæƒ³æ”¹å˜åˆ«äººçš„éƒ½æ˜¯ç¥ç»ç—…ã€‚ğŸŠ&quot;</span>&gt;</span><br><span class="line">&lt;meta property=<span class="string">&quot;og:description&quot;</span> content=<span class="string">&quot;èƒ½æ”¹å˜è‡ªå·±çš„éƒ½æ˜¯ç¥ï¼Œæƒ³æ”¹å˜åˆ«äººçš„éƒ½æ˜¯ç¥ç»ç—…ã€‚ğŸŠ&quot;</span>&gt;</span><br><span class="line">    &lt;p&gt;èƒ½æ”¹å˜è‡ªå·±çš„éƒ½æ˜¯ç¥ï¼Œæƒ³æ”¹å˜åˆ«äººçš„éƒ½æ˜¯ç¥ç»ç—…ã€‚ğŸŠ&lt;/p&gt;</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;æŠŠåŒ…å«è¿™è¡Œæ–‡å­—çš„æ ‡ç­¾éƒ½åˆ—å‡ºæ¥äº†ï¼Œå¹¶ä¸”åœ¨æ§åˆ¶å°æ˜¯é«˜äº®æ˜¾ç¤ºçš„ã€‚<br>&#8195;&#8195;å‘½ä»¤å’Œå‚æ•°æ˜¯ä»¥ç©ºæ ¼æ¥åˆ†å‰²çš„ï¼Œé‚£å¦‚æœæˆ‘ä»¬æƒ³æŸ¥æ‰¾çš„å…³é”®å­—æ˜¯ Red Hat è¿™ç§åŒ…å«ç©ºæ ¼å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å¿…é¡»ç”¨å•å¼•å·æŠŠç©ºæ ¼åŒ…å«è¿›å»ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> grep <span class="string">&#x27;html lang=zh&#x27;</span> index.html</span><br><span class="line">&lt;html lang=zh&gt;</span><br></pre></td></tr></table></figure><p>å’Œå…¶ä»–å‡ ä¸ªæŸ¥çœ‹æ–‡ä»¶çš„å‘½ä»¤ä¸€æ ·ï¼Œgrep ä¹Ÿæ”¯æŒå¤šä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨ç»“æœä¸­åˆ—å‡ºæ–‡ä»¶åï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> grep è¿· index.html search.xml</span><br><span class="line">index.html:&lt;meta property=<span class="string">&quot;og:title&quot;</span> content=<span class="string">&quot;è¿·&quot;</span>&gt;</span><br><span class="line">index.html:&lt;meta property=<span class="string">&quot;og:site_name&quot;</span> content=<span class="string">&quot;è¿·&quot;</span>&gt;</span><br><span class="line">index.html:    &lt;title&gt;è¿·&lt;/title&gt;</span><br><span class="line">index.html:      &lt;h1&gt;è¿·&lt;/h1&gt;</span><br><span class="line">search.xml:&lt;li&gt;æ³•å·ï¼šè¿·&lt;/li&gt;</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;ä¸¥æ ¼åœ°è¯´ï¼Œgrep é€šè¿‡â€œåŸºç¡€æ­£åˆ™è¡¨è¾¾å¼(basic regular expression)â€è¿›è¡Œæœç´¢ï¼Œå’Œ grep ç›¸å…³çš„ä¸€ä¸ªå·¥å…·æ˜¯ egrepï¼Œé™¤äº†ä½¿ç”¨â€œæ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼(extended regular expression)â€ï¼Œegrep å’Œ grep å®Œå…¨ä¸€æ ·ï¼Œ â€œ æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼â€èƒ½å¤Ÿæä¾›æ¯”â€œåŸºç¡€æ­£åˆ™è¡¨è¾¾å¼â€æ›´å®Œæ•´åœ°è¡¨è¾¾è§„èŒƒã€‚æ­£åˆ™è¡¨è¾¾å¼æˆ‘è¿˜æ²¡å¤ªå­¦ä¼šâ€¦ğŸ¤“</p><h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><blockquote><p>è¿…é€Ÿåœ¨æŒ‡å®šèŒƒå›´å†…æŸ¥æ‰¾åˆ°æ–‡ä»¶ã€‚</p></blockquote><p>find å‘½ä»¤çš„åŸºæœ¬è¯­æ³•ï¼š<code>find [OPTION] [path...] [expression]</code><br>ä¾‹å¦‚åœ¨ usr/bin/ ç›®å½•ä¸­æŸ¥æ‰¾ zip å‘½ä»¤ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> find /usr/bin/ <span class="literal">-name</span> zip <span class="literal">-print</span></span><br><span class="line">/usr/bin/zip</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ * æŒ‡å®šæ–‡ä»¶åï¼Œä¾‹å¦‚æŸ¥æ‰¾ç±»å‹ä¸º go çš„æ–‡ä»¶ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> find / <span class="literal">-name</span> *.go <span class="literal">-print</span></span><br><span class="line">/usr/share/doc/git<span class="literal">-1</span>.<span class="number">8.3</span>.<span class="number">1</span>/contrib/persistent<span class="literal">-https</span>/client.go</span><br><span class="line">/usr/share/doc/git<span class="literal">-1</span>.<span class="number">8.3</span>.<span class="number">1</span>/contrib/persistent<span class="literal">-https</span>/main.go</span><br><span class="line">find: â€˜/usr/share/polkit<span class="literal">-1</span>/rules.dâ€™: æƒé™ä¸å¤Ÿ</span><br><span class="line">find: â€˜/home/tommyâ€™: æƒé™ä¸å¤Ÿ</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å¯¹äºæç¤ºâ€œæƒé™ä¸å¤Ÿï¼ˆPermission deniedï¼‰â€çš„ç›®å½•ï¼Œè¯´æ˜å½“å‰ç™»å½•çš„ç”¨æˆ·æ²¡æœ‰æƒé™è¿›å…¥è¿™ä¸¤ä¸ªç›®å½•ï¼Œfind åœ¨æ‰«ææ—¶ä¼šè·³è¿‡è¿™ä¸¤ä¸ªç›®å½•ã€‚<br>&#8195;&#8195;findå‘½ä»¤è¿˜èƒ½å¤ŸæŒ‡å®šæ–‡ä»¶çš„ç±»å‹ã€‚åœ¨Linuxä¸­ï¼ŒåŒ…æ‹¬ç›®å½•å’Œè®¾å¤‡éƒ½ä»¥æ–‡ä»¶çš„å½¢å¼è¡¨ç°ï¼Œå¯ä»¥ä½¿ç”¨ <code>-type</code> é€‰é¡¹æ¥å®šä½ç‰¹æ®Šæ–‡ä»¶ç±»å‹ã€‚ä¾‹å¦‚ï¼Œåœ¨ /etc/ ç›®å½•ä¸­æŸ¥æ‰¾åå« init.d çš„ç›®å½•:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> find /etc/ <span class="literal">-name</span> init.d <span class="literal">-type</span> d <span class="literal">-print</span></span><br><span class="line">find: /etc/ssl/private: Permission denied</span><br><span class="line">find: /etc/cups/ssl: Permission denied</span><br><span class="line">/etc/ init.d</span><br></pre></td></tr></table></figure><p><code>-type</code> é€‰é¡¹å¯ä»¥ä½¿ç”¨çš„å‚æ•°ï¼š</p><table><thead><tr><th align="center">å‚æ•°</th><th align="center">å«ä¹‰</th><th align="center">å‚æ•°</th><th align="center">å«ä¹‰</th></tr></thead><tbody><tr><td align="center">b</td><td align="center">å—è®¾å¤‡æ–‡ä»¶</td><td align="center">f</td><td align="center">æ™®é€šæ–‡ä»¶</td></tr><tr><td align="center">c</td><td align="center">å­—ç¬¦è®¾å¤‡æ–‡ä»¶</td><td align="center">p</td><td align="center">å‘½åç®¡é“</td></tr><tr><td align="center">d</td><td align="center">ç›®å½•æ–‡ä»¶</td><td align="center">l</td><td align="center">ç¬¦å·é“¾æ¥</td></tr></tbody></table><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> find -<span class="literal">-help</span></span><br><span class="line">ç”¨æ³•: find [-<span class="type">H</span>] [-<span class="type">L</span>] [-<span class="type">P</span>] [-<span class="type">Olevel</span>] [-<span class="type">D</span> <span class="type">help</span>|<span class="type">tree</span>|<span class="type">search</span>|<span class="type">stat</span>|<span class="type">rates</span>|<span class="type">opt</span>|<span class="type">exec</span>] [<span class="type">path...</span>] [<span class="type">expression</span>]</span><br><span class="line"></span><br><span class="line">é»˜è®¤è·¯å¾„ä¸ºå½“å‰ç›®å½•ï¼›é»˜è®¤è¡¨è¾¾å¼ä¸º <span class="literal">-print</span></span><br><span class="line">è¡¨è¾¾å¼å¯èƒ½ç”±ä¸‹åˆ—æˆä»½ç»„æˆï¼šæ“ä½œç¬¦ã€é€‰é¡¹ã€æµ‹è¯•è¡¨è¾¾å¼ä»¥åŠåŠ¨ä½œï¼š</span><br><span class="line"></span><br><span class="line">æ“ä½œç¬¦ (ä¼˜å…ˆçº§é€’å‡ï¼›æœªåšä»»ä½•æŒ‡å®šæ—¶é»˜è®¤ä½¿ç”¨ <span class="operator">-and</span>):</span><br><span class="line">      ( EXPR )   ! EXPR   <span class="operator">-not</span> EXPR   EXPR1 <span class="literal">-a</span> EXPR2   EXPR1 <span class="operator">-and</span> EXPR2</span><br><span class="line">      EXPR1 <span class="literal">-o</span> EXPR2   EXPR1 <span class="operator">-or</span> EXPR2   EXPR1 , EXPR2</span><br><span class="line"></span><br><span class="line">positional options (always true): <span class="literal">-daystart</span> <span class="literal">-follow</span> <span class="literal">-regextype</span></span><br><span class="line"></span><br><span class="line">normal options (always true, specified before other expressions):</span><br><span class="line">      <span class="literal">-depth</span> -<span class="literal">-help</span> <span class="literal">-maxdepth</span> LEVELS <span class="literal">-mindepth</span> LEVELS <span class="literal">-mount</span> <span class="literal">-noleaf</span></span><br><span class="line">      -<span class="literal">-version</span> <span class="literal">-xautofs</span> <span class="literal">-xdev</span> <span class="literal">-ignore_readdir_race</span> <span class="literal">-noignore_readdir_race</span></span><br><span class="line"></span><br><span class="line">æ¯”è¾ƒæµ‹è¯• (N å¯ä»¥æ˜¯ +N æˆ– <span class="literal">-N</span> æˆ– N): <span class="literal">-amin</span> N <span class="literal">-anewer</span> FILE <span class="literal">-atime</span> N <span class="literal">-cmin</span> N</span><br><span class="line">      <span class="literal">-cnewer</span> æ–‡ä»¶ <span class="literal">-ctime</span> N <span class="literal">-empty</span> <span class="literal">-false</span> <span class="literal">-fstype</span> ç±»å‹ <span class="literal">-gid</span> N <span class="literal">-group</span> åç§°</span><br><span class="line">      <span class="literal">-ilname</span> åŒ¹é…æ¨¡å¼ <span class="literal">-iname</span> åŒ¹é…æ¨¡å¼ <span class="literal">-inum</span> N <span class="literal">-ipath</span> åŒ¹é…æ¨¡å¼ <span class="literal">-iregex</span> åŒ¹é…æ¨¡å¼</span><br><span class="line">      <span class="literal">-links</span> N <span class="literal">-lname</span> åŒ¹é…æ¨¡å¼ <span class="literal">-mmin</span> N <span class="literal">-mtime</span> N <span class="literal">-name</span> åŒ¹é…æ¨¡å¼ <span class="literal">-newer</span> æ–‡ä»¶</span><br><span class="line">      <span class="literal">-nouser</span> <span class="literal">-nogroup</span> <span class="literal">-path</span> PATTERN <span class="literal">-perm</span> [-/]MODE <span class="operator">-regex</span> PATTERN</span><br><span class="line">      <span class="literal">-readable</span> <span class="literal">-writable</span> <span class="literal">-executable</span></span><br><span class="line">      <span class="literal">-wholename</span> PATTERN <span class="literal">-size</span> N[<span class="type">bcwkMG</span>] <span class="literal">-true</span> <span class="literal">-type</span> [<span class="type">bcdpflsD</span>] <span class="literal">-uid</span> N</span><br><span class="line">      <span class="literal">-used</span> N <span class="literal">-user</span> NAME <span class="literal">-xtype</span> [<span class="type">bcdpfls</span>]</span><br><span class="line">      <span class="literal">-context</span> æ–‡æœ¬</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ“ä½œ: <span class="literal">-delete</span> <span class="literal">-print0</span> <span class="literal">-printf</span> æ ¼å¼ <span class="literal">-fprintf</span> æ–‡ä»¶ æ ¼å¼ <span class="literal">-print</span></span><br><span class="line">      <span class="literal">-fprint0</span> æ–‡ä»¶ <span class="literal">-fprint</span> æ–‡ä»¶ <span class="literal">-ls</span> <span class="literal">-fls</span> æ–‡ä»¶ <span class="literal">-prune</span> <span class="literal">-quit</span></span><br><span class="line">      <span class="literal">-exec</span> å‘½ä»¤ ; <span class="literal">-exec</span> å‘½ä»¤ &#123;&#125; + <span class="literal">-ok</span> å‘½ä»¤ ;</span><br><span class="line">      <span class="literal">-execdir</span> å‘½ä»¤ ; <span class="literal">-execdir</span> å‘½ä»¤ &#123;&#125; + <span class="literal">-okdir</span> å‘½ä»¤ ;</span><br></pre></td></tr></table></figure><h3 id="locate"><a href="#locate" class="headerlink" title="locate"></a>locate</h3><blockquote><p>å¦‚æœæˆ‘ä»¬ä¸è®°å¾—æ–‡ä»¶å…·ä½“åœ¨å“ªä¸ªä½ç½®ï¼Œåˆéå¸¸éœ€è¦æ‰¾åˆ°å®ƒï¼Œfind å°±ç•¥æ˜¾å°´å°¬äº†ï¼Œlocate ä¼šæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> locate <span class="number">404</span>.html</span><br><span class="line">/<span class="number">404</span>.html</span><br><span class="line">/usr/share/nginx/html/<span class="number">404</span>.html</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;â€œè¿™äº›æœç´¢ç»“æœå‡ ä¹æ˜¯ä¸€ç¬é—´å°±å‡ºç°äº†ã€‚è¿™ä¸ç¦è®©äººç–‘æƒ‘ï¼Œlocate ç©¶ç«Ÿæ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„ï¼Ÿäº‹å®ä¸Šï¼Œlocate å¹¶æ²¡æœ‰è¿›å…¥å­ç›®å½•æœç´¢ï¼Œå®ƒæœ‰ä¸€ç‚¹ç±»ä¼¼äº Google çš„æ¡Œé¢æœç´¢ï¼Œé€šè¿‡æ£€ç´¢æ–‡ä»¶åæ•°æ®åº“æ¥ç¡®å®šæ–‡ä»¶çš„ä½ç½®ã€‚locate å‘½ä»¤è‡ªåŠ¨å»ºç«‹æ•´ä¸ªæ–‡ä»¶åæ•°æ®åº“ï¼Œä¸éœ€è¦ç”¨æˆ·æ’æ‰‹ã€‚å¦‚æœå¸Œæœ›ç«‹åˆ»ç”Ÿæˆè¯¥æ•°æ®åº“æ–‡ä»¶çš„æœ€æ–°ç‰ˆæœ¬ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ updatedb å‘½ä»¤ï¼Œè¿è¡Œè¿™ä¸ªå‘½ä»¤éœ€è¦æœ‰ root æƒé™ï¼Œæ›´æ–°æ•´ä¸ªæ•°æ®åº“å¤§æ¦‚è€—æ—¶1åˆ†é’Ÿã€‚â€ ä»¥ä¸Šè¿™æ®µæ˜¯ä¹¦ä¸Šçš„æè¿°ï¼Œåœ¨æˆ‘çš„è™šæ‹Ÿæœºä¸Šæ²¡æœ‰ç”¨æ—¶1åˆ†é’Ÿï¼Œå¾ˆå¿«ã€‚ç„¶ååœ¨ Mac OS (è¡ç”Ÿè‡ª Unix) é¦–æ¬¡ä½¿ç”¨ locate å‘½ä»¤æ—¶ï¼Œæç¤ºæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å»ºç«‹æ–‡ä»¶åæ•°æ®åº“ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> locate <span class="string">&#x27;Linux ä»å…¥é—¨åˆ°ç²¾é€š&#x27;</span></span><br><span class="line"></span><br><span class="line">WARNING: The locate database (/var/db/locate.database) does not exist.</span><br><span class="line">To create the database, run the following command:</span><br><span class="line"></span><br><span class="line">  sudo launchctl load <span class="literal">-w</span> /System/Library/LaunchDaemons/com.apple.locate.plist</span><br><span class="line"></span><br><span class="line">Please be aware that the database can take some time to generate; once</span><br><span class="line">the database has been created, this message will no longer appear.</span><br></pre></td></tr></table></figure><h2 id="æŸ¥æ‰¾å‘½ä»¤å’Œç³»ç»Ÿä¿¡æ¯"><a href="#æŸ¥æ‰¾å‘½ä»¤å’Œç³»ç»Ÿä¿¡æ¯" class="headerlink" title="æŸ¥æ‰¾å‘½ä»¤å’Œç³»ç»Ÿä¿¡æ¯"></a>æŸ¥æ‰¾å‘½ä»¤å’Œç³»ç»Ÿä¿¡æ¯</h2><h3 id="whereis"><a href="#whereis" class="headerlink" title="whereis"></a>whereis</h3><blockquote><p>whereis å‘½ä»¤ä¸»è¦ç”¨äºæŸ¥æ‰¾ç¨‹åºæ–‡ä»¶ï¼Œå¹¶æä¾›è¿™ä¸ªæ–‡ä»¶çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ã€æºä»£ç æ–‡ä»¶å’Œä½¿ç”¨æ‰‹å†Œé¡µå­˜æ”¾çš„ä½ç½®ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼ŒæŸ¥æ‰¾åˆšåˆšç”¨åˆ°çš„ locate å‘½ä»¤ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> whereis locate</span><br><span class="line">locate: /usr/bin/locate /usr/share/<span class="built_in">man</span>/man1/locate.<span class="number">1</span>.gz</span><br></pre></td></tr></table></figure><p>å¦‚æœåªæƒ³æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>-b</code> é€‰é¡¹ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> whereis <span class="literal">-b</span> find</span><br><span class="line">find: /usr/bin/find</span><br></pre></td></tr></table></figure><p>è¿™æ ·æœ‰ç‚¹å„¿ç±»ä¼¼äº which å‘½ä»¤ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> which locate</span><br><span class="line">/usr/bin/locate</span><br></pre></td></tr></table></figure><h3 id="who"><a href="#who" class="headerlink" title="who"></a>who</h3><blockquote><p>æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­æœ‰å“ªäº›äººç™»å½•ï¼Œä»¥åŠå·¥ä½œåœ¨å“ªä¸ªæ§åˆ¶å°ä¸Šã€‚</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> who</span><br><span class="line">tommy   pts/<span class="number">0</span>        <span class="number">2022</span><span class="literal">-03</span><span class="literal">-11</span> <span class="number">15</span>:<span class="number">07</span> (<span class="number">0.0</span>.<span class="number">0.0</span>)</span><br><span class="line">tommy   pts/<span class="number">1</span>        <span class="number">2022</span><span class="literal">-03</span><span class="literal">-11</span> <span class="number">16</span>:<span class="number">17</span> (<span class="number">0.0</span>.<span class="number">0.0</span>)</span><br></pre></td></tr></table></figure><h3 id="whoami"><a href="#whoami" class="headerlink" title="whoami"></a>whoami</h3><blockquote><p>æˆ‘æ˜¯è°ï¼Ÿæœ‰äº›æ—¶å€™ï¼Œå¯èƒ½ä¼šå¿˜è®°è‡ªå·±æ˜¯ä»¥ä»€ä¹ˆèº«ä»½ç™»å½•åˆ°ç³»ç»Ÿï¼Œç‰¹åˆ«å½“éœ€è¦ä»¥ç‰¹å®šèº«ä»½å¯åŠ¨æŸä¸ªæœåŠ¡å™¨ç¨‹åºæ—¶ã€‚</p></blockquote><h3 id="uname"><a href="#uname" class="headerlink" title="uname"></a>uname</h3><blockquote><p> ç”¨äºæ˜¾ç¤ºå½“å‰ç³»ç»Ÿçš„ç‰ˆæœ¬ä¿¡æ¯ã€‚å¸¦ -a é€‰é¡¹çš„ uname å‘½ä»¤ä¼šç»™å‡ºå½“å‰æ“ä½œç³»ç»Ÿçš„æ‰€æœ‰æœ‰ç”¨ä¿¡æ¯ã€‚</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> uname <span class="literal">-a</span></span><br><span class="line">Linux VM<span class="literal">-0</span><span class="literal">-13</span><span class="literal">-centos</span> <span class="number">3.10</span>.<span class="number">0</span><span class="literal">-1160</span>.<span class="number">31.1</span>.el7.x86_64 <span class="comment">#1 SMP Thu Jun 10 13:32:12 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux</span></span><br></pre></td></tr></table></figure><p>åœ¨å¤§éƒ¨åˆ†æ—¶å€™ï¼Œéœ€è¦çš„åªæ˜¯å…¶ä¸­çš„å†…æ ¸ç‰ˆæœ¬ä¿¡æ¯ã€‚æ­¤æ—¶å¯ä»¥ä½¿ç”¨ -r é€‰é¡¹ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> uname <span class="literal">-r</span></span><br><span class="line"><span class="number">3.10</span>.<span class="number">0</span><span class="literal">-1160</span>.<span class="number">31.1</span>.el7.x86_64</span><br></pre></td></tr></table></figure><h3 id="man"><a href="#man" class="headerlink" title="man"></a>man</h3><blockquote><p>åœ¨ Linux ä¸­è·å–å¸®åŠ©æ˜¯ä¸€ä»¶éå¸¸å®¹æ˜“çš„äº‹æƒ…ã€‚Linux ä¸ºå‡ ä¹æ¯ä¸€ä¸ªå‘½ä»¤å’Œç³»ç»Ÿè°ƒç”¨ç¼–å†™äº†å¸®åŠ©æ‰‹å†Œã€‚ä½¿ç”¨manå‘½ä»¤å¯ä»¥æ–¹ä¾¿åœ°è·å–æŸä¸ªå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯ã€‚</p></blockquote><p>ä»¥å‰æŸ¥çœ‹å‘½ä»¤çš„å¸®åŠ©ï¼Œä¸€èˆ¬ä½¿ç”¨ <code>--help</code> é€‰é¡¹ï¼Œä½†æ˜¯ man å‘½ä»¤è·å–åˆ°çš„å¸®åŠ©ä¿¡æ¯æ˜æ˜¾â€œå¥½çœ‹â€å¤šäº†ã€‚é‚£æˆ‘ä»¬çœ‹çœ‹ <code>man man</code> æ˜¯ä»€ä¹ˆå§ï¼Œå“ˆå“ˆå“ˆ</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">MAN</span>(<span class="number">1</span>)                                        Manual pager utils                                       <span class="built_in">MAN</span>(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">       <span class="built_in">man</span> - an interface to the on<span class="literal">-line</span> reference manuals</span><br><span class="line"></span><br><span class="line">SYNOPSIS</span><br><span class="line">       <span class="built_in">man</span>  [-<span class="type">C</span> <span class="type">file</span>] [-<span class="type">d</span>] [-<span class="type">D</span>] [--<span class="type">warnings</span>[=<span class="type">warnings</span>]] [-<span class="type">R</span> <span class="type">encoding</span>] [-<span class="type">L</span> <span class="type">locale</span>] [-<span class="type">m</span> <span class="type">system</span>[,<span class="type">...</span>]] [-<span class="type">M</span> <span class="type">path</span>]</span><br><span class="line">       [-<span class="type">S</span> <span class="type">list</span>] [-<span class="type">e</span> <span class="type">extension</span>] [-<span class="type">i</span>|-<span class="type">I</span>] [--<span class="type">regex</span>|--<span class="type">wildcard</span>] [--<span class="type">names</span>-<span class="type">only</span>]  [-<span class="type">a</span>]  [-<span class="type">u</span>]  [--<span class="type">no</span>-<span class="type">subpages</span>]  [-<span class="type">P</span></span><br><span class="line">       <span class="type">pager</span>]  [-<span class="type">r</span>  <span class="type">prompt</span>]  [-<span class="number">7</span>]  [-<span class="type">E</span>  <span class="type">encoding</span>]  [--<span class="type">no</span>-<span class="type">hyphenation</span>]  [--<span class="type">no</span>-<span class="type">justification</span>]  [-<span class="type">p</span> <span class="built_in">string</span>] [-<span class="type">t</span>]</span><br><span class="line">       [-<span class="type">T</span>[<span class="type">device</span>]] [-<span class="type">H</span>[<span class="type">browser</span>]] [-<span class="type">X</span>[<span class="type">dpi</span>]] [-<span class="type">Z</span>] [[<span class="type">section</span>] <span class="type">page</span> <span class="type">...</span>] ...</span><br><span class="line">       <span class="built_in">man</span> <span class="literal">-k</span> [<span class="type">apropos</span> <span class="type">options</span>] regexp ...</span><br><span class="line">       <span class="built_in">man</span> <span class="literal">-K</span> [-<span class="type">w</span>|-<span class="type">W</span>] [-<span class="type">S</span> <span class="type">list</span>] [-<span class="type">i</span>|-<span class="type">I</span>] [--<span class="type">regex</span>] [<span class="type">section</span>] term ...</span><br><span class="line">       <span class="built_in">man</span> <span class="operator">-f</span> [<span class="type">whatis</span> <span class="type">options</span>] page ...</span><br><span class="line">       <span class="built_in">man</span> <span class="literal">-l</span> [-<span class="type">C</span> <span class="type">file</span>] [-<span class="type">d</span>] [-<span class="type">D</span>] [--<span class="type">warnings</span>[=<span class="type">warnings</span>]] [-<span class="type">R</span> <span class="type">encoding</span>] [-<span class="type">L</span> <span class="type">locale</span>] [-<span class="type">P</span>  <span class="type">pager</span>]  [-<span class="type">r</span>  <span class="type">prompt</span>]</span><br><span class="line">       [-<span class="number">7</span>] [-<span class="type">E</span> <span class="type">encoding</span>] [-<span class="type">p</span> <span class="built_in">string</span>] [-<span class="type">t</span>] [-<span class="type">T</span>[<span class="type">device</span>]] [-<span class="type">H</span>[<span class="type">browser</span>]] [-<span class="type">X</span>[<span class="type">dpi</span>]] [-<span class="type">Z</span>] file ...</span><br><span class="line">       <span class="built_in">man</span> <span class="literal">-w</span>|<span class="literal">-W</span> [-<span class="type">C</span> <span class="type">file</span>] [-<span class="type">d</span>] [-<span class="type">D</span>] page ...</span><br><span class="line">       <span class="built_in">man</span> <span class="literal">-c</span> [-<span class="type">C</span> <span class="type">file</span>] [-<span class="type">d</span>] [-<span class="type">D</span>] page ...</span><br><span class="line">       <span class="built_in">man</span> [-?<span class="type">V</span>]</span><br><span class="line"></span><br><span class="line">DESCRIPTION</span><br><span class="line">...</span><br><span class="line">Manual page <span class="built_in">man</span>(<span class="number">1</span>) line <span class="number">1</span> (press <span class="built_in">h</span> <span class="keyword">for</span> help or q to quit)</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°æœ€åä¸€è¡Œï¼Œæ˜¯ä¸æ˜¯è§‰å¾—çœ¼ç†Ÿï¼Œless â€¦ soâ€¦man å‘½ä»¤åœ¨æ˜¾ç¤ºæ‰‹å†Œé¡µæ—¶å®é™…è°ƒç”¨çš„æ˜¯ less ç¨‹åºã€‚</p><h3 id="whatis"><a href="#whatis" class="headerlink" title="whatis"></a>whatis</h3><blockquote><p>man æ‰‹å†Œä¸­çš„é•¿ç¯‡å¤§è®ºæœ‰æ—¶å€™æ˜¾å¾—å¤ªå“•å—¦äº†ä¸€å¾ˆå¤šæƒ…å†µä¸‹ï¼Œäººä»¬åªæ˜¯æƒ³è¦çŸ¥é“ä¸€ä¸ªå‘½ä»¤å¤§æ¦‚å¯ä»¥åšäº›ä»€ä¹ˆã€‚äºæ˜¯ï¼Œwhatis æ»¡è¶³äº†å¤§å®¶çš„å¥½å¥‡å¿ƒã€‚whatis ä»æŸä¸ªç¨‹åºçš„ä½¿ç”¨æ‰‹å†Œé¡µä¸­æŠ½å‡ºä¸€è¡Œç®€å•çš„ä»‹ç»æ€§æ–‡å­—ï¼Œå¸®åŠ©ç”¨æˆ·äº†è§£è¿™ä¸ªç¨‹åºçš„å¤§è‡´ç”¨é€”ã€‚whatis çš„åŸç†åŒ locate å‘½ä»¤åŸºæœ¬ä¸€è‡´ã€‚</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> whatis uname</span><br><span class="line">uname (<span class="number">1</span>)            - print system information</span><br></pre></td></tr></table></figure><p>æˆ‘å‘ç° Linux çš„å‘½ä»¤æœ‰æ„æ€çš„ä¸€ç‚¹æ˜¯â€œæˆ‘å¦å®šæˆ‘è‡ªå·±ï¼Œæˆ‘å®Œå–„æˆ‘è‡ªå·±â€ ã€‚ğŸ˜‚</p><h3 id="apropos"><a href="#apropos" class="headerlink" title="apropos"></a>apropos</h3><blockquote><p>å’Œ whatis ç›¸åï¼Œé€šè¿‡æœç´¢ä½¿ç”¨æ‰‹å†Œä¸­çš„å…³é”®å­—ï¼Œå¸®æˆ‘ä»¬åæŸ¥åˆ°æƒ³è¦çš„å‘½ä»¤ã€‚</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> apropos search</span><br><span class="line">apropos (<span class="number">1</span>)          - search the manual page names and descriptions</span><br><span class="line">ausearch (<span class="number">8</span>)         - a tool to query audit daemon logs</span><br><span class="line">au<span class="built_in">search-expression</span> (<span class="number">5</span>) - audit search expression format</span><br><span class="line">badblocks (<span class="number">8</span>)        - search a device <span class="keyword">for</span> bad blocks</span><br><span class="line">bzgrep (<span class="number">1</span>)           - search possibly bzip2 compressed files <span class="keyword">for</span> a regular expression</span><br><span class="line">find (<span class="number">1</span>)             - search <span class="keyword">for</span> files <span class="keyword">in</span> a directory hierarchy</span><br><span class="line">git<span class="literal">-bisect</span> (<span class="number">1</span>)       - Find by binary search the change that introduced a bug</span><br><span class="line">manpath (<span class="number">1</span>)          - determine search path <span class="keyword">for</span> manual pages</span><br><span class="line">npm<span class="literal">-help</span><span class="literal">-search</span> (<span class="number">1</span>)  - Search npm help documentation</span><br><span class="line">npm<span class="literal">-search</span> (<span class="number">1</span>)       - Search <span class="keyword">for</span> packages</span><br><span class="line">oldfind (<span class="number">1</span>)          - search <span class="keyword">for</span> files <span class="keyword">in</span> a directory hierarchy</span><br><span class="line">Pod::Simple::Search (<span class="number">3</span>pm) - find POD documents <span class="keyword">in</span> directory trees</span><br><span class="line">Search::Dict (<span class="number">3</span>pm)   - look - search <span class="keyword">for</span> key <span class="keyword">in</span> dictionary file</span><br><span class="line">vgscan (<span class="number">8</span>)           - Search <span class="keyword">for</span> all volume groups</span><br><span class="line">xzegrep (<span class="number">1</span>)          - search compressed files <span class="keyword">for</span> a regular expression</span><br><span class="line">xzfgrep (<span class="number">1</span>)          - search compressed files <span class="keyword">for</span> a regular expression</span><br><span class="line">xzgrep (<span class="number">1</span>)           - search compressed files <span class="keyword">for</span> a regular expression</span><br><span class="line">zgrep (<span class="number">1</span>)            - search possibly compressed files <span class="keyword">for</span> a regular expression</span><br><span class="line">zipgrep (<span class="number">1</span>)          - search files <span class="keyword">in</span> a ZIP archive <span class="keyword">for</span> lines matching a pattern</span><br></pre></td></tr></table></figure><hr><p>åŸºç¡€çš„ Shell å‘½ä»¤æš‚æ—¶å­¦åˆ°è¿™é‡Œã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰- Shell åˆè¯†</title>
      <link href="/2022/02/23/Linux_Shell/"/>
      <url>/2022/02/23/Linux_Shell/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><h2 id="ä»€ä¹ˆæ˜¯-Shell"><a href="#ä»€ä¹ˆæ˜¯-Shell" class="headerlink" title="ä»€ä¹ˆæ˜¯ Shell"></a>ä»€ä¹ˆæ˜¯ Shell</h2><p>ä¹‹å‰æˆ‘ä¸€ç›´æ··æ·†äº†å‡ ä¸ªæ¦‚å¿µï¼šå‘½ä»¤è¡Œã€è„šæœ¬ã€å‘½ä»¤è§£é‡Šå™¨ã€Shellã€‚</p><blockquote><p>ä»ä¸¥æ ¼æ„ä¹‰ä¸Šè®²ï¼Œå‘½ä»¤è¡ŒæŒ‡çš„æ˜¯ä¾›ç”¨æˆ·è¾“å…¥å‘½ä»¤çš„ç•Œé¢ï¼Œå…¶æœ¬èº«åªæ˜¯æ¥å—è¾“å…¥ï¼Œç„¶åæŠŠå‘½ä»¤ä¼ é€’ç»™å‘½ä»¤è§£é‡Šå™¨ã€‚åè€…å°±æ˜¯ Shellã€‚ä»æœ¬è´¨ä¸Šè®²ï¼ŒShell æ˜¯ä¸€ä¸ªç¨‹åºï¼Œå®ƒåœ¨ç”¨æˆ·å’Œæ“ä½œç³»ç»Ÿä¹‹é—´æä¾›äº†ä¸€ä¸ªé¢å‘è¡Œçš„å¯äº¤äº’æ¥å£ã€‚ç”¨æˆ·åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥å‘½ä»¤ï¼Œè¿è¡Œåœ¨åå°çš„ Shell æŠŠå‘½ä»¤è½¬æ¢æˆæŒ‡ä»¤ä»£ç å‘é€ç»™æ“ä½œç³»ç»Ÿã€‚Shell æä¾›äº†å¾ˆå¤šé«˜çº§ç‰¹æ€§ï¼Œä½¿å¾—ç”¨æˆ·å’Œæ“ä½œç³»ç»Ÿé—´çš„äº¤äº’å˜å¾—ç®€ä¾¿å’Œé«˜æ•ˆã€‚</p><p>ç›®å‰ï¼Œåœ¨ Linux ç¯å¢ƒä¸‹æœ‰å‡ ç§ä¸åŒç±»å‹çš„ Shell, å¸¸ç”¨çš„æœ‰ Bourne Again Shell(BASH)ã€TCSH Shellã€ Z-Shell ç­‰ã€‚ä¸åŒçš„ Shell æä¾›ä¸å°½ç›¸åŒçš„è¯­æ³•å’Œç‰¹æ€§ï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ä»»ä½•ä¸€ç§ Shellã€‚åœ¨ Linux ä¸Šï¼ŒBASH shell æ˜¯é»˜è®¤å®‰è£…å’Œä½¿ç”¨çš„ Shellã€‚</p></blockquote><p>åœ¨ BASH ä¸­ï¼Œå‘½ä»¤è¡Œä»¥ <code>$</code> ä¸ºæç¤ºç¬¦ï¼Œè¡¨ç¤ºæˆ‘ä»¬å¯ä»¥å¼€å§‹è¾“å…¥å‘½ä»¤äº†ï¼Œä»¥ root èº«ä»½æ‰§è¡Œå‘½ä»¤æ—¶ï¼ŒShell æç¤ºç¬¦å·ä¸º <code>#</code>ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##[ç”¨æˆ·å@ä¸»æœºå ç›®å½•]æç¤ºç¬¦ å‘½ä»¤</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> ~]<span class="comment"># ç™»å‡º</span></span><br><span class="line">[<span class="type">tommy</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> ~]<span class="variable">$</span> ç™»å‡º</span><br></pre></td></tr></table></figure><p><strong>FYI</strong>ï¼šLinux ä¸­å‘½ä»¤å’Œæ–‡ä»¶åéƒ½æ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚</p><h2 id="å°è¯•ç‰›åˆ€"><a href="#å°è¯•ç‰›åˆ€" class="headerlink" title="å°è¯•ç‰›åˆ€"></a>å°è¯•ç‰›åˆ€</h2><span id="more"></span><h3 id="cd"><a href="#cd" class="headerlink" title="cd /"></a>cd /</h3><blockquote><p>è¿›å…¥æ ¹ç›®å½•</p></blockquote><h3 id="ls"><a href="#ls" class="headerlink" title="ls"></a>ls</h3><blockquote><p>åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•</p></blockquote><h3 id="cd-home"><a href="#cd-home" class="headerlink" title="cd home/"></a>cd home/</h3><blockquote><p>è¿›å…¥ /home ç›®å½•ï¼Œhome ç›®å½•ä¸­å­˜æ”¾ç€ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œä¸»ç›®å½•çš„åå­—å°±æ˜¯ç”¨æˆ·åã€‚</p></blockquote><h3 id="cd-1"><a href="#cd-1" class="headerlink" title="cd"></a>cd</h3><blockquote><p>ä¸å¸¦ä»»ä½•å‚æ•°çš„ cd å‘½ä»¤è¿›å…¥å½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚ç”¨æˆ·ä¸»ç›®å½•é»˜è®¤å¯¹å…¶ä»–ç”¨æˆ·å…³é—­è®¿é—®æƒé™ã€‚</p></blockquote><h3 id="cd-etc"><a href="#cd-etc" class="headerlink" title="cd /etc/"></a>cd /etc/</h3><blockquote><p>è¿›å…¥ /etc/ ç›®å½•ï¼Œè¿™ä¸ªç›®å½•å­˜æ”¾ç€ç³»ç»Ÿä»¥åŠç»å¤§éƒ¨åˆ†åº”ç”¨è½¯ä»¶çš„é…ç½®æ–‡ä»¶ã€‚</p></blockquote><h3 id="cat-fstab"><a href="#cat-fstab" class="headerlink" title="cat fstab"></a>cat fstab</h3><blockquote><p>æŸ¥çœ‹ fstab æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†å„ç¡¬ç›˜åˆ†åŒºæ‰€æŒ‚è½½åˆ°çš„ç›®å½•è·¯å¾„ã€‚ï¼ˆè¿™é‡Œæˆ‘æœ‰ç‚¹å„¿æ‡µï¼‰</p></blockquote><h2 id="å‘½ä»¤è¡Œè¡¥å…¨ï¼šTab-é”®"><a href="#å‘½ä»¤è¡Œè¡¥å…¨ï¼šTab-é”®" class="headerlink" title="å‘½ä»¤è¡Œè¡¥å…¨ï¼šTab é”®"></a>å‘½ä»¤è¡Œè¡¥å…¨ï¼šTab é”®</h2><p>&#8195;&#8195;æœ‰äº›å‘½ä»¤å¹¶ä¸æ˜¯ä¸€ä¸ªå•è¯ï¼Œäº¦æˆ–è€…æ–‡ä»¶åä½œä¸ºæœ€å¸¸è§çš„å‚æ•°æœ‰çš„åå­—ä¹Ÿå¾ˆé•¿ä¸å®¹æ˜“è®°ä½ã€‚BASH æä¾›äº†ä¸€ç§ç‰¹æ€§ï¼š<strong>å‘½ä»¤è¡Œè¡¥å…¨</strong>ã€‚ä¾‹å¦‚æˆ‘ä»¬è¾“å…¥ ssï¼Œç„¶åç‚¹å‡» Tab é”®ï¼ŒShell ä¼šæŠŠ ss å¼€å¤´çš„å‘½ä»¤æ‰“å°å‡ºæ¥ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»§ç»­æŒ‰ Tab é”®è¿›è¡Œé€‰æ‹©ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> ss&lt;TAB&gt;</span><br><span class="line">SSH_AUTH_SOCK  ssh<span class="literal">-add</span>        ssh<span class="literal">-copy</span><span class="literal">-id</span>    ssh<span class="literal">-keyscan</span>    sso_util</span><br><span class="line">ssh            ssh<span class="literal">-agent</span>      ssh<span class="literal">-keygen</span>     sshd</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;é‚£å¯¹äºè¾“å…¥æ–‡ä»¶åçš„æ—¶å€™ï¼Œåªéœ€è¦è¾“å…¥å‰é¢å‡ ä¸ªå­—ç¬¦ï¼Œç„¶åæŒ‰ Tab é”®ï¼ŒShell ä¼šè‡ªåŠ¨æŠŠæ–‡ä»¶åè¡¥å…¨ï¼Œå½“ç„¶è¿™å¾—æ˜¯å¯¹åº”ç›®å½•é‡Œé¢å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">tommy</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> ~]<span class="variable">$</span> <span class="built_in">cd</span> /etc/</span><br><span class="line">[<span class="type">tommy</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> <span class="type">etc</span>]<span class="variable">$</span> <span class="built_in">cat</span> fs&lt;TAB&gt;</span><br><span class="line"><span class="comment">#è‡ªåŠ¨è¡¥å…¨ä¸ºï¼š</span></span><br><span class="line">[<span class="type">tommy</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> <span class="type">etc</span>]<span class="variable">$</span> <span class="built_in">cat</span> fscat</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;å¦‚æœä»¥è¾“å…¥çš„å­—ç¬¦å¼€å¤´çš„æ–‡ä»¶ä¸æ­¢ä¸€ä¸ªï¼ŒShell ä¼šåˆ—å‡ºå­—ç¬¦å¼€å¤´çš„æ–‡ä»¶åˆ—è¡¨ï¼š(æˆ‘çœ‹æœ‰çš„ä¹¦ä¸Šè¯´è¦æŒ‰ä¸¤æ¬¡ Tabï¼Ÿ)</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">tommy</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> <span class="type">etc</span>]<span class="variable">$</span> <span class="built_in">cat</span> b&lt;TAB&gt;</span><br><span class="line">bash_completion.d/ bashrc             bashrc.rpmnew      binfmt.d/</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p><strong>FYI</strong>ï¼šç³»ç»Ÿå‘½ä»¤æœ¬è´¨ä¸Šå°±æ˜¯ä¸€äº›å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯ä»¥åœ¨ /usr/bin/ ç›®å½•ä¸‹æ‰¾åˆ°ã€‚ä»è¿™ç§æ„ä¹‰ä¸Šè®²ï¼Œå‘½ä»¤è¡¥å…¨å’Œæ–‡ä»¶åè¡¥å…¨å…¶å®æ˜¯ä¸€å›äº‹ã€‚</p><h2 id="é€šé…ç¬¦ï¼š"><a href="#é€šé…ç¬¦ï¼š" class="headerlink" title="é€šé…ç¬¦ï¼š"></a>é€šé…ç¬¦ï¼š</h2><h3 id><a href="#" class="headerlink" title="*"></a>*</h3><blockquote><p>â€œ*â€ ç”¨äºåŒ¹é…æ–‡ä»¶åä¸­ä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²ã€‚</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">tommy</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> <span class="type">etc</span>]<span class="variable">$</span> <span class="built_in">ls</span> *.conf</span><br><span class="line">asound.conf    libuser.conf    sos.conf</span><br><span class="line">chrony.conf    locale.conf     sudo.conf</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h3 id="-1"><a href="#-1" class="headerlink" title="?"></a>?</h3><blockquote><p>å’Œâ€œ/*â€ ç›¸ç±»ä¼¼çš„é€šé…ç¬¦æ˜¯â€œ?â€ã€‚ä½†å’Œâ€œ/*â€ åŒ¹é…ä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²ä¸åŒï¼Œâ€œ?â€ åªåŒ¹é…ä¸€ä¸ªå­—ç¬¦ã€‚</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">tommy</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> <span class="type">etc</span>]<span class="variable">$</span> <span class="built_in">ls</span> host?</span><br><span class="line">hosts</span><br><span class="line">[<span class="type">tommy</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> <span class="type">etc</span>]<span class="variable">$</span> <span class="built_in">ls</span> host*</span><br><span class="line">host.conf  hostname  hosts  hosts.allow  hosts.deny</span><br></pre></td></tr></table></figure><h3 id="-2"><a href="#-2" class="headerlink" title="[]"></a>[]</h3><blockquote><p>â€œ[]â€ç”¨äºåŒ¹é…æ‰€æœ‰å‡ºç°åœ¨æ–¹æ‹¬å·å†…çš„å­—ç¬¦ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼Œåˆ—å‡ºä»¥ rp å¼€å¤´è€Œä»…ä»¥ c æˆ– m ç»“å°¾çš„æ–‡ä»¶åæˆ–ç›®å½•ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">tommy</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> <span class="type">etc</span>]<span class="variable">$</span> <span class="built_in">ls</span> <span class="built_in">rp</span>[<span class="type">cm</span>]</span><br><span class="line">rpc</span><br><span class="line"></span><br><span class="line">rpm:</span><br><span class="line">macros.dist  macros.perl</span><br></pre></td></tr></table></figure><p>å…¶ä»–ç”¨æ³•ï¼š<code>ls text[1-3]</code> åˆ—å‡ºæ‰€æœ‰ä»¥ text å¼€å¤´å¹¶ä»¥ 1~3 ä¸­æŸä¸ªå­—ç¬¦(åŒ…æ‹¬1å’Œ3)ç»“æŸçš„æ–‡ä»¶ï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨å­—æ¯èŒƒå›´ï¼Œåœ¨ ASCII å­—ç¬¦é›†ä¸­ï¼ŒA-Z åŒ¹é…æ‰€æœ‰å¤§å†™å­—æ¯ï¼š<code>ls text[A-C]</code>ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰- ç”¨æˆ·</title>
      <link href="/2022/02/18/Linux_user/"/>
      <url>/2022/02/18/Linux_user/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><p>&#8195;&#8195;ä¸€ç›´æƒ³å­¦ä¹  Linuxï¼Œä½†æ— å¥ˆå°ç™½ä¸çŸ¥é“ä»ä½•å…¥æ‰‹ã€‚ç»å¸¸çœ‹ç¾¤é‡ŒæœåŠ¡ç«¯çš„åŒäº‹æåˆ° root ã€sudoï¼Œé‚£æˆ‘æƒ³ç€ä»ç”¨æˆ·ç®¡ç†å…¥æ‰‹ï¼Œå…ˆè®¤æ¸…æ¥šå¤§å°ç‹æ€»æ˜¯å¯ä»¥çš„å§ï¼Œè¶å·¥ä½œçš„ç©ºæ¡£å­¦ä¹ äº†ä¸€äº›åŸºæœ¬çŸ¥è¯†ï¼Œå¤§éƒ¨åˆ†æè¿°æ¥è‡ªäºã€ŠLinuxä»å…¥é—¨åˆ°ç²¾é€šã€‹ä¸€ä¹¦ã€‚</p><p>è®°å½•ä¸€ä¸‹å°è¯•è¿‡çš„å‘½ä»¤ï¼š</p><h2 id="root-å¯ä»¥åšä»€ä¹ˆ"><a href="#root-å¯ä»¥åšä»€ä¹ˆ" class="headerlink" title="root å¯ä»¥åšä»€ä¹ˆ"></a>root å¯ä»¥åšä»€ä¹ˆ</h2><p>&#8195;&#8195;è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆæ˜¯ anythingã€‚æ²¡é”™ï¼Œä½œä¸ºæ•´ä¸ªç³»ç»Ÿä¸­æ‹¥æœ‰æœ€é«˜æƒé™çš„ç”¨æˆ·ï¼Œroot å¯ä»¥å¯¹ç³»ç»Ÿåšä»»ä½•äº‹æƒ…ã€‚root å¯ä»¥è®¿é—®ã€ä¿®æ”¹ã€åˆ é™¤ç³»ç»Ÿä¸­çš„ä»»ä½•æ–‡ä»¶å’Œç›®å½•ã€‚å¦å¤–ï¼Œå¯¹äºå¦‚ä¸‹è¿™äº›å—é™çš„æ“ä½œï¼Œä¸€èˆ¬åªæœ‰ root ç”¨æˆ·èƒ½å¤Ÿæ‰§è¡Œã€‚</p><ul><li>æ·»åŠ åˆ é™¤ç”¨æˆ·;</li><li>å®‰è£…è½¯ä»¶;</li><li>æ·»åŠ åˆ é™¤è®¾å¤‡;</li><li>å¯åŠ¨å’Œåœæ­¢ç½‘ç»œæœåŠ¡;</li><li>æŸäº›ç³»ç»Ÿè°ƒç”¨(ä¾‹å¦‚å¯¹å†…æ ¸çš„è¯·æ±‚);</li><li>å…³é—­ç³»ç»Ÿã€‚</li></ul><p><strong>æç¤º</strong>ï¼šåƒâ€œå…³é—­ç³»ç»Ÿâ€è¿™æ ·çš„æ“ä½œéƒ½éœ€è¦ root ç”¨æˆ·æ¥æ‰§è¡Œï¼Œçœ‹èµ·æ¥æ˜¯ä¸€ä»¶ç‰¹åˆ«å¤æ€ªçš„äº‹æƒ…ã€‚äº‹å®ä¸Šï¼Œä½œä¸º Linux çš„ç¥–å…ˆï¼ŒUNIX æ˜¯ä¸€ç§å…¸å‹çš„æœåŠ¡å™¨æ“ä½œç³»ç»Ÿã€‚è€ŒæœåŠ¡å™¨çš„å…³é—­å’Œå¯åŠ¨éƒ½å¿…é¡»å¾—åˆ°ç®¡ç†å‘˜çš„æˆæƒ(è¯•æƒ³ä¸€ä¸ªæ™®é€šç”¨æˆ·ç™»å½•æœåŠ¡å™¨ï¼Œç„¶åéšæ„æ‰§è¡Œå…³æœºå‘½ä»¤ä¼šæ€æ ·)ã€‚å‡ºäºæ“ä½œç®€æ˜“æ€§çš„è€ƒè™‘ï¼Œæ¡Œé¢ç‰ˆçš„ Linux å…è®¸æ™®é€šç”¨æˆ·åœ¨å›¾å½¢ç•Œé¢ä¸‹å…³é—­ç³»ç»Ÿã€‚ä½†åœ¨å‘½ä»¤è¡Œä¸‹æ‰§è¡Œå…³æœºå‘½ä»¤ä»ç„¶éœ€è¦ root å£ä»¤ã€‚Linux ç³»ç»Ÿä¸Šçš„æ¯ä¸ªæ–‡ä»¶å’Œç›®å½•éƒ½å±äºæŸä¸ªç‰¹å®šçš„ç”¨æˆ·ï¼Œæ²¡æœ‰å¾—åˆ°è®¸å¯ï¼Œå…¶ä»–ç”¨æˆ·å°±ä¸èƒ½è®¿é—®è¿™äº›å¯¹è±¡ã€‚ä½† root ç”¨æˆ·å´å¯ä»¥è®¿é—®æ‰€æœ‰ç”¨æˆ·çš„æ–‡ä»¶ï¼Œå°±åƒä½¿ç”¨è‡ªå·±çš„ä¸œè¥¿ä¸€æ ·ã€‚</p><p>&#8195;&#8195;ç³»ç»Ÿä¸ä¼šå› ä¸ºç”¨æˆ·è¾“å…¥çš„å‘½ä»¤è¶³å¤Ÿâ€œæ„šè ¢â€è€Œæ‹’ç»æ‰§è¡Œã€‚ç›¸åï¼Œç³»ç»Ÿä¼šç¾æ»‹æ»‹åœ°æ‰§è¡Œè¿™æ ·ä¸€æ¡å‘½ä»¤ï¼Œç„¶åæŠŠè‡ªå·±å®Œå®Œæ•´æ•´åœ°åˆ é™¤äº†ï¼Œä¾‹å¦‚æ±Ÿæ¹–ä¼ è¯´ï¼š<code>rm -rf /*</code>ã€‚</p><center>    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/Dont-drink-and-root.jpeg" class width="300"></div></center><span id="more"></span><p>Soâ€¦ <strong>Donâ€™t drink and root.</strong> æ—¥å¸¸å·¥ä½œã€å­¦ä¹ éƒ½å°½é‡å»ºç«‹è‡ªå·±ä¸“å±çš„ç”¨æˆ·æ¥æ“ä½œç³»ç»Ÿï¼Œè¿™åº”è¯¥æ˜¯ä¸ªå¥½ä¹ æƒ¯å§ï¼Œæ²¡å¿…è¦å†’æ²¡å¿…è¦çš„é™©ğŸ¤“~</p><h3 id="root-å£ä»¤"><a href="#root-å£ä»¤" class="headerlink" title="root å£ä»¤"></a>root å£ä»¤</h3><blockquote><p>ä»…åœ¨å¿…è¦çš„æ—¶å€™æ‰ä½¿ç”¨ root è´¦å·ï¼Œä¾‹å¦‚æ–°å»ºæ™®é€šç”¨æˆ·ã€‚</p></blockquote><h3 id="su"><a href="#su" class="headerlink" title="su"></a>su</h3><p>ç”¨æˆ·å¯ä»¥æ‰§è¡Œä¸å¸¦å‚æ•°çš„ <code>su</code> å‘½ä»¤å°†è‡ªå·±æå‡è‡³ root æƒé™ï¼Œéœ€è¦ root å£ä»¤ã€‚</p><h3 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h3><p>å¯ä»¥ä¸´æ—¶ä½¿ç”¨ root èº«ä»½è¿è¡Œä¸€ä¸ªç¨‹åºï¼Œå¹¶åœ¨ç¨‹åºæ‰§è¡Œå®Œæ¯•åè¿”å›æ™®é€šç”¨æˆ·æƒé™ã€‚<code>sudo -s</code> å°†è‡ªå·±æå‡ä¸º root ç”¨æˆ·ï¼Œç­‰åŒäº <code>su</code>ï¼Œ<code>exit</code> å›åˆ°å…ˆå‰çš„ç”¨æˆ·çŠ¶æ€ã€‚</p><h2 id="ç”¨æˆ·ä¸ç”¨æˆ·ç»„"><a href="#ç”¨æˆ·ä¸ç”¨æˆ·ç»„" class="headerlink" title="ç”¨æˆ·ä¸ç”¨æˆ·ç»„"></a>ç”¨æˆ·ä¸ç”¨æˆ·ç»„</h2><p>Linux å¯ä»¥å…è®¸å¤šä¸ªç”¨æˆ·åŒæ—¶ç™»å½•åˆ°ç³»ç»Ÿä¸Šï¼Œå¹¶å“åº”æ¯ä¸€ä¸ªç”¨æˆ·çš„è¯·æ±‚ã€‚ç³»ç»Ÿç®¡ç†å‘˜çš„æƒé™ï¼š</p><ul><li>æ·»åŠ å’Œåˆ é™¤ç”¨æˆ·</li><li>åˆ†é…ç”¨æˆ·ä¸»ç›®å½•</li><li>é™åˆ¶ç”¨æˆ·çš„æƒé™</li></ul><p>&#8195;&#8195;Linux ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œç„¶åç”±è¿™ä¸ªè¿›ç¨‹æ¥å—ç”¨æˆ·çš„å„ç§è¯·æ±‚ã€‚å¯¹äºç”¨æˆ·ç»„æƒé™ï¼Œç»„å‘˜è‡ªåŠ¨æ‹¥æœ‰ç»„çš„æƒé™ã€‚å¤šäººåä½œçš„é¡¹ç›®ï¼Œå®šä¹‰ä¸€ä¸ªç»„éå¸¸æœ‰ç”¨ã€‚<br>&#8195;&#8195;åœ¨æŸäº›æœåŠ¡å™¨ç¨‹åºå®‰è£…æ—¶ï¼Œä¼šç”Ÿæˆä¸€äº›ç‰¹å®šçš„ç”¨æˆ·å’Œç”¨æˆ·ç»„ï¼Œç”¨äºå¯¹æœåŠ¡å™¨è¿›è¡Œç®¡ç†ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ mysql ç”¨æˆ·å¯åŠ¨å’Œåœæ­¢ MySQL æœåŠ¡å™¨ï¼Œè¿˜æœ‰ nginx ç­‰ç­‰ã€‚ä¹‹æ‰€ä»¥ä¸ç”¨ root ç”¨æˆ·å¯åŠ¨æŸäº›æœåŠ¡ï¼Œä¸»è¦æ˜¯å‡ºäºå®‰å…¨æ€§çš„è€ƒè™‘ã€‚</p><h2 id="useradd"><a href="#useradd" class="headerlink" title="useradd"></a>useradd</h2><blockquote><p>æ·»åŠ ç”¨æˆ·</p></blockquote><ul><li>æ·»åŠ åä¸º tommy çš„ç”¨æˆ·ï¼Œå¹¶è‡ªåŠ¨å»ºç«‹ä¸»ç›®å½•ï¼š</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd <span class="literal">-m</span> tommy</span><br></pre></td></tr></table></figure><ul><li>æ›´æ”¹ tommy çš„ç™»å½•å¯†ç ï¼š</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd tommy</span><br></pre></td></tr></table></figure><ul><li>ä¸ºæŸä¸ªç»„æ–°å»ºç”¨æˆ·ï¼šå»ºç«‹åä¸º tommy çš„è´¦å·ï¼Œå¹¶æŒ‡å®šå…¶å±äº guys ç»„ï¼š</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd <span class="literal">-g</span> guys tommy</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;åœ¨ç”¨æˆ·å»ºç«‹çš„æ—¶å€™ä¸ºå…¶æŒ‡å®šä¸€ä¸ªç»„çœ‹ä¸Šå»æ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„æƒ³æ³•ã€‚ä½†é—æ†¾çš„æ˜¯ï¼Œè¿™æ ·çš„è®¾ç½®å¢åŠ äº†ç”¨æˆ·ç”±äºä¸ç»æ„é—´åœ°è®¾ç½®æƒé™è€Œèƒ½å¤Ÿå½¼æ­¤è¯»å–æ–‡ä»¶çš„å¯èƒ½æ€§ï¼Œå°½ç®¡è¿™é€šå¸¸ä¸æ˜¯ç”¨æˆ·çš„æœ¬æ„ã€‚å› æ­¤ä¸€ä¸ªå¥½çš„å»ºè®®æ˜¯ï¼Œåœ¨æ–°å»ºç”¨æˆ·çš„æ—¶å€™ç”¨æˆ·å•ç‹¬åˆ›å»ºä¸€ä¸ªåŒåçš„ç”¨æˆ·ç»„ï¼Œç„¶åæŠŠç”¨æˆ·å½’å…¥è¿™ä¸ªç»„ã€‚è¿™æ­£æ˜¯ä¸å¸¦ -g å‚æ•°çš„ useradd å‘½ä»¤çš„é»˜è®¤è¡Œä¸ºã€‚</p><ul><li>å»ºç«‹åä¸º tommy çš„ç”¨æˆ·ï¼Œå¹¶æŒ‡å®šå…¶ç™»å½•åä½¿ç”¨ bash ä½œä¸º Shellï¼š</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd <span class="literal">-s</span> /bin/bash tommy</span><br></pre></td></tr></table></figure><p>å‚æ•°é€‰é¡¹ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-b</span>, -<span class="literal">-base</span><span class="literal">-dir</span> BASE_DIR <span class="comment">#..........æ–°è´¦æˆ·çš„ä¸»ç›®å½•çš„åŸºç›®å½•</span></span><br><span class="line"><span class="literal">-c</span>, -<span class="literal">-comment</span> COMMENT <span class="comment">#............æ–°è´¦æˆ·çš„ GECOS å­—æ®µ</span></span><br><span class="line"><span class="literal">-d</span>, -<span class="literal">-home</span><span class="literal">-dir</span> HOME_DIR <span class="comment">#..........æ–°è´¦æˆ·çš„ä¸»ç›®å½•</span></span><br><span class="line"><span class="literal">-D</span>, -<span class="literal">-defaults</span> <span class="comment">#...................æ˜¾ç¤ºæˆ–æ›´æ”¹é»˜è®¤çš„ useradd é…ç½®</span></span><br><span class="line"><span class="literal">-e</span>, -<span class="literal">-expiredate</span> EXPIRE_DATE <span class="comment">#.....æ–°è´¦æˆ·çš„è¿‡æœŸæ—¥æœŸ</span></span><br><span class="line"><span class="operator">-f</span>, -<span class="literal">-inactive</span> INACTIVE <span class="comment">#..........æ–°è´¦æˆ·çš„å¯†ç ä¸æ´»åŠ¨æœŸ</span></span><br><span class="line"><span class="literal">-g</span>, -<span class="literal">-gid</span> <span class="built_in">GROUP</span> <span class="comment">#..................æ–°è´¦æˆ·ä¸»ç»„çš„åç§°æˆ– ID</span></span><br><span class="line"><span class="literal">-G</span>, -<span class="literal">-groups</span> GROUPS <span class="comment">#..............æ–°è´¦æˆ·çš„é™„åŠ ç»„åˆ—è¡¨</span></span><br><span class="line"><span class="literal">-h</span>, -<span class="literal">-help</span> <span class="comment">#.......................æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯å¹¶æ¨å‡º</span></span><br><span class="line"><span class="literal">-k</span>, -<span class="literal">-skel</span> SKEL_DIR <span class="comment">#..............ä½¿ç”¨æ­¤ç›®å½•ä½œä¸ºéª¨æ¶ç›®å½•</span></span><br><span class="line"><span class="literal">-K</span>, -<span class="literal">-key</span> KEY=VALUE <span class="comment">#..............ä¸ä½¿ç”¨ /etc/login.defs ä¸­çš„é»˜è®¤å€¼</span></span><br><span class="line"><span class="literal">-l</span>, -<span class="literal">-no</span><span class="literal">-log</span><span class="literal">-init</span> <span class="comment">#................ä¸è¦å°†æ­¤ç”¨æˆ·æ·»åŠ åˆ°æœ€è¿‘ç™»å½•å’Œç™»å½•å¤±è´¥æ•°æ®åº“</span></span><br><span class="line"><span class="literal">-m</span>, -<span class="literal">-create</span><span class="literal">-home</span> <span class="comment">#................åˆ›å»ºç”¨æˆ·çš„ä¸»ç›®å½•</span></span><br><span class="line"><span class="literal">-M</span>, -<span class="literal">-no</span><span class="literal">-create</span><span class="literal">-home</span> <span class="comment">#.............ä¸åˆ›å»ºç”¨æˆ·çš„ä¸»ç›®å½•</span></span><br><span class="line"><span class="literal">-N</span>, -<span class="literal">-no</span><span class="literal">-user</span><span class="literal">-group</span> <span class="comment">#..............ä¸åˆ›å»ºåŒåçš„ç»„</span></span><br><span class="line"><span class="literal">-o</span>, -<span class="literal">-non</span><span class="literal">-unique</span> <span class="comment">#.................å…è®¸ä½¿ç”¨é‡å¤çš„ UID åˆ›å»ºç”¨æˆ·</span></span><br><span class="line"><span class="literal">-p</span>, -<span class="literal">-password</span> PASSWORD<span class="comment">#..........åŠ å¯†åçš„æ–°è´¦æˆ·å¯†ç </span></span><br><span class="line"><span class="literal">-r</span>, -<span class="literal">-system</span> <span class="comment">#.....................åˆ›å»ºä¸€ä¸ªç³»ç»Ÿè´¦æˆ·</span></span><br><span class="line"><span class="literal">-R</span>, -<span class="literal">-root</span> CHROOT_DIR <span class="comment">#............chroot åˆ°çš„ç›®å½•</span></span><br><span class="line"><span class="literal">-P</span>, -<span class="literal">-prefix</span> PREFIX_DIR <span class="comment">#..........prefix directory where are located the /etc/* files</span></span><br><span class="line"><span class="literal">-s</span>, -<span class="literal">-shell</span> SHELL <span class="comment">#................æ–°è´¦æˆ·çš„ç™»å½• shell</span></span><br><span class="line"><span class="literal">-u</span>, -<span class="literal">-uid</span> UID <span class="comment">#....................æ–°è´¦æˆ·çš„ç”¨æˆ· ID</span></span><br><span class="line"><span class="literal">-U</span>, -<span class="literal">-user</span><span class="literal">-group</span> <span class="comment">#.................åˆ›å»ºä¸ç”¨æˆ·åŒåçš„ç»„</span></span><br><span class="line"><span class="literal">-Z</span>, -<span class="literal">-selinux</span><span class="literal">-user</span> SEUSER <span class="comment">#........ä¸º SELinux ç”¨æˆ·æ˜ å°„ä½¿ç”¨æŒ‡å®š SEUSE</span></span><br></pre></td></tr></table></figure><h2 id="groupadd"><a href="#groupadd" class="headerlink" title="groupadd"></a>groupadd</h2><ul><li>æ·»åŠ ä¸€ä¸ªåä¸º newgroup çš„ç»„ã€‚</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd newgroup</span><br></pre></td></tr></table></figure><h2 id="history"><a href="#history" class="headerlink" title="history"></a>history</h2><blockquote><p>Linuxï¼Œå‡†ç¡®åœ°è¯´æ˜¯ Shellï¼Œä¼šè®°å½•ç”¨æˆ·çš„æ¯ä¸€æ¡å‘½ä»¤ã€‚history å¯ä»¥æŸ¥çœ‹è‡ªå·±æ›¾ç»æ‰§è¡Œçš„æ“ä½œã€‚</p></blockquote><p>ç›´æ¥ä½¿ç”¨ <code>history</code> ä¼šåˆ—å‡ºå½“å‰ç”¨æˆ·æ‰€æœ‰ä½¿ç”¨è¿‡çš„å‘½ä»¤å¹¶åŠ ä»¥ç¼–å·ã€‚å­˜å‚¨åœ¨ç”¨æˆ·ä¸»ç›®å½•çš„ <code>.bash_history</code> æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶é»˜è®¤æƒ…å†µä¸‹å¯ä»¥å­˜å‚¨1000æ¡å‘½ä»¤è®°å½•ã€‚</p><ul><li><code>history 10</code> åˆ—å‡ºæœ€è¿‘ä½¿ç”¨çš„10æ¡å‘½ä»¤</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">tommy</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> ~]<span class="variable">$</span> <span class="built_in">history</span> <span class="number">10</span></span><br><span class="line">   <span class="number">26</span>  <span class="number">2022</span><span class="literal">-02</span><span class="literal">-18</span> <span class="number">12</span>:<span class="number">30</span>:<span class="number">33</span> <span class="built_in">ls</span></span><br><span class="line">   <span class="number">27</span>  <span class="number">2022</span><span class="literal">-02</span><span class="literal">-18</span> <span class="number">12</span>:<span class="number">30</span>:<span class="number">40</span> <span class="built_in">cd</span> ../httpbin</span><br><span class="line">   <span class="number">28</span>  <span class="number">2022</span><span class="literal">-02</span><span class="literal">-18</span> <span class="number">12</span>:<span class="number">30</span>:<span class="number">43</span> <span class="built_in">ls</span></span><br><span class="line">   <span class="number">29</span>  <span class="number">2022</span><span class="literal">-02</span><span class="literal">-18</span> <span class="number">12</span>:<span class="number">31</span>:<span class="number">36</span> <span class="built_in">cd</span> ~</span><br><span class="line">   <span class="number">30</span>  <span class="number">2022</span><span class="literal">-02</span><span class="literal">-18</span> <span class="number">12</span>:<span class="number">31</span>:<span class="number">37</span> <span class="built_in">ls</span></span><br><span class="line">   <span class="number">31</span>  <span class="number">2022</span><span class="literal">-02</span><span class="literal">-18</span> <span class="number">12</span>:<span class="number">31</span>:<span class="number">40</span> git <span class="literal">-v</span></span><br><span class="line">   <span class="number">32</span>  <span class="number">2022</span><span class="literal">-02</span><span class="literal">-18</span> <span class="number">12</span>:<span class="number">31</span>:<span class="number">54</span> git -<span class="literal">-version</span></span><br><span class="line">   <span class="number">33</span>  <span class="number">2022</span><span class="literal">-02</span><span class="literal">-18</span> <span class="number">12</span>:<span class="number">32</span>:<span class="number">18</span> sudo git -<span class="literal">-version</span></span><br><span class="line">   <span class="number">34</span>  <span class="number">2022</span><span class="literal">-02</span><span class="literal">-21</span> <span class="number">13</span>:<span class="number">51</span>:<span class="number">28</span> <span class="built_in">history</span></span><br><span class="line">   <span class="number">35</span>  <span class="number">2022</span><span class="literal">-02</span><span class="literal">-21</span> <span class="number">13</span>:<span class="number">51</span>:<span class="number">32</span> <span class="built_in">history</span> <span class="number">10</span></span><br></pre></td></tr></table></figure><p>history å‘½ä»¤ä»…åœ¨ BASH ä¸­é€‚ç”¨ï¼Ÿï¼Ÿè¿™ä¸ªæˆ‘è¿˜çœŸä¸å¤ªæ¸…æ¥šï¼Œåƒ Mac ZSHï¼ˆZ-Shellï¼‰ä¸Šæ˜¯ç±»ä¼¼è¿™æ ·ç”¨ - <code>history -10</code>ã€‚<br>Linux çš„è®¸å¤šæ“ä½œéƒ½æ˜¯é’ˆå¯¹æ–‡ä»¶çš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç›´æ¥æŸ¥çœ‹æ–‡ä»¶è¾¾åˆ° history çš„æ•ˆæœï¼Œeg:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /home/tommy/</span><br><span class="line">sudo <span class="built_in">cat</span> .bash_history</span><br></pre></td></tr></table></figure><p>.bash_history å¯¹äºå…¶ä»–å—é™ç”¨æˆ·æ˜¯ä¸å¯è¯»çš„ï¼Œè¿™ä¹Ÿæ­£æ˜¯ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ sudo çš„åŸå› ã€‚<br><strong>FYI</strong>ï¼šé¦–æ¬¡ä½¿ç”¨ sudo å‘½ä»¤ä¼šçœ‹åˆ°ä¸‹é¢è´´å¿ƒçš„æç¤ºï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">tommy</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> ~]<span class="variable">$</span> sudo <span class="built_in">cd</span> /etc/</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬ä¿¡ä»»æ‚¨å·²ç»ä»ç³»ç»Ÿç®¡ç†å‘˜é‚£é‡Œäº†è§£äº†æ—¥å¸¸æ³¨æ„äº‹é¡¹ã€‚</span><br><span class="line"></span><br><span class="line">æ€»ç»“èµ·æ¥æ— å¤–ä¹è¿™ä¸‰ç‚¹ï¼š</span><br><span class="line"></span><br><span class="line"><span class="comment">#1) å°Šé‡åˆ«äººçš„éšç§ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#2) è¾“å…¥å‰è¦å…ˆè€ƒè™‘(åæœå’Œé£é™©)ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3) æƒåŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ã€‚</span></span><br><span class="line"></span><br><span class="line">[<span class="type">sudo</span>] tommy çš„å¯†ç ï¼š</span><br><span class="line"></span><br><span class="line">tommy ä¸åœ¨ sudoers æ–‡ä»¶ä¸­ã€‚æ­¤äº‹å°†è¢«æŠ¥å‘Šã€‚</span><br></pre></td></tr></table></figure><h2 id="etc-passwd"><a href="#etc-passwd" class="headerlink" title="/etc/passwd"></a>/etc/passwd</h2><p>åœ¨ Linux ä¸­æ‰€åšçš„ä¸€åˆ‡åŸºæœ¬é…ç½®æœ€ç»ˆéƒ½å°†åæ˜ åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œç”¨æˆ·ç®¡ç†ä¹Ÿä¸ä¾‹å¤–ã€‚æ‰€æœ‰çš„ç”¨æˆ·ä¿¡æ¯éƒ½ç™»è®°åœ¨ /etc/passwd æ–‡ä»¶ä¸­ï¼Œè€Œ /etc/shadow æ–‡ä»¶åˆ™ä¿å­˜ç€ç”¨æˆ·çš„ç™»å½•å¯†ç ã€‚</p><ul><li>passwdï¼šæ‰€æœ‰ç”¨æˆ·å¯è¯»ï¼Œroot å†™ï¼›</li><li>shadowï¼šroot è¯»å†™ã€‚</li></ul><h2 id="us"><a href="#us" class="headerlink" title="us"></a>us</h2><blockquote><p>æŸ¥çœ‹ shadow æ–‡ä»¶çš„å†…å®¹</p></blockquote><p><code>us</code> å‘½ä»¤å¯ä»¥å¾—åˆ° shadow æ–‡ä»¶çš„å†…å®¹ï¼Œé™äºç¯‡å¹…ï¼Œæˆ‘ä»¬ä¸¾ä¾‹è¯´æ˜ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root:<span class="variable">$1</span><span class="variable">$Bg1H</span>/<span class="number">4</span>mz<span class="variable">$X89TqH7tpi9dX1B9j5YsF</span>.:<span class="number">14838</span>:<span class="number">0</span>:<span class="number">99999</span>:<span class="number">7</span>:::</span><br></pre></td></tr></table></figure><p>å…¶æ ¼å¼ä¸ºï¼š</p><p>{ç”¨æˆ·å}ï¼š{åŠ å¯†åçš„å£ä»¤å¯†ç }ï¼š{å£ä»¤æœ€åä¿®æ”¹æ—¶é—´è·åŸç‚¹(1970-1-1)çš„å¤©æ•°}ï¼š{å£ä»¤æœ€å°ä¿®æ”¹é—´éš”(é˜²æ­¢ä¿®æ”¹å£ä»¤ï¼Œå¦‚æœæ—¶é™æœªåˆ°ï¼Œå°†æ¢å¤è‡³æ—§å£ä»¤)ï¼š{å£ä»¤æœ€å¤§ä¿®æ”¹é—´éš”}ï¼š{å£ä»¤å¤±æ•ˆå‰çš„è­¦å‘Šå¤©æ•°}ï¼š{è´¦æˆ·ä¸æ´»åŠ¨å¤©æ•°}ï¼š{è´¦å·å¤±æ•ˆå¤©æ•°}ï¼š{ä¿ç•™}<br>ã€æ³¨ã€‘ï¼šshadow æ–‡ä»¶ä¸ºå¯è¯»æ–‡ä»¶ï¼Œæ™®é€šç”¨æˆ·æ²¡æœ‰è¯»å†™æƒé™ï¼Œè¶…çº§ç”¨æˆ·æ‹¥æœ‰è¯»å†™æƒé™ã€‚å¦‚æœå¯†ç å­—ç¬¦ä¸²ä¸º*ï¼Œåˆ™è¡¨ç¤ºç³»ç»Ÿç”¨æˆ·ä¸èƒ½è¢«ç™»å…¥ï¼›å¦‚æœå­—ç¬¦ä¸²ä¸ºï¼ï¼Œåˆ™è¡¨ç¤ºç”¨æˆ·åè¢«ç¦ç”¨ï¼›å¦‚æœå­—ç¬¦ä¸²ä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºæ²¡æœ‰å¯†ç ã€‚<br>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>passwd â€“d ç”¨æˆ·å</code> æ¸…ç©ºä¸€ä¸ªç”¨æˆ·çš„å£ä»¤å¯†ç ã€‚</p><h2 id="userdel"><a href="#userdel" class="headerlink" title="userdel"></a>userdel</h2><blockquote><p>åˆ é™¤ç”¨æˆ·ã€‚</p></blockquote><ul><li>åˆ é™¤ tommy è¿™ä¸ªç”¨æˆ·ï¼Œä½†é»˜è®¤æƒ…å†µä¸‹ï¼Œå¹¶ä¸ä¼šåˆ é™¤ç”¨æˆ·çš„ä¸»ç›®å½•ï¼š</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel tommy </span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤è´¦å·çš„åŒæ—¶ï¼Œåˆ é™¤å…¶ä¸»ç›®å½•ï¼š</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel <span class="literal">-r</span> tommy  </span><br></pre></td></tr></table></figure><ul><li>æœªåˆ é™¤ç”¨æˆ·ä¸»ç›®å½•ï¼Œå†æ¬¡æ·»åŠ ç”¨æˆ·æ—¶çš„æç¤ºï¼š</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">VM</span>-<span class="number">0</span>-<span class="number">13</span>-<span class="type">centos</span> ~]<span class="variable">$</span> useradd <span class="literal">-m</span> tommy</span><br><span class="line"></span><br><span class="line">useraddï¼šè­¦å‘Šï¼šæ­¤ä¸»ç›®å½•å·²ç»å­˜åœ¨ã€‚</span><br><span class="line"></span><br><span class="line">ä¸ä» skel ç›®å½•é‡Œå‘å…¶ä¸­å¤åˆ¶ä»»ä½•æ–‡ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">æ­£åœ¨åˆ›å»ºä¿¡ç®±æ–‡ä»¶: æ–‡ä»¶å·²å­˜åœ¨</span><br></pre></td></tr></table></figure><p>&#8195;&#8195;åœ¨åˆ é™¤ç”¨æˆ·çš„åŒæ—¶åˆ é™¤å…¶ä¸»ç›®å½•ï¼Œä»¥é‡Šæ”¾ç¡¬ç›˜ç©ºé—´ï¼Œè¿™çœ‹èµ·æ¥æ— å¯åšéã€‚ä½†æ˜¯ï¼Œåœ¨è¾“å…¥ <code>-r</code> é€‰é¡¹ ä¹‹å‰ï¼Œä»æœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦é—®é—®è‡ªå·±ï¼šéœ€è¦è¿™ä¹ˆç€æ€¥å—ï¼Ÿå¦‚æœè¢«åˆ é™¤çš„ç”¨æˆ·åˆè¦æ¢å¤ï¼Œæˆ–è€…ç”¨æˆ·çš„æŸäº›æ–‡ä»¶è¿˜éœ€è¦ä½¿ç”¨ï¼ˆè¿™æ ·çš„æƒ…å†µåœ¨æœåŠ¡å™¨ä¸Šç»å¸¸å‡ºç°ï¼‰ï¼Œé‚£ä¹ˆæœ‰å¿…è¦æš‚æ—¶ä¿ç•™è¿™äº›æ–‡ä»¶ã€‚æ¯”è¾ƒå¦¥å½“çš„æ–¹æ³•æ˜¯ï¼Œå°†è¢«åˆ é™¤çš„çš„ç”¨æˆ·ä¸»ç›®å½•ä¿ç•™å‡ å‘¨ï¼Œç„¶åå†æ‰‹åŠ¨åˆ é™¤ã€‚åœ¨å®é™…çš„å·¥ä½œç¯å¢ƒä¸­ï¼Œè¿™ä¸ªåšæ³•æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚</p><h2 id="usermod"><a href="#usermod" class="headerlink" title="usermod"></a>usermod</h2><blockquote><p>ç®¡ç†ç”¨æˆ·è´¦å·ã€‚</p></blockquote><p>å¸¸ç”¨é€‰é¡¹ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-d</span><span class="comment"># ä¿®æ”¹ç”¨æˆ·ä¸»ç›®å½•</span></span><br><span class="line"><span class="literal">-e</span><span class="comment"># ä¿®æ”¹è´¦å·çš„æœ‰æ•ˆæœŸé™ã€‚ä»¥å…¬å…ƒæœˆ/æ—¥/å¹´çš„å½¢å¼è¡¨ç¤ºï¼ˆMM/DD/YYï¼‰</span></span><br><span class="line"><span class="literal">-g</span><span class="comment"># ä¿®æ”¹ç”¨æˆ·æ‰€å±çš„ç»„</span></span><br><span class="line"><span class="literal">-l</span><span class="comment"># ä¿®æ”¹ç”¨æˆ·è´¦å·åç§°</span></span><br><span class="line"><span class="literal">-s</span><span class="comment"># ä¿®æ”¹ç”¨æˆ·ç™»å½•åæ‰€ä½¿ç”¨çš„çš„ Shell</span></span><br></pre></td></tr></table></figure><ul><li>æŠŠ john æ”¹ä¸º mikeï¼Œæœ‰æ•ˆæœŸæ˜¯ 12/31/22 :</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod <span class="literal">-l</span> mike <span class="literal">-d</span> /home/mike <span class="literal">-e</span> <span class="number">12</span>/<span class="number">31</span>/<span class="number">22</span> john</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹æ­£åœ¨ç™»å½•çš„ç”¨æˆ·ï¼Œæç¤ºï¼š</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod: user tommy is currently used by <span class="keyword">process</span> <span class="number">28693</span></span><br></pre></td></tr></table></figure><p>å‚æ•°é€‰é¡¹ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-c</span>, -<span class="literal">-comment</span> <span class="comment">#....................æ³¨é‡Š GECOS å­—æ®µçš„æ–°å€¼</span></span><br><span class="line"><span class="literal">-d</span>, -<span class="literal">-home</span> HOME_DIR <span class="comment">#..............ç”¨æˆ·çš„æ–°ä¸»ç›®å½•</span></span><br><span class="line"><span class="literal">-e</span>, -<span class="literal">-expiredate</span> EXPIRE_DATE <span class="comment">#.....è®¾å®šå¸æˆ·è¿‡æœŸçš„æ—¥æœŸä¸º EXPIRE_DATE</span></span><br><span class="line"><span class="operator">-f</span>, -<span class="literal">-inactive</span> INACTIVE <span class="comment">#..........è¿‡æœŸ INACTIVE å¤©æ•°åï¼Œè®¾å®šå¯†ç ä¸ºå¤±æ•ˆçŠ¶æ€</span></span><br><span class="line"><span class="literal">-g</span>, -<span class="literal">-gid</span> <span class="built_in">GROUP</span> <span class="comment">#..................å¼ºåˆ¶ä½¿ç”¨ GROUP ä¸ºæ–°ä¸»ç»„</span></span><br><span class="line"><span class="literal">-G</span>, -<span class="literal">-groups</span> GROUPS <span class="comment">#..............æ–°çš„é™„åŠ ç»„åˆ—è¡¨ GROUPS</span></span><br><span class="line"><span class="literal">-a</span>, -<span class="literal">-append</span> <span class="built_in">GROUP</span> <span class="comment">#...............å°†ç”¨æˆ·è¿½åŠ è‡³ä¸Šè¾¹ -G ä¸­æåˆ°çš„é™„åŠ ç»„ä¸­ï¼Œå¹¶ä¸ä»å…¶å®ƒç»„ä¸­åˆ é™¤æ­¤ç”¨æˆ·</span></span><br><span class="line"><span class="literal">-h</span>, -<span class="literal">-help</span> <span class="comment">#.......................æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯å¹¶æ¨å‡º</span></span><br><span class="line"><span class="literal">-l</span>, -<span class="literal">-login</span> LOGIN <span class="comment">#................æ–°çš„ç™»å½•åç§°</span></span><br><span class="line"><span class="literal">-L</span>, -<span class="literal">-lock</span> <span class="comment">#.......................é”å®šç”¨æˆ·å¸å·</span></span><br><span class="line"><span class="literal">-m</span>, -<span class="literal">-move</span><span class="literal">-home</span> <span class="comment">#..................å°†ä¸»ç›®å½•å†…å®¹ç§»è‡³æ–°ä½ç½® (ä»…äº -d ä¸€èµ·ä½¿ç”¨)</span></span><br><span class="line"><span class="literal">-o</span>, -<span class="literal">-non</span><span class="literal">-unique</span> <span class="comment">#.................å…è®¸ä½¿ç”¨é‡å¤çš„(éå”¯ä¸€çš„) UID</span></span><br><span class="line"><span class="literal">-p</span>, -<span class="literal">-password</span> PASSWORD <span class="comment">#..........å°†åŠ å¯†è¿‡çš„å¯†ç  (PASSWORD) è®¾ä¸ºæ–°å¯†ç </span></span><br><span class="line"><span class="literal">-R</span>, -<span class="literal">-root</span> CHROOT_DIR <span class="comment">#............chroot åˆ°çš„ç›®å½•</span></span><br><span class="line"><span class="literal">-P</span>, -<span class="literal">-prefix</span> PREFIX_DIR <span class="comment">#..........prefix directory where are located the /etc/* files</span></span><br><span class="line"><span class="literal">-s</span>, -<span class="literal">-shell</span> SHELL <span class="comment">#................è¯¥ç”¨æˆ·å¸å·çš„æ–°ç™»å½• shell</span></span><br><span class="line"><span class="literal">-u</span>, -<span class="literal">-uid</span> UID <span class="comment">#....................ç”¨æˆ·å¸å·çš„æ–° UID</span></span><br><span class="line"><span class="literal">-U</span>, -<span class="literal">-unlock</span> <span class="comment">#.....................è§£é”ç”¨æˆ·å¸å·</span></span><br><span class="line"><span class="literal">-v</span>, -<span class="literal">-add</span><span class="literal">-subuids</span> FIRST<span class="literal">-LAST</span> <span class="comment">#.....add range of subordinate uids</span></span><br><span class="line"><span class="literal">-V</span>, -<span class="literal">-del</span><span class="literal">-subuids</span> FIRST<span class="literal">-LAST</span> <span class="comment">#.....remove range of subordinate uids</span></span><br><span class="line"><span class="literal">-w</span>, -<span class="literal">-add</span><span class="literal">-subgids</span> FIRST<span class="literal">-LAST</span> <span class="comment">#.....add range of subordinate gids</span></span><br><span class="line"><span class="literal">-W</span>, -<span class="literal">-del</span><span class="literal">-subgids</span> FIRST<span class="literal">-LAST</span> <span class="comment">#.....remove range of subordinate gids</span></span><br><span class="line"><span class="literal">-Z</span>, -<span class="literal">-selinux</span><span class="literal">-user</span>  SEUSER <span class="comment">#.......ç”¨æˆ·è´¦æˆ·çš„æ–° SELinux ç”¨æˆ·æ˜ å°„</span></span><br></pre></td></tr></table></figure><p>æœ‰ä¸€ä¸ª <code>-m</code> å¤‡æ³¨äº†ä»…ä¸ <code>-d</code> ä¸€èµ·ä½¿ç”¨ï¼ŒæŠŠ john åŸæ¥çš„ä¸»ç›®å½•æ–‡ä»¶ç§»åŠ¨åˆ°æ–°çš„ä½ç½®ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod <span class="literal">-l</span> tommy <span class="literal">-d</span> /home/tommy <span class="literal">-m</span> john</span><br></pre></td></tr></table></figure><h2 id="id"><a href="#id" class="headerlink" title="id"></a>id</h2><blockquote><p> æŸ¥çœ‹ç”¨æˆ·çš„ UIDã€GID åŠå…¶æ‰€å±çš„ç»„ã€‚</p></blockquote><p><code>id</code> ä¸å¸¦å‚æ•°æ˜¾ç¤ºå½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uid=<span class="number">0</span>(root) gid=<span class="number">0</span>(root) ç»„=<span class="number">0</span>(root)</span><br></pre></td></tr></table></figure><p><code>id nginx</code> æŸ¥çœ‹ nginx çš„ä¿¡æ¯ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uid=<span class="number">993</span>(nginx) gid=<span class="number">991</span>(nginx) ç»„=<span class="number">991</span>(nginx)</span><br></pre></td></tr></table></figure><h2 id="su-1"><a href="#su-1" class="headerlink" title="su"></a>su</h2><blockquote><p>ç”¨æˆ·é—´åˆ‡æ¢ã€‚</p></blockquote><ul><li>ä¸å¸¦ä»»ä½•å‚æ•°çš„ <code>su</code> å‘½ä»¤å°†ç”¨æˆ·æå‡è‡³ root æƒé™ï¼Œéœ€è¦ root å£ä»¤ã€‚é€šè¿‡ <code>su</code> è·å–çš„ç‰¹æƒå°†ä¸€ç›´æŒç»­åˆ°ä½¿ç”¨ <code>exit</code> å‘½ä»¤é€€å‡ºä¸ºæ­¢ã€‚</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su</span><br></pre></td></tr></table></figure><ul><li>åˆ‡æ¢åˆ° tommy ç”¨æˆ·ï¼Œéœ€è¦ tommy çš„å£ä»¤ã€‚</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su tommy</span><br></pre></td></tr></table></figure><p><strong>æç¤º</strong>ï¼šå°½é‡é€šè¿‡ç»å¯¹è·¯å¾„ä½¿ç”¨ su å‘½ä»¤ï¼Œè¿™ä¸ªå‘½ä»¤é€šå¸¸ä¿å­˜åœ¨ <code>/bin</code> ç›®å½•ä¸‹ã€‚è¿™å°†ä¸€å®šç¨‹åº¦ä¸Šé˜²æ­¢æºœå…¥åˆ°æœç´¢è·¯å¾„ä¸‹çš„åä¸º su çš„ç¨‹åºçªƒå–ç”¨æˆ·å£ä»¤ã€‚</p><h2 id="sudo-1"><a href="#sudo-1" class="headerlink" title="sudo"></a>sudo</h2><blockquote><p>å—é™çš„ç‰¹æƒã€‚</p></blockquote><p>&#8195;&#8195;sudo æ˜¯ä¸€ä¸ªç¨‹åºã€‚æ¥å—å‘½ä»¤è¡Œä½œä¸ºå‚æ•°ï¼Œå¹¶ä»¥ root èº«ä»½ï¼ˆæˆ–è€…ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ç”¨æˆ·ï¼‰æ‰§è¡Œå®ƒã€‚åœ¨æ‰§è¡Œå‘½ä»¤ä¹‹å‰ï¼Œsudo ä¼šé¦–å…ˆè¦æ±‚ç”¨æˆ·è¾“å…¥è‡ªå·±çš„å£ä»¤ï¼Œå£ä»¤åªéœ€è¦è¾“å…¥ä¸€æ¬¡ã€‚å‡ºäºå®‰å…¨æ€§çš„è€ƒè™‘ï¼Œå¦‚æœç”¨æˆ·åœ¨ä¸€æ®µæ—¶é—´å†…ï¼ˆé»˜è®¤æ˜¯5åˆ†é’Ÿï¼‰æ²¡æœ‰å†æ¬¡ä½¿ç”¨ sudoï¼Œé‚£ä¹ˆæ­¤åå¿…é¡»å†æ¬¡è¾“å…¥å£ä»¤ã€‚è¿™æ ·çš„è®¾ç½®é¿å…äº†ç‰¹æƒç”¨æˆ·ä¸ç»æ„é—´å°†è‡ªå·±çš„ç»ˆç«¯ç•™ç»™äº†å“ªäº›å¹¶ä¸å—æ¬¢è¿çš„äººã€‚<br>é€šè¿‡é…ç½® <code>/etc/sudoers</code> æŒ‡å®šç”¨æˆ·å¯ä»¥æ‰§è¡Œçš„ç‰¹æƒå‘½ä»¤ï¼š</p><ul><li>æŒ‡å®š root ç”¨æˆ·å¯ä»¥ä½¿ç”¨ sudo åœ¨ä»»ä½•æœºå™¨ä¸Šï¼ˆç¬¬ä¸€ä¸ª ALLï¼‰ä»¥ä»»ä½•ç”¨æˆ·èº«ä»½ï¼ˆç¬¬äºŒä¸ª ALLï¼‰æ‰§è¡Œä»»ä½•å‘½ä»¤ï¼ˆç¬¬ä¸‰ä¸ª ALLï¼‰:</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Allow root to run any commands anywhere</span><br><span class="line">rootALL=(ALL) ALL</span><br></pre></td></tr></table></figure><p>sudoer ä¸­çš„æ¯ä¸€è¡Œæƒé™è¯´æ˜åŒ…å«äº†ä¸‹é¢è¿™äº›å†…å®¹ï¼š</p><ul><li>è¯¥æƒé™é€‚ç”¨çš„ç”¨æˆ·ï¼›</li><li>è¿™ä¸€è¡Œé…ç½®åœ¨å“ªäº›ä¸»æœºä¸Šé€‚ç”¨? (è¿™ä¸ªæˆ‘ä¸æ˜¯å¤ªæ‡‚â€¦)</li><li>è¯¥ç”¨æˆ·å¯ä»¥è¿è¡Œçš„å‘½ä»¤ï¼›</li><li>è¯¥å‘½ä»¤åº”è¯¥ä»¥å“ªä¸ªç”¨æˆ·èº«ä»½æ‰§è¡Œã€‚</li></ul><p><strong>æç¤º</strong>ï¼šsudoers ä¸­çš„å‘½ä»¤åº”è¯¥ä½¿ç”¨ç»å¯¹è·¯å¾„æ¥æŒ‡å®šï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢ä¸€äº›äººä»¥ root èº«ä»½æ‰§è¡Œè‡ªå·±çš„è„šæœ¬ç¨‹åºã€‚<br>ä¿®æ”¹sudoersæ–‡ä»¶åº”è¯¥ä½¿ç”¨ <code>visudo</code> å‘½ä»¤ã€‚è¿™ä¸ªå‘½ä»¤ä¾æ¬¡æ‰§è¡Œä¸‹é¢è¿™äº›æ“ä½œ:</p><ul><li>æ£€æŸ¥ä»¥ç¡®ä¿æ²¡æœ‰å…¶ä»–äººæ­£åœ¨ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ã€‚</li><li>è°ƒç”¨ä¸€ä¸ªç¼–è¾‘å™¨ç¼–è¾‘è¯¥æ–‡ä»¶ã€‚</li><li>éªŒè¯å¹¶ç¡®ä¿ç¼–è¾‘åçš„æ–‡ä»¶æ²¡æœ‰è¯­æ³•é”™è¯¯ã€‚</li><li>å®‰è£…ä½¿ sudoers æ–‡ä»¶ç”Ÿæ•ˆã€‚</li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Apple Configurator 2</title>
      <link href="/2022/02/16/Apple%20Configurator%202/"/>
      <url>/2022/02/16/Apple%20Configurator%202/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å¹³æ—¶çš„å¼€å‘æµ‹è¯•ä¸­ï¼ŒåŸºäºå„ç§åŸå› â€¦ä¸æ˜¯æ‰€æœ‰çš„ App éƒ½ä¼šä¸Šçº¿ App Store ï¼Œç»å¸¸éœ€è¦é€šè¿‡ Mac æŠŠ IPA ç›´æ¥å®‰è£…åœ¨ iPhone ä¸Šï¼Œä¹‹å‰ä¸€ç›´ç”¨çš„ <code>iFunBox</code>ï¼Œä½†æœ€è¿‘æ¢äº†ç”µè„‘ä»¥åè¿™ä¸ªè½¯ä»¶ä¸å¥½ç”¨äº†ï¼Œæ®è¯´æ˜¯å‡çº§äº†ç‰ˆæœ¬ï¼Œä½†ä¸çŸ¥é“æ˜¯æˆ‘çœ¼çäº†è¿˜æ˜¯æ€ä¹ˆæ ·ï¼Œæ‰¾ä¸åˆ°ä»¥å¾€å®‰è£… IPA çš„å…¥å£ã€‚æœæ¥æœå»å‘ç°è‹¹æœè‡ªå·±æä¾›äº†ä¸€ä¸ªå·¥å…·ï¼š<code>Apple Configurator 2</code>ï¼ŒUI å’ŒåŠŸèƒ½éƒ½å¾ˆâ€œè‹¹æœâ€ï¼Œç›´æ¥æŠŠå…¶ä»–å·¥å…·éƒ½å¸è½½äº†ï¼Œå“ˆå“ˆ~</p><ul><li>æ‰‹æœºè¿çº¿åˆ° Mac </li><li>é€‰ä¸­è‡ªå·±çš„è®¾å¤‡</li><li>ç‚¹å‡»ã€Œæ·»åŠ ã€ï¼Œé€‰æ‹©ã€ŒAppã€-&gt; ã€Œä»æˆ‘çš„ Mac é€‰å–ã€</li></ul><span id="more"></span><p>FYI:  è¿™é‡Œä¸ºä»€ä¹ˆæœ‰ä¸ªå°çº¢ç‚¹å„¿ï¼ŸæŒ¥ä¹‹ä¸å»ï¼ŒUmmmmmmâ€¦â€¦</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/AppleConfigurator0.png" alt="AppleConfigurator0"></p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/AppleConfigurator1.png" alt="AppleConfigurator1"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 7788 </tag>
            
            <tag> Mac </tag>
            
            <tag> Tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è½¬è½½ã€‘Docker çš„å››ç§ç½‘ç»œæ¨¡å¼</title>
      <link href="/2022/02/08/Docker_network/"/>
      <url>/2022/02/08/Docker_network/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://www.jianshu.com/p/22a7032bb7bd">åŸæ–‡é“¾æ¥</a></p><h2 id="Docker-ç½‘ç»œå®ç°åŸç†"><a href="#Docker-ç½‘ç»œå®ç°åŸç†" class="headerlink" title="Docker ç½‘ç»œå®ç°åŸç†"></a>Docker ç½‘ç»œå®ç°åŸç†</h2><p>Docker ä½¿ç”¨ Linux æ¡¥æ¥ï¼ˆå‚è€ƒã€ŠLinux è™šæ‹Ÿç½‘ç»œæŠ€æœ¯ã€‹ï¼‰ï¼Œåœ¨å®¿ä¸»æœºè™šæ‹Ÿä¸€ä¸ª Docker å®¹å™¨ç½‘æ¡¥ (docker0)ï¼ŒDocker å¯åŠ¨ä¸€ä¸ªå®¹å™¨æ—¶ä¼šæ ¹æ® Docker ç½‘æ¡¥çš„ç½‘æ®µåˆ†é…ç»™å®¹å™¨ä¸€ä¸ª IP åœ°å€ï¼Œç§°ä¸º Container-IPï¼ŒåŒæ—¶ Docker ç½‘æ¡¥æ˜¯æ¯ä¸ªå®¹å™¨çš„é»˜è®¤ç½‘å…³ã€‚å› ä¸ºåœ¨åŒä¸€å®¿ä¸»æœºå†…çš„å®¹å™¨éƒ½æ¥å…¥åŒä¸€ä¸ªç½‘æ¡¥ï¼Œè¿™æ ·å®¹å™¨ä¹‹é—´å°±èƒ½å¤Ÿé€šè¿‡å®¹å™¨çš„ Container-IP ç›´æ¥é€šä¿¡ã€‚</p><p>Docker ç½‘æ¡¥æ˜¯å®¿ä¸»æœºè™šæ‹Ÿå‡ºæ¥çš„ï¼Œå¹¶ä¸æ˜¯çœŸå®å­˜åœ¨çš„ç½‘ç»œè®¾å¤‡ï¼Œå¤–éƒ¨ç½‘ç»œæ˜¯æ— æ³•å¯»å€åˆ°çš„ï¼Œè¿™ä¹Ÿæ„å‘³ç€å¤–éƒ¨ç½‘ç»œæ— æ³•é€šè¿‡ç›´æ¥ Container-IP è®¿é—®åˆ°å®¹å™¨ã€‚å¦‚æœå®¹å™¨å¸Œæœ›å¤–éƒ¨è®¿é—®èƒ½å¤Ÿè®¿é—®åˆ°ï¼Œå¯ä»¥é€šè¿‡æ˜ å°„å®¹å™¨ç«¯å£åˆ°å®¿ä¸»ä¸»æœºï¼ˆç«¯å£æ˜ å°„ï¼‰ï¼Œå³ <code>docker run</code> åˆ›å»ºå®¹å™¨æ—¶å€™é€šè¿‡ <code>-p</code> æˆ– <code>-P</code> å‚æ•°æ¥å¯ç”¨ï¼Œè®¿é—®å®¹å™¨çš„æ—¶å€™å°±é€šè¿‡ [å®¿ä¸»æœº IP]:[å®¹å™¨ç«¯å£] è®¿é—®å®¹å™¨ã€‚</p><h2 id="å››ç±»ç½‘ç»œæ¨¡å¼"><a href="#å››ç±»ç½‘ç»œæ¨¡å¼" class="headerlink" title="å››ç±»ç½‘ç»œæ¨¡å¼"></a>å››ç±»ç½‘ç»œæ¨¡å¼</h2><span id="more"></span><table><thead><tr><th align="left">Docker ç½‘ç»œæ¨¡å¼</th><th>é…ç½®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td align="left">host æ¨¡å¼</td><td>-net=host</td><td>å®¹å™¨å’Œå®¿ä¸»æœºå…±äº« Network namespaceã€‚</td></tr><tr><td align="left">container æ¨¡å¼</td><td>-net=container:NAME_or_ID</td><td>å®¹å™¨å’Œå¦å¤–ä¸€ä¸ªå®¹å™¨å…±äº« Network namespaceã€‚ kubernetes ä¸­çš„ pod å°±æ˜¯å¤šä¸ªå®¹å™¨å…±äº«ä¸€ä¸ª Network namespaceã€‚</td></tr><tr><td align="left">none æ¨¡å¼</td><td>-net=none</td><td>å®¹å™¨æœ‰ç‹¬ç«‹çš„ Network namespaceï¼Œä½†å¹¶æ²¡æœ‰å¯¹å…¶è¿›è¡Œä»»ä½•ç½‘ç»œè®¾ç½®ï¼Œå¦‚åˆ†é… veth pair å’Œç½‘æ¡¥è¿æ¥ï¼Œé…ç½® IP ç­‰ã€‚</td></tr><tr><td align="left">bridge æ¨¡å¼</td><td>-net=bridge ï¼ˆé»˜è®¤ä¸ºè¯¥æ¨¡å¼ï¼‰</td><td>-net=bridge ï¼ˆé»˜è®¤ä¸ºè¯¥æ¨¡å¼ï¼‰</td></tr></tbody></table><h3 id="host-æ¨¡å¼"><a href="#host-æ¨¡å¼" class="headerlink" title="host æ¨¡å¼"></a>host æ¨¡å¼</h3><p>å¦‚æœå¯åŠ¨å®¹å™¨çš„æ—¶å€™ä½¿ç”¨ host æ¨¡å¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå®¹å™¨å°†ä¸ä¼šè·å¾—ä¸€ä¸ªç‹¬ç«‹çš„ Network Namespaceï¼Œè€Œæ˜¯å’Œå®¿ä¸»æœºå…±ç”¨ä¸€ä¸ª Network Namespaceã€‚å®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„ IP ç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„ IP å’Œç«¯å£ã€‚ä½†æ˜¯ï¼Œå®¹å™¨çš„å…¶ä»–æ–¹é¢ï¼Œå¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ç­‰è¿˜æ˜¯å’Œå®¿ä¸»æœºéš”ç¦»çš„ã€‚</p><p>ä½¿ç”¨ host æ¨¡å¼çš„å®¹å™¨å¯ä»¥ç›´æ¥ä½¿ç”¨å®¿ä¸»æœºçš„ IP åœ°å€ä¸å¤–ç•Œé€šä¿¡ï¼Œå®¹å™¨å†…éƒ¨çš„æœåŠ¡ç«¯å£ä¹Ÿå¯ä»¥ä½¿ç”¨å®¿ä¸»æœºçš„ç«¯å£ï¼Œä¸éœ€è¦è¿›è¡Œ NATï¼Œhost æœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯ç½‘ç»œæ€§èƒ½æ¯”è¾ƒå¥½ï¼Œä½†æ˜¯ docker host ä¸Šå·²ç»ä½¿ç”¨çš„ç«¯å£å°±ä¸èƒ½å†ç”¨äº†ï¼Œç½‘ç»œçš„éš”ç¦»æ€§ä¸å¥½ã€‚</p><p>Host æ¨¡å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/docker_network_host.png" alt="img"></p><h3 id="container-æ¨¡å¼"><a href="#container-æ¨¡å¼" class="headerlink" title="container æ¨¡å¼"></a>container æ¨¡å¼</h3><p>è¿™ä¸ªæ¨¡å¼æŒ‡å®šæ–°åˆ›å»ºçš„å®¹å™¨å’Œå·²ç»å­˜åœ¨çš„ä¸€ä¸ªå®¹å™¨å…±äº«ä¸€ä¸ª Network Namespaceï¼Œè€Œä¸æ˜¯å’Œå®¿ä¸»æœºå…±äº«ã€‚æ–°åˆ›å»ºçš„å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„ IPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº« IPã€ç«¯å£èŒƒå›´ç­‰ã€‚åŒæ ·ï¼Œä¸¤ä¸ªå®¹å™¨é™¤äº†ç½‘ç»œæ–¹é¢ï¼Œå…¶ä»–çš„å¦‚æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹åˆ—è¡¨ç­‰è¿˜æ˜¯éš”ç¦»çš„ã€‚ä¸¤ä¸ªå®¹å™¨çš„è¿›ç¨‹å¯ä»¥é€šè¿‡ lo ç½‘å¡è®¾å¤‡é€šä¿¡ã€‚</p><p>Container æ¨¡å¼ç¤ºæ„å›¾ï¼š</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/docker_network_container.png" alt="img"></p><h3 id="none-æ¨¡å¼"><a href="#none-æ¨¡å¼" class="headerlink" title="none æ¨¡å¼"></a>none æ¨¡å¼</h3><p>ä½¿ç”¨ none æ¨¡å¼ï¼ŒDocker å®¹å™¨æ‹¥æœ‰è‡ªå·±çš„ Network Namespaceï¼Œä½†æ˜¯ï¼Œå¹¶ä¸ä¸º Docker å®¹å™¨è¿›è¡Œä»»ä½•ç½‘ç»œé…ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ª Docker å®¹å™¨æ²¡æœ‰ç½‘å¡ã€IPã€è·¯ç”±ç­‰ä¿¡æ¯ã€‚éœ€è¦æˆ‘ä»¬è‡ªå·±ä¸º Docker å®¹å™¨æ·»åŠ ç½‘å¡ã€é…ç½® IP ç­‰ã€‚</p><p>è¿™ç§ç½‘ç»œæ¨¡å¼ä¸‹å®¹å™¨åªæœ‰ lo å›ç¯ç½‘ç»œï¼Œæ²¡æœ‰å…¶ä»–ç½‘å¡ã€‚none æ¨¡å¼å¯ä»¥åœ¨å®¹å™¨åˆ›å»ºæ—¶é€šè¿‡ <code>-network=none</code> æ¥æŒ‡å®šã€‚è¿™ç§ç±»å‹çš„ç½‘ç»œæ²¡æœ‰åŠæ³•è”ç½‘ï¼Œå°é—­çš„ç½‘ç»œèƒ½å¾ˆå¥½çš„ä¿è¯å®¹å™¨çš„å®‰å…¨æ€§ã€‚</p><p>None æ¨¡å¼ç¤ºæ„å›¾:</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/docker_network_none.png" alt="None ç½‘ç»œæ¨¡å¼"></p><h3 id="bridge-æ¨¡å¼"><a href="#bridge-æ¨¡å¼" class="headerlink" title="bridge æ¨¡å¼"></a>bridge æ¨¡å¼</h3><p>å½“ Docker è¿›ç¨‹å¯åŠ¨æ—¶ï¼Œä¼šåœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ªåä¸º docker0 çš„è™šæ‹Ÿç½‘æ¡¥ï¼Œæ­¤ä¸»æœºä¸Šå¯åŠ¨çš„ Docker å®¹å™¨ä¼šè¿æ¥åˆ°è¿™ä¸ªè™šæ‹Ÿç½‘æ¡¥ä¸Šã€‚è™šæ‹Ÿç½‘æ¡¥çš„å·¥ä½œæ–¹å¼å’Œç‰©ç†äº¤æ¢æœºç±»ä¼¼ï¼Œè¿™æ ·ä¸»æœºä¸Šçš„æ‰€æœ‰å®¹å™¨å°±é€šè¿‡äº¤æ¢æœºè¿åœ¨äº†ä¸€ä¸ªäºŒå±‚ç½‘ç»œä¸­ã€‚</p><p>ä» docker0 å­ç½‘ä¸­åˆ†é…ä¸€ä¸ª IP ç»™å®¹å™¨ä½¿ç”¨ï¼Œå¹¶è®¾ç½® docker0 çš„ IP åœ°å€ä¸ºå®¹å™¨çš„é»˜è®¤ç½‘å…³ã€‚åœ¨ä¸»æœºä¸Šåˆ›å»ºä¸€å¯¹è™šæ‹Ÿç½‘å¡ veth pair è®¾å¤‡ï¼ŒDocker å°† veth pair è®¾å¤‡çš„ä¸€ç«¯æ”¾åœ¨æ–°åˆ›å»ºçš„å®¹å™¨ä¸­ï¼Œå¹¶å‘½åä¸º eth0ï¼ˆå®¹å™¨çš„ç½‘å¡ï¼‰ï¼Œå¦ä¸€ç«¯æ”¾åœ¨ä¸»æœºä¸­ï¼Œä»¥ vethxxx è¿™æ ·ç±»ä¼¼çš„åå­—å‘½åï¼Œå¹¶å°†è¿™ä¸ªç½‘ç»œè®¾å¤‡åŠ å…¥åˆ° docker0 ç½‘æ¡¥ä¸­ã€‚å¯ä»¥é€šè¿‡ brctl show å‘½ä»¤æŸ¥çœ‹ã€‚</p><p>bridge æ¨¡å¼æ˜¯ docker çš„é»˜è®¤ç½‘ç»œæ¨¡å¼ï¼Œä¸å†™â€“net å‚æ•°ï¼Œå°±æ˜¯ bridge æ¨¡å¼ã€‚ä½¿ç”¨ <code>docker run -p</code> æ—¶ï¼Œdocker å®é™…æ˜¯åœ¨ iptables åšäº† DNAT è§„åˆ™ï¼Œå®ç°ç«¯å£è½¬å‘åŠŸèƒ½ã€‚å¯ä»¥ä½¿ç”¨ <code>iptables -t nat -vnL</code> æŸ¥çœ‹ã€‚</p><p>Bridge æ¨¡å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/docker_network_bridge.png" alt="img"></p>]]></content>
      
      
      
        <tags>
            
            <tag> è½¬è½½ </tag>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2021å¹´å°ç»“å„¿</title>
      <link href="/2022/01/19/2021%E5%B9%B4%E5%B0%8F%E7%BB%93%E5%84%BF/"/>
      <url>/2022/01/19/2021%E5%B9%B4%E5%B0%8F%E7%BB%93%E5%84%BF/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/GL/001.png" style="zoom:30%;"><p>How to stop procrastinatingï¼Ÿ</p><hr><h2 id="å·¥ä½œ"><a href="#å·¥ä½œ" class="headerlink" title="å·¥ä½œ"></a>å·¥ä½œ</h2><h3 id="iOS-å¼€å‘"><a href="#iOS-å¼€å‘" class="headerlink" title="iOS å¼€å‘"></a>iOS å¼€å‘</h3><p>åŸæœ¬åªæƒ³å†™ä¸€å¥ä¸è¿›ä¸é€€ï¼Œä½†é€†æ°´è¡ŒèˆŸï¼Œä¸è¿›åˆ™é€€å•Šã€‚æ‰€ä»¥æˆ‘é€€æ­¥äº†ã€‚æ¸£æ¸£ğŸ˜¢ï¼</p><h3 id="æ‹“å®½æŠ€æœ¯æ ˆ"><a href="#æ‹“å®½æŠ€æœ¯æ ˆ" class="headerlink" title="æ‹“å®½æŠ€æœ¯æ ˆ"></a>æ‹“å®½æŠ€æœ¯æ ˆ</h3><p>å¯¹ Nginxã€Linuxã€Goè¯­è¨€ æœ‰äº†æ›´å¤šçš„äº†è§£å’Œå®è·µï¼Œä½†è¿˜è¿œè¿œä¸å¤Ÿã€‚</p><span id="more"></span><h4 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h4><p>æ˜å¹´ç»§ç»­åŠ å¼ºå¯¹ Linux çš„å­¦ä¹ å§ï¼Œæ¯•ç«Ÿåç«¯å¾ˆå¤šå·¥ä½œéƒ½æ˜¯åœ¨ Linux ç³»ç»Ÿä¸Šè¿›è¡Œçš„ã€‚</p><h4 id="ç½‘ç»œé€šä¿¡"><a href="#ç½‘ç»œé€šä¿¡" class="headerlink" title="ç½‘ç»œé€šä¿¡"></a>ç½‘ç»œé€šä¿¡</h4><p>ä»Šå¹´è´Ÿè´£é¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œæœ€å¤§çš„æ„Ÿå—æ˜¯ç½‘ç»œçŸ¥è¯†çŸ­è·¯ï¼Œç§¯ç´¯çš„ä¸åˆ°ä½ï¼Œè¢«ä¸€ä¸ªå°é—®é¢˜å°±å¯ä»¥ææ­»ï¼Œæ—¶é—´éƒ½æµªè´¹æ‰äº†ã€‚</p><h4 id="Go"><a href="#Go" class="headerlink" title="Go"></a>Go</h4><p>å¹¶ä¸æƒ³çœŸçš„åšåç«¯ä¸šåŠ¡çš„å¼€å‘ï¼Œå­¦ä¹  Go è¯­è¨€ï¼Œå°è¯•å†™ä¸€äº›åŸºç¡€çš„å°ç»„ä»¶ï¼Œç”¨æ¥è¾…åŠ©å¯¹åç«¯çš„ç†è§£ï¼Œæˆ‘è§‰å¾—å¯¹äºæˆ‘å·²ç»å¤Ÿäº†ã€‚</p><h4 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h4><p>éƒ¨é—¨çš„é¡¹ç›®å¿…ç”¨â€¦â€¦ç»§ç»­åŠ æ²¹ğŸ’ªï¼</p><h4 id="å‰ç«¯"><a href="#å‰ç«¯" class="headerlink" title="å‰ç«¯"></a>å‰ç«¯</h4><p>ä¸€ç›´æƒ³å¼€å§‹ï¼Œä½†å‡ºäºå¯¹å‰ç«¯æœºåˆ¶çš„ææƒ§ä¸€ç›´æ²¡è¿›è¡Œã€‚æ–°å¹´ç›®æ ‡ï¼šäº†è§£å‡ ä¸ªå¤§å‚æ¡†æ¶çš„åŸç†ï¼Œæ›´å¤šçš„æ˜¯è¾…åŠ©è‡ªå·±æŠŠæ‰‹æœºç«¯ã€å‰ç«¯ã€åç«¯ä¸²èµ·æ¥ã€‚<br>è¿™äº›å°±å¤Ÿå­¦çš„äº†â€¦â€¦</p><h3 id="PMP"><a href="#PMP" class="headerlink" title="PMP"></a>PMP</h3><p>2020å¹´å¼€å§‹å­¦ä¹  PMP çš„ç›¸å…³çŸ¥è¯†å’Œè¯¾ç¨‹ï¼Œä½†å› ä¸ºç–«æƒ…æ•´çš„å­¦ä¹ ä¹Ÿæ˜¯æ–­æ–­ç»­ç»­çš„ï¼ŒåŒ…æ‹¬è€ƒè¯•æ—¥æœŸéƒ½ä¸€æ¨å†æ¨ã€‚ä¸è¿‡å¹¸è¿çš„æ˜¯20å¹´9æœˆä»½é¡ºåˆ©è€ƒå®Œè¯•å¹¶ä¸”ä»Šå¹´æ‹¿åˆ°äº†çº¸è´¨çš„è¯ä¹¦ã€‚çº¸è´¨è¯ä¹¦æ€ä¹ˆè¯´å‘¢ï¼Œçœ‹ä¸Šå»è²Œä¼¼å¾ˆ lowï¼Œè¿ä¸ªé’¢å°éƒ½æ²¡æœ‰ï¼Œå“ˆå“ˆå“ˆ~<br>å¾ˆå¤šäººè¯´ PMI çš„çŸ¥è¯†ä½“ç³»ä¸ç¬¦åˆã€Œä¸­å›½å›½æƒ…ã€ï¼Œæˆ‘è§‰å¾—ä¸ç„¶ã€‚é¡¹ç›®ç®¡ç†çš„ç†è®ºæœ¬èº«å°±æ˜¯ä»ä¼—å¤šé¡¹ç›®ç»éªŒä¸­æ²‰æ·€è€Œæ¥çš„ï¼Œæ˜¯ä¸€å¥—ç†è®ºï¼Œä¹Ÿæ˜¯ä¸€å¥—å·¥ä½œæ–¹æ³•ï¼Œå¹¶ä¸æ˜¯è®©æˆ‘ä»¬ä¸€ä¸ªèåœä¸€ä¸ªå‘çš„æŠŠé¡¹ç›®çš„æƒ…å†µå¥—è¿›å»ã€‚è‡³å°‘æˆ‘ä¸ªäººå­¦ä¹ ä¹‹åæœ€å—ç›Šçš„ä¸¤æ–¹é¢æ˜¯ï¼šæ²Ÿé€šæ–¹æ³•ã€å·¥ä½œæ–¹æ³•ã€‚</p><h3 id="æ²Ÿé€š"><a href="#æ²Ÿé€š" class="headerlink" title="æ²Ÿé€š"></a>æ²Ÿé€š</h3><p>åˆ«äººè¯„åˆ¤æˆ‘ä»¬çš„å·¥ä½œè¡¨ç°ï¼Œå¾€å¾€é’ˆå¯¹ä¸¤ä¸ªæ–¹é¢ï¼šå·¥ä½œæ€åº¦å’Œå·¥ä½œèƒ½åŠ›ã€‚å·¥ä½œèƒ½åŠ›æˆ‘ç†è§£ä¸ºå„è¡Œä¸šçš„ç¡¬å®åŠ›ï¼Œä¾‹å¦‚æˆ‘ä»¬ç å†œçš„ç¼–ç èƒ½åŠ›ã€æŠ€æœ¯èƒ½åŠ›ç­‰ç­‰ï¼›ä½†å·¥ä½œæ€åº¦çš„é—®é¢˜ï¼Œæ›´å¤šæ˜¯ç”±æ²Ÿé€šå¯¼è‡´çš„ã€‚<br>21å¹´è‡ªå·±è¿›æ­¥æœ€å¤§çš„ç‚¹ï¼Œå°±æ˜¯æ²Ÿé€šèƒ½åŠ›ã€‚æ›´åŠ æ³¨é‡æ²Ÿé€šæ–¹å¼å’Œæ²Ÿé€šæŠ€å·§äº†ã€‚å€Ÿç”¨æˆ‘çš„é¢†å¯¼çš„å‰é¢†å¯¼è·Ÿä»–è®²çš„ä¸€å¥è¯ï¼š<strong>ç«™åœ¨å¯¹æ–¹çš„è§’åº¦ä¸ºè‡ªå·±è€ƒè™‘</strong>ã€‚ä»¥å‰ä¸ç†è§£ï¼Œä»Šå¹´æ·±æœ‰ä½“ä¼šï¼šå›æƒ³è¿™ä¸€æ•´å¹´ï¼Œå› ä¸ºå·¥ä½œå‘ç”Ÿè¿‡å››æ¬¡å†²çªï¼Œå‰ä¸¤æ¬¡æ˜¯å’Œé¢†å¯¼ã€åä¸¤æ¬¡æ˜¯å’Œç»„å‘˜ï¼Œå¾ˆä¸å¹¸åŒ…å«äº†ä»Šå¤©åˆšåˆšå‘ç”Ÿçš„ä¸€æ¬¡ï¼Œéƒ½æ˜¯å› ä¸ºæ²Ÿé€šä¸é¡ºç•…å¯¼è‡´çš„ï¼ŒåŒæ–¹åªç«™åœ¨äº†è‡ªå·±çš„è§’åº¦å»äº‰è®ºï¼Œå®Œå…¨æ˜¯æ— æ•ˆæ²Ÿé€šã€‚é¢å¯¹å†²çªï¼Œç‰¹åˆ«æ˜¯åŒæ–¹åµå¾—é¢çº¢è€³èµ¤çš„å†²çªï¼ŒåŠæ—¶æŠ½å‡ºèº«æ¥ã€å¹³å¤æƒ…ç»ªæ˜¯ä¸€ç§èƒ½åŠ›ï¼Œå¾ˆé‡è¦ä½†ä¹Ÿå¾ˆéš¾ï¼Œå‘Šè¯«è‡ªå·±ç»§ç»­åŠªåŠ›å§ï¼Œäº‰å–æ˜å¹´åªå‘ç”Ÿä¸¤æ¬¡ï¼Œå“ˆå“ˆï¼</p><h2 id="ç”Ÿæ´»"><a href="#ç”Ÿæ´»" class="headerlink" title="ç”Ÿæ´»"></a>ç”Ÿæ´»</h2><h3 id="ç‰©èµ„æ°´å¹³"><a href="#ç‰©èµ„æ°´å¹³" class="headerlink" title="ç‰©èµ„æ°´å¹³"></a>ç‰©èµ„æ°´å¹³</h3><p>æ²¡ä»€ä¹ˆå˜åŒ–ï¼Œå€’æ˜¯ä¸çˆ±ä¹°è¡£æœäº†ï¼Œè¡£æœé‹å­å°±é‚£å‡ ä»¶ç¿»æ¥è¦†å»çš„ç©¿ï¼Œæ¯•ç«Ÿç©¿ç€èˆ’æœçš„å¤ªå°‘äº†ã€‚</p><h3 id="æ—…æ¸¸"><a href="#æ—…æ¸¸" class="headerlink" title="æ—…æ¸¸"></a>æ—…æ¸¸</h3><p>ç–«æƒ…åŸå› ï¼Œå‡ºè¡Œä¸ä¾¿ï¼ŒæŠ½æ—¶é—´å»äº†ä¸€è¶Ÿæ¡‚æ—/é˜³æœ”ï¼Œçˆ¬äº†ä¸€æ¬¡ä¿å®šçš„ç™½çŸ³å±±â€¦â€¦æ¡‚æ—çš„å±±æ°´æ˜¯çœŸçš„ç¾ï¼Œæˆ‘éƒ½æƒ³ç§»å±…åˆ°é‚£å„¿äº†ã€‚</p><h4 id="æ¡‚æ—-é˜³æœ”"><a href="#æ¡‚æ—-é˜³æœ”" class="headerlink" title="æ¡‚æ—-é˜³æœ”"></a>æ¡‚æ—-é˜³æœ”</h4><blockquote><p>1ã€é£æœºè½åœ°ï¼Œå¯¹æ¡‚æ—ç¬¬ä¸€å°è±¡æ˜¯ï¼šæ‘©éƒ½ã€‚è¡—è¾¹éƒ½æ˜¯ç”µæ‘©ï¼Œè¿˜æœ‰ç”µæ‘©ä¸“ç”¨çš„åœè½¦åœºã€‚è¯¥è¯´ä¸è¯´ï¼Œä¸æ„§æ˜¯æ—…æ¸¸åŸå¸‚ï¼Œå¸‚æ°‘ç´ è´¨å¾ˆé«˜ã€‚</p><p>2ã€å—¦äº†ä¸€ç¢—ã€Œæµ·å¤©è‚ ç²‰ã€ã€‚</p><p>3ã€ç»§ç»­å—¦ã€Œè€ä¸œæ±Ÿæ¡‚æ—ç±³ç²‰æ€»åº—ã€ï¼Œè¿™ä¸ªè²Œä¼¼è¦ç«™ç€åƒæ‰æœ‰æ„Ÿè§‰ï¼Œå“ˆå“ˆå“ˆã€‚</p><p>4ã€é˜³æœ”å¤é•‡ï¼Œä¹°äº†ä¸¤ä¸ªå°ç“¶ç“¶æ’èŠ±ã€‚</p><p>5ã€æœ¬åœ°äººå¸¸å»çš„ä¸€ä¸ªé¥­åº—ï¼Œå¿˜è®°åå­—äº†ï¼Œä½†æˆ‘çš„ä¸­åˆ†çº¿æ˜¯ä¸æ˜¯å®Œç¾ä½“ç°äº†æˆ‘ä»¬ITç‹—çš„è¾›é…¸ï¼šç§ƒäº†ç“¢äº†~</p><p>6ã€é¾™è„Šæ¢¯ç”°ï¼Œå¯æƒœå¤§é›¾ï¼Œå¾ˆå¤šæ¢¯ç”°çœ‹ä¸æ¸…æ¥šã€‚</p><p>7ã€ç«™åœ¨è±¡é¼»å±±é¡¶ï¼Œçœ‹åˆ°çš„æ¡‚æ—åŸåŒºã€‚</p><p>8ã€é‡é¾™æ²³ï¼šæ¼‚æµã€‚æ¥åˆ°æ¡‚æ—å½“ç„¶è¦åšä¸€æ¬¡å°ç«¹ç­å•¦ã€‚</p><p>9ã€å“ªä¸ªé¢å€¼çš„äººæ°‘å¸èƒŒæ™¯æ¥ç€ï¼Ÿå“ˆå“ˆ</p></blockquote><table><thead><tr><th align="center"></th><th align="center"></th><th align="center"></th></tr></thead><tbody><tr><td align="center"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/GL/3.jpg" alt="æ‘©éƒ½"></td><td align="center"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/GL/2.jpg" alt="è‚ ç²‰"></td><td align="center"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/GL/1.jpg" alt="ç±³ç²‰"></td></tr><tr><td align="center"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/GL/4.jpg" alt="ç±³ç²‰"></td><td align="center"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/GL/5.jpg" alt="ç±³ç²‰"></td><td align="center"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/GL/6.jpg" alt="ç±³ç²‰"></td></tr><tr><td align="center"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/GL/7.jpg" alt="å¸‚åŒº"></td><td align="center"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/GL/8.jpg" alt="æœ¨ç­"></td><td align="center"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/GL/9.jpg" alt="é‡é¾™"></td></tr></tbody></table><h4 id="ä¿å®šç™½çŸ³å±±"><a href="#ä¿å®šç™½çŸ³å±±" class="headerlink" title="ä¿å®šç™½çŸ³å±±"></a>ä¿å®šç™½çŸ³å±±</h4><blockquote><p>çˆ¬åˆ°ç™½çŸ³å±±é¡¶å…¨æ˜¯é›¾ï¼Œå¾ˆå¯æƒœå˜›ä¹Ÿçœ‹ä¸è§é¸­ï¼Œåªèƒ½æ¬£èµæ¬£èµæˆ‘è‡ªå·±äº†ï¼šé“å¥³ä¸‰è¿æ‹ ~</p></blockquote><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/BSS/01.jpg"></td><td><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/BSS/02.jpg"></td><td><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/BSS/03.jpg"></td></tr><tr><td><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/BSS/04.jpg"></td><td><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/BSS/05.jpg"></td><td><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/BSS/06.jpg"></td></tr></tbody></table><p>FYI:  è¯·é—® md æ ¼å¼ä¸­ä¹å®«æ ¼çš„å›¾ç‰‡æ€ä¹ˆå†™ï¼Ÿä¸ä¼šï¼Œåªèƒ½è¿™æ ·äº†â€¦â€¦</p><h3 id="çˆ±å¥½"><a href="#çˆ±å¥½" class="headerlink" title="çˆ±å¥½"></a>çˆ±å¥½</h3><h4 id="ç”»æ’ç”»"><a href="#ç”»æ’ç”»" class="headerlink" title="ç”»æ’ç”»"></a>ç”»æ’ç”»</h4><p>å¥½å§ï¼Œæ²¡åšæŒä½ï¼Œè¿™ä¸€æ•´å¹´å°±ç”»äº†ä¸¤å¼ ğŸ¤“ã€‚ç”»ç”»çš„æ•°ä½æ¿éƒ½ä¸çŸ¥é“æ”¾å“ªé‡Œå»äº†ã€‚</p><h4 id="åšæ‰‹å·¥"><a href="#åšæ‰‹å·¥" class="headerlink" title="åšæ‰‹å·¥"></a>åšæ‰‹å·¥</h4><p>åšæ‰‹å·¥çš„ä¹ æƒ¯è¿˜ç®—åšæŒçš„ä¸é”™ã€‚åšäº†Nå¤šä¸ªå¥½çš„ä¸å¥½çš„æ‰‹æœºæ”¯æ¶ã€å°æ‘†ä»¶å„¿ã€å°å–µå–µç©å¶ã€‚å‰ä¸€é˜µåˆå…¥äº†æ‰‹å·¥çš®å…·çš„å‘ï¼Œæ–°æ‰‹å·¥å…·å·²å¤‡é½ï¼Œåšäº†å‡ ä¸ªç›¸å½“ä¸é”™çš„åŒ…åŒ…ã€‚æœ‰éœ€è¦çš„æ‰¾æˆ‘å“ˆï¼Œæˆ‘å¼€å§‹æ¥å•äº†ï¼Œå•Šå“ˆå“ˆå“ˆå“ˆå“ˆ~ğŸ¤“ğŸ¤“ğŸ¤“ğŸ¤“ğŸ¤“</p><h2 id="7788"><a href="#7788" class="headerlink" title="7788"></a>7788</h2><p>è¿™ä¸€å¹´æœ€å¤§çš„æ„Ÿæ‚Ÿï¼Œå°±æ˜¯ï¼šçæƒœã€‚</p><ul><li>çæƒœæ„¿æ„æŒ‡å‡ºæˆ‘ä»¬ä¸è¶³çš„äººï¼Œå½“ç„¶å‰ææ˜¯æ— æ¶æ„æ”»å‡»çš„ï¼Œæ¯•ç«Ÿèº«å¤„ä¸€ä¸ªè™šä¼ªçš„ä¸–ç•Œï¼ŒçœŸè¯è¶Šæ¥è¶Šéš¾å¬åˆ°äº†ã€‚</li></ul><blockquote><p>é—»å–„è¨€åˆ™æ‹œï¼Œå‘Šæœ‰è¿‡åˆ™å–œã€‚</p></blockquote><ul><li>çæƒœå‘¨å›´çˆ±æˆ‘ä»¬çš„å®¶äººå’Œæœ‹å‹ã€‚å¼•ç”¨æ‘ä¸Šæ˜¥æ ‘çš„ä¸€æ®µè¯ï¼š</li></ul><blockquote><p>ä½ è¦è®°ä½å¤§é›¨ä¸­ä¸ºä½ æ’‘ä¼çš„äººï¼Œå¸®ä½ æŒ¡ä½å¤–æ¥ä¹‹ç‰©çš„äººï¼Œé»‘æš—ä¸­é»˜é»˜æŠ±ç´§ä½ çš„äººï¼Œé€—ä½ ç¬‘çš„äººï¼Œé™ªä½ å½»å¤œèŠå¤©çš„äººï¼Œåè½¦æ¥çœ‹æœ›ä½ çš„äººï¼Œé™ªä½ å“­è¿‡çš„äººï¼Œåœ¨åŒ»é™¢é™ªä½ çš„äººï¼Œæ€»æ˜¯ä»¥ä½ ä¸ºé‡çš„äººã€‚ æ˜¯è¿™äº›äººç»„æˆä½ ç”Ÿå‘½ä¸­ä¸€ç‚¹ä¸€æ»´çš„æ¸©æš–ï¼Œæ˜¯è¿™äº›æ¸©æš–ä½¿ä½ è¿œç¦»é˜´éœ¾ï¼Œæ˜¯è¿™äº›æ¸©æš–ä½¿ä½ æˆä¸ºå–„è‰¯çš„äººã€‚</p></blockquote><p>ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> 7788 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HEAD å°ä¹Œé¾™</title>
      <link href="/2022/01/14/http_head/"/>
      <url>/2022/01/14/http_head/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><h3 id="æ‰‹æœº-App"><a href="#æ‰‹æœº-App" class="headerlink" title="æ‰‹æœº App"></a>æ‰‹æœº App</h3><p>ç†Ÿæ‚‰æ‰‹æœºç«¯çš„æœ‹å‹ä¸€èˆ¬éƒ½äº†è§£:</p><ol><li>iOS App çš„æ–‡ä»¶æ ¼å¼æ˜¯ .ipa ï¼›Android App çš„æ–‡ä»¶æ ¼å¼æ˜¯ .apkã€‚</li><li>ipa æ–‡ä»¶å®‰è£…åè®®æ˜¯è‹¹æœæä¾›çš„å½¢å¦‚ï¼š<code>itms-services://?action=download-manifest&amp;url=https://tommygirl.cn/app/download/plist</code> çš„é“¾æ¥ã€‚ä¸€ç³»åˆ—çš„è¯·æ±‚é¦–å…ˆæŒ‡å‘ plist æ–‡ä»¶ï¼Œplist æ–‡ä»¶ä¸­ä¼šæ³¨æ˜ ipa æ–‡ä»¶çš„çœŸå®ä¸‹è½½åœ°å€ä»¥åŠ App çš„åŸºæœ¬ä¿¡æ¯ã€‚åœ¨æ­¤ä¸èµ˜è¿°ã€‚</li><li>apk æ–‡ä»¶ç›¸è¾ƒäº ipa çš„å®‰è£…æ›´ç®€å•ä¸€äº›ï¼Œä¸‹è½½å¥½ apk æ–‡ä»¶ä»¥åè·Ÿéšç³»ç»Ÿçš„æç¤ºè¿›è¡Œå®‰è£…å³å¯ã€‚</li></ol><p>æä¾›ç»™ä¼ä¸šå†…éƒ¨å‘˜å·¥ä½¿ç”¨çš„ App ä¸€èˆ¬ä¸ä¼šç‰¹æ„ä¸Šçº¿ AppStore æˆ–è€…å®‰å“å„åº”ç”¨å¸‚åœºï¼Œé€šå¸¸è‡ªå·±ç»´æŠ¤ä¸€ä¸ªä¸‹è½½æœºåˆ¶ä¾›å°‘æ•°äººå®‰è£…å³å¯ã€‚</p><h3 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h3><p>åŸºäºæ‰‹æœºç«¯çš„èƒŒæ™¯ï¼Œä¸€ä¸ªç®€å•çš„ä¸‹è½½æœºåˆ¶å¯ä»¥æ˜¯è¿™æ ·çš„:</p><span id="more"></span><ol><li><p>æä¾›ä¸€ä¸ªç»Ÿä¸€çš„ App ä¸‹è½½(æ›´æ–°)æ¥å£:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://tommygirl.cn/app/download</span><br></pre></td></tr></table></figure></li><li><p>æ ¹æ® HTTP å¤´éƒ¨ User-Agent å­—æ®µæ¥åˆ¤æ–­è®¾å¤‡ç±»å‹ï¼šPCã€iOSã€Androidâ€¦â€¦ç­‰ç­‰ã€‚</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User-Agent : Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36</span><br></pre></td></tr></table></figure></li><li><p>æ ¹æ®ä¸åŒè®¾å¤‡åœ¨ Response ä¸­è¿”å›ä¸åŒçš„ä¸‹è½½åœ°å€:</p><p>å¦‚æœæ˜¯ Android è®¾å¤‡å‘¢ï¼Œ1. æ¥å£è¿”å›å½¢å¦‚:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://tommygirl.cn/app/download/ahaaaaa.apk</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯ iOS è®¾å¤‡å‘¢ï¼Œ1. æ¥å£è¿”å›å½¢å¦‚:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">itms-services://?action=download-manifest&amp;url=https://tommygirl.cn/app/download/plist</span><br></pre></td></tr></table></figure><p>plist æŒ‡å‘ ipa:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://tommygirl.cn/app/download/ahaaaaa.ipa</span><br></pre></td></tr></table></figure></li><li><p>æ‰‹æœºç«¯æ ¹æ®å„è‡ªç³»ç»Ÿçš„ç‰¹ç‚¹å»ä¸‹è½½æ–°çš„å®‰è£…åŒ…ã€‚</p></li></ol><h3 id="ç”¨æˆ·éœ€æ±‚"><a href="#ç”¨æˆ·éœ€æ±‚" class="headerlink" title="ç”¨æˆ·éœ€æ±‚"></a>ç”¨æˆ·éœ€æ±‚</h3><p>ç”¨æˆ·è¦æ±‚ç»Ÿè®¡ ipa å’Œ apk çš„ä¸‹è½½é‡ï¼Œè¯¯å·®å§‘ä¸”æ¥å— Â±100 å§ã€‚å“ˆå“ˆå“ˆï¼Œæ¯•ç«Ÿè‡ªå·±äººå¯èƒ½åå¤æµ‹è¯•äº§ç”Ÿä¸€äº›è¯¯å·®æ•°æ®ğŸ¤“ã€‚</p><p>ç”±äºé¡¹ç›®å‘¨æœŸçŸ­ï¼ŒæœåŠ¡ç«¯çš„å®ç°æœºåˆ¶æ˜¯ç»Ÿè®¡ä¸¤ä¸ªæ–‡ä»¶æ‰€åœ¨ä½ç½®çš„è®¿é—®é‡ã€‚ç„¶é¹…ï¼ŒåŒäº‹æµ‹è¯•çš„æ—¶å€™å‘ç°ï¼šä¸‹è½½é‡æ˜¯ç¿»å€åœ¨å¢é•¿ï¼Œè¿™æ ·ä¸‹å»æˆ‘ä»¬ App çš„ä¸‹è½½é‡å¯ä»¥è·Ÿå¾®ä¿¡åª²ç¾äº† ğŸ˜‚ã€‚æ‰€ä»¥è¿™ä¸ªè¯¡å¼‚çš„ç°è±¡æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><h2 id="åˆ†æ-æŠ“åŒ…"><a href="#åˆ†æ-æŠ“åŒ…" class="headerlink" title="åˆ†æ-æŠ“åŒ…"></a>åˆ†æ-æŠ“åŒ…</h2><p>ä»å®‰å“æ‰‹æœºå®‰è£…çš„ç°è±¡çœ‹ï¼Œæµè§ˆå™¨å…ˆè®¿é—®äº†ä¸€æ¬¡ apk æ–‡ä»¶ï¼Œä½†åˆä¸»åŠ¨å–æ¶ˆäº†ä¸‹è½½ï¼Œè¦ç­‰ç”¨æˆ·æ‰‹åŠ¨å†ç‚¹ä¸€æ¬¡ä¸‹è½½ï¼Œæ‰ä¼šçœŸæ­£çš„å¼€å§‹æ¥æ”¶æ•°æ®ã€‚æ‰€ä»¥æˆ‘çŒœæµ‹æ˜¯ä¸æ˜¯å…ˆåšäº†ä¸€æ¬¡ HEAD è¯·æ±‚ï¼Œç¬¬äºŒæ¬¡å†åšçš„ GET è¯·æ±‚ä¸‹è½½æ•°æ®ã€‚</p><ol><li><p>å…ˆåœ¨ iOS æ‰‹æœºä¸ŠæŠ“äº†ä¸€ä¸‹åŒ…ï¼Œæ¯ç‚¹å‡»ä¸€æ¬¡ä¸‹è½½æŒ‰é’®éƒ½ä¼šä¾æ¬¡å‘å‡ºä¸‰ä¸ªç½‘ç»œè¯·æ±‚ï¼š</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/app/download/plist</span> <span class="meta">HTTP/1.1</span></span><br><span class="line">HEAD /app/download/ahaaaaa.ipa HTTP/1.1</span><br><span class="line">GET /app/download/ahaaaaa.ipa HTTP/1.1</span><br></pre></td></tr></table></figure></li></ol><p>æŠ“åŒ…å†…å®¹ï¼š</p><center>    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/http-head.jpg" class width="500"></div></center><p>è¿™ä¸ªæ—¶å€™æˆ‘å·²ç»å’‹å’‹å‘¼å‘¼çš„è·‘å»æ‰¾åç«¯åŒäº‹ç‚«è€€è‡ªå·±çš„çŒœæµ‹äº†ï¼Œè‡ªä¿¡çš„è®¤ä¸ºç»å¯¹æ˜¯ HEAD è¯·æ±‚å¯¼è‡´çš„ï¼Œç‡ƒé¹…â€¦â€¦</p><ol start="2"><li><p>åœ¨ Android æ‰‹æœºä¸ŠæŠ“åŒ…ï¼Œä¸¤çº§åè½¬äº†ï¼š</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/app/download/ahaaaaa.apk</span> <span class="meta">HTTP/1.1</span></span><br><span class="line">GET /app/download/ahaaaaa.apk HTTP/1.1</span><br></pre></td></tr></table></figure></li></ol><p>æŠ“åŒ…å†…å®¹ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//----- Android</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;time_local&quot;</span>: <span class="string">&quot;30/Dec/2021:15:24:04 +0800&quot;</span>,</span><br><span class="line"><span class="attr">&quot;remote_addr&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line"><span class="attr">&quot;remote_user&quot;</span>: <span class="string">&quot;-&quot;</span>,</span><br><span class="line"><span class="attr">&quot;upstream_addr&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line"><span class="attr">&quot;time_total&quot;</span>: <span class="string">&quot;2.081&quot;</span>,</span><br><span class="line"><span class="attr">&quot;upstream_response_time&quot;</span>: <span class="string">&quot;2.081&quot;</span>,</span><br><span class="line"><span class="attr">&quot;status&quot;</span>: <span class="string">&quot;200&quot;</span>,</span><br><span class="line"><span class="attr">&quot;request&quot;</span>: <span class="string">&quot;GET /app/download/ahaaaaa.apk HTTP/1.1&quot;</span>,</span><br><span class="line"><span class="attr">&quot;method&quot;</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line"><span class="attr">&quot;body_bytes_sent&quot;</span>: <span class="string">&quot;13815405&quot;</span>,</span><br><span class="line"><span class="attr">&quot;http_user_agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Linux; Android 9; MHA-AL00; HMSCore 6.2.0.301; GMSCore 19.6.29) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.105 HuaweiBrowser/12.0.1.300 Mobile Safari/537.36&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;time_local&quot;</span>: <span class="string">&quot;30/Dec/202:15:24:12 +0800&quot;</span>,</span><br><span class="line"><span class="attr">&quot;remote_addr&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line"><span class="attr">&quot;remote_user&quot;</span>: <span class="string">&quot;-&quot;</span>,</span><br><span class="line"><span class="attr">&quot;upstream_addr&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line"><span class="attr">&quot;time_total&quot;</span>: <span class="string">&quot;4.410&quot;</span>,</span><br><span class="line"><span class="attr">&quot;upstream_response_time&quot;</span>: <span class="string">&quot;4.411&quot;</span>,</span><br><span class="line"><span class="attr">&quot;status&quot;</span>: <span class="string">&quot;200&quot;</span>,</span><br><span class="line"><span class="attr">&quot;request&quot;</span>: <span class="string">&quot;GET /app/download/ahaaaaa.apk HTTP/1.1&quot;</span>,</span><br><span class="line"><span class="attr">&quot;method&quot;</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line"><span class="attr">&quot;body_bytes_sent&quot;</span>: <span class="string">&quot;13815405&quot;</span>,</span><br><span class="line"><span class="attr">&quot;http_user_agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (Linux; Android 9; MHA-AL00; HMSCore 6.2.0.301; GMSCore 19.6.29) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.105 HuaweiBrowser/12.0.1.300 Mobile Safari/537.36&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç«Ÿç„¶æ˜¯ä¸¤ä¸ª GET è¯·æ±‚ï¼Œç¬¬ä¸€ä¸ªè¯·æ±‚è¢«æµè§ˆå™¨ä¸»åŠ¨æ–­å¼€äº†ï¼Œæ‰€ä»¥æ—¶é—´ä¹Ÿç›¸å¯¹è¾ƒçŸ­ã€‚è¿™é‡Œæˆ‘æ˜¯æŒºä¸ç†è§£çš„ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨ä¸€ä¸ª HEAD è¯·æ±‚å‘¢ï¼Ÿæ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¸çˆ±ç”¨å®‰å“æ‰‹æœºğŸ¤“ã€‚</p><h2 id="HEAD-è¯·æ±‚"><a href="#HEAD-è¯·æ±‚" class="headerlink" title="HEAD è¯·æ±‚"></a>HEAD è¯·æ±‚</h2><p>æ‰€ä»¥ä»€ä¹ˆæ˜¯ HEAD è¯·æ±‚å‘¢ï¼Ÿ</p><blockquote><p><strong>HTTP <code>HEAD</code> æ–¹æ³•</strong> è¯·æ±‚èµ„æºçš„å¤´éƒ¨ä¿¡æ¯, å¹¶ä¸”è¿™äº›å¤´éƒ¨ä¸ HTTP <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/GET"><code>GET</code></a> æ–¹æ³•è¯·æ±‚æ—¶è¿”å›çš„ä¸€è‡´. è¯¥è¯·æ±‚æ–¹æ³•çš„ä¸€ä¸ªä½¿ç”¨åœºæ™¯æ˜¯åœ¨ä¸‹è½½ä¸€ä¸ªå¤§æ–‡ä»¶å‰å…ˆè·å–å…¶å¤§å°å†å†³å®šæ˜¯å¦è¦ä¸‹è½½, ä»¥æ­¤å¯ä»¥èŠ‚çº¦å¸¦å®½èµ„æºã€‚</p><p><code>HEAD</code> æ–¹æ³•çš„å“åº”ä¸åº”åŒ…å«å“åº”æ­£æ–‡. å³ä½¿åŒ…å«äº†æ­£æ–‡ä¹Ÿå¿…é¡»å¿½ç•¥æ‰. è™½ç„¶æè¿°æ­£æ–‡ä¿¡æ¯çš„ <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Entity_header">entity headers</a>, ä¾‹å¦‚ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Length"><code>Content-Length</code></a> å¯èƒ½ä¼šåŒ…å«åœ¨å“åº”ä¸­, ä½†å®ƒä»¬å¹¶ä¸æ˜¯ç”¨æ¥æè¿° <code>HEAD</code> å“åº”æœ¬èº«çš„, è€Œæ˜¯ç”¨æ¥æè¿°åŒæ ·æƒ…å†µä¸‹çš„ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/GET"><code>GET</code></a> è¯·æ±‚åº”è¯¥è¿”å›çš„å“åº”ã€‚</p><p>å¦‚æœ <code>HEAD</code> è¯·æ±‚çš„ç»“æœæ˜¾ç¤ºåœ¨ä¸Šä¸€æ¬¡ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/GET"><code>GET</code></a> è¯·æ±‚åç¼“å­˜çš„èµ„æºå·²ç»è¿‡æœŸäº†, å³ä½¿æ²¡æœ‰å‘å‡º<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods/GET"><code>GET</code></a>è¯·æ±‚ï¼Œç¼“å­˜ä¹Ÿä¼šå¤±æ•ˆã€‚</p></blockquote><p>é™¤äº†ä¸Šé¢æåˆ°çš„èŠ‚çº¦å¸¦å®½ä»¥å¤–ï¼Œè¿˜å¯ä»¥æ¢æµ‹æ–‡ä»¶çš„æœ‰æ•ˆæ€§ã€å¯ç”¨æ€§ã€æœ€è¿‘æ˜¯å¦æœ‰ä¿®æ”¹ç­‰ç­‰ã€‚</p><h2 id="302"><a href="#302" class="headerlink" title="302"></a>302</h2><p>è‹¹æœç³»ç»Ÿé’ˆå¯¹ ipa æ–‡ä»¶åº”è¯¥æ˜¯ä¸»åŠ¨å‘çš„ HEAD è¯·æ±‚ï¼Œè¿™ä¸ªç›¸å¯¹å¥½å¤„ç†ä¸€äº›ã€‚ä½†å®‰å“ç³»ç»Ÿå†…éƒ¨çš„å®ç°æœºåˆ¶æˆ‘ä»¬ä¸å¤ªå¥½çŒœäº†ã€‚æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡ä¸€ä¸ª 302 è·³è½¬è§„é¿è¿™ç§æƒ…å†µï¼Œåœ¨ <a href="/2022/01/14/http_head/#%E6%9C%8D%E5%8A%A1%E7%AB%AF">åŸæ–¹æ¡ˆ</a> ä¸­çš„ç¬¬ä¸‰æ­¥ä¿®æ”¹ä¸º:</p><ol start="3"><li>åœ¨ Response ä¸­è¿”å›åŒä¸€ä¸ªåœ°å€(ç”¨äºç»Ÿè®¡ä¸‹è½½é‡çš„æ¥å£)ï¼Œä½†å¹¶ä¸æ˜¯çœŸæ­£çš„å®‰è£…åŒ…ä¸‹è½½åœ°å€ã€‚</li></ol><p>For example è¿”å›ä¸€ä¸ªç»Ÿè®¡æ¥å£ç»™æ‰‹æœºç«¯ï¼š</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://tommygirl.cn/app/download/file</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯ Android è®¾å¤‡å‘¢ï¼Œç»Ÿè®¡æ¥å£å† 302 æŒ‡å‘:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://tommygirl.cn/app/download/ahaaaaa.apk</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯ iOS è®¾å¤‡å‘¢ï¼Œç»Ÿè®¡æ¥å£å† 302 æŒ‡å‘:</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">itms-services://?action=download-manifest&amp;url=https://tommygirl.cn/app/download/plist</span><br></pre></td></tr></table></figure><p>â€¦â€¦åé¢çš„è¿‡ç¨‹å°±ä¸€æ ·äº†ã€‚</p><p>FYI: iOS ç”¨çš„ç½‘ç»œç»„ä»¶ AFNetworking æ­£å¸¸æƒ…å†µä¸‹æ˜¯ä¸æ”¯æŒ itms-services åè®®çš„ï¼Œæ‰€ä»¥è¦å•ç‹¬åœ¨å¤±è´¥å›è°ƒä¸­å¤„ç†ä¸€ä¸‹ã€‚</p><p>soâ€¦â€¦ä¸€ä¸ªå°ä¹Œé¾™å°±è¿™æ ·äº†</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/flag.jpeg"></p>]]></content>
      
      
      
        <tags>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éœ‡æƒŠï¼ç”± Referer å¼•å‘çš„ä¸€æ¡©â€œæƒ¨æ¡ˆâ€ï¼Ÿ</title>
      <link href="/2021/12/31/http_referer/"/>
      <url>/2021/12/31/http_referer/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æ¡ˆä»¶èµ·å› "><a href="#æ¡ˆä»¶èµ·å› " class="headerlink" title="æ¡ˆä»¶èµ·å› "></a>æ¡ˆä»¶èµ·å› </h2><p>éœ‡æƒŠï¼å…¨å‘˜éœ‡æƒŠğŸ˜±ï¼ä¸€ä½ç¨‹åºå‘˜å“ˆæŸä¸¾æŠ¥æœ‰äººå·èµ°äº†ä»–ä¸¤å¤©ä¸¤å¤œçš„æ—¶é—´ï¼Œç»è¿‡æˆ‘ä»¬24å°æ—¶çš„è·Ÿè¸ªæš—è®¿ï¼Œå«Œç–‘äººç«Ÿæ˜¯ Mr.Referrer ï¼Ÿè¯·çœ‹è¯¦ç»†æŠ¥é“ï¼š</p><center>    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/shark01.png" class width="300"></div>    <div style="display:inline-block;margin-left:10px;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/shark02.png" class width="300"></div></center><span id="more"></span><blockquote><p>å‰ç«¯åŒäº‹çš„ä¸€ä¸ª jsp èµ„æºAï¼Œé€šè¿‡æµè§ˆå™¨å»è®¿é—®ç¬¬ä¸‰æ–¹ä¸šåŠ¡çš„æŸä¸ªèµ„æºBï¼Œèµ„æºBä¼šåšä¸€ä¸ª login è®¤è¯è¯·æ±‚ï¼Œå¦‚æœ login æˆåŠŸåˆ™è¿”å›èµ„æºBçš„è¯¦ç»†é¡µé¢ä¿¡æ¯ï¼Œåä¹‹è¿›å…¥ ErrorPageã€‚åœ¨æµ‹è¯•ç¯å¢ƒä¸­ï¼Œlogin æ˜¯å¯ä»¥æˆåŠŸçš„ï¼›ä½†æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œlogin è¯·æ±‚æç¤ºäº†å¦‚ä¸‹é”™è¯¯ï¼š</p></blockquote><blockquote><p><strong>Provisional headers are shown.</strong></p></blockquote><blockquote><p>ç›´è¯‘æ˜¯ï¼šæ˜¾ç¤ºäº†ä¸´æ—¶çš„ï¼ˆæš‚å®šçš„ï¼‰æ ‡é¢˜ã€‚ç»æŠ“åŒ…æŸ¥çœ‹ç½‘ç»œçŠ¶å†µæ˜¯ï¼šHTTP Code 200 OKï¼Œä½†æ˜¯ Response æ˜¯ç©ºçš„ï¼Œæ›´åƒæ˜¯æµè§ˆå™¨ä¸»åŠ¨å–æ¶ˆäº†è¿™ä¸ªè¯·æ±‚ï¼ŒGoogle å’Œ Safari éƒ½æ˜¯ä¸€æ ·çš„ç°è±¡ã€‚</p></blockquote><p>å“ˆæŸæ’æŸ¥äº†è®¸ä¹…ä¹Ÿæ²¡æœ‰å®šä½åˆ°åŸå› ï¼Œé¢ä¸´å®¢æˆ·æå‡ºçš„ç´§æ€¥ä¸Šçº¿ï¼Œæƒ…å†µå¾ˆæ˜¯ç„¦ç¼ã€‚</p><p>FYI: ä¸æƒ³å¬æˆ‘è®²åºŸè¯çš„è¯ï¼Œè¯·ç›´æ¥è·³è½¬è‡³ <a href="/2021/12/31/http_referer/#Referrer-or-Referer">Referer</a> ğŸ˜‚</p><h2 id="åˆ†æè¿‡ç¨‹"><a href="#åˆ†æè¿‡ç¨‹" class="headerlink" title="åˆ†æè¿‡ç¨‹"></a>åˆ†æè¿‡ç¨‹</h2><h3 id="1-è°·æ­Œä¸€ä¸‹"><a href="#1-è°·æ­Œä¸€ä¸‹" class="headerlink" title="1.è°·æ­Œä¸€ä¸‹"></a>1.è°·æ­Œä¸€ä¸‹</h3><p>ç›¸ä¿¡å¤§éƒ¨åˆ†ç¨‹åºå‘˜é‡åˆ°é—®é¢˜æ—¶ï¼Œç¬¬ä¸€ä¸ªæ’æŸ¥æ­¥éª¤éƒ½æ˜¯æ–½å±• CV å¤§æ³•ç²˜åˆ°è°·æ­Œæœç´¢ä¸€ä¸‹ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å’Œå“ˆæŸä¹Ÿé‡‡å–äº†è¿™ä¸€æ­¥ï¼Œæœç´¢ <code>Provisional headers are shown</code> å¾—åˆ°çš„ç»“æœéƒ½å¤§åŒå°å¼‚ã€‚ä»¥ä¸‹å‡ ä¸ªåŸå› <a href="https://segmentfault.com/a/1190000018191614">ç²˜è´´è‡ªè¿™é‡Œ</a></p><p>å…·ä½“åŸå› æœ‰å¤šç§æ€»ç»“å¦‚ä¸‹ï¼š<br>1.è¯·æ±‚è¢«æŸäº›æ‰©å±•å¦‚ Adblock æ‹¦æˆªäº†ï¼Œè¯·æ±‚è¢«æµè§ˆå™¨æ’ä»¶æ‹¦æˆªã€‚è§£å†³æ–¹æ¡ˆï¼šç”¨ chrome://net-internals æ¥å¸®åŠ©ä½ æŸ¥æ‰¾è¢«å±è”½çš„è¯·æ±‚ä»¥åŠå¯èƒ½çš„åŸå› ã€‚ï¼ˆæœ¬äººå‘ç°ç°åœ¨è¿™ä¸ªç”¨ä¸äº†äº†ï¼‰ï¼›<br>2.è¯·æ±‚è¢«å¢™äº†ï¼›<br>3.èµ°æœ¬åœ°ç¼“å­˜æˆ–è€… dataurl çš„è¯·æ±‚ã€‚å¼ºç¼“å­˜ from disk cache æˆ–è€… from memory cacheï¼Œæ­¤æ—¶ä¹Ÿä¸ä¼šæ˜¾ç¤ºï¼›<br>4.æœåŠ¡å™¨æœªåŠæ—¶å“åº”ï¼ˆè¶…æ—¶ï¼‰ï¼›<br>5.è·¨åŸŸï¼Œè¯·æ±‚è¢«æµè§ˆå™¨æ‹¦æˆªï¼›<br>6.<a href="https://link.segmentfault.com/?enc=XF6fR2q9AZND/ujtgtszDg==.2MOJqWSs0judvuIA1tJF0rNFn1/t0QMFah/F8CbkeEnIj5LdNIg83y5I67gI9uu1">å…¶ä»–åŸå› </a>ï¼›</p><p>è¿™é‡Œçš„åŸå› 6ï¼Œæˆ‘ä»¬å°±å½“ä»–åœ¨é’»ç ”åºŸè¯æ–‡å­¦å§â€¦â€¦æ€»è€Œè¨€ä¹‹ï¼Œç½‘å‹ä»¬æä¾›çš„è¿™å‡ ä¸ªåŸå› ï¼Œç»å°è¯•ï¼Œä¾æ—§æ²¡æœ‰å®šä½åˆ°é—®é¢˜ã€‚</p><h3 id="2-æ£€æŸ¥-Nginx-é…ç½®"><a href="#2-æ£€æŸ¥-Nginx-é…ç½®" class="headerlink" title="2.æ£€æŸ¥ Nginx é…ç½®"></a>2.æ£€æŸ¥ Nginx é…ç½®</h3><p>ç»è¿‡ä¸Šé¢â€œä¸“ä¸šâ€çš„æ’æŸ¥~ä¾æ—§æ‡µé€¼ã€‚éšåå“ˆæŸè”ç³»äº†æœåŠ¡ç«¯çš„åŒäº‹ï¼Œæƒ³æ¯”å¯¹ä¸€ä¸‹æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒä¸­ Nginx çš„é…ç½®æ˜¯å¦æœ‰åŒºåˆ«ï¼Œç‡ƒé¹…å¹¶æ²¡æœ‰åŒºåˆ«ã€‚ä¸ºäº†é¿å¼€ Nginx å­˜åœ¨çš„æœªçŸ¥å¹²æ‰°ï¼Œä»å†…ç½‘è®¿é—®èµ„æºBï¼Œlogin çš„æ“ä½œæ˜¾ç¤º 404 ğŸ™„â€¦â€¦</p><p>äºŒåº¦æ‡µé€¼~ğŸ˜³</p><h3 id="3-æ²Ÿé€š"><a href="#3-æ²Ÿé€š" class="headerlink" title="3.æ²Ÿé€š"></a>3.æ²Ÿé€š</h3><p>é€šè¿‡ä¸“ä¸šæ‰‹æ®µæ²¡æœ‰å®šä½åˆ°åŸå› ï¼Œåªèƒ½å°è¯•å’Œç¬¬ä¸‰æ–¹ä¸šåŠ¡çš„äººæ²Ÿé€šäº†ã€‚æŒ‰ç…§æˆ‘ä»¬å¤§éƒ¨é—¨çš„ç®¡ç†ç†å¿µï¼Œæ²¡æœ‰ä»€ä¹ˆäº‹æƒ…æ˜¯æ²Ÿé€šè§£å†³ä¸äº†çš„ã€‚</p><p>å¾ˆä¸å¹¸çš„æ˜¯ï¼Œå¯¹ç«¯çš„äººåªåé¦ˆç»™æˆ‘ä»¬ login è¯·æ±‚å¹¶æ²¡æœ‰åˆ°è¾¾ä»–ä»¬é‚£å„¿ã€‚å¬åˆ°è¿™ä¸ªå›ç­”ç¬‘å“­äº†æœ‰æ²¡æœ‰~ç”¨å“ˆæŸçš„è¯è¯´ï¼šâ€œæˆ‘éƒ½å¿«çœ‹ä»–å†…è£¤äº†ï¼Œè¿˜ä¸æ‰¿è®¤â€ï¼Œä»Šå¤©å‡Œæ™¨èººåœ¨åºŠä¸Šå¸®ä»–ä»¬åˆ†æè¿™ä¸ªé—®é¢˜æ—¶ï¼ˆå…¶å®æˆ‘ä¸æ‡‚åç«¯ï¼Œå°±æ˜¯è·Ÿç€çæºå’Œé¡ºä¾¿å­¦ä¹ æ–°çŸ¥è¯†ï¼‰ï¼Œè¢«è¿™å¥è¯é€—ç¬‘äº†ï¼Œä¹Ÿç®—æ˜¯é€šå®µåŠ ç­çš„ä¸€ä¸ªæ…°è—‰äº†ã€‚ğŸ˜‚</p><h3 id="4-Charles"><a href="#4-Charles" class="headerlink" title="4.Charles"></a>4.Charles</h3><p>é€šè¿‡å¯¹ App æŠ“åŒ…ï¼Œlogin è¯·æ±‚åŒæ ·æ˜¾ç¤º HTTP Code 200 OKï¼Œä½†æ˜¯ Response æ˜¯ç©ºçš„ã€‚ä½†æ˜¯è·Ÿ Google æµè§ˆå™¨ä¸­ NetWork è°ƒè¯•å™¨çš„è¡¨ç°ä¸å¤ªä¸€æ ·ã€‚</p><h3 id="5-cURL"><a href="#5-cURL" class="headerlink" title="5.cURL"></a>5.cURL</h3><p>ä¸ºäº†æ’é™¤æµè§ˆå™¨å¯¹ Response å¯èƒ½å­˜åœ¨ç‰¹æ®Šçš„è§£æè§„åˆ™ï¼Œäº¦æˆ–è€…æœåŠ¡å™¨é’ˆå¯¹æµè§ˆå™¨å‘å‡ºçš„è¯·æ±‚åšä¸€äº›é™åˆ¶ï¼Œå¯ä»¥é€šè¿‡ cURL ä½œç½‘ç»œè¯·æ±‚ã€‚cURLå…¥é—¨å­¦ä¹ ï¼š<a href="https://www.ruanyifeng.com/blog/2019/09/curl-reference.html">é˜®ä¸€å³°-curl çš„ç”¨æ³•æŒ‡å—</a> ã€‚</p><p>é€šè¿‡ cURL è®¿é—®èµ„æºBä»¥åŠ login è¯·æ±‚ï¼ŒUmmmmmmmmï¼Œè¯·æ±‚æ˜¯æˆåŠŸçš„ï¼ç»è¿‡ä¸€ä½â€ç¥æ£â€çš„æç‚¹ï¼Œæˆ‘ä»¬ä» Google æµè§ˆå™¨ä¸­é€‰ä¸­ç›®æ ‡è¯·æ±‚ -&gt; å³å‡» -&gt; Copy -&gt; Copy as cURLï¼š</p><center>    <div style="display:inline-block;margin-left:10px;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/google_copy.png" class width="500"></div></center><p>æ¯”å¯¹ä¸€ä¸‹å’Œè‡ªå·±ä½¿ç”¨ cURL å†™çš„è¯·æ±‚åŒºåˆ«åœ¨å“ªé‡Œï¼Œç»“æœå¦‚ä¸‹ï¼š</p><ul><li><p>é¡µé¢å…³ç³»</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1ã€å…ˆè®¿é—®èµ„æºAï¼š https://hhh.com:0000/aaa/test.jsp</span><br><span class="line">2ã€ç”±1è·³è½¬åˆ°èµ„æºBï¼š https://hhh.com:0000/aaa/index.html</span><br><span class="line">3ã€ç”±2å‘èµ· login è®¤è¯è¯·æ±‚ https://hhh.com:0000/aaa/loginAction.do</span><br></pre></td></tr></table></figure></li><li><p>Google å‘å‡ºçš„è¯·æ±‚ï¼ˆå¤±è´¥çš„æƒ…å†µï¼‰</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">curl</span> <span class="string">&#x27;https://hhh.com:0000/aaa/loginAction.do&#x27;</span> \</span><br><span class="line">  <span class="literal">-H</span> <span class="string">&#x27;Connection: keep-alive&#x27;</span> \</span><br><span class="line">  <span class="literal">-H</span> <span class="string">&#x27;Pragma: no-cache&#x27;</span> \</span><br><span class="line">  <span class="literal">-H</span> <span class="string">&#x27;Cache-Control: no-cache&#x27;</span> \</span><br><span class="line">  <span class="literal">-H</span> <span class="string">&#x27;sec-ch-ua: &quot; Not A;Brand&quot;;v=&quot;99&quot;, &quot;Chromium&quot;;v=&quot;96&quot;, &quot;Google Chrome&quot;;v=&quot;96&quot;&#x27;</span> \</span><br><span class="line">  <span class="literal">-H</span> <span class="string">&#x27;Accept: application/json, text/plain, */*&#x27;</span> \</span><br><span class="line">  <span class="literal">-H</span> <span class="string">&#x27;sec-ch-ua-mobile: ?0&#x27;</span> \</span><br><span class="line">  <span class="literal">-H</span> <span class="string">&#x27;User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36&#x27;</span> \</span><br><span class="line">  <span class="literal">-H</span> <span class="string">&#x27;sec-ch-ua-platform: &quot;macOS&quot;&#x27;</span> \</span><br><span class="line">  <span class="literal">-H</span> <span class="string">&#x27;Sec-Fetch-Site: same-origin&#x27;</span> \</span><br><span class="line">  <span class="literal">-H</span> <span class="string">&#x27;Sec-Fetch-Mode: cors&#x27;</span> \</span><br><span class="line">  <span class="literal">-H</span> <span class="string">&#x27;Sec-Fetch-Dest: empty&#x27;</span> \</span><br><span class="line">  <span class="literal">-H</span> <span class="string">&#x27;Referer: https://hhh.com:0000/aaa/index.html&#x27;</span> \</span><br><span class="line">  <span class="literal">-H</span> <span class="string">&#x27;Accept-Language: zh-CN,zh;q=0.9,en;q=0.8&#x27;</span> \</span><br><span class="line">  <span class="literal">-H</span> <span class="string">&#x27;Cookie: JSESSIONID=68ED14BCB51A01E5DA08FA2009333BA2&#x27;</span> \</span><br><span class="line">  -<span class="literal">-compressed</span> <span class="literal">-i</span></span><br></pre></td></tr></table></figure></li><li><p>è‡ªå·±å‘çš„ cURL è¯·æ±‚ï¼ˆæˆåŠŸçš„æƒ…å†µï¼‰</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">curl</span> <span class="string">&#x27;https://hhh.com:0000/aaa/loginAction.do&#x27;</span> <span class="literal">-i</span></span><br></pre></td></tr></table></figure></li></ul><p>æ‰€ä»¥åŒºåˆ«åœ¨å“ªé‡Œå‘¢ï¼Ÿheader ï¼</p><h3 id="6-ç ´æ¡ˆ"><a href="#6-ç ´æ¡ˆ" class="headerlink" title="6.ç ´æ¡ˆ"></a>6.ç ´æ¡ˆ</h3><p>ç»è¿‡ä¿®æ”¹å‡ ä¸ªä¸»è¦çš„ header ä¿¡æ¯ï¼Œæœ€ç»ˆç¡®å®šäº†çœŸå‡¶å°±æ˜¯ <code>Referer</code> å­—æ®µã€‚å»æ‰ <code>Referer</code> ä¹‹åé¡µé¢å¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚æ— å¥ˆç”±äºèµ„æºBæ˜¯ä¸‰æ–¹ç³»ç»Ÿï¼Œæˆ‘ä»¬æ— æ³•è¦æ±‚å¯¹æ–¹ä¿®æ”¹ä»£ç ï¼Œé‡‡ç”¨äº†ä¸´æ—¶çš„è§£å†³æ–¹æ¡ˆï¼š</p><blockquote><p> <strong>ä¿®æ”¹ DMZ åŒº Nginx çš„é…ç½®ï¼Œæ‰€æœ‰ç»è¿‡è¿™å° Nginx çš„è¯·æ±‚éƒ½ä¸æºå¸¦ Referer å¤´éƒ¨ã€‚</strong></p></blockquote><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">add_header</span> Referrer-Policy <span class="literal">no</span>-referrer;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥  <code>Provisional headers are shown</code>  ç¿»è¯‘ä¸ºâ€ä¸´æ—¶çš„å¤´éƒ¨ä¿¡æ¯â€œæ›´ä¸ºè´´åˆ‡å¯¹å—ï¼Ÿä¸çŸ¥é“æ˜¯å¦å› ä¸º Referer æ¶‰åŠç”¨æˆ·éšç§çš„é—®é¢˜ã€‚</p><h2 id="Referrer-or-Referer"><a href="#Referrer-or-Referer" class="headerlink" title="Referrer or Referer ?"></a>Referrer or Referer ?</h2><p><code>Referer</code> æ˜¯ HTTP è¯·æ±‚å¤´é‡Œä¸€ä¸ªå¸¸è§çš„å­—æ®µï¼ŒåŒ…å«äº†å½“å‰è¯·æ±‚é¡µé¢çš„æ¥æºé¡µé¢çš„åœ°å€ï¼Œå³è¡¨ç¤ºå½“å‰é¡µé¢æ˜¯é€šè¿‡æ­¤æ¥æºé¡µé¢é‡Œçš„é“¾æ¥è¿›å…¥çš„ã€‚æœåŠ¡ç«¯ä¸€èˆ¬ä½¿ç”¨ <code>Referer</code> è¯·æ±‚å¤´è¯†åˆ«è®¿é—®æ¥æºï¼Œå¯èƒ½ä¼šä»¥æ­¤è¿›è¡Œç»Ÿè®¡åˆ†æã€æ—¥å¿—è®°å½•ä»¥åŠç¼“å­˜ä¼˜åŒ–ç­‰ã€‚</p><h3 id="1-Referer-çš„å«ä¹‰"><a href="#1-Referer-çš„å«ä¹‰" class="headerlink" title="1.Referer çš„å«ä¹‰"></a>1.Referer çš„å«ä¹‰</h3><p>ç°å®ç”Ÿæ´»ä¸­ï¼Œä½ ä¸€å®šå¡«è¿‡è¿™æ ·çš„é—®å·è°ƒæŸ¥ï¼šâ€ä½ ä»å“ªé‡ŒçŸ¥é“äº†æˆ‘ä»¬ï¼Ÿâ€ã€‚è¿™å«åšå¼•èäººï¼ˆreferrerï¼‰ï¼Œè°å¼•èäº†ä½ ï¼Ÿå¯¹äºå…¬å¸æ¥è¯´ï¼Œè¿™æ˜¯å¾ˆæœ‰ç”¨çš„ä¿¡æ¯ã€‚äº’è”ç½‘ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä½ ä¸ä¼šæ— ç¼˜æ— æ•…è®¿é—®ä¸€ä¸ªç½‘é¡µï¼Œæ€»æ˜¯æœ‰äººå‘Šè¯‰ä½ ï¼Œå¯ä»¥å»é‚£é‡Œçœ‹çœ‹ã€‚æœåŠ¡å™¨ä¹Ÿæƒ³çŸ¥é“ï¼Œä½ çš„ â€œå¼•èäººâ€ æ˜¯è°ï¼Ÿ</p><p>HTTP åè®®åœ¨è¯·æ±‚ï¼ˆrequestï¼‰çš„å¤´ä¿¡æ¯é‡Œé¢ï¼Œè®¾è®¡äº†ä¸€ä¸ª <code>Referer</code> å­—æ®µï¼Œç»™å‡º â€œå¼•èç½‘é¡µâ€ çš„ URLã€‚è¿™ä¸ªå­—æ®µæ˜¯å¯é€‰çš„ã€‚å®¢æˆ·ç«¯å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œè‡ªä¸»å†³å®šæ˜¯å¦åŠ ä¸Šè¯¥å­—æ®µã€‚</p><p>å¾ˆæœ‰è¶£çš„æ˜¯ï¼Œè¿™ä¸ªå­—æ®µçš„æ‹¼å†™æ˜¯é”™çš„ã€‚<code>Referer</code> çš„æ­£ç¡®æ‹¼å†™æ˜¯ <code>Referrer</code>ï¼Œä½†æ˜¯å†™å…¥æ ‡å‡†çš„æ—¶å€™ï¼Œä¸çŸ¥ä¸ºä½•ï¼Œæ²¡äººå‘ç°å°‘äº†ä¸€ä¸ªå­—æ¯<code>r</code>ã€‚æ ‡å‡†å®šæ¡ˆä»¥åï¼Œåªèƒ½å°†é”™å°±é”™ï¼Œæ‰€æœ‰å¤´ä¿¡æ¯çš„è¯¥å­—æ®µéƒ½ä¸€å¾‹é”™è¯¯æ‹¼å†™æˆ <code>Referer</code>ã€‚Nginx é‡‡ç”¨çš„æ˜¯æ­£ç¡®æ‹¼å†™~</p><h3 id="2-Referer-çš„å‘ç”Ÿåœºæ™¯"><a href="#2-Referer-çš„å‘ç”Ÿåœºæ™¯" class="headerlink" title="2.Referer çš„å‘ç”Ÿåœºæ™¯"></a>2.Referer çš„å‘ç”Ÿåœºæ™¯</h3><p>æµè§ˆå™¨å‘æœåŠ¡å™¨è¯·æ±‚èµ„æºçš„æ—¶å€™ï¼Œ<code>Referer</code> å­—æ®µçš„é€»è¾‘æ˜¯è¿™æ ·çš„ï¼Œç”¨æˆ·åœ¨åœ°å€æ è¾“å…¥ç½‘å€ï¼Œæˆ–è€…é€‰ä¸­æµè§ˆå™¨ä¹¦ç­¾ï¼Œå°±ä¸å‘é€ <code>Referer</code> å­—æ®µã€‚</p><p>ä¸»è¦æ˜¯ä»¥ä¸‹ä¸‰ç§åœºæ™¯ï¼Œä¼šå‘é€ <code>Referer</code> å­—æ®µï¼š</p><p>ï¼ˆ1ï¼‰ç”¨æˆ·ç‚¹å‡»ç½‘é¡µä¸Šçš„é“¾æ¥ã€‚</p><p>ï¼ˆ2ï¼‰ç”¨æˆ·å‘é€è¡¨å•ã€‚</p><p>ï¼ˆ3ï¼‰ç½‘é¡µåŠ è½½é™æ€èµ„æºï¼Œæ¯”å¦‚åŠ è½½å›¾ç‰‡ã€è„šæœ¬ã€æ ·å¼ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åŠ è½½å›¾ç‰‡ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;foo.jpg&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åŠ è½½è„šæœ¬ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;foo.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- åŠ è½½æ ·å¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;foo.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™äº›åœºæ™¯ï¼Œæµè§ˆå™¨éƒ½ä¼šå°†å½“å‰ç½‘å€ä½œä¸º <code>Referer</code> å­—æ®µï¼Œæ”¾åœ¨ HTTP è¯·æ±‚çš„å¤´ä¿¡æ¯å‘é€ã€‚</p><p>æµè§ˆå™¨çš„ JavaScript å¼•æ“æä¾› <code>document.referrer</code> å±æ€§ï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰é¡µé¢çš„å¼•èæ¥æºã€‚æ³¨æ„ï¼Œè¿™é‡Œé‡‡ç”¨çš„æ˜¯æ­£ç¡®æ‹¼å†™ã€‚</p><h3 id="3-Referer-çš„ä½œç”¨"><a href="#3-Referer-çš„ä½œç”¨" class="headerlink" title="3.Referer çš„ä½œç”¨"></a>3.Referer çš„ä½œç”¨</h3><p><code>Referer</code> å­—æ®µå®é™…ä¸Šå‘Šè¯‰äº†æœåŠ¡å™¨ï¼Œç”¨æˆ·åœ¨è®¿é—®å½“å‰èµ„æºä¹‹å‰çš„ä½ç½®ã€‚è¿™å¾€å¾€å¯ä»¥ç”¨æ¥ç”¨æˆ·è·Ÿè¸ªã€‚ä¸€ä¸ªå…¸å‹çš„åº”ç”¨æ˜¯ï¼Œæœ‰äº›ç½‘ç«™ä¸å…è®¸å›¾ç‰‡å¤–é“¾ï¼Œåªæœ‰è‡ªå®¶çš„ç½‘ç«™æ‰èƒ½æ˜¾ç¤ºå›¾ç‰‡ï¼Œå¤–éƒ¨ç½‘ç«™åŠ è½½å›¾ç‰‡å°±ä¼šæŠ¥é”™ã€‚å®ƒçš„å®ç°å°±æ˜¯åŸºäº <code>Referer</code> å­—æ®µï¼Œå¦‚æœè¯¥å­—æ®µçš„ç½‘å€æ˜¯è‡ªå®¶ç½‘å€ï¼Œå°±æ”¾è¡Œã€‚</p><p>ç”±äºæ¶‰åŠéšç§ï¼Œå¾ˆå¤šæ—¶å€™ä¸é€‚åˆå‘é€ <code>Referer</code> å­—æ®µã€‚è¿™é‡Œä¸¾ä¸¤ä¸ªä¾‹å­ï¼Œéƒ½ä¸é€‚åˆæš´éœ² URLã€‚ä¸€ä¸ªæ˜¯åŠŸèƒ½ URLï¼Œå³æœ‰çš„ URL ä¸è¦ç™»å½•ï¼Œå¯ä»¥è®¿é—®ï¼Œå°±èƒ½ç›´æ¥å®Œæˆå¯†ç é‡ç½®ã€é‚®ä»¶é€€è®¢ç­‰åŠŸèƒ½ã€‚å¦ä¸€ä¸ªæ˜¯å†…ç½‘ URLï¼Œä¸å¸Œæœ›å¤–éƒ¨ç”¨æˆ·çŸ¥é“å†…ç½‘æœ‰è¿™æ ·çš„åœ°å€ã€‚<code>Referer</code> å­—æ®µå¾ˆå¯èƒ½æŠŠè¿™äº› URL æš´éœ²å‡ºå»ã€‚</p><p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œéœ€è¦å®šåˆ¶ <code>Referer</code> å­—æ®µã€‚æ¯”å¦‚ç¤¾äº¤ç½‘ç«™ä¸Šï¼Œç”¨æˆ·åœ¨å¯¹è¯ä¸­æåˆ°æŸä¸ªç½‘å€ã€‚è¿™æ—¶ï¼Œä¸å¸Œæœ›æš´éœ²ç”¨æˆ·æ‰€åœ¨çš„åŸå§‹ç½‘å€ï¼Œä½†æ˜¯å¯ä»¥æš´éœ²ç¤¾äº¤ç½‘ç«™çš„åŸŸåï¼Œè®©å¯¹æ–¹çŸ¥é“ï¼Œæ˜¯æˆ‘è´¡çŒ®äº†ä½ çš„æµé‡ã€‚</p><h3 id="4-relå±æ€§"><a href="#4-relå±æ€§" class="headerlink" title="4.relå±æ€§"></a>4.<code>rel</code>å±æ€§</h3><p>ç”±äºä¸Šä¸€èŠ‚çš„åŸå› ï¼Œæµè§ˆå™¨æä¾›ä¸€ç³»åˆ—æ‰‹æ®µï¼Œå…è®¸æ”¹å˜é»˜è®¤çš„ <code>Referer</code> è¡Œä¸ºã€‚</p><p>å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œ<code>rel=&quot;noreferrer&quot;</code> å±æ€§æ˜¯æœ€ç®€å•çš„ä¸€ç§æ–¹æ³•ã€‚<code>&lt;a&gt;</code>ã€<code>&lt;area&gt;</code> å’Œ <code>&lt;form&gt;</code> ä¸‰ä¸ªæ ‡ç­¾å¯ä»¥ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œä¸€æ—¦ä½¿ç”¨ï¼Œè¯¥å…ƒç´ å°±ä¸ä¼šå‘é€<code>Referer</code>å­—æ®µã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;...&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;noreferrer&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸Šé¢é“¾æ¥ç‚¹å‡»äº§ç”Ÿçš„ HTTP è¯·æ±‚ï¼Œä¸ä¼šå¸¦æœ‰  <code>Referer</code>  å­—æ®µã€‚</p><p>æ³¨æ„ï¼Œ<code>rel=&quot;noreferrer&quot;</code> é‡‡ç”¨çš„æ˜¯æ­£ç¡®çš„æ‹¼å†™ã€‚</p><h3 id="5-Referrer-Policy-çš„å€¼"><a href="#5-Referrer-Policy-çš„å€¼" class="headerlink" title="5.Referrer Policy çš„å€¼"></a>5.Referrer Policy çš„å€¼</h3><p><code>rel</code> å±æ€§åªèƒ½å®šåˆ¶å•ä¸ªå…ƒç´ çš„ <code>Referer</code> è¡Œä¸ºï¼Œè€Œä¸”é€‰æ‹©æ¯”è¾ƒå°‘ï¼Œåªèƒ½å‘é€æˆ–ä¸å‘é€ã€‚W3C ä¸ºæ­¤åˆ¶å®šäº†æ›´å¼ºå¤§çš„ <a href="https://w3c.github.io/webappsec-referrer-policy/">Referrer Policy</a>ã€‚</p><p>Referrer Policy å¯ä»¥è®¾å®š 8 ä¸ªå€¼ï¼š</p><p><strong>ï¼ˆ1ï¼‰no-referrer</strong></p><p>ä¸å‘é€ <code>Referer</code> å­—æ®µã€‚</p><p><strong>ï¼ˆ2ï¼‰no-referrer-when-downgrade</strong></p><p>å¦‚æœä» HTTPS ç½‘å€é“¾æ¥åˆ° HTTP ç½‘å€ï¼Œä¸å‘é€ <code>Referer</code> å­—æ®µï¼Œå…¶ä»–æƒ…å†µå‘é€ï¼ˆåŒ…æ‹¬ HTTP ç½‘å€é“¾æ¥åˆ° HTTP ç½‘å€ï¼‰ã€‚è¿™æ˜¯æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºã€‚</p><p><strong>ï¼ˆ3ï¼‰same-origin</strong></p><p>é“¾æ¥åˆ°åŒæºç½‘å€ï¼ˆåè®® + åŸŸå + ç«¯å£ éƒ½ç›¸åŒï¼‰æ—¶å‘é€ï¼Œå¦åˆ™ä¸å‘é€ã€‚æ³¨æ„ï¼Œ<code>https://foo.com</code> é“¾æ¥åˆ° <code>http://foo.com</code> ä¹Ÿå±äºè·¨åŸŸã€‚</p><p><strong>ï¼ˆ4ï¼‰origin</strong></p><p><code>Referer</code> å­—æ®µä¸€å¾‹åªå‘é€æºä¿¡æ¯ï¼ˆåè®® + åŸŸå + ç«¯å£ï¼‰ï¼Œä¸ç®¡æ˜¯å¦è·¨åŸŸã€‚</p><p><strong>ï¼ˆ5ï¼‰strict-origin</strong></p><p>å¦‚æœä» HTTPS ç½‘å€é“¾æ¥åˆ° HTTP ç½‘å€ï¼Œä¸å‘é€ <code>Referer</code> å­—æ®µï¼Œå…¶ä»–æƒ…å†µåªå‘é€æºä¿¡æ¯ã€‚</p><p><strong>ï¼ˆ6ï¼‰origin-when-cross-origin</strong></p><p>åŒæºæ—¶ï¼Œå‘é€å®Œæ•´çš„ <code>Referer</code> å­—æ®µï¼Œè·¨åŸŸæ—¶å‘é€æºä¿¡æ¯ã€‚</p><p><strong>ï¼ˆ7ï¼‰strict-origin-when-cross-origin</strong></p><p>åŒæºæ—¶ï¼Œå‘é€å®Œæ•´çš„ <code>Referer</code> å­—æ®µï¼›è·¨åŸŸæ—¶ï¼Œå¦‚æœ HTTPS ç½‘å€é“¾æ¥åˆ° HTTP ç½‘å€ï¼Œä¸å‘é€ <code>Referer</code> å­—æ®µï¼Œå¦åˆ™å‘é€æºä¿¡æ¯ã€‚</p><p><strong>ï¼ˆ8ï¼‰unsafe-url</strong></p><p><code>Referer</code> å­—æ®µåŒ…å«æºä¿¡æ¯ã€è·¯å¾„å’ŒæŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œä¸åŒ…å«é”šç‚¹ã€ç”¨æˆ·åå’Œå¯†ç ã€‚</p><h3 id="6-Referrer-Policy-çš„ç”¨æ³•"><a href="#6-Referrer-Policy-çš„ç”¨æ³•" class="headerlink" title="6.Referrer Policy çš„ç”¨æ³•"></a>6.Referrer Policy çš„ç”¨æ³•</h3><p>Referrer Policy æœ‰<a href="https://w3c.github.io/webappsec-referrer-policy/#referrer-policy-delivery">å¤šç§ä½¿ç”¨æ–¹æ³•</a>ã€‚</p><p><strong>ï¼ˆ1ï¼‰HTTP å¤´ä¿¡æ¯</strong></p><p>æœåŠ¡å™¨å‘é€ç½‘é¡µçš„æ—¶å€™ï¼Œé€šè¿‡ HTTP å¤´ä¿¡æ¯çš„ <code>Referrer-Policy</code> å‘Šè¯‰æµè§ˆå™¨ã€‚</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Referrer-Policy</span><span class="punctuation">: </span>origin</span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ2ï¼‰<code>&lt;meta&gt;</code> æ ‡ç­¾</strong></p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>&lt;meta&gt;</code> æ ‡ç­¾ï¼Œåœ¨ç½‘é¡µå¤´éƒ¨è®¾ç½®ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;referrer&quot;</span> <span class="attr">content</span>=<span class="string">&quot;origin&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>ï¼ˆ3ï¼‰<code>referrerpolicy</code> å±æ€§</strong></p><p><code>&lt;a&gt;</code>ã€<code>&lt;area&gt;</code>ã€<code>&lt;img&gt;</code>ã€<code>&lt;iframe&gt;</code> å’Œ <code>&lt;link&gt;</code> æ ‡ç­¾ï¼Œå¯ä»¥è®¾ç½® referrerpolicy å±æ€§ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;...&quot;</span> <span class="attr">referrerpolicy</span>=<span class="string">&quot;origin&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>PSï¼šæ›´å¤šå†…å®¹è§ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Referer">å‚è€ƒ1-MDN</a>ã€<a href="http://www.ruanyifeng.com/blog/2019/06/http-referer.html">å‚è€ƒ2-é˜®ä¸€å³°</a></p><h2 id="ç–‘æƒ‘"><a href="#ç–‘æƒ‘" class="headerlink" title="ç–‘æƒ‘"></a>ç–‘æƒ‘</h2><p>èµ„æºBçš„æµ‹è¯•ç¯å¢ƒåŒæ ·æœ‰ Referer å¤´éƒ¨ï¼Œä½†æ‰€æœ‰ç½‘ç»œè¯·æ±‚éƒ½æ˜¯æ²¡é—®é¢˜çš„ã€‚è™½ç„¶è¿™æ¬¡é€šè¿‡ä¿®æ”¹ Nginx çš„é…ç½®ä¸´æ—¶è§£å†³äº†é—®é¢˜ï¼Œä½†ç”Ÿäº§ç¯å¢ƒä¸Šä¸ºä½•å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œæ ¹æœ¬åŸå› ä¾æ—§æ²¡ææ¸…æ¥šã€‚åŒäº‹ä¹Ÿå’¨è¯¢äº†å¯¹æ–¹æ˜¯å¦é’ˆå¯¹ Referer åšäº†ç±»ä¼¼é˜²ç›—é“¾çš„å¤„ç†ï¼Œå¾—åˆ°çš„ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚æ‰€ä»¥å¯èƒ½æ˜¯å“ªé‡Œçš„é—®é¢˜å‘¢ï¼ŸğŸ˜³</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/flag.jpeg"></p>]]></content>
      
      
      
        <tags>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WKWebView å®æˆ˜ç¯‡</title>
      <link href="/2021/12/11/WKWebView-Use/"/>
      <url>/2021/12/11/WKWebView-Use/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><p>å‰ä¸¤ç¯‡æ–‡ç« ç®€å•å­¦ä¹ äº† WKWebView çš„åŸºç¡€å†…å®¹å’Œå‡ ä¸ªåè®®ï¼Œä»Šå¤©æˆ‘ä»¬çœ‹çœ‹åœ¨ä½¿ç”¨ä¸­å¸¸è§çš„é—®é¢˜ã€‚</p><h2 id="ä¸€ã€Cookie-åŒæ­¥"><a href="#ä¸€ã€Cookie-åŒæ­¥" class="headerlink" title="ä¸€ã€Cookie åŒæ­¥"></a>ä¸€ã€Cookie åŒæ­¥</h2><p>ä»¥å¾€é€šè¿‡ AFNetworkingã€NSURLSessionã€UIWebView ç­‰æ–¹å¼å¾—åˆ°çš„ cookieï¼Œç»Ÿç»Ÿæ”¾åœ¨ NSHTTPCookieStorage ä¸­ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸éœ€è¦æˆ‘ä»¬ç‰¹åˆ«å¤„ç†çš„ã€‚ä½†å¯¹äº WKWebView æˆ‘ä»¬è¯´è¿‡ï¼Œæ”¹ä¸ºæ”¾åœ¨ WKHTTPCookieStore ä¸­ï¼Œè€Œä¸”ä¸¤è€…æ˜¯ä¸äº’é€šçš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºç°åœ¨å¾ˆå¤š åŸç”Ÿ + h5 æ··åˆå¼€å‘çš„ App æ¥è¯´ï¼Œé€šå¸¸åœ¨ç™»å½•æˆåŠŸä»¥åï¼ŒWebView è®¿é—®é¡µé¢æ—¶ä¼šå¸Œæœ›æºå¸¦ä¼šè¯ä¿¡æ¯ç›´æ¥é€šè¿‡æœåŠ¡ç«¯çš„è®¤è¯ï¼Œè€Œä¸æ˜¯åœ¨ WebView ä¸­å†ç™»å½•ä¸€æ¬¡ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯èƒ½å°±éœ€è¦åŒæ­¥ä¸€ä¸‹ä¸¤ä¸ª Storage ä¸­çš„ cookieã€‚</p><span id="more"></span><p>åœ¨ <a href="/2020/12/01/WKWebView/#WKProcessPool">WKWebView åŸºç¡€ç¯‡ - WKProcessPool</a> ä¸­ï¼Œæˆ‘ä»¬ç•™äº†ä¸€ä¸ªç–‘é—®ï¼Œç»™ä¸åŒçš„ WKWebView æŒ‡å®šä¸åŒçš„ WKProcessPoolï¼Œä»–ä»¬çš„ cookie èƒ½å¦è‡ªåŠ¨åŒæ­¥å‘¢ï¼Ÿè·Ÿä¸Šé¢çš„é—®é¢˜ä¸€èµ·æµ‹è¯•ä¸€ä¸‹ï¼š</p><ol><li>ä½¿ç”¨ä¸¤ä¸ª UIWebView å’Œ UIWebView-1ã€ä¸¤ä¸ª WKWebView å’Œ WKWebView -1ï¼Œè®¿é—®åŒæ ·çš„é¡µé¢ã€‚</li></ol><p>ä¾‹å¦‚è°·æ­Œè´¦å·çš„ä¸ªäººä¿¡æ¯é¡µé¢ <code>https://myaccount.google.com/personal-info</code> ï¼Œæ²¡æœ‰ç™»å½•è€Œç›´æ¥è®¿é—®è¿™ä¸ªé¡µé¢çš„è¯ï¼Œä¼šé‡å®šå‘åˆ°ç™»å½•é¡µé¢ã€‚åŒæ—¶ï¼Œä¸¤ä¸ª WKWebView æˆ‘ä»¬æŒ‡å®šä¸åŒçš„ WKProcessPool ã€‚</p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/WK01.png" width="500px"><ol start="2"><li>åœ¨ <code>viewWillAppear</code> ä¸­è®© WebView åˆ·æ–°</li></ol><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewWillAppear:(<span class="built_in">BOOL</span>)animated &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewWillAppear:animated];</span><br><span class="line">    [<span class="keyword">self</span>.webView reload];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>é€‰æ‹©ä»»æ„ä¸€ä¸ªé¡µé¢è¿›è¡Œç™»å½•ï¼Œä¾‹å¦‚ç¬¬ä¸€ä¸ª UIWebView ã€‚</li></ol><p>å½“ç¬¬ä¸€ä¸ª UIWebView ç™»å½•æˆåŠŸä»¥åï¼Œæˆ‘ä»¬åˆ‡æ¢é¡µç­¾åˆ·æ–°å…¶ä»–ä¸‰ä¸ªé¡µé¢ï¼Œä¼šå‘ç° UIWebView-1 å¯ä»¥æˆåŠŸè®¿é—® personal-info é¡µé¢ï¼Œè€Œä¸¤ä¸ª WKWebView ä¾æ—§æ˜¯ç™»å½•é¡µé¢ã€‚åŒæ ·ï¼Œå¦‚æœé€‰æ‹©ä¸€ä¸ª WKWebView è¿›è¡Œç™»å½•ç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚æ‰€ä»¥ï¼Œä¸åŒçš„ UIWebView å¯ä»¥å…±äº« NSHTTPCookieStorage ä¸­çš„ cookieï¼›ä¸åŒçš„ WKWebView ã€ä¸åŒçš„ WKProcessPool ä¹Ÿå¯ä»¥å…±äº« WKHTTPCookieStore ä¸­çš„ cookieã€‚å½“ç„¶å®ƒä»¬äºŒè€…æ˜¯ä¸äº’é€šçš„ã€‚</p><ol start="4"><li>ä¸€ä¸ªç®€å•çš„ cookie åŒæ­¥æ–¹æ¡ˆ</li></ol><p>âŒ <strong>Cookie åŒæ­¥æ–¹æ¡ˆç›®å‰æœ‰ç¼ºé™·ï¼Œä¸å»ºè®®è¿™ç§æ–¹å¼.2022.11.25</strong></p><ul><li>NSHTTPCookieStorage å‘ WKHTTPCookieStore åŒæ­¥</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (@available(iOS <span class="number">11.0</span>, *)) &#123;</span><br><span class="line">    <span class="built_in">NSArray</span> *cookies = [[<span class="built_in">NSHTTPCookieStorage</span> sharedHTTPCookieStorage] cookies];</span><br><span class="line">    <span class="built_in">WKHTTPCookieStore</span> *cookieStroe = <span class="keyword">self</span>.webView.configuration.websiteDataStore.httpCookieStore;</span><br><span class="line">    <span class="keyword">if</span> (cookies.count == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSHTTPCookie</span> *cookie <span class="keyword">in</span> cookies) &#123;</span><br><span class="line">        [cookieStroe setCookie:cookie completionHandler:^&#123;</span><br><span class="line">            <span class="keyword">if</span> ([[cookies lastObject] isEqual:cookie]) &#123;</span><br><span class="line">                <span class="comment">//Sync end</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Fallback on earlier versions</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li> WKHTTPCookieStore å‘ NSHTTPCookieStorage åŒæ­¥ï¼Œä½¿ç”¨ WKHTTPCookieStoreObserver</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">WKWebViewController</span> () &lt;<span class="title">WKHTTPCookieStoreObserver</span>&gt;</span></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">  </span><br><span class="line">[configuration.websiteDataStore.httpCookieStore addObserver:<span class="keyword">self</span>];</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> mark - WKHTTPCookieStoreObserver</span></span><br><span class="line">- (<span class="keyword">void</span>)cookiesDidChangeInCookieStore:(<span class="built_in">WKHTTPCookieStore</span> *)cookieStore &#123;</span><br><span class="line">    [cookieStore getAllCookies:^(<span class="built_in">NSArray</span>&lt;<span class="built_in">NSHTTPCookie</span> *&gt; * _Nonnull cookies) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">NSHTTPCookie</span> *cookie <span class="keyword">in</span> cookies) &#123;</span><br><span class="line">            [[<span class="built_in">NSHTTPCookieStorage</span> sharedHTTPCookieStorage] setCookie:cookie];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å®ç°çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯ cookie æ±¡æŸ“ï¼Œå› ä¸ºä¸ç®¡ä¸‰ä¸ƒäºŒåå…«éƒ½åŒæ­¥åˆ°ä¸€èµ·äº†ã€‚å¯ä»¥åšä¸€ä¸ªç®€å•çš„ç­›é€‰ï¼ŸåªåŒæ­¥è®¿é—®ç›®æ ‡èµ„æºéœ€è¦çš„ cookie ï¼Ÿæ¬¢è¿è®¨è®º~</p><h2 id="äºŒã€è·¨åŸŸ"><a href="#äºŒã€è·¨åŸŸ" class="headerlink" title="äºŒã€è·¨åŸŸ"></a>äºŒã€è·¨åŸŸ</h2><p>å…³äºè·¨åŸŸæˆ‘æ¥è§¦çš„ä¹Ÿä¸æ˜¯å¾ˆå¤šï¼Œè¿™ç¯‡ <a href="https://www.jianshu.com/p/f880878c1398">ä»€ä¹ˆæ˜¯è·¨åŸŸè¯·æ±‚ä»¥åŠå®ç°è·¨åŸŸçš„æ–¹æ¡ˆ</a> æˆ‘è§‰å¾—å†™çš„å¾ˆæ¸…æ¥šã€‚iOS å¼€å‘ä¸­å¸¸é‡åˆ°çš„è·¨åŸŸé—®é¢˜æœ‰ä¸¤ç§ï¼šæ— æ³•è®¿é—®æœ¬åœ° HTML èµ„æºï¼›è·¨åŸŸå­˜å– Cookie é—®é¢˜ã€‚</p><ul><li>å¯¹äº æ— æ³•è®¿é—®æœ¬åœ° HTML èµ„æº çš„æƒ…å†µï¼Œä¿®æ”¹ä¸‹é¢çš„å±æ€§ã€‚</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[configuration.preferences setValue:@YES forKey:<span class="string">@&quot;allowFileAccessFromFileURLs&quot;</span>];</span><br><span class="line"><span class="keyword">if</span> (@available(iOS <span class="number">10.0</span>, *)) &#123;</span><br><span class="line">    [configuration setValue:@YES forKey:<span class="string">@&quot;allowUniversalAccessFromFileURLs&quot;</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¯¹äº è·¨åŸŸå­˜å– Cookie é—®é¢˜</li></ul><p>è¯»äº†ä¸€ä¸‹è¿™ç¯‡åšå®¢ï¼Œç®—æ˜¯ä½œä¸ºä¸€ä¸ªå‚è€ƒæ€è·¯å§ã€‚<a href="https://dib-nhnl.github.io/2018/02/13/WKWebView%E8%B7%A8%E5%9F%9F%E7%9A%84Cookie%E9%97%AE%E9%A2%98/">WKWebViewè·¨åŸŸçš„Cookieé—®é¢˜</a> ã€‚</p><h2 id="ä¸‰ã€Native-ä¸-JS-çš„äº¤äº’"><a href="#ä¸‰ã€Native-ä¸-JS-çš„äº¤äº’" class="headerlink" title="ä¸‰ã€Native ä¸ JS çš„äº¤äº’"></a>ä¸‰ã€Native ä¸ JS çš„äº¤äº’</h2><h3 id="JS-è°ƒç”¨-Native"><a href="#JS-è°ƒç”¨-Native" class="headerlink" title="JS è°ƒç”¨ Native"></a>JS è°ƒç”¨ Native</h3><p>åœ¨ <a href="/2020/12/01/WKWebView/#WKUserContentController"><code>WKWebView åŸºç¡€ç¯‡ - WKUserContentController</code></a> æåˆ°è¿‡äº†ï¼Œé€šè¿‡æ¶ˆæ¯å¤„ç†å™¨ addScriptMessageHandler æ³¨å†Œä¸€ä¸ªå”¯ä¸€çš„ name ï¼Œå¹¶ä¸”å®ç° WKScriptMessageHandler åè®®ã€‚ ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//js æµ‹</span></span><br><span class="line"><span class="built_in">window</span>.webkit.messageHandlers.YYWK.postMessage([<span class="string">&#x27;MPWebView&#x27;</span>, <span class="string">&#x27;close&#x27;</span>, []]);</span><br></pre></td></tr></table></figure><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//native æµ‹</span></span><br><span class="line">- (<span class="keyword">void</span>)userContentController:(<span class="built_in">WKUserContentController</span> *)userContentController didReceiveScriptMessage:(<span class="built_in">WKScriptMessage</span> *)message &#123;</span><br><span class="line">    <span class="keyword">if</span> ([message.name isEqualToString:<span class="string">@&quot;YYWK&quot;</span>]) &#123;</span><br><span class="line">      <span class="comment">//Call MPWebView&#x27;s selector - close.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Native-è°ƒç”¨-JS"><a href="#Native-è°ƒç”¨-JS" class="headerlink" title="Native è°ƒç”¨ JS"></a>Native è°ƒç”¨ JS</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//js å·²å£°æ˜äº†ä¸€ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">helloWorld</span>(<span class="params">message</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(message);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;YES&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//native æµ‹</span></span><br><span class="line">[<span class="keyword">self</span>.webView evaluateJavaScript:<span class="string">@&quot;helloWorld(&#x27;Are you kidding me?&#x27;)&quot;</span> completionHandler:^(<span class="keyword">id</span> _Nullable result, <span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>, result); <span class="comment">//Will be &#x27;YES&#x27;.</span></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œå¦‚æœè°ƒç”¨çš„ JS æ–¹æ³•ä¸å­˜åœ¨ï¼Œresult ä¼šæ˜¯ nilã€‚</p><h3 id="JS-è°ƒç”¨-Native-å¹¶ä¸”å¾—åˆ°æ‰§è¡Œç»“æœ"><a href="#JS-è°ƒç”¨-Native-å¹¶ä¸”å¾—åˆ°æ‰§è¡Œç»“æœ" class="headerlink" title="JS è°ƒç”¨ Native å¹¶ä¸”å¾—åˆ°æ‰§è¡Œç»“æœ"></a>JS è°ƒç”¨ Native å¹¶ä¸”å¾—åˆ°æ‰§è¡Œç»“æœ</h3><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒNative è°ƒç”¨ JS æ—¶ï¼Œè‹¹æœæä¾›äº† completionHandler æ¥è·å¾—æ‰§è¡Œç»“æœï¼›ä½†æ˜¯ JS é€šè¿‡ postMessage è°ƒç”¨ Native æ—¶ï¼Œæˆ‘ä»¬æ˜¯æ²¡æœ‰åŠæ³•å°† Native çš„æ‰§è¡Œç»“æœåŒæ­¥ç»™ JS çš„ã€‚è‹¹æœåº”è¯¥ä¹Ÿæ³¨æ„åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥åœ¨ iOS14 ä¸­æä¾›äº†ä¸€ä¸ªæ–°çš„è§£å†³æ–¹æ¡ˆï¼Œè®©æˆ‘ä»¬ä¸€èµ·åº·åº·ï¼š</p><h4 id="1-iOS14-æ–°å¢"><a href="#1-iOS14-æ–°å¢" class="headerlink" title="1. iOS14 æ–°å¢"></a>1. iOS14 æ–°å¢</h4><blockquote><p>WKScriptMessageHandlerWithReply</p></blockquote><p>iOS14.0 æ–°å¢çš„åè®®ï¼ŒåŒæ ·æ˜¯ iOS ä¸ JavaScript åšäº¤äº’çš„åè®®ã€‚ä¸è¿‡ä¸ WKScriptMessageHandler ç›¸æ¯”ï¼Œå¤šäº†ä¸€ä¸ªå¯ä»¥å‘ JS å‘é€å“åº”ç»“æœçš„å¤„ç†å™¨ï¼Œè€Œä¸”è¿˜æ˜¯å¼‚æ­¥çš„ã€‚æ˜¯ä¸æ˜¯ç”¨èµ·æ¥å¾ˆçˆ½ï¼ŸğŸ¤“</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//js æµ‹ä½¿ç”¨promiseå¼‚æ­¥å›è°ƒè·å–ç»“æœã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scriptMessageWithReply</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> promise = <span class="built_in">window</span>.webkit.messageHandlers.YYWK.postMessage(<span class="string">&quot;Fulfill me with 42&quot;</span>);</span><br><span class="line">    promise.then(</span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">&#x27;result&#x27;</span> + result);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">&#x27;error&#x27;</span> + error);</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//native æµ‹</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">WKUserContentController</span> *userContentController = [[<span class="built_in">WKUserContentController</span> alloc] init];</span><br><span class="line">  [userContentController addScriptMessageHandlerWithReply:<span class="keyword">self</span> contentWorld:[<span class="built_in">WKContentWorld</span> pageWorld] name:<span class="string">@&quot;YYWK&quot;</span>];</span><br><span class="line">  <span class="built_in">WKWebViewConfiguration</span> *configuration = [[<span class="built_in">WKWebViewConfiguration</span> alloc] init];</span><br><span class="line">  configuration.userContentController = userContentController;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">- (<span class="keyword">void</span>)userContentController:(<span class="built_in">WKUserContentController</span> *)userContentController didReceiveScriptMessage:(<span class="built_in">WKScriptMessage</span> *)message replyHandler:(<span class="keyword">void</span> (^)(<span class="keyword">id</span> _Nullable reply, <span class="built_in">NSString</span> *_Nullable errorMessage))replyHandler &#123;</span><br><span class="line">    <span class="keyword">if</span> ([message.body isEqual:<span class="string">@&quot;Fulfill me with 42&quot;</span>])</span><br><span class="line">        replyHandler(@<span class="number">42</span>, <span class="literal">nil</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        replyHandler(<span class="literal">nil</span>, <span class="string">@&quot;Unexpected message received&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-åŸºäº-prompt-çš„å®ç°"><a href="#2-åŸºäº-prompt-çš„å®ç°" class="headerlink" title="2. åŸºäº prompt çš„å®ç°"></a>2. åŸºäº prompt çš„å®ç°</h4><p><a href="/2021/12/02/WKWebView-Protocol/#WKUIDelegate">WKWebView åè®®ç¯‡ - WKUIDelegate</a> ä¸­æˆ‘ä»¬æåˆ°è¿‡å…³äº Native å®ç° JS <code>prompt</code> å‡½æ•°çš„æ“ä½œã€‚JS ä¼šè§¦å‘ä¸€ä¸ªå¸¦è¾“å…¥æ¡†çš„ Alertï¼Œç­‰ç”¨æˆ·è¾“å…¥äº†ä¿¡æ¯ä¹‹åï¼ŒNative ä¼šå°†ç»“æœå¼‚æ­¥è¿”å›åˆ° JSã€‚æ‰€ä»¥æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥åˆ©ç”¨è¿™ä¸ªå¼‚æ­¥æ—¶æœºå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™ prompt çš„å‚æ•°å°±ä¸æ˜¯æ™®é€šçš„å­—ç¬¦ä¸²äº†ï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªæŒ‡ä»¤ã€‚ç¤ºä¾‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getUserMessage</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> msg = prompt(<span class="string">&quot;GetUserMessage&quot;</span>, <span class="string">&quot;YYLittleCat&quot;</span>);</span><br><span class="line">    <span class="comment">//Use YYLittleCat&#x27;s msg.</span></span><br><span class="line">  ......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Native çš„å¤„ç†å°±æ”¹ä¸ºï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//native æ¥æ”¶åˆ°çš„prompt: æŒ‡ä»¤ = è·å–ç”¨æˆ·çš„ä¿¡æ¯; defaultText: uid = YYLittleCat</span></span><br><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView runJavaScriptTextInputPanelWithPrompt:(<span class="built_in">NSString</span> *)prompt defaultText:(<span class="built_in">NSString</span> *)defaultText initiatedByFrame:(<span class="built_in">WKFrameInfo</span> *)frame completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">NSString</span> * _Nullable))completionHandler &#123;</span><br><span class="line">    <span class="keyword">if</span> ([prompt isEqualToString:<span class="string">@&quot;GetUserMessage&quot;</span>]) &#123;</span><br><span class="line">        <span class="comment">//Did get user message.</span></span><br><span class="line">        completionHandler(<span class="string">@&quot;A json object, Like dictionary to string.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å››ã€HTTPS-å•ã€åŒå‘è®¤è¯"><a href="#å››ã€HTTPS-å•ã€åŒå‘è®¤è¯" class="headerlink" title="å››ã€HTTPS å•ã€åŒå‘è®¤è¯"></a>å››ã€HTTPS å•ã€åŒå‘è®¤è¯</h2><p>ä»¥æˆ‘ä»¬å½“å‰åšå®¢ç«™ç‚¹å„¿ä¸ºä¾‹ï¼ŒSSL è¯ä¹¦æ˜¯å‘â€æ­£ç»â€œæœºæ„ç”³è¯·çš„ï¼ŒNginx é…ç½® HTTPSï¼Œå¹¶ä¸” HTTP è¯·æ±‚è‡ªåŠ¨è·³è½¬ HTTPS ç¤ºä¾‹ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">server_name</span>  tommygirl.cn;</span><br><span class="line">    <span class="attribute">ssl_certificate</span>  certs/server.crt;<span class="comment">#å…¬é’¥</span></span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> certs/server.key;<span class="comment">#ç§é’¥</span></span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span>       [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  tommygirl.cn;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span>   https://tommygirl.cn;</span><br><span class="line">&#125; </span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>æ›´å¤šå…³äº Nginx é…ç½® HTTPS å•ã€åŒå‘è®¤è¯çš„å†…å®¹ <a href="https://www.hi-linux.com/posts/38492.html">Here</a> ã€‚</p><h3 id="å•å‘è®¤è¯"><a href="#å•å‘è®¤è¯" class="headerlink" title="å•å‘è®¤è¯"></a>å•å‘è®¤è¯</h3><p>æ˜¾ç„¶é€šè¿‡æµè§ˆå™¨è®¿é—® <a href="https://tommygirl.cn/">tommygirl.cn</a> æ˜¯å¯ä»¥æˆåŠŸçš„ï¼Œå¹¶ä¸”åœ°å€æ æœ‰ä¸€ä¸ªå°é”å¤´ğŸ”’ï¼Œæ‰€ä»¥ HTTPS æˆ‘ä»¬é…ç½®æˆåŠŸäº†ã€‚æˆ–è€…è¯´å•å‘è®¤è¯å·²ç»æ²¡é—®é¢˜äº†ã€‚é‚£æœ‰çš„åŒå­¦å¯èƒ½ä¼šé—®ï¼Œå•å‘è®¤è¯ï¼Ÿè°ï¼Ÿå“ªé‡Œè®¤è¯çš„ï¼Ÿæˆ‘æ²¡æœ‰è®¤è¯å‘€ï¼Ÿæˆ‘ä»¬å¯¹ç…§ç€ä¸€ä¸ªæµç¨‹å›¾çœ‹ä¸€ä¸‹ä¸€ä¸ªå®Œæ•´çš„ HTTPS è¯·æ±‚éƒ½ç»å†äº†å“ªäº›è¿‡ç¨‹ï¼š</p><p><img src="https://ata2-img.cn-hangzhou.oss-pub.aliyun-inc.com/14158ca87e2f341ff044efd967f3e008.png" alt="img"></p><ol><li>å®¢æˆ·ç«¯è®¿é—® <a href="https://tommygirl.cn/">https://tommygirl.cn</a> ï¼›</li><li>æœåŠ¡å™¨ç«¯å°†æœ¬æœºçš„å…¬é’¥è¯ä¹¦ server.crt å‘é€ç»™å®¢æˆ·ç«¯ï¼›</li><li>å®¢æˆ·ç«¯è¯»å–å…¬é’¥è¯ä¹¦ server.crt ï¼Œå–å‡ºäº†æœåŠ¡ç«¯å…¬é’¥ï¼›</li><li>å®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼ˆå¯†é’¥ Rï¼‰ï¼Œç”¨åˆšæ‰å¾—åˆ°çš„æœåŠ¡å™¨å…¬é’¥å»åŠ å¯†è¿™ä¸ªéšæœºæ•°å½¢æˆå¯†æ–‡ï¼Œå‘é€ç»™æœåŠ¡ç«¯ï¼›</li><li>æœåŠ¡ç«¯ç”¨è‡ªå·±çš„ç§é’¥ server.key å»è§£å¯†è¿™ä¸ªå¯†æ–‡ï¼Œå¾—åˆ°äº†å¯†é’¥ Rï¼›</li><li>æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åœ¨åç»­é€šè®¯è¿‡ç¨‹ä¸­å°±ä½¿ç”¨è¿™ä¸ªå¯†é’¥ R è¿›è¡Œé€šä¿¡äº†ã€‚</li></ol><p>æ‰€ä»¥å•å‘è®¤è¯æ˜¯åœ¨å“ªä¸€æ­¥å®Œæˆçš„ï¼Ÿç¬¬3æ­¥ã€‚é‚£æµè§ˆå™¨æ€ä¹ˆçŸ¥é“åº”è¯¥ä¿¡ä»»æˆ‘ä»¬çš„ SSL è¯ä¹¦å‘¢ï¼Ÿå—ä¿¡ä»»çš„æ ¹è¯ä¹¦ï¼Œå…¶ä»»ä½•ä¸‹çº§è¯ä¹¦éƒ½æ˜¯å—ä¿¡ä»»çš„ã€‚æ ¹è¯ä¹¦åœ¨å“ªé‡Œå‘¢ï¼Ÿä»¥ Mac ä¸ºä¾‹ï¼Œæ‰“å¼€é’¥åŒ™ä¸²å¯ä»¥çœ‹åˆ°æœ‰ä¸€é¡¹æ˜¯ ç³»ç»Ÿæ ¹è¯ä¹¦ï¼Œä¹Ÿå°±æ˜¯è¯´ç³»ç»Ÿä¼šå†…ç½®ä¸€éƒ¨åˆ†æ ¹è¯ä¹¦ï¼Œæµè§ˆå™¨åœ¨æ‹¿åˆ°æˆ‘ä»¬çš„ SSL è¯ä¹¦åï¼Œå®ƒä½¿ç”¨é‡Œé¢çš„å…¬é’¥æ¥éªŒè¯ç­¾åå¹¶åœ¨è¯ä¹¦é“¾ä¸Šå‘ä¸Šç§»åŠ¨ä¸€å±‚ï¼›é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼šå¯¹ç­¾åè¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¹¶è·Ÿè¸ªç­¾åçš„è¯ä¹¦é“¾ï¼Œç›´åˆ°æœ€ç»ˆåˆ°è¾¾æµè§ˆå™¨ä¿¡ä»»å­˜å‚¨ä¸­çš„ä¸€ä¸ªæ ¹è¯ä¹¦ã€‚å¦‚æœå®ƒä¸èƒ½å°†è¯ä¹¦é“¾å›åˆ°å…¶å—ä¿¡ä»»çš„æ ¹ï¼Œå®ƒå°±ä¸ä¼šä¿¡ä»»è¯¥è¯ä¹¦ã€‚ï¼ˆå…³äºè¯ä¹¦é“¾çš„è®¨è®ºï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤§çš„è¯é¢˜ï¼Œå¯ä»¥å…ˆå‚è€ƒ <a href="https://cloud.tencent.com/developer/article/1458151">è¯ä¹¦é“¾</a> ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ï¼‰</p><h3 id="åŒå‘è®¤è¯"><a href="#åŒå‘è®¤è¯" class="headerlink" title="åŒå‘è®¤è¯"></a>åŒå‘è®¤è¯</h3><p>å®¢æˆ·ç«¯æ ¡éªŒæœåŠ¡ç«¯çš„è¯ä¹¦å¯é æ€§ç§°ä¸ºå•å‘è®¤è¯ï¼Œé‚£é¡¾åæ€ä¹‰ï¼ŒåŒå‘è®¤è¯ä¸­æœåŠ¡ç«¯ä¹Ÿéœ€è¦æ ¡éªŒå®¢æˆ·ç«¯çš„åˆæ³•æ€§ã€‚ä¸ºäº†ä¸å½±å“é¡µé¢çš„æ­£å¸¸è®¿é—®ï¼Œæ–°èµ·äº†ä¸€ä¸ª ssl.tommygirl.cnï¼ŒNginx ä¸Šçš„æµ‹è¯•é…ç½®ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">server_name</span>  ssl.tommygirl.cn;</span><br><span class="line">    <span class="attribute">ssl_certificate</span>  certs/server.crt;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> certs/server.key;</span><br><span class="line">    <span class="attribute">ssl_client_certificate</span> certs/client.crt;</span><br><span class="line">    <span class="attribute">ssl_verify_client</span> <span class="literal">on</span>;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨è®¿é—® <a href="https://ssl.tommygirl.cn/">https://ssl.tommygirl.cn</a> ä¼šæ”¶åˆ° Nginx çš„é”™è¯¯æç¤ºï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å‘é€å®¢æˆ·ç«¯çš„è¯ä¹¦ï¼š</p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/WK02.png" width="500px"><p>ç»§ç»­è¯´ï¼Œä¸€ä¸ªåŸºäºåŒå‘è®¤è¯çš„è¯·æ±‚äº¤äº’è¿‡ç¨‹ï¼š</p><p><img src="https://ata2-img.cn-hangzhou.oss-pub.aliyun-inc.com/08e6235892053a81603a4c3d7c7f44ad.png" alt="img"></p><ol><li>å®¢æˆ·ç«¯è®¿é—® <a href="https://ssl.tommygirl.cn/">https://ssl.tommygirl.cn</a> ï¼›</li><li>æœåŠ¡ç«¯è¿”å› server.crtï¼›</li><li>å®¢æˆ·ç«¯æ ¡éªŒ crt æ–‡ä»¶ä¸­çš„è¯ä¹¦é¢å‘æœºæ„ã€è¯ä¹¦æ—¶æ•ˆã€å…¬é’¥ä¿¡æ¯ç­‰ç­‰ï¼›</li><li>å®¢æˆ·ç«¯å°†å®¢æˆ·ç«¯å…¬é’¥è¯ä¹¦ client.crt å‘é€ç»™æœåŠ¡å™¨ç«¯ï¼›</li><li>æœåŠ¡å™¨ç«¯è§£å¯†å®¢æˆ·ç«¯å…¬é’¥è¯ä¹¦ï¼Œæ‹¿åˆ°å®¢æˆ·ç«¯å…¬é’¥ï¼›</li><li>å®¢æˆ·ç«¯å‘é€è‡ªå·±æ”¯æŒçš„åŠ å¯†æ–¹æ¡ˆç»™æœåŠ¡å™¨ç«¯ï¼›</li><li>æœåŠ¡å™¨ç«¯æ ¹æ®è‡ªå·±å’Œå®¢æˆ·ç«¯çš„èƒ½åŠ›ï¼Œé€‰æ‹©ä¸€ä¸ªåŒæ–¹éƒ½èƒ½æ¥å—çš„åŠ å¯†æ–¹æ¡ˆï¼Œä½¿ç”¨å®¢æˆ·ç«¯çš„å…¬é’¥åŠ å¯†åå‘é€ç»™å®¢æˆ·ç«¯ï¼›</li><li>å®¢æˆ·ç«¯ä½¿ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†åŠ å¯†æ–¹æ¡ˆï¼Œç”Ÿæˆä¸€ä¸ªéšæœºæ•° Rï¼Œä½¿ç”¨æœåŠ¡å™¨å…¬é’¥åŠ å¯†åä¼ ç»™æœåŠ¡å™¨ç«¯ï¼›</li><li>æœåŠ¡ç«¯ç”¨è‡ªå·±çš„ç§é’¥å»è§£å¯†è¿™ä¸ªå¯†æ–‡ï¼Œå¾—åˆ°äº†å¯†é’¥ Rï¼›</li><li>æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åœ¨åç»­é€šè®¯è¿‡ç¨‹ä¸­å°±ä½¿ç”¨è¿™ä¸ªå¯†é’¥ R è¿›è¡Œé€šä¿¡äº†ã€‚</li></ol><h3 id="æ‰‹æœºç«¯çš„å¤„ç†"><a href="#æ‰‹æœºç«¯çš„å¤„ç†" class="headerlink" title="æ‰‹æœºç«¯çš„å¤„ç†"></a>æ‰‹æœºç«¯çš„å¤„ç†</h3><p>ç®€å•çš„å•å‘è®¤è¯ï¼Œæ‰‹æœºç«¯ä¹Ÿæ˜¯ä¸ç”¨ç‰¹åˆ«å¤„ç†çš„ï¼›ä»¥å¾€åœ¨ UIWebView ä¸­å¦‚æœæƒ³å®ç°åŒå‘è®¤è¯ï¼Œéœ€è¦è‡ªå·±å®šä¹‰ NSURLProtocol åšç½‘ç»œæ‹¦æˆªï¼Œå¹¶ä¸”å®ç° NSURLSessionDelegate åè®®æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚ä½†å¯¹äº WKWebViewï¼ŒBingo~è‹¹æœæä¾›äº†å•ç‹¬çš„æ–¹æ³•ä¾›å¼€å‘è€…å®ç°ã€‚</p><blockquote><p>ç›¸å…³åè®®ï¼š <a href="/2021/12/02/WKWebView-Protocol/#WKNavigationDelegate">WKNavigationDelegate</a></p></blockquote><p>ä¾›å‚è€ƒçš„å®ç°å¦‚ä¸‹ï¼Œç»†èŠ‚çœ‹é¡¹ç›®éœ€æ±‚ä¼˜åŒ–å§ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView didReceiveAuthenticationChallenge:(<span class="built_in">NSURLAuthenticationChallenge</span> *)challenge completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLSessionAuthChallengeDisposition</span>, <span class="built_in">NSURLCredential</span> * _Nullable))completionHandler &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;%s&quot;</span>,__FUNCTION__);</span><br><span class="line">    <span class="built_in">NSString</span> *authenticationMethod = [[challenge protectionSpace] authenticationMethod];</span><br><span class="line">    <span class="keyword">if</span> ([authenticationMethod isEqualToString:<span class="built_in">NSURLAuthenticationMethodServerTrust</span>]) &#123; </span><br><span class="line">      <span class="comment">//æ ¡éªŒæœåŠ¡ç«¯è¯ä¹¦</span></span><br><span class="line">        SecTrustRef secTrustRef = challenge.protectionSpace.serverTrust;</span><br><span class="line">        <span class="keyword">if</span> (secTrustRef != <span class="literal">NULL</span>) &#123;</span><br><span class="line">            SecTrustResultType result;</span><br><span class="line">            OSErr er = SecTrustEvaluate(secTrustRef, &amp;result);</span><br><span class="line">            <span class="keyword">if</span> (er != noErr)&#123;</span><br><span class="line">                <span class="built_in">NSLog</span>(<span class="string">@&quot;error&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">switch</span> (result) &#123;</span><br><span class="line">                <span class="keyword">case</span> kSecTrustResultProceed:</span><br><span class="line">                    <span class="built_in">NSLog</span>(<span class="string">@&quot;kSecTrustResultProceed&quot;</span>);</span><br><span class="line">                    completionHandler(<span class="built_in">NSURLSessionAuthChallengePerformDefaultHandling</span>, <span class="literal">nil</span>);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> kSecTrustResultUnspecified:</span><br><span class="line">                    <span class="built_in">NSLog</span>(<span class="string">@&quot;kSecTrustResultUnspecified&quot;</span>);</span><br><span class="line">                    completionHandler(<span class="built_in">NSURLSessionAuthChallengeUseCredential</span>, [<span class="built_in">NSURLCredential</span> credentialForTrust:secTrustRef]);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> kSecTrustResultRecoverableTrustFailure:</span><br><span class="line">                    <span class="built_in">NSLog</span>(<span class="string">@&quot;kSecTrustResultRecoverableTrustFailure&quot;</span>);</span><br><span class="line">                    completionHandler(<span class="built_in">NSURLSessionAuthChallengeUseCredential</span>, [<span class="built_in">NSURLCredential</span> credentialForTrust:secTrustRef]);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">default</span>:</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> ([authenticationMethod isEqualToString:<span class="built_in">NSURLAuthenticationMethodClientCertificate</span>]) &#123; </span><br><span class="line">      <span class="comment">//å‘é€å®¢æˆ·ç«¯è¯ä¹¦</span></span><br><span class="line">        SecIdentityRef identity = <span class="literal">NULL</span>;</span><br><span class="line">        SecTrustRef trust = <span class="literal">NULL</span>;</span><br><span class="line">        <span class="built_in">NSString</span> *p12 = [[<span class="built_in">NSBundle</span> mainBundle] pathForResource:<span class="string">@&quot;client&quot;</span>ofType:<span class="string">@&quot;p12&quot;</span>];</span><br><span class="line">        <span class="built_in">NSFileManager</span> *fileManager = [<span class="built_in">NSFileManager</span> defaultManager];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(![fileManager fileExistsAtPath:p12]) &#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@&quot;client.p12: Not exist.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">NSData</span> *PKCS12Data = [<span class="built_in">NSData</span> dataWithContentsOfFile:p12];</span><br><span class="line">            <span class="keyword">if</span> ([<span class="keyword">self</span> _extractIdentity:&amp;identity andTrust:&amp;trust fromPKCS12Data:PKCS12Data]) &#123;</span><br><span class="line">                SecCertificateRef certificate = <span class="literal">NULL</span>;</span><br><span class="line">                SecIdentityCopyCertificate(identity, &amp;certificate);</span><br><span class="line">                <span class="keyword">const</span> <span class="keyword">void</span>*certs[] = &#123;certificate&#125;;</span><br><span class="line">                <span class="built_in">CFArrayRef</span> certArray = <span class="built_in">CFArrayCreate</span>(kCFAllocatorDefault, certs,<span class="number">1</span>,<span class="literal">NULL</span>);</span><br><span class="line">                <span class="built_in">NSURLCredential</span> *credential = [<span class="built_in">NSURLCredential</span> credentialWithIdentity:identity certificates:(__bridge <span class="built_in">NSArray</span>*)certArray persistence:<span class="built_in">NSURLCredentialPersistencePermanent</span>];</span><br><span class="line">                <span class="built_in">NSURLSessionAuthChallengeDisposition</span> disposition =<span class="built_in">NSURLSessionAuthChallengeUseCredential</span>;</span><br><span class="line">                completionHandler(disposition, credential);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;else&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>)_extractIdentity:(SecIdentityRef*)outIdentity andTrust:(SecTrustRef *)outTrust fromPKCS12Data:(<span class="built_in">NSData</span> *)inPKCS12Data &#123;</span><br><span class="line">    OSStatus securityError = errSecSuccess;</span><br><span class="line">    <span class="comment">//client certificate password</span></span><br><span class="line">    <span class="built_in">NSDictionary</span> *optionsDictionary = [<span class="built_in">NSDictionary</span> dictionaryWithObject:<span class="string">@&quot;123456&quot;</span></span><br><span class="line">                                                                 forKey:(__bridge <span class="keyword">id</span>)kSecImportExportPassphrase];</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">CFArrayRef</span> items = <span class="built_in">CFArrayCreate</span>(<span class="literal">NULL</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="literal">NULL</span>);</span><br><span class="line">    securityError = SecPKCS12Import((__bridge <span class="built_in">CFDataRef</span>)inPKCS12Data,(__bridge <span class="built_in">CFDictionaryRef</span>)optionsDictionary,&amp;items);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(securityError == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="built_in">CFDictionaryRef</span> myIdentityAndTrust =<span class="built_in">CFArrayGetValueAtIndex</span>(items,<span class="number">0</span>);</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">void</span>*tempIdentity =<span class="literal">NULL</span>;</span><br><span class="line">        tempIdentity= <span class="built_in">CFDictionaryGetValue</span> (myIdentityAndTrust,kSecImportItemIdentity);</span><br><span class="line">        *outIdentity = (SecIdentityRef)tempIdentity;</span><br><span class="line">        <span class="keyword">const</span> <span class="keyword">void</span>*tempTrust =<span class="literal">NULL</span>;</span><br><span class="line">        tempTrust = <span class="built_in">CFDictionaryGetValue</span>(myIdentityAndTrust,kSecImportItemTrust);</span><br><span class="line">        *outTrust = (SecTrustRef)tempTrust;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;Failedwith error code %d&quot;</span>,(<span class="keyword">int</span>)securityError);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>PSï¼šå¯¹äºé—¨æˆ·å‹çš„ç½‘ç«™ï¼ŒåŒä¸€å¥—æœåŠ¡ï¼Œæƒ³å…¨éƒ¨åšåˆ°åŒå‘è®¤è¯ä¼¼ä¹ä¸æ˜¯å¾ˆç°å®ï¼Œå®¢æˆ·ç«¯çš„è¯ä¹¦ä¸€èˆ¬ä¹Ÿä¸ä¼šåˆ†å‘ç»™æ¯ä¸€ä¸ªäººã€‚å¾ˆå¤šäººä¸ºäº†ç½‘ç»œå®‰å…¨è€ƒè™‘ï¼Œå¸¸ç”¨çš„ä¸€ä¸ªåšæ³•æ˜¯é˜²æŠ“åŒ…ï¼šåœ¨å•å‘è®¤è¯ä¸­åŠ å…¥è‡ªå·±çš„æ ¡éªŒè§„åˆ™-åŸŸåæ¯”å¯¹ã€CAä¿¡æ¯æ¯”å¯¹ã€å®¢æˆ·ç«¯å†…ç½® sever.crt è¯ä¹¦é“¾æ ¡éªŒç­‰ç­‰ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œåªé’ˆå¯¹ NSURLAuthenticationMethodServerTrust è¿›è¡Œå¤„ç†å°±è¡Œäº†ã€‚</p><h2 id="äº”ã€window-open"><a href="#äº”ã€window-open" class="headerlink" title="äº”ã€window.open()"></a>äº”ã€window.open()</h2><p>JS ä¸ Native æœ€å¸¸è§çš„äº¤äº’å°±æ˜¯ window.open(); ï¼Œç”¨äºæ‰“å¼€ä¸€ä¸ªæ–°çª—å£ã€‚æ›´å¤šç»†èŠ‚<a href="https://www.w3schools.com/jsref/met_win_open.asp">è§</a> ã€‚å¸¸ç”¨çš„å†™æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åœ¨ä¸€ä¸ªæ–°çª—å£ä¸­æ‰“å¼€é“¾æ¥</span></span><br><span class="line"><span class="built_in">window</span>.open(<span class="string">&#x27;https://tommygirl.cn&#x27;</span>); <span class="comment">//é»˜è®¤å°±æ˜¯_blankã€‚</span></span><br><span class="line"><span class="built_in">window</span>.open(<span class="string">&#x27;https://tommygirl.cn&#x27;</span>, <span class="string">&#x27;_blank&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åœ¨å½“å‰çª—å£æ‰“å¼€é“¾æ¥</span></span><br><span class="line"><span class="built_in">window</span>.open(<span class="string">&#x27;https://tommygirl.cn&#x27;</span>, <span class="string">&#x27;_self&#x27;</span>);</span><br></pre></td></tr></table></figure><p>æœ‰çš„å‰ç«¯äººå‘˜åŸºäº Cordova æˆ–è€… Ionic è¿™äº›æ¡†æ¶å¼€å‘ä¹…äº†ï¼Œä¼šä¹ æƒ¯è¦æ±‚ native æ”¯æŒ <code>window.open(&#39;&#39;, &#39;_system&#39;);</code> ï¼Œå³ç”¨ç³»ç»Ÿæµè§ˆå™¨æ‰“å¼€é“¾æ¥ï¼Œä½†å…¶å®æ ‡å‡†çš„ JS ä¸­æ˜¯æ²¡æœ‰ <code>_system</code> å‚æ•°çš„ï¼Œåªæ˜¯ Cordova æ¡†æ¶å†…éƒ¨æä¾›äº†æ”¯æŒè€Œå·²ã€‚æ‰€ä»¥åœ¨å•çº¯çš„ WebView ä½¿ç”¨ä¸­æœ‰æ²¡æœ‰é—®é¢˜å‘¢ï¼Ÿå½“ç„¶æœ‰é—®é¢˜â€¦â€¦ğŸ™„</p><p>è¯´å› WKWebView ï¼Œä¼šå‘ç°å¯¹äº _blank ç±»å‹æ²¡æœ‰å“åº”ï¼Œä½†æ˜¯ _self å¯ä»¥æ‰“å¼€ã€‚è¿™æ˜¯å› ä¸ºå¯¹äºæ–°çª—å£çš„å¼¹å‡ºï¼Œè‹¹æœç‹¬ç«‹å‡ºäº†ä¸€ä¸ªåè®®æ¥è®© native è‡ªå·±å®ç°ï¼š<a href="/2021/12/02/WKWebView-Protocol/#%E4%BA%8C%E3%80%81%E5%88%9B%E5%BB%BA%E5%92%8C%E5%85%B3%E9%97%AD%E6%96%B0%E7%9A%84-WebView">WKUIDelegate</a> ï¼ŒğŸ‘ˆä¸Šä¸€ç¯‡æˆ‘ä»¬æåˆ°è¿‡äº†ï¼Œä¸å†èµ˜è¿°ã€‚</p><h2 id="å…­ã€è¿˜æ²¡å†™å®Œï¼Œç´¯äº†ï¼Œæ˜å¤©å†è¯´ã€‚"><a href="#å…­ã€è¿˜æ²¡å†™å®Œï¼Œç´¯äº†ï¼Œæ˜å¤©å†è¯´ã€‚" class="headerlink" title="å…­ã€è¿˜æ²¡å†™å®Œï¼Œç´¯äº†ï¼Œæ˜å¤©å†è¯´ã€‚"></a>å…­ã€è¿˜æ²¡å†™å®Œï¼Œç´¯äº†ï¼Œæ˜å¤©å†è¯´ã€‚</h2><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/un_do.jpg" width="400px"><hr><h2 id="å…³äº-WKWebView-çš„å‡ ç¯‡æ–‡ç« ï¼š"><a href="#å…³äº-WKWebView-çš„å‡ ç¯‡æ–‡ç« ï¼š" class="headerlink" title="å…³äº WKWebView çš„å‡ ç¯‡æ–‡ç« ï¼š"></a><strong>å…³äº WKWebView çš„å‡ ç¯‡æ–‡ç« ï¼š</strong></h2><p><a href="/2021/12/01/WKWebView/">WKWebView åŸºç¡€ç¯‡</a><br><a href="/2021/12/02/WKWebView-Protocol/">WKWebView åè®®ç¯‡</a><br><a href="/2021/12/11/WKWebView-Use/">WKWebView å®æˆ˜ç¯‡</a></p><h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a><strong>Demo</strong></h2><p><a href="https://github.com/ATommyGirl/WebView">WebView çš„ Demo</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> WebView </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Go æ‰“åŒ…åçš„äºŒè¿›åˆ¶æ–‡ä»¶æ·»åŠ åˆ° CentOS å¼€æœºå¯åŠ¨é¡¹</title>
      <link href="/2021/12/08/Systemd_Go/"/>
      <url>/2021/12/08/Systemd_Go/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰æéœ€è¦å­¦ä¹ ï¼š"><a href="#å‰æéœ€è¦å­¦ä¹ ï¼š" class="headerlink" title="å‰æéœ€è¦å­¦ä¹ ï¼š"></a>å‰æéœ€è¦å­¦ä¹ ï¼š</h2><p><a href="https://tommygirl.cn/2021/07/23/Systemd_Command/">Systemd å…¥é—¨æ•™ç¨‹ï¼šå‘½ä»¤ç¯‡</a></p><p><a href="https://tommygirl.cn/2021/07/23/Systemd_Use/">Systemd å…¥é—¨æ•™ç¨‹ï¼šå®æˆ˜ç¯‡</a></p><hr><h2 id="Go-æ‰“åŒ…åçš„äºŒè¿›åˆ¶æ–‡ä»¶æ·»åŠ åˆ°å¼€æœºå¯åŠ¨é¡¹"><a href="#Go-æ‰“åŒ…åçš„äºŒè¿›åˆ¶æ–‡ä»¶æ·»åŠ åˆ°å¼€æœºå¯åŠ¨é¡¹" class="headerlink" title="Go æ‰“åŒ…åçš„äºŒè¿›åˆ¶æ–‡ä»¶æ·»åŠ åˆ°å¼€æœºå¯åŠ¨é¡¹"></a>Go æ‰“åŒ…åçš„äºŒè¿›åˆ¶æ–‡ä»¶æ·»åŠ åˆ°å¼€æœºå¯åŠ¨é¡¹</h2><p>httpbin-go æ˜¯ä¸€ä¸ª Go é¡¹ç›®ç”Ÿæˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæˆ–è€…ç§°ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ï¼Œéœ€è¦æ·»åŠ å¯æ‰§è¡Œæƒé™ã€‚</p><p>æ­£å¸¸æˆ‘ä»¬æ‰§è¡Œä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶å¯èƒ½æ˜¯è¿™æ · <code>./httpbin-go</code>ï¼Œè¿™æ ·æœåŠ¡ä¹Ÿèƒ½è·‘èµ·æ¥ã€‚ä½†æœåŠ¡å™¨ç»å¸¸éœ€è¦é‡å¯ï¼Œå¸¸ç”¨çš„æœåŠ¡æˆ‘ä»¬ä¸å¯èƒ½æ¯æ¬¡éƒ½æ‰‹åŠ¨å¯åŠ¨ï¼Œå¾€å¾€ä¼šæ·»åŠ å¼€æœºå¯åŠ¨é¡¹ã€‚å¥½åƒæ¯”è¾ƒè€æ—§çš„æ–¹å¼æ˜¯é€šè¿‡å†™è„šæœ¬æ¥æ“ä½œï¼ŒåŒäº‹æ¨èä½¿ç”¨ <code>systemd</code> æ¥ç»Ÿä¸€ç®¡ç† Linux ä¸Šçš„æœåŠ¡ï¼Œä¹Ÿæ˜¯ç›®å‰æ¯”è¾ƒæµè¡Œçš„æ–¹å¼ã€‚é˜®ä¸€å³°è€å¸ˆçš„ä¸¤ç¯‡åšå®¢ä»‹ç»çš„å¾ˆè¯¦ç»†å•¦ã€‚</p><p>é‚£æˆ‘ä»¬æƒ³æŠŠè‡ªå·±å†™çš„ Go æœåŠ¡éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼Œå¹¶ä¸”è®©å®ƒå¼€æœºè‡ªå¯åŠ¨ åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><span id="more"></span><h3 id="1-æŠŠå¯æ‰§è¡Œæ–‡ä»¶é…ç½®æˆä¸€ä¸ª-service"><a href="#1-æŠŠå¯æ‰§è¡Œæ–‡ä»¶é…ç½®æˆä¸€ä¸ª-service" class="headerlink" title="1. æŠŠå¯æ‰§è¡Œæ–‡ä»¶é…ç½®æˆä¸€ä¸ª service"></a>1. æŠŠå¯æ‰§è¡Œæ–‡ä»¶é…ç½®æˆä¸€ä¸ª <code>service</code></h3><p>ç¼–å†™ httpbin-go.service æ–‡ä»¶ï¼Œå®Œæˆåæ”¾åœ¨ <code>/usr/lib/systemd/system/</code>ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Unit</span>]</span><br><span class="line">Description=Httpbin by go.</span><br><span class="line">After=syslog.target network.target</span><br><span class="line"></span><br><span class="line">[<span class="type">Service</span>]</span><br><span class="line"><span class="built_in">Type</span>=simple</span><br><span class="line">WorkingDirectory=/home/httpbin/</span><br><span class="line">ExecStart=/home/httpbin/httpbin<span class="literal">-go</span></span><br><span class="line">Restart=on<span class="literal">-failure</span></span><br><span class="line"></span><br><span class="line">[<span class="type">Install</span>]</span><br><span class="line">WantedBy=multi<span class="literal">-user</span>.target</span><br></pre></td></tr></table></figure><p>[Unit] ï¼š</p><ul><li><p>Description æœåŠ¡çš„æè¿°ä¿¡æ¯</p></li><li><p>After ä¾èµ–å…³ç³»</p></li></ul><p>[Service]ï¼š</p><ul><li><p>Type å¯åŠ¨ç±»å‹ï¼šï¼ˆé»˜è®¤å€¼ï¼‰ï¼š<code>ExecStart</code> å­—æ®µå¯åŠ¨çš„è¿›ç¨‹ä¸ºä¸»è¿›ç¨‹</p></li><li><p>WorkingDirectory æœåŠ¡çš„å·¥ä½œç›®å½•</p></li><li><p>ExecStart å¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„ä½ç½®</p></li><li><p>Restart é‡å¯è¡Œä¸ºï¼š<code>on-failure</code> è¡¨ç¤ºä»»ä½•æ„å¤–çš„å¤±è´¥ï¼Œå°±å°†é‡å¯ httpbin-go</p></li></ul><p>[Install]ï¼š</p><ul><li>WantedBy è¡¨ç¤ºè¯¥æœåŠ¡æ‰€åœ¨çš„ Target</li></ul><p><code>Target</code>çš„å«ä¹‰æ˜¯æœåŠ¡ç»„ï¼Œè¡¨ç¤ºä¸€ç»„æœåŠ¡ã€‚<code>WantedBy=multi-user.target</code>æŒ‡çš„æ˜¯ï¼Œsshd æ‰€åœ¨çš„ Target æ˜¯<code>multi-user.target</code>ã€‚</p><p>è¿™ä¸ªè®¾ç½®éå¸¸é‡è¦ï¼Œå› ä¸ºæ‰§è¡Œ<code>systemctl enable httpbin-go.service</code>å‘½ä»¤æ—¶ï¼Œ<code>httpbin-go.service</code>çš„ä¸€ä¸ªç¬¦å·é“¾æ¥ï¼Œå°±ä¼šæ”¾åœ¨<code>/etc/systemd/system</code>ç›®å½•ä¸‹é¢çš„<code>multi-user.target.wants</code>å­ç›®å½•ä¹‹ä¸­ã€‚</p><p>Systemd æœ‰é»˜è®¤çš„å¯åŠ¨ Targetã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl get-default</span><br><span class="line">multi-user.target</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ç»“æœè¡¨ç¤ºï¼Œé»˜è®¤çš„å¯åŠ¨ Target æ˜¯<code>multi-user.target</code>ã€‚åœ¨è¿™ä¸ªç»„é‡Œçš„æ‰€æœ‰æœåŠ¡ï¼Œéƒ½å°†å¼€æœºå¯åŠ¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ<code>systemctl enable</code>å‘½ä»¤èƒ½è®¾ç½®å¼€æœºå¯åŠ¨çš„åŸå› ã€‚</p><h3 id="2-æ·»åŠ å¼€æœºå¯åŠ¨é¡¹"><a href="#2-æ·»åŠ å¼€æœºå¯åŠ¨é¡¹" class="headerlink" title="2. æ·»åŠ å¼€æœºå¯åŠ¨é¡¹"></a>2. æ·»åŠ å¼€æœºå¯åŠ¨é¡¹</h3><p>systemd é»˜è®¤ä»è¿™ä¸ªç›®å½•è¯»å–é…ç½®æ–‡ä»¶ï¼š</p><p><code>/etc/systemd/system/</code></p><p>ä½†æ˜¯ï¼Œé‡Œé¢å­˜æ”¾çš„å¤§éƒ¨åˆ†æ–‡ä»¶éƒ½æ˜¯ç¬¦å·é“¾æ¥ï¼ŒçœŸæ­£çš„é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨è¿™ä¸ªç›®å½•ï¼š</p><p><code>/usr/lib/systemd/system/</code></p><p>systemctl enable å‘½ä»¤ç”¨äºåœ¨ä¸Šé¢ä¸¤ä¸ªç›®å½•ä¹‹é—´ï¼Œå»ºç«‹ç¬¦å·é“¾æ¥å…³ç³»ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable httpbin<span class="literal">-go</span>.service</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Š Go äºŒè¿›åˆ¶æ–‡ä»¶å°±å¯ä»¥å¼€æœºè‡ªå¯åŠ¨äº†ã€‚</p><p>æœ¬æ–‡å°å·¥å…·åœ°å€ï¼š<a href="https://tommygirl.cn/httpbin">httpbin-go</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> æœåŠ¡å™¨ </tag>
            
            <tag> CentOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WKWebView åè®®ç¯‡</title>
      <link href="/2021/12/02/WKWebView-Protocol/"/>
      <url>/2021/12/02/WKWebView-Protocol/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>WKWebView çš„åŸºç¡€å†…å®¹å¯ä»¥çœ‹æˆ‘ä¹‹å‰å†™çš„è¿™ç¯‡ã€‚<a href="/2020/12/01/WKWebView/">WKWebView åŸºç¡€ç¯‡</a></p><p>é¡¹ç›®ä¸­ç”¨åˆ°çš„å‡ ä¸ªåè®®ï¼š</p><ul><li>WKNavigationDelegate</li><li>WKUIDelegate</li><li>WKScriptMessageHandler</li><li>WKHTTPCookieStoreObserver</li><li>WKURLSchemeHandler</li><li>WKScriptMessageHandlerWithReply</li></ul><p>è®©æˆ‘ä»¬åº·åº·éƒ½æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„â€¦â€¦</p><span id="more"></span><hr><h2 id="WKNavigationDelegate"><a href="#WKNavigationDelegate" class="headerlink" title="WKNavigationDelegate"></a>WKNavigationDelegate</h2><blockquote><p>æ¥å—æˆ–æ‹’ç»å¯¼èˆªæ›´æ”¹ä»¥åŠè·Ÿè¸ªå¯¼èˆªè¯·æ±‚è¿›åº¦çš„æ–¹æ³•ã€‚</p></blockquote><p>åŠŸèƒ½æœ‰ç‚¹å„¿ç±»ä¼¼ UIWebView çš„ <code>UIWebViewDelegate</code>ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•æ¥é™åˆ¶ç½‘é¡µä¸­çš„ç‰¹å®šé“¾æ¥å¯¼èˆªï¼Œè¿˜å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥è·Ÿè¸ªè¯·æ±‚çš„è¿›åº¦ï¼Œå¹¶å“åº”é”™è¯¯å’Œèº«ä»½éªŒè¯æŒ‘æˆ˜â€¦â€¦ç­‰ç­‰</p><p>ä¸€ã€å…è®¸æˆ–æ‹’ç»ä¸€ä¸ªå¯¼èˆª</p><p>ç”¨åˆ°ä¸¤ä¸ªå¸¸é‡ <code>WKNavigationActionPolicy</code>ã€ <code>WKNavigationResponsePolicy</code></p><ul><li>æ˜¯å¦å…è®¸æˆ–æ‹’ç»ä¸€ä¸ªå¯¼èˆªè¯·æ±‚</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView decidePolicyForNavigationAction:(<span class="built_in">WKNavigationAction</span> *)navigationAction decisionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">WKNavigationActionPolicy</span>))decisionHandler;</span><br></pre></td></tr></table></figure><p>iOS 13æ–°å¢äº†ä¸€ä¸ªæ¥å£ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®ç°äº†è¿™ä¸ªæ–¹æ³•çš„è¯ï¼Œâ†‘ çš„æ˜¯ä¸ä¼šè¢«è°ƒç”¨çš„ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*  iOS 13</span></span><br><span class="line"><span class="comment">@discussion If you implement this method,</span></span><br><span class="line"><span class="comment">-webView:decidePolicyForNavigationAction:decisionHandler: will not be called.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView decidePolicyForNavigationAction:(<span class="built_in">WKNavigationAction</span> *)navigationAction preferences:(<span class="built_in">WKWebpagePreferences</span> *)preferences decisionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">WKNavigationActionPolicy</span>, <span class="built_in">WKWebpagePreferences</span> *))decisionHandler;</span><br></pre></td></tr></table></figure><ul><li>æ˜¯å¦å±•ç¤ºæˆ–æ‹’ç»ä¸€ä¸ªå¯¼èˆªçš„è¿”å›å€¼</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView decidePolicyForNavigationResponse:(<span class="built_in">WKNavigationResponse</span> *)navigationResponse decisionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">WKNavigationResponsePolicy</span>))decisionHandler;</span><br></pre></td></tr></table></figure><p>äºŒã€è·Ÿè¸ªè¯·æ±‚çš„åŠ è½½è¿›åº¦</p><ul><li>è¯·æ±‚å¼€å§‹</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView didStartProvisionalNavigation:(<span class="keyword">null_unspecified</span> <span class="built_in">WKNavigation</span> *)navigation;</span><br></pre></td></tr></table></figure><ul><li>æ”¶åˆ°æœåŠ¡å™¨çš„é‡å®šå‘è¯·æ±‚</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView didReceiveServerRedirectForProvisionalNavigation:(<span class="keyword">null_unspecified</span> <span class="built_in">WKNavigation</span> *)navigation;</span><br></pre></td></tr></table></figure><ul><li>å·²ç»å¼€å§‹æ¥æ”¶ä¸»æ¡†æ¶çš„å†…å®¹</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView didCommitNavigation:(<span class="keyword">null_unspecified</span> <span class="built_in">WKNavigation</span> *)navigation;</span><br></pre></td></tr></table></figure><ul><li>è¯·æ±‚å·²ç»å®Œæˆ</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView didFinishNavigation:(<span class="keyword">null_unspecified</span> <span class="built_in">WKNavigation</span> *)navigation;</span><br></pre></td></tr></table></figure><p>ä¸‰ã€è¯·æ±‚å‘ç”Ÿé”™è¯¯</p><ul><li>è¯·æ±‚æœŸé—´å‘ç”Ÿé”™è¯¯</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView didFailNavigation:(<span class="keyword">null_unspecified</span> <span class="built_in">WKNavigation</span> *)navigation withError:(<span class="built_in">NSError</span> *)error;</span><br></pre></td></tr></table></figure><ul><li>è¯·æ±‚çš„æ—©æœŸå‘ç”Ÿé”™è¯¯</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView didFailProvisionalNavigation:(<span class="keyword">null_unspecified</span> <span class="built_in">WKNavigation</span> *)navigation withError:(<span class="built_in">NSError</span> *)error;</span><br></pre></td></tr></table></figure><ul><li>WebViewçš„å†…å®¹è¿›ç¨‹ç»ˆæ­¢</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webViewWebContentProcessDidTerminate:(<span class="built_in">WKWebView</span> *)webView;</span><br></pre></td></tr></table></figure><p>å››ã€èº«ä»½éªŒè¯æŒ‘æˆ˜</p><ul><li>æ˜¯å¦å›åº”æ”¶åˆ°çš„èº«ä»½éªŒè¯è´¨è¯¢</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView didReceiveAuthenticationChallenge:(<span class="built_in">NSURLAuthenticationChallenge</span> *)challenge completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLSessionAuthChallengeDisposition</span> disposition, <span class="built_in">NSURLCredential</span> * _Nullable credential))completionHandler;</span><br></pre></td></tr></table></figure><ul><li>è¯¢é—®å§”æ‰˜æ˜¯å¦ç»§ç»­ä½¿ç”¨ä¸æ¨èä½¿ç”¨çš„ TLS ç‰ˆæœ¬çš„è¿æ¥ï¼Œ ios(14.0)</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView authenticationChallenge:(<span class="built_in">NSURLAuthenticationChallenge</span> *)challenge shouldAllowDeprecatedTLS:(<span class="keyword">void</span> (^)(<span class="built_in">BOOL</span>))decisionHandler;</span><br></pre></td></tr></table></figure><h2 id="WKUIDelegate"><a href="#WKUIDelegate" class="headerlink" title="WKUIDelegate"></a>WKUIDelegate</h2><blockquote><p>ä»£è¡¨ç½‘é¡µä»¥åŸç”Ÿçš„å½¢å¼å®ç°ä¸€äº› UI å…ƒç´ ã€‚</p></blockquote><p>å®ç°è¿™ä¸ªåè®®å¯ä»¥ï¼š</p><ul><li><p>æ§åˆ¶æ–°çª—å£çš„æ‰“å¼€</p></li><li><p>è‡ªå®šä¹‰ Alertã€å¤šä¸ªæŒ‰é’®çš„ Alertã€å¯ä»¥è¾“å…¥æ–‡å­—çš„ Alert ç­‰ç­‰</p></li><li><p>æ˜¾ç¤ºä¸Šä¼ é¢æ¿ã€ä¸Šä¸‹æ–‡èœå•ç­‰</p></li></ul><h3 id="ä¸€ã€JS-è§¦å‘çš„-Alert"><a href="#ä¸€ã€JS-è§¦å‘çš„-Alert" class="headerlink" title="ä¸€ã€JS è§¦å‘çš„ Alert"></a>ä¸€ã€JS è§¦å‘çš„ Alert</h3><p>è¿™å‡ ä¸ªæˆ‘è§‰å¾—æ˜¯æœ€å¸¸ç”¨ä¹Ÿæ˜¯æœ€åŸºæœ¬çš„å‡ ä¸ªæ–¹æ³•ï¼ŒUIWebView ä¸­æ˜¯ä½¿ç”¨æµè§ˆå™¨é»˜è®¤å®ç°çš„æ ·å¼ï¼Œä½†åœ¨ WKWebView ä¸­éœ€è¦è‡ªå·±å®ç°åŸç”Ÿçš„è§†å›¾ã€‚</p><ul><li>æ™®æ™®é€šé€šçš„ Alert ï¼Œç”± JS çš„ <code>alert</code> å‡½æ•°è§¦å‘ã€‚</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView runJavaScriptAlertPanelWithMessage:(<span class="built_in">NSString</span> *)message initiatedByFrame:(<span class="built_in">WKFrameInfo</span> *)frame completionHandler:(<span class="keyword">void</span> (^)(<span class="keyword">void</span>))completionHandler;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(<span class="string">&quot;é€—ä½ ç©å„¿~&quot;</span>);</span><br></pre></td></tr></table></figure><p>=&gt;</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView runJavaScriptAlertPanelWithMessage:(<span class="built_in">NSString</span> *)message initiatedByFrame:(<span class="built_in">WKFrameInfo</span> *)frame completionHandler:(<span class="keyword">void</span> (^)(<span class="keyword">void</span>))completionHandler &#123;</span><br><span class="line">  <span class="comment">// JSç«¯è°ƒç”¨alertæ—¶æ‰€ä¼ çš„æ•°æ®å¯ä»¥é€šè¿‡messageæ‹¿åˆ°ï¼Œmessage = é€—ä½ ç©å„¿</span></span><br><span class="line">    <span class="built_in">UIAlertController</span> *alert = [<span class="built_in">UIAlertController</span> alertControllerWithTitle:<span class="string">@&quot;æç¤º&quot;</span> message:message preferredStyle:<span class="built_in">UIAlertControllerStyleAlert</span>];</span><br><span class="line">    <span class="built_in">UIAlertAction</span> *a = [<span class="built_in">UIAlertAction</span> actionWithTitle:<span class="string">@&quot;OK&quot;</span> style:<span class="built_in">UIAlertActionStyleDefault</span> handler:^(<span class="built_in">UIAlertAction</span> * _Nonnull action) &#123;</span><br><span class="line">        completionHandler();</span><br><span class="line">    &#125;];</span><br><span class="line">    [alert addAction:a];</span><br><span class="line">    [<span class="keyword">self</span> presentViewController:alert animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åŒºåˆ†ç¡®è®¤/å–æ¶ˆçš„ Alert ï¼Œç”± JS çš„ <code>confirm</code> å‡½æ•°è§¦å‘ã€‚</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView runJavaScriptConfirmPanelWithMessage:(<span class="built_in">NSString</span> *)message initiatedByFrame:(<span class="built_in">WKFrameInfo</span> *)frame completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">BOOL</span>))completionHandler;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logout</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> leave = <span class="built_in">window</span>.confirm(<span class="string">&quot;Do you really want to leave?&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (leave) &#123;</span><br><span class="line">        alert(<span class="string">&quot;Thanks for Visiting!&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        alert(<span class="string">&quot;I love you!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>=&gt;</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//(void (^)(BOOL))completionHandler Block è¿”å›ç»™JSçš„ç±»å‹æ˜¯ä¸€ä¸ªå¸ƒå°”</span></span><br><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView runJavaScriptConfirmPanelWithMessage:(<span class="built_in">NSString</span> *)message initiatedByFrame:(<span class="built_in">WKFrameInfo</span> *)frame completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">BOOL</span>))completionHandler &#123;    </span><br><span class="line">    <span class="built_in">UIAlertController</span> *alertController = [<span class="built_in">UIAlertController</span> alertControllerWithTitle:<span class="string">@&quot;æç¤º&quot;</span> message:message preferredStyle:<span class="built_in">UIAlertControllerStyleAlert</span>];</span><br><span class="line">    [alertController addAction:([<span class="built_in">UIAlertAction</span> actionWithTitle:<span class="string">@&quot;å–æ¶ˆ&quot;</span> style:<span class="built_in">UIAlertActionStyleCancel</span> handler:^(<span class="built_in">UIAlertAction</span> * _Nonnull action) &#123;</span><br><span class="line">        completionHandler(<span class="literal">NO</span>);</span><br><span class="line">    &#125;])];</span><br><span class="line">    </span><br><span class="line">    [alertController addAction:([<span class="built_in">UIAlertAction</span> actionWithTitle:<span class="string">@&quot;ç¡®è®¤&quot;</span> style:<span class="built_in">UIAlertActionStyleDefault</span> handler:^(<span class="built_in">UIAlertAction</span> * _Nonnull action) &#123;</span><br><span class="line">        completionHandler(<span class="literal">YES</span>);</span><br><span class="line">    &#125;])];</span><br><span class="line">    </span><br><span class="line">    [<span class="keyword">self</span> presentViewController:alertController animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å¸¦è¾“å…¥æ¡†çš„ Alertï¼Œç”± JS çš„ <code>prompt</code> å‡½æ•°è§¦å‘ã€‚</li></ul><p>ä¸€ä¸ª prompt å¯¹è¯æ¡†ï¼ŒåŒ…å«ä¸€ä¸ªå•è¡Œæ–‡æœ¬æ¡†ï¼Œä¸€ä¸ªâ€œå–æ¶ˆâ€æŒ‰é’®ï¼Œä¸€ä¸ªâ€œç¡®å®šâ€æŒ‰é’®ï¼Œåœ¨å¯¹è¯æ¡†å…³é—­æ—¶ï¼Œè¿”å›ç”¨æˆ·è¾“å…¥åˆ°æ–‡æœ¬æ¡†å†…çš„å€¼(å¯èƒ½ä¸ºç©º)ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView runJavaScriptTextInputPanelWithPrompt:(<span class="built_in">NSString</span> *)prompt defaultText:(<span class="built_in">NSString</span> *)defaultText initiatedByFrame:(<span class="built_in">WKFrameInfo</span> *)frame completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">NSString</span> * _Nullable))completionHandler;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">testPrompt</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sign = prompt(<span class="string">&quot;ä½ æ˜¯ä»€ä¹ˆæ˜Ÿåº§çš„?&quot;</span>, <span class="string">&quot;å‘Šè¯‰æˆ‘å§~&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (sign == <span class="string">&quot;å¤©èåº§&quot;</span>) &#123;</span><br><span class="line">        alert(<span class="string">&quot;å“‡! æˆ‘è·Ÿå¤©èåº§çŠ¯å†²!&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        alert(<span class="string">&quot;å¥½å§ï¼Œæˆ‘æ˜¯å°„æ‰‹åº§!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>=&gt; </p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//prompt = ä½ æ˜¯ä»€ä¹ˆæ˜Ÿåº§çš„?; defaultText = å‘Šè¯‰æˆ‘å§~</span></span><br><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView runJavaScriptTextInputPanelWithPrompt:(<span class="built_in">NSString</span> *)prompt defaultText:(<span class="built_in">NSString</span> *)defaultText initiatedByFrame:(<span class="built_in">WKFrameInfo</span> *)frame completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">NSString</span> * _Nullable))completionHandler &#123;</span><br><span class="line">    <span class="built_in">UIAlertController</span> *alert = [<span class="built_in">UIAlertController</span> alertControllerWithTitle:<span class="string">@&quot;æç¤º&quot;</span> message:defaultText preferredStyle:<span class="built_in">UIAlertControllerStyleAlert</span>];</span><br><span class="line">    [alert addTextFieldWithConfigurationHandler:^(<span class="built_in">UITextField</span> * _Nonnull textField) &#123;</span><br><span class="line">        textField.textColor = [<span class="built_in">UIColor</span> redColor];</span><br><span class="line">    &#125;];</span><br><span class="line">    [alert addAction:[<span class="built_in">UIAlertAction</span> actionWithTitle:<span class="string">@&quot;ç¡®å®š&quot;</span> style:<span class="built_in">UIAlertActionStyleDefault</span> handler:^(<span class="built_in">UIAlertAction</span> * _Nonnull action) &#123;</span><br><span class="line">        completionHandler([[alert.textFields lastObject] text]);</span><br><span class="line">    &#125;]];</span><br><span class="line"></span><br><span class="line">    [<span class="keyword">self</span> presentViewController:alert animated:<span class="literal">YES</span> completion:<span class="literal">NULL</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äºŒã€åˆ›å»ºå’Œå…³é—­æ–°çš„-WebView"><a href="#äºŒã€åˆ›å»ºå’Œå…³é—­æ–°çš„-WebView" class="headerlink" title="äºŒã€åˆ›å»ºå’Œå…³é—­æ–°çš„ WebView"></a>äºŒã€åˆ›å»ºå’Œå…³é—­æ–°çš„ WebView</h3><ul><li>ç”¨ä¸€ä¸ªæ–°çš„ WKWebView åŠ è½½è¯·æ±‚ã€èµ„æºï¼Œå¯ä»¥é€šè¿‡ JS çš„ <code>window.open()</code> å‡½æ•°æˆ–è€… <code>a</code> æ ‡ç­¾è§¦å‘ã€‚</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">WKWebView</span> *)webView:(<span class="built_in">WKWebView</span> *)webView createWebViewWithConfiguration:(<span class="built_in">WKWebViewConfiguration</span> *)configuration forNavigationAction:(<span class="built_in">WKNavigationAction</span> *)navigationAction windowFeatures:(<span class="built_in">WKWindowFeatures</span> *)windowFeatures;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.open(<span class="string">&#x27;https://baidu.com&#x27;</span>);</span><br></pre></td></tr></table></figure><p>=&gt;</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">WKWebView</span> *)webView:(<span class="built_in">WKWebView</span> *)webView createWebViewWithConfiguration:(<span class="built_in">WKWebViewConfiguration</span> *)configuration forNavigationAction:(<span class="built_in">WKNavigationAction</span> *)navigationAction windowFeatures:(<span class="built_in">WKWindowFeatures</span> *)windowFeatures &#123;</span><br><span class="line">    <span class="built_in">WKWebView</span>* v = [[<span class="built_in">WKWebView</span> alloc] initWithFrame:webView.frame configuration:configuration];</span><br><span class="line">    v.UIDelegate = webView.UIDelegate;</span><br><span class="line">    v.navigationDelegate = webView.navigationDelegate;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">UIViewController</span>* vc = [[<span class="built_in">UIViewController</span> alloc] init];</span><br><span class="line">    vc.modalPresentationStyle = <span class="built_in">UIModalPresentationOverCurrentContext</span>;</span><br><span class="line">    vc.view = v;</span><br><span class="line">    [<span class="keyword">self</span> presentViewController:vc animated:<span class="literal">YES</span> completion:<span class="literal">nil</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…³äºè¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘çœ‹å¥½å¤šäººåœ¨è¿™é‡Œéƒ½åˆ¤æ–­ä¸€ä¸‹ <code>navigationAction.targetFrame.isMainFrame</code> ï¼Œå…¶å®ä½†å‡¡è¿™ä¸ªæ–¹æ³•æ‰§è¡Œäº†ï¼Œ targetFrame ä¸€å®šæ˜¯ nilã€‚soâ€¦â€¦ğŸ¤</p><ul><li>é€šçŸ¥ä½ çš„åº”ç”¨ DOM çª—å£çš„ <code>close()</code> å·²ç»æˆåŠŸè°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯ JS è°ƒç”¨äº† <code>window.close()</code></li></ul><p>è¿™é‡Œæˆ‘ç†è§£çš„æ˜¯ï¼Œå’Œä¸Šé¢çš„åŸç”Ÿé¡µé¢æ‰“å¼€æ–¹å¼å¯¹åº”ï¼ŒåŸç”Ÿå†³å®šæ€ä¹ˆå…³é—­é¡µé¢ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webViewDidClose:(<span class="built_in">WKWebView</span> *)webView;</span><br></pre></td></tr></table></figure><h3 id="ä¸‰ã€ä¸Šä¸‹æ–‡èœå•"><a href="#ä¸‰ã€ä¸Šä¸‹æ–‡èœå•" class="headerlink" title="ä¸‰ã€ä¸Šä¸‹æ–‡èœå•"></a>ä¸‰ã€ä¸Šä¸‹æ–‡èœå•</h3><p>ä¸æ˜¯å¤ªç†Ÿæ‚‰ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView contextMenuWillPresentForElement:(<span class="built_in">WKContextMenuElementInfo</span> *)elementInfo;</span><br><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView contextMenuForElement:(<span class="built_in">WKContextMenuElementInfo</span> *)elementInfo willCommitWithAnimator:(<span class="keyword">id</span>&lt;<span class="built_in">UIContextMenuInteractionCommitAnimating</span>&gt;)animator;</span><br><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView contextMenuConfigurationForElement:(<span class="built_in">WKContextMenuElementInfo</span> *)elementInfo completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">UIContextMenuConfiguration</span> * _Nullable configuration))completionHandler;</span><br><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView contextMenuDidEndForElement:(<span class="built_in">WKContextMenuElementInfo</span> *)elementInfo;</span><br></pre></td></tr></table></figure><h3 id="å››ã€iOS10-iOS13"><a href="#å››ã€iOS10-iOS13" class="headerlink" title="å››ã€iOS10 - iOS13"></a>å››ã€iOS10 - iOS13</h3><p>å·²ç»åºŸå¼ƒçš„å‡ ä¸ªæ–¹æ³•ï¼Œè¢« â†‘ çš„æ›¿æ¢æ‰ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)webView:(<span class="built_in">WKWebView</span> *)webView shouldPreviewElement:(<span class="built_in">WKPreviewElementInfo</span> *)elementInfo <span class="built_in">WK_API_DEPRECATED_WITH_REPLACEMENT</span>(<span class="string">&quot;webView:contextMenuConfigurationForElement:completionHandler:&quot;</span>, ios(<span class="number">10.0</span>, <span class="number">13.0</span>));</span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">UIViewController</span> *)webView:(<span class="built_in">WKWebView</span> *)webView previewingViewControllerForElement:(<span class="built_in">WKPreviewElementInfo</span> *)elementInfo defaultActions:(<span class="built_in">NSArray</span>&lt;<span class="keyword">id</span> &lt;<span class="built_in">WKPreviewActionItem</span>&gt;&gt; *)previewActions <span class="built_in">WK_API_DEPRECATED_WITH_REPLACEMENT</span>(<span class="string">&quot;webView:contextMenuConfigurationForElement:completionHandler:&quot;</span>, ios(<span class="number">10.0</span>, <span class="number">13.0</span>));</span><br><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView commitPreviewingViewController:(<span class="built_in">UIViewController</span> *)previewingViewController <span class="built_in">WK_API_DEPRECATED_WITH_REPLACEMENT</span>(<span class="string">&quot;webView:contextMenuForElement:willCommitWithAnimator:&quot;</span>, ios(<span class="number">10.0</span>, <span class="number">13.0</span>));</span><br></pre></td></tr></table></figure><h3 id="äº”ã€iOS-15-æ–°å¢-éº¦å…‹é£ã€æ‘„åƒå¤´ã€è¿åŠ¨æƒé™"><a href="#äº”ã€iOS-15-æ–°å¢-éº¦å…‹é£ã€æ‘„åƒå¤´ã€è¿åŠ¨æƒé™" class="headerlink" title="äº”ã€iOS 15 æ–°å¢-éº¦å…‹é£ã€æ‘„åƒå¤´ã€è¿åŠ¨æƒé™"></a>äº”ã€iOS 15 æ–°å¢-éº¦å…‹é£ã€æ‘„åƒå¤´ã€è¿åŠ¨æƒé™</h3><p>è¿™ä¸¤ä¸ª API æš‚æ—¶ä¸å¤ªæ¸…æ¥šæ˜¯æ€ä¹ˆè§¦å‘çš„ï¼Œé€šè¿‡ input æ ‡ç­¾åæ­£æ²¡ä½œç”¨</p><ul><li>ä»£è¡¨è¯·æ±‚éº¦å…‹é£éŸ³é¢‘å’Œæ‘„åƒå¤´è§†é¢‘è®¿é—®æƒé™ã€‚</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView requestMediaCapturePermissionForOrigin:(<span class="built_in">WKSecurityOrigin</span> *)origin initiatedByFrame:(<span class="built_in">WKFrameInfo</span> *)frame type:(<span class="built_in">WKMediaCaptureType</span>)type decisionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">WKPermissionDecision</span> decision))decisionHandler;</span><br></pre></td></tr></table></figure><ul><li>å…è®¸ä½ çš„åº”ç”¨ç¨‹åºç¡®å®šç»™å®šçš„å®‰å…¨æºæ˜¯å¦å¯ä»¥è®¿é—®è®¾å¤‡çš„æ–¹å‘å’Œè¿åŠ¨ã€‚</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)webView:(<span class="built_in">WKWebView</span> *)webView requestDeviceOrientationAndMotionPermissionForOrigin:(<span class="built_in">WKSecurityOrigin</span> *)origin initiatedByFrame:(<span class="built_in">WKFrameInfo</span> *)frame decisionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">WKPermissionDecision</span> decision))decisionHandler;</span><br></pre></td></tr></table></figure><h2 id="WKScriptMessageHandler"><a href="#WKScriptMessageHandler" class="headerlink" title="WKScriptMessageHandler"></a>WKScriptMessageHandler</h2><blockquote><p>ç”¨äº <code>æ¥æ”¶</code> JavaScript å‘æ¥çš„æ¶ˆæ¯çš„æ¶ˆæ¯å¤„ç†å™¨ã€‚</p></blockquote><p>iOS ä¸ JavaScript åšäº¤äº’çš„åè®®ã€‚å½“ JavaScript ä»£ç å‘é€ä¸€æ¡ä¸“é—¨é’ˆå¯¹æˆ‘ä»¬çš„æ¶ˆæ¯å¤„ç†ç¨‹åºçš„æ¶ˆæ¯æ—¶ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªåè®®çš„æ–¹æ³•æ¥æ¥æ”¶ï¼Œç„¶åè‡ªå®šä¹‰åç»­çš„å¤„ç†ã€‚</p><p>æ¶‰åŠåˆ°çš„ç±»å‹ <code>WKUserContentController</code>ã€‚åŸºæœ¬ç”¨æ³•æˆ‘ä»¬åœ¨ <a href="https://tommygirl.cn/2020/12/01/WKWebView/#WKUserContentController"><code>WKWebView åŸºç¡€ç¯‡</code></a> æåˆ°è¿‡ï¼Œè¿™é‡Œå°±ä¸é‡å¤äº†ã€‚</p><p>å¾ˆç®€å•ï¼Œå°±ä¸€ä¸ªæ–¹æ³•ã€‚å¹²å°±å®Œäº†ã€‚</p><ul><li>æ¥æ”¶åˆ° script message</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)userContentController:(<span class="built_in">WKUserContentController</span> *)userContentController didReceiveScriptMessage:(<span class="built_in">WKScriptMessage</span> *)message;</span><br></pre></td></tr></table></figure><h2 id="WKScriptMessageHandlerWithReply"><a href="#WKScriptMessageHandlerWithReply" class="headerlink" title="WKScriptMessageHandlerWithReply"></a>WKScriptMessageHandlerWithReply</h2><blockquote><p>ç”¨äº <code>æ¥æ”¶</code>ï¼‹<code>å“åº”</code> JavaScript å‘æ¥çš„æ¶ˆæ¯çš„æ¶ˆæ¯å¤„ç†å™¨ã€‚</p></blockquote><p>ios14.0 æ–°å¢çš„åè®®å’Œ API ï¼ŒåŒæ ·æ˜¯ iOS ä¸ JavaScript åšäº¤äº’çš„åè®®ã€‚ä¸è¿‡ä¸ <code>WKScriptMessageHandler</code> ç›¸æ¯”ï¼Œå¤šäº†ä¸€ä¸ªå¯ä»¥å‘ JS å‘é€å“åº”ç»“æœçš„å¤„ç†å™¨ã€‚</p><p>ä¹Ÿæ˜¯åªæœ‰ä¸€ä¸ª API ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)userContentController:(<span class="built_in">WKUserContentController</span> *)userContentController didReceiveScriptMessage:(<span class="built_in">WKScriptMessage</span> *)message replyHandler:(<span class="keyword">void</span> (^)(<span class="keyword">id</span> _Nullable reply, <span class="built_in">NSString</span> *_Nullable errorMessage))replyHandler;</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scriptMessageWithReply</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> promise = <span class="built_in">window</span>.webkit.messageHandlers.YYWK.postMessage(<span class="string">&quot;Fulfill me with 42&quot;</span>);</span><br><span class="line">    promise.then(</span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">&#x27;result&#x27;</span> + result);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">&#x27;error&#x27;</span> + error);</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>=&gt;</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="built_in">WKUserContentController</span> *userContentController = [[<span class="built_in">WKUserContentController</span> alloc] init];</span><br><span class="line">  [userContentController addScriptMessageHandlerWithReply:<span class="keyword">self</span> contentWorld:[<span class="built_in">WKContentWorld</span> pageWorld] name:<span class="string">@&quot;YYWK&quot;</span>];</span><br><span class="line">  <span class="built_in">WKWebViewConfiguration</span> *configuration = [[<span class="built_in">WKWebViewConfiguration</span> alloc] init];</span><br><span class="line">  configuration.userContentController = userContentController;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"> </span><br><span class="line">- (<span class="keyword">void</span>)userContentController:(<span class="built_in">WKUserContentController</span> *)userContentController didReceiveScriptMessage:(<span class="built_in">WKScriptMessage</span> *)message replyHandler:(<span class="keyword">void</span> (^)(<span class="keyword">id</span> _Nullable reply, <span class="built_in">NSString</span> *_Nullable errorMessage))replyHandler &#123;</span><br><span class="line">    <span class="keyword">if</span> ([message.body isEqual:<span class="string">@&quot;Fulfill me with 42&quot;</span>])</span><br><span class="line">        replyHandler(@<span class="number">42</span>, <span class="literal">nil</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        replyHandler(<span class="literal">nil</span>, <span class="string">@&quot;Unexpected message received&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="WKHTTPCookieStoreObserver"><a href="#WKHTTPCookieStoreObserver" class="headerlink" title="WKHTTPCookieStoreObserver"></a>WKHTTPCookieStoreObserver</h2><blockquote><p>ç”¨äºç›‘å¬WebViewä¸­cookieçš„å˜åŒ–ã€‚</p></blockquote><p>å¾ˆç®€å•ï¼Œå°±ä¸€ä¸ªæ–¹æ³•ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">WKHTTPCookieStoreObserver</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line"><span class="keyword">@optional</span></span><br><span class="line">- (<span class="keyword">void</span>)cookiesDidChangeInCookieStore:(<span class="built_in">WKHTTPCookieStore</span> *)cookieStore;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬æåˆ°è¿‡ï¼Œä¸ <code>NSHTTPCookieStorage</code> çš„åŒæ­¥æ“ä½œä¸åŒï¼ŒWKHTTPCookieStore è·å– cookie æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚ä» <code>WKHTTPCookieStore</code> å‘ <code>NSHTTPCookieStorage</code> åŒæ­¥ cookie çš„è¯ï¼Œä¼šå‘ç°è·å–ç»“æœæœ‰å¾ˆæ˜æ˜¾çš„å»¶è¿Ÿã€‚å¤ªå¥½çš„åŠæ³•æˆ‘ä¹Ÿæ²¡å‘ç°ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)cookiesDidChangeInCookieStore:(<span class="built_in">WKHTTPCookieStore</span> *)cookieStore &#123;</span><br><span class="line">    [cookieStore getAllCookies:^(<span class="built_in">NSArray</span>&lt;<span class="built_in">NSHTTPCookie</span> *&gt; * _Nonnull cookies) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;%s :[%@]&quot;</span>, __FUNCTION__, cookies);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">NSHTTPCookie</span> *cookie <span class="keyword">in</span> cookies) &#123;</span><br><span class="line">            [[<span class="built_in">NSHTTPCookieStorage</span> sharedHTTPCookieStorage] setCookie:cookie];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="WKURLSchemeHandler"><a href="#WKURLSchemeHandler" class="headerlink" title="WKURLSchemeHandler"></a>WKURLSchemeHandler</h2><p>èµ°ï¼Œè®©æˆ‘ä»¬å»ç§èŠ~~</p><hr><h2 id="å…³äº-WKWebView-çš„å‡ ç¯‡æ–‡ç« ï¼š"><a href="#å…³äº-WKWebView-çš„å‡ ç¯‡æ–‡ç« ï¼š" class="headerlink" title="å…³äº WKWebView çš„å‡ ç¯‡æ–‡ç« ï¼š"></a><strong>å…³äº WKWebView çš„å‡ ç¯‡æ–‡ç« ï¼š</strong></h2><p><a href="/2021/12/01/WKWebView/">WKWebView åŸºç¡€ç¯‡</a><br><a href="/2021/12/02/WKWebView-Protocol/">WKWebView åè®®ç¯‡</a><br><a href="/2021/12/11/WKWebView-Use/">WKWebView å®æˆ˜ç¯‡</a></p><h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a><strong>Demo</strong></h2><p><a href="https://github.com/ATommyGirl/WebView">WebView çš„ Demo</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> WebView </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WKWebView åŸºç¡€ç¯‡</title>
      <link href="/2021/12/01/WKWebView/"/>
      <url>/2021/12/01/WKWebView/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><p>WKWebView æ˜¯ iOS 8.0 ä»¥åç”¨äºæ›¿ä»£ UIWebView çš„æµè§ˆå™¨ç»„ä»¶ã€‚å’Œ UIWebView ç›¸æ¯”ï¼Œå…·æœ‰æ¸²æŸ“æ€§èƒ½æ›´å¥½ã€æ”¯æŒæ›´å¤šçš„ HTML5 ç‰¹æ€§ã€æ§åˆ¶æ›´åŠ ç»†è‡´ç­‰è¯¸å¤šä¼˜ç‚¹ã€‚ä¸€ç›´æ²¡æ²‰ä¸‹å¿ƒæ¥å­¦ä¹ ï¼Œæˆ‘ä»¬ä¸€èµ·å¥½å¥½çœ‹çœ‹é‡Œé¢éƒ½æœ‰ä»€ä¹ˆå§ğŸ¤“</p><span id="more"></span><h2 id="WKWebView"><a href="#WKWebView" class="headerlink" title="WKWebView"></a>WKWebView</h2><p>ä¸»è¦çš„</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">WKWebView</span> : <span class="title">UIView</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//é‡è¦å±æ€§</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">copy</span>) <span class="built_in">WKWebViewConfiguration</span> *configuration;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">nonatomic</span>, <span class="keyword">weak</span>) <span class="keyword">id</span> &lt;<span class="built_in">WKNavigationDelegate</span>&gt; navigationDelegate;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">nonatomic</span>, <span class="keyword">weak</span>) <span class="keyword">id</span> &lt;<span class="built_in">WKUIDelegate</span>&gt; <span class="built_in">UIDelegate</span>;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">strong</span>) <span class="built_in">WKBackForwardList</span> *backForwardList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">nullable</span>) SecTrustRef serverTrust;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *customUserAgent;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">BOOL</span> allowsLinkPreview;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">strong</span>) <span class="built_in">UIScrollView</span> *scrollView;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ è½½æ–¹æ³•</span></span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">WKNavigation</span> *)loadRequest:(<span class="built_in">NSURLRequest</span> *)request;</span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">WKNavigation</span> *)loadFileURL:(<span class="built_in">NSURL</span> *)URL allowingReadAccessToURL:(<span class="built_in">NSURL</span> *)readAccessURL;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">WKNavigation</span> *)goBack;</span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">WKNavigation</span> *)goForward;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">WKNavigation</span> *)reload;</span><br><span class="line">- (<span class="keyword">nullable</span> <span class="built_in">WKNavigation</span> *)reloadFromOrigin;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç±»æ–¹æ³•</span></span><br><span class="line">+ (<span class="built_in">BOOL</span>)handlesURLScheme:(<span class="built_in">NSString</span> *)urlScheme;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸JSäº¤äº’æ¥å£</span></span><br><span class="line">- (<span class="keyword">void</span>)evaluateJavaScript:(<span class="built_in">NSString</span> *)javaScriptString completionHandler:(<span class="keyword">void</span> (^ _Nullable)(_Nullable <span class="keyword">id</span>, <span class="built_in">NSError</span> * _Nullable error))completionHandler;</span><br><span class="line"><span class="comment">//iOS 14æ–°å¢çš„API</span></span><br><span class="line">- (<span class="keyword">void</span>)evaluateJavaScript:(<span class="built_in">NSString</span> *)javaScriptString inFrame:(<span class="keyword">nullable</span> <span class="built_in">WKFrameInfo</span> *)frame inContentWorld:(<span class="built_in">WKContentWorld</span> *)contentWorld completionHandler:(<span class="keyword">void</span> (^ _Nullable)(_Nullable <span class="keyword">id</span>, <span class="built_in">NSError</span> * _Nullable error))completionHandler;</span><br><span class="line">- (<span class="keyword">void</span>)callAsyncJavaScript:(<span class="built_in">NSString</span> *)functionBody arguments:(<span class="keyword">nullable</span> <span class="built_in">NSDictionary</span>&lt;<span class="built_in">NSString</span> *, <span class="keyword">id</span>&gt; *)arguments inFrame:(<span class="keyword">nullable</span> <span class="built_in">WKFrameInfo</span> *)frame inContentWorld:(<span class="built_in">WKContentWorld</span> *)contentWorld completionHandler:(<span class="keyword">void</span> (^ _Nullable)(_Nullable <span class="keyword">id</span>, <span class="built_in">NSError</span> * _Nullable error))completionHandler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><h2 id="WKWebView-åˆå§‹åŒ–"><a href="#WKWebView-åˆå§‹åŒ–" class="headerlink" title="WKWebView åˆå§‹åŒ–"></a>WKWebView åˆå§‹åŒ–</h2><p>ä¸€ä¸ªç®€å•ç”¨äºå±•ç¤ºçš„ WebView å¯ä»¥æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">WKWebViewConfiguration</span> *configuration = [[<span class="built_in">WKWebViewConfiguration</span> alloc] init];</span><br><span class="line"><span class="built_in">WKWebView</span> *webView = (&#123;</span><br><span class="line">    webView = [[<span class="built_in">WKWebView</span> alloc] initWithFrame:<span class="keyword">self</span>.view.bounds configuration:configuration];</span><br><span class="line">    webView.scrollView.bounces = <span class="literal">NO</span>;</span><br><span class="line">    webView.backgroundColor = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line">    webView;</span><br><span class="line">&#125;);</span><br><span class="line">    </span><br><span class="line">[<span class="keyword">self</span>.view addSubview:webView];</span><br><span class="line">[webView loadRequest:[<span class="built_in">NSURLRequest</span> requestWithURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@&quot;http://baidu.com&quot;</span>]]];</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€ä¸ªå•çº¯ç”¨äºå±•ç¤ºç½‘é¡µã€æ²¡æœ‰ä»»ä½•é…ç½®é¡¹çš„ WebView å°±ç®—å®Œæˆäº†ã€‚ç›¸è¾ƒäº <code>UIWebView</code>ï¼Œæˆ‘ä»¬çœ‹åˆ°å¤šäº†ä¸€ä¸ª <code>configuration</code> é…ç½®ç±»å‹ï¼Œé‚£æˆ‘ä»¬å°±æ¥ Read the fucking source codeâ€¦â€¦</p><h2 id="WKWebViewConfiguration"><a href="#WKWebViewConfiguration" class="headerlink" title="WKWebViewConfiguration"></a>WKWebViewConfiguration</h2><p>å®˜æ–¹æ–‡æ¡£æ˜¯è¿™æ ·æè¿°è¿™ä¸ªç±»å‹çš„ï¼š</p><blockquote><p>A <code>WKWebViewConfiguration</code> object is a collection of properties with which to initialize a web view.</p><p>ä¸€ä¸ªç”¨äºåˆå§‹åŒ– web view å±æ€§çš„é›†åˆã€‚</p></blockquote><p>æˆ‘ä»¬å¯ä»¥ç”¨å®ƒåšä»€ä¹ˆå‘¢ï¼Ÿ</p><blockquote><ul><li>è®¾ç½®ç”¨äºç½‘ç«™çš„åˆå§‹cookie</li><li>å¤„ç†è‡ªå®šä¹‰çš„ URL schemes</li><li>è®¾ç½®å¦‚ä½•å¤„ç†åª’ä½“å†…å®¹</li><li>ç®¡ç†ç½‘é¡µä¸­é€‰ä¸­çš„ä¿¡æ¯</li><li>è‡ªå®šä¹‰æ³¨å…¥ç½‘é¡µçš„è„šæœ¬</li><li>è‡ªå®šä¹‰å†…å®¹çš„å±•ç¤ºè§„åˆ™</li><li>â€¦â€¦</li></ul></blockquote><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ª <code>WKWebViewConfiguration</code> å¯¹è±¡æ¥è®¾ç½®ç½‘é¡µçš„å±æ€§ï¼Œå¹¶ä¸”åœ¨ WebView åˆå§‹åŒ–çš„æ—¶å€™ä¼ é€’ç»™å®ƒã€‚æ³¨æ„çš„æ˜¯åªèƒ½åœ¨åˆå§‹åŒ–çš„æ—¶å€™é…ç½® <code>configuration</code> ä¸­çš„å±æ€§ï¼Œåé¢æ˜¯æ²¡åŠæ³•åŠ¨æ€å†å»ä¿®æ”¹è¿™äº›é…ç½®çš„ã€‚</p><p>æˆ‘ä»¬é€šè¿‡è¿™ä¸ªç±»çœ‹çœ‹ WebKit é‡Œé¢æœ‰å“ªäº›ä¸»è¦çš„å†…å®¹ï¼š</p><h2 id="WKProcessPool"><a href="#WKProcessPool" class="headerlink" title="WKProcessPool"></a>WKProcessPool</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*! @abstract The process pool from which to obtain the view&#x27;s web content</span></span><br><span class="line"><span class="comment"> process.</span></span><br><span class="line"><span class="comment"> @discussion When a web view is initialized, a new web content process</span></span><br><span class="line"><span class="comment"> will be created for it from the specified pool, or an existing process in</span></span><br><span class="line"><span class="comment"> that pool will be used.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">WKProcessPool</span> *processPool;</span><br></pre></td></tr></table></figure><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">WKProcessPool</span> : <span class="title">NSObject</span> &lt;<span class="title">NSSecureCoding</span>&gt;</span></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>å®˜æ–¹æ–‡æ¡£è§£é‡Šä¸ºä¸€ä¸ªå¯ä»¥åœ¨å•ä¸ªè¿›ç¨‹ä¸­è¿è¡Œå¤šä¸ª web è§†å›¾çš„ä¸å¯è§ tokenï¼Ÿä»¤ç‰Œï¼Ÿã€‚è¿›ç¨‹æ± ã€‚å¯ä»¥çœ‹åˆ° WKProcessPool ç±»æ²¡æœ‰æš´æ¼ä»»ä½•æ¥å£ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬åªèƒ½åˆ›å»ºå’Œè¯»å–è¯¥å¯¹è±¡ï¼Œé€šè¿‡å¯¹è±¡åœ°å€åˆ¤æ–­æ˜¯å¦åœ¨ç›¸åŒè¿›ç¨‹ã€‚</p><p>WKWebView ä¸ºäº†å®‰å…¨å’Œç¨³å®šæ€§è€ƒè™‘ï¼Œä¼šä¸ºæ¯ä¸€ä¸ª WKWebView å®ä¾‹åˆ†é…ç‹¬ç«‹çš„è¿›ç¨‹ï¼ˆè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨APPçš„è¿›ç¨‹ç©ºé—´ï¼‰ï¼Œç³»ç»Ÿä¼šæœ‰ä¸€ä¸ªè®¾å®šçš„è¿›ç¨‹ä¸ªæ•°ä¸Šçº¿ã€‚ç›¸åŒ WKProcessPool å¯¹è±¡çš„ WKWebView å…±äº«ç›¸åŒçš„è¿›ç¨‹ç©ºé—´ã€‚è¿™ä¹Ÿæ˜¯ä¸ <code>UIWebView</code> æœ€å¤§ä¸åŒçš„ä¸€ç‚¹ï¼š<code>NSHTTPCookieStorage</code> ä¸­çš„ cookie ï¼Œ<code>UIWebView</code> æ˜¯å¯ä»¥è‡ªåŠ¨æºå¸¦ä½¿ç”¨çš„ï¼Œä½† <code>WKWebView</code> æ— æ³•è·å– Storageä¸­ çš„ cookieã€‚</p><p>è¯¶ï¼Œé‚£æ˜¯ä¸æ˜¯æ”¾åœ¨åŒä¸€ä¸ªè¿›ç¨‹æ± ä¸­çš„ web view å°±å¯ä»¥å…±äº« cookie äº†å‘¢ï¼Ÿå¸¦ç€è¿™ä¸ªé—®é¢˜ï¼Œç¨åæˆ‘ä»¬ä¼šæåˆ° cookie æœ‰å…³çš„å¤„ç†ã€‚</p><h2 id="WKPreferences"><a href="#WKPreferences" class="headerlink" title="WKPreferences"></a>WKPreferences</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*! @abstract The preference settings to be used by the web view.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">WKPreferences</span> *preferences;</span><br></pre></td></tr></table></figure><p>é’ˆå¯¹ web è§†å›¾çš„åå¥½è®¾ç½®ï¼Œå¦‚æœæ˜¯é’ˆå¯¹ web å†…å®¹çš„è®¾ç½®è¿˜æ˜¯ä½¿ç”¨ <code>WKWebViewConfiguration</code> ï¼Œæ„Ÿè§‰è¿™ä¸ªç±»è¿˜åœ¨å®Œå–„ã€æ‰©å……ä¸­ï¼Œå†…å®¹å¾ˆå°‘ã€‚æ¯”è¾ƒå€¼å¾—æ³¨æ„çš„æ˜¯ä¸ JavaScript æœ‰å…³çš„ä¸¤ä¸ªå±æ€§ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å­—ä½“</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> minimumFontSize;</span><br><span class="line"><span class="comment">//æ˜¯å¦å…è®¸åœ¨æ²¡æœ‰ç”¨æˆ·äº¤äº’çš„æƒ…å†µä¸‹ï¼ŒJavaScriptå¯ä»¥æ‰“å¼€windows</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">BOOL</span> javaScriptCanOpenWindowsAutomatically;</span><br><span class="line"><span class="comment">//æ˜¯å¦å¯ç”¨javaScriptï¼Œ14.0 ä»¥åå°±åºŸå¼ƒäº†ï¼Œæœ‰å¯¹åº”æ›¿æ¢çš„ API</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">BOOL</span> javaScriptEnabled;<span class="comment">//ios(8.0, 14.0)</span></span><br><span class="line"><span class="comment">//æ˜¯å¦æé†’ å¦‚ç½‘ç»œé’“é±¼æˆ–æ¶æ„è½¯ä»¶ ç­‰å¯ç–‘çš„æ¬ºè¯ˆå†…å®¹</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">BOOL</span> fraudulentWebsiteWarningEnabled;<span class="comment">//ios(13.0)</span></span><br></pre></td></tr></table></figure><h2 id="WKUserContentController"><a href="#WKUserContentController" class="headerlink" title="WKUserContentController"></a>WKUserContentController</h2><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*! @abstract The user content controller to associate with the web view.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">WKUserContentController</span> *userContentController;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç±»æä¾›äº†ä¸€ä¸ª JavaScript å‘ web view å‘é€æ¶ˆæ¯çš„é€”å¾„ï¼Œå¯ä»¥å¢åˆ ç”¨æˆ·è„šæœ¬ã€‚</p><p>JavaScript ä¸åŸç”Ÿåšäº¤äº’ï¼Œæ¯”è¾ƒå¤šçš„ä¸€ä¸ªåœºæ™¯æ˜¯éœ€è¦è°ƒç”¨åŸç”Ÿçš„æŸäº›èƒ½åŠ›ã€‚åœ¨ <code>UIWebView</code> ä¸­ç®€å•çš„æ–¹å¼æ˜¯æ‹¦æˆªè¯·æ±‚ï¼Œæ ¹æ®ç‰¹å®šçš„ scheme æˆ–è€…å‚æ•°æ¥åŒºåˆ†ï¼Œé‚£åœ¨ <code>WKWebView</code> ä¸­åˆ™æ˜¯é€šè¿‡ <code>WKUserContentController</code> æ·»åŠ æ¶ˆæ¯å¤„ç†å™¨ã€‚ä¾‹å¦‚æ‰“å¼€ç›¸æœºåŠŸèƒ½ï¼š</p><ul><li>æ·»åŠ è„šæœ¬å¤„ç†å™¨</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">WKUserContentController</span> *userContentController = [[<span class="built_in">WKUserContentController</span> alloc] init];</span><br><span class="line">[userContentController addScriptMessageHandler:<span class="keyword">self</span> name:<span class="string">@&quot;OpenCamera&quot;</span>];</span><br><span class="line"><span class="built_in">WKWebViewConfiguration</span> *configuration = [[<span class="built_in">WKWebViewConfiguration</span> alloc] init];</span><br><span class="line">configuration.userContentController = userContentController;</span><br></pre></td></tr></table></figure><ul><li>å®ç° WKScriptMessageHandler ä»£ç†çš„æ–¹æ³•</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> mark - WKScriptMessageHandler</span></span><br><span class="line">- (<span class="keyword">void</span>)userContentController:(<span class="built_in">WKUserContentController</span> *)userContentController didReceiveScriptMessage:(<span class="built_in">WKScriptMessage</span> *)message &#123;</span><br><span class="line">    <span class="keyword">if</span> ([message.name caseInsensitiveCompare:<span class="string">@&quot;OpenCamera&quot;</span>] == <span class="built_in">NSOrderedSame</span>) &#123;</span><br><span class="line">        <span class="comment">//Call your open camera action.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>JS ä¸­è°ƒç”¨</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.webkit.messageHandlers.OpenCamera.postMessage(<span class="comment">/*éœ€è¦ä¼ çš„å‚æ•°ï¼Œä¸¤ç«¯çº¦å®šå¥½*/</span>);</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬çœ‹åˆ°æ¥æ”¶ JavaScript çš„æ¶ˆæ¯æ˜¯é€šè¿‡ä¸€ä¸ª <code>WKScriptMessage</code> ç±»å‹ï¼Œæˆ‘ä»¬å†æ¥ç®€å•çœ‹ä¸‹è¿™ä¸ªç±»</p><h3 id="WKScriptMessage"><a href="#WKScriptMessage" class="headerlink" title="WKScriptMessage"></a>WKScriptMessage</h3><blockquote><p>A WKScriptMessage object contains information about a message sent from a webpage.</p></blockquote><p>ä»–çš„æ³¨é‡Šå°±å¾ˆç®€å•äº†ï¼šä¸€ä¸ªåŒ…å«ç½‘é¡µå‘æ¥çš„æ¶ˆæ¯å†…å®¹çš„å¯¹è±¡ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¶ˆæ¯ä½“ã€å‚æ•°ã€‚å…è®¸çš„ç±»å‹ NSNumber, NSString, NSDate, NSArray, NSDictionary, and NSNull.</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">copy</span>) <span class="keyword">id</span> body;</span><br><span class="line"><span class="comment">// å‘é€æ¶ˆæ¯çš„ web viewã€‚</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">weak</span>) <span class="built_in">WKWebView</span> *webView;</span><br><span class="line"><span class="comment">// å‰ç«¯ä¸­å‘é€æ¶ˆæ¯çš„ frameã€‚</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">copy</span>) <span class="built_in">WKFrameInfo</span> *frameInfo;</span><br><span class="line"><span class="comment">// ç”¨äºæ¥æ”¶å‰ç«¯æ¶ˆæ¯çš„å¤„ç†å™¨çš„åå­—ã€‚</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *name;</span><br><span class="line"><span class="comment">// The content world from which the message was sent. ï¼Ÿæˆ‘ä¹Ÿè¿˜æ²¡ç”¨è¿‡ä¸æ¸…æ¥šæ˜¯å¹²å˜›çš„ã€‚</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">WKContentWorld</span> *world API_AVAILABLE(macos(<span class="number">11.0</span>), ios(<span class="number">14.0</span>));</span><br></pre></td></tr></table></figure><h3 id="WKUserScript"><a href="#WKUserScript" class="headerlink" title="WKUserScript"></a>WKUserScript</h3><blockquote><p>A script that the web view injects into a webpage.</p></blockquote><p>å½“éœ€è¦å°†è‡ªå®šä¹‰è„šæœ¬ä»£ç æ³¨å…¥ Web é¡µé¢æ—¶ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª WKUserScript å¯¹è±¡ã€‚ä½¿ç”¨æ­¤å¯¹è±¡æŒ‡å®šè¦æ³¨å…¥çš„ JavaScript ä»£ç ï¼Œä»¥åŠä¸æ³¨å…¥è¯¥ä»£ç çš„æ—¶é—´å’Œæ–¹å¼ç›¸å…³çš„å‚æ•°ã€‚é€šè¿‡å‰é¢æåˆ°çš„ WKUserContentController è°ƒç”¨ <code>addUserScript:</code> å®Œæˆæ³¨å…¥ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">WKUserScript</span> : <span class="title">NSObject</span> &lt;<span class="title">NSCopying</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//JS ä»£ç </span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *source;</span><br><span class="line"><span class="comment">//JS æ³¨å…¥çš„æ—¶æœº</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>) <span class="built_in">WKUserScriptInjectionTime</span> injectionTime;</span><br><span class="line"><span class="comment">//æ˜¯å¦åªç”¨äºä¸»è§†å›¾</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">getter</span>=isForMainFrameOnly) <span class="built_in">BOOL</span> forMainFrameOnly;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–</span></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithSource:(<span class="built_in">NSString</span> *)source injectionTime:(<span class="built_in">WKUserScriptInjectionTime</span>)injectionTime forMainFrameOnly:(<span class="built_in">BOOL</span>)forMainFrameOnly;</span><br><span class="line"><span class="comment">//iOS14 æ–°å¢çš„ä¸€ä¸ªæ–¹æ³•ï¼ŒåŒºåˆ†JSçš„â€œä½œç”¨åŸŸâ€</span></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithSource:(<span class="built_in">NSString</span> *)source injectionTime:(<span class="built_in">WKUserScriptInjectionTime</span>)injectionTime forMainFrameOnly:(<span class="built_in">BOOL</span>)forMainFrameOnly inContentWorld:(<span class="built_in">WKContentWorld</span> *)contentWorld <span class="built_in">WK_API_AVAILABLE</span>(macos(<span class="number">11.0</span>), ios(<span class="number">14.0</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><h3 id="WKContentWorld"><a href="#WKContentWorld" class="headerlink" title="WKContentWorld"></a>WKContentWorld</h3><blockquote><p>An object that defines a scope of execution for JavaScript code, and which you use to prevent conflicts between different scripts.</p></blockquote><p>WKContentWorld æ˜¯ iOS 14 çš„æ–°å¢å†…å®¹ï¼Œå¯ä»¥ç†è§£ä¸ºä¸åŒçš„å‘½åç©ºé—´ã€ä¸åŒçš„è¿è¡Œç¯å¢ƒã€‚æ˜¾è€Œæ˜“è§çš„ï¼Œåœ¨é€»è¾‘ä¸Šï¼ŒåŸç”Ÿçš„ JS ç¯å¢ƒå’Œ web JS è¿è¡Œç¯å¢ƒå­˜åœ¨å‘½åå†²çªçš„å¯èƒ½ã€‚WKContentWorld æœ‰ä¸¤ä¸ªç±»å±æ€§ <code>defaultClientWorld</code> ã€<code>pageWorld</code>ï¼Œåˆ†åˆ«ä»£è¡¨åŸç”Ÿå’Œ web å®¹å™¨çš„ JS è¿è¡Œç©ºé—´ã€‚å¼€å‘è€…ä¹Ÿå¯ä»¥é€šè¿‡ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="built_in">WKContentWorld</span> *)worldWithName:(<span class="built_in">NSString</span> *)name;</span><br></pre></td></tr></table></figure><p>å·¥å‚æ–¹æ³•åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ JS è¿è¡Œç¯å¢ƒã€‚</p><h2 id="WKWebsiteDataStore"><a href="#WKWebsiteDataStore" class="headerlink" title="WKWebsiteDataStore"></a>WKWebsiteDataStore</h2><p>è¿™ä¸ªç±»è²Œä¼¼åŒ…å«äº†ä¸€ä¸ª web view çš„æ‰€æœ‰æ•°æ®ï¼Œæˆ‘çœ‹å®Œè¿™ä¸ªç±»çš„ä»‹ç»ï¼Œç¬¬ä¸€æ„Ÿè§‰æ˜¯ï¼Œå“‡ï¼Œæˆ‘å¯ä»¥çª¥æ¢ä¸€åˆ‡äº†ã€‚ç„¶è€Œï¼Œé™¤äº† cookieï¼Œä¸€æ¯›é’±éƒ½æ‹¿ä¸åˆ°â€¦â€¦ä¸è®²äº†ï¼Œæœ‰å…´è¶£è‡ªå·±è¯•å§~~</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(</span><br><span class="line">    <span class="built_in">WKWebsiteDataTypeDiskCache</span>,</span><br><span class="line">    <span class="built_in">WKWebsiteDataTypeOfflineWebApplicationCache</span>,</span><br><span class="line">    <span class="built_in">WKWebsiteDataTypeMemoryCache</span>,</span><br><span class="line">    <span class="built_in">WKWebsiteDataTypeLocalStorage</span>,</span><br><span class="line">    <span class="built_in">WKWebsiteDataTypeFetchCache</span>,</span><br><span class="line">    <span class="built_in">WKWebsiteDataTypeCookies</span>,</span><br><span class="line">    <span class="built_in">WKWebsiteDataTypeSessionStorage</span>,</span><br><span class="line">    <span class="built_in">WKWebsiteDataTypeIndexedDBDatabases</span>,</span><br><span class="line">    <span class="built_in">WKWebsiteDataTypeWebSQLDatabases</span>,</span><br><span class="line">    <span class="built_in">WKWebsiteDataTypeServiceWorkerRegistrations</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="WKHTTPCookieStore"><a href="#WKHTTPCookieStore" class="headerlink" title="WKHTTPCookieStore"></a>WKHTTPCookieStore</h2><blockquote><p> A WKHTTPCookieStore object allows managing the HTTP cookies associated with a particular WKWebsiteDataStore.</p><p> ç”¨æ¥ç®¡ç†ä¸ç‰¹å®š <code>WKWebsiteDataStore</code> ç›¸å…³è”çš„ HTTP cookieã€‚</p></blockquote><p>API çœ‹ä¸Šå»å¾ˆç®€å•â€¦ä½†è·å¾— cookie æ˜¯å¼‚æ­¥æ“ä½œï¼Œä¸ <code>NSHTTPCookieStorage</code> çš„åŒæ­¥æ“ä½œä¸åŒï¼Œå¤„ç†èµ·æ¥å¯èƒ½è¦æ³¨æ„ä¸‹ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)getAllCookies:(<span class="keyword">void</span> (^)(<span class="built_in">NSArray</span>&lt;<span class="built_in">NSHTTPCookie</span> *&gt; *))completionHandler;</span><br><span class="line">- (<span class="keyword">void</span>)setCookie:(<span class="built_in">NSHTTPCookie</span> *)cookie completionHandler:(<span class="keyword">nullable</span> <span class="keyword">void</span> (^)(<span class="keyword">void</span>))completionHandler;</span><br><span class="line">- (<span class="keyword">void</span>)deleteCookie:(<span class="built_in">NSHTTPCookie</span> *)cookie completionHandler:(<span class="keyword">nullable</span> <span class="keyword">void</span> (^)(<span class="keyword">void</span>))completionHandler;</span><br><span class="line">- (<span class="keyword">void</span>)addObserver:(<span class="keyword">id</span>&lt;<span class="built_in">WKHTTPCookieStoreObserver</span>&gt;)observer;</span><br><span class="line">- (<span class="keyword">void</span>)removeObserver:(<span class="keyword">id</span>&lt;<span class="built_in">WKHTTPCookieStoreObserver</span>&gt;)observer;</span><br></pre></td></tr></table></figure><p>å¯¹åº”è§‚å¯Ÿè€…çš„åè®®æ–¹æ³•ï¼š</p><p>åœ¨ cookie å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå¯ä»¥å¼‚æ­¥é€šçŸ¥ï¼Œä½†ç»æµ‹è¯•æ˜¯æœ‰ä¸€ç‚¹å»¶è¿Ÿçš„ï¼Œæœ‰å…´è¶£å¯ä»¥æµ‹ä¸€æµ‹ï¼Ÿ</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@protocol</span> <span class="title">WKHTTPCookieStoreObserver</span> &lt;<span class="title">NSObject</span>&gt;</span></span><br><span class="line"><span class="keyword">@optional</span></span><br><span class="line">- (<span class="keyword">void</span>)cookiesDidChangeInCookieStore:(<span class="built_in">WKHTTPCookieStore</span> *)cookieStore;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><h2 id="WKBackForwardList"><a href="#WKBackForwardList" class="headerlink" title="WKBackForwardList"></a>WKBackForwardList</h2><p>è®¿é—®è¿‡çš„ web é¡µé¢å†å²è®°å½•ã€‚</p><h2 id="WKNavigation"><a href="#WKNavigation" class="headerlink" title="WKNavigation"></a>WKNavigation</h2><p>WKNavigation å¯¹è±¡å¯ä»¥ç”¨æ¥äº†è§£ç½‘é¡µçš„åŠ è½½è¿›åº¦ã€‚é€šè¿‡ loadRequestã€goBack ç­‰æ–¹æ³•åŠ è½½é¡µé¢æ—¶ï¼Œå°†è¿”å›ä¸€ä¸ª WKNavigation å¯¹è±¡ã€‚é€šè¿‡ WKNavigationDelegate ä»£ç†çš„ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ï¼Œå¯ä»¥çŸ¥é“é¡µé¢çš„åŠ è½½æƒ…å†µã€‚WKNavigationDelegate ç¨åæˆ‘ä»¬å†è¯´ã€‚</p><h3 id="WKNavigationAction"><a href="#WKNavigationAction" class="headerlink" title="WKNavigationAction"></a>WKNavigationAction</h3><p>åŒ…å«ç½‘é¡µå¯¼èˆªä¿¡æ¯ï¼Œéœ€è¦æ®æ­¤æ˜¾ç¤ºå¯¹åº”çš„æ“ä½œç•Œé¢ã€‚</p><h3 id="WKFrameInfo"><a href="#WKFrameInfo" class="headerlink" title="WKFrameInfo"></a>WKFrameInfo</h3><p>æ ‡è¯†å½“å‰ç½‘é¡µå†…å®¹ä¿¡æ¯çš„å¯¹è±¡ã€‚</p><hr><h2 id="å…³äº-WKWebView-çš„å‡ ç¯‡æ–‡ç« ï¼š"><a href="#å…³äº-WKWebView-çš„å‡ ç¯‡æ–‡ç« ï¼š" class="headerlink" title="å…³äº WKWebView çš„å‡ ç¯‡æ–‡ç« ï¼š"></a><strong>å…³äº WKWebView çš„å‡ ç¯‡æ–‡ç« ï¼š</strong></h2><p><a href="/2021/12/01/WKWebView/">WKWebView åŸºç¡€ç¯‡</a><br><a href="/2021/12/02/WKWebView-Protocol/">WKWebView åè®®ç¯‡</a><br><a href="/2021/12/11/WKWebView-Use/">WKWebView å®æˆ˜ç¯‡</a></p><h2 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a><strong>Demo</strong></h2><p><a href="https://github.com/ATommyGirl/WebView">WebView çš„ Demo</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> WebView </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOS é‡ç­¾åè„šæœ¬</title>
      <link href="/2021/11/09/iOS%20%E9%87%8D%E7%AD%BE%E5%90%8D%E5%B7%A5%E5%85%B7/"/>
      <url>/2021/11/09/iOS%20%E9%87%8D%E7%AD%BE%E5%90%8D%E5%B7%A5%E5%85%B7/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¼ä¸šåº”ç”¨ç»å¸¸é‡åˆ°çš„ä¸€ä¸ªåœºæ™¯ï¼Œæ˜¯åªéœ€è¦é‡ç­¾åä¸éœ€è¦ä¿®æ”¹ä»£ç ï¼Œæˆ–è€…ä¸€äº›è€é¡¹ç›®ä¸ï¼ˆbuï¼‰æƒ³ï¼ˆganï¼‰ç”¨æ–°çš„ç¼–è¯‘ç¯å¢ƒå»æ‰“åŒ…ï¼Œé¿å…ä¸å¿…è¦çš„éº»çƒ¦~~ğŸ˜‚</p><p>æä¾›ä¸€ä¸ªé‡ç­¾åè„šæœ¬ <a href="https://github.com/ATommyGirl/ipa_resign"> ios_app_signature_tool.sh</a></p><h2 id="åªæ›´æ–°ç­¾å"><a href="#åªæ›´æ–°ç­¾å" class="headerlink" title="åªæ›´æ–°ç­¾å"></a>åªæ›´æ–°ç­¾å</h2><p>å¦‚æœåªéœ€è¦é‡ç­¾åï¼Œä¸éœ€è¦ä¿®æ”¹ç‰ˆæœ¬ä¿¡æ¯çš„è¯ï¼ŒæŒ‡å®šæ–°çš„æè¿°æ–‡ä»¶è·¯å¾„å’Œ ipa æ–‡ä»¶å³å¯ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh ios_app_signature_tool.sh -p /Users/tommy/Desktop/PP.mobileprovision old_ipa_1.0.3.ipa</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹ç‰ˆæœ¬å·"><a href="#ä¿®æ”¹ç‰ˆæœ¬å·" class="headerlink" title="ä¿®æ”¹ç‰ˆæœ¬å·"></a>ä¿®æ”¹ç‰ˆæœ¬å·</h2><p>å¦‚æœéœ€è¦ä¿®æ”¹ version å’Œ build ä¸¤ä¸ªä¿¡æ¯çš„è¯ï¼Œä½¿ç”¨ <code>-v</code> å’Œ <code>-b</code> ä¸¤ä¸ªå‚æ•°ï¼Œæ ¼å¼æ˜¯å­—ç¬¦ä¸²ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh ios_app_signature_tool.sh -p /Users/tommy/Desktop/PP.mobileprovision -v <span class="string">&#x27;1.0.4&#x27;</span> -b <span class="string">&#x27;20&#x27;</span> old_ipa_1.0.3.ipa</span><br></pre></td></tr></table></figure><h2 id="åŒ…å«-Extension"><a href="#åŒ…å«-Extension" class="headerlink" title="åŒ…å« Extension"></a>åŒ…å« Extension</h2><p>å¦‚æœ App åŒ…å«æ‰©å±•ä¹Ÿéœ€è¦ç»­ç­¾ï¼Œä½¿ç”¨ <code>-s</code> æŒ‡å®šå¤šä¸ªæè¿°æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh ios_app_signature_tool.sh -s /Users/tommy/Desktop/your-PPs-folder -v &#x27;1.0.4&#x27; -b &#x27;20&#x27; old_ipa_1.0.3.ipa</span><br></pre></td></tr></table></figure><h2 id="è„šæœ¬"><a href="#è„šæœ¬" class="headerlink" title="è„šæœ¬"></a>è„šæœ¬</h2><span id="more"></span><p>æˆ‘æ€•æœ‰äººä¸çŸ¥é“ç‚¹ä¸Šé¢çš„é“¾æ¥ï¼Œæ‰€ä»¥ç²˜ä¸€ä¸‹è„šæœ¬çš„ä»£ç ï¼Œå¾ˆé•¿å“¦ï¼Œå°å¿ƒæ»‘å“¦~~~ğŸ¤“</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚è€ƒï¼š</span></span><br><span class="line"><span class="comment"># ä¸´æ—¶æ–‡ä»¶ä½¿ç”¨è¯´æ˜ï¼šhttps://www.ruanyifeng.com/blog/2019/12/mktemp.html</span></span><br><span class="line"><span class="comment"># Checking Distribution Entitlementsï¼šhttps://developer.apple.com/library/archive/qa/qa1798/_index.html</span></span><br><span class="line"><span class="comment"># iOSçš„ipaåŒ…é‡ç­¾åï¼šhttps://blog.devlxx.com/2016/04/23/iOS%E7%9A%84ipa%E5%8C%85%E9%87%8D%E7%AD%BE%E5%90%8D/</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> <span class="literal">-euo</span> pipefail</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä» mobileprovision ä¸­æå–ä¿¡æ¯ =================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä» mobileprovision ä¸­æå– plist</span></span><br><span class="line">extract_mobileprovision_plist() &#123;</span><br><span class="line">    security cms <span class="literal">-D</span> <span class="literal">-i</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä» mobileprovision ä¸­æå– æŒ‡å®šå­—æ®µå†…å®¹</span></span><br><span class="line">extract_field_content() &#123;</span><br><span class="line">    local filename=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    local path=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">    local content</span><br><span class="line">    content=<span class="variable">$</span>(extract_mobileprovision_plist <span class="string">&quot;<span class="variable">$</span>&#123;filename&#125;&quot;</span> | plutil <span class="literal">-extract</span> <span class="string">&quot;<span class="variable">$</span>&#123;path&#125;&quot;</span> xml1 <span class="literal">-o</span> - -- -)</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;0&quot;</span> -<span class="type">ne</span> <span class="string">&quot;<span class="variable">$</span>?&quot;</span> ]]; then</span><br><span class="line">        content=<span class="string">&#x27;&quot;&quot;&#x27;</span></span><br><span class="line">    fi</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$content</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä» mobileprovision ä¸­æå– æŒ‡å®šå­—æ®µå€¼</span></span><br><span class="line">extract_field_value() &#123;</span><br><span class="line">    local filename=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    local path=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">    local val</span><br><span class="line">    val=<span class="variable">$</span>(extract_field_content <span class="string">&quot;<span class="variable">$</span>&#123;filename&#125;&quot;</span> <span class="string">&quot;<span class="variable">$</span>&#123;path&#125;&quot;</span> | plutil <span class="literal">-p</span> -- -)</span><br><span class="line">    eval <span class="string">&quot;echo \&quot;</span><span class="variable">$</span>&#123;val&#125;\<span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä» mobileprovision ä¸­æå– Entitlementsï¼Œæ ¼å¼ä¸º plistï¼Œå†…å®¹åœ¨ç­¾åæ—¶ä½¿ç”¨</span></span><br><span class="line">extract_entitlements() &#123;</span><br><span class="line">    local filename=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    local entitlements_val</span><br><span class="line">    entitlements_val=<span class="variable">$</span>(extract_field_content <span class="string">&quot;<span class="variable">$</span>&#123;filename&#125;&quot;</span> Entitlements)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$</span>&#123;entitlements_val&#125;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»æè¿°æ–‡ä»¶ä¸­è·å– æ˜¯å¦ä¸º In-House å‘å¸ƒæ–‡ä»¶</span></span><br><span class="line">extract_is_inhouse_profile() &#123;</span><br><span class="line">    local ret</span><br><span class="line">    ret=<span class="variable">$</span>(extract_field_value <span class="string">&quot;<span class="variable">$1</span>&quot;</span> ProvisionsAllDevices <span class="number">2</span>&gt;/dev/null || :)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$</span>&#123;ret&#125;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»æè¿°æ–‡ä»¶ä¸­è·å– BundleID</span></span><br><span class="line">extract_bundle_id() &#123;</span><br><span class="line">    extract_field_value <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="string">&#x27;Entitlements.application-identifier&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»æè¿°æ–‡ä»¶ä¸­è·å– TeamName</span></span><br><span class="line">extract_team_name() &#123;</span><br><span class="line">    extract_field_value <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="string">&#x27;TeamName&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤„ç† Info.plist ä¸­çš„ä¿¡æ¯ ======================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šç‰ˆæœ¬ CFBundleShortVersionString</span></span><br><span class="line">set_short_version() &#123;</span><br><span class="line">    local info_plist=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    local short_ver=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">    plutil <span class="operator">-replace</span> <span class="string">&#x27;CFBundleShortVersionString&#x27;</span> <span class="literal">-string</span> <span class="string">&quot;<span class="variable">$short_ver</span>&quot;</span> <span class="string">&quot;<span class="variable">$info_plist</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®š Build CFBundleVersion</span></span><br><span class="line">set_build_version() &#123;</span><br><span class="line">    local info_plist=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    local build_ver=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">    plutil <span class="operator">-replace</span> <span class="string">&#x27;CFBundleVersion&#x27;</span> <span class="literal">-string</span> <span class="string">&quot;<span class="variable">$build_ver</span>&quot;</span> <span class="string">&quot;<span class="variable">$info_plist</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»£ç è¿è¡Œä¸­çš„ä¸´æ—¶å˜é‡ ===========================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¶é—´æˆ³</span></span><br><span class="line">gen_timestamp() &#123;</span><br><span class="line">    <span class="comment"># ä»¥å½“å‰æ—¶é—´ä½œä¸ºæ—¶é—´æˆ³</span></span><br><span class="line">    local timestamp_cmd=<span class="string">&#x27;date +%Y%m%d%H%M%S&#x27;</span></span><br><span class="line">    local timestamp</span><br><span class="line">    timestamp=<span class="variable">$</span>(<span class="variable">$</span>&#123;timestamp_cmd&#125;)</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$</span>&#123;timestamp&#125;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å– ipa è§£å‹ç¼©ç›®å½•</span></span><br><span class="line">extract_ipa_folder() &#123;</span><br><span class="line">    local timestamp</span><br><span class="line">    timestamp=<span class="variable">$</span>(gen_timestamp)</span><br><span class="line">    local IPA_FILE=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    local folder_name</span><br><span class="line">    folder_name=<span class="string">&quot;<span class="variable">$TMP_WORKBENCH_ROOT</span>&quot;</span>/<span class="variable">$</span>(basename <span class="string">&quot;<span class="variable">$</span>&#123;IPA_FILE&#125;&quot;</span> .ipa)_<span class="variable">$</span>&#123;timestamp&#125;</span><br><span class="line">    mkdir <span class="literal">-p</span> <span class="string">&quot;<span class="variable">$TMP_WORKBENCH_ROOT</span>&quot;</span> || :</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$</span>&#123;folder_name&#125;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾åŒ¹é…çš„æè¿°æ–‡ä»¶ =============================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‰ç…§ BundleID æŸ¥æ‰¾åŒ¹é…çš„æè¿°æ–‡ä»¶</span></span><br><span class="line">search_mobileprovision() &#123;</span><br><span class="line">    <span class="comment"># å¦‚æœæŒ‡å®šäº†æè¿°æ–‡ä»¶ç›®å½•</span></span><br><span class="line">    <span class="keyword">if</span> [[ -<span class="type">d</span> <span class="string">&quot;<span class="variable">$</span>&#123;MOBILEPROVISION_PATH&#125;&quot;</span> ]]; then</span><br><span class="line">        <span class="comment"># echo MOBILEPROVISION_PATH &quot;$&#123;MOBILEPROVISION_PATH&#125;&quot; | subl</span></span><br><span class="line">        <span class="comment"># éå†æŒ‡å®šç›®å½•ä¸‹æ‰€æœ‰æè¿°æ–‡ä»¶</span></span><br><span class="line">        local mobileprovision_files</span><br><span class="line">        mobileprovision_files=<span class="variable">$</span>(find <span class="string">&quot;<span class="variable">$</span>&#123;MOBILEPROVISION_PATH&#125;&quot;</span> <span class="literal">-type</span> f <span class="literal">-name</span> <span class="string">&#x27;*.mobileprovision&#x27;</span>)</span><br><span class="line">        local old_ifs=<span class="variable">$</span>&#123;IFS&#125;</span><br><span class="line">        IFS=<span class="variable">$</span><span class="string">&#x27;\n&#x27;</span></span><br><span class="line">        local mobileprovision_files_array</span><br><span class="line">        mobileprovision_files_array=(<span class="variable">$</span>&#123;mobileprovision_files&#125;)</span><br><span class="line">        IFS=<span class="variable">$</span>&#123;old_ifs&#125;</span><br><span class="line">        <span class="comment"># åˆ¤æ–­æ˜¯å¦æ‰¾åˆ°äº†å†…å®¹</span></span><br><span class="line">        <span class="keyword">if</span> [[ <span class="string">&quot;0&quot;</span> -<span class="type">lt</span> <span class="string">&quot;<span class="variable">$</span>&#123;#mobileprovision_files_array[@]&#125;&quot;</span> ]]; then</span><br><span class="line">            <span class="comment"># éå†å¤„ç†</span></span><br><span class="line">            <span class="keyword">for</span> provision_file <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$</span>&#123;mobileprovision_files_array[@]&#125;&quot;</span>; <span class="keyword">do</span></span><br><span class="line">                <span class="comment"># è·å–æè¿°æ–‡ä»¶çš„ BundleID</span></span><br><span class="line">                local bundle_id</span><br><span class="line">                bundle_id=<span class="variable">$</span>(extract_bundle_id <span class="string">&quot;<span class="variable">$</span>&#123;provision_file&#125;&quot;</span>)</span><br><span class="line">                local is_inhouse_profile</span><br><span class="line">                is_inhouse_profile=<span class="variable">$</span>(extract_is_inhouse_profile <span class="string">&quot;<span class="variable">$</span>&#123;provision_file&#125;&quot;</span>)</span><br><span class="line">                <span class="comment"># åˆ¤æ–­æ˜¯å¦æ˜¯ In-House å‘å¸ƒè¯ä¹¦</span></span><br><span class="line">                <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$</span>&#123;is_inhouse_profile&#125;&quot;</span> != <span class="string">&quot;1&quot;</span> ]]; then</span><br><span class="line">                    <span class="keyword">continue</span></span><br><span class="line">                fi</span><br><span class="line">                <span class="comment"># åˆ¤æ–­æ˜¯å¦ä¸ä¼ å…¥çš„ BundleID åŒ¹é…</span></span><br><span class="line">                <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$</span>&#123;bundle_id&#125;&quot;</span> == <span class="string">&quot;<span class="variable">$1</span>&quot;</span> ]]; then</span><br><span class="line">                    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$</span>&#123;provision_file&#125;&quot;</span></span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                fi</span><br><span class="line">            done</span><br><span class="line">        fi</span><br><span class="line"></span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­¾åç›¸å…³ ======================================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ç­¾å</span></span><br><span class="line">remove_code_signature() &#123;</span><br><span class="line">    local code_signature_path=<span class="string">&quot;<span class="variable">$1</span>/_CodeSignature&quot;</span></span><br><span class="line">    <span class="keyword">if</span> [[ -<span class="type">d</span> <span class="string">&quot;<span class="variable">$</span>&#123;code_signature_path&#125;&quot;</span> ]]; then</span><br><span class="line">        <span class="built_in">rm</span> <span class="literal">-rf</span> <span class="string">&quot;<span class="variable">$</span>&#123;code_signature_path&#125;&quot;</span></span><br><span class="line">    fi</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»£ç ç­¾å</span></span><br><span class="line">sign_code() &#123;</span><br><span class="line">    local sign_path=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    <span class="comment"># åˆ é™¤åŸç­¾å</span></span><br><span class="line">    remove_code_signature <span class="string">&quot;<span class="variable">$</span>&#123;sign_path&#125;&quot;</span></span><br><span class="line">    <span class="comment"># è·å–æ—§çš„æè¿°æ–‡ä»¶</span></span><br><span class="line">    local old_profile=<span class="string">&quot;<span class="variable">$</span>&#123;sign_path&#125;/embedded.mobileprovision&quot;</span></span><br><span class="line">    <span class="comment"># è·å–åŸæ¥çš„ BundleID</span></span><br><span class="line">    local bundle_id</span><br><span class="line">    bundle_id=<span class="variable">$</span>(extract_bundle_id <span class="string">&quot;<span class="variable">$</span>&#123;old_profile&#125;&quot;</span>)</span><br><span class="line">    <span class="comment"># æ ¹æ® BundleID åœ¨æŒ‡å®šç›®å½•ä¸­æŸ¥æ‰¾æ–°çš„æè¿°æ–‡ä»¶</span></span><br><span class="line">    local new_profile</span><br><span class="line">    <span class="comment"># å¦‚æœå‘½ä»¤è¡Œä¸­æ˜ç¡®æŒ‡å®šäº†æè¿°æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> [[ -<span class="type">n</span> <span class="string">&quot;<span class="variable">$</span>&#123;MOBILEPROVISION_FILE&#125;&quot;</span> ]]; then</span><br><span class="line">        new_profile=<span class="string">&quot;<span class="variable">$</span>&#123;MOBILEPROVISION_FILE&#125;&quot;</span></span><br><span class="line">        <span class="comment"># å¦‚æœæŒ‡å®šçš„æè¿°æ–‡ä»¶ä¸å­˜åœ¨</span></span><br><span class="line">        <span class="keyword">if</span> [[ ! -<span class="type">f</span> <span class="string">&quot;<span class="variable">$</span>&#123;new_profile&#125;&quot;</span> ]]; then</span><br><span class="line">            <span class="built_in">echo</span> Provision profile <span class="string">&quot;<span class="variable">$</span>&#123;new_profile&#125;&quot;</span> not exists.</span><br><span class="line">            <span class="keyword">exit</span> <span class="number">1</span></span><br><span class="line">        fi</span><br><span class="line">    elif [[ -<span class="type">n</span> <span class="string">&quot;<span class="variable">$</span>&#123;MOBILEPROVISION_PATH&#125;&quot;</span> ]]; then</span><br><span class="line">        <span class="comment"># å¦‚æœå‘½ä»¤è¡Œä¸­æ²¡æœ‰æ˜ç¡®æŒ‡å®šæè¿°æ–‡ä»¶ï¼Œä½†æ˜ç¡®æŒ‡å®šäº†æè¿°æ–‡ä»¶çš„æœç´¢ä½ç½®</span></span><br><span class="line">        <span class="comment"># åˆ™åœ¨æŒ‡å®šè·¯å¾„ä¸­æœç´¢</span></span><br><span class="line">        new_profile=<span class="variable">$</span>(search_mobileprovision <span class="string">&quot;<span class="variable">$</span>&#123;bundle_id&#125;&quot;</span>)</span><br><span class="line">        <span class="comment"># åˆ¤æ–­æœç´¢æè¿°æ–‡ä»¶çš„ç»“æœ</span></span><br><span class="line">        <span class="keyword">if</span> [[ ! -<span class="type">f</span> <span class="string">&quot;<span class="variable">$</span>&#123;new_profile&#125;&quot;</span> ]]; then</span><br><span class="line">            <span class="built_in">echo</span> Provision profile not found.</span><br><span class="line">            <span class="keyword">exit</span> <span class="number">1</span></span><br><span class="line">        fi</span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¦‚æœæ‰¾åˆ°äº†æ–°çš„æè¿°æ–‡ä»¶åˆ™æ›¿æ¢æ—§çš„</span></span><br><span class="line">    <span class="keyword">if</span> [[ -<span class="type">n</span> <span class="string">&quot;<span class="variable">$</span>&#123;new_profile&#125;&quot;</span> ]]; then</span><br><span class="line">        <span class="built_in">cp</span> <span class="string">&quot;<span class="variable">$</span>&#123;new_profile&#125;&quot;</span> <span class="string">&quot;<span class="variable">$</span>&#123;old_profile&#125;&quot;</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="comment"># å¦‚æœæ²¡æ‰¾åˆ°æ–°çš„æè¿°æ–‡ä»¶åˆ™ç”¨æ—§çš„</span></span><br><span class="line">        new_profile=<span class="string">&quot;<span class="variable">$</span>&#123;old_profile&#125;&quot;</span></span><br><span class="line">    fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment"># echo -e &quot;Use \&quot;\033[94;1m$&#123;new_profile&#125;\033[0m\&quot; to sign...&quot;</span></span><br><span class="line">    <span class="comment"># ä»æè¿°æ–‡ä»¶ä¸­æå– Entitlements</span></span><br><span class="line">    entitlements_content=<span class="variable">$</span>(extract_entitlements <span class="string">&quot;<span class="variable">$</span>&#123;new_profile&#125;&quot;</span>)</span><br><span class="line">    <span class="comment"># ä¸´æ—¶æ–‡ä»¶</span></span><br><span class="line">    local tmp_entitlements_file</span><br><span class="line">    tmp_entitlements_file=<span class="variable">$</span>(mktemp)</span><br><span class="line">    <span class="comment"># ç”Ÿæˆ entitlements æ–‡ä»¶</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$</span>&#123;entitlements_content&#125;&quot;</span> &gt; <span class="string">&quot;<span class="variable">$</span>&#123;tmp_entitlements_file&#125;&quot;</span></span><br><span class="line">    <span class="comment"># è·å– TeamName</span></span><br><span class="line">    <span class="comment"># local team_name</span></span><br><span class="line">    <span class="comment"># team_name=$(extract_team_name &quot;$&#123;new_profile&#125;&quot;)</span></span><br><span class="line">    <span class="comment"># local sign_cert=&quot;iPhone Distribution: $&#123;team_name&#125;&quot;</span></span><br><span class="line">    local sign_cert=<span class="variable">$CERTIFICATE_NAME_FOR_SIGNING</span></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;\033[97;1m[Signing Information]\033[0m&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;    Bundle ID            : \033[93;1m<span class="variable">$</span>&#123;bundle_id&#125;\033[0m&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;    Provisioning Profile : \033[93;1m<span class="variable">$</span>&#123;new_profile&#125;\033[0m&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;    Signing Certificate  : \033[93;1m<span class="variable">$</span>&#123;sign_cert&#125;\033[0m&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;    entitlements.plist   : <span class="variable">$</span>&#123;tmp_entitlements_file&#125;&quot;</span></span><br><span class="line">    <span class="comment"># ç­¾å</span></span><br><span class="line">    local sign_cmd_line=<span class="string">&#x27;codesign -f -s &#x27;</span><span class="string">&quot;\&quot;</span><span class="variable">$</span>&#123;sign_cert&#125;\<span class="string">&quot;&quot;</span><span class="string">&#x27; \\\n         --entitlements &#x27;</span><span class="string">&quot;&#x27;<span class="variable">$</span>&#123;tmp_entitlements_file&#125;&#x27;&quot;</span><span class="string">&#x27; \\\n         &#x27;</span><span class="string">&quot;&#x27;<span class="variable">$</span>&#123;sign_path&#125;&#x27;&quot;</span></span><br><span class="line">    <span class="built_in">echo</span>    <span class="string">&quot;    Command line:&quot;</span></span><br><span class="line">    <span class="built_in">echo</span>    <span class="string">&quot;-----------------------------------------------------------------------------------------------&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;\033[92m<span class="variable">$</span>&#123;sign_cmd_line&#125;\033[0m&quot;</span></span><br><span class="line">    <span class="comment"># echo -e &quot;$&#123;sign_cmd_line&#125;&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;-----------------------------------------------------------------------------------------------&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># codesign -f -s &quot;$&#123;sign_cert&#125;&quot; --entitlements &quot;$&#123;tmp_entitlements_file&#125;&quot; &quot;$&#123;sign_path&#125;&quot;</span></span><br><span class="line">    <span class="comment"># local result=$(eval &quot;$&#123;sign_cmd_line&#125;&quot; 2&gt;&amp;1)</span></span><br><span class="line">    local result</span><br><span class="line">    result=<span class="variable">$</span>(codesign <span class="operator">-f</span> <span class="literal">-s</span> <span class="string">&quot;<span class="variable">$</span>&#123;sign_cert&#125;&quot;</span> -<span class="literal">-entitlements</span> <span class="string">&quot;<span class="variable">$</span>&#123;tmp_entitlements_file&#125;&quot;</span> <span class="string">&quot;<span class="variable">$</span>&#123;sign_path&#125;&quot;</span> <span class="number">2</span>&gt;&amp;<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;    Execution result     : \033[94;1m<span class="variable">$</span>&#123;result&#125;\033[0m&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># echo &quot;======&quot;</span></span><br><span class="line">    <span class="built_in">rm</span> <span class="string">&quot;<span class="variable">$</span>&#123;tmp_entitlements_file&#125;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ“ä½œç³»ç»Ÿåˆ¤æ–­ ==================================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥æ“ä½œç³»ç»Ÿåç§°æ˜¯å¦ä¸º Darwin</span></span><br><span class="line">check_os_type () &#123;</span><br><span class="line">    local os_name</span><br><span class="line">    os_name=<span class="variable">$</span>(uname <span class="literal">-s</span>)</span><br><span class="line">    test <span class="string">&#x27;Darwin&#x27;</span> == <span class="string">&quot;<span class="variable">$os_name</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥æ“ä½œç³»ç»Ÿä¸»ç‰ˆæœ¬æ˜¯å¦å¤§äº 19</span></span><br><span class="line">check_os_release () &#123;</span><br><span class="line">    local os_release</span><br><span class="line">    os_release=<span class="variable">$</span>(uname <span class="literal">-r</span>)</span><br><span class="line">    <span class="comment"># ä»¥ . ä½œä¸ºåˆ†éš”ç¬¦ï¼Œå°†ç‰ˆæœ¬å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºæ•°ç»„ï¼Œå–æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå€¼ä½œä¸ºä¸»ç‰ˆæœ¬å·</span></span><br><span class="line">    <span class="comment"># å…¶ä¸­ // å’Œ / çš„åŒºåˆ«åœ¨äºï¼Œä¸¤ä¸ªæ–œæ æ›¿æ¢æ‰€æœ‰æŒ‡å®šå­—ç¬¦ï¼Œä¸€ä¸ªæ–œæ åªæ›¿æ¢å‡ºç°çš„ç¬¬ä¸€ä¸ªå­—ç¬¦</span></span><br><span class="line">    <span class="comment"># å‚è€ƒ https://blog.csdn.net/github_33736971/article/details/53980123</span></span><br><span class="line">    local str_arr=(<span class="variable">$</span>&#123;os_release//./<span class="string">&#x27; &#x27;</span>&#125;)</span><br><span class="line">    local main_ver=<span class="variable">$</span>&#123;str_arr[<span class="number">0</span>]&#125;</span><br><span class="line">    test <span class="number">19</span> <span class="operator">-lt</span> <span class="variable">$main_ver</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä» ipa ä¸­ç›´æ¥æå–éƒ¨åˆ†ä¿¡æ¯ ======================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä» mobileprovision ä¸­æå– æŒ‡å®šå­—æ®µå†…å®¹</span></span><br><span class="line">extract_field_content_from_plist_content() &#123;</span><br><span class="line">    local plist_content=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    local path=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">    local content</span><br><span class="line">    content=<span class="variable">$</span>(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$plist_content</span>&quot;</span> | plutil <span class="literal">-extract</span> <span class="string">&quot;<span class="variable">$</span>&#123;path&#125;&quot;</span> xml1 <span class="literal">-o</span> - -- -)</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;0&quot;</span> -<span class="type">ne</span> <span class="string">&quot;<span class="variable">$</span>?&quot;</span> ]]; then</span><br><span class="line">        content=<span class="string">&#x27;&quot;&quot;&#x27;</span></span><br><span class="line">    fi</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$content</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æå–æ•°ç»„å­—æ®µå€¼ï¼Œä»¥ JSON æ•°ç»„å½¢å¼å±•ç¤º</span></span><br><span class="line">extract_field_value_array_from_plist_content() &#123;</span><br><span class="line">    local plist_content=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    local path=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">    local val</span><br><span class="line">    val=<span class="variable">$</span>(extract_field_content_from_plist_content <span class="string">&quot;<span class="variable">$</span>&#123;plist_content&#125;&quot;</span> <span class="string">&quot;<span class="variable">$</span>&#123;path&#125;&quot;</span> | plutil <span class="literal">-convert</span> json <span class="literal">-o</span> - -- -)</span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;0&quot;</span> -<span class="type">ne</span> <span class="string">&quot;<span class="variable">$</span>?&quot;</span> ]]; then</span><br><span class="line">        val=<span class="string">&#x27;[]&#x27;</span></span><br><span class="line">    fi</span><br><span class="line">    eval <span class="string">&quot;echo \&quot;</span><span class="variable">$</span>&#123;val&#125;\<span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä» mobileprovision ä¸­æå– æŒ‡å®šå­—æ®µå€¼</span></span><br><span class="line">extract_field_value_from_plist_content() &#123;</span><br><span class="line">    local plist_content=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    local path=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">    local val</span><br><span class="line">    val=<span class="variable">$</span>(extract_field_content_from_plist_content <span class="string">&quot;<span class="variable">$</span>&#123;plist_content&#125;&quot;</span> <span class="string">&quot;<span class="variable">$</span>&#123;path&#125;&quot;</span> | plutil <span class="literal">-p</span> -- -)</span><br><span class="line">    eval <span class="string">&quot;echo \&quot;</span><span class="variable">$</span>&#123;val&#125;\<span class="string">&quot;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å– ipa ä¿¡æ¯</span></span><br><span class="line">ipa_basic_info() &#123;</span><br><span class="line"></span><br><span class="line">    local ipa_file=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    local INFO_PLIST</span><br><span class="line">    INFO_PLIST=<span class="variable">$</span>(unzip <span class="literal">-p</span> <span class="string">&quot;<span class="variable">$ipa_file</span>&quot;</span> <span class="string">&quot;Payload/*.app/Info.plist&quot;</span> | plutil <span class="literal">-convert</span> xml1 <span class="literal">-o</span> - -- -)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Name</span></span><br><span class="line">    local bundle_name</span><br><span class="line">    bundle_name=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$INFO_PLIST</span>&quot;</span> CFBundleName)</span><br><span class="line">    local display_name</span><br><span class="line">    display_name=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$INFO_PLIST</span>&quot;</span> CFBundleDisplayName)</span><br><span class="line">    <span class="built_in">echo</span> Name: ^<span class="string">&quot;<span class="variable">$bundle_name</span>(<span class="variable">$display_name</span>)&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Version</span></span><br><span class="line">    local short_ver</span><br><span class="line">    short_ver=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$INFO_PLIST</span>&quot;</span> CFBundleShortVersionString)</span><br><span class="line">    local bundle_ver</span><br><span class="line">    bundle_ver=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$INFO_PLIST</span>&quot;</span> CFBundleVersion)</span><br><span class="line">    <span class="built_in">echo</span> Version: ^<span class="string">&quot;<span class="variable">$short_ver</span>(<span class="variable">$bundle_ver</span>)&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># BundleID</span></span><br><span class="line">    local bundl_id</span><br><span class="line">    bundl_id=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$INFO_PLIST</span>&quot;</span> CFBundleIdentifier)</span><br><span class="line">    <span class="built_in">echo</span> Bundle ID: ^<span class="variable">$bundl_id</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># SDK</span></span><br><span class="line">    local sdk_name</span><br><span class="line">    sdk_name=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$INFO_PLIST</span>&quot;</span> DTSDKName)</span><br><span class="line">    local sdk_ver</span><br><span class="line">    sdk_ver=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$INFO_PLIST</span>&quot;</span> DTSDKBuild)</span><br><span class="line">    <span class="built_in">echo</span> SDK: ^<span class="string">&quot;<span class="variable">$sdk_name</span>(<span class="variable">$sdk_ver</span>)&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># MinimumOSVersion</span></span><br><span class="line">    local min_os</span><br><span class="line">    min_os=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$INFO_PLIST</span>&quot;</span> MinimumOSVersion)</span><br><span class="line">    <span class="built_in">echo</span> Minimum OS Version: ^<span class="variable">$min_os</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># NSAppTransportSecurity</span></span><br><span class="line">    local allows_arbitrary_loads</span><br><span class="line">    allows_arbitrary_loads=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$INFO_PLIST</span>&quot;</span> NSAppTransportSecurity.NSAllowsArbitraryLoads)</span><br><span class="line">    <span class="built_in">echo</span> Allows Arbitrary Loads: ^<span class="variable">$allows_arbitrary_loads</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Xcode</span></span><br><span class="line">    local xcode_ver</span><br><span class="line">    xcode_ver=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$INFO_PLIST</span>&quot;</span> DTXcode)</span><br><span class="line">    local xcode_build</span><br><span class="line">    xcode_build=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$INFO_PLIST</span>&quot;</span> DTXcodeBuild)</span><br><span class="line">    <span class="built_in">echo</span> Xcode: ^<span class="string">&quot;<span class="variable">$xcode_ver</span>(<span class="variable">$xcode_build</span>)&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Machine</span></span><br><span class="line">    local machine_os_build</span><br><span class="line">    machine_os_build=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$INFO_PLIST</span>&quot;</span> BuildMachineOSBuild)</span><br><span class="line">    <span class="built_in">echo</span> Build Machine OS Build: ^<span class="variable">$machine_os_build</span></span><br><span class="line"></span><br><span class="line">    local back_modes</span><br><span class="line">    back_modes=<span class="variable">$</span>(extract_field_value_array_from_plist_content <span class="string">&quot;<span class="variable">$INFO_PLIST</span>&quot;</span> UIBackgroundModes)</span><br><span class="line">    eval <span class="string">&quot;echo Background Modes: ^\&quot;</span><span class="variable">$back_modes</span>\<span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å– provision ä¿¡æ¯</span></span><br><span class="line">provision_info() &#123;</span><br><span class="line">    local ipa_file=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    local PLIST_IN_MOBILEPROVISION</span><br><span class="line">    PLIST_IN_MOBILEPROVISION=<span class="variable">$</span>(unzip <span class="literal">-p</span> <span class="string">&quot;<span class="variable">$ipa_file</span>&quot;</span> <span class="string">&quot;Payload/*.app/embedded.mobileprovision&quot;</span> | security cms <span class="literal">-D</span>)</span><br><span class="line"></span><br><span class="line">    local provision_app_id_name</span><br><span class="line">    provision_app_id_name=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$PLIST_IN_MOBILEPROVISION</span>&quot;</span> AppIDName)</span><br><span class="line">    <span class="built_in">echo</span> App ID Name: ^<span class="variable">$provision_app_id_name</span></span><br><span class="line"></span><br><span class="line">    local provision_name</span><br><span class="line">    provision_name=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$PLIST_IN_MOBILEPROVISION</span>&quot;</span> Name)</span><br><span class="line">    <span class="built_in">echo</span> Name: ^<span class="variable">$provision_name</span></span><br><span class="line"></span><br><span class="line">    local provision_platform</span><br><span class="line">    provision_platform=<span class="variable">$</span>(extract_field_value_array_from_plist_content <span class="string">&quot;<span class="variable">$PLIST_IN_MOBILEPROVISION</span>&quot;</span> Platform)</span><br><span class="line">    <span class="built_in">echo</span> Platform: ^<span class="variable">$provision_platform</span></span><br><span class="line"></span><br><span class="line">    local provision_is_xcode_managed</span><br><span class="line">    provision_is_xcode_managed=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$PLIST_IN_MOBILEPROVISION</span>&quot;</span> IsXcodeManaged)</span><br><span class="line">    <span class="built_in">echo</span> Is Xcode Managed: ^<span class="variable">$provision_is_xcode_managed</span></span><br><span class="line"></span><br><span class="line">    local provision_creation_date</span><br><span class="line">    provision_creation_date=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$PLIST_IN_MOBILEPROVISION</span>&quot;</span> CreationDate)</span><br><span class="line">    <span class="built_in">echo</span> Creation Date: ^<span class="variable">$provision_creation_date</span></span><br><span class="line"></span><br><span class="line">    local provision_expiration_date</span><br><span class="line">    provision_expiration_date=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$PLIST_IN_MOBILEPROVISION</span>&quot;</span> ExpirationDate)</span><br><span class="line">    <span class="built_in">echo</span> Expiration Date: ^<span class="variable">$provision_expiration_date</span></span><br><span class="line"></span><br><span class="line">    local provision_team_identifier</span><br><span class="line">    provision_team_identifier=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$PLIST_IN_MOBILEPROVISION</span>&quot;</span> <span class="string">&#x27;Entitlements.com\.apple\.developer\.team-identifier&#x27;</span>)</span><br><span class="line">    <span class="built_in">echo</span> Team Identifier: ^<span class="variable">$provision_team_identifier</span></span><br><span class="line"></span><br><span class="line">    local provision_team_name</span><br><span class="line">    provision_team_name=<span class="variable">$</span>(extract_field_value_from_plist_content <span class="string">&quot;<span class="variable">$PLIST_IN_MOBILEPROVISION</span>&quot;</span> TeamName)</span><br><span class="line">    <span class="built_in">echo</span> Team Name: ^<span class="variable">$provision_team_name</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å– è¯ä¹¦ ä¿¡æ¯</span></span><br><span class="line">certificate_info() &#123;</span><br><span class="line">    local ipa_file=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    local PLIST_IN_MOBILEPROVISION</span><br><span class="line">    PLIST_IN_MOBILEPROVISION=<span class="variable">$</span>(extract_plist_in_embedded_mobileprovision <span class="string">&quot;<span class="variable">$ipa_file</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç¬¬ä¸€ä¸ªè¯ä¹¦çš„ Base64 ç¼–ç </span></span><br><span class="line">    local dev_cer0</span><br><span class="line">    dev_cer0=<span class="variable">$</span>(extract_field_content_from_plist_content <span class="string">&quot;<span class="variable">$PLIST_IN_MOBILEPROVISION</span>&quot;</span> <span class="string">&#x27;DeveloperCertificates.0&#x27;</span> | tr <span class="literal">-d</span> <span class="string">&#x27;\n&#x27;</span> | sed <span class="literal">-r</span> <span class="string">&#x27;s/.*&lt;data&gt;(.*)&lt;\/data&gt;.*/\1/g&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># èµ·å§‹æœ‰æ•ˆæœŸ</span></span><br><span class="line">    local cert_start_date</span><br><span class="line">    cert_start_date=<span class="variable">$</span>(<span class="built_in">echo</span> <span class="variable">$dev_cer0</span> | base64 -<span class="literal">-decode</span> | openssl x509 <span class="literal">-inform</span> der <span class="literal">-noout</span> <span class="literal">-startdate</span> | sed <span class="literal">-r</span> <span class="string">&#x27;s/notBefore=(.*)/\1/g&#x27;</span>)</span><br><span class="line">    <span class="built_in">echo</span> Not Before: ^<span class="variable">$cert_start_date</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç»“æŸæœ‰æ•ˆæœŸ</span></span><br><span class="line">    local cert_end_date</span><br><span class="line">    cert_end_date=<span class="variable">$</span>(<span class="built_in">echo</span> <span class="variable">$dev_cer0</span> | base64 -<span class="literal">-decode</span> | openssl x509 <span class="literal">-inform</span> der <span class="literal">-noout</span> <span class="literal">-enddate</span> | sed <span class="literal">-r</span> <span class="string">&#x27;s/notAfter=(.*)/\1/g&#x27;</span>)</span><br><span class="line">    <span class="built_in">echo</span> Not After: ^<span class="variable">$cert_end_date</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä¸»é¢˜</span></span><br><span class="line">    local cert_subject</span><br><span class="line">    cert_subject=<span class="variable">$</span>(<span class="built_in">echo</span> <span class="variable">$dev_cer0</span> | base64 -<span class="literal">-decode</span> | openssl x509 <span class="literal">-inform</span> der <span class="literal">-noout</span> <span class="literal">-subject</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä» ä¸»é¢˜ ä¸­æå– UID</span></span><br><span class="line">    local cert_uid</span><br><span class="line">    cert_uid=<span class="variable">$</span>(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$cert_subject</span>&quot;</span> | sed <span class="literal">-r</span> <span class="string">&#x27;s/.*UID=(.*)?\/CN=.*/\1/g&#x27;</span>)</span><br><span class="line">    <span class="built_in">echo</span> UID: ^<span class="variable">$cert_uid</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ä» ä¸»é¢˜ ä¸­æå– CN</span></span><br><span class="line">    local cert_cn</span><br><span class="line">    cert_cn=<span class="variable">$</span>(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$cert_subject</span>&quot;</span> | sed <span class="literal">-r</span> <span class="string">&#x27;s/.*CN=(.*)?\/OU=.*/\1/g&#x27;</span>)</span><br><span class="line">    <span class="built_in">echo</span> Common Name: ^<span class="variable">$cert_cn</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">extract_plist_in_embedded_mobileprovision() &#123;</span><br><span class="line">    local ipa_file=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line">    unzip <span class="literal">-p</span> <span class="string">&quot;<span class="variable">$ipa_file</span>&quot;</span> <span class="string">&quot;Payload/*.app/embedded.mobileprovision&quot;</span> | security cms <span class="literal">-D</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">show_package_info () &#123;</span><br><span class="line"></span><br><span class="line">    local ipa_file=<span class="string">&quot;<span class="variable">$1</span>&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;\033[97;1miOS App Package:\033[0m&quot;</span> <span class="string">&quot;<span class="variable">$ipa_file</span>&quot;</span></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;\033[97;1m[App Information]\033[0m&quot;</span></span><br><span class="line">    ipa_basic_info <span class="string">&quot;<span class="variable">$ipa_file</span>&quot;</span> | column <span class="literal">-ts</span>^</span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;\033[97;1m[Provisioning Information]\033[0m&quot;</span></span><br><span class="line">    provision_info <span class="string">&quot;<span class="variable">$ipa_file</span>&quot;</span> | column <span class="literal">-ts</span>^</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;\033[97;1m[Certificate Information]\033[0m&quot;</span></span><br><span class="line">    certificate_info <span class="string">&quot;<span class="variable">$ipa_file</span>&quot;</span> | column <span class="literal">-ts</span>^</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># UI ===========================================================================</span></span><br><span class="line"><span class="comment"># é€‰æ‹©è¯ä¹¦</span></span><br><span class="line">select_certificate() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è·å–æ‰€æœ‰å¯ç”¨äºç­¾åçš„è¯ä¹¦</span></span><br><span class="line">    local certs</span><br><span class="line">    certs=<span class="variable">$</span>(security <span class="built_in">find-identity</span> <span class="literal">-v</span> <span class="literal">-p</span> codesigning)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®—æœ‰æ•ˆè¡Œæ•°</span></span><br><span class="line">    local line_count=<span class="variable">$</span>(( <span class="variable">$</span>(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$certs</span>&quot;</span> | wc <span class="literal">-l</span>) - <span class="number">1</span> ))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ é™¤æ— ç”¨è¡Œ</span></span><br><span class="line">    certs=<span class="variable">$</span>(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$certs</span>&quot;</span> | head <span class="literal">-n</span> <span class="variable">$line_count</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨äºç­¾åçš„è¯ä¹¦</span></span><br><span class="line">    local prompt_text</span><br><span class="line">    prompt_text=<span class="variable">$</span>(<span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;<span class="variable">$</span>&#123;certs&#125;\nSelect a certificate for signing: &quot;</span>)</span><br><span class="line"></span><br><span class="line">    local selected_cert=<span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> [[ -<span class="type">z</span> <span class="string">&quot;<span class="variable">$selected_cert</span>&quot;</span> ]]; <span class="keyword">do</span></span><br><span class="line"></span><br><span class="line">        read <span class="literal">-p</span> <span class="string">&quot;<span class="variable">$prompt_text</span>&quot;</span> sel_cert_id</span><br><span class="line"></span><br><span class="line">        prompt_text=<span class="string">&#x27;Select a certificate for signing: &#x27;</span></span><br><span class="line"></span><br><span class="line">        search_text=<span class="string">&quot;^  <span class="variable">$</span>&#123;sel_cert_id&#125;)&quot;</span></span><br><span class="line"></span><br><span class="line">        selected_cert=<span class="variable">$</span>(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$certs</span>&quot;</span> | grep <span class="string">&quot;<span class="variable">$search_text</span>&quot;</span>)</span><br><span class="line">    done</span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$selected_cert</span>&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># =================================== ä¸»ç¨‹åº ===================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ¤æ–­æ“ä½œç³»ç»Ÿç±»å‹</span></span><br><span class="line">check_os_type</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$</span>?&quot;</span> -<span class="type">ne</span> <span class="string">&quot;0&quot;</span> ]]; then</span><br><span class="line">    <span class="built_in">echo</span> The OS must be <span class="string">&#x27;Darwin&#x27;</span>.</span><br><span class="line">    <span class="keyword">exit</span> <span class="number">1</span></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ¤æ–­æ“ä½œç³»ç»Ÿ release ç‰ˆæœ¬</span></span><br><span class="line">check_os_release</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$</span>?&quot;</span> -<span class="type">ne</span> <span class="string">&quot;0&quot;</span> ]]; then</span><br><span class="line">    <span class="built_in">echo</span> The OS release version at lease <span class="string">&#x27;Darwin 11&#x27;</span>.</span><br><span class="line">    <span class="keyword">exit</span> <span class="number">1</span></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®°å½•å¼€å§‹æ—¶é—´</span></span><br><span class="line">start_time=<span class="variable">$</span>(date +%s)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šä¸´æ—¶å·¥ä½œç›®å½•çš„ä½ç½®</span></span><br><span class="line">TMP_WORKBENCH_ROOT=<span class="string">&#x27;/tmp/ipa_signer&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å‚æ•°ä¸ªæ•°</span></span><br><span class="line"><span class="comment"># echo $#</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–å˜é‡</span></span><br><span class="line"><span class="comment"># ipa æ–‡ä»¶</span></span><br><span class="line">IPA_FILE=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># æŒ‡å®šçš„ Mobile Provision Profile ç›®å½•</span></span><br><span class="line">MOBILEPROVISION_PATH=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># æŒ‡å®šçš„ Mobile Provision Profile æ–‡ä»¶</span></span><br><span class="line">MOBILEPROVISION_FILE=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># ç‰ˆæœ¬å·</span></span><br><span class="line">IPA_SHORT_VERSION=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># Build å·</span></span><br><span class="line">IPA_BUILD_VERSION=<span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="comment"># åªæ˜¾ç¤º å®‰è£…åŒ… ä¿¡æ¯</span></span><br><span class="line">SHOW_IPA_INFO_ONLY=false</span><br><span class="line"><span class="comment"># æ˜¯å¦éœ€è¦é€‰æ‹©è¯ä¹¦</span></span><br><span class="line">NEED_SELECT_CERTIFICATE=false</span><br><span class="line"><span class="comment"># åªæå– embedded.mobileprovision ä¸­çš„ plist</span></span><br><span class="line">EXTRACT_PLIST_IN_EMBEDDED_MOBILEPROVISION_ONLY=false</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤„ç†è„šæœ¬å‚æ•°</span></span><br><span class="line"><span class="comment"># -p Mobile Provision Profile æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># -s Mobile Provision Profile æ‰€åœ¨ç›®å½•</span></span><br><span class="line"><span class="comment"># -v ç‰ˆæœ¬</span></span><br><span class="line"><span class="comment"># -b Build ä¿¡æ¯</span></span><br><span class="line"><span class="comment"># -i åªæ˜¾ç¤º ipa ä¿¡æ¯ï¼Œç„¶åé€€å‡º</span></span><br><span class="line"><span class="comment"># -c é€‰æ‹©è¯ä¹¦</span></span><br><span class="line"><span class="comment"># -e åªæå– embedded.mobileprovision ä¸­çš„ plist</span></span><br><span class="line"><span class="keyword">while</span> getopts <span class="string">&quot;:s:p:v:b:ice&quot;</span> opt</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    case <span class="string">&quot;<span class="variable">$opt</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">        <span class="string">&#x27;s&#x27;</span>)</span><br><span class="line">            MOBILEPROVISION_PATH=<span class="string">&quot;<span class="variable">$OPTARG</span>&quot;</span></span><br><span class="line">            <span class="comment"># åœ¨é€šè¿‡å‘½ä»¤è¡Œæ˜ç¡®æŒ‡å®šæè¿°æ–‡ä»¶æœç´¢è·¯å¾„çš„æ—¶å€™ï¼Œè¦æ±‚é€‰æ‹©è¯ä¹¦</span></span><br><span class="line">            NEED_SELECT_CERTIFICATE=true</span><br><span class="line">            ;;</span><br><span class="line">        <span class="string">&#x27;p&#x27;</span>)</span><br><span class="line">            MOBILEPROVISION_FILE=<span class="string">&quot;<span class="variable">$OPTARG</span>&quot;</span></span><br><span class="line">            <span class="comment"># åœ¨é€šè¿‡å‘½ä»¤è¡Œæ˜ç¡®æŒ‡å®šæè¿°æ–‡ä»¶çš„æ—¶å€™ï¼Œè¦æ±‚é€‰æ‹©è¯ä¹¦</span></span><br><span class="line">            NEED_SELECT_CERTIFICATE=true</span><br><span class="line">            ;;</span><br><span class="line">        <span class="string">&#x27;v&#x27;</span>)</span><br><span class="line">            IPA_SHORT_VERSION=<span class="string">&quot;<span class="variable">$OPTARG</span>&quot;</span></span><br><span class="line">            ;;</span><br><span class="line">        <span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">            IPA_BUILD_VERSION=<span class="string">&quot;<span class="variable">$OPTARG</span>&quot;</span></span><br><span class="line">            ;;</span><br><span class="line">        <span class="string">&#x27;i&#x27;</span>)</span><br><span class="line">            SHOW_IPA_INFO_ONLY=true</span><br><span class="line">            ;;</span><br><span class="line">        <span class="string">&#x27;c&#x27;</span>)</span><br><span class="line">            NEED_SELECT_CERTIFICATE=true</span><br><span class="line">            ;;</span><br><span class="line">        <span class="string">&#x27;e&#x27;</span>)</span><br><span class="line">            EXTRACT_PLIST_IN_EMBEDDED_MOBILEPROVISION_ONLY=true</span><br><span class="line">            ;;</span><br><span class="line">        ?)</span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;Unknown arguments.&quot;</span></span><br><span class="line">            <span class="keyword">exit</span> <span class="number">1</span></span><br><span class="line">            ;;</span><br><span class="line">    esac</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤å·²è§£æçš„å‚æ•°</span></span><br><span class="line">shift <span class="variable">$</span>((OPTIND<span class="literal">-1</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ipa æ–‡ä»¶</span></span><br><span class="line">IPA_FILE=<span class="variable">$</span>&#123;<span class="number">1</span>-<span class="string">&#x27;&#x27;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ²¡æœ‰æŒ‡å®š ipa æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">if</span> [[ -<span class="type">z</span> <span class="string">&quot;<span class="variable">$</span>&#123;IPA_FILE&#125;&quot;</span> ]]; then</span><br><span class="line">    <span class="built_in">cat</span> &lt;&lt; EOF</span><br><span class="line"></span><br><span class="line">Usage:</span><br><span class="line">  <span class="variable">$</span>(basename <span class="string">&quot;<span class="variable">$0</span>&quot;</span>) [<span class="type">options</span>] &lt;ipa_file&gt;</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  <span class="literal">-i</span>                                 Show ipa information only.</span><br><span class="line">  <span class="literal">-c</span>                                 Choose a certificate <span class="keyword">for</span> signing.</span><br><span class="line">  <span class="literal">-e</span>                                 Extract <span class="string">&#x27;plist&#x27;</span> content from <span class="string">&#x27;embedded.mobileprovision&#x27;</span> file.</span><br><span class="line">  <span class="literal">-p</span> &lt;provisioning_profile_file&gt;     Choose a provision profile <span class="keyword">for</span> signing.</span><br><span class="line">  <span class="literal">-s</span> &lt;provisioning_profiles_folder&gt;  Specify the directory to search <span class="keyword">for</span> the mobile provision profile.</span><br><span class="line">  <span class="literal">-v</span> &lt;version&gt;                       Specify the <span class="string">&#x27;Bundle version string (CFBundleShortVersionString)&#x27;</span> of the ipa file.</span><br><span class="line">  <span class="literal">-b</span> &lt;build_version&gt;                 Specify the <span class="string">&#x27;Bundle version (CFBundleVersion)&#x27;</span> of the ipa file.</span><br><span class="line"></span><br><span class="line">EOF</span><br><span class="line">    <span class="keyword">exit</span></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="comment"># ipa æ–‡ä»¶ä¸å­˜åœ¨</span></span><br><span class="line"><span class="keyword">if</span> [[ ! -<span class="type">f</span> <span class="string">&quot;<span class="variable">$</span>&#123;IPA_FILE&#125;&quot;</span> ]]; then</span><br><span class="line">    <span class="built_in">echo</span> File not exists.</span><br><span class="line">    <span class="keyword">exit</span> <span class="number">1</span></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»å®‰è£…åŒ…çš„ embedded.mobileprovision ä¸­æå– plist</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$EXTRACT_PLIST_IN_EMBEDDED_MOBILEPROVISION_ONLY</span> == <span class="type">true</span> ]]; then</span><br><span class="line">    extract_plist_in_embedded_mobileprovision <span class="string">&quot;<span class="variable">$</span>&#123;IPA_FILE&#125;&quot;</span></span><br><span class="line">    <span class="keyword">exit</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="comment"># è·å–åŸå§‹ ipa ç­¾åè¯ä¹¦ä¿¡æ¯</span></span><br><span class="line">    ORIGINAL_CERTIFICATE_NAME=<span class="variable">$</span>(certificate_info  <span class="string">&quot;<span class="variable">$</span>&#123;IPA_FILE&#125;&quot;</span> | grep <span class="string">&#x27;Common Name: ^&#x27;</span> | sed <span class="literal">-r</span> <span class="string">&#x27;s/Common Name: \^(.*)/\1/g&#x27;</span>)</span><br><span class="line">    CERTIFICATE_NAME_FOR_SIGNING=<span class="variable">$ORIGINAL_CERTIFICATE_NAME</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç­¾åå‰å®‰è£…åŒ…ä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">    show_package_info <span class="string">&quot;<span class="variable">$</span>&#123;IPA_FILE&#125;&quot;</span></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¦‚æœåªæ˜¾ç¤º ipa ä¿¡æ¯åˆ™é€€å‡º</span></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$SHOW_IPA_INFO_ONLY</span> == <span class="type">true</span> ]]; then</span><br><span class="line">        <span class="keyword">exit</span></span><br><span class="line">    fi</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> ---------------------------------------------------------------------------</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é€‰æ‹©è¯ä¹¦</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$NEED_SELECT_CERTIFICATE</span> == <span class="type">true</span> ]]; then</span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;\033[97;1mCertificates List:\033[0m&quot;</span></span><br><span class="line">    CERTIFICATE_NAME_FOR_SIGNING=<span class="variable">$</span>(select_certificate)</span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;\033[93;1m<span class="variable">$</span>&#123;CERTIFICATE_NAME_FOR_SIGNING&#125;\033[0m&quot;</span></span><br><span class="line">    <span class="comment"># è·å–è¯ä¹¦åç§°ï¼Œå·²ä¸å†ä½¿ç”¨ï¼Œä»…ä¿ç•™è·å–æ–¹å¼ï¼Œå¤‡æŸ¥</span></span><br><span class="line">    <span class="comment"># CERTIFICATE_NAME_FOR_SIGNING=$(echo &quot;$CERTIFICATE_NAME_FOR_SIGNING&quot; | sed -r &#x27;s/.*&quot;(.*)&quot;/\1/g&#x27;)</span></span><br><span class="line">    <span class="comment"># è·å–è¯ä¹¦ ID</span></span><br><span class="line">    CERTIFICATE_NAME_FOR_SIGNING=<span class="variable">$</span>(<span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$CERTIFICATE_NAME_FOR_SIGNING</span>&quot;</span> | sed <span class="literal">-r</span> <span class="string">&#x27;s/.*\) (.*) &quot;.*&quot;/\1/g&#x27;</span>)</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–è§£å‹ç¼©ç›®å½•</span></span><br><span class="line">extract_path=<span class="variable">$</span>(extract_ipa_folder <span class="string">&quot;<span class="variable">$</span>&#123;IPA_FILE&#125;&quot;</span>)</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Extracting &#x27;<span class="variable">$</span>&#123;IPA_FILE&#125;&#x27;&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;to         &#x27;<span class="variable">$</span>&#123;extract_path&#125;/&#x27;...&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å‹ç¼©</span></span><br><span class="line">unzip <span class="literal">-q</span> <span class="string">&quot;<span class="variable">$</span>&#123;IPA_FILE&#125;&quot;</span> <span class="literal">-d</span> <span class="string">&quot;<span class="variable">$</span>&#123;extract_path&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Payload ç›®å½•</span></span><br><span class="line">payload_path=<span class="string">&quot;<span class="variable">$</span>&#123;extract_path&#125;/Payload&quot;</span></span><br><span class="line"><span class="comment"># App ç›®å½•</span></span><br><span class="line">app_path=<span class="string">&quot;<span class="variable">$</span>&#123;payload_path&#125;/&quot;</span><span class="variable">$</span>(<span class="built_in">ls</span> <span class="literal">-C1</span> <span class="string">&quot;<span class="variable">$</span>&#123;payload_path&#125;&quot;</span> | head <span class="literal">-n</span> <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æ‰©å±•æ‰€åœ¨ç›®å½•</span></span><br><span class="line">plugins_path=<span class="string">&quot;<span class="variable">$</span>&#123;app_path&#125;/PlugIns&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœå­˜åœ¨æ‰©å±•ç›®å½•åˆ™å¤„ç†</span></span><br><span class="line"><span class="keyword">if</span> [[ -<span class="type">d</span> <span class="string">&quot;<span class="variable">$</span>&#123;plugins_path&#125;&quot;</span> ]]; then</span><br><span class="line">    <span class="comment"># åˆ—å‡ºæ‰©å±•</span></span><br><span class="line">    plugins=<span class="variable">$</span>(find <span class="string">&quot;<span class="variable">$</span>&#123;plugins_path&#125;&quot;</span> <span class="literal">-type</span> d <span class="literal">-name</span> <span class="string">&#x27;*.appex&#x27;</span>)</span><br><span class="line">    old_ifs=<span class="variable">$</span>&#123;IFS&#125;</span><br><span class="line">    IFS=<span class="variable">$</span><span class="string">&#x27;\n&#x27;</span></span><br><span class="line">    plugins=(<span class="variable">$</span>&#123;plugins&#125;)</span><br><span class="line">    IFS=<span class="variable">$</span>&#123;old_ifs&#125;</span><br><span class="line">    <span class="comment"># éå†æ‰©å±•ï¼Œä¸ºæ¯ä¸ªæ‰©å±•ç­¾å</span></span><br><span class="line">    <span class="keyword">for</span> plugin <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$</span>&#123;plugins[@]&#125;&quot;</span>; <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">echo</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Signing extension \&quot;</span><span class="variable">$</span>&#123;plugin&#125;\<span class="string">&quot;...&quot;</span></span><br><span class="line">        sign_code <span class="string">&quot;<span class="variable">$</span>&#123;plugin&#125;&quot;</span></span><br><span class="line">    done</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šä¸»ç¨‹åºç‰ˆæœ¬</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="literal">-n</span> <span class="string">&#x27;Specify the main app version:&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®š Version</span></span><br><span class="line"><span class="keyword">if</span> [[ -<span class="type">n</span> <span class="string">&quot;<span class="variable">$</span>&#123;IPA_SHORT_VERSION&#125;&quot;</span> ]]; then</span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  Version(CFBundleShortVersionString)=<span class="variable">$</span>&#123;IPA_SHORT_VERSION&#125;&quot;</span></span><br><span class="line">    set_short_version <span class="string">&quot;<span class="variable">$</span>&#123;app_path&#125;/Info.plist&quot;</span> <span class="string">&quot;<span class="variable">$</span>&#123;IPA_SHORT_VERSION&#125;&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&#x27; [N/A]&#x27;</span></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®š Build</span></span><br><span class="line"><span class="keyword">if</span> [[ -<span class="type">n</span> <span class="string">&quot;<span class="variable">$</span>&#123;IPA_BUILD_VERSION&#125;&quot;</span> ]]; then</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  Build(CFBundleVersion)=<span class="variable">$</span>&#123;IPA_BUILD_VERSION&#125;&quot;</span></span><br><span class="line">    set_build_version <span class="string">&quot;<span class="variable">$</span>&#123;app_path&#125;/Info.plist&quot;</span> <span class="string">&quot;<span class="variable">$</span>&#123;IPA_BUILD_VERSION&#125;&quot;</span></span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸ºä¸»ç¨‹åºç­¾å</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;Signing application \033[93;1m<span class="variable">$</span>&#123;app_path&#125;/\033[0m...&quot;</span></span><br><span class="line">sign_code <span class="string">&quot;<span class="variable">$</span>&#123;app_path&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–° ipa æ–‡ä»¶å</span></span><br><span class="line">new_ipafile=<span class="variable">$</span>(dirname <span class="string">&quot;<span class="variable">$</span>&#123;IPA_FILE&#125;&quot;</span>)/<span class="variable">$</span>(basename <span class="string">&quot;<span class="variable">$</span>&#123;IPA_FILE&#125;&quot;</span> .ipa)_sign_<span class="variable">$</span>(gen_timestamp).ipa</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="literal">-e</span> <span class="string">&quot;Packing \033[93;1m<span class="variable">$</span>&#123;new_ipafile&#125;\033[0m...&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡ç­¾ååçš„ ipa æ–‡ä»¶ï¼ˆä¸´æ—¶ï¼‰</span></span><br><span class="line">resigned_ipa=<span class="string">&quot;<span class="variable">$</span>&#123;extract_path&#125;/resigned.ipa&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›å…¥å·¥ä½œç›®å½•ï¼Œzip å‘½ä»¤åªèƒ½åœ¨è¿™ä¸ªç›®å½•ä¸‹å·¥ä½œï¼Œå¦åˆ™å‹ç¼©åŒ…å†…ä¼šå¸¦ä¸Šå®Œæ•´è·¯å¾„</span></span><br><span class="line"><span class="built_in">pushd</span> <span class="string">&quot;<span class="variable">$</span>&#123;extract_path&#125;&quot;</span> &gt; /dev/null</span><br><span class="line">zip <span class="literal">-q</span> <span class="literal">-r</span> <span class="string">&quot;<span class="variable">$</span>&#123;resigned_ipa&#125;&quot;</span> <span class="string">&quot;Payload&quot;</span></span><br><span class="line"><span class="built_in">popd</span> &gt; /dev/null</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”±äº /tmp ç›®å½•ä½œä¸ºå·¥ä½œç›®å½•ï¼Œå¯¼è‡´æ–‡ä»¶æƒé™æœ‰äº›é—®é¢˜ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨ mv å‘½ä»¤</span></span><br><span class="line"><span class="comment"># è€Œæ˜¯éœ€è¦ cp å‘½ä»¤å°†ç­¾ååçš„æ–‡ä»¶å¤åˆ¶åˆ°æŒ‡å®šä½ç½®</span></span><br><span class="line"><span class="built_in">cp</span> <span class="string">&quot;<span class="variable">$</span>&#123;resigned_ipa&#125;&quot;</span> <span class="string">&quot;<span class="variable">$</span>&#123;new_ipafile&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ä¸´æ—¶æ–‡ä»¶ï¼Œæ¸…ç†å·¥ä½œåŒº</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="literal">-n</span> <span class="string">&quot;Clearing workspace...&quot;</span></span><br><span class="line"><span class="built_in">rm</span> <span class="literal">-rf</span> <span class="string">&quot;<span class="variable">$TMP_WORKBENCH_ROOT</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> OK.</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­¾ååå®‰è£…åŒ…ä¿¡æ¯</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line">show_package_info <span class="string">&quot;<span class="variable">$</span>&#123;new_ipafile&#125;&quot;</span></span><br><span class="line"><span class="built_in">echo</span> ---------------------------------------------------------------------------</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç»“æŸæ—¶é—´</span></span><br><span class="line">stop_time=<span class="variable">$</span>(date +%s)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—èŠ±è´¹æ—¶é—´</span></span><br><span class="line">elapsed_time=<span class="variable">$</span>(( stop_time - start_time ))</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®Œæˆ</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Done. Totally, <span class="variable">$elapsed_time</span> seconds elapsed.&quot;</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å¼€ç­¾ååæ–‡ä»¶æ‰€åœ¨ç›®å½•</span></span><br><span class="line">open <span class="string">&quot;<span class="variable">$</span>(dirname &quot;</span><span class="variable">$</span>&#123;new_ipafile&#125;<span class="string">&quot;)&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ°é“3å·çº¿ä¸Šçš„ç¥äºº</title>
      <link href="/2021/09/23/Subway3/"/>
      <url>/2021/09/23/Subway3/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¸çŸ¥é“ä½ ä»¬ä¸Šä¸‹ç­æ˜¯é€šè¿‡ä»€ä¹ˆäº¤é€šå·¥å…·ï¼Œæˆ‘ä¸ªäºº 90% çš„æƒ…å†µéƒ½æ˜¯ååœ°é“ã€‚æˆ–è€…è¯´æˆ‘æ˜¯æœ‰ä¸€äº›å–œæ¬¢ååœ°é“çš„ï¼Œå› ä¸ºæˆ‘çš„ä¸€å¤§çˆ±å¥½å°±æ˜¯è§‚å¯Ÿå„ç§äººâ€¦â€¦ä½†å¾€å¾€ä¸Šç­çš„æ—¶å€™æˆ‘æ€»æ˜¯â€œæç‚¹å„¿â€ï¼Œè¿‘ä¸¤å¹´éƒ½æ˜¯ååˆšåˆšå¥½ä¸è¿Ÿåˆ°çš„é‚£ä¸€ç­åœ°é“ã€‚æˆ‘æ€è€ƒäº†ä¸€ä¸‹ä¸ºä»€ä¹ˆæˆ‘å˜å¾—å¦‚æ­¤â€œå •è½â€ï¼Œæ˜¯ä»Šå¤©æ—©ä¸Šåœ°é“ä¸Šçš„ä¸€ä½å¤©æ´¥è€å¤ªå¤ªå¥½åƒç‚¹é†’äº†æˆ‘â€¦â€¦</p><p>å€Ÿæ­¤æœºä¼šè®°å½•ä¸€ä¸‹æˆ‘åœ¨åœ°é“ä¸Šé‡åˆ°çš„å„è·¯ç¥äººï¼š</p><hr><h2 id="çˆ±å¿ƒä¸“åº§"><a href="#çˆ±å¿ƒä¸“åº§" class="headerlink" title="çˆ±å¿ƒä¸“åº§"></a>çˆ±å¿ƒä¸“åº§</h2><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/%E7%88%B1%E5%BF%83%E4%B8%93%E5%BA%A7.jpeg"></p><p>â€œä½ ç«™åœ¨è¿™ç¹åçš„è¡—ä¸Šï¼Œæ‰¾ä¸åˆ°ä½ è¯¥å»çš„æ–¹å‘â€¦â€¦â€æˆ‘æ­£åœ¨åœ°é“ä¸Šï¼Œåç€ï¼Œå¸¦ç€è€³æœºï¼Œå¬ç€è®¸å·çš„ã€Šé‚£ä¸€å¹´ã€‹å‘å‘†ï¼Œç³å­”éƒ½æ•£å¼€çš„é‚£ç§å‘å‘†ã€‚çªç„¶ä¸€ä¸ªè€å¤ªå¤ªç«™æˆ‘é¢å‰ï¼Œå¸å¼•äº†æˆ‘ç³å­”çš„æ³¨æ„åŠ›ã€‚</p><p>â€œèƒ½è®©ç»™æˆ‘åå—ï¼Ÿï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼â€</p><span id="more"></span><p>ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤šå¹å·ï¼Ÿè¿™æ ·åº”è¯¥èƒ½è¡¨è¾¾å‡ºå¥¹å½“æ—¶æ€åº¦æœ‰å¤šå¼ºç¡¬äº†å§ã€‚æ²¡æœ‰ä»»ä½•çš„å‰åé“ºå«ï¼Œå°±æ˜¯åˆšã€‚ç³å­”èšç„¦ä»¥åï¼Œæˆ‘åº”è¯¥æ˜¯æ„£ä½äº†æœ‰1ç§’çš„æ—¶é—´ã€‚å¥¹å¯èƒ½æ˜¯è§‰å¾—æˆ‘ä¸æƒ³èµ·æ¥å§ï¼Œç„¶åæ‹¿é£ŸæŒ‡æŒ‡äº†ä¸€ä¸‹æˆ‘åé¢ï¼šâ€œçˆ±å¿ƒä¸“åº§ã€‚â€ï¼Œç„¶åæˆ‘è¯´â€œå§æ§½ï¼Œå¯ä»¥ï¼æ‚¨å¿«è¯·~â€ã€‚éšåæˆ‘ä»¥æœ€å¿«çš„é€Ÿåº¦é€ƒç¦»äº†é‚£èŠ‚è½¦å¢â€¦â€¦</p><p>æ¢åˆ°å¦ä¸€èŠ‚è½¦å¢ï¼Œç»§ç»­å¬æˆ‘çš„éŸ³ä¹ï¼Œä½†æˆ‘ä¸èƒ½å‘å‘†äº†ï¼Œæ‰“å¼€ç”µå­ä¹¦ï¼Œä»å¤´å†çœ‹ä¸€éå§ï¼šã€Šäººæ€§çš„å¼±ç‚¹ã€‹ã€‚ğŸ™</p><p>â€œä½ ç«™åœ¨è¿™ç¹åçš„è¡—ä¸Šï¼Œæ„Ÿè§‰åˆ°ä»æ¥æ²¡æœ‰çš„æ…Œå¼ â€¦â€¦â€æ…Œå¼ å—ï¼Ÿæ…Œå¼ å‘€ï¼Œæˆ‘ç¬¬ä¸€æ¬¡äº²èº«æ„Ÿå—åˆ°ç¤¾ä¼šçš„é™©æ¶ï¼Œå¯ä¸æƒ³åƒç”µå½±ã€Šæœç´¢ã€‹ä¸€æ ·ï¼Œè¢«äººæ‹åˆ°å°è§†é¢‘é‡Œå‘åˆ°ç½‘ä¸Šï¼Œæ¯•ç«Ÿæˆ‘ä»Šå¤©æ²¡æœ‰åŒ–å¦†ï¼Œä¹Ÿæ²¡æœ‰é«˜åœ†åœ†é‚£ä¹ˆä¸Šé•œğŸ˜‚ã€‚ä¸æ­¢ä¸€æ¬¡åœ¨åœ°é“ä¸Šé‡åˆ°è€å¹´äººå¯¹åˆ«äººå‘ç«ï¼Œè«åå…¶å¦™ï¼ŒçœŸçš„è«åå…¶å¦™ï¼Œæˆ‘å¾ˆä¸ç†è§£ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä»–ä»¬ç”Ÿæ´»æ˜¯æœ‰å¤šä¸æ„‰å¿«å‘¢ï¼Ÿéšéšä¾¿ä¾¿å°±å¯ä»¥å¯¹ä¸€ä¸ªé™Œç”Ÿäººæ¶è¯­ç›¸å‘ï¼Œå¥½å§ï¼Œå¯èƒ½æ˜¯æ²¡æŠ¢åˆ°è¶…å¸‚çš„ç‰¹ä»·é¸¡è›‹ã€‚è¯è¯´ï¼Œä»Šå¤©çš„è€å¤ªå¤ªè™½ç„¶æˆ´ç€å£ç½©ï¼Œä»å¥¹çœ‰çœ¼ä¸­è¿˜æ˜¯å¯ä»¥çœ‹å‡ºï¼Œå¥¹æ˜¯ä¸€ä¸ªå¾ˆåˆ»è–„çš„äººã€‚çœ¼ç›æ˜¯ä¸€ä¸ªäººå¿ƒçµçš„çª—å£ï¼Œè¿™å¥è¯æˆ‘è§‰å¾—å¾ˆè´´åˆ‡ï¼Œæ‰€ä»¥çœ‹äººå…ˆçœ‹çœ¼â€¦â€¦</p><p>FYI: 3 å·çº¿çš„çˆ±å¿ƒä¸“åº§è¦ä¸è¦è€ƒè™‘åˆ·ä¸€ä¸ªä¸åŒé¢œè‰²çš„æ¼†å‘¢~</p><h2 id="æ‰‹æ‰¶æ†"><a href="#æ‰‹æ‰¶æ†" class="headerlink" title="æ‰‹æ‰¶æ†"></a>æ‰‹æ‰¶æ†</h2><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/%E6%89%8B%E6%89%B6%E6%9D%86.jpeg"></p><p>â€œç©å„¿å°¼ç›è›‹ä»‹ï¼Œä½ ç…ä½ é‚£ææ€§ï¼Œå°BKçš„ï¼Œæ€ä¹ˆä¸æ‡‚å¾—å°Šè€çˆ±å¹¼å‘¢â€¦â€¦æˆ‘å¹´è½»çš„æ—¶å€™ä¸€å·´æŒæ‰“ä½ ä¸‰ä¸ªâ€¦â€¦â€ä¸€æ®µåœ°é“çš„å¤©æ´¥è¯å™¼é‡Œå•ªå•¦çš„é£˜è¿‡æ¥äº†~</p><p>åŸæ¥æ˜¯ä¸€ä¸ªå¤©æ´¥è€å¤§çˆ·åœ¨éª‚ä¸€ä¸ªå°å§‘å¨˜ï¼Œå› ä¸ºå¤§çˆ·èº«ä½“é åœ¨äº†æ‰‹æ‰¶æ†ä¸Šï¼Œå°å§‘å¨˜çš„æ‰‹æ— å¤„å®‰æ”¾ã€‚æ­£ä¹‰å‡›ç„¶çš„å°å§‘å¨˜å‘å¾®åœ°æŒ‡è´£äº†ä»–ã€‚æœ‰å¤šå‘å¾®å‘¢ï¼Ÿæˆ‘å‹æ ¹å„¿æ²¡å¬åˆ°å°å§‘å¨˜çš„å£°éŸ³â€¦â€¦å†’æ­»å¾€é‚£å„¿ç„äº†ä¸€çœ¼ï¼Œæœç„¶ï¼Œå¤§çˆ·å¤´å‘èŠ±ç™½ï¼Œä¸€è„¸çš„â€œåˆ»è–„â€ï¼ˆæš‚æ—¶æƒ³ä¸åˆ°å…¶ä»–çš„è¯å„¿ï¼Œå› ä¸ºæ»¡è„‘å­è¿˜æ˜¯ä¸Šä¸€ä¸ªè€å¤ªå¤ªï¼Œæ¯•ç«Ÿåˆšåˆšç»å†çš„ğŸ˜‚ï¼‰ï¼Œå°å§‘å¨˜è´¹åŠ›çš„æŒªäº†ä½ç½®è¿œç¦»äº†ä»–ã€‚</p><p>æˆ‘åˆšæ¥å¤©æ´¥çš„æ—¶å€™ï¼Œå°±çŸ¥é“è€å¤©æ´¥äººå¾ˆä¼šéª‚äººï¼Œå°è¯å„¿ä¸€å¥—å¥—çš„ï¼Œä½†ç¬¬ä¸€æ¬¡åœ¨åœ°é“ä¸Šå¬åˆ°éª‚äººè¿™ä¹ˆéš¾å¬çš„ã€‚</p><p>å¤©æ´¥çš„åœ°é“è·ŸåŒ—äº¬çš„åœ°é“æ¯”èµ·æ¥ï¼Œäººå·²ç»ç®—å¾ˆå°‘äº†ã€‚ä½†è¯´å®è¯åŒ—äº¬çš„å¤§çˆ·å¤§å¦ˆä¹Ÿç‰¹åˆ«ä¼šç”¨åŒ—äº¬è¯éª‚äººï¼Œå¯æ˜¯åœ°é“ä¸Šæˆ‘å¥½åƒçœŸæ²¡é‡åˆ°è¿‡ã€‚</p><p>æ²¡ç†éè¦è®²ç†ï¼Œä¸Šå“ªå„¿è¯´ç†å»ä½ è¯´â€¦â€¦â”(ï¾Ÿï½ï¾Ÿ)â”Œ</p><h2 id="ä¸‹å·´é¢å„¿"><a href="#ä¸‹å·´é¢å„¿" class="headerlink" title="ä¸‹å·´é¢å„¿"></a>ä¸‹å·´é¢å„¿</h2><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/%E4%B8%8B%E5%B7%B4%E9%A2%8F%E5%84%BF.png"></p><p>è¿™ä½æ˜¯æˆ‘å‰ä¸¤å¹´é‡åˆ°çš„ä¸€ä½å¤§å“¥ï¼Œæ˜¯åœ¨æˆ‘è¿˜æ²¡æœ‰æç‚¹å„¿ä¸Šç­çš„æ—¶æœŸé‡åˆ°çš„ã€‚åŸºæœ¬ä¸Šæˆ‘æ¯å¤©éƒ½ååŒä¸€ç­åœ°é“ã€åŒä¸€ä¸ªè½¦å¢ï¼ˆè½¦å¤´ç¬¬ä¸€èŠ‚ï¼‰ï¼Œæ‰€ä»¥æ€»èƒ½é‡åˆ°ä»–ã€‚ä»–â€¦â€¦å¾ˆèƒ–ï¼Œå¾ˆèƒ–ï¼Œæœ‰ä¸‰ä¸ªæˆ‘é‚£ä¹ˆèƒ–ï¼Œæ–œæŒç€ä¸€ä¸ªå…¬æ–‡åŒ…ğŸ’¼ï¼ŒåŒ…é‡Œæœ‰æ–‡ä»¶å¤¹å¤¹ç€ä¸€äº›è²Œä¼¼æ˜¯åˆåŒçš„ä¸œè¥¿ï¼Œæ ¹æ®ä»–æ‰“ç”µè¯çš„å†…å®¹ï¼ŒçŒœæµ‹ä»–æ˜¯ä¸€åé”€å”®ã€‚è¯šå®çš„è®²ï¼Œç¬¬ä¸€æ¬¡è§åˆ°ä»–æˆ‘æƒŠäº†ï¼Œå› ä¸ºçœŸçš„èƒ–ï¼ˆæˆ‘æ²¡æœ‰æ­§è§†çš„æ„æ€ï¼‰â€¦â€¦ä½†è§å‡ æ¬¡ä¹Ÿå°±ä¹ æƒ¯äº†ï¼Œå§‘ä¸”ç»™å¤§å“¥èµ·ä¸ªä»£å·å§ï¼šå†¬ç“œã€‚</p><p>åœ¨å¹³å¹³æ— å¥‡çš„æŸä¸€å¤©ï¼Œåœ°é“å¼€é—¨ï¼Œä¹˜å®¢æŒ‰éƒ¨å°±ç­çš„å¾€é‡Œèµ°ï¼Œç¬¬ä¸€èŠ‚è½¦å¢äººä¸€èˆ¬å°‘ä¸€äº›ï¼Œåˆšåˆšå¥½åæ»¡ï¼Œç¨€ç¨€æ‹‰æ‹‰æœ‰å‡ ä¸ªç«™ç€çš„ä¹˜å®¢ã€‚åˆšåˆšå¥½æˆ‘è·Ÿå†¬ç“œéƒ½ç«™ç€â€¦â€¦ååœ¨ä»–æ­£å‰æ–¹çš„ä¸€åç”·å£«ï¼Œæ€ä¹ˆè®²å‘¢ï¼Œè·Ÿä¸ªç˜¦çŒ´å­ä¸€æ ·ï¼Œæˆ‘ä»¬å°±ç§°ä»–ä¸ºèƒ¡èåœå§â€¦â€¦å› ä¸ºä»–ä¿©çš„èº«ææ¯”ä¾‹çœŸçš„å°±åƒå†¬ç“œ : èƒ¡èåœã€‚ä¹‹æ‰€ä»¥ä¼šæ³¨æ„åˆ°èƒ¡èåœï¼Œæ˜¯å› ä¸ºå†¬ç“œç«™ä»–é¢å‰æ—¶ï¼Œèƒ¡èåœçš„çœ¼ç¥å°±æŠŠä»–å‡ºå–äº†ï¼Œåªè§èƒ¡èåœé»˜é»˜æå‡ºäº†æ‰‹æœºã€æ‰“å¼€ç›¸æœºã€å’”åš“~ä»–æ‹äº†ä¸€å¼ å†¬ç“œçš„ç…§ç‰‡ã€‚ä¸ºä»€ä¹ˆæˆ‘ä¼šçœ‹åˆ°ï¼Ÿä»åœ°é“çš„çª—æˆ·ä¸Šèƒ½çœ‹åˆ°èƒ¡èåœæ‰‹æœºçš„å±å¹•â€¦â€¦å¤©å‘ï¼Œå¼‚å¸¸çš„æ¸…æ™°ï¼Œæˆ‘è§‰å¾—é‚£æ˜¯æˆ‘ä»çª—æˆ·ä¸Šçœ‹åˆ°çš„æœ€æ¸…æ™°çš„å½±å­äº†ã€‚è‡ªç„¶ï¼Œå†¬ç“œä¹Ÿä¸çï¼Œä»–åº”è¯¥è·Ÿæˆ‘ä¸€æ ·ï¼Œä»å½±å­é‡Œçœ‹åˆ°äº†èƒ¡èåœçš„æ‰€ä½œæ‰€ä¸ºâ€¦â€¦æˆ‘å½“æ—¶å¿ƒé‡Œæ˜¯æœ‰ç‚¹å„¿å¥½å¥‡çš„ï¼Œä¸çŸ¥é“ä»–ä¼šæ€ä¹ˆå¤„ç†ã€‚</p><p>å†¬ç“œæŠŠæ‰‹æœºé”å¥½å±å¹•æ”¾è¿›äº†ä»–çš„å…¬æ–‡åŒ…é‡Œï¼Œä¼¸å‡ºäº†å³æ‰‹ï¼Œæ‹–ä½èƒ¡èåœçš„ä¸‹å·´é¢å„¿ï¼ŒæŠŠä»–æ‹äº†èµ·æ¥â€¦â€¦æˆ‘æ²¡æœ‰å¤¸å¼ ï¼ŒçœŸçš„å°±æ˜¯æ‹äº†èµ·æ¥ï¼š</p><p>å†¬ç“œï¼šåˆ äº†ï¼<br>èƒ¡èåœï¼šå¤§å“¥ï¼Œåˆ«æ¿€åŠ¨åˆ«æ¿€åŠ¨â€¦<br>å†¬ç“œï¼šæˆ‘è®©ä½ åˆ äº†â€¦<br>èƒ¡èåœï¼šæˆ‘ç¬¬ä¸€æ¬¡è§è¿™ä¹ˆå£®çš„ï¼Œæ‰€ä»¥å¿ä¸ä½æ‹äº†ä¸€ä¸‹â€¦<br>å†¬ç“œï¼šå¬ä¸æ‡‚æ˜¯å—ï¼Ÿ<br>èƒ¡èåœï¼šæˆ‘åˆ äº†åˆ äº†â€¦<br>å†¬ç“œï¼šå›æ”¶ç«™ï¼Œä¹Ÿç»™æˆ‘åˆ äº†â€¦</p><p>â€¦â€¦</p><p>äºæ˜¯ä¹ï¼Œèƒ¡èåœæŠŠç…§ç‰‡åˆ äº†ï¼Œç¬¬ä¸€èŠ‚è½¦å¢åç€çš„äººéƒ½èº²å¼€äº†ï¼Œç„¶åå†¬ç“œåä¸‹äº†ï¼Œæˆ‘ä¹Ÿæœ‰åº§äº†â€¦â€¦ğŸ˜‚</p><p>åˆ°äº†ä¸‹ä¸€ç«™ï¼Œèƒ¡èåœå°±ä¸‹è½¦äº†ï¼Œè‡³äºæ˜¯ä¸æ˜¯ä»–çš„ç»ˆç‚¹ç«™æˆ‘å°±ä¸æ¸…æ¥šäº†ï¼Œä¸€æ’åº§ä½ä¸Šå°±åªæœ‰æˆ‘è·Ÿå†¬ç“œã€‚æˆ‘æ›¾ç»ä¹Ÿæƒ³æ‹ä¸€å¼ ä»–çš„ç…§ç‰‡ï¼Œä½†è§‰å¾—ä¸å¤ªå¥½å¿ä½äº†ï¼Œä½†æ˜¯å‘ç”Ÿäº†åˆšåˆšçš„ä¸€å¹•ï¼Œæˆ‘æ²¡æœ‰å¿ä½â€¦â€¦å¾®ä¿¡ä¸Šå‘Šè¯‰äº†èåœå›è¿™ä»¶äº‹å„¿ã€‚æ­£å½“æˆ‘æŠ±ç€æ‰‹æœºæ‰“å­—çš„æ—¶å€™ï¼Œä½™å…‰æ„Ÿå—åˆ°äº†æ€æ°”ï¼Œä»–å¥½åƒåœ¨çœ‹æˆ‘ï¼Œçœ‹ä»€ä¹ˆï¼Œçœ‹æˆ‘æœ‰æ²¡æœ‰æ‹ç…§å—ï¼Ÿæˆ‘æ²¡æœ‰å•Šâ€¦â€¦å½“æ—¶æˆ‘ä¹Ÿæ˜¯å¹´å°‘æ— çŸ¥ï¼Œç«Ÿç„¶æ‰­å¤´çœ‹äº†ä»–ä¸€çœ¼ï¼Œè¿˜å¥½ï¼Œä»–å†²æˆ‘ç¬‘äº†ï¼Œå¾ˆæ…ˆç¥¥çš„ç¬‘äº†â€¦ğŸ˜‚â€¦çªç„¶æœ‰ç‚¹å„¿æ€€å¿µé‚£ä¸ªæ—¶å€™ï¼Œå› ä¸ºä»–å¯¹æˆ‘ç¬‘äº†å—ï¼Ÿä¸æ˜¯ã€‚å› ä¸ºé‚£ä¸ªæ—¶å€™ååœ°é“æ˜¯ä¸éœ€è¦æˆ´å£ç½©çš„â€¦â€¦</p><p>è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡åœ¨åœ°é“ä¸Šé‡åˆ° æ‰“æ¶ï¼Ÿå¥½åƒä¹Ÿä¸ç®—æ‰“æ¶ã€‚ä¸è¿‡å†¬ç“œå’Œèƒ¡èåœæˆ‘éƒ½æ˜¯ä½©æœçš„ï¼Œå°¤å…¶æ˜¯èƒ¡èåœï¼Œè¢«äººæ‹ç€ä¸‹å·´é¢å„¿çš„æ—¶å€™ï¼Œä»–è¿˜èƒ½ç¬‘ç€è§£é‡Šï¼Œå¾ˆç‰›æ˜¯ä¸æ˜¯~</p><h2 id="é»‘è¡£ç”·å­"><a href="#é»‘è¡£ç”·å­" class="headerlink" title="é»‘è¡£ç”·å­"></a>é»‘è¡£ç”·å­</h2><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/%E5%B0%8F%E9%BB%91.png"></p><p>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰æ³¨æ„è¿‡ï¼Œä¸Šç­æ—¶åœ°é“ä¸Šçš„äºº å’Œ ä¸‹ç­æ—¶åœ°é“ä¸Šçš„äººï¼Œæ˜¯ä¸ä¸€æ ·çš„ã€‚ä»–ä»¬çš„çŠ¶æ€ä¸ä¸€æ ·ï¼Œä¸Šç­æ—¶å¤§éƒ¨äººéƒ½ç•¥å¾®å¸¦ä¸€äº›å›°æ„ï¼Œä½†ä¸‹ç­å¯å°±ä¸åŒäº†ï¼Œå¤§éƒ¨äººéƒ½å¾ˆæ”¾æ¾ï¼ŒèŠå¤©çš„å£°éŸ³ä¹Ÿå¤§äº†å¾ˆå¤šï¼Œä¹Œå¤®ä¹Œå¤®çš„æ„Ÿè§‰ã€‚åŒæ ·æ”¾æ¾çš„è¿˜æœ‰æˆ‘å¯¹é¢è¿™ä½å¤§å“¥çš„è£¤å­â€¦â€¦çš„æŸä¸ªæ•æ„Ÿéƒ¨ä½â€¦â€¦å¼€çº¿äº†ã€ç ´äº†ä¸€ä¸ªæ´ã€ä¸€ä¸ªæå­å¤§å°çš„æ´â€¦â€¦</p><p>é‚£æ˜¯ä¸€ä¸ªå¤å¤©ï¼ŒåŒæ ·ï¼Œä¹Ÿæ˜¯æˆ‘ä¸æç‚¹å„¿çš„å¹´ä»£ã€‚å¯¹é¢çš„å¤§å“¥èº«ç€ä¸€èº«é»‘è¡£ï¼šé»‘Tæ¤+é»‘çŸ­è£¤(ä¸ƒåˆ†è£¤å§)ï¼Œå¾®èƒ–ï¼Œåœ†è„¸ï¼Œè‚‰è‚‰çš„ï¼Œé‚£æˆ‘ä»¬å«ä»–å°é»‘å§ï¼Œå°é»‘åä¸‹äº†ï¼ŒåŒè…¿å¾®å¾®åŠˆå¼€ï¼Œæ‹¿å‡ºäº†ä¸€æœ¬ä¹¦ã€‚å½“å¥½å¥‡å®å®æƒ³çœ‹çœ‹ä»–åœ¨çœ‹ä»€ä¹ˆä¹¦æ—¶ï¼Œå°é»‘å¤§è…¿æ ¹éƒ¨ã€ä¸­çº¿ä¸Šä¸€æŠ¹ä¸æ€ä¹ˆå’Œè°çš„â€œç™½â€é—¯å…¥äº†çœ¼å¸˜ã€‚æ˜¯çš„ï¼Œå°±æ˜¯é‚£ä¸ªæå­å¤§å°çš„æ´ã€‚çœ‹çœ‹æˆ‘ä¸Šé¢é…çš„å›¾ï¼Œä¸€å›¢é»‘è‰²ä¸­ä¸€æŠ¹æå­å¤§å°çš„ç™½è‰²ï¼Œåº”è¯¥å°±æ˜¯è¿™ç§å¯¹æ¯”æ•ˆæœã€‚å½“ä»–åæˆ‘æ­£å¯¹é¢çš„æ—¶å€™ï¼Œæˆ‘å¾ˆéš¾ä¸çœ‹åˆ°ï¼Œæˆ–è€…è¯´éœ€è¦åˆ»æ„æ‰­å¤´æ‰å¯ä»¥ä¸çœ‹åˆ°ã€‚</p><p>å°é»‘çš„è¡£æœçœ‹ç€åƒæ˜¯çº¯æ£‰çš„ï¼Œè´´èº«ã€èˆ’æœã€å¹¶ä¸”ä»–å¾ˆå–œæ¬¢ã€‚ä¸ºä»€ä¹ˆæˆ‘çŸ¥é“è´´èº«ï¼Ÿå› ä¸ºé‚£æ¡çŸ­è£¤æŠŠä»–å¾®èƒ–çš„èº«ææš´éœ²æ— é—ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯è´´èº«çš„å§ï¼Ÿä¸ºä»€ä¹ˆæˆ‘çŸ¥é“ä»–å¾ˆå–œæ¬¢ï¼Ÿå› ä¸ºæˆ‘æ–­æ–­ç»­ç»­é‡åˆ°è¿‡ä»–äº”å…­æ¬¡ï¼ŒåŒä¸€ä¸ªä¸‹ç­ç‚¹å„¿ï¼Œä»–éƒ½æ˜¯ç©¿ç€è¿™ä¸€èº«å„¿ã€‚é‚£ä½ å¯èƒ½ä¼šé—®äº†ï¼Œä½ æ€ä¹ˆçŸ¥é“æ˜¯åŒä¸€ä»¶ï¼Ÿå› ä¸ºæ¯æ¬¡é‡åˆ°ä»–ï¼Œé‚£ä¸ªæå­ä¸€æ ·çš„æ´éƒ½åœ¨â€¦â€¦å¦‚æœè¯´ä¸€ä¸ªäººæœ‰äº”ä»¶ä¸€æ¨¡ä¸€æ ·çš„è¡£æœï¼Œæˆ‘ä¿¡ã€‚å¦‚æœè¯´äº”ä»¶è¡£æœéƒ½æ˜¯è£†éƒ¨å¼€äº†ä¸€ä¸ªæå­ä¸€æ ·å¤§çš„æ´ï¼Œå¯¹ä¸èµ·ï¼Œæˆ‘ä¸ä¿¡ã€‚</p><p>æˆ‘åœ¨å˜²ç¬‘åˆ«äººå—ï¼Ÿæ²¡æœ‰ã€‚åªæ˜¯è§‰å¾—ï¼šä»–çœŸæ˜¯ä¸€ä¸ªå°å¯çˆ±å‘¢~</p><p>è®°å¾—å½“æ—¶æˆ‘æŠŠè¿™ä½å°å¯çˆ±çš„äº‹å„¿å‘äº†æœ‹å‹åœˆï¼Œä¸€ä½å¹´é•¿å‡ å²çš„æœ‹å‹å›å¤äº†æˆ‘ï¼šæ‰å…‹ä¼¯æ ¼ä¹Ÿæ€»ç©¿åŒæ ·çš„è¡£æœï¼Œè€Œä¸”éƒ½æ˜¯å¾ˆç®€æ´çš„Tæ¤ã€‚æˆ‘è§‰å¾—æˆ‘çš„äººæ ¼ç»ç”±ä»–çš„ç‚¹æ’­ï¼Œå‡åäº†ä¸€å˜ç±³ã€‚æˆåŠŸäººå£«å¾€å¾€ä¼šæŠŠç²¾åŠ›å’Œé‡‘é’±ç”¨åœ¨è‡ªå·±ä¸“æ³¨çš„äº‹æƒ…ä¸Šï¼Œä¸åƒæˆ‘æ€»æŠŠé’±èŠ±åœ¨åˆ€æŠŠå„¿ä¸Šã€åˆ€èƒŒå„¿ä¸Šã€‚æ‰€ä»¥ä¹‹åæˆ‘æ‰æ›´æ³¨æ„å¤šè¯»ä¹¦ï¼Œè€Œä¸”å¥½åƒç¡®å®ä¸å¤ªçˆ±ä¹°è¡£æœäº†ğŸ¤“ã€‚</p><hr><p>è®°å½•è¿™äº›æ˜¯å› ä¸ºè§‰å¾—åœ°é“ä¸Šçš„äººå¾ˆå¯çˆ±ï¼Œå¤ªæœ‰æ„æ€äº†ï¼Œå½¢å½¢è‰²è‰²ï¼Œå¯èƒ½ä¹Ÿæ˜¯æˆ‘ç»å†å¤ªå•çº¯ï¼Œæ‰€ä»¥é‡åˆ°ä»€ä¹ˆæ ·çš„äººéƒ½è§‰å¾—æ–°é²œã€‚<br>æ‰€ä»¥ä¸ºä»€ä¹ˆæˆ‘æ€»èµ¶â€œæœ«ç­è½¦â€ï¼Ÿæˆ–è®¸æ˜¯å› ä¸ºå®‰é™å§ï¼Œè‡³å°‘ä¸ä¼šé‡åˆ°â€œçˆ±å¿ƒä¸“åº§â€å’Œâ€œæ‰‹æ‰¶æ†â€äº†ã€‚ä»Šå¤©æ—©ä¸Šæ€ªæˆ‘ï¼Œæ—©å‡ºé—¨äº†åŠå°æ—¶ï¼Œè¿˜åäº†çˆ±å¿ƒä¸“åº§ã€‚æ‚”ä¸è¯¥æ—©èµ·é‚£åŠå°æ—¶å‘€~</p>]]></content>
      
      
      
        <tags>
            
            <tag> æˆ‘ </tag>
            
            <tag> çæ‰¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git-Flow ä½¿ç”¨è§„èŒƒ</title>
      <link href="/2021/09/18/Git-Flow/"/>
      <url>/2021/09/18/Git-Flow/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Git-Flow æ˜¯æ„å»ºåœ¨ Git ä¹‹ä¸Šçš„ä¸€ä¸ªç»„ç»‡è½¯ä»¶å¼€å‘æ´»åŠ¨çš„æ¨¡å‹ï¼Œæ˜¯åœ¨ Git ä¹‹ä¸Šæ„å»ºçš„ä¸€é¡¹è½¯ä»¶å¼€å‘æœ€ä½³å®è·µã€‚</p><p>2010 å¹´ Vincent Driessen æå‡ºäº† <a href="http://nvie.com/posts/a-successful-git-branching-model/">A Successful Git Branching Model</a> åˆ†æ”¯æ¨¡å‹ï¼Œç”¨æ¥å¸®åŠ©å¼€å‘äººå‘˜åœ¨å¤§å‹è½¯ä»¶é¡¹ç›®ä¸­è¿½è¸ª featureï¼Œhotfix å’Œ releaseã€‚Gitflow ä½¿æ•´ä¸ªåˆ†æ”¯æ¨¡å‹è‡ªåŠ¨åŒ–å®Œæˆï¼Œæ›´åŠ æ˜“ç”¨ã€‚</p></blockquote><h2 id="åˆ†æ”¯è¯´æ˜"><a href="#åˆ†æ”¯è¯´æ˜" class="headerlink" title="åˆ†æ”¯è¯´æ˜"></a>åˆ†æ”¯è¯´æ˜</h2><ol><li>ä¸»åˆ†æ”¯ï¼šmaser åˆ†æ”¯å’Œ develop åˆ†æ”¯ä¸ºä¸»åˆ†æ”¯ï¼Œæ˜¯å—ä¿æŠ¤åˆ†æ”¯ï¼Œåªæœ‰ master æƒé™å¯ä»¥æ“ä½œï¼Œ<strong>åªæ¥å—ä»£ç åˆå¹¶ä¸æ¥å—ä»£ç æäº¤</strong>ã€‚</li><li>è¾…åŠ©åˆ†æ”¯ï¼šfeature åŠŸèƒ½åˆ†æ”¯ã€bugfix åŠŸèƒ½ä¿®å¤åˆ†æ”¯ã€release å‘å¸ƒåˆ†æ”¯ã€hotfix çƒ­ä¿®å¤åˆ†æ”¯ä¸ºè¾…åŠ©åˆ†æ”¯ï¼Œå®ŒæˆåŠŸèƒ½ä¹‹ååˆå¹¶ä¼šä¸»åˆ†æ”¯ï¼Œå¹¶åˆ é™¤ã€‚</li></ol><p>Git-Flow æ¨¡å‹ä¸­å®šä¹‰äº†ä¸»åˆ†æ”¯å’Œè¾…åŠ©åˆ†æ”¯ä¸¤ç±»åˆ†æ”¯ã€‚å…¶ä¸­ä¸»åˆ†æ”¯ç”¨äºç»„ç»‡ä¸è½¯ä»¶å¼€å‘ã€éƒ¨ç½²ç›¸å…³çš„æ´»åŠ¨ï¼›è¾…åŠ©åˆ†æ”¯ç”¨äºç»„ç»‡ä¸ºäº†è§£å†³ç‰¹å®šçš„é—®é¢˜è€Œè¿›è¡Œçš„å„ç§å¼€å‘æ´»åŠ¨ã€‚</p><h2 id="ä¸»åˆ†æ”¯"><a href="#ä¸»åˆ†æ”¯" class="headerlink" title="ä¸»åˆ†æ”¯"></a>ä¸»åˆ†æ”¯</h2><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/git-flow-main.jpeg" alt="img"></p><span id="more"></span><p>Git-Flow å®šä¹‰äº†ä¸¤ä¸ªä¸»åˆ†æ”¯ï¼Œæ˜¯é•¿æœŸæ”¯æŒåˆ†æ”¯ï¼Œä¸ä¼šè¢«åˆ é™¤ã€‚<strong>æ³¨æ„ï¼Œä¸»åˆ†æ”¯åªæ¥å—ä»£ç åˆå¹¶ï¼Œä¸æ¥å—ä»£ç æäº¤</strong>ã€‚</p><h3 id="master-åˆ†æ”¯"><a href="#master-åˆ†æ”¯" class="headerlink" title="master åˆ†æ”¯"></a>master åˆ†æ”¯</h3><blockquote><p>We consider origin/master to be the main branch where the source code of HEAD always reflects a production-ready state.</p></blockquote><p>å¼•ç”¨åŸä½œè€…çš„æè¿°ï¼Œmaster åˆ†æ”¯ä¸Šçš„ä»£ç å§‹ç»ˆæŒ‡å‘ç”Ÿäº§å°±ç»ªçŠ¶æ€ã€‚</p><p>æˆ‘ç†è§£è¿™å¥è¯çš„æ„æ€å°±æ˜¯ï¼šmaster åˆ†æ”¯ä¸Šçš„ä»£ç åº”è¯¥æ˜¯<strong>æœ€è¿‘å‘å¸ƒ</strong>åˆ°ç”Ÿäº§ç¯å¢ƒçš„ä»£ç ã€‚</p><p>master åˆ†æ”¯è§„å®šï¼š</p><ul><li>å’Œç”Ÿäº§çš„ä»£ç ä¿æŒä¸€è‡´</li><li><strong>ä»…åœ¨ä¸Šçº¿å‰æ‰æ›´æ–° master åˆ†æ”¯ä¸Šçš„ä»£ç </strong></li><li>æ¯æ¬¡æ›´æ–° masterï¼Œéƒ½éœ€å¯¹ master æ·»åŠ æŒ‡å®šæ ¼å¼çš„ tagï¼Œç”¨äºå‘å¸ƒæˆ–å›æ»š</li><li>master åˆ†æ”¯æ˜¯ä¿æŠ¤åˆ†æ”¯ï¼Œä¸å¯ç›´æ¥ push åˆ°è¿œç¨‹ master åˆ†æ”¯</li><li>master åˆ†æ”¯ä»£ç åªèƒ½è¢« release åˆ†æ”¯æˆ– hotfix åˆ†æ”¯åˆå¹¶ï¼Œä¸æ¥å—å…¶ä»–åˆ†æ”¯çš„åˆå¹¶</li></ul><p>æ‰€ä»¥æˆ‘ä»¬è§„å®š (è¯·å¤§å®¶ç‰¢è®°)ï¼š</p><p><strong>master åˆ†æ”¯ä¸Šçš„ä»£ç ï¼Œéšæ—¶å¯ä»¥ä¸Šçº¿</strong>ã€‚</p><p><strong>master åˆ†æ”¯ä¸Šçš„ä»£ç ï¼Œéšæ—¶å¯ä»¥ä¸Šçº¿ã€‚</strong></p><p><strong>master åˆ†æ”¯ä¸Šçš„ä»£ç ï¼Œéšæ—¶å¯ä»¥ä¸Šçº¿ã€‚</strong></p><h3 id="develop-åˆ†æ”¯"><a href="#develop-åˆ†æ”¯" class="headerlink" title="develop åˆ†æ”¯"></a>develop åˆ†æ”¯</h3><blockquote><p>We consider origin/develop to be the main branch where the source code of HEAD always reflects a state with the latest delivered development changes for the next release. Some would call this the â€œintegration branchâ€. This is where any automatic nightly builds are built from.</p></blockquote><p>å¼•ç”¨åŸä½œè€…çš„æè¿°ï¼Œdevelop åˆ†æ”¯æ˜¯ä¸‹ä¸€ä¸ªå‘å¸ƒçš„æœ€æ–°äº¤ä»˜ä»£ç ï¼Œå«åš â€œé›†æˆåˆ†æ”¯â€ã€‚æ¯æ—¥æ„å»ºåº”è¯¥åœ¨ develop åˆ†æ”¯ä¸Šã€‚</p><p>æˆ‘ç†è§£è¿™å¥è¯çš„æ„æ€å°±æ˜¯ï¼šdevelop åˆ†æ”¯æ˜¯æˆ‘ä»¬çš„ä¸»è¦å¼€å‘åˆ†æ”¯ï¼Œä¸ºä¸‹ä¸€é˜¶æ®µéœ€è¦ä¸Šçº¿åŠŸèƒ½çš„é›†æˆåˆ†æ”¯ã€‚</p><p>develop åˆ†æ”¯è§„å®šï¼š</p><ul><li>develop åˆ†æ”¯ä¸èƒ½ä¸ master åˆ†æ”¯ç›´æ¥äº¤äº’</li></ul><p>è¿™é‡Œæˆ‘ä»¬å°±æœ‰å‡ ä¸ªé—®é¢˜äº†ï¼š</p><ol><li>develop æ˜¯å¼€å‘åˆ†æ”¯ï¼Œä½†æ˜¯åˆä¸èƒ½æäº¤ä»£ç ï¼Ÿå’‹åŠï¼Ÿ</li><li>master åˆ†æ”¯æ˜¯ç”Ÿäº§åˆ†æ”¯ï¼Œdevelop æµ‹è¯•å®Œäº†ï¼Œåˆä¸èƒ½ç›´æ¥äº¤äº’ï¼Œå’‹åŠï¼Ÿ</li><li>å¦‚æœä¸åˆå¹¶ï¼Œé‚£è¦æ˜¯ä¸èƒ½åŠæ—¶ä¸Šçº¿ï¼Œdevelop æ²¡åŠæ³•ç»§ç»­åˆå¹¶æ–°çš„åŠŸèƒ½äº†ï¼Œå·¥ä½œå°±åœäº†ï¼Ÿ</li><li>ä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œåˆå¹¶åˆ° master åˆ†ä¹‹åï¼Œçº¿ä¸Šç¯å¢ƒæœ‰ä¸ª bug éœ€è¦ä¿®å¤ï¼Œå’‹åŠï¼Ÿ</li></ol><p>Bingo~è¿™ä¸ªæ—¶å€™å°±ç”¨åˆ°äº†è¾…åŠ©åˆ†æ”¯ã€‚</p><h2 id="è¾…åŠ©åˆ†æ”¯"><a href="#è¾…åŠ©åˆ†æ”¯" class="headerlink" title="è¾…åŠ©åˆ†æ”¯"></a>è¾…åŠ©åˆ†æ”¯</h2><p>è¾…åŠ©åˆ†æ”¯æ˜¯è¾…åŠ©å›¢é˜Ÿè¿›è¡Œå¹¶è¡Œå¼€å‘ï¼ŒåŠŸèƒ½è·Ÿè¸ªï¼Œçº¿ä¸Šå¿«é€Ÿä¿®å¤ï¼Œä¸ä¸»åˆ†æ”¯ä¸åŒï¼Œè¿™äº›åˆ†æ”¯ä¸æ˜¯é•¿æœŸæ”¯æŒåˆ†æ”¯ï¼Œå®Œæˆä¹‹åä¼šåˆ é™¤ã€‚</p><p>è¿™äº›åˆ†æ”¯æ¯ä¸€ä¸ªéƒ½æœ‰ç‰¹å®šç›®çš„ï¼Œå¿…é¡»éµå®ˆå…³äºåˆ†æ”¯çš„èµ·å§‹åˆ†æ”¯ä»¥åŠåˆå¹¶ç›®æ ‡åˆ†æ”¯çš„è§„åˆ™ã€‚</p><p>è¾…åŠ©åˆ†æ”¯æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>feature åŠŸèƒ½åˆ†æ”¯</li><li>bugfix ç¼ºé™·ä¿®å¤åˆ†æ”¯ (åœ¨åŸæ–‡ä¸­å¹¶æœªæåŠï¼Œä½†æ˜¯ <a href="https://github.com/petervanderdoes/gitflow-avh/wiki/Installing-on-Mac-OS-X">avh</a> ç‰ˆæœ¬ git-flow åŒ…å«æ­¤åˆ†æ”¯)</li><li>release å‘å¸ƒåˆ†æ”¯</li><li>hotfix çƒ­ä¿®å¤åˆ†æ”¯</li><li>support é•¿æœŸæ”¯æŒåˆ†æ”¯</li></ul><p>å…ˆæ¥ä¸€å¼ å›¾ï¼Œå¤§å®¶æ„Ÿå—ä¸€ä¸‹ã€‚</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/git-flow-branch.jpeg" alt="img"></p><h3 id="feature-åˆ†æ”¯"><a href="#feature-åˆ†æ”¯" class="headerlink" title="feature åˆ†æ”¯"></a>feature åˆ†æ”¯</h3><p>ã€å¼ºåˆ¶ã€‘å‡ºè‡ªï¼šdevelop åˆ†æ”¯<br>ã€å¼ºåˆ¶ã€‘åˆå¹¶å›ï¼šdevelop åˆ†æ”¯<br>ã€å¼ºåˆ¶ã€‘å‘½åè§„èŒƒï¼š/feature/[è‹±æ–‡åŠŸèƒ½åç§°]</p><p>åŠŸèƒ½åˆ†æ”¯çš„æœ¬è´¨æ˜¯ï¼Œåªè¦åŠŸèƒ½å¤„äºå¼€å‘é˜¶æ®µï¼Œå®ƒå°±ä¼šå­˜åœ¨ï¼Œä½†æœ€ç»ˆä¼šåˆå¹¶å› develop æˆ–ä¸¢å¼ƒã€‚</p><p>åŸæ–‡ä¸­æåˆ°ä¸€å¥è¯â€œFeature branches typically exist in developer repos only, not in origin. â€åŠŸèƒ½åˆ†æ”¯é€šå¸¸åªå­˜åœ¨äºå¼€å‘è€…æœ¬åœ°ä»“åº“ï¼Œè€Œä¸åœ¨è¿œç¨‹ä»“åº“ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬æ ¹æ®å®é™…æƒ…å†µæ¥è°ƒæ•´ï¼ŒåŠŸèƒ½å¼€å‘å¤šäººåä½œå¾ˆå¸¸è§ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¤ä¸ºåŠŸèƒ½åˆ†æ”¯åº”è¯¥å­˜åœ¨è¿œç¨‹ä»“åº“ã€‚</p><p>feature è§„å®šï¼š</p><ol><li>ä»¥åŠŸèƒ½ä¸ºå•ä½ä» develop æ‹‰ä¸€ä¸ª feature åˆ†æ”¯</li><li>æ¯ä¸ª feature åˆ†æ”¯é¢—ç²’è¦å°½é‡å°ï¼Œä»¥åˆ©äºå¿«é€Ÿè¿­ä»£å’Œé¿å…å†²çª</li><li>åœ¨æœ¬åœ°å•å…ƒæµ‹è¯•åŠ review é€šè¿‡åï¼Œå‘é¡¹ç›®ä¸»ç®¡ç”³è¯·ï¼Œç”±é¡¹ç›®ä¸»ç®¡æˆ–ä¸“äººåˆå¹¶æ¨é€åˆ° Gitlab çš„ develop</li><li>åˆå¹¶å‰ï¼Œåº”å…ˆæ‹‰å–è¿œç¨‹ develop å°†æœ¬åœ° develop æ›´æ–°</li><li>feature åˆ†æ”¯åªä¸ develop åˆ†æ”¯äº¤äº’ï¼Œä¸èƒ½ä¸ master åˆ†æ”¯ç›´æ¥äº¤äº’</li></ol><p>æ­¤åˆ†æ”¯è§£å†³äº†æˆ‘ä»¬ç¬¬ä¸€ä¸ªç–‘é—®</p><ul><li>develop æ˜¯å¼€å‘åˆ†æ”¯ï¼Œä½†æ˜¯åˆä¸èƒ½æäº¤ä»£ç ï¼Ÿå’‹åŠï¼Ÿ</li></ul><p>æ‰€æœ‰çš„å¼€å‘éƒ½æ˜¯åœ¨ feature åˆ†æ”¯ä¸Šè¿›è¡Œï¼Œæœ€ç»ˆåˆå¹¶å› develop åˆ†æ”¯ä¸Šã€‚</p><h3 id="release-åˆ†æ”¯"><a href="#release-åˆ†æ”¯" class="headerlink" title="release åˆ†æ”¯"></a>release åˆ†æ”¯</h3><p>ã€å¼ºåˆ¶ã€‘å‡ºè‡ªï¼šdevelop åˆ†æ”¯<br>ã€å¼ºåˆ¶ã€‘åˆå¹¶å›ï¼šdevelop å’Œ master åˆ†æ”¯<br>ã€å¼ºåˆ¶ã€‘å‘½åè§„èŒƒï¼š/release/[å‘å¸ƒç‰ˆæœ¬å·]</p><p>å‘å¸ƒåˆ†æ”¯ä¸ºä¸‹ä¸€ä¸ªç”Ÿäº§ç‰ˆæœ¬ï¼Œåªå…è®¸å°é”™è¯¯çš„ä¿®å¤å’Œå‡†å¤‡å‘å¸ƒçš„å…ƒæ•°æ® [ç‰ˆæœ¬å·ï¼Œå‘å¸ƒæ—¥å¿—ï¼Œæ—¥æœŸç­‰] çš„ä¿®æ”¹ã€‚æœ€ç»ˆå‘å¸ƒç‰ˆæœ¬å·ï¼Œåœ¨å‘å¸ƒåˆ†æ”¯å†³å®šã€‚</p><p>é€šè¿‡å‘å¸ƒåˆ†æ”¯ï¼Œå¯ä»¥é‡Šæ”¾ develop åˆ†æ”¯ï¼Œä»¥è¿›è¡Œä¸‹ä¸€é˜¶æ®µçš„å·¥ä½œã€‚</p><p>å‘å¸ƒåˆ†æ”¯æˆ‘ä»¬è§„å®šï¼š</p><ol><li>ç”Ÿæˆ release åˆ†æ”¯ï¼Œé¦–å…ˆä¿®æ”¹ç‰ˆæœ¬å·ï¼Œä»¥åŒºåˆ« develop åˆ†æ”¯çš„ç‰ˆæœ¬</li><li>åªå­˜åœ¨ä¸€ä¸ªå‘å¸ƒåˆ†æ”¯ (è¿™ä¸ªæ˜¯ gitflow ç›®å‰çš„è§„å®šï¼Œå¯ä»¥è®¨è®ºä¸€ä¸‹)</li><li>å½“éœ€è¦ä¸ºå‘å¸ƒæ–°ç‰ˆåšå‡†å¤‡æ—¶ï¼Œä» develop è¡ç”Ÿå‡ºä¸€ä¸ª release åˆ†æ”¯</li><li>release åˆ†æ”¯ä¹Ÿå¯ä»¥ä» develop åˆ†æ”¯ä¸ŠæŒ‡å®š commit æ´¾ç”Ÿå‡º</li><li>release åˆ†æ”¯æµ‹è¯•é€šè¿‡åï¼Œåˆå¹¶åˆ° master åˆ†æ”¯å¹¶ä¸”ç»™ master æ ‡è®°ä¸€ä¸ªç‰ˆæœ¬å·</li><li><strong>release åˆ†æ”¯ä¸€æ—¦å»ºç«‹å°±å°†ç‹¬ç«‹ï¼Œä¸å†ä»å…¶ä»–åˆ†æ”¯åˆå¹¶ä»£ç </strong></li><li>å¿…é¡»åˆå¹¶å› develop åˆ†æ”¯å’Œ master åˆ†æ”¯æˆ–åºŸå¼ƒ</li></ol><p>æ­¤åˆ†æ”¯è§£å†³äº†æˆ‘ä»¬ä¸¤ä¸ªç–‘é—®</p><ul><li>master åˆ†æ”¯æ˜¯ç”Ÿäº§åˆ†æ”¯ï¼Œdevelop æµ‹è¯•å®Œäº†ï¼Œåˆä¸èƒ½ç›´æ¥äº¤äº’ï¼Œå’‹åŠï¼Ÿ</li><li>å¦‚æœä¸åˆå¹¶ï¼Œé‚£è¦æ˜¯ä¸èƒ½åŠæ—¶ä¸Šçº¿ï¼Œdevelop æ²¡åŠæ³•ç»§ç»­åˆå¹¶æ–°çš„åŠŸèƒ½äº†ï¼Œå·¥ä½œå°±åœäº†ï¼Ÿ</li></ul><p>master é€šè¿‡å¼•å…¥ release åˆ†æ”¯æ¥è¿›è¡Œ develop è¿›è¡Œäº¤äº’ï¼Œä½¿ç”¨ release åˆ†æ”¯ï¼Œæ—¢èƒ½è¿›è¡Œå‘å¸ƒå‰çš„ç‹¬ç«‹éªŒè¯ï¼Œåˆèƒ½ä¸å½±å“å…¶ä»–çš„åŠŸèƒ½åˆ†æ”¯åˆå¹¶ä¼š develop è¿›è¡Œæ¯æ—¥æ„å»ºã€‚</p><h3 id="bugfix-åˆ†æ”¯"><a href="#bugfix-åˆ†æ”¯" class="headerlink" title="bugfix åˆ†æ”¯"></a>bugfix åˆ†æ”¯</h3><p>ã€å¼ºåˆ¶ã€‘å‡ºè‡ªï¼šdevelop åˆ†æ”¯<br>ã€å¼ºåˆ¶ã€‘åˆå¹¶å›ï¼šdevelop åˆ†æ”¯<br>ã€å¼ºåˆ¶ã€‘å‘½åè§„èŒƒï¼š/bugfix/[bug - è‹±æ–‡ç¼ºé™·åç§°æˆ–è€… bug ç¼–å·]</p><p>ç¼ºé™·åˆ†æ”¯ï¼Œä¸»è¦è¿›è¡Œç¼ºé™·çš„ä¿®å¤è®°å½•ï¼Œå’ŒåŠŸèƒ½åˆ†æ”¯ç±»ä¼¼ï¼Œgitflow æµç¨‹ä¸­ï¼Œæ²¡æœ‰å®šä¹‰ç¼ºé™·åˆ†æ”¯ï¼Œä¸ºäº†åŒºåˆ†ç¼ºé™·ä¸åŠŸèƒ½ï¼Œæ–°å»ºç¼ºé™·åˆ†æ”¯ç”¨äºåŒºåˆ«åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥å¿½ç•¥æ­¤åˆ†æ”¯ï¼Œç›´æ¥åœ¨åŠŸèƒ½åˆ†æ”¯ä¸­è¿›è¡Œä¿®å¤ã€‚æ³¨æ„åœ¨ commit message ä¸­åšåŒºåˆ†ã€‚</p><h3 id="hotfix-åˆ†æ”¯"><a href="#hotfix-åˆ†æ”¯" class="headerlink" title="hotfix åˆ†æ”¯"></a>hotfix åˆ†æ”¯</h3><p>ã€å¼ºåˆ¶ã€‘å‡ºè‡ªï¼šmaster åˆ†æ”¯<br>ã€å¼ºåˆ¶ã€‘åˆå¹¶å›ï¼šmaster åˆ†æ”¯ å’Œ [develop åˆ†æ”¯ release åˆ†æ”¯]<br>ã€å¼ºåˆ¶ã€‘å‘½åè§„èŒƒï¼š/hotfix/[å‘å¸ƒç‰ˆæœ¬å·]</p><p>çƒ­ä¿®å¤åˆ†æ”¯ï¼Œç±»ä¼¼äºå‘å¸ƒåˆ†æ”¯ï¼Œéƒ½æ˜¯ä¸ºäº†å‡†å¤‡æ–°çš„ç”Ÿäº§ä¸Šçº¿ç‰ˆæœ¬ã€‚</p><p>å½“çº¿ä¸Šç‰ˆæœ¬å‡ºç°äº†ä¸å¾—ä¸ç«‹å³ä¿®å¤çš„ç¼ºé™·æ—¶ï¼Œå¯ä»¥ä» master åˆ†æ”¯æ–°å»ºçƒ­ä¿®å¤åˆ†æ”¯ã€‚ä¿®å¤å®Œæˆä¹‹åï¼Œæ›´æ”¹ç‰ˆæœ¬å·ï¼Œåˆå¹¶å› master åˆ†æ”¯ä»¥åŠ develop åˆ†æ”¯ã€‚</p><p><strong>æ³¨æ„ï¼Œå½“åœ¨çƒ­ä¿®å¤ä¹‹å‰å·²ç»å‘å¸ƒäº†ä¸‹ä¸€ä¸ªå‘å¸ƒç‰ˆæœ¬çš„æ—¶å€™ï¼Œæ­¤æ—¶çƒ­ä¿®å¤åˆ†æ”¯åº”è¯¥åˆå¹¶å› master å’Œ release åˆ†æ”¯ï¼Œrelease åˆ†æ”¯å®Œæˆä¹‹åï¼Œä¼šæŠŠçƒ­ä¿®å¤çš„åˆ†æ”¯åˆå¹¶å› develop åˆ†æ”¯ã€‚</strong></p><p>hotfix åˆ†æ”¯è§„å®šï¼š</p><ol><li>hotfix åˆ†æ”¯ç”¨æ¥å¿«é€Ÿç»™å·²å‘å¸ƒäº§å“ä¿®å¤ bug æˆ–å¾®è°ƒåŠŸèƒ½</li><li>åªèƒ½ä» master åˆ†æ”¯æŒ‡å®š tag ç‰ˆæœ¬è¡ç”Ÿå‡ºæ¥</li><li>ä¸€æ—¦å®Œæˆä¿®å¤ bugï¼Œå¿…é¡»åˆå¹¶å› master åˆ†æ”¯å’Œ develop åˆ†æ”¯</li><li>master è¢«åˆå¹¶åï¼Œåº”è¯¥è¢«æ ‡è®°ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬å·</li><li>hotfix åˆ†æ”¯ä¸€æ—¦å»ºç«‹å°±å°†ç‹¬ç«‹ï¼Œä¸å¯å†ä»å…¶ä»–åˆ†æ”¯ pull ä»£ç </li></ol><p>æ­¤åˆ†æ”¯è§£å†³äº†æˆ‘ä»¬æœ€åä¸€ä¸ªç–‘é—®</p><ul><li>ä½†æ˜¯æœ‰ä¸ªé—®é¢˜ï¼Œåˆå¹¶åˆ° master åˆ†ä¹‹åï¼Œçº¿ä¸Šç¯å¢ƒæœ‰ä¸ª bug éœ€è¦ä¿®å¤ï¼Œå’‹åŠï¼Ÿ</li></ul><p>ç”Ÿäº§ç¯å¢ƒçš„ bug ä¿®å¤ç”± hotfix åˆ†æ”¯è´Ÿè´£ã€‚</p><p>å†æ¥ä¸ªå¤§å›¾ å¼•è‡ª <a href="https://www.jianshu.com/p/d46da933c180">https://www.jianshu.com/p/d46da933c180</a></p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/git-flow.png" alt="img"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 7788 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¥³æ€§ç®¡ç†è€…</title>
      <link href="/2021/08/29/%E5%A5%B3%E6%80%A7%E7%AE%A1%E7%90%86%E8%80%85/"/>
      <url>/2021/08/29/%E5%A5%B3%E6%80%A7%E7%AE%A1%E7%90%86%E8%80%85/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€è¿‘åœ¨è¿½ã€Šç†æƒ³ä¹‹åŸã€‹è¿™éƒ¨ç”µè§†å‰§ï¼Œçœ‹åˆ°é‡Œé¢æ±ªæ˜å®‡æåˆ°äº†ä»–çœ¼ä¸­çš„å¥³æ€§ç®¡ç†è€…ï¼š</p><blockquote><p>ä¸€ä¸ªå¥³äººå¤©ç”Ÿå°±ä¸é€‚åˆå»åšç®¡ç†å±‚ï¼Œå¤©å¤©æŠ ç»†èŠ‚ï¼Œæƒ…ç»ªåŒ–åˆæ•æ„Ÿã€‚ä½ æ— æ„å½“ä¸­çš„ä¸€å¥è¯ï¼Œæœ‰å¯èƒ½å°±å¾—ç½ªäº†å¥¹ï¼Œç„¶åå°±åœ¨è‚šå­é‡Œæš—æ’®æ’®åœ°ç›˜ç®—äº†åˆç›˜ç®—ï¼Œè¯´ä¸å®šæŸä¸€å¤©å°±æˆäº†ä½ çš„ç½ªçŠ¶äº†ã€‚æˆ‘å¹²äº†è¿™ä¹ˆå¤šå¹´çš„å·¥ä½œï¼Œä»æ¥å°±æ²¡è§åˆ°è¿‡ä¸€ä¸ªåˆæ ¼çš„å¥³æ€§ç®¡ç†è€…ã€‚</p></blockquote><span id="more"></span><p>å¬ä»–è¯´å®Œä»¥åï¼Œæˆ‘çš„ç¬¬ä¸€ååº”ä¸å¤¸å¼ çš„è®²ï¼Œè·Ÿæ—è¾¹çš„èåœå›æ‹æ‰‹å¤§ç¬‘ã€‚è™½ç„¶æˆ‘è‡ªå·±ä½œä¸ºå¥³æ€§ä¹Ÿåœ¨å­¦ç€èµ°å‘ç®¡ç†çš„é“è·¯ï¼Œä½†æ˜¯å¬å®Œè¿™æ®µè¯„è®ºå¹¶æ²¡æœ‰æ°”æ„¤ï¼Œè€Œæ˜¯æƒ³åˆ°äº†ä¸Šä¸€å®¶å…¬å¸æˆ‘çš„ç»„é•¿ï¼Œä¹Ÿæ˜¯ä¸€ä½å¥³æ€§ã€‚æ²¡è®°é”™çš„è¯ï¼Œæˆ‘æ˜¯å› ä¸ºå‘çƒ§è¯·äº†ä¸€å¤©å‡ï¼Œä½†å› ä¸ºé‚»å±…è£…ä¿®ï¼Œåœ¨å®¶å¾…ç€ç®€ç›´æ˜¯æŠ˜ç£¨è‡ªå·±ï¼Œç”µé’»çš„å£°éŸ³ä»¿ä½›ä¸æ˜¯ä»éš”å£ä¼ æ¥çš„ï¼Œè€Œæ˜¯åœ¨æˆ‘è„‘å­é‡Œæ‰“æ´çš„å£°éŸ³ã€‚äºæ˜¯ä¹ï¼Œæˆ‘å»æ¥¼ä¸‹çš„ç†å‘åº—åç€ï¼Œé¡ºä¾¿çƒ«äº†ä¸ªå¤´å‘â€¦â€¦çœŸçš„æ˜¯é¡ºä¾¿ã€‚å¥³ç”Ÿçƒ«äº†å¤´å‘ä¸ªæœ‹å‹åœˆæ˜¯ä¸æ˜¯ä¹Ÿå¾ˆæ­£å¸¸å‘¢ï¼Ÿæœ‰é—®é¢˜å—ï¼Ÿæˆ‘è§‰å¾—æ²¡æœ‰é—®é¢˜ï¼Œæ—¶è‡³ä»Šæ—¥æˆ‘éƒ½è§‰å¾—æ²¡æœ‰é—®é¢˜ï¼ˆå¥½å§ï¼Œæˆ‘è¢«æ•™è‚²äº†ï¼Œå¦¥åå§ï¼Œæœ‰é—®é¢˜ï¼Œæˆ‘åº”è¯¥åœ¨æœ‹å‹åœˆæŠŠå¥¹å±è”½å¯¹å—ï¼Ÿï¼‰ã€‚ä½†æ˜¯æˆ‘è¿™ä½ç»„é•¿ç”Ÿäº†å¤§æ°”äº†ï¼Œå¥¹è§‰å¾—æˆ‘è¯·å‡å°±æ˜¯ä¸ºäº†çƒ«å¤´ï¼Œå‘çƒ§ï¼Ÿå“ˆï¼Œè‚¯å®šæ˜¯åœ¨æ’’è°ã€‚é‚£è¯•é—®æˆ‘çœŸçš„è¯·å‡å»çƒ«å¤´æœ‰é—®é¢˜å—ï¼Ÿæ­¤å¤„å¿½ç•¥ä¸€ä¸‡å­—ï¼Œé¿å…æŠŠæˆ‘çš„å¹¼ç¨šè¡¨ç°çš„å¤ªéœ²éª¨ğŸ™„ã€‚å¾ˆæœ‰æ„æ€å§ï¼Œå¬å®Œæ±ªæ˜å®‡çš„è¯ï¼Œå°±æƒ³åˆ°äº†æˆ‘çš„è¿™ä½åŒäº‹ã€‚ä»¥å‰ç»å†çš„æ—¶å€™ä¼šå§”å±ˆï¼Œç°åœ¨æƒ³èµ·æ¥åªå‰©ä¸‹å¥½ç©å„¿äº†ï¼Œäººå°±æ˜¯å¾ˆå¥½ç©å„¿çš„ä¸æ˜¯å—ã€‚</p><p>å½“ç„¶ï¼Œå¾çŸ¥å¹³å›å¤æ±ªæ˜å®‡çš„æ˜¯ï¼š</p><blockquote><p>è¿™ä¸ªå¥³æ€§ç®¡ç†è€…æœ‰è¿™æ ·é‚£æ ·çš„é—®é¢˜ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªä¼˜ç‚¹ï¼šä¸€ é‡å¿ƒå°ï¼›äºŒ å¿ è¯šåº¦é«˜ã€‚</p></blockquote><p>è²Œä¼¼è¿™ä¸¤ä¸ªä¼˜ç‚¹å¾—åˆ°äº†å¼¹å¹•çš„ä¸€è‡´è®¤å¯ã€‚</p><p>å…¶å®æˆ‘è§‰å¾—æ±ªæ˜å®‡çš„çœ‹æ³•æ—¢æ˜¯ç°çŠ¶ï¼Œä¹Ÿå¾ˆå®¢è§‚ï¼Œå¥³æ€§åŒèƒå®åœ¨æ²¡æœ‰å¿…è¦æ€¥ç€é¸£ä¸å¹³ã€‚ä½ æƒ³æƒ³ä½ èº«è¾¹çš„å¥³åŒäº‹+è‡ªå·±ï¼Œå“ªä¸ªä¸æ˜¯æš—æ’®æ’®çš„åœ¨è®°ä»‡ï¼Œå“ˆå“ˆã€‚å¥³æ€§æœ¬èº«å°±æ˜¯åå‘æ³¨é‡ç»†èŠ‚ï¼Œè€Œä¸”éå¸¸æ„Ÿæ€§çš„ã€‚æˆ‘ä»¬è¦åšåˆ°çš„é¦–å…ˆæ˜¯æ˜ç¡®åœ°æ„è¯†åˆ°è¿™ä¸€ç‚¹ï¼Œç„¶ååœ¨å·¥ä½œä¸­æ—¶åˆ»æé†’è‡ªå·±è§„é¿è¿™äº›éšœç¢ã€‚åè¿‡æ¥è¯´ï¼Œå¤è¯éƒ½è¯´ ç»†èŠ‚å†³å®šæˆè´¥ï¼Œé‚£æˆ‘ä»¬æ³¨é‡ç»†èŠ‚æœ‰é”™å—ï¼Ÿæˆ‘ç»™è‡ªå·±å®šçš„ç›®æ ‡æ˜¯ï¼šç»†èŠ‚æ›´å¤šçš„æ˜¯åœ¨è¦æ±‚è‡ªå·±çš„æ—¶å€™ï¼Œé¢å¯¹åŒäº‹å’Œä¸‹å±ï¼Œå°½æƒ…å±•ç¤ºè‡ªå·±çš„å¤§å±€è§‚ï¼</p><hr><p><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fwww.17usatao.com%2Fd%2Ffile%2F2016%2F10%2F28%2Fcbdd1670d4dbf1317459d709213f6686.jpg&refer=http%3A%2F%2Fwww.17usatao.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1632991656&t=465f59b1ef5bf647b54016e07d48494c"></p>]]></content>
      
      
      
        <tags>
            
            <tag> è¯»ä¹¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cordova - config.xml</title>
      <link href="/2021/08/19/Cordova_config.xml/"/>
      <url>/2021/08/19/Cordova_config.xml/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p><code>config.xml</code> å­˜å‚¨ç€ cordova åº”ç”¨çš„å…¨å±€é…ç½®ä¿¡æ¯ã€‚</p><p>æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹ <a href="https://cordova.apache.org/docs/en/10.x/config_ref/">å®˜æ–¹å‚è€ƒæ–‡æ¡£</a>ã€‚</p><ul><li>widgetï¼š<code>config.xml </code> ä¸­çš„æ ¹å…ƒç´ </li><li>nameï¼šæŒ‡å®š app åï¼Œå®ƒä¼šæ˜¾ç¤ºåœ¨è®¾å¤‡çš„ä¸»å±å¹•ä¸Š</li><li>descriptionï¼šapp æè¿°</li><li>authorï¼šä½œè€…ä¿¡æ¯</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">widget</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>TommyGirl<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span></span><br><span class="line">      A beauty.</span><br><span class="line">  <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">author</span> <span class="attr">email</span>=<span class="string">&quot;zhengyt_91@163.com&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://tommygirl.cn&quot;</span>&gt;</span></span><br><span class="line">      YYLittleCat</span><br><span class="line">  <span class="tag">&lt;/<span class="name">author</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br></pre></td></tr></table></figure><span id="more"></span><h3 id="content"><a href="#content" class="headerlink" title="content"></a>content</h3><p>æŒ‡å®š App çš„æ ¹é¡µé¢ï¼Œé»˜è®¤æ˜¯ <code>index.html</code><br>ç¤ºä¾‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">widget</span> <span class="attr">...</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">content</span> <span class="attr">src</span>=<span class="string">&quot;startPage.html&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">content</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">widget</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="access"><a href="#access" class="headerlink" title="access"></a>access</h3><p>é…ç½®å…è®¸ App å‘èµ·çš„ç½‘ç»œè¯·æ±‚ï¼ˆimages, XHRs, etcï¼‰åœ°å€</p><p>æ³¨æ„ï¼šæ²¡æœ‰é…ç½® <code>access</code> æ ‡ç­¾æ—¶ï¼Œï¼Œåªæœ‰ <code>file://</code> URL è¢«å…è®¸è®¿é—®ã€‚ä½†ä¸€èˆ¬æƒ…å†µï¼ŒApp åŒ…å«ä¸€ä¸ªé»˜è®¤çš„ <code>&lt;access origin=&quot;*&quot;&gt;</code> æ ‡ç­¾ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å…è®¸è®¿é—® google.com:--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">access</span> <span class="attr">origin</span>=<span class="string">&quot;http://google.com&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--å…è®¸è®¿é—®å®‰å…¨åœ°å€ google.com (https://):--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">access</span> <span class="attr">origin</span>=<span class="string">&quot;https://google.com&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--å…è®¸è®¿é—® google.com çš„æ‰€æœ‰å­åŸŸå, æ¯”å¦‚ mail.google.com and docs.google.com:--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">access</span> <span class="attr">origin</span>=<span class="string">&quot;http://*.google.com&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--ä¸é˜»æ­¢ä»»ä½•ç½‘ç»œè¯·æ±‚ï¼Œæ¯”å¦‚ google.com and developer.mozilla.org:--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">access</span> <span class="attr">origin</span>=<span class="string">&quot;*&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--This is the default value for newly created CLI projects.--&gt;</span></span><br></pre></td></tr></table></figure><h3 id="allow-navigation"><a href="#allow-navigation" class="headerlink" title="allow-navigation"></a>allow-navigation</h3><p>æ§åˆ¶å†…éƒ¨çš„ <code>WebView</code> å¯ä»¥åŠ è½½çš„ <code>URL</code>ï¼Œåªé€‚ç”¨äºé¡¶çº§å¯¼èˆªã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªå…è®¸ <code>file://</code> ç±»å‹çš„ URL è®¿é—®ã€‚å¦‚æœè¦åŠ è½½å…¶ä»–çš„ URLï¼Œéœ€è¦é…ç½® <code>&lt;allow-navigation&gt;</code> æ ‡ç­¾</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å…è®¸è®¿é—® example.com --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-navigation</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/*&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å…è®¸ä½¿ç”¨é€šé…ç¬¦ï¼Œåè®®ï¼Œä¸»æœºï¼Œåœ°å€éƒ½å¯ä»¥ä½¿ç”¨ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-navigation</span> <span class="attr">href</span>=<span class="string">&quot;*://*.example.com/*&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨é€šé…ç¬¦ï¼Œå…è®¸æ‰€æœ‰ç½‘å€è®¿é—®ï¼ŒåŒ…æ‹¬HTTP and HTTPS and file</span></span><br><span class="line"><span class="comment">     *ä¸æ¨èä½¿ç”¨* --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-navigation</span> <span class="attr">href</span>=<span class="string">&quot;*&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- ä¸Šé¢çš„å’Œä¸‹é¢è¿™ä¸‰æ¡ç­‰ä»· --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-navigation</span> <span class="attr">href</span>=<span class="string">&quot;http://*/*&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-navigation</span> <span class="attr">href</span>=<span class="string">&quot;https://*/*&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-navigation</span> <span class="attr">href</span>=<span class="string">&quot;data:*&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>ä¸ºä»€ä¹ˆè¯´ä¸æ¨èä½¿ç”¨ <code>&lt;allow-navigation href=&quot;*&quot; /&gt;</code> å…è®¸æ‰€æœ‰ç½‘å€è®¿é—®å‘¢ï¼Œæ˜¨å¤©æœ‰ä¸ªé¡µé¢ä½¿ç”¨ <code>window.location.href=&#39;sms://10086&#39;;</code> çš„æ–¹å¼æƒ³æ‰“å¼€å‘çŸ­ä¿¡çš„åŠŸèƒ½ï¼Œä½† Cordova æç¤º â€œä¸æ”¯æŒçš„URLâ€ ï¼Œè¯´æ˜æ²¡æœ‰ç›´æ¥è°ƒç”¨ç³»ç»Ÿèƒ½åŠ›ï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªæ–°çš„å¯¼èˆªå»æ‰“å¼€äº†ã€‚æ‰€ä»¥å¯¹äº smsã€telã€mail ç­‰ç³»ç»Ÿèƒ½åŠ›çš„è°ƒç”¨ï¼Œåº”è¯¥ä½¿ç”¨ allow-intent ï¼Œå¹¶ä¸” allow-navigation ä¸å…è®¸é€šé…æ‰€æœ‰çš„è®¿é—®ã€‚</p><h3 id="allow-intent"><a href="#allow-intent" class="headerlink" title="allow-intent"></a>allow-intent</h3><p>å®šä¹‰ App å¯ä»¥è¦æ±‚æ“ä½œç³»ç»Ÿæ‰“å¼€çš„é“¾æ¥åœ°å€ï¼Œé»˜è®¤ä»»ä½•å¤–éƒ¨è¯·æ±‚é“¾æ¥éƒ½è¢«ç¦æ­¢ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å…è®¸åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç½‘å€ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;http://*/*&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;https://*/*&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å…è®¸åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ example.com --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;http://example.com/*&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å…è®¸é€šé…ç¬¦çš„ä½¿ç”¨ï¼Œåœ¨åè®®ã€ä¸»æœºã€åœ°å€ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;*://*.example.com/*&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å…è®¸åœ¨çŸ­ä¿¡åº”ç”¨ä¸­æ‰“å¼€sms:é“¾æ¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;sms:*&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å…è®¸åœ¨ç”µè¯åº”ç”¨ä¸­æ‰“å¼€tel:é“¾æ¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;tel:*&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å…è®¸åœ¨åœ°å›¾åº”ç”¨ä¸­æ‰“å¼€geo:é“¾æ¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;geo:*&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- å…è®¸åœ¨å·²å®‰è£…çš„appä¸­æ‰“å¼€æœªè¢«è¯†åˆ«çš„urlåœ°å€</span></span><br><span class="line"><span class="comment">     *NOT RECOMMENDED* --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">allow-intent</span> <span class="attr">href</span>=<span class="string">&quot;*&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><h3 id="preference"><a href="#preference" class="headerlink" title="preference"></a>preference</h3><p>å…³äº WebView å’Œé¡µé¢è¡Œä¸ºçš„åå¥½è®¾ç½®ã€‚</p><p>é…ç½®è¯¦æƒ…ï¼š<a href="https://cordova.apache.org/docs/en/10.x/config_ref/#preference">preference</a></p><h3 id="feature"><a href="#feature" class="headerlink" title="feature"></a>feature</h3><p>å®˜æ–¹çš„ç¿»è¯‘æˆ‘æ²¡ä»”ç»†çœ‹ï¼Œè¿™é‡Œæˆ‘ä¸€èˆ¬å†™éœ€è¦å¯ç”¨çš„æ’ä»¶ç±»ã€‚</p><p>æ›´å¤šè¯·å‚è€ƒï¼š<a href="https://cordova.apache.org/docs/en/10.x/config_ref/#feature">feature</a></p><h3 id="platform"><a href="#platform" class="headerlink" title="platform"></a>platform</h3><p>å¯¹åº”çš„å¹³å°ï¼ŒiOSã€Android ç­‰ç­‰ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">platform</span> <span class="attr">name</span>=<span class="string">&quot;android&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">preference</span> <span class="attr">name</span>=<span class="string">&quot;Fullscreen&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">platform</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> Cordova </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è½¬è½½ã€‘å·§ç”¨ Nginx å¿«é€Ÿå®ç° HTTPS åŒå‘è®¤è¯</title>
      <link href="/2021/08/11/Nginx_HTTPS/"/>
      <url>/2021/08/11/Nginx_HTTPS/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä»¥ä¸‹å†…å®¹è½¬è½½è‡ª <a href="https://www.hi-linux.com/posts/38492.html">è¿™é‡Œ</a> ã€‚è½¬è½½çš„åŸå› æ˜¯æ€•ä»–ä»¬çš„ç½‘ç«™çªç„¶è®¿é—®ä¸äº†ğŸ˜‚ã€‚</p><hr><p>ç ”ç©¶ HTTPS çš„åŒå‘è®¤è¯å®ç°ä¸åŸç†ï¼Œè¸©äº†ä¸å°‘å‘ï¼Œç»ˆäºæ•´ä¸ªæµç¨‹éƒ½è·‘é€šäº†ï¼Œç°åœ¨æ€»ç»“å‡ºä¸€ç¯‡æ–‡æ¡£æ¥ï¼ŒæŠŠä¸€äº›å¿ƒå¾—ï¼Œç‰¹åˆ«æ˜¯å®¹æ˜“è¸©å‘çš„åœ°æ–¹è®°å½•ä¸‹æ¥ã€‚</p><h2 id="1-åŸç†"><a href="#1-åŸç†" class="headerlink" title="1. åŸç†"></a>1. åŸç†</h2><p>åŒå‘è®¤è¯ï¼Œé¡¾åæ€ä¹‰ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½éœ€è¦éªŒè¯å¯¹æ–¹çš„èº«ä»½ï¼Œåœ¨å»ºç«‹ <code>HTTPS</code> è¿æ¥çš„è¿‡ç¨‹ä¸­ï¼Œæ¡æ‰‹çš„æµç¨‹æ¯”å•å‘è®¤è¯å¤šäº†å‡ æ­¥ã€‚å•å‘è®¤è¯çš„è¿‡ç¨‹ï¼Œå®¢æˆ·ç«¯ä»æœåŠ¡å™¨ç«¯ä¸‹è½½æœåŠ¡å™¨ç«¯å…¬é’¥è¯ä¹¦è¿›è¡ŒéªŒè¯ï¼Œç„¶åå»ºç«‹å®‰å…¨é€šä¿¡é€šé“ã€‚åŒå‘é€šä¿¡æµç¨‹ï¼Œå®¢æˆ·ç«¯é™¤äº†éœ€è¦ä»æœåŠ¡å™¨ç«¯ä¸‹è½½æœåŠ¡å™¨çš„å…¬é’¥è¯ä¹¦è¿›è¡ŒéªŒè¯å¤–ï¼Œè¿˜éœ€è¦æŠŠå®¢æˆ·ç«¯çš„å…¬é’¥è¯ä¹¦ä¸Šä¼ åˆ°æœåŠ¡å™¨ç«¯ç»™æœåŠ¡å™¨ç«¯è¿›è¡ŒéªŒè¯ï¼Œç­‰åŒæ–¹éƒ½è®¤è¯é€šè¿‡äº†ï¼Œæ‰å¼€å§‹å»ºç«‹å®‰å…¨é€šä¿¡é€šé“è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚</p><h3 id="1-1-å•å‘è®¤è¯æµç¨‹"><a href="#1-1-å•å‘è®¤è¯æµç¨‹" class="headerlink" title="1.1 å•å‘è®¤è¯æµç¨‹"></a>1.1 å•å‘è®¤è¯æµç¨‹</h3><p>å•å‘è®¤è¯æµç¨‹ä¸­ï¼ŒæœåŠ¡å™¨ç«¯ä¿å­˜ç€å…¬é’¥è¯ä¹¦å’Œç§é’¥ä¸¤ä¸ªæ–‡ä»¶ï¼Œæ•´ä¸ªæ¡æ‰‹è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><span id="more"></span><p><img src="https://ata2-img.cn-hangzhou.oss-pub.aliyun-inc.com/14158ca87e2f341ff044efd967f3e008.png" alt="img"></p><ol><li>å®¢æˆ·ç«¯å‘èµ·å»ºç«‹ HTTPS è¿æ¥è¯·æ±‚ï¼Œå°† SSL åè®®ç‰ˆæœ¬çš„ä¿¡æ¯å‘é€ç»™æœåŠ¡å™¨ç«¯ï¼›</li><li>æœåŠ¡å™¨ç«¯å°†æœ¬æœºçš„å…¬é’¥è¯ä¹¦ï¼ˆserver.crtï¼‰å‘é€ç»™å®¢æˆ·ç«¯ï¼›</li><li>å®¢æˆ·ç«¯è¯»å–å…¬é’¥è¯ä¹¦ (server.crt)ï¼Œå–å‡ºäº†æœåŠ¡ç«¯å…¬é’¥ï¼›</li><li>å®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼ˆå¯†é’¥ Rï¼‰ï¼Œç”¨åˆšæ‰å¾—åˆ°çš„æœåŠ¡å™¨å…¬é’¥å»åŠ å¯†è¿™ä¸ªéšæœºæ•°å½¢æˆå¯†æ–‡ï¼Œå‘é€ç»™æœåŠ¡ç«¯ï¼›</li><li>æœåŠ¡ç«¯ç”¨è‡ªå·±çš„ç§é’¥ (server.key) å»è§£å¯†è¿™ä¸ªå¯†æ–‡ï¼Œå¾—åˆ°äº†å¯†é’¥ R</li><li>æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åœ¨åç»­é€šè®¯è¿‡ç¨‹ä¸­å°±ä½¿ç”¨è¿™ä¸ªå¯†é’¥ R è¿›è¡Œé€šä¿¡äº†ã€‚</li></ol><h3 id="1-2-åŒå‘è®¤è¯æµç¨‹"><a href="#1-2-åŒå‘è®¤è¯æµç¨‹" class="headerlink" title="1.2 åŒå‘è®¤è¯æµç¨‹"></a>1.2 åŒå‘è®¤è¯æµç¨‹</h3><p><img src="https://ata2-img.cn-hangzhou.oss-pub.aliyun-inc.com/08e6235892053a81603a4c3d7c7f44ad.png" alt="img"></p><ol><li>å®¢æˆ·ç«¯å‘èµ·å»ºç«‹ HTTPS è¿æ¥è¯·æ±‚ï¼Œå°† SSL åè®®ç‰ˆæœ¬çš„ä¿¡æ¯å‘é€ç»™æœåŠ¡ç«¯ï¼›</li><li>æœåŠ¡å™¨ç«¯å°†æœ¬æœºçš„å…¬é’¥è¯ä¹¦ (server.crt) å‘é€ç»™å®¢æˆ·ç«¯ï¼›</li><li>å®¢æˆ·ç«¯è¯»å–å…¬é’¥è¯ä¹¦ (server.crt)ï¼Œå–å‡ºäº†æœåŠ¡ç«¯å…¬é’¥ï¼›</li><li>å®¢æˆ·ç«¯å°†å®¢æˆ·ç«¯å…¬é’¥è¯ä¹¦ (client.crt) å‘é€ç»™æœåŠ¡å™¨ç«¯ï¼›</li><li>æœåŠ¡å™¨ç«¯è§£å¯†å®¢æˆ·ç«¯å…¬é’¥è¯ä¹¦ï¼Œæ‹¿åˆ°å®¢æˆ·ç«¯å…¬é’¥ï¼›</li><li>å®¢æˆ·ç«¯å‘é€è‡ªå·±æ”¯æŒçš„åŠ å¯†æ–¹æ¡ˆç»™æœåŠ¡å™¨ç«¯ï¼›</li><li>æœåŠ¡å™¨ç«¯æ ¹æ®è‡ªå·±å’Œå®¢æˆ·ç«¯çš„èƒ½åŠ›ï¼Œé€‰æ‹©ä¸€ä¸ªåŒæ–¹éƒ½èƒ½æ¥å—çš„åŠ å¯†æ–¹æ¡ˆï¼Œä½¿ç”¨å®¢æˆ·ç«¯çš„å…¬é’¥åŠ å¯†åå‘é€ç»™å®¢æˆ·ç«¯ï¼›</li><li>å®¢æˆ·ç«¯ä½¿ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†åŠ å¯†æ–¹æ¡ˆï¼Œç”Ÿæˆä¸€ä¸ªéšæœºæ•° Rï¼Œä½¿ç”¨æœåŠ¡å™¨å…¬é’¥åŠ å¯†åä¼ ç»™æœåŠ¡å™¨ç«¯ï¼›</li><li>æœåŠ¡ç«¯ç”¨è‡ªå·±çš„ç§é’¥å»è§£å¯†è¿™ä¸ªå¯†æ–‡ï¼Œå¾—åˆ°äº†å¯†é’¥ R</li><li>æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯åœ¨åç»­é€šè®¯è¿‡ç¨‹ä¸­å°±ä½¿ç”¨è¿™ä¸ªå¯†é’¥ R è¿›è¡Œé€šä¿¡äº†ã€‚</li></ol><h2 id="2-è¯ä¹¦ç”Ÿæˆ"><a href="#2-è¯ä¹¦ç”Ÿæˆ" class="headerlink" title="2. è¯ä¹¦ç”Ÿæˆ"></a>2. è¯ä¹¦ç”Ÿæˆ</h2><p>ä»ä¸Šä¸€ç« å†…å®¹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºæ¥ï¼Œå¦‚æœè¦æŠŠæ•´ä¸ªåŒå‘è®¤è¯çš„æµç¨‹è·‘é€šï¼Œæœ€ç»ˆéœ€è¦äº”ä¸ªè¯ä¹¦æ–‡ä»¶ï¼š</p><ul><li>æœåŠ¡å™¨ç«¯å…¬é’¥è¯ä¹¦ï¼šserver.crt</li><li>æœåŠ¡å™¨ç«¯ç§é’¥æ–‡ä»¶ï¼šserver.key</li><li>å®¢æˆ·ç«¯å…¬é’¥è¯ä¹¦ï¼šclient.crt</li><li>å®¢æˆ·ç«¯ç§é’¥æ–‡ä»¶ï¼šclient.key</li><li>å®¢æˆ·ç«¯é›†æˆè¯ä¹¦ï¼ˆåŒ…æ‹¬å…¬é’¥å’Œç§é’¥ï¼Œç”¨äºæµè§ˆå™¨è®¿é—®åœºæ™¯ï¼‰ï¼šclient.p12</li></ul><p>ç”Ÿæˆè¿™ä¸€äº›åˆ—è¯ä¹¦ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç”Ÿæˆä¸€ä¸ª <code>CA</code> æ ¹è¯ä¹¦ï¼Œç„¶åç”±è¿™ä¸ª <code>CA</code> æ ¹è¯ä¹¦é¢å‘æœåŠ¡å™¨å…¬é’¥è¯ä¹¦å’Œå®¢æˆ·ç«¯å…¬é’¥è¯ä¹¦ã€‚</p><p><img src="https://www.hi-linux.com/img/linux/nginx-ssl-03.png" alt="img"></p><p>æˆ‘ä»¬å¯ä»¥å…¨ç¨‹ä½¿ç”¨ <code>Openssl</code> æ¥ç”Ÿæˆä¸€äº›åˆ—çš„è‡ªç­¾åè¯ä¹¦ï¼Œè‡ªç­¾åè¯ä¹¦æ²¡æœ‰é€šè¿‡è¯ä¹¦æœºæ„çš„è®¤è¯ï¼Œå¾ˆå¤šæµè§ˆå™¨ä¼šè®¤ä¸ºä¸å®‰å…¨ï¼Œä½†æˆ‘ä»¬ç”¨æ¥å®éªŒæ˜¯è¶³å¤Ÿçš„ã€‚éœ€è¦åœ¨æœ¬æœºå®‰è£…äº† <code>Openssl</code> åæ‰èƒ½ç»§ç»­æœ¬ç« çš„å®éªŒã€‚</p><h3 id="2-1-ç”Ÿæˆè‡ªç­¾åæ ¹è¯ä¹¦"><a href="#2-1-ç”Ÿæˆè‡ªç­¾åæ ¹è¯ä¹¦" class="headerlink" title="2.1 ç”Ÿæˆè‡ªç­¾åæ ¹è¯ä¹¦"></a>2.1 ç”Ÿæˆè‡ªç­¾åæ ¹è¯ä¹¦</h3><ol><li>åˆ›å»ºæ ¹è¯ä¹¦ç§é’¥ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl genrsa -out root.key 1024</span></span><br></pre></td></tr></table></figure><ol><li>åˆ›å»ºæ ¹è¯ä¹¦è¯·æ±‚æ–‡ä»¶ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl req -new -out root.csr -key root.key</span></span><br><span class="line"></span><br><span class="line">åç»­å‚æ•°è¯·è‡ªè¡Œå¡«å†™ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼š</span><br><span class="line"></span><br><span class="line">Country Name (2 letter code) [XX]:cn</span><br><span class="line">State or Province Name (full name) []:bj</span><br><span class="line">Locality Name (eg, city) [Default City]:bj</span><br><span class="line">Organization Name (eg, company) [Default Company Ltd]:alibaba</span><br><span class="line">Organizational Unit Name (eg, section) []:test</span><br><span class="line">Common Name (eg, your name or your servers hostname) []:www.yourdomain.com</span><br><span class="line">Email Address []:a.alibaba.com</span><br><span class="line">A challenge password []:</span><br><span class="line">An optional company name []:</span><br></pre></td></tr></table></figure><ol><li>åˆ›å»ºæ ¹è¯ä¹¦ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl x509 -req -<span class="keyword">in</span> root.csr -out root.crt -signkey root.key -CAcreateserial -days 3650</span></span><br></pre></td></tr></table></figure><p>åœ¨åˆ›å»ºè¯ä¹¦è¯·æ±‚æ–‡ä»¶çš„æ—¶å€™éœ€è¦æ³¨æ„ä¸‰ç‚¹ï¼Œä¸‹é¢ç”ŸæˆæœåŠ¡å™¨è¯·æ±‚æ–‡ä»¶å’Œå®¢æˆ·ç«¯è¯·æ±‚æ–‡ä»¶å‡è¦æ³¨æ„è¿™ä¸‰ç‚¹ï¼š</p><ul><li>Common Name å¡«å†™è¯ä¹¦å¯¹åº”çš„æœåŠ¡åŸŸåï¼›</li><li>æ‰€æœ‰å­—æ®µçš„å¡«å†™ï¼Œæ ¹è¯ä¹¦ã€æœåŠ¡å™¨ç«¯è¯ä¹¦ã€å®¢æˆ·ç«¯è¯ä¹¦éœ€ä¿æŒä¸€è‡´</li><li>æœ€åçš„å¯†ç å¯ä»¥ç›´æ¥å›è½¦è·³è¿‡ã€‚</li></ul><p>ç»è¿‡ä¸Šé¢ä¸‰ä¸ªå‘½ä»¤è¡Œï¼Œæˆ‘ä»¬æœ€ç»ˆå¯ä»¥å¾—åˆ°ä¸€ä¸ªç­¾åæœ‰æ•ˆæœŸä¸º 10 å¹´çš„æ ¹è¯ä¹¦ root.crtï¼Œåé¢æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªæ ¹è¯ä¹¦å»é¢å‘æœåŠ¡å™¨è¯ä¹¦å’Œå®¢æˆ·ç«¯è¯ä¹¦ã€‚</p><h3 id="2-2-ç”Ÿæˆè‡ªç­¾åæœåŠ¡å™¨ç«¯è¯ä¹¦"><a href="#2-2-ç”Ÿæˆè‡ªç­¾åæœåŠ¡å™¨ç«¯è¯ä¹¦" class="headerlink" title="2.2 ç”Ÿæˆè‡ªç­¾åæœåŠ¡å™¨ç«¯è¯ä¹¦"></a>2.2 ç”Ÿæˆè‡ªç­¾åæœåŠ¡å™¨ç«¯è¯ä¹¦</h3><ol><li>ç”ŸæˆæœåŠ¡å™¨ç«¯è¯ä¹¦ç§é’¥ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl genrsa -out server.key 1024</span></span><br></pre></td></tr></table></figure><ol><li>ç”ŸæˆæœåŠ¡å™¨è¯ä¹¦è¯·æ±‚æ–‡ä»¶ï¼Œè¿‡ç¨‹å’Œæ³¨æ„äº‹é¡¹å‚è€ƒæ ¹è¯ä¹¦ï¼Œæœ¬èŠ‚ä¸è¯¦è¿°ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl req -new -out server.csr -key server.key</span></span><br></pre></td></tr></table></figure><ol><li>ç”ŸæˆæœåŠ¡å™¨ç«¯å…¬é’¥è¯ä¹¦</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl x509 -req -<span class="keyword">in</span> server.csr -out server.crt -signkey server.key -CA root.crt -CAkey root.key -CAcreateserial -days 3650</span></span><br></pre></td></tr></table></figure><p>ç»è¿‡ä¸Šé¢çš„ä¸‰ä¸ªå‘½ä»¤ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š</p><ul><li>server.keyï¼šæœåŠ¡å™¨ç«¯çš„ç§˜é’¥æ–‡ä»¶</li><li>server.crtï¼šæœ‰æ•ˆæœŸåå¹´çš„æœåŠ¡å™¨ç«¯å…¬é’¥è¯ä¹¦ï¼Œä½¿ç”¨æ ¹è¯ä¹¦å’ŒæœåŠ¡å™¨ç«¯ç§é’¥æ–‡ä»¶ä¸€èµ·ç”Ÿæˆ</li></ul><h3 id="2-3-ç”Ÿæˆè‡ªç­¾åå®¢æˆ·ç«¯è¯ä¹¦"><a href="#2-3-ç”Ÿæˆè‡ªç­¾åå®¢æˆ·ç«¯è¯ä¹¦" class="headerlink" title="2.3 ç”Ÿæˆè‡ªç­¾åå®¢æˆ·ç«¯è¯ä¹¦"></a>2.3 ç”Ÿæˆè‡ªç­¾åå®¢æˆ·ç«¯è¯ä¹¦</h3><ol><li>ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦ç§˜é’¥ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl genrsa -out client.key 1024</span></span><br></pre></td></tr></table></figure><ol><li>ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦è¯·æ±‚æ–‡ä»¶ï¼Œè¿‡ç¨‹å’Œæ³¨æ„äº‹é¡¹å‚è€ƒæ ¹è¯ä¹¦ï¼Œæœ¬èŠ‚ä¸è¯¦è¿°ï¼š</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl req -new -out client.csr -key client.key</span></span><br></pre></td></tr></table></figure><ol><li>ç”Ÿå®¢æˆ·ç«¯è¯ä¹¦</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl x509 -req -<span class="keyword">in</span> client.csr -out client.crt -signkey client.key -CA root.crt -CAkey root.key -CAcreateserial -days 3650</span></span><br></pre></td></tr></table></figure><ol><li>ç”Ÿå®¢æˆ·ç«¯ P12 æ ¼å¼è¯ä¹¦</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> openssl pkcs12 -<span class="built_in">export</span> -clcerts -<span class="keyword">in</span> client.crt -inkey client.key -out client.p12</span></span><br></pre></td></tr></table></figure><p>ç»è¿‡ä¸Šé¢çš„ä¸‰ä¸ªå‘½ä»¤ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š</p><ul><li>client.keyï¼šå®¢æˆ·ç«¯çš„ç§é’¥æ–‡ä»¶</li><li>client.crtï¼šæœ‰æ•ˆæœŸåå¹´çš„å®¢æˆ·ç«¯è¯ä¹¦ï¼Œä½¿ç”¨æ ¹è¯ä¹¦å’Œå®¢æˆ·ç«¯ç§é’¥ä¸€èµ·ç”Ÿæˆ</li><li>client.p12ï¼šå®¢æˆ·ç«¯ p12 æ ¼å¼ï¼Œè¿™ä¸ªè¯ä¹¦æ–‡ä»¶åŒ…å«å®¢æˆ·ç«¯çš„å…¬é’¥å’Œç§é’¥ï¼Œä¸»è¦ç”¨æ¥ç»™æµè§ˆå™¨è®¿é—®ä½¿ç”¨</li></ul><h2 id="3-Nginx-é…ç½®"><a href="#3-Nginx-é…ç½®" class="headerlink" title="3.Nginx é…ç½®"></a>3.Nginx é…ç½®</h2><p>æœ‰äº†ä¸Šé¢çš„ä¸€äº›åˆ—è¯ä¹¦ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ <code>Nginx</code> æœåŠ¡å™¨ä¸Šé…ç½®åŒå‘è®¤è¯çš„ <code>HTTPS</code> æœåŠ¡äº†ï¼Œå…·ä½“é…ç½®æ–¹å¼å¦‚ä¸‹ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">server_name</span>  www.yourdomain.com;</span><br><span class="line">    <span class="attribute">ssl</span>                  <span class="literal">on</span>;  </span><br><span class="line">    <span class="attribute">ssl_certificate</span>      /data/sslKey/server.crt;  <span class="comment">#serverå…¬é’¥è¯ä¹¦</span></span><br><span class="line">    <span class="attribute">ssl_certificate_key</span>  /data/sslKey/server.key;  <span class="comment">#serverç§é’¥</span></span><br><span class="line">    <span class="attribute">ssl_client_certificate</span> /data/sslKey/client.crt;  <span class="comment">#å®¢æˆ·ç«¯å…¬é’¥è¯ä¹¦</span></span><br><span class="line">    <span class="attribute">ssl_verify_client</span> <span class="literal">on</span>;  <span class="comment">#å¼€å¯å®¢æˆ·ç«¯è¯ä¹¦éªŒè¯  </span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span>   html;</span><br><span class="line">        <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…·ä½“å°±æ˜¯å°†æœåŠ¡å™¨ç«¯çš„ä¸¤ä¸ªè¯ä¹¦æ–‡ä»¶ (server.crt/server.key) å’Œå®¢æˆ·ç«¯çš„å…¬é’¥è¯ä¹¦æ–‡ä»¶ (client.crt) çš„è·¯å¾„é…ç½®åˆ° <code>Nginx</code> çš„ <code>server</code> èŠ‚ç‚¹é…ç½®ä¸­ï¼Œå¹¶ä¸”æŠŠ <code>ssl_verify_client</code> è¿™ä¸ªå‚æ•°è®¾ç½®ä¸º <code>on</code>ã€‚<br>æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„å°±æ˜¯ï¼Œå¦‚æœå®¢æˆ·ç«¯è¯ä¹¦ä¸æ˜¯ç”±æ ¹è¯ä¹¦ç›´æ¥é¢å‘çš„ï¼Œé…ç½®ä¸­è¿˜éœ€è¦åŠ ä¸€ä¸ªé…ç½®ï¼š<code>ssl_verify_depth 1</code> ï¼›é…ç½®å®Œæˆåï¼Œæ‰§è¡Œ <code>nginx -s reload</code> é‡æ–°åŠ è½½ä¸‹å°±ç”Ÿæ•ˆäº†ã€‚</p><h2 id="4-curl-è°ƒç”¨"><a href="#4-curl-è°ƒç”¨" class="headerlink" title="4.curl è°ƒç”¨"></a>4.curl è°ƒç”¨</h2><p>ä½¿ç”¨ <code>curl</code> åŠ ä¸Šè¯ä¹¦è·¯å¾„ï¼Œå¯ä»¥ç›´æ¥æµ‹è¯• <code>Nginx</code> çš„ <code>HTTPS</code> åŒå‘è®¤è¯æ˜¯å¦é…ç½®æˆåŠŸã€‚</p><ol><li>å¸¦è¯ä¹¦çš„æˆåŠŸè°ƒç”¨</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --certæŒ‡å®šå®¢æˆ·ç«¯å…¬é’¥è¯ä¹¦çš„è·¯å¾„</span></span><br><span class="line"><span class="comment"># --keyæŒ‡å®šå®¢æˆ·ç«¯ç§é’¥æ–‡ä»¶çš„è·¯å¾„</span></span><br><span class="line"><span class="comment"># -kä¸æ ¡éªŒè¯ä¹¦çš„åˆæ³•æ€§ï¼Œå› ä¸ºæˆ‘ä»¬ç”¨çš„æ˜¯è‡ªç­¾åè¯ä¹¦ï¼Œæ‰€ä»¥éœ€è¦åŠ è¿™ä¸ªå‚æ•°</span></span><br><span class="line"><span class="comment"># å¯ä»¥ä½¿ç”¨ -v æ¥è§‚å¯Ÿå…·ä½“çš„ SSL æ¡æ‰‹è¿‡ç¨‹</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$</span> <span class="built_in">curl</span> -<span class="literal">-cert</span> ./client.crt -<span class="literal">-key</span> ./client.key https://integration<span class="literal">-fred2</span>.fredhuang.com <span class="literal">-k</span> <span class="literal">-v</span></span><br><span class="line">* Rebuilt URL to: https://integration<span class="literal">-fred2</span>.fredhuang.com/</span><br><span class="line">*   Trying <span class="number">47.91</span>.<span class="number">39.145</span>...</span><br><span class="line">* TCP_NODELAY <span class="built_in">set</span></span><br><span class="line">* Connected to integration<span class="literal">-fred2</span>.fredhuang.com (<span class="number">47.91</span>.<span class="number">39.145</span>) port <span class="number">443</span> (<span class="comment">#0)</span></span><br><span class="line">* ALPN, offering h2</span><br><span class="line">* ALPN, offering http/<span class="number">1.1</span></span><br><span class="line">* Cipher selection: ALL:!EXPORT:!EXPORT40:!EXPORT56:!aNULL:!LOW:!RC4:@STRENGTH</span><br><span class="line">* successfully <span class="built_in">set</span> certificate verify locations:</span><br><span class="line">*   CAfile: /etc/ssl/cert.pem</span><br><span class="line">  CApath: none</span><br><span class="line">* TLSv1.<span class="number">2</span> (OUT), TLS handshake, Client hello (<span class="number">1</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (<span class="keyword">IN</span>), TLS handshake, Server hello (<span class="number">2</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (<span class="keyword">IN</span>), TLS handshake, Certificate (<span class="number">11</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (<span class="keyword">IN</span>), TLS handshake, Server key exchange (<span class="number">12</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (<span class="keyword">IN</span>), TLS handshake, Request CERT (<span class="number">13</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (<span class="keyword">IN</span>), TLS handshake, Server finished (<span class="number">14</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (OUT), TLS handshake, Certificate (<span class="number">11</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (OUT), TLS handshake, Client key exchange (<span class="number">16</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (OUT), TLS handshake, CERT verify (<span class="number">15</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (OUT), TLS change cipher, Client hello (<span class="number">1</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (OUT), TLS handshake, Finished (<span class="number">20</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (<span class="keyword">IN</span>), TLS change cipher, Client hello (<span class="number">1</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (<span class="keyword">IN</span>), TLS handshake, Finished (<span class="number">20</span>):</span><br><span class="line">* SSL connection <span class="keyword">using</span> TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256</span><br><span class="line">* ALPN, server accepted to use h2</span><br><span class="line">* Server certificate:</span><br><span class="line">*  subject: C=CN; ST=BeiJing; L=BeiJing; O=Alibaba; OU=Test; CN=integration<span class="literal">-fred2</span>.fredhuang.com; emailAddress=a@alibaba.com</span><br><span class="line">*  <span class="built_in">start</span> date: Oct <span class="number">30</span> <span class="number">06</span>:<span class="number">43</span>:<span class="number">19</span> <span class="number">2019</span> GMT</span><br><span class="line">*  expire date: Oct <span class="number">27</span> <span class="number">06</span>:<span class="number">43</span>:<span class="number">19</span> <span class="number">2029</span> GMT</span><br><span class="line">*  issuer: C=CN; ST=BeiJing; L=BeiJing; O=Alibaba; OU=Test; CN=integration<span class="literal">-fred2</span>.fredhuang.com; emailAddress=a@alibaba.com</span><br><span class="line">*  SSL certificate verify result: self signed certificate (<span class="number">18</span>), continuing anyway.</span><br><span class="line">* <span class="keyword">Using</span> HTTP2, server supports multi-use</span><br><span class="line">* Connection state changed (HTTP/<span class="number">2</span> confirmed)</span><br><span class="line">* Copying HTTP/<span class="number">2</span> <span class="keyword">data</span> <span class="keyword">in</span> stream buffer to connection buffer after upgrade: len=<span class="number">0</span></span><br><span class="line">* <span class="keyword">Using</span> Stream ID: 1 (easy handle 0x7f8ae1809a00)</span><br><span class="line">&gt; GET / HTTP/<span class="number">2</span></span><br><span class="line">&gt; Host: integration<span class="literal">-fred2</span>.fredhuang.com</span><br><span class="line">&gt; User<span class="literal">-Agent</span>: <span class="built_in">curl</span>/<span class="number">7.54</span>.<span class="number">0</span></span><br><span class="line">&gt; Accept: */*</span><br><span class="line">&gt;</span><br><span class="line">* Connection state changed (MAX_CONCURRENT_STREAMS updated)!</span><br><span class="line">&lt; HTTP/<span class="number">2</span> <span class="number">200</span></span><br><span class="line">&lt; server: Tengine</span><br><span class="line">&lt; date: Fri, <span class="number">01</span> Nov <span class="number">2019</span> <span class="number">11</span>:<span class="number">16</span>:<span class="number">39</span> GMT</span><br><span class="line">&lt; content<span class="literal">-type</span>: text/plain;charset=UTF<span class="literal">-8</span></span><br><span class="line">&lt; content<span class="literal">-length</span>: <span class="number">0</span></span><br></pre></td></tr></table></figure><ol><li>ä¸å¸¦è¯ä¹¦çš„å¤±è´¥è°ƒç”¨</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">curl</span>  https://integration<span class="literal">-fred2</span>.fredhuang.com <span class="literal">-k</span> <span class="literal">-v</span></span><br><span class="line">* Rebuilt URL to: https://integration<span class="literal">-fred2</span>.fredhuang.com/</span><br><span class="line">*   Trying <span class="number">47.91</span>.<span class="number">39.145</span>...</span><br><span class="line">* TCP_NODELAY <span class="built_in">set</span></span><br><span class="line">* Connected to integration<span class="literal">-fred2</span>.fredhuang.com (<span class="number">47.91</span>.<span class="number">39.145</span>) port <span class="number">443</span> (<span class="comment">#0)</span></span><br><span class="line">* ALPN, offering h2</span><br><span class="line">* ALPN, offering http/<span class="number">1.1</span></span><br><span class="line">* Cipher selection: ALL:!EXPORT:!EXPORT40:!EXPORT56:!aNULL:!LOW:!RC4:@STRENGTH</span><br><span class="line">* successfully <span class="built_in">set</span> certificate verify locations:</span><br><span class="line">*   CAfile: /etc/ssl/cert.pem</span><br><span class="line">  CApath: none</span><br><span class="line">* TLSv1.<span class="number">2</span> (OUT), TLS handshake, Client hello (<span class="number">1</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (<span class="keyword">IN</span>), TLS handshake, Server hello (<span class="number">2</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (<span class="keyword">IN</span>), TLS handshake, Certificate (<span class="number">11</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (<span class="keyword">IN</span>), TLS handshake, Server key exchange (<span class="number">12</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (<span class="keyword">IN</span>), TLS handshake, Request CERT (<span class="number">13</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (<span class="keyword">IN</span>), TLS handshake, Server finished (<span class="number">14</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (OUT), TLS handshake, Certificate (<span class="number">11</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (OUT), TLS handshake, Client key exchange (<span class="number">16</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (OUT), TLS change cipher, Client hello (<span class="number">1</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (OUT), TLS handshake, Finished (<span class="number">20</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (<span class="keyword">IN</span>), TLS change cipher, Client hello (<span class="number">1</span>):</span><br><span class="line">* TLSv1.<span class="number">2</span> (<span class="keyword">IN</span>), TLS handshake, Finished (<span class="number">20</span>):</span><br><span class="line">* SSL connection <span class="keyword">using</span> TLSv1.2 / ECDHE-RSA-AES128-GCM-SHA256</span><br><span class="line">* ALPN, server accepted to use h2</span><br><span class="line">* Server certificate:</span><br><span class="line">*  subject: C=CN; ST=BeiJing; L=BeiJing; O=Alibaba; OU=Test; CN=integration<span class="literal">-fred2</span>.fredhuang.com; emailAddress=a@alibaba.com</span><br><span class="line">*  <span class="built_in">start</span> date: Oct <span class="number">30</span> <span class="number">06</span>:<span class="number">43</span>:<span class="number">19</span> <span class="number">2019</span> GMT</span><br><span class="line">*  expire date: Oct <span class="number">27</span> <span class="number">06</span>:<span class="number">43</span>:<span class="number">19</span> <span class="number">2029</span> GMT</span><br><span class="line">*  issuer: C=CN; ST=BeiJing; L=BeiJing; O=Alibaba; OU=Test; CN=integration<span class="literal">-fred2</span>.fredhuang.com; emailAddress=a@alibaba.com</span><br><span class="line">*  SSL certificate verify result: self signed certificate (<span class="number">18</span>), continuing anyway.</span><br><span class="line">* <span class="keyword">Using</span> HTTP2, server supports multi-use</span><br><span class="line">* Connection state changed (HTTP/<span class="number">2</span> confirmed)</span><br><span class="line">* Copying HTTP/<span class="number">2</span> <span class="keyword">data</span> <span class="keyword">in</span> stream buffer to connection buffer after upgrade: len=<span class="number">0</span></span><br><span class="line">* <span class="keyword">Using</span> Stream ID: 1 (easy handle 0x7fcc52805e00)</span><br><span class="line">&gt; GET / HTTP/<span class="number">2</span></span><br><span class="line">&gt; Host: integration<span class="literal">-fred2</span>.fredhuang.com</span><br><span class="line">&gt; User<span class="literal">-Agent</span>: <span class="built_in">curl</span>/<span class="number">7.54</span>.<span class="number">0</span></span><br><span class="line">&gt; Accept: */*</span><br><span class="line">&gt;</span><br><span class="line">* Connection state changed (MAX_CONCURRENT_STREAMS updated)!</span><br><span class="line">&lt; HTTP/<span class="number">2</span> <span class="number">400</span></span><br><span class="line">&lt; server: Tengine</span><br><span class="line">&lt; date: Fri, <span class="number">01</span> Nov <span class="number">2019</span> <span class="number">11</span>:<span class="number">25</span>:<span class="number">28</span> GMT</span><br><span class="line">&lt; content<span class="literal">-type</span>: text/html</span><br><span class="line">&lt; content<span class="literal">-length</span>: <span class="number">685</span></span><br><span class="line">&lt;</span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC <span class="string">&quot;-//IETF//DTD HTML 2.0//EN&quot;</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;<span class="number">400</span> No required SSL certificate was sent&lt;/title&gt;&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;center&gt;&lt;h1&gt;<span class="number">400</span> Bad Request&lt;/h1&gt;&lt;/center&gt;</span><br><span class="line">&lt;center&gt;No required SSL certificate was sent&lt;/center&gt;</span><br><span class="line"> Sorry <span class="keyword">for</span> the inconvenience.&lt;br/&gt;</span><br><span class="line">Please report this message and include the following information to us.&lt;br/&gt;</span><br><span class="line">Thank you very much!&lt;/p&gt;</span><br><span class="line">&lt;table&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td&gt;URL:&lt;/td&gt;</span><br><span class="line">&lt;td&gt;https://integration<span class="literal">-fred2</span>.fredhuang.com:<span class="number">444</span>/&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td&gt;Server:&lt;/td&gt;</span><br><span class="line">&lt;td&gt;cag<span class="literal">-access</span><span class="literal">-tengine011192099198</span>.au49&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">&lt;td&gt;Date:&lt;/td&gt;</span><br><span class="line">&lt;td&gt;<span class="number">2019</span>/<span class="number">11</span>/<span class="number">01</span> <span class="number">19</span>:<span class="number">25</span>:<span class="number">28</span>&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;hr/&gt;Powered by Tengine&lt;hr&gt;&lt;center&gt;tengine&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="5-Java-è°ƒç”¨"><a href="#5-Java-è°ƒç”¨" class="headerlink" title="5.Java è°ƒç”¨"></a>5.Java è°ƒç”¨</h2><p>ç”±äºä½¿ç”¨çš„æ˜¯è‡ªç­¾åè¯ä¹¦ï¼Œä½¿ç”¨ <code>ApacheHttpClient</code> å»è°ƒç”¨çš„è¯ï¼Œéœ€è¦å°†æœåŠ¡å™¨è¯ä¹¦åŠ å…¥å¯ä¿¡ä»»è¯ä¹¦åº“ä¸­ï¼Œæ‰èƒ½æˆåŠŸè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ä»£ç ä¸­ç®€å•å¿½ç•¥è¯ä¹¦ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> <span class="built_in">cd</span> <span class="variable">$JAVA_HOME</span></span><br><span class="line"><span class="variable">$</span> sudo ./bin/keytool <span class="literal">-import</span> <span class="literal">-alias</span> ttt <span class="literal">-keystore</span> cacerts <span class="operator">-file</span> /Users/fred/temp/cert5/server.crt</span><br></pre></td></tr></table></figure><p>å°†æœåŠ¡å™¨ç«¯å…¬é’¥è¯ä¹¦è®¾ç½®ä¸ºå¯ä¿¡è¯ä¹¦åï¼Œä½¿ç”¨ä»¥ä¸‹ä»£ç å¯ä»¥ç›´æ¥å‘èµ·å¸¦å®¢æˆ·ç«¯è¯ä¹¦çš„ <code>HTTPS</code> è¯·æ±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.http.HttpEntity;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.client.methods.HttpGet;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.conn.ssl.SSLConnectionSocketFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.impl.client.HttpClients;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.ssl.SSLContexts;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.util.EntityUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.net.ssl.SSLContext;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.security.KeyStore;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HttpClientWithClientCert</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String PFX_PATH = <span class="string">&quot;/Users/fred/temp/cert5/client.p12&quot;</span>;    <span class="comment">//å®¢æˆ·ç«¯è¯ä¹¦è·¯å¾„</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">static</span> String PFX_PWD = <span class="string">&quot;123456&quot;</span>;    <span class="comment">//å®¢æˆ·ç«¯è¯ä¹¦å¯†ç </span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">sslRequestGet</span><span class="params">(String url)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        KeyStore keyStore = KeyStore.getInstance(<span class="string">&quot;PKCS12&quot;</span>);</span><br><span class="line">        InputStream instream = <span class="keyword">new</span> FileInputStream(<span class="keyword">new</span> File(PFX_PATH));</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            keyStore.load(instream, PFX_PWD.toCharArray());</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            instream.close();</span><br><span class="line">        &#125;</span><br><span class="line">        SSLContext sslcontext = SSLContexts.custom().loadKeyMaterial(keyStore, PFX_PWD.toCharArray()).build();</span><br><span class="line">        SSLConnectionSocketFactory sslsf = <span class="keyword">new</span> SSLConnectionSocketFactory(sslcontext</span><br><span class="line">                , <span class="keyword">new</span> String[] &#123; <span class="string">&quot;TLSv1&quot;</span> &#125;    <span class="comment">// supportedProtocols ,è¿™é‡Œå¯ä»¥æŒ‰éœ€è¦è®¾ç½®</span></span><br><span class="line">                , <span class="keyword">null</span>    <span class="comment">// supportedCipherSuites</span></span><br><span class="line">                , SSLConnectionSocketFactory.getDefaultHostnameVerifier());</span><br><span class="line"></span><br><span class="line">        CloseableHttpClient httpclient = HttpClients.custom().setSSLSocketFactory(sslsf).build();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            HttpGet httpget = <span class="keyword">new</span> HttpGet(url);</span><br><span class="line">            <span class="comment">//httpget.addHeader(&quot;host&quot;, &quot;integration-fred2.fredhuang.com&quot;);// è®¾ç½®ä¸€äº›heanderç­‰</span></span><br><span class="line">            CloseableHttpResponse response = httpclient.execute(httpget);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                HttpEntity entity = response.getEntity();</span><br><span class="line">                String jsonStr = EntityUtils.toString(response.getEntity(), <span class="string">&quot;UTF-8&quot;</span>);<span class="comment">//è¿”å›ç»“æœ</span></span><br><span class="line">                EntityUtils.consume(entity);</span><br><span class="line">                <span class="keyword">return</span> jsonStr;</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                response.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            httpclient.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(System.getProperty(<span class="string">&quot;java.home&quot;</span>));</span><br><span class="line">        System.out.println(sslRequestGet(<span class="string">&quot;https://integration-fred2.fredhuang.com/test&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-å­˜ç–‘"><a href="#6-å­˜ç–‘" class="headerlink" title="6. å­˜ç–‘"></a>6. å­˜ç–‘</h2><p>ç½‘ä¸Šå¾ˆå¤šæ–‡ç« éƒ½æè¿°åˆ° <code>Nginx</code> é…ç½®ä¸­çš„å®¢æˆ·ç«¯è¯ä¹¦ï¼ˆ<code>ssl_client_certificate</code>ï¼‰å¯ä»¥é…ç½®æ ¹è¯ä¹¦ root.crtï¼Œç„¶åå°±å¯ä»¥é€‚é…æ‰€æœ‰è¿™ä¸ªæ ¹è¯ä¹¦åŠæ³•çš„å®¢æˆ·ç«¯å…¬é’¥è¯ä¹¦äº†ã€‚æˆ‘è¯•äº†ï¼Œä½¿ç”¨ root.crt ä½œä¸º <code>ssl_client_certificate</code> çš„å€¼ï¼Œç„¶åä½¿ç”¨ client.crt æ¥è®¿é—®ï¼Œå‘ç°ä¸è¡Œï¼Œ<code>Nginx</code> ä¼šæŠ¥è¿™ä¸ªé”™è¯¯ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span>400 The SSL certificate error<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span><span class="tag">&lt;<span class="name">h1</span>&gt;</span>400 Bad Request<span class="tag">&lt;/<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span>The SSL certificate error<span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span><span class="tag">&lt;<span class="name">center</span>&gt;</span>nginx/1.17.5<span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªç‰¹æ€§åŸä½œè€…ä¸€ç›´æ²¡æœ‰é…ç½®æˆåŠŸ (æˆ‘ä¹Ÿæ²¡é…ç½®æˆåŠŸ)ï¼Œæœ‰å¯èƒ½æ˜¯é…ç½®æœ‰é—®é¢˜ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ç½‘ä¸Šæ–‡ç« ä¸é è°±ï¼Œå†™é”™äº†ã€‚</p><blockquote><p>æœ¬æ–‡è½¬è½½è‡ªï¼šã€Œé˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒºã€ï¼ŒåŸæ–‡ï¼š<a href="https://tinyurl.com/yaamh7vf">https://tinyurl.com/yaamh7vf</a> ï¼Œç‰ˆæƒå½’åŸä½œè€…æ‰€æœ‰ã€‚æ¬¢è¿æŠ•ç¨¿ï¼ŒæŠ•ç¨¿é‚®ç®±: <a href="mailto:editor@hi-linux.com">editor@hi-linux.com</a>ã€‚</p></blockquote><h2 id="7-æ‰©å±•é˜…è¯»-æœ¬æ–‡æ ¸å¿ƒ"><a href="#7-æ‰©å±•é˜…è¯»-æœ¬æ–‡æ ¸å¿ƒ" class="headerlink" title="7. æ‰©å±•é˜…è¯» (æœ¬æ–‡æ ¸å¿ƒ)"></a>7. æ‰©å±•é˜…è¯» (æœ¬æ–‡æ ¸å¿ƒ)</h2><p>åœ¨åŸæ–‡åŸºç¡€ä¸Šï¼Œæˆ‘åœ¨åˆ†äº«ä¸€ä¸ªä½ åœ¨å¤§å¤šæ•°ç½‘ç«™å’Œæœç´¢å¼•æ“ä¸­éƒ½æ‰¾ä¸åˆ°çš„å¾ˆå®ç”¨çš„å°æŠ€å·§ï¼Œè¯´å¾—è¿™ä¹ˆç¥ç§˜åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<br>é‚£å°±æ˜¯ä½¿ç”¨å—ä¿¡è¯ä¹¦è¿›è¡ŒåŒå‘è®¤è¯ï¼Œç½‘ä¸Šå¤§å¤šæ•°æ–‡ç« ä»‹ç»çš„å®ç° <code>HTTPS</code> åŒå‘è®¤è¯çš„æ–‡ç« éƒ½æ˜¯ä½¿ç”¨ <code>CA</code> è‡ªç­¾çš„æ–¹å¼è¿›è¡Œã€‚è™½ç„¶è¿™èƒ½å®ç°ç›®çš„ï¼Œä½†æ–¹æ³•ä¸å¤ªä¼˜é›…ã€‚<br>åœ¨ <code>SSL</code> è¯ä¹¦å…¨é¢æ™®åŠçš„å½“ä¸‹ï¼Œä½ å…¶å®å¾ˆæœ‰å¿…è¦ç”³è¯·ä¸€ä¸ªå—ä¿¡è¯ä¹¦æ¥è¿›è¡Œ <code>HTTPS</code> åŒå‘è®¤è¯ã€‚è¿™æ ·çœ‹ä¸Šå»ä¸ä½†æ›´æƒå¨ï¼Œè€Œä¸”å®ç°ä¸Šä¹Ÿæ›´ä¾¿æ·ä¸€äº›ã€‚</p><h3 id="ä½¿ç”¨å—ä¿¡è¯ä¹¦è¿›è¡ŒåŒå‘è®¤è¯"><a href="#ä½¿ç”¨å—ä¿¡è¯ä¹¦è¿›è¡ŒåŒå‘è®¤è¯" class="headerlink" title="ä½¿ç”¨å—ä¿¡è¯ä¹¦è¿›è¡ŒåŒå‘è®¤è¯"></a>ä½¿ç”¨å—ä¿¡è¯ä¹¦è¿›è¡ŒåŒå‘è®¤è¯</h3><p>è¦ä½¿ç”¨å—ä¿¡è¯ä¹¦è¿›è¡Œè®¤è¯çš„å‰ææ¡ä»¶ï¼šå½“ç„¶æ˜¯ä½ å¿…é¡»æœ‰ä¸€ä¸ªæƒå¨ CA æœºæ„ç»™ä½ ç­¾å‘çš„è¯ä¹¦ã€‚</p><ul><li>å¦‚æœä½ æ˜¯åœŸè±ªï¼Œéšä¾¿è´­ä¹°ä¸€ä¸ªå°±è¡Œäº†ã€‚</li><li>å¦‚æœä½ å›Šä¸­ç¾æ¶©ï¼Œä¹Ÿä¸è¦ç´§ï¼Œå¯ä»¥å»ç”³è¯·ä¸€ä¸ªå…è´¹çš„ <code>SSL</code> è¯ä¹¦ã€‚ç›®å‰ <code>Let&#39;s Encrypt</code>ã€<code>é˜¿é‡Œäº‘</code> éƒ½å¯ä»¥ç”³è¯·ï¼Œå…·ä½“æ–¹æ³•å°±ä¸åœ¨è¿™å±•å¼€äº†ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨å…¬ä¼—å·ä¸Šæœç´¢ç›¸å…³æ–‡ç« ã€‚</li><li>ä¸ºäº†ä¾¿äºç®¡ç†å’Œå¤šåœºæ™¯ä½¿ç”¨ï¼Œå»ºè®®ç›´æ¥ç”³è¯·é€šé…è¯ä¹¦ã€‚</li></ul><p>è¯ä¹¦å‡†å¤‡å®Œæˆåï¼Œæ¥ä¸‹æ¥å½“ç„¶æ˜¯ç›´æ¥ä½¿ç”¨å®ƒã€‚å› ä¸ºæ˜¯å—ä¿¡è¯ä¹¦ï¼Œä¸Šé¢æ‰€æœ‰çš„è¯ä¹¦è‡ªç­¾æ“ä½œéƒ½ä¸éœ€è¦äº†ï¼Œä½ åªéœ€ç›´æ¥é…ç½® <code>Nginx</code> å°±å¯ä»¥äº†ã€‚</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">access_log</span>  /var/log/nginx/accesse.log  main;</span><br><span class="line">    <span class="attribute">server_name</span>  ci.hi-linux.com;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_certificate</span>      /etc/ssl/certs/hi-linux.com/hi-linux.com.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span>  /etc/ssl/certs/hi-linux.com/hi-linux.com.key;</span><br><span class="line">    <span class="attribute">ssl_client_certificate</span> /etc/ssl/certs/hi-linux.com/hi-linux.com.pem;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_verify_depth</span> <span class="number">3</span>;</span><br><span class="line">    <span class="attribute">ssl_session_timeout</span>  <span class="number">5m</span>;</span><br><span class="line">    <span class="attribute">ssl_verify_client</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">ssl_protocols</span>  SSLv2 SSLv3 TLSv1;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;</span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span>   <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span>   http://ci/;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> Host $host:$server_port;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Real-IP $remote_addr;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Forwarded-Proto $scheme;</span><br><span class="line">            &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š<code>ssl_certificate</code> æŒ‡å®šçš„æ˜¯è¯ä¹¦ï¼Œ<code>ssl_certificate_key</code> æŒ‡å®šæ˜¯è¯ä¹¦å¯¹åº”çš„ç§é’¥ï¼Œè¯·è‡ªè¡Œå°†å¯¹åº”è¯ä¹¦æ–‡ä»¶æ”¾åˆ°é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„ç›®å½•ä¸­ã€‚<br>ä»¥ä¸Šé…ç½®æ®µå’Œä¸Šé¢çš„è‡ªç­¾è¯ä¹¦å¤§åŒå°å¼‚ï¼Œä¸»è¦éœ€æ³¨æ„çš„æœ‰ <code>ssl_client_certificate</code> å’Œ <code>ssl_verify_depth</code> è¿™ä¸¤ä¸ªå‚æ•°ã€‚</p><ul><li><code>ssl_client_certificate</code> ä¸»è¦ç”¨äºæŒ‡å®šå®¢æˆ·ç«¯æ‰€ä½¿ç”¨çš„è¯ä¹¦ï¼Œè¿™é‡Œå¯ä»¥ç›´æ¥ä½¿ç”¨å—ä¿¡è¯ä¹¦æœºæ„ç­¾å‘çš„è¯ä¹¦æ–‡ä»¶ã€‚</li><li><code>ssl_verify_depth</code> è¿™ä¸ªå‚æ•°æ˜¯ä½¿ç”¨å—ä¿¡è¯ä¹¦èƒ½æˆåŠŸè¿›è¡Œå®¢æˆ·ç«¯éªŒè¯çš„å…³é”®ï¼Œæ³¨æ„å®ƒçš„å€¼æ˜¯ <code>3</code>ã€‚</li></ul><p>å› ä¸ºå½“ <code>ssl_verify_depth</code> è®¾ç½®ä¸º <code>1</code>ï¼ˆ <code>Nginx</code> çš„é»˜è®¤å€¼ï¼‰çš„æ—¶å€™ï¼ŒæœåŠ¡ç«¯åªä¼šæ¥å—ç›´æ¥è¢« <code>CA</code> ç­¾å‘çš„å®¢æˆ·ç«¯è¯ä¹¦æˆ–è‡ªç­¾åçš„è¯ä¹¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç›´æ¥å°è¯•ä½¿ç”¨ä¸­çº§ <code>CA</code> æ¥éªŒè¯å®¢æˆ·ç«¯æ˜¯æ— æ³•é€šè¿‡çš„ï¼Œ<code>OpenSSL</code> ä¼šè‡ªåŠ¨çš„å»æ‰¾ä¸­çº§ <code>CA</code> çš„ç­¾å‘è€…å¹¶ä¸€å±‚å±‚éªŒè¯ä¸Šå»ï¼Œç›´åˆ°æ‰¾åˆ°æ ¹è¯ä¹¦ã€‚<br>æ‰€ä»¥ï¼Œå°±ç®—å°†ä¸­çº§ <code>CA</code> å’Œæ ¹ <code>CA</code> éƒ½æ”¾åœ¨ä¿¡ä»»è¯ä¹¦åˆ—è¡¨ä¸­ï¼Œç”±äºæœ€ç»ˆ <code>ssl_verify_depth</code> ä¸º <code>2</code> çš„ç¼˜æ•…ï¼ŒéªŒè¯è¿˜æ˜¯é€šä¸è¿‡çš„ã€‚<br>å› æ­¤ï¼Œåœ¨å®é™…ä½¿ç”¨çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ul><li>CA æ–‡ä»¶ä¸­å¿…é¡»åŒæ—¶å­˜åœ¨ ä¸­çº§ <code>CA</code> å’Œæ ¹ <code>CA</code>ï¼Œå¿…é¡»æ„æˆå®Œæ•´è¯ä¹¦é“¾ï¼Œä¸èƒ½å°‘ä»»ä½•ä¸€ä¸ªï¼›</li><li>é»˜è®¤çš„éªŒè¯æ·±åº¦ <code>ssl_verify_depth</code> æ˜¯ 1ï¼Œä¸­çº§ <code>CA</code> ç­¾å‘çš„å®¢æˆ·ç«¯è¯ä¹¦ä¸€å¾‹æ— æ³•é€šè¿‡è®¤è¯ï¼Œéœ€è¦å¢å¤§è¯¥å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸Šé¢é…ç½®ä¸­ <code>ssl_verify_depth</code> å€¼ä¸º <code>3</code> ã€‚</li></ul><p>ä¸ºäº†å®¢æˆ·ç«¯æ–¹ä¾¿å¯¼å…¥ï¼Œä½ åŒæ ·è¿˜æ˜¯éœ€è¦å°†è¯ä¹¦æ–‡ä»¶è½¬æ¢æˆ P12 æ ¼å¼ã€‚å½“ç„¶ä½ è¿˜å¯ä»¥åœ¨è½¬æ¢çš„è¿‡ç¨‹ä¸­ç»™è¯ä¹¦åŠ ä¸ªå¯†ç ï¼Œä»¥ä¿è¯è¯ä¹¦çš„å®‰å…¨ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ openssl pkcs12 -export -clcerts -in hi-linux.com.pem -inkey hi-linux.com.key -out hi-linux.com-client.p12</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œ<code>HTTPS</code> åŒå‘è¯ä¹¦çš„å®ç°å°±è®²å®Œäº†ï¼Œå¦‚æœä½ è¿˜æœ‰ä»€ä¹ˆæ›´å¥½çš„è¡¥å……ï¼Œæ¬¢è¿å¤§å®¶ç§¯æç•™è¨€äº¤æµå“Ÿï¼</p>]]></content>
      
      
      
        <tags>
            
            <tag> è½¬è½½ </tag>
            
            <tag> ç½‘ç»œ </tag>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è½¬è½½ã€‘Systemd å…¥é—¨æ•™ç¨‹ï¼šå®æˆ˜ç¯‡</title>
      <link href="/2021/07/23/Systemd_Use/"/>
      <url>/2021/07/23/Systemd_Use/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html">å‚è€ƒè‡ªï¼šé˜®ä¸€å³°è€å¸ˆåšå®¢</a></p><hr><p>ä¸Šä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»‹ç»äº† Systemd çš„<a href="https://tommygirl.cn/2021/07/23/Systemd_Command/">ä¸»è¦å‘½ä»¤</a>ï¼Œä»Šå¤©ä»‹ç»å¦‚ä½•ä½¿ç”¨å®ƒå®Œæˆä¸€äº›åŸºæœ¬çš„ä»»åŠ¡ã€‚</p><p><img src="https://www.ruanyifeng.com/blogimg/asset/2016/bg2016030801.jpg" alt="img"></p><span id="more"></span><h2 id="ä¸€ã€å¼€æœºå¯åŠ¨"><a href="#ä¸€ã€å¼€æœºå¯åŠ¨" class="headerlink" title="ä¸€ã€å¼€æœºå¯åŠ¨"></a>ä¸€ã€å¼€æœºå¯åŠ¨</h2><p>å¯¹äºé‚£äº›æ”¯æŒ Systemd çš„è½¯ä»¶ï¼Œå®‰è£…çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åœ¨<code>/usr/lib/systemd/system</code>ç›®å½•æ·»åŠ ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚</p><p>å¦‚æœä½ æƒ³è®©è¯¥è½¯ä»¶å¼€æœºå¯åŠ¨ï¼Œå°±æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ˆä»¥<code>httpd.service</code>ä¸ºä¾‹ï¼‰ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable httpd</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å‘½ä»¤ç›¸å½“äºåœ¨<code>/etc/systemd/system</code>ç›®å½•æ·»åŠ ä¸€ä¸ªç¬¦å·é“¾æ¥ï¼ŒæŒ‡å‘<code>/usr/lib/systemd/system</code>é‡Œé¢çš„<code>httpd.service</code>æ–‡ä»¶ã€‚</p><p>è¿™æ˜¯å› ä¸ºå¼€æœºæ—¶ï¼Œ<code>Systemd</code>åªæ‰§è¡Œ<code>/etc/systemd/system</code>ç›®å½•é‡Œé¢çš„é…ç½®æ–‡ä»¶ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œå¦‚æœæŠŠä¿®æ”¹åçš„é…ç½®æ–‡ä»¶æ”¾åœ¨è¯¥ç›®å½•ï¼Œå°±å¯ä»¥è¾¾åˆ°è¦†ç›–åŸå§‹é…ç½®çš„æ•ˆæœã€‚</p><h2 id="äºŒã€å¯åŠ¨æœåŠ¡"><a href="#äºŒã€å¯åŠ¨æœåŠ¡" class="headerlink" title="äºŒã€å¯åŠ¨æœåŠ¡"></a>äºŒã€å¯åŠ¨æœåŠ¡</h2><p>è®¾ç½®å¼€æœºå¯åŠ¨ä»¥åï¼Œè½¯ä»¶å¹¶ä¸ä¼šç«‹å³å¯åŠ¨ï¼Œå¿…é¡»ç­‰åˆ°ä¸‹ä¸€æ¬¡å¼€æœºã€‚å¦‚æœæƒ³ç°åœ¨å°±è¿è¡Œè¯¥è½¯ä»¶ï¼Œé‚£ä¹ˆè¦æ‰§è¡Œ<code>systemctl start</code>å‘½ä»¤ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">start</span> httpd</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ä»¥åï¼Œæœ‰å¯èƒ½å¯åŠ¨å¤±è´¥ï¼Œå› æ­¤è¦ç”¨<code>systemctl status</code>å‘½ä»¤æŸ¥çœ‹ä¸€ä¸‹è¯¥æœåŠ¡çš„çŠ¶æ€ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status httpd</span><br><span class="line"></span><br><span class="line">httpd.service - The Apache HTTP Server</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled)</span><br><span class="line">   Active: active (running) since é‡‘ <span class="number">2014</span><span class="literal">-12</span><span class="literal">-05</span> <span class="number">12</span>:<span class="number">18</span>:<span class="number">22</span> JST; <span class="number">7</span>min ago</span><br><span class="line"> Main PID: <span class="number">4349</span> (httpd)</span><br><span class="line">   Status: <span class="string">&quot;Total requests: 1; Current requests/sec: 0; Current traffic:   0 B/sec&quot;</span></span><br><span class="line">   CGroup: /system.slice/httpd.service</span><br><span class="line">           â”œâ”€<span class="number">4349</span> /usr/sbin/httpd <span class="literal">-DFOREGROUND</span></span><br><span class="line">           â”œâ”€<span class="number">4350</span> /usr/sbin/httpd <span class="literal">-DFOREGROUND</span></span><br><span class="line">           â”œâ”€<span class="number">4351</span> /usr/sbin/httpd <span class="literal">-DFOREGROUND</span></span><br><span class="line">           â”œâ”€<span class="number">4352</span> /usr/sbin/httpd <span class="literal">-DFOREGROUND</span></span><br><span class="line">           â”œâ”€<span class="number">4353</span> /usr/sbin/httpd <span class="literal">-DFOREGROUND</span></span><br><span class="line">           â””â”€<span class="number">4354</span> /usr/sbin/httpd <span class="literal">-DFOREGROUND</span></span><br><span class="line"></span><br><span class="line"><span class="number">12</span>æœˆ <span class="number">05</span> <span class="number">12</span>:<span class="number">18</span>:<span class="number">22</span> localhost.localdomain systemd[<span class="number">1</span>]: Starting The Apache HTTP Server...</span><br><span class="line"><span class="number">12</span>æœˆ <span class="number">05</span> <span class="number">12</span>:<span class="number">18</span>:<span class="number">22</span> localhost.localdomain systemd[<span class="number">1</span>]: Started The Apache HTTP Server.</span><br><span class="line"><span class="number">12</span>æœˆ <span class="number">05</span> <span class="number">12</span>:<span class="number">22</span>:<span class="number">40</span> localhost.localdomain systemd[<span class="number">1</span>]: Started The Apache HTTP Server.</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„è¾“å‡ºç»“æœå«ä¹‰å¦‚ä¸‹ã€‚</p><p><code>Loaded</code>è¡Œï¼šé…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œæ˜¯å¦è®¾ä¸ºå¼€æœºå¯åŠ¨<code>Active</code>è¡Œï¼šè¡¨ç¤ºæ­£åœ¨è¿è¡Œ<code>Main PID</code>è¡Œï¼šä¸»è¿›ç¨‹ ID<code>Status</code>è¡Œï¼šç”±åº”ç”¨æœ¬èº«ï¼ˆè¿™é‡Œæ˜¯ httpd ï¼‰æä¾›çš„è½¯ä»¶å½“å‰çŠ¶æ€<code>CGroup</code>å—ï¼šåº”ç”¨çš„æ‰€æœ‰å­è¿›ç¨‹æ—¥å¿—å—ï¼šåº”ç”¨çš„æ—¥å¿—</p><h2 id="ä¸‰ã€åœæ­¢æœåŠ¡"><a href="#ä¸‰ã€åœæ­¢æœåŠ¡" class="headerlink" title="ä¸‰ã€åœæ­¢æœåŠ¡"></a>ä¸‰ã€åœæ­¢æœåŠ¡</h2><p>ç»ˆæ­¢æ­£åœ¨è¿è¡Œçš„æœåŠ¡ï¼Œéœ€è¦æ‰§è¡Œ<code>systemctl stop</code>å‘½ä»¤ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop httpd.service</span><br></pre></td></tr></table></figure><p>æœ‰æ—¶å€™ï¼Œè¯¥å‘½ä»¤å¯èƒ½æ²¡æœ‰å“åº”ï¼ŒæœåŠ¡åœä¸ä¸‹æ¥ã€‚è¿™æ—¶å€™å°±ä¸å¾—ä¸ â€œæ€è¿›ç¨‹â€ äº†ï¼Œå‘æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹å‘å‡º<code>kill</code>ä¿¡å·ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl <span class="built_in">kill</span> httpd.service</span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œé‡å¯æœåŠ¡è¦æ‰§è¡Œ<code>systemctl restart</code>å‘½ä»¤ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart httpd.service</span><br></pre></td></tr></table></figure><h2 id="å››ã€è¯»æ‡‚é…ç½®æ–‡ä»¶"><a href="#å››ã€è¯»æ‡‚é…ç½®æ–‡ä»¶" class="headerlink" title="å››ã€è¯»æ‡‚é…ç½®æ–‡ä»¶"></a>å››ã€è¯»æ‡‚é…ç½®æ–‡ä»¶</h2><p>ä¸€ä¸ªæœåŠ¡æ€ä¹ˆå¯åŠ¨ï¼Œå®Œå…¨ç”±å®ƒçš„é…ç½®æ–‡ä»¶å†³å®šã€‚ä¸‹é¢å°±æ¥çœ‹ï¼Œé…ç½®æ–‡ä»¶æœ‰äº›ä»€ä¹ˆå†…å®¹ã€‚</p><p>å‰é¢è¯´è¿‡ï¼Œé…ç½®æ–‡ä»¶ä¸»è¦æ”¾åœ¨<code>/usr/lib/systemd/system</code>ç›®å½•ï¼Œä¹Ÿå¯èƒ½åœ¨<code>/etc/systemd/system</code>ç›®å½•ã€‚æ‰¾åˆ°é…ç½®æ–‡ä»¶ä»¥åï¼Œä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å³å¯ã€‚</p><p><code>systemctl cat</code>å‘½ä»¤å¯ä»¥ç”¨æ¥æŸ¥çœ‹é…ç½®æ–‡ä»¶ï¼Œä¸‹é¢ä»¥<code>sshd.service</code>æ–‡ä»¶ä¸ºä¾‹ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¯åŠ¨ä¸€ä¸ª SSH æœåŠ¡å™¨ï¼Œä¾›å…¶ä»–ç”¨æˆ·ä»¥ SSH æ–¹å¼ç™»å½•ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">cat</span> sshd.service</span><br><span class="line"></span><br><span class="line">[<span class="type">Unit</span>]</span><br><span class="line">Description=OpenSSH server daemon</span><br><span class="line">Documentation=<span class="built_in">man</span>:sshd(<span class="number">8</span>) <span class="built_in">man</span>:sshd_config(<span class="number">5</span>)</span><br><span class="line">After=network.target sshd<span class="literal">-keygen</span>.service</span><br><span class="line">Wants=sshd<span class="literal">-keygen</span>.service</span><br><span class="line"></span><br><span class="line">[<span class="type">Service</span>]</span><br><span class="line">EnvironmentFile=/etc/sysconfig/sshd</span><br><span class="line">ExecStart=/usr/sbin/sshd <span class="literal">-D</span> <span class="variable">$OPTIONS</span></span><br><span class="line">ExecReload=/bin/<span class="built_in">kill</span> <span class="literal">-HUP</span> <span class="variable">$MAINPID</span></span><br><span class="line"><span class="built_in">Type</span>=simple</span><br><span class="line">KillMode=<span class="keyword">process</span></span><br><span class="line">Restart=on<span class="literal">-failure</span></span><br><span class="line">RestartSec=<span class="number">42</span>s</span><br><span class="line"></span><br><span class="line">[<span class="type">Install</span>]</span><br><span class="line">WantedBy=multi<span class="literal">-user</span>.target</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œé…ç½®æ–‡ä»¶åˆ†æˆå‡ ä¸ªåŒºå—ï¼Œæ¯ä¸ªåŒºå—åŒ…å«è‹¥å¹²æ¡é”®å€¼å¯¹ã€‚</p><p>ä¸‹é¢ä¾æ¬¡è§£é‡Šæ¯ä¸ªåŒºå—çš„å†…å®¹ã€‚</p><h2 id="äº”ã€-Unit-åŒºå—ï¼šå¯åŠ¨é¡ºåºä¸ä¾èµ–å…³ç³»ã€‚"><a href="#äº”ã€-Unit-åŒºå—ï¼šå¯åŠ¨é¡ºåºä¸ä¾èµ–å…³ç³»ã€‚" class="headerlink" title="äº”ã€ [Unit] åŒºå—ï¼šå¯åŠ¨é¡ºåºä¸ä¾èµ–å…³ç³»ã€‚"></a>äº”ã€ [Unit] åŒºå—ï¼šå¯åŠ¨é¡ºåºä¸ä¾èµ–å…³ç³»ã€‚</h2><p><code>Unit</code>åŒºå—çš„<code>Description</code>å­—æ®µç»™å‡ºå½“å‰æœåŠ¡çš„ç®€å•æè¿°ï¼Œ<code>Documentation</code>å­—æ®µç»™å‡ºæ–‡æ¡£ä½ç½®ã€‚</p><p>æ¥ä¸‹æ¥çš„è®¾ç½®æ˜¯å¯åŠ¨é¡ºåºå’Œä¾èµ–å…³ç³»ï¼Œè¿™ä¸ªæ¯”è¾ƒé‡è¦ã€‚</p><blockquote><p><code>After</code>å­—æ®µï¼šè¡¨ç¤ºå¦‚æœ<code>network.target</code>æˆ–<code>sshd-keygen.service</code>éœ€è¦å¯åŠ¨ï¼Œé‚£ä¹ˆ<code>sshd.service</code>åº”è¯¥åœ¨å®ƒä»¬ä¹‹åå¯åŠ¨ã€‚</p></blockquote><p>ç›¸åº”åœ°ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>Before</code>å­—æ®µï¼Œå®šä¹‰<code>sshd.service</code>åº”è¯¥åœ¨å“ªäº›æœåŠ¡ä¹‹å‰å¯åŠ¨ã€‚</p><p>æ³¨æ„ï¼Œ<code>After</code>å’Œ<code>Before</code>å­—æ®µåªæ¶‰åŠå¯åŠ¨é¡ºåºï¼Œä¸æ¶‰åŠä¾èµ–å…³ç³»ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼ŒæŸ Web åº”ç”¨éœ€è¦ postgresql æ•°æ®åº“å‚¨å­˜æ•°æ®ã€‚åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå®ƒåªå®šä¹‰è¦åœ¨ postgresql ä¹‹åå¯åŠ¨ï¼Œè€Œæ²¡æœ‰å®šä¹‰ä¾èµ– postgresql ã€‚ä¸Šçº¿åï¼Œç”±äºæŸç§åŸå› ï¼Œpostgresql éœ€è¦é‡æ–°å¯åŠ¨ï¼Œåœ¨åœæ­¢æœåŠ¡æœŸé—´ï¼Œè¯¥ Web åº”ç”¨å°±ä¼šæ— æ³•å»ºç«‹æ•°æ®åº“è¿æ¥ã€‚</p><p>è®¾ç½®ä¾èµ–å…³ç³»ï¼Œéœ€è¦ä½¿ç”¨<code>Wants</code>å­—æ®µå’Œ<code>Requires</code>å­—æ®µã€‚</p><blockquote><p><code>Wants</code>å­—æ®µï¼šè¡¨ç¤º<code>sshd.service</code>ä¸<code>sshd-keygen.service</code>ä¹‹é—´å­˜åœ¨ â€œå¼±ä¾èµ–â€ å…³ç³»ï¼Œå³å¦‚æœ â€œsshd-keygen.serviceâ€ å¯åŠ¨å¤±è´¥æˆ–åœæ­¢è¿è¡Œï¼Œä¸å½±å“<code>sshd.service</code>ç»§ç»­æ‰§è¡Œã€‚</p></blockquote><p><code>Requires</code>å­—æ®µåˆ™è¡¨ç¤º â€œå¼ºä¾èµ–â€ å…³ç³»ï¼Œå³å¦‚æœè¯¥æœåŠ¡å¯åŠ¨å¤±è´¥æˆ–å¼‚å¸¸é€€å‡ºï¼Œé‚£ä¹ˆ<code>sshd.service</code>ä¹Ÿå¿…é¡»é€€å‡ºã€‚</p><p>æ³¨æ„ï¼Œ<code>Wants</code>å­—æ®µä¸<code>Requires</code>å­—æ®µåªæ¶‰åŠä¾èµ–å…³ç³»ï¼Œä¸å¯åŠ¨é¡ºåºæ— å…³ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯åŒæ—¶å¯åŠ¨çš„ã€‚</p><h2 id="å…­ã€-Service-åŒºå—ï¼šå¯åŠ¨è¡Œä¸º"><a href="#å…­ã€-Service-åŒºå—ï¼šå¯åŠ¨è¡Œä¸º" class="headerlink" title="å…­ã€[Service] åŒºå—ï¼šå¯åŠ¨è¡Œä¸º"></a>å…­ã€[Service] åŒºå—ï¼šå¯åŠ¨è¡Œä¸º</h2><p><code>Service</code>åŒºå—å®šä¹‰å¦‚ä½•å¯åŠ¨å½“å‰æœåŠ¡ã€‚</p><h3 id="6-1-å¯åŠ¨å‘½ä»¤"><a href="#6-1-å¯åŠ¨å‘½ä»¤" class="headerlink" title="6.1 å¯åŠ¨å‘½ä»¤"></a>6.1 å¯åŠ¨å‘½ä»¤</h3><p>è®¸å¤šè½¯ä»¶éƒ½æœ‰è‡ªå·±çš„ç¯å¢ƒå‚æ•°æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å¯ä»¥ç”¨<code>EnvironmentFile</code>å­—æ®µè¯»å–ã€‚</p><blockquote><p><code>EnvironmentFile</code>å­—æ®µï¼šæŒ‡å®šå½“å‰æœåŠ¡çš„ç¯å¢ƒå‚æ•°æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶å†…éƒ¨çš„<code>key=value</code>é”®å€¼å¯¹ï¼Œå¯ä»¥ç”¨<code>$key</code>çš„å½¢å¼ï¼Œåœ¨å½“å‰é…ç½®æ–‡ä»¶ä¸­è·å–ã€‚</p></blockquote><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œsshd çš„ç¯å¢ƒå‚æ•°æ–‡ä»¶æ˜¯<code>/etc/sysconfig/sshd</code>ã€‚</p><p>é…ç½®æ–‡ä»¶é‡Œé¢æœ€é‡è¦çš„å­—æ®µæ˜¯<code>ExecStart</code>ã€‚</p><blockquote><p><code>ExecStart</code>å­—æ®µï¼šå®šä¹‰å¯åŠ¨è¿›ç¨‹æ—¶æ‰§è¡Œçš„å‘½ä»¤ã€‚</p></blockquote><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¯åŠ¨<code>sshd</code>ï¼Œæ‰§è¡Œçš„å‘½ä»¤æ˜¯<code>/usr/sbin/sshd -D $OPTIONS</code>ï¼Œå…¶ä¸­çš„å˜é‡<code>$OPTIONS</code>å°±æ¥è‡ª<code>EnvironmentFile</code>å­—æ®µæŒ‡å®šçš„ç¯å¢ƒå‚æ•°æ–‡ä»¶ã€‚</p><p>ä¸ä¹‹ä½œç”¨ç›¸ä¼¼çš„ï¼Œè¿˜æœ‰å¦‚ä¸‹è¿™äº›å­—æ®µã€‚</p><ul><li><code>ExecReload</code>å­—æ®µï¼šé‡å¯æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤</li><li><code>ExecStop</code>å­—æ®µï¼šåœæ­¢æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤</li><li><code>ExecStartPre</code>å­—æ®µï¼šå¯åŠ¨æœåŠ¡ä¹‹å‰æ‰§è¡Œçš„å‘½ä»¤</li><li><code>ExecStartPost</code>å­—æ®µï¼šå¯åŠ¨æœåŠ¡ä¹‹åæ‰§è¡Œçš„å‘½ä»¤</li><li><code>ExecStopPost</code>å­—æ®µï¼šåœæ­¢æœåŠ¡ä¹‹åæ‰§è¡Œçš„å‘½ä»¤</li></ul><p>è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Service</span>]</span><br><span class="line">ExecStart=/bin/<span class="built_in">echo</span> execstart1</span><br><span class="line">ExecStart=</span><br><span class="line">ExecStart=/bin/<span class="built_in">echo</span> execstart2</span><br><span class="line">ExecStartPost=/bin/<span class="built_in">echo</span> post1</span><br><span class="line">ExecStartPost=/bin/<span class="built_in">echo</span> post2</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œç¬¬äºŒè¡Œ<code>ExecStart</code>è®¾ä¸ºç©ºå€¼ï¼Œç­‰äºå–æ¶ˆäº†ç¬¬ä¸€è¡Œçš„è®¾ç½®ï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">execstart2</span><br><span class="line">post1</span><br><span class="line">post2</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰çš„å¯åŠ¨è®¾ç½®ä¹‹å‰ï¼Œéƒ½å¯ä»¥åŠ ä¸Šä¸€ä¸ªè¿è¯å·ï¼ˆ<code>-</code>ï¼‰ï¼Œè¡¨ç¤º â€œæŠ‘åˆ¶é”™è¯¯â€ï¼Œå³å‘ç”Ÿé”™è¯¯çš„æ—¶å€™ï¼Œä¸å½±å“å…¶ä»–å‘½ä»¤çš„æ‰§è¡Œã€‚æ¯”å¦‚ï¼Œ<code>EnvironmentFile=-/etc/sysconfig/sshd</code>ï¼ˆæ³¨æ„ç­‰å·åé¢çš„é‚£ä¸ªè¿è¯å·ï¼‰ï¼Œå°±è¡¨ç¤ºå³ä½¿<code>/etc/sysconfig/sshd</code>æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¹Ÿä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p><h3 id="6-2-å¯åŠ¨ç±»å‹"><a href="#6-2-å¯åŠ¨ç±»å‹" class="headerlink" title="6.2 å¯åŠ¨ç±»å‹"></a>6.2 å¯åŠ¨ç±»å‹</h3><p><code>Type</code>å­—æ®µå®šä¹‰å¯åŠ¨ç±»å‹ã€‚å®ƒå¯ä»¥è®¾ç½®çš„å€¼å¦‚ä¸‹ã€‚</p><ul><li>simpleï¼ˆé»˜è®¤å€¼ï¼‰ï¼š<code>ExecStart</code>å­—æ®µå¯åŠ¨çš„è¿›ç¨‹ä¸ºä¸»è¿›ç¨‹</li><li>forkingï¼š<code>ExecStart</code>å­—æ®µå°†ä»¥<code>fork()</code>æ–¹å¼å¯åŠ¨ï¼Œæ­¤æ—¶çˆ¶è¿›ç¨‹å°†ä¼šé€€å‡ºï¼Œå­è¿›ç¨‹å°†æˆä¸ºä¸»è¿›ç¨‹</li><li>oneshotï¼šç±»ä¼¼äº<code>simple</code>ï¼Œä½†åªæ‰§è¡Œä¸€æ¬¡ï¼ŒSystemd ä¼šç­‰å®ƒæ‰§è¡Œå®Œï¼Œæ‰å¯åŠ¨å…¶ä»–æœåŠ¡</li><li>dbusï¼šç±»ä¼¼äº<code>simple</code>ï¼Œä½†ä¼šç­‰å¾… D-Bus ä¿¡å·åå¯åŠ¨</li><li>notifyï¼šç±»ä¼¼äº<code>simple</code>ï¼Œå¯åŠ¨ç»“æŸåä¼šå‘å‡ºé€šçŸ¥ä¿¡å·ï¼Œç„¶å Systemd å†å¯åŠ¨å…¶ä»–æœåŠ¡</li><li>idleï¼šç±»ä¼¼äº<code>simple</code>ï¼Œä½†æ˜¯è¦ç­‰åˆ°å…¶ä»–ä»»åŠ¡éƒ½æ‰§è¡Œå®Œï¼Œæ‰ä¼šå¯åŠ¨è¯¥æœåŠ¡ã€‚ä¸€ç§ä½¿ç”¨åœºåˆæ˜¯ä¸ºè®©è¯¥æœåŠ¡çš„è¾“å‡ºï¼Œä¸ä¸å…¶ä»–æœåŠ¡çš„è¾“å‡ºç›¸æ··åˆ</li></ul><p>ä¸‹é¢æ˜¯ä¸€ä¸ª<code>oneshot</code>çš„ä¾‹å­ï¼Œç¬”è®°æœ¬ç”µè„‘å¯åŠ¨æ—¶ï¼Œè¦æŠŠè§¦æ‘¸æ¿å…³æ‰ï¼Œé…ç½®æ–‡ä»¶å¯ä»¥è¿™æ ·å†™ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Unit</span>]</span><br><span class="line">Description=<span class="built_in">Switch-off</span> Touchpad</span><br><span class="line"></span><br><span class="line">[<span class="type">Service</span>]</span><br><span class="line"><span class="built_in">Type</span>=oneshot</span><br><span class="line">ExecStart=/usr/bin/touchpad<span class="literal">-off</span></span><br><span class="line"></span><br><span class="line">[<span class="type">Install</span>]</span><br><span class="line">WantedBy=multi<span class="literal">-user</span>.target</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„é…ç½®æ–‡ä»¶ï¼Œå¯åŠ¨ç±»å‹è®¾ä¸º<code>oneshot</code>ï¼Œå°±è¡¨æ˜è¿™ä¸ªæœåŠ¡åªè¦è¿è¡Œä¸€æ¬¡å°±å¤Ÿäº†ï¼Œä¸éœ€è¦é•¿æœŸè¿è¡Œã€‚</p><p>å¦‚æœå…³é—­ä»¥åï¼Œå°†æ¥æŸä¸ªæ—¶å€™è¿˜æƒ³æ‰“å¼€ï¼Œé…ç½®æ–‡ä»¶ä¿®æ”¹å¦‚ä¸‹ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Unit</span>]</span><br><span class="line">Description=<span class="built_in">Switch-off</span> Touchpad</span><br><span class="line"></span><br><span class="line">[<span class="type">Service</span>]</span><br><span class="line"><span class="built_in">Type</span>=oneshot</span><br><span class="line">ExecStart=/usr/bin/touchpad<span class="literal">-off</span> <span class="built_in">start</span></span><br><span class="line">ExecStop=/usr/bin/touchpad<span class="literal">-off</span> stop</span><br><span class="line">RemainAfterExit=yes</span><br><span class="line"></span><br><span class="line">[<span class="type">Install</span>]</span><br><span class="line">WantedBy=multi<span class="literal">-user</span>.target</span><br></pre></td></tr></table></figure><p>ä¸Šé¢é…ç½®æ–‡ä»¶ä¸­ï¼Œ<code>RemainAfterExit</code>å­—æ®µè®¾ä¸º<code>yes</code>ï¼Œè¡¨ç¤ºè¿›ç¨‹é€€å‡ºä»¥åï¼ŒæœåŠ¡ä»ç„¶ä¿æŒæ‰§è¡Œã€‚è¿™æ ·çš„è¯ï¼Œä¸€æ—¦ä½¿ç”¨<code>systemctl stop</code>å‘½ä»¤åœæ­¢æœåŠ¡ï¼Œ<code>ExecStop</code>æŒ‡å®šçš„å‘½ä»¤å°±ä¼šæ‰§è¡Œï¼Œä»è€Œé‡æ–°å¼€å¯è§¦æ‘¸æ¿ã€‚</p><h3 id="6-3-é‡å¯è¡Œä¸º"><a href="#6-3-é‡å¯è¡Œä¸º" class="headerlink" title="6.3 é‡å¯è¡Œä¸º"></a>6.3 é‡å¯è¡Œä¸º</h3><p><code>Service</code>åŒºå—æœ‰ä¸€äº›å­—æ®µï¼Œå®šä¹‰äº†é‡å¯è¡Œä¸ºã€‚</p><blockquote><p><code>KillMode</code>å­—æ®µï¼šå®šä¹‰ Systemd å¦‚ä½•åœæ­¢ sshd æœåŠ¡ã€‚</p></blockquote><p>ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå°†<code>KillMode</code>è®¾ä¸º<code>process</code>ï¼Œè¡¨ç¤ºåªåœæ­¢ä¸»è¿›ç¨‹ï¼Œä¸åœæ­¢ä»»ä½• sshd å­è¿›ç¨‹ï¼Œå³å­è¿›ç¨‹æ‰“å¼€çš„ SSH session ä»ç„¶ä¿æŒè¿æ¥ã€‚è¿™ä¸ªè®¾ç½®ä¸å¤ªå¸¸è§ï¼Œä½†å¯¹ sshd å¾ˆé‡è¦ï¼Œå¦åˆ™ä½ åœæ­¢æœåŠ¡çš„æ—¶å€™ï¼Œä¼šè¿è‡ªå·±æ‰“å¼€çš„ SSH session ä¸€èµ·æ€æ‰ã€‚</p><p><code>KillMode</code>å­—æ®µå¯ä»¥è®¾ç½®çš„å€¼å¦‚ä¸‹ã€‚</p><ul><li>control-groupï¼ˆé»˜è®¤å€¼ï¼‰ï¼šå½“å‰æ§åˆ¶ç»„é‡Œé¢çš„æ‰€æœ‰å­è¿›ç¨‹ï¼Œéƒ½ä¼šè¢«æ€æ‰</li><li>processï¼šåªæ€ä¸»è¿›ç¨‹</li><li>mixedï¼šä¸»è¿›ç¨‹å°†æ”¶åˆ° SIGTERM ä¿¡å·ï¼Œå­è¿›ç¨‹æ”¶åˆ° SIGKILL ä¿¡å·</li><li>noneï¼šæ²¡æœ‰è¿›ç¨‹ä¼šè¢«æ€æ‰ï¼Œåªæ˜¯æ‰§è¡ŒæœåŠ¡çš„ stop å‘½ä»¤ã€‚</li></ul><p>æ¥ä¸‹æ¥æ˜¯<code>Restart</code>å­—æ®µã€‚</p><blockquote><p><code>Restart</code>å­—æ®µï¼šå®šä¹‰äº† sshd é€€å‡ºåï¼ŒSystemd çš„é‡å¯æ–¹å¼ã€‚</p></blockquote><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ<code>Restart</code>è®¾ä¸º<code>on-failure</code>ï¼Œè¡¨ç¤ºä»»ä½•æ„å¤–çš„å¤±è´¥ï¼Œå°±å°†é‡å¯ sshdã€‚å¦‚æœ sshd æ­£å¸¸åœæ­¢ï¼ˆæ¯”å¦‚æ‰§è¡Œ<code>systemctl stop</code>å‘½ä»¤ï¼‰ï¼Œå®ƒå°±ä¸ä¼šé‡å¯ã€‚</p><p><code>Restart</code>å­—æ®µå¯ä»¥è®¾ç½®çš„å€¼å¦‚ä¸‹ã€‚</p><ul><li>noï¼ˆé»˜è®¤å€¼ï¼‰ï¼šé€€å‡ºåä¸ä¼šé‡å¯</li><li>on-successï¼šåªæœ‰æ­£å¸¸é€€å‡ºæ—¶ï¼ˆé€€å‡ºçŠ¶æ€ç ä¸º 0ï¼‰ï¼Œæ‰ä¼šé‡å¯</li><li>on-failureï¼šéæ­£å¸¸é€€å‡ºæ—¶ï¼ˆé€€å‡ºçŠ¶æ€ç é 0ï¼‰ï¼ŒåŒ…æ‹¬è¢«ä¿¡å·ç»ˆæ­¢å’Œè¶…æ—¶ï¼Œæ‰ä¼šé‡å¯</li><li>on-abnormalï¼šåªæœ‰è¢«ä¿¡å·ç»ˆæ­¢å’Œè¶…æ—¶ï¼Œæ‰ä¼šé‡å¯</li><li>on-abortï¼šåªæœ‰åœ¨æ”¶åˆ°æ²¡æœ‰æ•æ‰åˆ°çš„ä¿¡å·ç»ˆæ­¢æ—¶ï¼Œæ‰ä¼šé‡å¯</li><li>on-watchdogï¼šè¶…æ—¶é€€å‡ºï¼Œæ‰ä¼šé‡å¯alwaysï¼šä¸ç®¡æ˜¯ä»€ä¹ˆé€€å‡ºåŸå› ï¼Œæ€»æ˜¯é‡å¯</li></ul><p>å¯¹äºå®ˆæŠ¤è¿›ç¨‹ï¼Œæ¨èè®¾ä¸º<code>on-failure</code>ã€‚å¯¹äºé‚£äº›å…è®¸å‘ç”Ÿé”™è¯¯é€€å‡ºçš„æœåŠ¡ï¼Œå¯ä»¥è®¾ä¸º<code>on-abnormal</code>ã€‚</p><p>æœ€åæ˜¯<code>RestartSec</code>å­—æ®µã€‚</p><blockquote><p><code>RestartSec</code>å­—æ®µï¼šè¡¨ç¤º Systemd é‡å¯æœåŠ¡ä¹‹å‰ï¼Œéœ€è¦ç­‰å¾…çš„ç§’æ•°ã€‚ä¸Šé¢çš„ä¾‹å­è®¾ä¸ºç­‰å¾… 42 ç§’ã€‚</p></blockquote><h2 id="ä¸ƒã€-Install-åŒºå—"><a href="#ä¸ƒã€-Install-åŒºå—" class="headerlink" title="ä¸ƒã€[Install] åŒºå—"></a>ä¸ƒã€[Install] åŒºå—</h2><p><code>Install</code>åŒºå—ï¼Œå®šä¹‰å¦‚ä½•å®‰è£…è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œå³æ€æ ·åšåˆ°å¼€æœºå¯åŠ¨ã€‚</p><blockquote><p><code>WantedBy</code>å­—æ®µï¼šè¡¨ç¤ºè¯¥æœåŠ¡æ‰€åœ¨çš„ Targetã€‚</p></blockquote><p><code>Target</code>çš„å«ä¹‰æ˜¯æœåŠ¡ç»„ï¼Œè¡¨ç¤ºä¸€ç»„æœåŠ¡ã€‚<code>WantedBy=multi-user.target</code>æŒ‡çš„æ˜¯ï¼Œsshd æ‰€åœ¨çš„ Target æ˜¯<code>multi-user.target</code>ã€‚</p><p>è¿™ä¸ªè®¾ç½®éå¸¸é‡è¦ï¼Œå› ä¸ºæ‰§è¡Œ<code>systemctl enable sshd.service</code>å‘½ä»¤æ—¶ï¼Œ<code>sshd.service</code>çš„ä¸€ä¸ªç¬¦å·é“¾æ¥ï¼Œå°±ä¼šæ”¾åœ¨<code>/etc/systemd/system</code>ç›®å½•ä¸‹é¢çš„<code>multi-user.target.wants</code>å­ç›®å½•ä¹‹ä¸­ã€‚</p><p>Systemd æœ‰é»˜è®¤çš„å¯åŠ¨ Targetã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">get-default</span></span><br><span class="line">multi<span class="literal">-user</span>.target</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ç»“æœè¡¨ç¤ºï¼Œé»˜è®¤çš„å¯åŠ¨ Target æ˜¯<code>multi-user.target</code>ã€‚åœ¨è¿™ä¸ªç»„é‡Œçš„æ‰€æœ‰æœåŠ¡ï¼Œéƒ½å°†å¼€æœºå¯åŠ¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ<code>systemctl enable</code>å‘½ä»¤èƒ½è®¾ç½®å¼€æœºå¯åŠ¨çš„åŸå› ã€‚</p><p>ä½¿ç”¨ Target çš„æ—¶å€™ï¼Œ<code>systemctl list-dependencies</code>å‘½ä»¤å’Œ<code>systemctl isolate</code>å‘½ä»¤ä¹Ÿå¾ˆæœ‰ç”¨ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ multi-user.target åŒ…å«çš„æ‰€æœ‰æœåŠ¡</span></span><br><span class="line">systemctl list<span class="literal">-dependencies</span> multi<span class="literal">-user</span>.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°å¦ä¸€ä¸ª target</span></span><br><span class="line"><span class="comment"># shutdown.target å°±æ˜¯å…³æœºçŠ¶æ€</span></span><br><span class="line">sudo systemctl isolate shutdown.target</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æ¥è¯´ï¼Œå¸¸ç”¨çš„ Target æœ‰ä¸¤ä¸ªï¼šä¸€ä¸ªæ˜¯<code>multi-user.target</code>ï¼Œè¡¨ç¤ºå¤šç”¨æˆ·å‘½ä»¤è¡ŒçŠ¶æ€ï¼›å¦ä¸€ä¸ªæ˜¯<code>graphical.target</code>ï¼Œè¡¨ç¤ºå›¾å½¢ç”¨æˆ·çŠ¶æ€ï¼Œå®ƒä¾èµ–äº<code>multi-user.target</code>ã€‚å®˜æ–¹æ–‡æ¡£æœ‰ä¸€å¼ éå¸¸æ¸…æ™°çš„ [Target ä¾èµ–å…³ç³»å›¾](<a href="https://www.freedesktop.org/software/systemd/man/bootup.html#System">https://www.freedesktop.org/software/systemd/man/bootup.html#System</a> Manager Bootup)ã€‚</p><h2 id="å…«ã€Target-çš„é…ç½®æ–‡ä»¶"><a href="#å…«ã€Target-çš„é…ç½®æ–‡ä»¶" class="headerlink" title="å…«ã€Target çš„é…ç½®æ–‡ä»¶"></a>å…«ã€Target çš„é…ç½®æ–‡ä»¶</h2><p>Target ä¹Ÿæœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">cat</span> multi<span class="literal">-user</span>.target</span><br><span class="line"></span><br><span class="line">[<span class="type">Unit</span>]</span><br><span class="line">Description=Multi<span class="literal">-User</span> System</span><br><span class="line">Documentation=<span class="built_in">man</span>:systemd.special(<span class="number">7</span>)</span><br><span class="line">Requires=basic.target</span><br><span class="line">Conflicts=rescue.service rescue.target</span><br><span class="line">After=basic.target rescue.service rescue.target</span><br><span class="line">AllowIsolate=yes</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼ŒTarget é…ç½®æ–‡ä»¶é‡Œé¢æ²¡æœ‰å¯åŠ¨å‘½ä»¤ã€‚</p><p>ä¸Šé¢è¾“å‡ºç»“æœä¸­ï¼Œä¸»è¦å­—æ®µå«ä¹‰å¦‚ä¸‹ã€‚</p><blockquote><p><code>Requires</code>å­—æ®µï¼šè¦æ±‚<code>basic.target</code>ä¸€èµ·è¿è¡Œã€‚</p><p><code>Conflicts</code>å­—æ®µï¼šå†²çªå­—æ®µã€‚å¦‚æœ<code>rescue.service</code>æˆ–<code>rescue.target</code>æ­£åœ¨è¿è¡Œï¼Œ<code>multi-user.target</code>å°±ä¸èƒ½è¿è¡Œï¼Œåä¹‹äº¦ç„¶ã€‚</p><p><code>After</code>ï¼šè¡¨ç¤º<code>multi-user.target</code>åœ¨<code>basic.target</code> ã€ <code>rescue.service</code>ã€ <code>rescue.target</code>ä¹‹åå¯åŠ¨ï¼Œå¦‚æœå®ƒä»¬æœ‰å¯åŠ¨çš„è¯ã€‚</p><p><code>AllowIsolate</code>ï¼šå…è®¸ä½¿ç”¨<code>systemctl isolate</code>å‘½ä»¤åˆ‡æ¢åˆ°<code>multi-user.target</code>ã€‚</p></blockquote><h2 id="ä¹ã€ä¿®æ”¹é…ç½®æ–‡ä»¶åé‡å¯"><a href="#ä¹ã€ä¿®æ”¹é…ç½®æ–‡ä»¶åé‡å¯" class="headerlink" title="ä¹ã€ä¿®æ”¹é…ç½®æ–‡ä»¶åé‡å¯"></a>ä¹ã€ä¿®æ”¹é…ç½®æ–‡ä»¶åé‡å¯</h2><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ä»¥åï¼Œéœ€è¦é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œç„¶åé‡æ–°å¯åŠ¨ç›¸å…³æœåŠ¡ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶</span></span><br><span class="line">sudo systemctl daemon<span class="literal">-reload</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯ç›¸å…³æœåŠ¡</span></span><br><span class="line">sudo systemctl restart foobarhttps://www.ruanyifeng.com/blog/<span class="number">2016</span>/<span class="number">03</span>/systemd<span class="literal">-tutorial</span><span class="literal">-part</span><span class="literal">-two</span>.html<span class="comment">#sr-toc-11)</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æœåŠ¡å™¨ </tag>
            
            <tag> CentOS </tag>
            
            <tag> è½¬è½½ </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è½¬è½½ã€‘Systemd å…¥é—¨æ•™ç¨‹ï¼šå‘½ä»¤ç¯‡</title>
      <link href="/2021/07/23/Systemd_Command/"/>
      <url>/2021/07/23/Systemd_Command/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html">è½¬è½½è‡ªï¼šé˜®ä¸€å³°è€å¸ˆåšå®¢</a></p><hr><p>Systemd æ˜¯ Linux ç³»ç»Ÿå·¥å…·ï¼Œç”¨æ¥å¯åŠ¨<a href="https://www.ruanyifeng.com/blog/2016/02/linux-daemon.html">å®ˆæŠ¤è¿›ç¨‹</a>ï¼Œå·²æˆä¸ºå¤§å¤šæ•°å‘è¡Œç‰ˆçš„æ ‡å‡†é…ç½®ã€‚</p><p>æœ¬æ–‡ä»‹ç»å®ƒçš„åŸºæœ¬ç”¨æ³•ï¼Œåˆ†ä¸ºä¸Šä¸‹ä¸¤ç¯‡ã€‚ä»Šå¤©ä»‹ç»å®ƒçš„ä¸»è¦å‘½ä»¤ï¼Œ<a href="https://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html">ä¸‹ä¸€ç¯‡</a>ä»‹ç»å¦‚ä½•ç”¨äºå®æˆ˜ã€‚</p><p><img src="https://www.ruanyifeng.com/blogimg/asset/2016/bg2016030701.gif" alt="img"></p><span id="more"></span><h2 id="ä¸€ã€ç”±æ¥"><a href="#ä¸€ã€ç”±æ¥" class="headerlink" title="ä¸€ã€ç”±æ¥"></a>ä¸€ã€ç”±æ¥</h2><p>å†å²ä¸Šï¼Œ<a href="https://www.ruanyifeng.com/blog/2013/08/linux_boot_process.html">Linux çš„å¯åŠ¨</a>ä¸€ç›´é‡‡ç”¨ <a href="https://en.wikipedia.org/wiki/Init"><code>init</code></a> è¿›ç¨‹ã€‚</p><p>ä¸‹é¢çš„å‘½ä»¤ç”¨æ¥å¯åŠ¨æœåŠ¡ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/apache2 <span class="built_in">start</span> </span><br><span class="line"><span class="comment"># æˆ–è€… </span></span><br><span class="line">service apache2 <span class="built_in">start</span>  </span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ³•æœ‰ä¸¤ä¸ªç¼ºç‚¹ã€‚</p><p>ä¸€æ˜¯å¯åŠ¨æ—¶é—´é•¿ã€‚<code>init</code> è¿›ç¨‹æ˜¯ä¸²è¡Œå¯åŠ¨ï¼Œåªæœ‰å‰ä¸€ä¸ªè¿›ç¨‹å¯åŠ¨å®Œï¼Œæ‰ä¼šå¯åŠ¨ä¸‹ä¸€ä¸ªè¿›ç¨‹ã€‚</p><p>äºŒæ˜¯å¯åŠ¨è„šæœ¬å¤æ‚ã€‚<code>init</code> è¿›ç¨‹åªæ˜¯æ‰§è¡Œå¯åŠ¨è„šæœ¬ï¼Œä¸ç®¡å…¶ä»–äº‹æƒ…ã€‚è„šæœ¬éœ€è¦è‡ªå·±å¤„ç†å„ç§æƒ…å†µï¼Œè¿™å¾€å¾€ä½¿å¾—è„šæœ¬å˜å¾—å¾ˆé•¿ã€‚</p><h2 id="äºŒã€Systemd-æ¦‚è¿°"><a href="#äºŒã€Systemd-æ¦‚è¿°" class="headerlink" title="äºŒã€Systemd æ¦‚è¿°"></a>äºŒã€Systemd æ¦‚è¿°</h2><p>Systemd å°±æ˜¯ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜è€Œè¯ç”Ÿçš„ã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯ï¼Œä¸ºç³»ç»Ÿçš„å¯åŠ¨å’Œç®¡ç†æä¾›ä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>æ ¹æ® Linux æƒ¯ä¾‹ï¼Œå­—æ¯ <code>d</code> æ˜¯å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰çš„ç¼©å†™ã€‚ Systemd è¿™ä¸ªåå­—çš„å«ä¹‰ï¼Œå°±æ˜¯å®ƒè¦å®ˆæŠ¤æ•´ä¸ªç³»ç»Ÿã€‚</p><p><img src="https://www.ruanyifeng.com/blogimg/asset/2016/bg2016030702.jpg" alt="img"></p><p>ï¼ˆä¸Šå›¾ä¸º Systemd ä½œè€… <a href="https://en.wikipedia.org/wiki/Lennart_Poettering">Lennart Poettering</a>ï¼‰</p><p>ä½¿ç”¨äº† Systemdï¼Œå°±ä¸éœ€è¦å†ç”¨ <code>init</code> äº†ã€‚Systemd å–ä»£äº† <code>initd</code>ï¼Œæˆä¸ºç³»ç»Ÿçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼ˆPID ç­‰äº 1ï¼‰ï¼Œå…¶ä»–è¿›ç¨‹éƒ½æ˜¯å®ƒçš„å­è¿›ç¨‹ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl -<span class="literal">-version</span>  </span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å‘½ä»¤æŸ¥çœ‹ Systemd çš„ç‰ˆæœ¬ã€‚</p><p>Systemd çš„ä¼˜ç‚¹æ˜¯åŠŸèƒ½å¼ºå¤§ï¼Œä½¿ç”¨æ–¹ä¾¿ï¼Œç¼ºç‚¹æ˜¯ä½“ç³»åºå¤§ï¼Œéå¸¸å¤æ‚ã€‚äº‹å®ä¸Šï¼Œç°åœ¨è¿˜æœ‰å¾ˆå¤šäººåå¯¹ä½¿ç”¨ Systemdï¼Œç†ç”±å°±æ˜¯å®ƒè¿‡äºå¤æ‚ï¼Œä¸æ“ä½œç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†å¼ºè€¦åˆï¼Œè¿å â€œkeep simple, keep stupidâ€ çš„ <a href="https://www.ruanyifeng.com/blog/2009/06/unix_philosophy.html">Unix å“²å­¦</a>ã€‚</p><p><img src="https://www.ruanyifeng.com/blogimg/asset/2016/bg2016030703.png" alt="img"></p><p>ï¼ˆä¸Šå›¾ä¸º Systemd æ¶æ„å›¾ï¼‰</p><h2 id="ä¸‰ã€ç³»ç»Ÿç®¡ç†"><a href="#ä¸‰ã€ç³»ç»Ÿç®¡ç†" class="headerlink" title="ä¸‰ã€ç³»ç»Ÿç®¡ç†"></a>ä¸‰ã€ç³»ç»Ÿç®¡ç†</h2><p>Systemd å¹¶ä¸æ˜¯ä¸€ä¸ªå‘½ä»¤ï¼Œè€Œæ˜¯ä¸€ç»„å‘½ä»¤ï¼Œæ¶‰åŠåˆ°ç³»ç»Ÿç®¡ç†çš„æ–¹æ–¹é¢é¢ã€‚</p><h3 id="3-1-systemctl"><a href="#3-1-systemctl" class="headerlink" title="3.1 systemctl"></a>3.1 systemctl</h3><p><code>systemctl</code> æ˜¯ Systemd çš„ä¸»å‘½ä»¤ï¼Œç”¨äºç®¡ç†ç³»ç»Ÿã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é‡å¯ç³»ç»Ÿ</span></span><br><span class="line">sudo systemctl reboot</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é—­ç³»ç»Ÿï¼Œåˆ‡æ–­ç”µæº</span></span><br><span class="line">sudo systemctl poweroff</span><br><span class="line"></span><br><span class="line"><span class="comment"># CPUåœæ­¢å·¥ä½œ</span></span><br><span class="line">sudo systemctl halt</span><br><span class="line"></span><br><span class="line"><span class="comment"># æš‚åœç³»ç»Ÿ</span></span><br><span class="line">sudo systemctl suspend</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®©ç³»ç»Ÿè¿›å…¥å†¬çœ çŠ¶æ€</span></span><br><span class="line">sudo systemctl hibernate</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®©ç³»ç»Ÿè¿›å…¥äº¤äº’å¼ä¼‘çœ çŠ¶æ€</span></span><br><span class="line">sudo systemctl hybrid<span class="literal">-sleep</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨è¿›å…¥æ•‘æ´çŠ¶æ€ï¼ˆå•ç”¨æˆ·çŠ¶æ€ï¼‰</span></span><br><span class="line">sudo systemctl rescue</span><br></pre></td></tr></table></figure><h3 id="3-2-systemd-analyz"><a href="#3-2-systemd-analyz" class="headerlink" title="3.2 systemd-analyz"></a>3.2 systemd-analyz</h3><p><code>systemd-analyze</code> å‘½ä»¤ç”¨äºæŸ¥çœ‹å¯åŠ¨è€—æ—¶ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å¯åŠ¨è€—æ—¶</span></span><br><span class="line">systemd<span class="literal">-analyze</span>   </span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ¯ä¸ªæœåŠ¡çš„å¯åŠ¨è€—æ—¶ </span></span><br><span class="line">systemd<span class="literal">-analyze</span> blame  </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºç€‘å¸ƒçŠ¶çš„å¯åŠ¨è¿‡ç¨‹æµ </span></span><br><span class="line">systemd<span class="literal">-analyze</span> critical<span class="literal">-chain</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæŒ‡å®šæœåŠ¡çš„å¯åŠ¨æµ </span></span><br><span class="line">systemd<span class="literal">-analyze</span> critical<span class="literal">-chain</span> atd.service</span><br></pre></td></tr></table></figure><h3 id="3-3-hostnamectl"><a href="#3-3-hostnamectl" class="headerlink" title="3.3 hostnamectl"></a>3.3 hostnamectl</h3><p><code>hostnamectl</code> å‘½ä»¤ç”¨äºæŸ¥çœ‹å½“å‰ä¸»æœºçš„ä¿¡æ¯ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ˜¾ç¤ºå½“å‰ä¸»æœºçš„ä¿¡æ¯ </span></span><br><span class="line">hostnamectl  </span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ä¸»æœºåã€‚ </span></span><br><span class="line">sudo hostnamectl <span class="built_in">set-hostname</span> rhel7</span><br></pre></td></tr></table></figure><h3 id="3-4-localectl"><a href="#3-4-localectl" class="headerlink" title="3.4 localectl"></a>3.4 localectl</h3><p><code>localectl</code> å‘½ä»¤ç”¨äºæŸ¥çœ‹æœ¬åœ°åŒ–è®¾ç½®ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æœ¬åœ°åŒ–è®¾ç½® </span></span><br><span class="line">localectl  </span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æœ¬åœ°åŒ–å‚æ•°ã€‚ </span></span><br><span class="line">sudo localectl <span class="built_in">set-locale</span> LANG=en_GB.utf8 </span><br><span class="line">sudo localectl <span class="built_in">set-keymap</span> en_GB</span><br></pre></td></tr></table></figure><h3 id="3-5-timedatectl"><a href="#3-5-timedatectl" class="headerlink" title="3.5 timedatectl"></a>3.5 timedatectl</h3><p><code>timedatectl</code> å‘½ä»¤ç”¨äºæŸ¥çœ‹å½“å‰æ—¶åŒºè®¾ç½®ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰æ—¶åŒºè®¾ç½® </span></span><br><span class="line">timedatectl  </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„æ—¶åŒº </span></span><br><span class="line">timedatectl list<span class="literal">-timezones</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å½“å‰æ—¶åŒº </span></span><br><span class="line">sudo timedatectl <span class="built_in">set-timezone</span> America/New_York </span><br><span class="line">sudo timedatectl <span class="built_in">set-time</span> YYYY<span class="literal">-MM</span><span class="literal">-DD</span> </span><br><span class="line">sudo timedatectl <span class="built_in">set-time</span> HH:MM:SS</span><br></pre></td></tr></table></figure><h3 id="3-6-loginctl"><a href="#3-6-loginctl" class="headerlink" title="3.6 loginctl"></a>3.6 loginctl</h3><p><code>loginctl</code> å‘½ä»¤ç”¨äºæŸ¥çœ‹å½“å‰ç™»å½•çš„ç”¨æˆ·ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ—å‡ºå½“å‰session </span></span><br><span class="line">loginctl list<span class="literal">-sessions</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºå½“å‰ç™»å½•ç”¨æˆ· </span></span><br><span class="line">loginctl list<span class="literal">-users</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæ˜¾ç¤ºæŒ‡å®šç”¨æˆ·çš„ä¿¡æ¯ </span></span><br><span class="line">loginctl <span class="built_in">show-user</span> ruanyf</span><br></pre></td></tr></table></figure><h2 id="å››ã€Unit"><a href="#å››ã€Unit" class="headerlink" title="å››ã€Unit"></a>å››ã€Unit</h2><h3 id="4-1-å«ä¹‰"><a href="#4-1-å«ä¹‰" class="headerlink" title="4.1 å«ä¹‰"></a>4.1 å«ä¹‰</h3><blockquote><p>Systemd å¯ä»¥ç®¡ç†æ‰€æœ‰ç³»ç»Ÿèµ„æºã€‚ä¸åŒçš„èµ„æºç»Ÿç§°ä¸º Unitï¼ˆå•ä½ï¼‰ã€‚</p></blockquote><p>Unit ä¸€å…±åˆ†æˆ 12 ç§ã€‚</p><ul><li>Service unitï¼šç³»ç»ŸæœåŠ¡</li><li>Target unitï¼šå¤šä¸ª Unit æ„æˆçš„ä¸€ä¸ªç»„</li><li>Device Unitï¼šç¡¬ä»¶è®¾å¤‡</li><li>Mount Unitï¼šæ–‡ä»¶ç³»ç»Ÿçš„æŒ‚è½½ç‚¹</li><li>Automount Unitï¼šè‡ªåŠ¨æŒ‚è½½ç‚¹</li><li>Path Unitï¼šæ–‡ä»¶æˆ–è·¯å¾„</li><li>Scope Unitï¼šä¸æ˜¯ç”± Systemd å¯åŠ¨çš„å¤–éƒ¨è¿›ç¨‹</li><li>Slice Unitï¼šè¿›ç¨‹ç»„</li><li>Snapshot Unitï¼šSystemd å¿«ç…§ï¼Œå¯ä»¥åˆ‡å›æŸä¸ªå¿«ç…§</li><li>Socket Unitï¼šè¿›ç¨‹é—´é€šä¿¡çš„ </li><li>socketSwap Unitï¼šswap æ–‡ä»¶</li><li>Timer Unitï¼šå®šæ—¶å™¨</li></ul><p><code>systemctl list-units</code> å‘½ä»¤å¯ä»¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„æ‰€æœ‰ Unit ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ—å‡ºæ­£åœ¨è¿è¡Œçš„ Unit</span></span><br><span class="line">systemctl list<span class="literal">-units</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰Unitï¼ŒåŒ…æ‹¬æ²¡æœ‰æ‰¾åˆ°é…ç½®æ–‡ä»¶çš„æˆ–è€…å¯åŠ¨å¤±è´¥çš„</span></span><br><span class="line">systemctl list<span class="literal">-units</span> -<span class="literal">-all</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰æ²¡æœ‰è¿è¡Œçš„ Unit</span></span><br><span class="line">systemctl list<span class="literal">-units</span> -<span class="literal">-all</span> -<span class="literal">-state</span>=inactive</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰åŠ è½½å¤±è´¥çš„ Unit</span></span><br><span class="line">systemctl list<span class="literal">-units</span> -<span class="literal">-failed</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„ã€ç±»å‹ä¸º service çš„ Unit</span></span><br><span class="line">systemctl list<span class="literal">-units</span> -<span class="literal">-type</span>=service</span><br></pre></td></tr></table></figure><h3 id="4-2-Unit-çš„çŠ¶æ€"><a href="#4-2-Unit-çš„çŠ¶æ€" class="headerlink" title="4.2 Unit çš„çŠ¶æ€"></a>4.2 Unit çš„çŠ¶æ€</h3><p><code>systemctl status </code> å‘½ä»¤ç”¨äºæŸ¥çœ‹ç³»ç»ŸçŠ¶æ€å’Œå•ä¸ª Unit çš„çŠ¶æ€ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ˜¾ç¤ºç³»ç»ŸçŠ¶æ€ </span></span><br><span class="line">systemctl status  </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå•ä¸ª Unit çš„çŠ¶æ€ </span></span><br><span class="line">sysystemctl status bluetooth.service  </span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºè¿œç¨‹ä¸»æœºçš„æŸä¸ª Unit çš„çŠ¶æ€ </span></span><br><span class="line">systemctl <span class="literal">-H</span> root@rhel7.example.com status httpd.service</span><br></pre></td></tr></table></figure><p>é™¤äº† <code>status</code> å‘½ä»¤ï¼Œ <code>systemctl</code> è¿˜æä¾›äº†ä¸‰ä¸ªæŸ¥è¯¢çŠ¶æ€çš„ç®€å•æ–¹æ³•ï¼Œä¸»è¦ä¾›è„šæœ¬å†…éƒ¨çš„åˆ¤æ–­è¯­å¥ä½¿ç”¨ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ª Unit æ˜¯å¦æ­£åœ¨è¿è¡Œ</span></span><br><span class="line">systemctl is<span class="literal">-active</span> application.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ª Unit æ˜¯å¦å¤„äºå¯åŠ¨å¤±è´¥çŠ¶æ€</span></span><br><span class="line">systemctl is<span class="literal">-failed</span> application.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ª Unit æœåŠ¡æ˜¯å¦å»ºç«‹äº†å¯åŠ¨é“¾æ¥</span></span><br><span class="line">systemctl is<span class="literal">-enabled</span> application.service</span><br></pre></td></tr></table></figure><h3 id="4-3-Unit-ç®¡ç†"><a href="#4-3-Unit-ç®¡ç†" class="headerlink" title="4.3 Unit ç®¡ç†"></a>4.3 Unit ç®¡ç†</h3><p>å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ä¸‹é¢è¿™äº›å‘½ä»¤ï¼Œç”¨äºå¯åŠ¨å’Œåœæ­¢ Unitï¼ˆä¸»è¦æ˜¯ serviceï¼‰ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç«‹å³å¯åŠ¨ä¸€ä¸ªæœåŠ¡</span></span><br><span class="line">sudo systemctl <span class="built_in">start</span> apache.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç«‹å³åœæ­¢ä¸€ä¸ªæœåŠ¡</span></span><br><span class="line">sudo systemctl stop apache.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯ä¸€ä¸ªæœåŠ¡</span></span><br><span class="line">sudo systemctl restart apache.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ€æ­»ä¸€ä¸ªæœåŠ¡çš„æ‰€æœ‰å­è¿›ç¨‹</span></span><br><span class="line">sudo systemctl <span class="built_in">kill</span> apache.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡æ–°åŠ è½½ä¸€ä¸ªæœåŠ¡çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">sudo systemctl reload apache.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡è½½æ‰€æœ‰ä¿®æ”¹è¿‡çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">sudo systemctl daemon<span class="literal">-reload</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ª Unit çš„æ‰€æœ‰åº•å±‚å‚æ•°</span></span><br><span class="line">systemctl show httpd.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ª Unit çš„æŒ‡å®šå±æ€§çš„å€¼</span></span><br><span class="line">systemctl show <span class="literal">-p</span> CPUShares httpd.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®æŸä¸ª Unit çš„æŒ‡å®šå±æ€§</span></span><br><span class="line">sudo systemctl <span class="built_in">set-property</span> httpd.service CPUShares=<span class="number">500</span></span><br></pre></td></tr></table></figure><h3 id="4-4-ä¾èµ–å…³ç³»"><a href="#4-4-ä¾èµ–å…³ç³»" class="headerlink" title="4.4 ä¾èµ–å…³ç³»"></a>4.4 ä¾èµ–å…³ç³»</h3><p>Unit ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼šA ä¾èµ–äº Bï¼Œå°±æ„å‘³ç€ Systemd åœ¨å¯åŠ¨ A çš„æ—¶å€™ï¼ŒåŒæ—¶ä¼šå»å¯åŠ¨ Bã€‚</p><p><code>systemctl list-dependencies</code> å‘½ä»¤åˆ—å‡ºä¸€ä¸ª Unit çš„æ‰€æœ‰ä¾èµ–ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list<span class="literal">-dependencies</span> nginx.service</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤çš„è¾“å‡ºç»“æœä¹‹ä¸­ï¼Œæœ‰äº›ä¾èµ–æ˜¯ Target ç±»å‹ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ï¼Œé»˜è®¤ä¸ä¼šå±•å¼€æ˜¾ç¤ºã€‚å¦‚æœè¦å±•å¼€ Targetï¼Œå°±éœ€è¦ä½¿ç”¨ <code>--all</code> å‚æ•°ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl list<span class="literal">-dependencies</span> -<span class="literal">-all</span> nginx.service</span><br></pre></td></tr></table></figure><h2 id="äº”ã€Unit-çš„é…ç½®æ–‡ä»¶"><a href="#äº”ã€Unit-çš„é…ç½®æ–‡ä»¶" class="headerlink" title="äº”ã€Unit çš„é…ç½®æ–‡ä»¶"></a>äº”ã€Unit çš„é…ç½®æ–‡ä»¶</h2><h3 id="5-1-æ¦‚è¿°"><a href="#5-1-æ¦‚è¿°" class="headerlink" title="5.1 æ¦‚è¿°"></a>5.1 æ¦‚è¿°</h3><p>æ¯ä¸€ä¸ª Unit éƒ½æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå‘Šè¯‰ Systemd æ€ä¹ˆå¯åŠ¨è¿™ä¸ª Unit ã€‚</p><p>Systemd é»˜è®¤ä»ç›®å½• <code>/etc/systemd/system/</code> è¯»å–é…ç½®æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œé‡Œé¢å­˜æ”¾çš„å¤§éƒ¨åˆ†æ–‡ä»¶éƒ½æ˜¯ç¬¦å·é“¾æ¥ï¼ŒæŒ‡å‘ç›®å½• <code>/usr/lib/systemd/system/</code> ï¼ŒçœŸæ­£çš„é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨é‚£ä¸ªç›®å½•ã€‚</p><p><code>systemctl enable</code> å‘½ä»¤ç”¨äºåœ¨ä¸Šé¢ä¸¤ä¸ªç›®å½•ä¹‹é—´ï¼Œå»ºç«‹ç¬¦å·é“¾æ¥å…³ç³»ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable clamd@scan.service </span><br><span class="line"><span class="comment"># ç­‰åŒäº </span></span><br><span class="line">sudo ln <span class="literal">-s</span> <span class="string">&#x27;/usr/lib/systemd/system/clamd@scan.service&#x27;</span> <span class="string">&#x27;/etc/systemd/system/multi-user.target.wants/clamd@scan.service&#x27;</span></span><br></pre></td></tr></table></figure><p>å¦‚æœé…ç½®æ–‡ä»¶é‡Œé¢è®¾ç½®äº†å¼€æœºå¯åŠ¨ï¼Œ<code>systemctl enable</code>å‘½ä»¤ç›¸å½“äºæ¿€æ´»å¼€æœºå¯åŠ¨ã€‚</p><p>ä¸ä¹‹å¯¹åº”çš„ï¼Œ<code>systemctl disable</code>å‘½ä»¤ç”¨äºåœ¨ä¸¤ä¸ªç›®å½•ä¹‹é—´ï¼Œæ’¤é”€ç¬¦å·é“¾æ¥å…³ç³»ï¼Œç›¸å½“äºæ’¤é”€å¼€æœºå¯åŠ¨ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl disable clamd@scan.service</span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶çš„åç¼€åï¼Œå°±æ˜¯è¯¥ Unit çš„ç§ç±»ï¼Œæ¯”å¦‚ <code>sshd.socket</code> ã€‚å¦‚æœçœç•¥ï¼ŒSystemd é»˜è®¤åç¼€åä¸º <code>.service</code>ï¼Œæ‰€ä»¥ <code>sshd</code> ä¼šè¢«ç†è§£æˆ <code>sshd.service</code>ã€‚</p><h3 id="5-2-é…ç½®æ–‡ä»¶çš„çŠ¶æ€"><a href="#5-2-é…ç½®æ–‡ä»¶çš„çŠ¶æ€" class="headerlink" title="5.2 é…ç½®æ–‡ä»¶çš„çŠ¶æ€"></a>5.2 é…ç½®æ–‡ä»¶çš„çŠ¶æ€</h3><p><code>systemctl list-unit-files</code> å‘½ä»¤ç”¨äºåˆ—å‡ºæ‰€æœ‰é…ç½®æ–‡ä»¶ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ—å‡ºæ‰€æœ‰é…ç½®æ–‡ä»¶ </span></span><br><span class="line">systemctl list<span class="literal">-unit</span><span class="literal">-files</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ—å‡ºæŒ‡å®šç±»å‹çš„é…ç½®æ–‡ä»¶ </span></span><br><span class="line">systemctl list<span class="literal">-unit</span><span class="literal">-files</span> -<span class="literal">-type</span>=service</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤ä¼šè¾“å‡ºä¸€ä¸ªåˆ—è¡¨ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">systemctl list<span class="literal">-unit</span><span class="literal">-files</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># è¾“å‡º</span></span><br><span class="line">UNIT FILE              STATE </span><br><span class="line">chronyd.service        enabled </span><br><span class="line">clamd<span class="selector-tag">@</span>.service         <span class="keyword">static</span> </span><br><span class="line">clamd@scan.service     disabled</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªåˆ—è¡¨æ˜¾ç¤ºæ¯ä¸ªé…ç½®æ–‡ä»¶çš„çŠ¶æ€ï¼Œä¸€å…±æœ‰å››ç§ã€‚</p><ul><li>enabledï¼šå·²å»ºç«‹å¯åŠ¨é“¾æ¥</li><li>disabledï¼šæ²¡å»ºç«‹å¯åŠ¨é“¾æ¥</li><li>staticï¼šè¯¥é…ç½®æ–‡ä»¶æ²¡æœ‰<code>[Install]</code>éƒ¨åˆ†ï¼ˆæ— æ³•æ‰§è¡Œï¼‰ï¼Œåªèƒ½ä½œä¸ºå…¶ä»–é…ç½®æ–‡ä»¶çš„ä¾èµ–</li><li>maskedï¼šè¯¥é…ç½®æ–‡ä»¶è¢«ç¦æ­¢å»ºç«‹å¯åŠ¨é“¾æ¥</li></ul><p>æ³¨æ„ï¼Œä»é…ç½®æ–‡ä»¶çš„çŠ¶æ€æ— æ³•çœ‹å‡ºï¼Œè¯¥ Unit æ˜¯å¦æ­£åœ¨è¿è¡Œã€‚è¿™å¿…é¡»æ‰§è¡Œå‰é¢æåˆ°çš„<code>systemctl status</code>å‘½ä»¤ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status bluetooth.service</span><br></pre></td></tr></table></figure><p>ä¸€æ—¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå°±è¦è®© SystemD é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œç„¶åé‡æ–°å¯åŠ¨ï¼Œå¦åˆ™ä¿®æ”¹ä¸ä¼šç”Ÿæ•ˆã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon<span class="literal">-reload</span></span><br><span class="line">sudo systemctl restart httpd.service</span><br></pre></td></tr></table></figure><h3 id="5-3-é…ç½®æ–‡ä»¶çš„æ ¼å¼"><a href="#5-3-é…ç½®æ–‡ä»¶çš„æ ¼å¼" class="headerlink" title="5.3 é…ç½®æ–‡ä»¶çš„æ ¼å¼"></a>5.3 é…ç½®æ–‡ä»¶çš„æ ¼å¼</h3><p>é…ç½®æ–‡ä»¶å°±æ˜¯æ™®é€šçš„æ–‡æœ¬æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ã€‚</p><p><code>systemctl cat</code>å‘½ä»¤å¯ä»¥æŸ¥çœ‹é…ç½®æ–‡ä»¶çš„å†…å®¹ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">cat</span> atd.service  </span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®æ–‡ä»¶</span></span><br><span class="line">[<span class="type">Unit</span>] </span><br><span class="line">Description=ATD daemon </span><br><span class="line"></span><br><span class="line">[<span class="type">Service</span>] <span class="built_in">Type</span>=forking </span><br><span class="line">ExecStart=/usr/bin/atd  </span><br><span class="line"></span><br><span class="line">[<span class="type">Install</span>] </span><br><span class="line">WantedBy=multi<span class="literal">-user</span>.target</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„è¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼Œé…ç½®æ–‡ä»¶åˆ†æˆå‡ ä¸ªåŒºå—ã€‚æ¯ä¸ªåŒºå—çš„ç¬¬ä¸€è¡Œï¼Œæ˜¯ç”¨æ–¹æ‹¬å·è¡¨ç¤ºçš„åŒºåˆ«åï¼Œæ¯”å¦‚<code>[Unit]</code>ã€‚æ³¨æ„ï¼Œé…ç½®æ–‡ä»¶çš„åŒºå—åå’Œå­—æ®µåï¼Œéƒ½æ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚</p><p>æ¯ä¸ªåŒºå—å†…éƒ¨æ˜¯ä¸€äº›ç­‰å·è¿æ¥çš„é”®å€¼å¯¹ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">Section</span>] </span><br><span class="line">Directive1=value </span><br><span class="line">Directive2=value  </span><br><span class="line">. . . </span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œé”®å€¼å¯¹çš„ç­‰å·ä¸¤ä¾§ä¸èƒ½æœ‰ç©ºæ ¼ã€‚</p><h3 id="5-4-é…ç½®æ–‡ä»¶çš„åŒºå—"><a href="#5-4-é…ç½®æ–‡ä»¶çš„åŒºå—" class="headerlink" title="5.4 é…ç½®æ–‡ä»¶çš„åŒºå—"></a>5.4 é…ç½®æ–‡ä»¶çš„åŒºå—</h3><p><code>[Unit]</code>åŒºå—é€šå¸¸æ˜¯é…ç½®æ–‡ä»¶çš„ç¬¬ä¸€ä¸ªåŒºå—ï¼Œç”¨æ¥å®šä¹‰ Unit çš„å…ƒæ•°æ®ï¼Œä»¥åŠé…ç½®ä¸å…¶ä»– Unit çš„å…³ç³»ã€‚å®ƒçš„ä¸»è¦å­—æ®µå¦‚ä¸‹ã€‚</p><ul><li><code>Description</code>ï¼šç®€çŸ­æè¿°</li><li><code>Documentation</code>ï¼šæ–‡æ¡£åœ°å€</li><li><code>Requires</code>ï¼šå½“å‰ Unit ä¾èµ–çš„å…¶ä»– Unitï¼Œå¦‚æœå®ƒä»¬æ²¡æœ‰è¿è¡Œï¼Œå½“å‰ Unit ä¼šå¯åŠ¨å¤±è´¥</li><li><code>Wants</code>ï¼šä¸å½“å‰ Unit é…åˆçš„å…¶ä»– Unitï¼Œå¦‚æœå®ƒä»¬æ²¡æœ‰è¿è¡Œï¼Œå½“å‰ Unit ä¸ä¼šå¯åŠ¨å¤±è´¥</li><li><code>BindsTo</code>ï¼šä¸<code>Requires</code>ç±»ä¼¼ï¼Œå®ƒæŒ‡å®šçš„ Unit å¦‚æœé€€å‡ºï¼Œä¼šå¯¼è‡´å½“å‰ Unit åœæ­¢è¿è¡Œ</li><li><code>Before</code>ï¼šå¦‚æœè¯¥å­—æ®µæŒ‡å®šçš„ Unit ä¹Ÿè¦å¯åŠ¨ï¼Œé‚£ä¹ˆå¿…é¡»åœ¨å½“å‰ Unit ä¹‹åå¯åŠ¨</li><li><code>After</code>ï¼šå¦‚æœè¯¥å­—æ®µæŒ‡å®šçš„ Unit ä¹Ÿè¦å¯åŠ¨ï¼Œé‚£ä¹ˆå¿…é¡»åœ¨å½“å‰ Unit ä¹‹å‰å¯åŠ¨</li><li><code>Conflicts</code>ï¼šè¿™é‡ŒæŒ‡å®šçš„ Unit ä¸èƒ½ä¸å½“å‰ Unit åŒæ—¶è¿è¡Œ</li><li><code>Condition...</code>ï¼šå½“å‰ Unit è¿è¡Œå¿…é¡»æ»¡è¶³çš„æ¡ä»¶ï¼Œå¦åˆ™ä¸ä¼šè¿è¡Œ</li><li><code>Assert...</code>ï¼šå½“å‰ Unit è¿è¡Œå¿…é¡»æ»¡è¶³çš„æ¡ä»¶ï¼Œå¦åˆ™ä¼šæŠ¥å¯åŠ¨å¤±è´¥</li></ul><p><code>[Install]</code>é€šå¸¸æ˜¯é…ç½®æ–‡ä»¶çš„æœ€åä¸€ä¸ªåŒºå—ï¼Œç”¨æ¥å®šä¹‰å¦‚ä½•å¯åŠ¨ï¼Œä»¥åŠæ˜¯å¦å¼€æœºå¯åŠ¨ã€‚å®ƒçš„ä¸»è¦å­—æ®µå¦‚ä¸‹ã€‚</p><ul><li><code>WantedBy</code>ï¼šå®ƒçš„å€¼æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ª Targetï¼Œå½“å‰ Unit æ¿€æ´»æ—¶ï¼ˆenableï¼‰ç¬¦å·é“¾æ¥ä¼šæ”¾å…¥<code>/etc/systemd/system</code>ç›®å½•ä¸‹é¢ä»¥ Target å + <code>.wants</code>åç¼€æ„æˆçš„å­ç›®å½•ä¸­</li><li><code>RequiredBy</code>ï¼šå®ƒçš„å€¼æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ª Targetï¼Œå½“å‰ Unit æ¿€æ´»æ—¶ï¼Œç¬¦å·é“¾æ¥ä¼šæ”¾å…¥<code>/etc/systemd/system</code>ç›®å½•ä¸‹é¢ä»¥ Target å + <code>.required</code>åç¼€æ„æˆçš„å­ç›®å½•ä¸­</li><li><code>Alias</code>ï¼šå½“å‰ Unit å¯ç”¨äºå¯åŠ¨çš„åˆ«å</li><li><code>Also</code>ï¼šå½“å‰ Unit æ¿€æ´»ï¼ˆenableï¼‰æ—¶ï¼Œä¼šè¢«åŒæ—¶æ¿€æ´»çš„å…¶ä»– Unit</li></ul><p><code>[Service]</code>åŒºå—ç”¨æ¥ Service çš„é…ç½®ï¼Œåªæœ‰ Service ç±»å‹çš„ Unit æ‰æœ‰è¿™ä¸ªåŒºå—ã€‚å®ƒçš„ä¸»è¦å­—æ®µå¦‚ä¸‹ã€‚</p><ul><li><code>Type</code>ï¼šå®šä¹‰å¯åŠ¨æ—¶çš„è¿›ç¨‹è¡Œä¸ºã€‚å®ƒæœ‰ä»¥ä¸‹å‡ ç§å€¼ã€‚</li><li><code>Type=simple</code>ï¼šé»˜è®¤å€¼ï¼Œæ‰§è¡Œ<code>ExecStart</code>æŒ‡å®šçš„å‘½ä»¤ï¼Œå¯åŠ¨ä¸»è¿›ç¨‹</li><li><code>Type=forking</code>ï¼šä»¥ fork æ–¹å¼ä»çˆ¶è¿›ç¨‹åˆ›å»ºå­è¿›ç¨‹ï¼Œåˆ›å»ºåçˆ¶è¿›ç¨‹ä¼šç«‹å³é€€å‡º</li><li><code>Type=oneshot</code>ï¼šä¸€æ¬¡æ€§è¿›ç¨‹ï¼ŒSystemd ä¼šç­‰å½“å‰æœåŠ¡é€€å‡ºï¼Œå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œ</li><li><code>Type=dbus</code>ï¼šå½“å‰æœåŠ¡é€šè¿‡ D-Bus å¯åŠ¨</li><li><code>Type=notify</code>ï¼šå½“å‰æœåŠ¡å¯åŠ¨å®Œæ¯•ï¼Œä¼šé€šçŸ¥<code>Systemd</code>ï¼Œå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œ</li><li><code>Type=idle</code>ï¼šè‹¥æœ‰å…¶ä»–ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå½“å‰æœåŠ¡æ‰ä¼šè¿è¡Œ<code>ExecStart</code>ï¼šå¯åŠ¨å½“å‰æœåŠ¡çš„å‘½ä»¤</li><li><code>ExecStartPre</code>ï¼šå¯åŠ¨å½“å‰æœåŠ¡ä¹‹å‰æ‰§è¡Œçš„å‘½ä»¤</li><li><code>ExecStartPost</code>ï¼šå¯åŠ¨å½“å‰æœåŠ¡ä¹‹åæ‰§è¡Œçš„å‘½ä»¤</li><li><code>ExecReload</code>ï¼šé‡å¯å½“å‰æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤</li><li><code>ExecStop</code>ï¼šåœæ­¢å½“å‰æœåŠ¡æ—¶æ‰§è¡Œçš„å‘½ä»¤</li><li><code>ExecStopPost</code>ï¼šåœæ­¢å½“å…¶æœåŠ¡ä¹‹åæ‰§è¡Œçš„å‘½ä»¤</li><li><code>RestartSec</code>ï¼šè‡ªåŠ¨é‡å¯å½“å‰æœåŠ¡é—´éš”çš„ç§’æ•°</li><li><code>Restart</code>ï¼šå®šä¹‰ä½•ç§æƒ…å†µ Systemd ä¼šè‡ªåŠ¨é‡å¯å½“å‰æœåŠ¡ï¼Œå¯èƒ½çš„å€¼åŒ…æ‹¬<code>always</code>ï¼ˆæ€»æ˜¯é‡å¯ï¼‰ã€<code>on-success</code>ã€<code>on-failure</code>ã€<code>on-abnormal</code>ã€<code>on-abort</code>ã€<code>on-watchdog</code></li><li><code>TimeoutSec</code>ï¼šå®šä¹‰ Systemd åœæ­¢å½“å‰æœåŠ¡ä¹‹å‰ç­‰å¾…çš„ç§’æ•°</li><li><code>Environment</code>ï¼šæŒ‡å®šç¯å¢ƒå˜é‡</li></ul><p>Unit é…ç½®æ–‡ä»¶çš„å®Œæ•´å­—æ®µæ¸…å•ï¼Œè¯·å‚è€ƒ<a href="https://www.freedesktop.org/software/systemd/man/systemd.unit.html">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h2 id="å…­ã€Target"><a href="#å…­ã€Target" class="headerlink" title="å…­ã€Target"></a>å…­ã€Target</h2><p>å¯åŠ¨è®¡ç®—æœºçš„æ—¶å€™ï¼Œéœ€è¦å¯åŠ¨å¤§é‡çš„ Unitã€‚å¦‚æœæ¯ä¸€æ¬¡å¯åŠ¨ï¼Œéƒ½è¦ä¸€ä¸€å†™æ˜æœ¬æ¬¡å¯åŠ¨éœ€è¦å“ªäº› Unitï¼Œæ˜¾ç„¶éå¸¸ä¸æ–¹ä¾¿ã€‚Systemd çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ Targetã€‚</p><p>ç®€å•è¯´ï¼ŒTarget å°±æ˜¯ä¸€ä¸ª Unit ç»„ï¼ŒåŒ…å«è®¸å¤šç›¸å…³çš„ Unit ã€‚å¯åŠ¨æŸä¸ª Target çš„æ—¶å€™ï¼ŒSystemd å°±ä¼šå¯åŠ¨é‡Œé¢æ‰€æœ‰çš„ Unitã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ï¼ŒTarget è¿™ä¸ªæ¦‚å¿µç±»ä¼¼äº â€œçŠ¶æ€ç‚¹â€ï¼Œå¯åŠ¨æŸä¸ª Target å°±å¥½æ¯”å¯åŠ¨åˆ°æŸç§çŠ¶æ€ã€‚</p><p>ä¼ ç»Ÿçš„<code>init</code>å¯åŠ¨æ¨¡å¼é‡Œé¢ï¼Œæœ‰ RunLevel çš„æ¦‚å¿µï¼Œè·Ÿ Target çš„ä½œç”¨å¾ˆç±»ä¼¼ã€‚ä¸åŒçš„æ˜¯ï¼ŒRunLevel æ˜¯äº’æ–¥çš„ï¼Œä¸å¯èƒ½å¤šä¸ª RunLevel åŒæ—¶å¯åŠ¨ï¼Œä½†æ˜¯å¤šä¸ª Target å¯ä»¥åŒæ—¶å¯åŠ¨ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„æ‰€æœ‰ Target</span></span><br><span class="line">systemctl list<span class="literal">-unit</span><span class="literal">-files</span> -<span class="literal">-type</span>=target</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ä¸€ä¸ª Target åŒ…å«çš„æ‰€æœ‰ Unit</span></span><br><span class="line">systemctl list<span class="literal">-dependencies</span> multi<span class="literal">-user</span>.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å¯åŠ¨æ—¶çš„é»˜è®¤ Target</span></span><br><span class="line">systemctl <span class="built_in">get-default</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å¯åŠ¨æ—¶çš„é»˜è®¤ Target</span></span><br><span class="line">sudo systemctl <span class="built_in">set-default</span> multi<span class="literal">-user</span>.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢ Target æ—¶ï¼Œé»˜è®¤ä¸å…³é—­å‰ä¸€ä¸ª Target å¯åŠ¨çš„è¿›ç¨‹ï¼Œ</span></span><br><span class="line"><span class="comment"># systemctl isolate å‘½ä»¤æ”¹å˜è¿™ç§è¡Œä¸ºï¼Œ</span></span><br><span class="line"><span class="comment"># å…³é—­å‰ä¸€ä¸ª Target é‡Œé¢æ‰€æœ‰ä¸å±äºåä¸€ä¸ª Target çš„è¿›ç¨‹</span></span><br><span class="line">sudo systemctl isolate multi<span class="literal">-user</span>.target</span><br></pre></td></tr></table></figure><p>Target ä¸ ä¼ ç»Ÿ RunLevel çš„å¯¹åº”å…³ç³»å¦‚ä¸‹ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Traditional runlevel      New target name     Symbolically linked to...  </span><br><span class="line">Runlevel <span class="number">0</span>           |    runlevel0.target -&gt; poweroff.target </span><br><span class="line">Runlevel <span class="number">1</span>           |    runlevel1.target -&gt; rescue.target </span><br><span class="line">Runlevel <span class="number">2</span>           |    runlevel2.target -&gt; multi<span class="literal">-user</span>.target </span><br><span class="line">Runlevel <span class="number">3</span>           |    runlevel3.target -&gt; multi<span class="literal">-user</span>.target </span><br><span class="line">Runlevel <span class="number">4</span>           |    runlevel4.target -&gt; multi<span class="literal">-user</span>.target </span><br><span class="line">Runlevel <span class="number">5</span>           |    runlevel5.target -&gt; graphical.target </span><br><span class="line">Runlevel <span class="number">6</span>           |    runlevel6.target -&gt; reboot.target</span><br></pre></td></tr></table></figure><p>å®ƒä¸<code>init</code>è¿›ç¨‹çš„ä¸»è¦å·®åˆ«å¦‚ä¸‹ã€‚</p><p><strong>ï¼ˆ1ï¼‰é»˜è®¤çš„ RunLevel</strong>ï¼ˆåœ¨<code>/etc/inittab</code>æ–‡ä»¶è®¾ç½®ï¼‰ç°åœ¨è¢«é»˜è®¤çš„ Target å–ä»£ï¼Œä½ç½®æ˜¯<code>/etc/systemd/system/default.target</code>ï¼Œé€šå¸¸ç¬¦å·é“¾æ¥åˆ°<code>graphical.target</code>ï¼ˆå›¾å½¢ç•Œé¢ï¼‰æˆ–è€…<code>multi-user.target</code>ï¼ˆå¤šç”¨æˆ·å‘½ä»¤è¡Œï¼‰ã€‚</p><p><strong>ï¼ˆ2ï¼‰å¯åŠ¨è„šæœ¬çš„ä½ç½®</strong>ï¼Œä»¥å‰æ˜¯<code>/etc/init.d</code>ç›®å½•ï¼Œç¬¦å·é“¾æ¥åˆ°ä¸åŒçš„ RunLevel ç›®å½• ï¼ˆæ¯”å¦‚<code>/etc/rc3.d</code>ã€<code>/etc/rc5.d</code>ç­‰ï¼‰ï¼Œç°åœ¨åˆ™å­˜æ”¾åœ¨<code>/lib/systemd/system</code>å’Œ<code>/etc/systemd/system</code>ç›®å½•ã€‚</p><p><strong>ï¼ˆ3ï¼‰é…ç½®æ–‡ä»¶çš„ä½ç½®</strong>ï¼Œä»¥å‰<code>init</code>è¿›ç¨‹çš„é…ç½®æ–‡ä»¶æ˜¯<code>/etc/inittab</code>ï¼Œå„ç§æœåŠ¡çš„é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨<code>/etc/sysconfig</code>ç›®å½•ã€‚ç°åœ¨çš„é…ç½®æ–‡ä»¶ä¸»è¦å­˜æ”¾åœ¨<code>/lib/systemd</code>ç›®å½•ï¼Œåœ¨<code>/etc/systemd</code>ç›®å½•é‡Œé¢çš„ä¿®æ”¹å¯ä»¥è¦†ç›–åŸå§‹è®¾ç½®ã€‚</p><h2 id="ä¸ƒã€æ—¥å¿—ç®¡ç†"><a href="#ä¸ƒã€æ—¥å¿—ç®¡ç†" class="headerlink" title="ä¸ƒã€æ—¥å¿—ç®¡ç†"></a>ä¸ƒã€æ—¥å¿—ç®¡ç†</h2><p>Systemd ç»Ÿä¸€ç®¡ç†æ‰€æœ‰ Unit çš„å¯åŠ¨æ—¥å¿—ã€‚å¸¦æ¥çš„å¥½å¤„å°±æ˜¯ï¼Œå¯ä»¥åªç”¨<code>journalctl</code>ä¸€ä¸ªå‘½ä»¤ï¼ŒæŸ¥çœ‹æ‰€æœ‰æ—¥å¿—ï¼ˆå†…æ ¸æ—¥å¿—å’Œåº”ç”¨æ—¥å¿—ï¼‰ã€‚æ—¥å¿—çš„é…ç½®æ–‡ä»¶æ˜¯<code>/etc/systemd/journald.conf</code>ã€‚</p><p><code>journalctl</code>åŠŸèƒ½å¼ºå¤§ï¼Œç”¨æ³•éå¸¸å¤šã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—ï¼ˆé»˜è®¤æƒ…å†µä¸‹ ï¼Œåªä¿å­˜æœ¬æ¬¡å¯åŠ¨çš„æ—¥å¿—ï¼‰</span></span><br><span class="line">sudo journalctl</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å†…æ ¸æ—¥å¿—ï¼ˆä¸æ˜¾ç¤ºåº”ç”¨æ—¥å¿—ï¼‰</span></span><br><span class="line">sudo journalctl <span class="literal">-k</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç³»ç»Ÿæœ¬æ¬¡å¯åŠ¨çš„æ—¥å¿—</span></span><br><span class="line">sudo journalctl <span class="literal">-b</span></span><br><span class="line">sudo journalctl <span class="literal">-b</span> <span class="literal">-0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ä¸Šä¸€æ¬¡å¯åŠ¨çš„æ—¥å¿—ï¼ˆéœ€æ›´æ”¹è®¾ç½®ï¼‰</span></span><br><span class="line">sudo journalctl <span class="literal">-b</span> <span class="literal">-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æŒ‡å®šæ—¶é—´çš„æ—¥å¿—</span></span><br><span class="line">sudo journalctl -<span class="literal">-since</span>=<span class="string">&quot;2012-10-30 18:17:16&quot;</span></span><br><span class="line">sudo journalctl -<span class="literal">-since</span> <span class="string">&quot;20 min ago&quot;</span></span><br><span class="line">sudo journalctl -<span class="literal">-since</span> yesterday</span><br><span class="line">sudo journalctl -<span class="literal">-since</span> <span class="string">&quot;2015-01-10&quot;</span> -<span class="literal">-until</span> <span class="string">&quot;2015-01-11 03:00&quot;</span></span><br><span class="line">sudo journalctl -<span class="literal">-since</span> <span class="number">09</span>:<span class="number">00</span> -<span class="literal">-until</span> <span class="string">&quot;1 hour ago&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå°¾éƒ¨çš„æœ€æ–°10è¡Œæ—¥å¿—</span></span><br><span class="line">sudo journalctl <span class="literal">-n</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºå°¾éƒ¨æŒ‡å®šè¡Œæ•°çš„æ—¥å¿—</span></span><br><span class="line">sudo journalctl <span class="literal">-n</span> <span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®æ—¶æ»šåŠ¨æ˜¾ç¤ºæœ€æ–°æ—¥å¿—</span></span><br><span class="line">sudo journalctl <span class="operator">-f</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æŒ‡å®šæœåŠ¡çš„æ—¥å¿—</span></span><br><span class="line">sudo journalctl /usr/lib/systemd/systemd</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹çš„æ—¥å¿—</span></span><br><span class="line">sudo journalctl _PID=<span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æŸä¸ªè·¯å¾„çš„è„šæœ¬çš„æ—¥å¿—</span></span><br><span class="line">sudo journalctl /usr/bin/bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„æ—¥å¿—</span></span><br><span class="line">sudo journalctl _UID=<span class="number">33</span> -<span class="literal">-since</span> today</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æŸä¸ª Unit çš„æ—¥å¿—</span></span><br><span class="line">sudo journalctl <span class="literal">-u</span> nginx.service</span><br><span class="line">sudo journalctl <span class="literal">-u</span> nginx.service -<span class="literal">-since</span> today</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®æ—¶æ»šåŠ¨æ˜¾ç¤ºæŸä¸ª Unit çš„æœ€æ–°æ—¥å¿—</span></span><br><span class="line">sudo journalctl <span class="literal">-u</span> nginx.service <span class="operator">-f</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå¹¶æ˜¾ç¤ºå¤šä¸ª Unit çš„æ—¥å¿—</span></span><br><span class="line">journalctl <span class="literal">-u</span> nginx.service <span class="literal">-u</span> php<span class="literal">-fpm</span>.service -<span class="literal">-since</span> today</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æŒ‡å®šä¼˜å…ˆçº§ï¼ˆåŠå…¶ä»¥ä¸Šçº§åˆ«ï¼‰çš„æ—¥å¿—ï¼Œå…±æœ‰8çº§</span></span><br><span class="line"><span class="comment"># 0: emerg</span></span><br><span class="line"><span class="comment"># 1: alert</span></span><br><span class="line"><span class="comment"># 2: crit</span></span><br><span class="line"><span class="comment"># 3: err</span></span><br><span class="line"><span class="comment"># 4: warning</span></span><br><span class="line"><span class="comment"># 5: notice</span></span><br><span class="line"><span class="comment"># 6: info</span></span><br><span class="line"><span class="comment"># 7: debug</span></span><br><span class="line">sudo journalctl <span class="literal">-p</span> err <span class="literal">-b</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ—¥å¿—é»˜è®¤åˆ†é¡µè¾“å‡ºï¼Œ--no-pager æ”¹ä¸ºæ­£å¸¸çš„æ ‡å‡†è¾“å‡º</span></span><br><span class="line">sudo journalctl -<span class="literal">-no</span><span class="literal">-pager</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥ JSON æ ¼å¼ï¼ˆå•è¡Œï¼‰è¾“å‡º</span></span><br><span class="line">sudo journalctl <span class="literal">-b</span> <span class="literal">-u</span> nginx.service <span class="literal">-o</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥ JSON æ ¼å¼ï¼ˆå¤šè¡Œï¼‰è¾“å‡ºï¼Œå¯è¯»æ€§æ›´å¥½</span></span><br><span class="line">sudo journalctl <span class="literal">-b</span> <span class="literal">-u</span> nginx.serviceqq</span><br><span class="line"> <span class="literal">-o</span> json<span class="literal">-pretty</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæ—¥å¿—å æ®çš„ç¡¬ç›˜ç©ºé—´</span></span><br><span class="line">sudo journalctl -<span class="literal">-disk</span><span class="literal">-usage</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šæ—¥å¿—æ–‡ä»¶å æ®çš„æœ€å¤§ç©ºé—´</span></span><br><span class="line">sudo journalctl -<span class="literal">-vacuum</span><span class="literal">-size</span>=<span class="number">1</span>G</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šæ—¥å¿—æ–‡ä»¶ä¿å­˜å¤šä¹…</span></span><br><span class="line">sudo journalctl -<span class="literal">-vacuum</span><span class="literal">-time</span>=<span class="number">1</span>years</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æœåŠ¡å™¨ </tag>
            
            <tag> CentOS </tag>
            
            <tag> è½¬è½½ </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOS 15 é€‚é…è¸©å‘</title>
      <link href="/2021/07/20/iOS15/"/>
      <url>/2021/07/20/iOS15/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è‹¹æœå‰ä¸¤å¤©æ¨å‡ºäº†iOS 15çš„beta-3ã€‚è¿™ä¸ªæ¶ˆæ¯è¿˜æ˜¯ä»å®¢æˆ·é‚£å„¿çŸ¥é“çš„ğŸ˜‚ï¼Œæ²¡æƒ³åˆ°ä»–ä»¬æ¯”æˆ‘è¿˜å‰å«ï¼Œç§‹å¤©éƒ½ç­‰ä¸åŠ~~</p><h2 id="æµ‹è¯•èƒŒæ™¯"><a href="#æµ‹è¯•èƒŒæ™¯" class="headerlink" title="æµ‹è¯•èƒŒæ™¯"></a>æµ‹è¯•èƒŒæ™¯</h2><p>Xcode 13 betaç‰ˆï¼ŒiOS 15 beta 3çš„ç³»ç»Ÿã€‚<br>é™¤äº†å®¢æˆ·æå‡ºçš„é—®é¢˜ï¼Œè‡ªå·±è¿˜å‘ç°äº†ä¸¤å¤„UIå¼‚å¸¸ï¼Œä¸è¿‡è¯´ä¸å®šè‹¹æœèƒ½è‰¯å¿ƒå‘ç°ï¼Œåœ¨æ­£å¼ç‰ˆä¸­ç»™ä¿®å¤ä¸€ä¸‹ã€‚</p><h2 id="å‘"><a href="#å‘" class="headerlink" title="å‘"></a>å‘</h2><h3 id="ä¸€ã€ä¼ä¸šç­¾åçš„-App-æ— æ³•ä½¿ç”¨"><a href="#ä¸€ã€ä¼ä¸šç­¾åçš„-App-æ— æ³•ä½¿ç”¨" class="headerlink" title="ä¸€ã€ä¼ä¸šç­¾åçš„ App æ— æ³•ä½¿ç”¨"></a>ä¸€ã€ä¼ä¸šç­¾åçš„ App æ— æ³•ä½¿ç”¨</h3><p>å®¢æˆ·åé¦ˆè¯´ App ä¸èƒ½æ­£å¸¸æ‰“å¼€ï¼Œå¹¶ä¸”æç¤ºä¸‹é¢çš„è¿™ç§ä¿¡æ¯ï¼š</p><blockquote><p>â€œxxxâ€Needs to Be Updated : The developer of this app needs to update it to work with this version of iOS.</p><p>â€œxxxâ€éœ€è¦æ›´æ–° ï¼šAppå¼€å‘è€…éœ€è¦æ›´æ–°æ­¤Appä»¥åœ¨æ­¤iOSç‰ˆæœ¬ä¸Šæ­£å¸¸å·¥ä½œã€‚</p></blockquote>  <span id="more"></span><center><div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/iOS15.jpg" class width="300"></div></center><p>çŒœæµ‹æ˜¯éœ€è¦é‡ç­¾åæˆ–è€…ä½¿ç”¨æœ€æ–°çš„ Xcode æ‰“åŒ…ã€‚</p><p>æˆ‘çœ‹è‹¹æœè®ºå›ä¸Šæœ‰äººè¯´å¿…é¡»ä½¿ç”¨æ–°çš„ Xcode ä»¥é€‚é… iOS 15ï¼Œä½†æˆ‘ç”¨æ—§ç‰ˆçš„ Xcode é‡æ–°æ‰“äº†ä¸€ä¸ªåŒ…ï¼Œä¹Ÿå¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ‰€ä»¥ï¼Œä¸æ–¹ä¾¿æ›´æ–° Xcode çš„è¯ï¼Œå¯ä»¥å°è¯•é‡ç­¾åè¯•è¯•ã€‚</p><p><strong>ç¡äº†ä¸€è§‰ä¹‹ç©¶æè¡¥å……ï¼š</strong> ç­¾åé—®é¢˜ä¸ Xcode ç‰ˆæœ¬æ— å…³ï¼Œè€Œæ˜¯ Mac ç³»ç»Ÿå¯¼è‡´çš„ï¼Œå°† macOS å‡çº§åˆ° 11.* Big Sur ä»¥ä¸Šå†è¿›è¡Œé‡æ–°ç­¾åï¼Œå¯ä»¥è§£å†³ App æ— æ³•ä½¿ç”¨çš„é—®é¢˜ã€‚</p><h3 id="äºŒã€-NavigationBar-é¢œè‰²åŠèƒŒæ™¯å¤±æ•ˆ"><a href="#äºŒã€-NavigationBar-é¢œè‰²åŠèƒŒæ™¯å¤±æ•ˆ" class="headerlink" title="äºŒã€ NavigationBar é¢œè‰²åŠèƒŒæ™¯å¤±æ•ˆ"></a>äºŒã€ NavigationBar é¢œè‰²åŠèƒŒæ™¯å¤±æ•ˆ</h3><h4 id="1-é—®é¢˜æè¿°"><a href="#1-é—®é¢˜æè¿°" class="headerlink" title="1. é—®é¢˜æè¿°"></a>1. é—®é¢˜æè¿°</h4><p>é¡¹ç›®ä¸­å¾€å¾€ä¼šè‡ªå®šä¹‰ä¸€ä¸ªå¯¼èˆªæ§åˆ¶å™¨ï¼Œæ–¹ä¾¿å…¨å±€æŒ‡å®šå¯¼èˆªæ¡çš„èƒŒæ™¯è‰²ã€æ ‡é¢˜é¢œè‰²ç­‰ç­‰ã€‚ä»¥è®¾ç½®èƒŒæ™¯è‰²å’Œæ ‡é¢˜é¢œè‰²ä¸ºä¾‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//èƒŒæ™¯è‰²</span></span><br><span class="line"><span class="keyword">self</span>.navigationBar.barTintColor = RGB(<span class="number">42</span>, <span class="number">109</span>, <span class="number">240</span>);</span><br><span class="line"><span class="comment">//Title é¢œè‰²</span></span><br><span class="line"><span class="built_in">NSDictionary</span> *titleTextAttributes = @&#123;<span class="built_in">NSFontAttributeName</span>:[<span class="built_in">UIFont</span> fontWithName:<span class="string">@&quot;&quot;</span> size:<span class="number">18</span>], <span class="built_in">NSForegroundColorAttributeName</span>:RGB(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)&#125;;</span><br><span class="line">[<span class="keyword">self</span>.navigationBar setTitleTextAttributes:titleTextAttributes];</span><br></pre></td></tr></table></figure><p>ä½†åœ¨ iOS 15ä¸Šå‘ç°ï¼ŒæŒ‡å®šçš„èƒŒæ™¯è‰²å¤±æ•ˆäº†ï¼Œä½†æ»šåŠ¨æ§åˆ¶å™¨çš„è§†å›¾æ—¶ï¼Œå¯¼èˆªæ¡çš„èƒŒæ™¯åˆå‡ºç°äº†ã€‚çœ‹äº†ä¸€çœ¼ UINavigationBar çš„ APIï¼Œ15ä¸­å¹¶æ²¡æœ‰æ–°å¢çš„ã€‚å€’æ˜¯æœ‰å‡ ä¸ª iOS 13æ–°å¢çš„ API æˆ‘æ²¡ç”¨è¿‡â€¦â€¦å“ˆå“ˆå“ˆï¼Œå†™åˆ°è¿™é‡Œè§‰å¾—è‡ªå·±ä»¥å‰çš„åŠŸè¯¾è½ä¸‹å¤ªå¤šäº†ï¼Œ13çš„æ›´æ–°è¿˜æ²¡å­¦ä¹ å‘¢ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚</p><h4 id="2-iOS-13æ–°å¢-API"><a href="#2-iOS-13æ–°å¢-API" class="headerlink" title="2. iOS 13æ–°å¢ API"></a>2. iOS 13æ–°å¢ API</h4><ul><li>standardAppearance : æè¿°å¯¼èˆªæ ä»¥æ ‡å‡†é«˜åº¦æ˜¾ç¤ºæ—¶è¦ä½¿ç”¨çš„å¤–è§‚å±æ€§ã€‚</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readwrite</span>, <span class="keyword">copy</span>) <span class="built_in">UINavigationBarAppearance</span> *standardAppearance;</span><br></pre></td></tr></table></figure><ul><li>compactAppearance : æè¿°å¯¼èˆªæ åœ¨ç´§å‡‘é«˜åº¦æ—¶ä½¿ç”¨çš„å¤–è§‚å±æ€§ã€‚å¦‚æœæœªè®¾ç½®ï¼Œåˆ™å°†ä½¿ç”¨æ ‡å‡†å¤–è§‚ã€‚</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readwrite</span>, <span class="keyword">copy</span>, <span class="keyword">nullable</span>) <span class="built_in">UINavigationBarAppearance</span> *compactAppearance;</span><br></pre></td></tr></table></figure><ul><li>scrollEdgeAppearance : æè¿°å½“å…³è”çš„ UIScrollView å‘ä¸Šæ»šåŠ¨æ—¶è¦ä½¿ç”¨çš„å¯¼èˆªæ çš„å¤–è§‚å±æ€§ã€‚å¦‚æœæœªè®¾ç½®ï¼Œå°†æ”¹ç”¨ä¿®æ”¹åçš„standardAppearanceã€‚</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readwrite</span>, <span class="keyword">copy</span>, <span class="keyword">nullable</span>) <span class="built_in">UINavigationBarAppearance</span> *scrollEdgeAppearance;</span><br></pre></td></tr></table></figure><ul><li>compactScrollEdgeAppearance : æè¿°å½“å¯¼èˆªæ ä»¥ç´§å‡‘çš„é«˜åº¦æ˜¾ç¤ºæ—¶ï¼Œä»¥åŠå…³è”çš„ UIScrollView å¾€ä¸Šæ»šåŠ¨æ—¶ï¼Œè¦ä½¿ç”¨çš„å¯¼èˆªæ çš„å¤–è§‚å±æ€§ã€‚å¦‚æœæœªè®¾ç½®ï¼Œåˆ™é¦–å…ˆå°è¯• scrollEdgeAppearanceï¼Œå¦‚æœä¸ºnilï¼Œåˆ™å°è¯• compactAppearanceï¼Œç„¶åå°è¯•ä¿®æ”¹ standardAppearanceã€‚</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">readwrite</span>, <span class="keyword">copy</span>, <span class="keyword">nullable</span>) <span class="built_in">UINavigationBarAppearance</span> *compactScrollEdgeAppearance;</span><br></pre></td></tr></table></figure><h4 id="3-è§£å†³åŠæ³•"><a href="#3-è§£å†³åŠæ³•" class="headerlink" title="3. è§£å†³åŠæ³•"></a>3. è§£å†³åŠæ³•</h4><p>æ ¹æ®æˆ‘ä»¬çš„é—®é¢˜ç°è±¡ï¼ŒçŒœæµ‹æ˜¯ <code>standardAppearance</code> å’Œ <code>scrollEdgeAppearance</code> éœ€è¦è°ƒæ•´ï¼Œå¦‚æœæ­£å¸¸çŠ¶æ€å’Œæ»šåŠ¨çŠ¶æ€é¢œè‰²ä¸€æ ·ï¼Œå¯ä»¥ä¿®æ”¹å¦‚ä¸‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSDictionary</span> *titleTextAttributes = @&#123;<span class="built_in">NSFontAttributeName</span>:[<span class="built_in">UIFont</span> fontWithName:MAIN_FONT_FAMILY size:<span class="number">18</span>], <span class="built_in">NSForegroundColorAttributeName</span>:RGB(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)&#125;;</span><br><span class="line"><span class="keyword">if</span> (@available(iOS <span class="number">13.0</span>, *)) &#123;</span><br><span class="line">    <span class="built_in">UINavigationBarAppearance</span> *appearance = [<span class="built_in">UINavigationBarAppearance</span> new];</span><br><span class="line">    appearance.backgroundColor = RGB(<span class="number">42</span>, <span class="number">109</span>, <span class="number">240</span>);</span><br><span class="line">    appearance.titleTextAttributes = titleTextAttributes;    </span><br><span class="line">    <span class="keyword">self</span>.navigationBar.standardAppearance = appearance;</span><br><span class="line">    <span class="keyword">self</span>.navigationBar.scrollEdgeAppearance = appearance;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Fallback on earlier versions</span></span><br><span class="line">    <span class="keyword">self</span>.navigationBar.barTintColor = RGB(<span class="number">42</span>, <span class="number">109</span>, <span class="number">240</span>);</span><br><span class="line">    [<span class="keyword">self</span>.navigationBar setTitleTextAttributes:titleTextAttributes];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Bingoï¼é¢œè‰²æ˜¾ç¤ºæ­£å¸¸å•¦</p><p>æ‰€ä»¥è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿå¼ºä¹°å¼ºå–å—ï¼Ÿå¿…é¡»è®¾ç½® Appearance æ‰å¯ä»¥ï¼Ÿ</p><h4 id="4-é—ç•™é—®é¢˜"><a href="#4-é—ç•™é—®é¢˜" class="headerlink" title="4. é—ç•™é—®é¢˜"></a>4. é—ç•™é—®é¢˜</h4><p>åœ¨ Xcode 13-beta ä¸­ï¼Œå¿…é¡»åŒæ—¶æŒ‡å®š <code>standardAppearance</code> å’Œ <code>scrollEdgeAppearance</code> æ‰å¯ä»¥ã€‚ä½†æ ¹æ®è‹¹æœçš„æ³¨é‡Šï¼Œå¦‚æœ <code>scrollEdgeAppearance</code> ä¸ºnilï¼Œä¼šé»˜è®¤ä½¿ç”¨ <code>standardAppearance</code> å•Šã€‚ç‡ƒé¹…å¹¶ä¸è¡Œã€‚ä¸çŸ¥é“æ˜¯è‹¹æœçš„ bug è¿˜æ˜¯æ€ä¹ˆçš„â€¦â€¦æœ‹å‹æ˜¨å¤©å«æˆ‘ä¸€èµ·è½¬è¡Œäº†ï¼Œå› ä¸ºä»–è§‰å¾—è‹¹æœçš„ç³»ç»Ÿåšçš„ä¸€å¹´ä¸å¦‚ä¸€å¹´~ ğŸ˜‚</p><h4 id="5-å¯¼èˆªæ åº•éƒ¨çš„é»‘çº¿"><a href="#5-å¯¼èˆªæ åº•éƒ¨çš„é»‘çº¿" class="headerlink" title="5. å¯¼èˆªæ åº•éƒ¨çš„é»‘çº¿"></a>5. å¯¼èˆªæ åº•éƒ¨çš„é»‘çº¿</h4><p><code>shadowColor</code> é˜´å½±å±æ€§è®¾ç½®ä¸ºé€æ˜ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å»æ‰å¯¼èˆªæ åº•éƒ¨çš„é»‘çº¿</span></span><br><span class="line"><span class="keyword">if</span> (@available(iOS <span class="number">13.0</span>, *)) &#123;</span><br><span class="line">    ...</span><br><span class="line">    appearance.shadowColor = [<span class="built_in">UIColor</span> clearColor];</span><br><span class="line">    ...</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Fallback on earlier versions</span></span><br><span class="line">    ...  </span><br><span class="line">    [<span class="keyword">self</span>.navigationBar setBackgroundImage:[<span class="built_in">UIImage</span> new] forBarMetrics:<span class="built_in">UIBarMetricsDefault</span>];</span><br><span class="line">    <span class="keyword">self</span>.navigationBar.shadowImage = [[<span class="built_in">UIImage</span> alloc] init];</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸‰ã€UITabBar-èƒŒæ™¯å›¾å¤±æ•ˆ"><a href="#ä¸‰ã€UITabBar-èƒŒæ™¯å›¾å¤±æ•ˆ" class="headerlink" title="ä¸‰ã€UITabBar èƒŒæ™¯å›¾å¤±æ•ˆ"></a>ä¸‰ã€UITabBar èƒŒæ™¯å›¾å¤±æ•ˆ</h3><p>è¿™ä¸ªé—®é¢˜æœ‰ç‚¹ç±»ä¼¼ä¸Šä¸€ä¸ªï¼Œ<code>UITabBar</code> ä¹‹å‰è®¾ç½®çš„èƒŒæ™¯å›¾ç‰‡ï¼Œè€ç‰ˆæœ¬å¯ä»¥ï¼ŒiOS 15ä¸Šè¡¨ç°ä¸ºç©ºç™½ã€‚å‚è€ƒé—®é¢˜äºŒçš„æ€è·¯ï¼Œæ‰¾åˆ°äº†ä¸‹é¢çš„ APIï¼Œåšä¸ªå…¼å®¹å°±å¯ä»¥äº†ã€‚å½“ç„¶ï¼Œé—ç•™é—®é¢˜åŒä¸Šï¼Œå¿…é¡»åŒæ—¶æŒ‡å®š <code>standardAppearance</code> å’Œ <code>scrollEdgeAppearance</code> æ‰å¯ä»¥â€¦â€¦ğŸ™„â€¦â€¦è€Œä¸”ï¼Œå¦‚æœåœ¨åˆå§‹åŒ–ä»¥åï¼ŒæŸä¸ªæ—¶æœºå•ç‹¬ä¿®æ”¹äº† <code>standardAppearance</code>ï¼Œä¹Ÿå¿…é¡»è¦åŒæ­¥æŒ‡å®šä¸€ä¸‹ <code>scrollEdgeAppearance</code> â€¦â€¦ğŸ™„</p><ul><li>API</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readwrite</span>, <span class="keyword">copy</span>) <span class="built_in">UITabBarAppearance</span> *standardAppearance;<span class="comment">//ios 13.0.</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readwrite</span>, <span class="keyword">copy</span>, <span class="keyword">nullable</span>) <span class="built_in">UITabBarAppearance</span> *scrollEdgeAppearance;<span class="comment">//ios 15.0.</span></span><br></pre></td></tr></table></figure><ul><li>è€æ–¹å¼</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">self</span>.tabBar setBackgroundImage:[img imageWithRenderingMode:(<span class="built_in">UIImageRenderingModeAlwaysOriginal</span>)]];</span><br></pre></td></tr></table></figure><ul><li>å…¼å®¹æ–°çš„API</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIImage</span> *img = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@&quot;ahaaaaa&quot;</span>];</span><br><span class="line"><span class="keyword">if</span> (@available(iOS <span class="number">13.0</span>, *)) &#123;</span><br><span class="line">    <span class="built_in">UITabBarAppearance</span> *appearance = [[<span class="built_in">UITabBarAppearance</span> alloc] init];</span><br><span class="line">    appearance.backgroundImage = img;</span><br><span class="line">    appearance.backgroundImageContentMode = <span class="built_in">UIViewContentModeScaleToFill</span>;</span><br><span class="line">    <span class="keyword">self</span>.tabBar.standardAppearance = appearance;</span><br><span class="line">    <span class="keyword">if</span> (@available(iOS <span class="number">15.0</span>, *)) &#123;</span><br><span class="line">        <span class="keyword">self</span>.tabBar.scrollEdgeAppearance = appearance;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Fallback on earlier versions</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Fallback on earlier versions</span></span><br><span class="line">    [<span class="keyword">self</span>.tabBar setBackgroundImage:[img imageWithRenderingMode:(<span class="built_in">UIImageRenderingModeAlwaysOriginal</span>)]];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å››ã€UITabBarItem-æ–‡å­—é¢œè‰²å¤±æ•ˆ"><a href="#å››ã€UITabBarItem-æ–‡å­—é¢œè‰²å¤±æ•ˆ" class="headerlink" title="å››ã€UITabBarItem æ–‡å­—é¢œè‰²å¤±æ•ˆ"></a>å››ã€UITabBarItem æ–‡å­—é¢œè‰²å¤±æ•ˆ</h3><p>â€¦â€¦è¿˜æ˜¯åŒä¸Šï¼Œæ–°ç‰ˆæœ¬ä¸­ UITabBarItem æ–‡å­—é¢œè‰²çš„ä¿®æ”¹ä¸èµ·ä½œç”¨ã€‚åŒæ ·æ˜¯åœ¨ iOS 13 ä¸­æ–°å¢çš„ <code>UITabBarItemAppearance</code> æ¥ä¿®æ”¹ Item çš„ä¸åŒçŠ¶æ€ä¸‹çš„ä¸åŒè¡¨ç°ã€‚é—ç•™é—®é¢˜åŒä¸Šã€‚</p><ul><li>ç›¸å…³çš„ç±»å‹å¦‚ä¸‹ï¼Œå…¶ä»–çš„APIå°±ä¸è´´äº†ï¼š</li></ul><p><code>UITabBarItemAppearance</code> ã€ <code>UITabBarItemStateAppearance</code></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// The appearance when the tab bar item is in the normal state</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">strong</span>) <span class="built_in">UITabBarItemStateAppearance</span> *normal;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// The appearance when the tab bar item is in the selected state</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">strong</span>) <span class="built_in">UITabBarItemStateAppearance</span> *selected;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// The appearance when the tab bar item is in the disabled state</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">strong</span>) <span class="built_in">UITabBarItemStateAppearance</span> *disabled;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// The appearance when the tab bar item is in the focused state</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">readonly</span>, <span class="keyword">strong</span>) <span class="built_in">UITabBarItemStateAppearance</span> *focused;</span><br></pre></td></tr></table></figure><ul><li>å…¼å®¹æ–°çš„API</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Set tabBar style.</span></span><br><span class="line"><span class="built_in">UIColor</span> *normalTitleColor = RGBA(<span class="number">80</span>, <span class="number">80</span>, <span class="number">81</span>, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">UIColor</span> *selectedTitleColor = RGBA(<span class="number">42</span>, <span class="number">109</span>, <span class="number">240</span>, <span class="number">1</span>);</span><br><span class="line"><span class="keyword">if</span> (@available(iOS <span class="number">13.0</span>, *)) &#123;</span><br><span class="line">    <span class="built_in">UITabBarItemAppearance</span> *itemAppearance = [[<span class="built_in">UITabBarItemAppearance</span> alloc] init];</span><br><span class="line">    itemAppearance.normal.titleTextAttributes = @&#123;<span class="built_in">NSForegroundColorAttributeName</span> : normalTitleColor&#125;;</span><br><span class="line">    itemAppearance.selected.titleTextAttributes = @&#123;<span class="built_in">NSForegroundColorAttributeName</span> : selectedTitleColor&#125;;</span><br><span class="line">    <span class="built_in">UITabBarAppearance</span> *appearance = [[<span class="built_in">UITabBarAppearance</span> alloc] init];</span><br><span class="line">    appearance.stackedLayoutAppearance = itemAppearance;</span><br><span class="line">    <span class="keyword">self</span>.tabBar.standardAppearance = appearance;</span><br><span class="line">    <span class="keyword">if</span> (@available(iOS <span class="number">15.0</span>, *)) &#123;</span><br><span class="line">        <span class="keyword">self</span>.tabBar.scrollEdgeAppearance = appearance;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Fallback on earlier versions</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span> (@available(iOS <span class="number">10.0</span>, *)) &#123;</span><br><span class="line">    <span class="keyword">self</span>.tabBar.tintColor = normalTitleColor;</span><br><span class="line">    <span class="keyword">self</span>.tabBar.unselectedItemTintColor = selectedTitleColor;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// Fallback on earlier versions</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äº”ã€-UITableView-Header-é«˜åº¦å¤±æ•ˆ"><a href="#äº”ã€-UITableView-Header-é«˜åº¦å¤±æ•ˆ" class="headerlink" title="äº”ã€ UITableView Header é«˜åº¦å¤±æ•ˆ"></a>äº”ã€ UITableView Header é«˜åº¦å¤±æ•ˆ</h3><p>é€šå¸¸ TableView ç¬¬ä¸€ä¸ªåˆ†ç»„å¦‚æœä¸éœ€è¦ Header çš„è¯ï¼Œæˆ‘ä»¬ä¼šç»™ä¸ª0.01çš„é«˜åº¦ï¼Œçœ‹ä¸Šå»å°±æ˜¯é¡¶éƒ¨æ²¡æœ‰ç©ºç™½çš„æ•ˆæœã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">CGFloat</span>)tableView:(<span class="built_in">UITableView</span> *)tableView heightForHeaderInSection:(<span class="built_in">NSInteger</span>)section &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.01</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†åœ¨ iOS 15ä¸Šè§†å›¾çš„é¡¶éƒ¨é»˜è®¤ä¼šä¸‹æ²‰å‡ ä¸ªåƒç´ ï¼Œæˆ‘ä»¥ä¸ºç£¨äººçš„ <code>automaticallyAdjustsScrollIndicatorInsets</code> è¿™ç±»å°å¦–ç²¾åˆå‡ºç°äº†ï¼Œå°è¯•äº†ä¸€ä¸‹å¥½åƒä¸æ˜¯è¿™ç±»é—®é¢˜ã€‚ğŸ˜‚</p><p>çœ‹äº†ä¸€çœ¼å®˜ç½‘çš„ API å˜åŠ¨ï¼Œå‘ç°äº†ä¸€ä¸ªå°ç§˜å¯†ï¼š</p><blockquote><p>The amount of padding above each section header.</p><p>æ¯ä¸ªåˆ†ç»„Headerä¸Šæ–¹çš„å¡«å……é‡ã€‚</p></blockquote><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> sectionHeaderTopPadding;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥æˆ‘å°±è¿™æ ·:</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (@available(iOS <span class="number">15.0</span>, *)) &#123;</span><br><span class="line">    <span class="keyword">self</span>.tableView.sectionHeaderTopPadding = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯•ç€æ”¹äº†ä¸€ä¸‹ï¼Œæ¯•ç«Ÿè¯•è¯•åˆä¸ä¼šæ€€å­•ã€‚å¥½äº†â€¦â€¦æœ‰é‚£ä¹ˆä¸€ç¬é—´æˆ‘ä»¿ä½›èƒ½ç†è§£è‹¹æœä¸ºä»€ä¹ˆåŠ è¿™ä¸ªå±æ€§ï¼Œè²Œä¼¼çœŸçš„æœ‰åœºæ™¯ä¼šç”¨åˆ°è¿™ä¸ªé—´è·ã€‚å†·é™äº†ä¸€ä¸‹ï¼Œæˆ‘å‘ç°æˆ‘è¿˜æ˜¯å¤ªèœäº†ï¼Œç†è§£ä¸äº†~~~</p><h3 id="å…­ã€UITextField-çš„-clearButton-å‘å³åç§»"><a href="#å…­ã€UITextField-çš„-clearButton-å‘å³åç§»" class="headerlink" title="å…­ã€UITextField çš„ clearButton å‘å³åç§»"></a>å…­ã€UITextField çš„ clearButton å‘å³åç§»</h3><p>_UITextFieldClearButton å‘å³åç§»äº†ä¸€ç‚¹å„¿ç‚¹å„¿â€¦æœ‰ç‚¹å‹åˆ°è¾¹æ¡†ï¼Œå€’æ˜¯ä¸å½±å“ä½¿ç”¨ï¼Œç„¶åæˆ‘ä¹Ÿä¸çŸ¥é“æ€ä¹ˆæ”¹ï¼Œè°çŸ¥é“å‘Šè¯‰æˆ‘ä¸€ä¸‹ã€‚é˜¿é‡Œå˜å¤š~</p><p>2021-08-12ï¼šå…³äºé—®é¢˜å…­ï¼ŒiOS 15 beta-4 ç‰ˆæœ¬ä¸­è²Œä¼¼å·²ç»å¥½äº†~~</p><hr><p>ç›®å‰å°±å‘ç°äº†è¿™å‡ ä¸ªé—®é¢˜ã€‚å¸Œæœ›ç§‹å¤©åˆ°æ¥çš„æ—¶å€™ï¼Œå¼€å‘è€…ä»¬ä¸ç”¨èŠ±å¤ªå¤šæ—¶é—´åœ¨ UI é€‚é…ä¸Šã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOS suggestedFilename ä¸­æ–‡æ–‡ä»¶åä¹±ç é—®é¢˜</title>
      <link href="/2021/07/14/suggestedFilename%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81/"/>
      <url>/2021/07/14/suggestedFilename%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æ—¥å¸¸åæ§½ï¼š</p><blockquote><p>App ä¸­æœ‰ä¸ªä¸‹è½½é™„ä»¶çš„åŠŸèƒ½ï¼Œé¢„è§ˆé™„ä»¶çš„æ—¶å€™ä¼šæ˜¾ç¤ºæ–‡ä»¶åå­—ã€‚ä½†æœ‰ä¸ªäººè‰¾ç‰¹æˆ‘è¯´ï¼Œå®‰å“çš„æ²¡é—®é¢˜ï¼ŒIOS çš„ä¸è¡Œï¼Œæ–‡ä»¶åæ˜¾ç¤ºä¹±ç ï¼Œå°±é—®ä½ å°´ä¸å°´å°¬ï¼Ÿâ€¦â€¦</p><p>é€šå¸¸æœ‰äººæ Bug å’±éƒ½è™šå¿ƒæ¥å—ï¼Œä½†åªè¦è¯´äº† å®‰å“æ²¡é—®é¢˜ ï¼Œè¡€å‹ç«‹é©¬ä¸Šå‡ä¸€æ ¼ã€‚æœ‰äº‹å„¿è¯´äº‹å„¿ï¼Œåˆ«æå®‰å“â€¦â€¦</p><p>çœ‹åˆ°å†™  <code>IOS</code>  è€Œä¸æ˜¯ <code>iOS</code> çš„äººï¼Œè¡€å‹åˆä¸Šå‡ä¸€æ ¼â€¦â€¦</p><p>æƒ³èµ·æ¥è‹¹æœå¼€å‘æœ€ç«çš„é‚£å‡ å¹´ï¼Œæˆ‘æ¥åˆ°è¿‡ä¸€ä¸ª HR çš„ç”µè¯ï¼Œâ€è¯·é—®æ‚¨æ˜¯åš ISO å¼€å‘çš„å—ï¼Ÿâ€ ï¼Œæˆ‘å½“æ—¶å¿ƒæƒ³è¿™ä¸ªå…¬å¸ä¸èƒ½å»å‘€ï¼ŒHR éƒ½è¿™ä¹ˆä¸ä¸¥è°¨ï¼Œç»™æˆ‘å¹² HR å¥½ä¸å¥½ï¼Œæ‹¿æ¥å§ä½ â€¦â€¦</p></blockquote><h2 id="suggestedFilename"><a href="#suggestedFilename" class="headerlink" title="suggestedFilename"></a>suggestedFilename</h2><span id="more"></span><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *filename = task.response.suggestedFilename;</span><br></pre></td></tr></table></figure><p>è¯´å›æ­£é¢˜ï¼Œä¸‹è½½é™„ä»¶çš„ä»£ç ä¸­æˆ‘ä»¬æ˜¯é€šè¿‡ <a href="https://tommygirl.cn/2018/04/20/NSURLResponse/">NSURLResponse</a> çš„ <code>suggestedFilename</code> è·å–æœåŠ¡ç«¯å»ºè®®çš„ä¸€ä¸ªæ–‡ä»¶åï¼Œä½†æ˜¯å¾—åˆ°çš„å´æ˜¯ç±»ä¼¼è¿™æ ·çš„ä¹±ç   <code>eÌï¿½ï¿½aÌŠÂºï¿½aÌŠÂ¸ï¿½aÌŠÂ·Â¥aÌˆÂ¼Â¤Ã¦ï¿½Â¥eÌï¿½ï¿½aÌˆÂ½ï¿½eÌï¿½Â¢aÌˆÂ¼ï¿½eÌÂ£ï¿½eÌ€Â¡Â¥aÌŠï¿½Â©eÌ€Â´Â¹aÌƒï¿½ï¿½aÌˆÂºÂ¤eÌï¿½ï¿½eÌÂ£ï¿½aÌŠÂ®Â¿eÌ€Â´Â¹aÌŠÂ®Â¡Ã¦ Â¸cÌ§Â»ï¿½cÌ§Â®ï¿½eÌ€Â¡Â¨.xls</code> ï¼Œæ»¡è„¸é—®å·æ˜¯ä¸æ˜¯ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</p><p>æˆ‘ä»¬çŸ¥é“ <code>suggestedFilename</code> æ¥è‡ª HTTP å“åº”çš„å¤´éƒ¨ä¿¡æ¯ï¼Œåªæ˜¯è‹¹æœé»˜è®¤å¸®æˆ‘ä»¬è§£ææˆäº†ä¸€ä¸ª <code>NSURLResponse</code> å¯¹è±¡ï¼Œ ä¹±ç é—®é¢˜å¾€å¾€æ˜¯å­—ç¬¦çš„ç¼–ç æ ¼å¼æ²¡æœ‰å¯¹åº”ä¸Šï¼Œæˆ–è€…è‹¹æœå¹¶ä¸çŸ¥é“åº”è¯¥æŒ‰ç…§å“ªä¸ªç¼–ç è§„åˆ™è§£æï¼ŒæŠŠé—®é¢˜æŠ›ç»™äº†å¼€å‘è€…è‡ªå·±å¤„ç†ã€‚</p><p>é‚£å¥‡æ€ªçš„æ˜¯ï¼Œæœ‰çš„é™„ä»¶æ­£å¸¸ï¼Œæœ‰çš„é™„ä»¶å°±å‡Œä¹±äº†ã€‚è‡ªç„¶æˆ‘ä»¬å°±æƒ³åˆ°æ¯”å¯¹ä¸€ä¸‹ä¸¤è€… Header çš„åŒºåˆ«ï¼Œæ˜¯éª¡å­æ˜¯é©¬æ‹‰å‡ºæ¥æºœæºœ~~</p><p>ä¸‹é¢æ˜¯æˆªå–çš„å‡ ä¸ªä¸ Content æœ‰å…³çš„ä¿¡æ¯ï¼š</p><ul><li>é™„ä»¶ç¤ºä¾‹ï¼šæµ‹è¯•ç´ æ - å‰¯æœ¬.docx ã€‚æ–‡ä»¶åæ˜¾ç¤ºä¹±ç ã€‚</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="built_in">NSHTTPURLResponse</span>: <span class="number">0x600003a44fa0</span>&gt; &#123; URL: https:<span class="comment">//wwww.www.www &#125; &#123; Status Code: 201, Headers &#123;</span></span><br><span class="line">    <span class="string">&quot;Access-Control-Allow-Methods&quot;</span> =     (</span><br><span class="line">        <span class="string">&quot;POST,GET,PUT&quot;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="string">&quot;Content-Disposition&quot;</span> =     (</span><br><span class="line">        <span class="string">&quot;form-data; name=\&quot;attachment\&quot;; filename=\&quot;\U00e6\U00b5\U008b\U00e8\U00af\U0095\U00e7\U00b4\U00a0\U00e6\U009d\U0090 - \U00e5\U0089\U00af\U00e6\U009c\U00ac.docx\&quot;&quot;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="string">&quot;Content-Length&quot;</span> =     (</span><br><span class="line">        <span class="number">19498</span></span><br><span class="line">    );</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span> =     (</span><br><span class="line">        <span class="string">&quot;application/octet-stream;charset=UTF-8&quot;</span></span><br><span class="line">    );</span><br><span class="line">&#125; &#125;</span><br></pre></td></tr></table></figure><ul><li>é™„ä»¶ç¤ºä¾‹ï¼šä¸Šæµ·éšç§æ¡æ¬¾.docxã€‚æ–‡ä»¶åæ˜¾ç¤ºæ­£å¸¸ã€‚</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="built_in">NSHTTPURLResponse</span>: <span class="number">0x600003d919a0</span>&gt; &#123; URL: https:<span class="comment">//wwww.www.www &#125; &#123; Status Code: 200, Headers &#123;</span></span><br><span class="line">    <span class="string">&quot;Access-Control-Allow-Methods&quot;</span> =     (</span><br><span class="line">        <span class="string">&quot;GET, POST, OPTIONS, PUT, DELETE, HEAD, TRACE&quot;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="string">&quot;Content-Disposition&quot;</span> =     (</span><br><span class="line">        <span class="string">&quot;inline; filename*=UTF-8&#x27;&#x27;%E4%B8%8A%E7%A0%94%E7%A7%BB%E5%8A%A8%E9%9A%90%E7%A7%81%E6%9D%A1%E6%AC%BE.docx&quot;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="string">&quot;Content-Encoding&quot;</span> =     (</span><br><span class="line">        gzip</span><br><span class="line">    );</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span> =     (</span><br><span class="line">        <span class="string">&quot;application/vnd.openxmlformats-officedocument.wordprocessingml.document&quot;</span></span><br><span class="line">    );</span><br><span class="line">&#125; &#125;</span><br></pre></td></tr></table></figure><p><code>Content-Disposition</code> å’Œ <code>Content-Type</code>  æœ‰ç‚¹åŒºåˆ«ã€‚ä¹‹å‰æˆ‘æ€»æ˜¯è¯¯ä»¥ä¸º <code>Content-Type</code> ä¸­çš„ <code>charset=UTF-8</code> é™¤äº†æŒ‡å®šæ–‡ä»¶çš„ç¼–ç æ ¼å¼ï¼Œæ–‡ä»¶åä¹Ÿæ˜¯ç”±è¿™ä¸ªæŒ‡å®šçš„ã€‚å¤§é”™ç‰¹é”™äº†~~</p><p>ç¬¬ä¸€æ¬¡å…³æ³¨ <code>Content-Disposition</code> ã€‚æ‰€ä»¥å®ƒåˆ°åº•æ˜¯ä½•æ–¹ç¥åœ£å‘¢ï¼Ÿ</p><h2 id="Content-Disposition"><a href="#Content-Disposition" class="headerlink" title="Content-Disposition"></a>Content-Disposition</h2><blockquote><p>åœ¨å¸¸è§„çš„ HTTP åº”ç­”ä¸­ï¼Œ<code>Content-Disposition</code>  å±äºå“åº”å¤´çš„ä¸€ä¸ªå±æ€§ï¼Œç”¨äºæŒ‡ç¤ºæœåŠ¡å™¨å“åº”ç»™æˆ‘ä»¬çš„å†…å®¹è¯¥ä»¥ä½•ç§å½¢å¼å±•ç¤ºï¼Œæ˜¯ä»¥å†…è”çš„å½¢å¼ï¼ˆå³ç½‘é¡µæˆ–è€…é¡µé¢çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œè¿˜æ˜¯ä»¥é™„ä»¶çš„å½¢å¼ä¸‹è½½å¹¶ä¿å­˜åˆ°æœ¬åœ°ã€‚</p></blockquote><h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><h4 id="ä½œä¸ºä¸»ä½“çš„å“åº”æ ‡é¢˜"><a href="#ä½œä¸ºä¸»ä½“çš„å“åº”æ ‡é¢˜" class="headerlink" title="ä½œä¸ºä¸»ä½“çš„å“åº”æ ‡é¢˜"></a>ä½œä¸ºä¸»ä½“çš„å“åº”æ ‡é¢˜</h4><p>HTTP ä¸Šä¸‹æ–‡ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ <code>inline</code>ï¼ˆé»˜è®¤å€¼ï¼Œè¡¨ç¤ºå®ƒå¯ä»¥æ˜¾ç¤ºåœ¨ç½‘é¡µå†…ï¼Œæˆ–ä½œä¸ºç½‘é¡µï¼‰æˆ– <code>attachment</code>ï¼ˆè¡¨ç¤ºå®ƒåº”è¯¥ä¸‹è½½ï¼›å¤§å¤šæ•°æµè§ˆå™¨å‘ˆç°â€œå¦å­˜ä¸ºâ€å¯¹è¯æ¡†ï¼Œé¢„å…ˆå¡«å…¥<code>filename</code>ï¼Œå¦‚æœå‚æ•°çš„å€¼å­˜åœ¨çš„è¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Content-Disposition: inline</span><br><span class="line">Content-Disposition: attachment</span><br><span class="line">Content-Disposition: attachment; filename=<span class="string">&quot;filename.jpg&quot;</span></span><br></pre></td></tr></table></figure><h4 id="ä½œä¸ºå¤šéƒ¨åˆ†ä¸»ä½“çš„-header"><a href="#ä½œä¸ºå¤šéƒ¨åˆ†ä¸»ä½“çš„-header" class="headerlink" title="ä½œä¸ºå¤šéƒ¨åˆ†ä¸»ä½“çš„ header"></a>ä½œä¸ºå¤šéƒ¨åˆ†ä¸»ä½“çš„ header</h4><p>HTTP ä¸Šä¸‹æ–‡ä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°æ€»æ˜¯<code>form-data</code>; å…¶ä»–å‚æ•°ä¸åŒºåˆ†å¤§å°å†™ï¼Œå¹¶ä¸”æœ‰å‚æ•°ï¼Œåœ¨<code>&#39;=&#39;</code>ç¬¦å·åé¢ä½¿ç”¨å¸¦å¼•å·çš„å­—ç¬¦ä¸²è¯­æ³•ã€‚å¤šä¸ªå‚æ•°ç”¨åˆ†å·ï¼ˆ<code>&#39;;&#39;</code>ï¼‰åˆ†éš”ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Content-Disposition: form-data</span><br><span class="line">Content-Disposition: form-data; name=<span class="string">&quot;fieldName&quot;</span></span><br><span class="line">Content-Disposition: form-data; name=<span class="string">&quot;fieldName&quot;</span>; filename=<span class="string">&quot;filename.jpg&quot;</span></span><br></pre></td></tr></table></figure><h3 id="æŒ‡ä»¤"><a href="#æŒ‡ä»¤" class="headerlink" title="æŒ‡ä»¤"></a>æŒ‡ä»¤</h3><ul><li><p><code>name</code></p><p>åé¢æ˜¯ä¸€ä¸ªè¡¨å•å­—æ®µåçš„å­—ç¬¦ä¸²ï¼Œæ¯ä¸€ä¸ªå­—æ®µåä¼šå¯¹åº”ä¸€ä¸ªå­éƒ¨åˆ†ã€‚åœ¨åŒä¸€ä¸ªå­—æ®µåå¯¹åº”å¤šä¸ªæ–‡ä»¶çš„æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚ï¼Œå¸¦æœ‰ <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/Input#attr-multiple"><code>multiple</code></a> å±æ€§çš„ <code>&lt;input type=file&gt;</code> å…ƒç´ ï¼‰ï¼Œåˆ™å¤šä¸ªå­éƒ¨åˆ†å…±ç”¨åŒä¸€ä¸ªå­—æ®µåã€‚å¦‚æœ name å‚æ•°çš„å€¼ä¸º <code>&#39;_charset_&#39;</code> ï¼Œæ„å‘³ç€è¿™ä¸ªå­éƒ¨åˆ†è¡¨ç¤ºçš„ä¸æ˜¯ä¸€ä¸ª HTML å­—æ®µï¼Œè€Œæ˜¯åœ¨æœªæ˜ç¡®æŒ‡å®šå­—ç¬¦é›†ä¿¡æ¯çš„æƒ…å†µä¸‹å„éƒ¨åˆ†ä½¿ç”¨çš„é»˜è®¤å­—ç¬¦é›†ã€‚</p></li><li><p><code>filename</code></p><p>åé¢æ˜¯è¦ä¼ é€çš„æ–‡ä»¶çš„åˆå§‹åç§°çš„å­—ç¬¦ä¸²ã€‚<strong>è¿™ä¸ªå‚æ•°æ€»æ˜¯å¯é€‰çš„ï¼Œè€Œä¸”ä¸èƒ½ç›²ç›®ä½¿ç”¨</strong>ï¼šè·¯å¾„ä¿¡æ¯å¿…é¡»èˆæ‰ï¼ŒåŒæ—¶è¦è¿›è¡Œä¸€å®šçš„è½¬æ¢ä»¥ç¬¦åˆæœåŠ¡å™¨æ–‡ä»¶ç³»ç»Ÿè§„åˆ™ã€‚è¿™ä¸ªå‚æ•°ä¸»è¦ç”¨æ¥æä¾›å±•ç¤ºæ€§ä¿¡æ¯ã€‚å½“ä¸ <code>Content-Disposition: attachment</code> ä¸€åŒä½¿ç”¨çš„æ—¶å€™ï¼Œå®ƒè¢«ç”¨ä½œâ€ä¿å­˜ä¸ºâ€å¯¹è¯æ¡†ä¸­å‘ˆç°ç»™ç”¨æˆ·çš„é»˜è®¤æ–‡ä»¶åã€‚</p></li><li><p><code>filename *</code></p><p><code>filename</code> å’Œ <code>filename *</code> ä¸¤ä¸ªå‚æ•°çš„å”¯ä¸€åŒºåˆ«åœ¨äºï¼Œ<code>filename *</code> é‡‡ç”¨äº†<a href="https://tools.ietf.org/html/rfc5987">RFC 5987</a> ä¸­è§„å®šçš„ç¼–ç æ–¹å¼ã€‚<code>filename</code> å’Œ <code>filename *</code> åŒæ—¶å‡ºç°çš„æ—¶å€™ï¼Œåº”è¯¥ä¼˜å…ˆé‡‡ç”¨  <code>filename *</code> ï¼Œå‡å¦‚äºŒè€…éƒ½æ”¯æŒçš„è¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">filename*=UTF-<span class="number">8</span><span class="string">&#x27;&#x27;</span>testfile.docx</span><br></pre></td></tr></table></figure></li></ul><p>PS: <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Disposition">å‚è€ƒèµ„æ–™</a></p><h2 id="å›å½’åˆ°é—®é¢˜"><a href="#å›å½’åˆ°é—®é¢˜" class="headerlink" title="å›å½’åˆ°é—®é¢˜"></a>å›å½’åˆ°é—®é¢˜</h2><p>å›å½’åˆ°æˆ‘ä»¬å‰é¢çš„é—®é¢˜ï¼Œä¸€ä¸ªæŒ‡å®šçš„ <code>filename</code> ï¼Œä¸€ä¸ªæŒ‡å®šçš„  <code>filename *</code> ï¼Œæœ‰é—®é¢˜å—ï¼Ÿæ²¡æœ‰é—®é¢˜ã€‚å‰é¢è¯´äº†ï¼Œéƒ½æ˜¯æ ‡å‡†çš„ã€‚åªä¸è¿‡åè€…å‘Šè¯‰äº†æˆ‘ä»¬æ–‡ä»¶åä½¿ç”¨çš„ç¼–ç ï¼Œè€Œä¸”è¿˜æ˜¯æ™®éçš„ç³»ç»Ÿå’Œæµè§ˆå™¨éƒ½æ”¯æŒçš„ UTF-8ã€‚å‰è€…æ—¢æ²¡æœ‰æŒ‡å®šç¼–ç ï¼Œä¹Ÿä¸æ˜¯ UTF-8ã€‚æˆ‘ä»¬èƒ½éª‚åå°å—ï¼Ÿä¸èƒ½ï¼Œä½†æˆ‘è¿˜æ˜¯åœ¨å¿ƒé‡Œéª‚äº†ä¸€å¥ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¹±ç </span></span><br><span class="line"><span class="string">&quot;Content-Disposition&quot;</span> =     (</span><br><span class="line">        <span class="string">&quot;form-data; name=\&quot;attachment\&quot;; filename=\&quot;\U00e6\U00b5\U008b\U00e8\U00af\U0095\U00e7\U00b4\U00a0\U00e6\U009d\U0090 - \U00e5\U0089\U00af\U00e6\U009c\U00ac.docx\&quot;&quot;</span></span><br><span class="line">    );</span><br><span class="line"><span class="comment">//æ­£å¸¸</span></span><br><span class="line"><span class="string">&quot;Content-Disposition&quot;</span> =     (</span><br><span class="line">        <span class="string">&quot;inline; filename*=UTF-8&#x27;&#x27;%E4%B8%8A%E7%A0%94%E7%A7%BB%E5%8A%A8%E9%9A%90%E7%A7%81%E6%9D%A1%E6%AC%BE.docx&quot;</span></span><br><span class="line">    );</span><br></pre></td></tr></table></figure><p>ä¸ä¸Šé¢ä¸¤ç§å½¢å¼å¯¹åº”ï¼Œè§£å†³åŠæ³•ä¹Ÿæœ‰ä¸¤ç§ï¼š</p><ol><li>æœåŠ¡ç«¯æŠŠ <code>Content-Disposition</code> ä¸­çš„æ–‡ä»¶åç¼–ç åŠ ä¸Šã€‚</li><li>iOS è‡ªå·±å•ç‹¬è§£æä¸€ä¸‹ <code>suggestedFilename</code> ã€‚</li></ol><p>æˆ‘è¿æ°”å¥½ï¼Œå¯¹æ¥çš„ä¸šåŠ¡æ–¹åœ¨æœåŠ¡ç«¯æ”¹äº†ï¼Œæ€åº¦è¿˜ä¸é”™ã€‚é‚£å¦‚æœå¯¹æ–¹å› å®¢è§‚åŸå› æ”¹ä¸äº†æ€ä¹ˆåŠå‘¢ï¼Ÿé‡‡ç”¨æ–¹æ³•2ï¼Œä½†è¿™ä¸ªæ—¶å€™é—®é¢˜åˆæ¥äº†ï¼Œæˆ‘ä»¬æ€ä¹ˆçŸ¥é“ç”¨å“ªç§ç¼–ç æ¥è§£æå‘¢ï¼Ÿ</p><p>è¯´åˆ°ç¼–ç ï¼Œæ—¥å¸¸æˆ‘ä¹Ÿåªæ˜¯ç”¨ <code>NSUTF8StringEncoding</code> æ¯”è¾ƒå¤šã€‚UTF-8 æœ‰ç‚¹ç±»ä¼¼äº Haffman ç¼–ç ï¼Œå®ƒå°† Unicode ç¼–ç ä¸º 00000000-0000007F çš„å­—ç¬¦ï¼Œç”¨å•ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼›00000080-000007FF çš„å­—ç¬¦ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºï¼›00000800-0000FFFF çš„å­—ç¬¦ç”¨3å­—èŠ‚è¡¨ç¤ºã€‚å› ä¸ºç›®å‰ä¸ºæ­¢ Unicode-16 è§„èŒƒæ²¡æœ‰æŒ‡å®š FFFF ä»¥ä¸Šçš„å­—ç¬¦ï¼Œæ‰€ä»¥ UTF-8 æœ€å¤šæ˜¯ä½¿ç”¨3ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚ä½†ç†è®ºä¸Šæ¥è¯´ï¼ŒUTF-8 æœ€å¤šéœ€è¦ç”¨6å­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Ÿ ğŸ¤“</p><h2 id="NSStringEncoding"><a href="#NSStringEncoding" class="headerlink" title="NSStringEncoding"></a>NSStringEncoding</h2><blockquote><p>ä¸€ç»„å¸¸é‡ï¼ŒNSString å¯èƒ½ç”¨åˆ°çš„å­—ç¬¦ä¸²ç¼–ç ã€‚</p></blockquote><h3 id="Constants"><a href="#Constants" class="headerlink" title="Constants"></a>Constants</h3><table><thead><tr><th>NSStringEncoding</th><th>Notes</th></tr></thead><tbody><tr><td>NSASCIIStringEncoding</td><td>- 8 ä½å­—ç¬¦å†…çš„ä¸¥æ ¼ 7 ä½ ASCII ç¼–ç ï¼›ä»… ASCII å€¼ 0â€¦127ã€‚</td></tr><tr><td>NSNEXTSTEPStringEncoding</td><td>- å¸¦æœ‰ NEXTSTEP æ‰©å±•çš„ 8 ä½ ASCII ç¼–ç ã€‚</td></tr><tr><td>NSJapaneseEUCStringEncoding</td><td>- æ—¥è¯­æ–‡æœ¬çš„ 8 ä½ EUC ç¼–ç ã€‚</td></tr><tr><td>NSUTF8StringEncoding</td><td>- Unicode å­—ç¬¦çš„ 8 ä½è¡¨ç¤ºï¼Œé€‚åˆç”±åŸºäº ASCII çš„ç³»ç»Ÿä¼ è¾“æˆ–å­˜å‚¨ã€‚</td></tr><tr><td>NSISOLatin1StringEncoding</td><td>- 8 ä½ ISO Latin 1 ç¼–ç ã€‚åˆå« ISO-8859-1 ç¼–ç ã€‚</td></tr><tr><td>NSSymbolStringEncoding</td><td>- 8 ä½ Adobe ç¬¦å·ç¼–ç å‘é‡ã€‚</td></tr><tr><td>NSNonLossyASCIIStringEncoding</td><td>- 7 ä½è¯¦ç»† ASCII è¡¨ç¤ºæ‰€æœ‰ Unicode å­—ç¬¦ã€‚ï¼Ÿï¼Ÿ</td></tr><tr><td>NSShiftJISStringEncoding</td><td>- æ—¥è¯­æ–‡æœ¬çš„ 8 ä½ Shift-JIS ç¼–ç ã€‚</td></tr><tr><td>NSISOLatin2StringEncoding</td><td>- 8 ä½ ISO Latin 2 ç¼–ç ã€‚åˆå« ISO-8859-2 ç¼–ç ã€‚</td></tr><tr><td>NSUnicodeStringEncoding</td><td>- å­—ç¬¦ä¸²å¯¹è±¡çš„è§„èŒƒ Unicode ç¼–ç ã€‚æ˜¯ä¸€ç§ï¼’å­—èŠ‚ç¼–ç ï¼Œèƒ½å¤Ÿæä¾›65536ä¸ªå­—ç¬¦ï¼Œå¦‚â€Aâ€çš„Unicodeç¼–ç ä¸º6500ï¼Œè€ŒBigEndianUnicodeç¼–ç ä¸º0065</td></tr><tr><td>NSWindowsCP1251StringEncoding</td><td>- Microsoft Windows ä»£ç é¡µ 1251ï¼Œç¼–ç  Cyrillic å­—ç¬¦ï¼›ç›¸å½“äº AdobeStandardCyrillic å­—ä½“ç¼–ç ã€‚</td></tr><tr><td>NSWindowsCP1252StringEncoding</td><td>- Microsoft Windows ä»£ç é¡µ 1252ï¼›ç›¸å½“äº WinLatin1ã€‚</td></tr><tr><td>NSWindowsCP1253StringEncoding</td><td>- Microsoft Windows ä»£ç é¡µ 1253ï¼Œç¼–ç å¸Œè…Šå­—ç¬¦ã€‚</td></tr><tr><td>NSWindowsCP1254StringEncoding</td><td>- Microsoft Windows ä»£ç é¡µ 1254ï¼Œç¼–ç åœŸè€³å…¶è¯­å­—ç¬¦ã€‚</td></tr><tr><td>NSWindowsCP1250StringEncoding</td><td>- Microsoft Windows ä»£ç é¡µ 1250ï¼›ç›¸å½“äº WinLatin2ã€‚</td></tr><tr><td>NSISO2022JPStringEncoding</td><td>- ç”µå­é‚®ä»¶çš„ ISO 2022 æ—¥è¯­ç¼–ç ã€‚GB 2312 éµä»äº ISO 2022ã€‚</td></tr><tr><td>NSMacOSRomanStringEncoding</td><td>- ç»å…¸çš„ Macintosh ç½—é©¬ç¼–ç ã€‚ä¸»è¦ç”¨äºç¼–ç  <a href="https://zh.wikipedia.org/wiki/Classic_Mac_OS">Classic Mac OS</a> ä¸Šçš„æ–‡å­—ã€‚</td></tr><tr><td>NSUTF16StringEncoding</td><td>- 16 ä½ UTF ç¼–ç ã€‚åŒ NSUnicodeStringEncodingã€‚</td></tr><tr><td>NSUTF16BigEndianStringEncoding</td><td>- æŒ‡å®šå­—èŠ‚åºçš„ UTF-16 ç¼–ç ã€‚å­—èŠ‚åºä¸ºå¤§å°¾ï¼Œä¹Ÿå«å¤§ç«¯ã€‚</td></tr><tr><td>NSUTF16LittleEndianStringEncoding</td><td>- æŒ‡å®šå­—èŠ‚åºçš„ UTF-16 ç¼–ç ã€‚å­—èŠ‚åºä¸ºå°å°¾ï¼Œä¹Ÿå«å°ç«¯ã€‚</td></tr><tr><td>NSUTF32StringEncoding</td><td>- 32 ä½ UTF ç¼–ç ã€‚</td></tr><tr><td>NSUTF32BigEndianStringEncoding</td><td>- æŒ‡å®šå­—èŠ‚åºçš„ UTF-32 ç¼–ç ã€‚å­—èŠ‚åºä¸ºå¤§å°¾ï¼Œä¹Ÿå«å¤§ç«¯ã€‚</td></tr><tr><td>NSUTF32LittleEndianStringEncoding</td><td>- æŒ‡å®šå­—èŠ‚åºçš„ UTF-32 ç¼–ç ã€‚å­—èŠ‚åºä¸ºå°å°¾ï¼Œä¹Ÿå«å°ç«¯ã€‚</td></tr></tbody></table><h3 id="å­—èŠ‚åº"><a href="#å­—èŠ‚åº" class="headerlink" title="å­—èŠ‚åº"></a>å­—èŠ‚åº</h3><blockquote><p>å¯¹äºæ•´å‹ã€é•¿æ•´å‹ç­‰æ•°æ®ç±»å‹ï¼ŒBig-endian è®¤ä¸ºç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯æœ€é«˜ä½å­—èŠ‚ï¼Œå³æŒ‰ç…§ä»ä½åœ°å€åˆ°é«˜åœ°å€çš„é¡ºåºå­˜æ”¾æ•°æ®çš„é«˜ä½å­—èŠ‚åˆ°ä½ä½å­—èŠ‚ï¼Œç§°ä¸ºå¤§ç«¯ã€å¤§å°¾ï¼›è€Œ Little-endian åˆ™ç›¸åï¼Œå®ƒè®¤ä¸ºç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯æœ€ä½ä½å­—èŠ‚ï¼ŒæŒ‰ç…§ä»ä½åœ°å€åˆ°é«˜åœ°å€çš„é¡ºåºå­˜æ”¾æ®çš„ä½ä½å­—èŠ‚åˆ°é«˜ä½å­—èŠ‚ï¼Œç§°ä¸ºå°ç«¯ã€å°å°¾ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼Œå‡è®¾ä»å†…å­˜åœ°å€ 0x0000 å¼€å§‹æœ‰ä»¥ä¸‹æ•°æ®ï¼š </p><table><thead><tr><th align="center">0x0000</th><th align="center">0x0001</th><th align="center">0x0002</th><th align="center">0x0003</th></tr></thead><tbody><tr><td align="center">0x12</td><td align="center">0x34</td><td align="center">0xab</td><td align="center">0xcd</td></tr></tbody></table><p>å¦‚æœæˆ‘ä»¬å»è¯»å–ä¸€ä¸ªåœ°å€ä¸º 0x0000 çš„å››ä¸ªå­—èŠ‚å˜é‡ï¼Œè‹¥å­—èŠ‚åºä¸º Big-endianï¼Œåˆ™è¯»å‡ºç»“æœä¸º 0x1234abcdï¼›è‹¥å­—èŠ‚åºä¸º Little-endianï¼Œåˆ™è¯»å‡ºç»“æœä¸º 0xcdab3412ã€‚</p><p>å¦‚æœæˆ‘ä»¬å°† 0x1234abcd å†™å…¥åˆ°ä»¥ 0x0000 å¼€å§‹çš„å†…å­˜ä¸­ï¼Œåˆ™ Little-endian å’Œ Big-endian æ¨¡å¼çš„å­˜æ”¾ç»“æœå¦‚ä¸‹ï¼š </p><table><thead><tr><th>åœ°å€</th><th align="center">0x0000</th><th align="center">0x0001</th><th align="center">0x0002</th><th align="center">0x0003</th></tr></thead><tbody><tr><td>Big-endian</td><td align="center">0x12</td><td align="center">0x34</td><td align="center">0xab</td><td align="center">0xcd</td></tr><tr><td>Little-endian</td><td align="center">0xcd</td><td align="center">0xab</td><td align="center">0x34</td><td align="center">0x12</td></tr></tbody></table><h4 id="ç«¯-endian-çš„èµ·æº"><a href="#ç«¯-endian-çš„èµ·æº" class="headerlink" title="ç«¯ (endian) çš„èµ·æº"></a>ç«¯ (endian) çš„èµ·æº</h4><p>â€œ<strong>endian</strong>â€ä¸€è¯æ¥æºäºåå…«ä¸–çºªçˆ±å°”å…°ä½œå®¶ä¹”çº³æ£®Â·æ–¯å¨å¤«ç‰¹çš„å°è¯´ã€Šæ ¼åˆ—ä½›æ¸¸è®°ã€‹ã€‚å°è¯´ä¸­ï¼Œå°äººå›½ä¸ºæ°´ç…®è›‹è¯¥ä»å¤§çš„ä¸€ç«¯ï¼ˆBig-Endï¼‰å‰¥å¼€è¿˜æ˜¯å°çš„ä¸€ç«¯ï¼ˆLittle-Endï¼‰å‰¥å¼€è€Œäº‰è®ºï¼Œäº‰è®ºçš„åŒæ–¹åˆ†åˆ«è¢«ç§°ä¸ºâ€œå¤§ç«¯æ´¾â€å’Œâ€œå°ç«¯æ´¾â€ã€‚ä»¥ä¸‹æ˜¯1726å¹´å…³äºå¤§å°ç«¯ä¹‹äº‰å†å²çš„æè¿°ï¼š</p><blockquote><p>æˆ‘ä¸‹é¢è¦å‘Šè¯‰ä½ çš„æ˜¯ï¼ŒLilliputå’ŒBlefuscuè¿™ä¸¤å¤§å¼ºå›½åœ¨è¿‡å»36ä¸ªæœˆé‡Œä¸€ç›´åœ¨è‹¦æˆ˜ã€‚æˆ˜äº‰å¼€å§‹æ˜¯ç”±äºä»¥ä¸‹çš„åŸå› ï¼šæˆ‘ä»¬å¤§å®¶éƒ½è®¤ä¸ºï¼Œåƒé¸¡è›‹å‰ï¼ŒåŸå§‹çš„æ–¹æ³•æ˜¯æ‰“ç ´é¸¡è›‹è¾ƒå¤§çš„ä¸€ç«¯ï¼Œå¯æ˜¯å½“ä»Šçš‡å¸çš„ç¥–çˆ¶å°æ—¶å€™åƒé¸¡è›‹ï¼Œä¸€æ¬¡æŒ‰å¤æ³•æ‰“é¸¡è›‹æ—¶ç¢°å·§å°†ä¸€ä¸ªæ‰‹æŒ‡å¼„ç ´äº†ã€‚å› æ­¤ä»–çš„çˆ¶äº²ï¼Œå½“æ—¶çš„çš‡å¸ï¼Œå°±ä¸‹äº†ä¸€é“æ••ä»¤ï¼Œå‘½ä»¤å…¨ä½“è‡£æ°‘åƒé¸¡è›‹æ—¶æ‰“ç ´é¸¡è›‹è¾ƒå°çš„ä¸€ç«¯ï¼Œè¿ä»¤è€…é‡ç½šã€‚è€ç™¾å§“ä»¬å¯¹è¿™é¡¹å‘½ä»¤æå…¶åæ„Ÿã€‚å†å²å‘Šè¯‰æˆ‘ä»¬ï¼Œç”±æ­¤æ›¾ç»å‘ç”Ÿè¿‡6æ¬¡å›ä¹±ï¼Œå…¶ä¸­ä¸€ä¸ªçš‡å¸é€äº†å‘½ï¼Œå¦ä¸€ä¸ªä¸¢äº†ç‹ä½ã€‚è¿™äº›å›ä¹±å¤§å¤šéƒ½æ˜¯ç”±Blefuscuçš„å›½ç‹å¤§è‡£ä»¬ç…½åŠ¨èµ·æ¥çš„ã€‚å›ä¹±å¹³æ¯åï¼Œæµäº¡çš„äººæ€»æ˜¯é€ƒåˆ°é‚£ä¸ªå¸å›½å»å¯»æ±‚é¿éš¾ã€‚æ®ä¼°è®¡ï¼Œå…ˆåå‡ æ¬¡æœ‰11000äººæƒ…æ„¿å—æ­»ä¹Ÿä¸è‚¯å»æ‰“ç ´é¸¡è›‹è¾ƒå°çš„ä¸€ç«¯ã€‚å…³äºè¿™ä¸€äº‰ç«¯ï¼Œæ›¾å‡ºç‰ˆè¿‡å‡ ç™¾æœ¬å¤§éƒ¨è‘—ä½œï¼Œä¸è¿‡å¤§ç«¯æ´¾çš„ä¹¦ä¸€ç›´æ˜¯å—ç¦çš„ï¼Œæ³•å¾‹ä¹Ÿè§„å®šè¯¥æ´¾ä»»ä½•äººä¸å¾—åšå®˜ã€‚â€</p></blockquote><p>è§‰å¾—è¿™ä¸ªé¸¡è›‹çš„æ•…äº‹å¾ˆæœ‰æ„æ€ï¼Œæ‰€ä»¥ç²˜åœ¨è¿™é‡Œäº† ğŸ˜‚ã€‚å…³äºå­—èŠ‚åºçš„æ›´å¤šå†…å®¹è§ <a href="https://zh.wikipedia.org/wiki/%E5%AD%97%E8%8A%82%E5%BA%8F">ç»´åŸºç™¾ç§‘-å­—èŠ‚åº</a> ï¼Œå¾ˆè¯¦ç»†äº†ã€‚</p><h3 id="å­—ç¬¦é›†"><a href="#å­—ç¬¦é›†" class="headerlink" title="å­—ç¬¦é›†"></a>å­—ç¬¦é›†</h3><p>å…³äºå­—ç¬¦é›†æœ‰äº›æˆ‘ä¹Ÿçœ‹ä¸æ‡‚ï¼Œç™¾ç§‘ä¸Šå€’æ˜¯è§£é‡Šçš„æ¯”è¾ƒæ¸…æ¥šã€‚è¿˜æœ‰å¾ˆå¤šå­—ç¬¦ç¼–ç é›†ï¼š</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/38.png"></p><h2 id="æ’å¤§è¿"><a href="#æ’å¤§è¿" class="headerlink" title="æ’å¤§è¿"></a>æ’å¤§è¿</h2><p>è¿™ä¹ˆå¤šç§ç¼–ç ï¼ŒiOS è§£æçš„è¯ï¼Œæˆ‘ä»¬ç”¨å“ªä¸€ç§å‘¢ï¼Ÿå¦‚æœå¯¹æ¥çš„ä¸šåŠ¡å°‘ï¼Œå¯ä»¥å’ŒæœåŠ¡ç«¯çº¦å®šå¥½ã€‚å¦‚æœå¯¹æ¥çš„ä¸šåŠ¡å¤šï¼Œæƒ³å…¼å®¹æ‰€æœ‰çš„â€ä¹±ç â€ï¼Œæˆ‘è§‰å¾—åªèƒ½æ’å¤§è¿äº†ğŸ˜‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *fileName, *str;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> *byte = <span class="literal">NULL</span>;</span><br><span class="line">fileName = [task.response suggestedFilename];</span><br><span class="line">byte = [fileName cStringUsingEncoding:<span class="built_in">NSISOLatin1StringEncoding</span>];</span><br><span class="line">str = [[<span class="built_in">NSString</span> alloc] initWithCString:byte encoding:<span class="built_in">NSUTF8StringEncoding</span>]; </span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå¦‚æœæŒ‡å®šçš„ <code>NSStringEncoding</code> ä¸åŒ¹é…ï¼Œstr ä¼šæ˜¯ nilï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ nil æ¥æ’å¤§è¿äº†ï¼Œæœ‰æ¯›ç—…å—ï¼Ÿå¯èƒ½æœ‰ï¼Œå“ˆå“ˆ ğŸ˜‚ </p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo è¿ç§»è‡³äº‘æœåŠ¡çš„è®°å½•</title>
      <link href="/2021/06/30/%E4%BA%91%E6%9C%8D%E5%8A%A1%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
      <url>/2021/06/30/%E4%BA%91%E6%9C%8D%E5%8A%A1%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>è¿™ç¯‡æ–‡ç« ä¸æ˜¯ä¸“é—¨åˆ†äº«æœåŠ¡å™¨æ­å»ºã€CentOS ç³»ç»Ÿç­‰ç­‰ï¼Œåªæ˜¯è®°å½•ä¸€ä¸‹è¿ç§» Hexo çš„è¿‡ç¨‹~~~</p></blockquote><h3 id="æœåŠ¡å™¨"><a href="#æœåŠ¡å™¨" class="headerlink" title="æœåŠ¡å™¨"></a>æœåŠ¡å™¨</h3><blockquote><p>è…¾è®¯äº‘ CentOS 7.2 64ä½ ä¸ªäººäº‘æœåŠ¡å™¨ ç”¨äºæµ‹ç€ç©å„¿</p><p>æ ‡å‡†å‹SA2 | SA2.SMALL1 | åŒ—äº¬ | 1æ ¸| 1GB | 1Mbps</p></blockquote><h2 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h2><span id="more"></span><p>ç”¨åˆ°çš„æ–‡ä»¶å‘½ä»¤ï¼š</p><ol><li>åœ¨å½“å‰è·¯å¾„åˆ›å»ºä¸€çº§ç›®å½•</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="built_in">test</span> </span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨å½“å‰è·¯å¾„åˆ›å»ºå¤šçº§ç›®å½•</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p mytest/test1/test1_1 </span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨åˆ›å»ºç›®å½•çš„åŒæ—¶ç»™æ–°å»ºçš„ç›®å½•èµ‹æƒé™</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -m 777 testmod </span><br></pre></td></tr></table></figure><ol start="4"><li>ä¿®æ”¹ä¸€ä¸ªç›®å½•çš„æƒé™</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 700 -R <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p>PSï¼š<a href="https://www.haorooms.com/post/centeros_wj_zj">å‚è€ƒè‡ª</a></p><h2 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h2><ol><li><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx</span><br></pre></td></tr></table></figure><ol start="2"><li><h4 id="æµ‹è¯•-nginx-é…ç½®æ–‡ä»¶"><a href="#æµ‹è¯•-nginx-é…ç½®æ–‡ä»¶" class="headerlink" title="æµ‹è¯• nginx é…ç½®æ–‡ä»¶"></a>æµ‹è¯• nginx é…ç½®æ–‡ä»¶</h4></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nginx -t</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç»“æœokï¼Œä¼šæ‰“å°å¦‚ä¸‹</span></span><br><span class="line">nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successful</span><br></pre></td></tr></table></figure><ol start="3"><li><h4 id="é…ç½®ç›¸å…³"><a href="#é…ç½®ç›¸å…³" class="headerlink" title="é…ç½®ç›¸å…³"></a>é…ç½®ç›¸å…³</h4></li></ol><p>æŸ¥çœ‹<code>/etc/nginx/nginx.conf</code>æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># For more information on configuration, see:</span></span><br><span class="line"><span class="comment">#   * Official English Documentation: http://nginx.org/en/docs/</span></span><br><span class="line"><span class="comment">#   * Official Russian Documentation: http://nginx.org/ru/docs/</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">user</span> nginx;</span><br><span class="line"><span class="attribute">worker_processes</span> auto;</span><br><span class="line"><span class="attribute">error_log</span> /var/log/nginx/error.log;</span><br><span class="line"><span class="attribute">pid</span> /run/nginx.pid;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span></span><br><span class="line"><span class="attribute">include</span> /usr/share/nginx/modules/<span class="regexp">*.conf</span>;</span><br><span class="line"></span><br><span class="line"><span class="section">events</span> &#123;</span><br><span class="line">    <span class="attribute">worker_connections</span> <span class="number">1024</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    <span class="attribute">log_format</span>  main  <span class="string">&#x27;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;$status $body_bytes_sent &quot;$http_referer&quot; &#x27;</span></span><br><span class="line">                      <span class="string">&#x27;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">access_log</span>  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">sendfile</span>            <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">tcp_nopush</span>          <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">tcp_nodelay</span>         <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">keepalive_timeout</span>   <span class="number">65</span>;</span><br><span class="line">    <span class="attribute">types_hash_max_size</span> <span class="number">4096</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">include</span>             /etc/nginx/mime.types;</span><br><span class="line">    <span class="attribute">default_type</span>        application/octet-stream;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Load modular configuration files from the /etc/nginx/conf.d directory.</span></span><br><span class="line">    <span class="comment"># See http://nginx.org/en/docs/ngx_core_module.html#include</span></span><br><span class="line">    <span class="comment"># for more information.</span></span><br><span class="line">    <span class="attribute">include</span> /etc/nginx/conf.d/<span class="regexp">*.conf</span>;</span><br><span class="line"></span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">        <span class="attribute">listen</span>       [::]:<span class="number">80</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  _;</span><br><span class="line">        <span class="attribute">root</span>         /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Load configuration files for the default server block.</span></span><br><span class="line">        <span class="attribute">include</span> /etc/nginx/default.d/<span class="regexp">*.conf</span>;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">error_page</span> <span class="number">404</span> /<span class="number">404</span>.html;</span><br><span class="line">        <span class="attribute">location</span> = /<span class="number">404</span>.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">&quot;/etc/nginx/nginx.conf&quot; 84L, 2336<span class="attribute">C</span>                                                                                                                             <span class="number">1</span>,<span class="number">1</span>           Top</span><br></pre></td></tr></table></figure><ol start="4"><li><h4 id="å¯åŠ¨ã€åœæ­¢ã€æŸ¥çœ‹çŠ¶æ€ã€å¼€æœºè‡ªå¯åŠ¨"><a href="#å¯åŠ¨ã€åœæ­¢ã€æŸ¥çœ‹çŠ¶æ€ã€å¼€æœºè‡ªå¯åŠ¨" class="headerlink" title="å¯åŠ¨ã€åœæ­¢ã€æŸ¥çœ‹çŠ¶æ€ã€å¼€æœºè‡ªå¯åŠ¨"></a>å¯åŠ¨ã€åœæ­¢ã€æŸ¥çœ‹çŠ¶æ€ã€å¼€æœºè‡ªå¯åŠ¨</h4></li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx.service</span><br><span class="line">systemctl stop nginx.service</span><br><span class="line">systemctl reload nginx.service</span><br><span class="line">systemctl status nginx.service</span><br><span class="line">service nginx start</span><br><span class="line">systemctl <span class="built_in">enable</span> nginx</span><br></pre></td></tr></table></figure><p>â€‹    å¯åŠ¨ä»¥åç±»ä¼¼ä¸‹é¢çš„è¾“å‡º</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">â— nginx.service - The nginx HTTP and reverse proxy server</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/nginx.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Wed 2021-06-30 21:25:38 CST; 4s ago</span><br><span class="line">  Process: 2231 ExecStart=/usr/sbin/nginx (code=exited, status=0/SUCCESS)</span><br><span class="line">  Process: 2228 ExecStartPre=/usr/sbin/nginx -t (code=exited, status=0/SUCCESS)</span><br><span class="line">  Process: 2227 ExecStartPre=/usr/bin/rm -f /run/nginx.pid (code=exited, status=0/SUCCESS)</span><br><span class="line"> Main PID: 2233 (nginx)</span><br><span class="line">   CGroup: /system.slice/nginx.service</span><br><span class="line">           â”œâ”€2233 nginx: master process /usr/sbin/nginx</span><br><span class="line">           â””â”€2235 nginx: worker process</span><br><span class="line">           </span><br><span class="line">Jun 30 21:25:38 VM-0-13-centos systemd[1]: Starting The nginx HTTP and reverse proxy server...</span><br><span class="line">Jun 30 21:25:38 VM-0-13-centos nginx[2228]: nginx: the configuration file /etc/nginx/nginx.conf syntax is ok</span><br><span class="line">Jun 30 21:25:38 VM-0-13-centos nginx[2228]: nginx: configuration file /etc/nginx/nginx.conf <span class="built_in">test</span> is successful</span><br><span class="line">Jun 30 21:25:38 VM-0-13-centos systemd[1]: Started The nginx HTTP and reverse proxy server.</span><br></pre></td></tr></table></figure><h2 id="Hexo-ä¸ªäººåšå®¢éƒ¨ç½²åˆ°-CentOS-ä¸ªäººæœåŠ¡å™¨"><a href="#Hexo-ä¸ªäººåšå®¢éƒ¨ç½²åˆ°-CentOS-ä¸ªäººæœåŠ¡å™¨" class="headerlink" title="Hexo ä¸ªäººåšå®¢éƒ¨ç½²åˆ° CentOS ä¸ªäººæœåŠ¡å™¨"></a>Hexo ä¸ªäººåšå®¢éƒ¨ç½²åˆ° CentOS ä¸ªäººæœåŠ¡å™¨</h2><ol><li><h4 id="å®‰è£…-Git-Nginx"><a href="#å®‰è£…-Git-Nginx" class="headerlink" title="å®‰è£… Git Nginx"></a>å®‰è£… Git Nginx</h4></li></ol><p>å‡çº§ CentOS æ‰€æœ‰åŒ…ï¼ŒåŒ…æ‹¬ç³»ç»Ÿç‰ˆæœ¬å†…æ ¸å‡çº§</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y update</span><br><span class="line">yum install -y git nginx</span><br></pre></td></tr></table></figure><ol start="2"><li><h4 id="Nginx-é…ç½®"><a href="#Nginx-é…ç½®" class="headerlink" title="Nginx é…ç½®"></a>Nginx é…ç½®</h4></li></ol><ul><li>åˆ›å»ºæ–‡ä»¶ç›®å½•, ç”¨äºåšå®¢ç«™ç‚¹æ–‡ä»¶å­˜æ”¾, å¹¶æ›´æ”¹ç›®å½•è¯»å†™æƒé™</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /home/blog/www/hexo</span><br><span class="line">chmod -R 755 /home/blog/www/hexo</span><br></pre></td></tr></table></figure><ul><li>é…ç½® Nginx æœåŠ¡å™¨</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><p>é€šè¿‡ vim æŸ¥æ‰¾ <code>listen 80</code> æ‰¾åˆ°å¦‚ä¸‹ä»£ç , å¹¶ä¿®æ”¹</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">      <span class="attribute">listen</span>       <span class="number">80</span>; <span class="comment"># é»˜è®¤ç›‘å¬80ç«¯å£ï¼Œå…ˆä¸ç”¨ç®¡</span></span><br><span class="line">      <span class="attribute">listen</span>       [::]:<span class="number">80</span>;</span><br><span class="line">      <span class="attribute">server_name</span>  www.xxx.com; <span class="comment"># å¡«å†™ä¸ªäººåŸŸåï¼Œæœ‰çš„è¯å°±å†™ï¼Œæ²¡æœ‰ä¹Ÿå¯ä»¥ä¿æŒ _</span></span><br><span class="line">      <span class="attribute">root</span>         /home/blog/www/hexo; </span><br><span class="line">  &#125;</span><br><span class="line">......</span><br></pre></td></tr></table></figure><ul><li>æ·»åŠ æµ‹è¯•é¦–é¡µ</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /home/blog/www/hexo/index.html <span class="comment">#è·¯å¾„å°±æ˜¯è‡ªå·±æ–°å»ºçš„åšå®¢è·¯å¾„</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•é¡µçš„å†…å®¹å¯ä»¥ç®€å•ç±»ä¼¼è¿™æ ·ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Nginx Bazinga!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®æœåŠ¡çš„ ip æˆ–è€… åŸŸåï¼Œèƒ½çœ‹åˆ° <code>Nginx Bazinga!</code> å°±è¡¨ç¤º Nginx åŸºæœ¬æˆåŠŸäº†ã€‚</p><ol start="3"><li><h4 id="ä¸‹è½½-Nodejs"><a href="#ä¸‹è½½-Nodejs" class="headerlink" title="ä¸‹è½½ Nodejs"></a>ä¸‹è½½ Nodejs</h4></li></ol><p>Nodejs æˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ‡‚ï¼Œé€šè¿‡ yum å®‰è£…çš„å¹¶ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œç½‘ä¸Šæœ‰äº›èµ„æºè¯´æ˜¯è¦æŒ‡å®š æº ï¼Ÿ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install -y nodejs</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥æŸ¥çœ‹ç‰ˆæœ¬å·çš„è¯ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸäº†ã€‚</span></span><br><span class="line">node -v</span><br></pre></td></tr></table></figure><ol start="4"><li><h4 id="git"><a href="#git" class="headerlink" title="git"></a>git</h4></li></ol><ul><li><p>é¦–å…ˆè¦å®‰è£… Gitï¼Œå‰é¢æˆ‘ä»¬å·²ç»å®‰è£…è¿‡äº†~</p><p>æ–°å»ºä¸€ä¸ªå­˜æ”¾ hexo git å†…å®¹çš„ç›®å½•</p></li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /home/blog/git</span><br></pre></td></tr></table></figure><ul><li>åˆå§‹åŒ–ä¸º git ä»“åº“</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/blog/git</span><br><span class="line">git init --bare ATommyGirl.git</span><br></pre></td></tr></table></figure><ul><li>åˆ›å»º Git é’©å­ (hook), ç”¨äºæŒ‡å®š Git çš„æºä»£ç  å’Œ Git é…ç½®æ–‡ä»¶</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /home/blog/git/ATommyGirl.git/hooks/post-receive</span><br><span class="line"></span><br><span class="line"><span class="comment"># é’©å­å†…å®¹å¦‚ä¸‹</span></span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line">git --work-tree=/home/blog/www/hexo --git-dir=/home/blog/git/ATommyGirl.git checkout -f</span><br></pre></td></tr></table></figure><ul><li>ä¿å­˜å¹¶é€€å‡ºå, ç»™è¯¥æ–‡ä»¶æ·»åŠ å¯æ‰§è¡Œæƒé™</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /home/blog/git/ATommyGirl.git/hooks/post-receive</span><br></pre></td></tr></table></figure><ol start="5"><li><h4 id="æœ¬åœ°-hexo-é…ç½®"><a href="#æœ¬åœ°-hexo-é…ç½®" class="headerlink" title="æœ¬åœ° hexo é…ç½®"></a>æœ¬åœ° hexo é…ç½®</h4></li></ol><p>æœ¬åœ°å¦‚ä½•æ­å»º hexo ç½‘ä¸Šèµ„æ–™éå¸¸å¤šã€‚åŸºäºæˆ‘ä»¬ä¸Šé¢çš„æ“ä½œï¼Œåœ¨æœ¬åœ°åšå®¢æ–‡ä»¶å¤¹æ ¹ç›®å½•ä¸­çš„ <code>_config.yml</code>  é…ç½®æ–‡ä»¶å¢åŠ ä¸€ä¸ª <code>deploy</code> å°±å¯ä»¥äº†ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">root@your_server_ip:gitpath/git</span> <span class="comment">#ç”¨æˆ·å@åŸŸåæˆ–IP åœ°å€:è‡ªå·±çš„gitè·¯å¾„</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line">  <span class="attr">message:</span></span><br></pre></td></tr></table></figure><p>æˆ‘æœ‰å¤šä¸ªæäº¤çš„åœ°å€ï¼š</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/31.png"></p><p>PPS:<a href="https://www.jianshu.com/p/59eeb1493a45">å‚è€ƒè‡ª01</a> ã€<a href="https://segmentfault.com/a/1190000010680022">å‚è€ƒè‡ª02</a></p><h2 id="Nginx-éƒ¨ç½²-SSL-è¯ä¹¦"><a href="#Nginx-éƒ¨ç½²-SSL-è¯ä¹¦" class="headerlink" title="Nginx éƒ¨ç½² SSL è¯ä¹¦"></a>Nginx éƒ¨ç½² SSL è¯ä¹¦</h2><ol><li>è´­ä¹°ã€ç”³è¯· SSL è¯ä¹¦ï¼Œæˆ‘ç”¨çš„æ˜¯è…¾è®¯ä¸€å¹´å…è´¹çš„è¯ä¹¦ã€‚</li><li>ä¸åŒçš„æœåŠ¡å™¨éœ€è¦ä¸åŒæ ¼å¼çš„å…¬ç§é’¥æ–‡ä»¶ï¼Œè…¾è®¯äº‘è‡ªåŠ¨å¸®å¿™ç”Ÿæˆäº†ï¼Œæ ¹æ®éƒ¨ç½²ç±»å‹ä½¿ç”¨å¯¹åº”çš„æ–‡ä»¶ï¼Œæˆ‘çš„æ˜¯ Nginxï¼š</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ Apache</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ 1_root_bundle.crt</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ 2_tommygirl.cn.crt</span><br><span class="line">â”‚Â Â  â””â”€â”€ 3_tommygirl.cn.key</span><br><span class="line">â”œâ”€â”€ IIS</span><br><span class="line">â”‚Â Â  â””â”€â”€ tommygirl.cn.pfx</span><br><span class="line">â”œâ”€â”€ Nginx</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ 1_tommygirl.cn_bundle.crt</span><br><span class="line">â”‚Â Â  â””â”€â”€ 2_tommygirl.cn.key</span><br><span class="line">â”œâ”€â”€ Tomcat</span><br><span class="line">â”‚Â Â  â””â”€â”€ tommygirl.cn.jks</span><br><span class="line">â”œâ”€â”€ tommygirl.cn.csr</span><br><span class="line">â”œâ”€â”€ tommygirl.cn.key</span><br><span class="line">â””â”€â”€ tommygirl.cn.pem</span><br></pre></td></tr></table></figure><ol start="3"><li>æˆ‘åœ¨ <code>/etc/nginx/</code> æ–°å»ºäº†ä¸¤ä¸ªæ–‡ä»¶å¤¹ <code>servers</code> <code>certs</code> æ¥æ”¾é…ç½®ä¿¡æ¯å’Œè¯ä¹¦æ–‡ä»¶ï¼Œåªæ˜¯ä¸çŸ¥é“è¿™æ ·æ˜¯å¦ç¬¦åˆâ€å›½é™…æƒ¯ä¾‹â€ğŸ˜‚</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /etc/nginx/servers</span><br><span class="line">mkdir /etc/nginx/certs</span><br></pre></td></tr></table></figure><ol start="4"><li>ä»æœ¬åœ°æŠŠè¯ä¹¦æ‹·è´åˆ°äº‘æœåŠ¡å™¨ä¸Š</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp -P 22 1_tommygirl.cn_bundle.crt username@host:/etc/nginx/certs</span><br><span class="line">scp -P 22 2_tommygirl.cn.key username@host:/etc/nginx/certs</span><br></pre></td></tr></table></figure><ol start="5"><li>æ·»åŠ  ssl é…ç½®</li></ol><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vim</span> /etc/nginx/servers/tommygirl.cn <span class="comment">#æ–‡ä»¶åè‡ªå®šä¹‰</span></span><br></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">server_name</span>  tommygirl.cn;</span><br><span class="line">    <span class="attribute">ssl_certificate</span>  certs/1_tommygirl.cn_bundle.crt;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> certs/2_tommygirl.cn.key;</span><br><span class="line">    <span class="attribute">ssl_session_timeout</span> <span class="number">5m</span>;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line">    <span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line">    <span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">root</span> /home/blog/www/hexo;</span><br><span class="line">        <span class="attribute">index</span> index.html index.htm;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™åº”è¯¥å¯ä»¥é€šè¿‡ https æ¥è®¿é—®ç½‘ç«™äº†ã€‚</p><ol start="6"><li>http è‡ªåŠ¨è½¬æ¢ httpsï¼Œä¹Ÿæ˜¯ä¿®æ”¹  <code>Nginx</code>  çš„é…ç½®ï¼Œæ·»åŠ ä¸€ä¸ªé‡å®šå‘ï¼Œ<code>rewrite</code> è¿˜æœ‰å…¶ä»–çš„ä¸€äº›å‚æ•°â€¦â€¦</li></ol><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span>       [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  tommygirl.cn;</span><br><span class="line">    <span class="attribute">rewrite</span><span class="regexp"> ^(.*)$</span> https://tommygirl.cn;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 7788 </tag>
            
            <tag> Mac </tag>
            
            <tag> æœåŠ¡å™¨ </tag>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexoåšå®¢ç­‰é™æ€ç½‘é¡µæäº¤åˆ°è°·æ­Œå’Œç™¾åº¦æ”¶å½•</title>
      <link href="/2021/06/29/Hexo%E5%8D%9A%E5%AE%A2%E7%AD%89%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E6%8F%90%E4%BA%A4%E5%88%B0%E8%B0%B7%E6%AD%8C%E5%92%8C%E7%99%BE%E5%BA%A6%E6%94%B6%E5%BD%95/"/>
      <url>/2021/06/29/Hexo%E5%8D%9A%E5%AE%A2%E7%AD%89%E9%9D%99%E6%80%81%E7%BD%91%E9%A1%B5%E6%8F%90%E4%BA%A4%E5%88%B0%E8%B0%B7%E6%AD%8C%E5%92%8C%E7%99%BE%E5%BA%A6%E6%94%B6%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä»€ä¹ˆæ˜¯-ç«™ç‚¹åœ°å›¾-ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯-ç«™ç‚¹åœ°å›¾-ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ ç«™ç‚¹åœ°å›¾ ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ ç«™ç‚¹åœ°å›¾ ï¼Ÿ</h2><blockquote><p> ç«™ç‚¹åœ°å›¾æ˜¯ä¸€ä¸ªç½‘ç«™æ‰€æœ‰é“¾æ¥çš„å®¹å™¨ã€‚å¾ˆå¤šç½‘ç«™çš„è¿æ¥å±‚æ¬¡æ¯”è¾ƒæ·±ï¼Œçˆ¬è™«å¾ˆéš¾æŠ“å–åˆ°ï¼Œç«™ç‚¹åœ°å›¾å¯ä»¥æ–¹ä¾¿çˆ¬è™«æŠ“å–ç½‘ç«™é¡µé¢ï¼Œé€šè¿‡æŠ“å–ç½‘ç«™é¡µé¢ï¼Œæ¸…æ™°äº†è§£ç½‘ç«™çš„æ¶æ„ï¼Œç½‘ç«™åœ°å›¾ä¸€èˆ¬å­˜æ”¾åœ¨æ ¹ç›®å½•ä¸‹å¹¶å‘½å sitemapï¼Œä¸ºçˆ¬è™«æŒ‡è·¯ï¼Œå¢åŠ ç½‘ç«™é‡è¦å†…å®¹é¡µé¢çš„æ”¶å½•ã€‚ç«™ç‚¹åœ°å›¾å°±æ˜¯æ ¹æ®ç½‘ç«™çš„ç»“æ„ã€æ¡†æ¶ã€å†…å®¹ï¼Œç”Ÿæˆçš„å¯¼èˆªç½‘é¡µæ–‡ä»¶ã€‚ç«™ç‚¹åœ°å›¾å¯¹äºæé«˜ç”¨æˆ·ä½“éªŒæœ‰å¥½å¤„ï¼Œå®ƒä»¬ä¸ºç½‘ç«™è®¿é—®è€…æŒ‡æ˜æ–¹å‘ï¼Œå¹¶å¸®åŠ©è¿·å¤±çš„è®¿é—®è€…æ‰¾åˆ°ä»–ä»¬æƒ³çœ‹çš„é¡µé¢ã€‚</p><p>â€“ç™¾åº¦ç™¾ç§‘</p></blockquote><h2 id="ä¸€ã€ç”Ÿæˆç«™ç‚¹åœ°å›¾"><a href="#ä¸€ã€ç”Ÿæˆç«™ç‚¹åœ°å›¾" class="headerlink" title="ä¸€ã€ç”Ÿæˆç«™ç‚¹åœ°å›¾"></a>ä¸€ã€ç”Ÿæˆç«™ç‚¹åœ°å›¾</h2><span id="more"></span><ol><li><p>å®‰è£…ç«™ç‚¹åœ°å›¾ç”Ÿæˆæ’ä»¶</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo<span class="literal">-generator</span><span class="literal">-baidu</span><span class="literal">-sitemap</span> -<span class="literal">-save</span></span><br><span class="line">npm install hexo<span class="literal">-generator</span><span class="literal">-sitemap</span> -<span class="literal">-save</span></span><br></pre></td></tr></table></figure><!--more--></li><li><p>åœ¨åšå®¢æ ¹ç›®å½•çš„<code>_config.yml</code>ä¸­æ·»åŠ è‡ªåŠ¨ç”Ÿæˆ sitemap çš„é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">sitemap.xml</span></span><br><span class="line"><span class="attr">baidusitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">baidusitemap.xml</span></span><br></pre></td></tr></table></figure><p>åŒæ—¶ç¡®è®¤ä¸€ä¸‹è¯¥æ–‡ä»¶é‡Œé¢ url å¯¹åº”çš„æ˜¯å¦æ˜¯æ¥ä¸‹æ¥è¦æäº¤çš„åŸŸå</p></li><li><p>ç”Ÿæˆå’Œéƒ¨ç½²</p><p>æ­¤æ—¶ä¼šåœ¨<code>public</code>ç›®å½•ä¸‹ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶</p><blockquote><p><code>sitemap.xml</code> ç”¨äºæäº¤ç»™è°·æ­Œ</p><p><code>baidusitemap.xml</code> ç”¨äºæäº¤ç»™ç™¾åº¦</p></blockquote></li><li><p>éƒ¨ç½²æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€ <code>ä½ çš„åŸŸå/baidusitemap.xml</code>ï¼ŒæˆåŠŸå±•ç¤ºå³ä»£è¡¨æˆåŠŸ</p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200413210038.png" alt="img"></p></li></ol><h2 id="äºŒã€æäº¤åˆ°ç™¾åº¦ç«™é•¿ï¼ˆç™¾åº¦æ”¶å½•ï¼‰"><a href="#äºŒã€æäº¤åˆ°ç™¾åº¦ç«™é•¿ï¼ˆç™¾åº¦æ”¶å½•ï¼‰" class="headerlink" title="äºŒã€æäº¤åˆ°ç™¾åº¦ç«™é•¿ï¼ˆç™¾åº¦æ”¶å½•ï¼‰"></a>äºŒã€æäº¤åˆ°ç™¾åº¦ç«™é•¿ï¼ˆç™¾åº¦æ”¶å½•ï¼‰</h2><h4 id="è§£å†³ç™¾åº¦ä¸çˆ¬å–-Github-Pages-çš„é—®é¢˜"><a href="#è§£å†³ç™¾åº¦ä¸çˆ¬å–-Github-Pages-çš„é—®é¢˜" class="headerlink" title="è§£å†³ç™¾åº¦ä¸çˆ¬å– Github Pages çš„é—®é¢˜"></a>è§£å†³ç™¾åº¦ä¸çˆ¬å– Github Pages çš„é—®é¢˜</h4><p>å¦‚æœä½ çš„åšå®¢éƒ¨ç½²åœ¨ Github Pages, ç™¾åº¦æ˜¯ä¸ä¼šçˆ¬å–çš„ï¼Œè¿™ç§æƒ…å†µéœ€è¦å€Ÿç”¨å…¶ä»–å¹³å°è½¬æ¢ä¸€ä¸‹ã€‚</p><p>è¿™é‡Œä»¥ coding ä¸ºä¾‹</p><ol><li><p>åœ¨ coding ä¸­ä¹Ÿåˆ›å»ºä¸€ä¸ªåšå®¢é¡¹ç›®ï¼Œå–å¾—æäº¤åœ°å€</p></li><li><p>åœ¨åšå®¢æ ¹ç›®å½•çš„<code>_config.yml</code>ä¸­æ·»åŠ  coding ä»“åº“çš„é…ç½®ï¼Œæ³¨æ„å¢åŠ äº†<code>-</code>å·ï¼Œè¿™æ ·åœ¨éƒ¨ç½²çš„æ—¶å€™ä¼šåŒæ—¶éƒ¨ç½²åˆ° Github å’Œ coding</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">https://github.com/hansionit/hansionit.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">https://e.coding.net/hansion_it/Blog.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure></li><li><p><code>hexo g -d</code>ç”Ÿæˆéƒ¨ç½²ä¸€ä¸‹ï¼Œä¼šæäº¤ä»£ç åˆ° coding</p></li><li><p>åœ¨ coding ä¸­å¼€å¯ pages æœåŠ¡ï¼Œé…ç½®è‡ªå®šä¹‰åŸŸåï¼Œåœ¨ä½ çš„åŸŸåè§£ææ§åˆ¶å°å¢åŠ ä¸¤æ¡ CNAMEï¼Œè§£æçº¿è·¯é€‰æ‹©<code>ç™¾åº¦</code>ï¼Œè®©ç™¾åº¦è§£æåˆ° coding çš„åœ°å€</p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200414122236.png" alt="img"></p></li></ol><h4 id="sitemap-æ–¹å¼æäº¤"><a href="#sitemap-æ–¹å¼æäº¤" class="headerlink" title="sitemap æ–¹å¼æäº¤"></a>sitemap æ–¹å¼æäº¤</h4><ol><li><p>æŸ¥è¯¢æ˜¯å¦è¢«æ”¶å½•</p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200413204214.png" alt="img"></p></li><li><p>è‹¥æ²¡æœ‰æ”¶å½•ï¼Œåˆ™ç‚¹å‡»<code>æäº¤ç½‘å€</code>è¿›è¡Œæäº¤</p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200414122915.png" alt="img"></p><p>ç„¶åæ‰“å¼€ <a href="https://ziyuan.baidu.com/">ç™¾åº¦æœç´¢èµ„æºå¹³å°</a>ï¼Œè¿›å…¥<code>ç«™ç‚¹ç®¡ç†</code> -&gt; <code>æ·»åŠ ç½‘ç«™</code>    </p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200413202939.png" alt="img"></p></li><li><p>æ·»åŠ å®Œç½‘ç«™åï¼Œç‚¹å‡»<code>ç®¡ç†ç«™ç‚¹</code> -&gt; <code>ç«™ç‚¹å±æ€§è®¾ç½®</code></p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200413210128.png" alt="img"></p></li><li><p>é€‰æ‹©é“¾æ¥æäº¤</p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200413210323.png" alt="img"></p></li><li><p>é€‰æ‹© sitemapï¼Œè¾“å…¥ä¸Šæ–‡ä¸­çš„ sitmap åœ°å€ï¼Œç‚¹å‡»æäº¤</p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200413210527.png" alt="img">    å¦‚æœæç¤ºé”™è¯¯ï¼Œ<strong>ä»¥ä¸‹æ–‡ä»¶å·²ç»æäº¤è¿‡äº†ï¼Œå¦‚æƒ³é‡æ–°æäº¤ï¼Œè¯·å…ˆåˆ°æ–‡ä»¶å¯¹åº”å·¥å…·çš„ç«™ç‚¹ä¸‹åˆ é™¤æ­¤æ–‡ä»¶ã€‚</strong></p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200413211123.png" alt="img"></p><p>å¯åœ¨ä¸‹æ–¹è¿›è¡Œå‹¾é€‰åˆ é™¤åé‡æ–°æäº¤ï¼Œå¦‚æœé“¾æ¥ä¸€æ¨¡ä¸€æ ·ï¼Œæ²¡æœ‰å¿…è¦åˆ é™¤ï¼Œç‚¹å‡»åˆ é™¤æŒ‰é’®å·¦è¾¹çš„æ‰‹åŠ¨æ›´æ–°æ–‡ä»¶æ›´æ–°ä¸€ä¸‹å³å¯</p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200413211221.png" alt="img"></p></li></ol><h4 id="ä¸»åŠ¨æ¨é€æ–¹å¼æäº¤"><a href="#ä¸»åŠ¨æ¨é€æ–¹å¼æäº¤" class="headerlink" title="ä¸»åŠ¨æ¨é€æ–¹å¼æäº¤"></a>ä¸»åŠ¨æ¨é€æ–¹å¼æäº¤</h4><ol><li><p>å®‰è£…æ’ä»¶<code>npm install hexo-baidu-url-submit --save</code></p></li><li><p>åœ¨åšå®¢æ ¹ç›®å½•çš„<code>config.yml</code>ä¸­æ·»åŠ </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_url_submit:</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">100</span>                 <span class="comment"># æäº¤æœ€æ–°çš„å¤šå°‘ä¸ªé“¾æ¥</span></span><br><span class="line">  <span class="attr">host:</span>       <span class="comment"># åœ¨ç™¾åº¦ç«™é•¿å¹³å°ä¸­æ·»åŠ çš„åŸŸå</span></span><br><span class="line">  <span class="attr">token:</span>     <span class="comment"># ç§˜é’¥</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">baidu_urls.txt</span></span><br></pre></td></tr></table></figure><p>token åœ¨æ¨é€çš„æ¥å£ä¸­æœ‰</p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200413212519.png" alt="img"></p></li><li><p>åŒæ ·æ˜¯è¯¥æ–‡ä»¶ï¼Œåœ¨<code>deployer</code>ä¸­æ–°åŠ ä¸€è¡Œ<code>type: baidu_url_submitter</code>, æ³¨æ„éœ€è¦ä¸ºä¸¤ä¸ª<code>type</code>å‰é¢æ·»åŠ <code>-</code>ç¬¦å·ï¼Œç»“æœå¦‚ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">https://e.coding.net/hansion_it/Blog.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">type:</span> <span class="string">baidu_url_submitter</span></span><br></pre></td></tr></table></figure></li><li><p>ç”Ÿæˆéƒ¨ç½²</p></li></ol><p>è‹¥æœ€åæœ‰è¾“å‡º<code>&#123;&quot;remain&quot;:2997,&quot;success&quot;:3&#125; INFO Deploy done: baidu_url_submitter</code>, åˆ™ä»£è¡¨æˆåŠŸ, success çš„å€¼ä»£è¡¨æˆåŠŸå¤šå°‘æ¡ï¼Œremain çš„å€¼ä»£è¡¨å½“å¤©å‰©ä½™å¯æ¨é€æ¡æ•°</p><h4 id="è‡ªåŠ¨æ¨é€æ–¹å¼æäº¤"><a href="#è‡ªåŠ¨æ¨é€æ–¹å¼æäº¤" class="headerlink" title="è‡ªåŠ¨æ¨é€æ–¹å¼æäº¤"></a>è‡ªåŠ¨æ¨é€æ–¹å¼æäº¤</h4><p>Hexo çš„æœ‰äº›ä¸»é¢˜å·²å®Œæˆäº†æ­¤æ­¥éª¤ï¼Œå¯å…ˆè‡ªè¡Œç¡®è®¤æ˜¯å¦å·²ç»å®Œæˆï¼Œä¸€èˆ¬å®Œæˆæ­¤æ­¥éª¤çš„ä¸»é¢˜çš„<code>_config.yml</code>æ–‡ä»¶ä¸­ä¼šæœ‰<code>baidu_push</code>å±æ€§ï¼Œå°†å…¶è®¾ç½®ä¸º<code>true</code></p><p>é€‰æ‹©<code>è‡ªåŠ¨æ¨é€</code> -&gt; <code>å¤åˆ¶ä»£ç </code></p><p>æ²¡æœ‰é›†æˆè¿™é¡¹åŠŸèƒ½çš„ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»£ç ç²˜è´´åˆ° <code>header.ejs</code> æ–‡ä»¶çš„ <code>&lt;head&gt;</code> ä¸ <code>&lt;/head&gt;</code> æ ‡ç­¾ä¹‹é—´</p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200413211705.png" alt="img"></p><h2 id="ä¸‰ã€æäº¤åˆ°è°·æ­Œæœç´¢ï¼ˆè°·æ­Œæ”¶å½•ï¼‰"><a href="#ä¸‰ã€æäº¤åˆ°è°·æ­Œæœç´¢ï¼ˆè°·æ­Œæ”¶å½•ï¼‰" class="headerlink" title="ä¸‰ã€æäº¤åˆ°è°·æ­Œæœç´¢ï¼ˆè°·æ­Œæ”¶å½•ï¼‰"></a>ä¸‰ã€æäº¤åˆ°è°·æ­Œæœç´¢ï¼ˆè°·æ­Œæ”¶å½•ï¼‰</h2><ol><li><p>è¿›å…¥ <a href="https://www.google.com/webmasters/tools/home?hl=zh-CN">Google Search Console</a> ç™»å½•ä½ çš„è°·æ­Œè´¦å·</p></li><li><p>åœ¨<code>ç½‘å€å‰ç¼€</code>ä¸­å¡«å†™åœ°å€</p></li><li><p>ä¸‹è½½éªŒè¯æ–‡ä»¶</p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200414124339.png" alt="img"></p></li><li><p>å­˜å…¥<strong>ä¸»é¢˜</strong>çš„<code>source</code>ç›®å½•ï¼Œè€Œä¸æ˜¯æ ¹ç›®å½•çš„ source ç›®å½•ï¼Œ<code>hexo g -d</code>ç”Ÿæˆéƒ¨ç½²ï¼Œç„¶åç‚¹å‡»<code>éªŒè¯</code>ï¼ŒéªŒè¯æˆåŠŸå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è‹¥æç¤º<code>æ‚¨çš„éªŒè¯æ–‡ä»¶ä¸­çš„å†…å®¹ä¸æ­£ç¡®ã€‚æ‚¨ä½¿ç”¨çš„éªŒè¯æ–‡ä»¶æ˜¯ä»è¿™é‡Œä¸‹è½½çš„å—?</code>, ä½ éœ€è¦æ£€æŸ¥ä¸€ä¸‹ç›®å½•æ˜¯å¦æ”¾è‡³æ­£ç¡®</p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200414132047.png" alt="img"></p></li><li><p>ç‚¹å‡»<code>å‰å¾€èµ„æºé¡µé¢</code>ï¼Œç‚¹å‡»<code>ç«™ç‚¹åœ°å›¾</code>, è¾“å…¥ç«™ç‚¹åœ°å›¾çš„åœ°å€ï¼Œç‚¹å‡»<code>æäº¤</code></p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200414132514.png" alt="img"></p></li><li><p>æäº¤æˆåŠŸåï¼Œè‹¥æ˜¾ç¤º<code>æ— æ³•è·å–</code>ï¼Œç‚¹å‡»<code>æ— æ³•è·å–</code>ä¼šè¿›è¡Œç½‘é¡µè·å–ï¼Œå†åˆ·æ–°ç½‘é¡µå³å¯æ˜¾ç¤ºæˆåŠŸ</p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200414132654.png" alt="img"></p></li><li><p>å¯ä»¥é¡ºä¾¿æŠŠç™¾åº¦çš„ sitemap ä¹Ÿæäº¤ä¸Š<code>baidusitemap.xml</code>, æˆåŠŸç»“æœå¦‚ä¸‹ï¼š</p><p><img src="https://my-online-pics.oss-cn-beijing.aliyuncs.com/img/20200414132951.png" alt="img"></p></li></ol><p>PS: <a href="https://www.hansion.win/2020/04/13/hexo-bo-ke-deng-jing-tai-wang-ye-ti-jiao-bai-du-he-google-gu-ge-shou-lu/#toc-heading-8">è½¬è½½è‡ªHansion</a>ï¼ŒæŒ‰ç…§åšä¸»çš„è¯´æ˜ï¼ŒåŸºæœ¬ä¸Šç®—æ˜¯å®Œæˆäº†ï¼Œå¯ä»¥æˆåŠŸæœåˆ°ä¸€éƒ¨åˆ†å†…å®¹ï¼Œæœ‰äº›æœåˆ°çš„æ ‡é¢˜å¾ˆè¯¡å¼‚ï¼Œè¿˜åœ¨çœ‹~~</p>]]></content>
      
      
      
        <tags>
            
            <tag> 7788 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GiTalk 404</title>
      <link href="/2021/06/22/GiTalk-404/"/>
      <url>/2021/06/22/GiTalk-404/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://github.com/gitalk/gitalk">GiTalk</a> æ˜¯ä¸€ä¸ªåŸºäº GitHub Issue å’Œ Preact å¼€å‘çš„è¯„è®ºæ’ä»¶ã€‚</p><p>è¿™ç¯‡æ–‡ç« æ˜¯è¦è®²è§£æ€ä¹ˆé…ç½® GiTalk å—ï¼ŸğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚NO~ç½‘ä¸Šæœ‰å¾ˆå¤šæ–‡ç« ï¼Œä¾‹å¦‚è¿™ä¸€ä¸ª <a href="https://cjjkkk.github.io/gitalk/">ä¾‹å¦‚</a>ã€‚</p><p>åªæ˜¯æƒ³è®°å½•ä¸€ä¸‹ï¼Œåœ¨ä¿®æ”¹äº†GitHub ç”¨æˆ·åä»¥åï¼Œä½¿ç”¨ GiTalk è¿›è¡Œè¯„è®ºï¼Œå´æ˜¾ç¤º 404 çš„é—®é¢˜ï¼Œå› ä¸ºæˆ‘è‡ªå·±æ€»æ˜¯å¿˜è®°äº†åœ¨å“ªé‡Œä¿®æ”¹é…ç½®â€¦â€¦ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚</p><span id="more"></span><p>å°±æ˜¯å…ˆè¿™æ ·ï¼Œå†è¿™æ ·ï¼Œæœ€åé‚£æ ·å°±å¥½äº†â€¦â€¦ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ï¼Œåˆæ˜¯è ¢å“­çš„ä¸€å¤©ã€‚</p><center>    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/15.png" class width="300"></div>    <div style="display:inline-block;margin-left:10px;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/16.png" class width="240"></div></center><div contenteditable="plaintext-only"><div contenteditable="plaintext-only"><center>  <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/17.png" class width="500"></div></center></div></div>]]></content>
      
      
      
        <tags>
            
            <tag> 7788 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WKWebView éšè—ç³»ç»Ÿé”®ç›˜çš„ inputAccessoryView</title>
      <link href="/2021/06/22/WKWebView-Keyboard-0/"/>
      <url>/2021/06/22/WKWebView-Keyboard-0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨å­¦ä¹  <code>WKWebView</code> ä¸­é”®ç›˜çš„å¼¹å‡ºã€éšè—æ—¶ï¼Œç¢°å·§çœ‹åˆ°äº†ç½‘å‹çš„ä¸€ä¸ªéœ€æ±‚æ˜¯ éšè— <code>inputAccessoryView</code>ï¼Œè™½ç„¶æˆ‘å¹¶ä¸éœ€è¦è¿™ä¹ˆé«˜ç«¯çš„æ“ä½œï¼Œä¹Ÿä¸æ‡‚å‰ç«¯çš„é—®é¢˜ï¼Œä½†æ€è·¯ç¢°å·§å¸®æˆ‘è§£å†³äº†å¦ä¸€ä¸ªé—®é¢˜ã€‚ğŸ¤“</p><span id="more"></span><h4 id="1-å£°æ˜ä¸€ä¸ªç±»-ç”¨äºç½®ç©º-inputAccessoryView"><a href="#1-å£°æ˜ä¸€ä¸ªç±»-ç”¨äºç½®ç©º-inputAccessoryView" class="headerlink" title="1. å£°æ˜ä¸€ä¸ªç±» ç”¨äºç½®ç©º inputAccessoryView"></a>1. å£°æ˜ä¸€ä¸ªç±» ç”¨äºç½®ç©º <code>inputAccessoryView</code></h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">_NoInputAccessoryView</span> : <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">_NoInputAccessoryView</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>)inputAccessoryView &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><h4 id="2-å®ç°å¦‚ä¸‹æ–¹æ³•ï¼Œä¾‹å¦‚åœ¨-WKWebView-çš„æ§åˆ¶å™¨ä¸­"><a href="#2-å®ç°å¦‚ä¸‹æ–¹æ³•ï¼Œä¾‹å¦‚åœ¨-WKWebView-çš„æ§åˆ¶å™¨ä¸­" class="headerlink" title="2.å®ç°å¦‚ä¸‹æ–¹æ³•ï¼Œä¾‹å¦‚åœ¨ WKWebView çš„æ§åˆ¶å™¨ä¸­"></a>2.å®ç°å¦‚ä¸‹æ–¹æ³•ï¼Œä¾‹å¦‚åœ¨ WKWebView çš„æ§åˆ¶å™¨ä¸­</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)removeInputAccessoryViewFromWKWebView:(<span class="built_in">WKWebView</span> *)webView &#123;</span><br><span class="line">    <span class="built_in">UIView</span> *targetView;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">UIView</span> *view <span class="keyword">in</span> webView.scrollView.subviews) &#123;</span><br><span class="line">        <span class="keyword">if</span>([[view.class description] hasPrefix:<span class="string">@&quot;WKContent&quot;</span>]) &#123;</span><br><span class="line">            targetView = view;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!targetView) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSString</span> *noInputAccessoryViewClassName = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@&quot;%@_NoInputAccessoryView&quot;</span>, targetView.class.superclass];</span><br><span class="line">    Class newClass = <span class="built_in">NSClassFromString</span>(noInputAccessoryViewClassName);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(newClass == <span class="literal">nil</span>) &#123;</span><br><span class="line">        newClass = objc_allocateClassPair(targetView.class, [noInputAccessoryViewClassName cStringUsingEncoding:<span class="built_in">NSASCIIStringEncoding</span>], <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">if</span>(!newClass) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Method method = class_getInstanceMethod([_NoInputAccessoryView <span class="keyword">class</span>], <span class="keyword">@selector</span>(inputAccessoryView));</span><br><span class="line"></span><br><span class="line">        class_addMethod(newClass, <span class="keyword">@selector</span>(inputAccessoryView), method_getImplementation(method), method_getTypeEncoding(method));</span><br><span class="line"></span><br><span class="line">        objc_registerClassPair(newClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    object_setClass(targetView, newClass);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-è°ƒç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œä¼ å…¥å¯¹åº”çš„-WebView"><a href="#3-è°ƒç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œä¼ å…¥å¯¹åº”çš„-WebView" class="headerlink" title="3.è°ƒç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œä¼ å…¥å¯¹åº”çš„ WebView"></a>3.è°ƒç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œä¼ å…¥å¯¹åº”çš„ WebView</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">self</span> removeInputAccessoryViewFromWKWebView:webView];</span><br></pre></td></tr></table></figure><p>PSï¼šè¿™æ ·çš„ç¡®å¯ä»¥éšè— <code>inputAccessoryView</code>ï¼Œä½†æ˜¯é”®ç›˜çš„å…³é—­å°±éœ€è¦å†å•ç‹¬å¤„ç†ä¸€ä¸‹äº†ã€‚ğŸ˜‚ğŸ¤“ğŸ¤—</p><p>PPS: <a href="https://stackoverflow.com/questions/32546394/hiding-keyboard-accessorybar-in-wkwebview">åŸæ–‡é“¾æ¥</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> WebView </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>AudioServicesPlaySystemSound æ’­æ”¾ç³»ç»Ÿæç¤ºéŸ³</title>
      <link href="/2021/06/18/AudioServicesPlaySystemSound/"/>
      <url>/2021/06/18/AudioServicesPlaySystemSound/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ç³»ç»Ÿæç¤ºéŸ³ SystemSoundID ã€‚</p><span id="more"></span><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br></pre></td><td class="code"><pre><span class="line">AudioServices is a group of C functions in AudioToolbox for playing short (â‰¤30 seconds) sounds.</span><br><span class="line"></span><br><span class="line">Predefined sounds</span><br><span class="line"></span><br><span class="line">There are some predefined system sounds, for the system sound ID in the range 1000 to 2000 (decimal), as shown below (from 2.0 to 5.0 beta). The system sounds are all stored in /System/Library/Audio/UISounds/.</span><br><span class="line"></span><br><span class="line">Sound IDÂ  Â  Â  Â  File name (iPhone)Â  Â  Â  Â  File name (iPod Touch)Â  Â  Â  Â  CategoryÂ  Â  Â  Â  Note</span><br><span class="line"></span><br><span class="line">1000Â  Â  new-mail.cafÂ  Â  new-mail.cafÂ  Â  MailReceived</span><br><span class="line"></span><br><span class="line">1001Â  Â  mail-sent.cafÂ  Â  mail-sent.cafÂ  Â  MailSent</span><br><span class="line"></span><br><span class="line">1002Â  Â  Voicemail.cafÂ  Â  Voicemail.cafÂ  Â  VoicemailReceived</span><br><span class="line"></span><br><span class="line">1003Â  Â  ReceivedMessage.cafÂ  Â  ReceivedMessage.cafÂ  Â  SMSReceived</span><br><span class="line"></span><br><span class="line">1004Â  Â  SentMessage.cafÂ  Â  SentMessage.cafÂ  Â  SMSSent</span><br><span class="line"></span><br><span class="line">1005Â  Â  alarm.cafÂ  Â  sq_alarm.cafÂ  Â  CalendarAlert</span><br><span class="line"></span><br><span class="line">1006Â  Â  low_power.cafÂ  Â  low_power.cafÂ  Â  LowPower</span><br><span class="line"></span><br><span class="line">1007Â  Â  sms-received1.cafÂ  Â  sms-received1.cafÂ  Â  SMSReceived_Alert</span><br><span class="line"></span><br><span class="line">1008Â  Â  sms-received2.cafÂ  Â  sms-received2.cafÂ  Â  SMSReceived_Alert</span><br><span class="line"></span><br><span class="line">1009Â  Â  sms-received3.cafÂ  Â  sms-received3.cafÂ  Â  SMSReceived_Alert</span><br><span class="line"></span><br><span class="line">1010Â  Â  sms-received4.cafÂ  Â  sms-received4.cafÂ  Â  SMSReceived_Alert</span><br><span class="line"></span><br><span class="line">1011Â  Â  -Â  Â  -Â  Â  SMSReceived_Vibrate</span><br><span class="line"></span><br><span class="line">1012Â  Â  sms-received1.cafÂ  Â  sms-received1.cafÂ  Â  SMSReceived_Alert</span><br><span class="line"></span><br><span class="line">1013Â  Â  sms-received5.cafÂ  Â  sms-received5.cafÂ  Â  SMSReceived_Alert</span><br><span class="line"></span><br><span class="line">1014Â  Â  sms-received6.cafÂ  Â  sms-received6.cafÂ  Â  SMSReceived_Alert</span><br><span class="line"></span><br><span class="line">1015Â  Â  Voicemail.cafÂ  Â  Voicemail.cafÂ  Â  -Â  Â  Available since 2.1</span><br><span class="line"></span><br><span class="line">1016Â  Â  tweet_sent.cafÂ  Â  tweet_sent.cafÂ  Â  SMSSentÂ  Â  Available since 5.0</span><br><span class="line"></span><br><span class="line">1020Â  Â  Anticipate.cafÂ  Â  Anticipate.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1021Â  Â  Bloom.cafÂ  Â  Bloom.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1022Â  Â  Calypso.cafÂ  Â  Calypso.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1023Â  Â  Choo_Choo.cafÂ  Â  Choo_Choo.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1024Â  Â  Descent.cafÂ  Â  Descent.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1025Â  Â  Fanfare.cafÂ  Â  Fanfare.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1026Â  Â  Ladder.cafÂ  Â  Ladder.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1027Â  Â  Minuet.cafÂ  Â  Minuet.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1028Â  Â  News_Flash.cafÂ  Â  News_Flash.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1029Â  Â  Noir.cafÂ  Â  Noir.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1030Â  Â  Sherwood_Forest.cafÂ  Â  Sherwood_Forest.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1031Â  Â  Spell.cafÂ  Â  Spell.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1032Â  Â  Suspense.cafÂ  Â  Suspense.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1033Â  Â  Telegraph.cafÂ  Â  Telegraph.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1034Â  Â  Tiptoes.cafÂ  Â  Tiptoes.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1035Â  Â  Typewriters.cafÂ  Â  Typewriters.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1036Â  Â  Update.cafÂ  Â  Update.cafÂ  Â  SMSReceived_AlertÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1050Â  Â  ussd.cafÂ  Â  ussd.cafÂ  Â  USSDAlert</span><br><span class="line"></span><br><span class="line">1051Â  Â  SIMToolkitCallDropped.cafÂ  Â  SIMToolkitCallDropped.cafÂ  Â  SIMToolkitTone</span><br><span class="line"></span><br><span class="line">1052Â  Â  SIMToolkitGeneralBeep.cafÂ  Â  SIMToolkitGeneralBeep.cafÂ  Â  SIMToolkitTone</span><br><span class="line"></span><br><span class="line">1053Â  Â  SIMToolkitNegativeACK.cafÂ  Â  SIMToolkitNegativeACK.cafÂ  Â  SIMToolkitTone</span><br><span class="line"></span><br><span class="line">1054Â  Â  SIMToolkitPositiveACK.cafÂ  Â  SIMToolkitPositiveACK.cafÂ  Â  SIMToolkitTone</span><br><span class="line"></span><br><span class="line">1055Â  Â  SIMToolkitSMS.cafÂ  Â  SIMToolkitSMS.cafÂ  Â  SIMToolkitTone</span><br><span class="line"></span><br><span class="line">1057Â  Â  Tink.cafÂ  Â  Tink.cafÂ  Â  PINKeyPressed</span><br><span class="line"></span><br><span class="line">1070Â  Â  ct-busy.cafÂ  Â  ct-busy.cafÂ  Â  AudioToneBusyÂ  Â  There was no category for this sound before 4.0.</span><br><span class="line"></span><br><span class="line">1071Â  Â  ct-congestion.cafÂ  Â  ct-congestion.cafÂ  Â  AudioToneCongestionÂ  Â  There was no category for this sound before 4.0.</span><br><span class="line"></span><br><span class="line">1072Â  Â  ct-path-ack.cafÂ  Â  ct-path-ack.cafÂ  Â  AudioTonePathAcknowledgeÂ  Â  There was no category for this sound before 4.0.</span><br><span class="line"></span><br><span class="line">1073Â  Â  ct-error.cafÂ  Â  ct-error.cafÂ  Â  AudioToneErrorÂ  Â  There was no category for this sound before 4.0.</span><br><span class="line"></span><br><span class="line">1074Â  Â  ct-call-waiting.cafÂ  Â  ct-call-waiting.cafÂ  Â  AudioToneCallWaitingÂ  Â  There was no category for this sound before 4.0.</span><br><span class="line"></span><br><span class="line">1075Â  Â  ct-keytone2.cafÂ  Â  ct-keytone2.cafÂ  Â  AudioToneKey2Â  Â  There was no category for this sound before 4.0.</span><br><span class="line"></span><br><span class="line">1100Â  Â  lock.cafÂ  Â  sq_lock.cafÂ  Â  ScreenLocked</span><br><span class="line"></span><br><span class="line">1101Â  Â  unlock.cafÂ  Â  sq_lock.cafÂ  Â  ScreenUnlocked</span><br><span class="line"></span><br><span class="line">1102Â  Â  -Â  Â  -Â  Â  FailedUnlock</span><br><span class="line"></span><br><span class="line">1103Â  Â  Tink.cafÂ  Â  sq_tock.cafÂ  Â  KeyPressed</span><br><span class="line"></span><br><span class="line">1104Â  Â  Tock.cafÂ  Â  sq_tock.cafÂ  Â  KeyPressed</span><br><span class="line"></span><br><span class="line">1105Â  Â  Tock.cafÂ  Â  sq_tock.cafÂ  Â  KeyPressed</span><br><span class="line"></span><br><span class="line">1106Â  Â  beep-beep.cafÂ  Â  sq_beep-beep.cafÂ  Â  ConnectedToPower</span><br><span class="line"></span><br><span class="line">1107Â  Â  RingerChanged.cafÂ  Â  RingerChanged.cafÂ  Â  RingerSwitchIndication</span><br><span class="line"></span><br><span class="line">1108Â  Â  photoShutter.cafÂ  Â  photoShutter.cafÂ  Â  CameraShutter</span><br><span class="line"></span><br><span class="line">1109Â  Â  shake.cafÂ  Â  shake.cafÂ  Â  ShakeToShuffleÂ  Â  Available since 3.0</span><br><span class="line"></span><br><span class="line">1110Â  Â  jbl_begin.cafÂ  Â  jbl_begin.cafÂ  Â  JBL_BeginÂ  Â  Available since 3.0</span><br><span class="line"></span><br><span class="line">1111Â  Â  jbl_confirm.cafÂ  Â  jbl_confirm.cafÂ  Â  JBL_ConfirmÂ  Â  Available since 3.0</span><br><span class="line"></span><br><span class="line">1112Â  Â  jbl_cancel.cafÂ  Â  jbl_cancel.cafÂ  Â  JBL_CancelÂ  Â  Available since 3.0</span><br><span class="line"></span><br><span class="line">1113Â  Â  begin_record.cafÂ  Â  begin_record.cafÂ  Â  BeginRecordingÂ  Â  Available since 3.0</span><br><span class="line"></span><br><span class="line">1114Â  Â  end_record.cafÂ  Â  end_record.cafÂ  Â  EndRecordingÂ  Â  Available since 3.0</span><br><span class="line"></span><br><span class="line">1115Â  Â  jbl_ambiguous.cafÂ  Â  jbl_ambiguous.cafÂ  Â  JBL_AmbiguousÂ  Â  Available since 3.0</span><br><span class="line"></span><br><span class="line">1116Â  Â  jbl_no_match.cafÂ  Â  jbl_no_match.cafÂ  Â  JBL_NoMatchÂ  Â  Available since 3.0</span><br><span class="line"></span><br><span class="line">1117Â  Â  begin_video_record.cafÂ  Â  begin_video_record.cafÂ  Â  BeginVideoRecordingÂ  Â  Available since 3.0</span><br><span class="line"></span><br><span class="line">1118Â  Â  end_video_record.cafÂ  Â  end_video_record.cafÂ  Â  EndVideoRecordingÂ  Â  Available since 3.0</span><br><span class="line"></span><br><span class="line">1150Â  Â  vc~invitation-accepted.cafÂ  Â  vc~invitation-accepted.cafÂ  Â  VCInvitationAcceptedÂ  Â  Available since 4.0</span><br><span class="line"></span><br><span class="line">1151Â  Â  vc~ringing.cafÂ  Â  vc~ringing.cafÂ  Â  VCRingingÂ  Â  Available since 4.0</span><br><span class="line"></span><br><span class="line">1152Â  Â  vc~ended.cafÂ  Â  vc~ended.cafÂ  Â  VCEndedÂ  Â  Available since 4.0</span><br><span class="line"></span><br><span class="line">1153Â  Â  ct-call-waiting.cafÂ  Â  ct-call-waiting.cafÂ  Â  VCCallWaitingÂ  Â  Available since 4.1</span><br><span class="line"></span><br><span class="line">1154Â  Â  vc~ringing.cafÂ  Â  vc~ringing.cafÂ  Â  VCCallUpgradeÂ  Â  Available since 4.1</span><br><span class="line"></span><br><span class="line">1200Â  Â  dtmf-0.cafÂ  Â  dtmf-0.cafÂ  Â  TouchTone</span><br><span class="line"></span><br><span class="line">1201Â  Â  dtmf-1.cafÂ  Â  dtmf-1.cafÂ  Â  TouchTone</span><br><span class="line"></span><br><span class="line">1202Â  Â  dtmf-2.cafÂ  Â  dtmf-2.cafÂ  Â  TouchTone</span><br><span class="line"></span><br><span class="line">1203Â  Â  dtmf-3.cafÂ  Â  dtmf-3.cafÂ  Â  TouchTone</span><br><span class="line"></span><br><span class="line">1204Â  Â  dtmf-4.cafÂ  Â  dtmf-4.cafÂ  Â  TouchTone</span><br><span class="line"></span><br><span class="line">1205Â  Â  dtmf-5.cafÂ  Â  dtmf-5.cafÂ  Â  TouchTone</span><br><span class="line"></span><br><span class="line">1206Â  Â  dtmf-6.cafÂ  Â  dtmf-6.cafÂ  Â  TouchTone</span><br><span class="line"></span><br><span class="line">1207Â  Â  dtmf-7.cafÂ  Â  dtmf-7.cafÂ  Â  TouchTone</span><br><span class="line"></span><br><span class="line">1208Â  Â  dtmf-8.cafÂ  Â  dtmf-8.cafÂ  Â  TouchTone</span><br><span class="line"></span><br><span class="line">1209Â  Â  dtmf-9.cafÂ  Â  dtmf-9.cafÂ  Â  TouchTone</span><br><span class="line"></span><br><span class="line">1210Â  Â  dtmf-star.cafÂ  Â  dtmf-star.cafÂ  Â  TouchTone</span><br><span class="line"></span><br><span class="line">1211Â  Â  dtmf-pound.cafÂ  Â  dtmf-pound.cafÂ  Â  TouchTone</span><br><span class="line"></span><br><span class="line">1254Â  Â  long_low_short_high.cafÂ  Â  long_low_short_high.cafÂ  Â  Headset_StartCall</span><br><span class="line"></span><br><span class="line">1255Â  Â  short_double_high.cafÂ  Â  short_double_high.cafÂ  Â  Headset_Redial</span><br><span class="line"></span><br><span class="line">1256Â  Â  short_low_high.cafÂ  Â  short_low_high.cafÂ  Â  Headset_AnswerCall</span><br><span class="line"></span><br><span class="line">1257Â  Â  short_double_low.cafÂ  Â  short_double_low.cafÂ  Â  Headset_EndCall</span><br><span class="line"></span><br><span class="line">1258Â  Â  short_double_low.cafÂ  Â  short_double_low.cafÂ  Â  Headset_CallWaitingActions</span><br><span class="line"></span><br><span class="line">1259Â  Â  middle_9_short_double_low.cafÂ  Â  middle_9_short_double_low.cafÂ  Â  Headset_TransitionEnd</span><br><span class="line"></span><br><span class="line">1300Â  Â  Voicemail.cafÂ  Â  Voicemail.cafÂ  Â  SystemSoundPreview</span><br><span class="line"></span><br><span class="line">1301Â  Â  ReceivedMessage.cafÂ  Â  ReceivedMessage.cafÂ  Â  SystemSoundPreview</span><br><span class="line"></span><br><span class="line">1302Â  Â  new-mail.cafÂ  Â  new-mail.cafÂ  Â  SystemSoundPreview</span><br><span class="line"></span><br><span class="line">1303Â  Â  mail-sent.cafÂ  Â  mail-sent.cafÂ  Â  SystemSoundPreview</span><br><span class="line"></span><br><span class="line">1304Â  Â  alarm.cafÂ  Â  sq_alarm.cafÂ  Â  SystemSoundPreview</span><br><span class="line"></span><br><span class="line">1305Â  Â  lock.cafÂ  Â  sq_lock.cafÂ  Â  SystemSoundPreview</span><br><span class="line"></span><br><span class="line">1306Â  Â  Tock.cafÂ  Â  sq_tock.cafÂ  Â  KeyPressClickPreviewÂ  Â  The category was SystemSoundPreview before 3.2.</span><br><span class="line"></span><br><span class="line">1307Â  Â  sms-received1.cafÂ  Â  sms-received1.cafÂ  Â  SMSReceived_Selection</span><br><span class="line"></span><br><span class="line">1308Â  Â  sms-received2.cafÂ  Â  sms-received2.cafÂ  Â  SMSReceived_Selection</span><br><span class="line"></span><br><span class="line">1309Â  Â  sms-received3.cafÂ  Â  sms-received3.cafÂ  Â  SMSReceived_Selection</span><br><span class="line"></span><br><span class="line">1310Â  Â  sms-received4.cafÂ  Â  sms-received4.cafÂ  Â  SMSReceived_Selection</span><br><span class="line"></span><br><span class="line">1311Â  Â  -Â  Â  -Â  Â  SMSReceived_Vibrate</span><br><span class="line"></span><br><span class="line">1312Â  Â  sms-received1.cafÂ  Â  sms-received1.cafÂ  Â  SMSReceived_Selection</span><br><span class="line"></span><br><span class="line">1313Â  Â  sms-received5.cafÂ  Â  sms-received5.cafÂ  Â  SMSReceived_Selection</span><br><span class="line"></span><br><span class="line">1314Â  Â  sms-received6.cafÂ  Â  sms-received6.cafÂ  Â  SMSReceived_Selection</span><br><span class="line"></span><br><span class="line">1315Â  Â  Voicemail.cafÂ  Â  Voicemail.cafÂ  Â  SystemSoundPreviewÂ  Â  Available since 2.1</span><br><span class="line"></span><br><span class="line">1320Â  Â  Anticipate.cafÂ  Â  Anticipate.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1321Â  Â  Bloom.cafÂ  Â  Bloom.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1322Â  Â  Calypso.cafÂ  Â  Calypso.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1323Â  Â  Choo_Choo.cafÂ  Â  Choo_Choo.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1324Â  Â  Descent.cafÂ  Â  Descent.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1325Â  Â  Fanfare.cafÂ  Â  Fanfare.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1326Â  Â  Ladder.cafÂ  Â  Ladder.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1327Â  Â  Minuet.cafÂ  Â  Minuet.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1328Â  Â  News_Flash.cafÂ  Â  News_Flash.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1329Â  Â  Noir.cafÂ  Â  Noir.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1330Â  Â  Sherwood_Forest.cafÂ  Â  Sherwood_Forest.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1331Â  Â  Spell.cafÂ  Â  Spell.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1332Â  Â  Suspense.cafÂ  Â  Suspense.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1333Â  Â  Telegraph.cafÂ  Â  Telegraph.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1334Â  Â  Tiptoes.cafÂ  Â  Tiptoes.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1335Â  Â  Typewriters.cafÂ  Â  Typewriters.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1336Â  Â  Update.cafÂ  Â  Update.cafÂ  Â  SMSReceived_SelectionÂ  Â  Available since 4.2</span><br><span class="line"></span><br><span class="line">1350Â  Â  -Â  Â  -Â  Â  RingerVibeChanged</span><br><span class="line"></span><br><span class="line">1351Â  Â  -Â  Â  -Â  Â  SilentVibeChanged</span><br><span class="line"></span><br><span class="line">4095Â  Â  -Â  Â  -Â  Â  VibrateÂ  Â  There was no category for this sound before 2.2.</span><br><span class="line"></span><br><span class="line">In the SDK this is the constant kSystemSoundID</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœ‰æ—¶å€™ï¼Œçˆ±æ˜¯ä¸€ç§é”™è§‰</title>
      <link href="/2021/05/07/Love/"/>
      <url>/2021/05/07/Love/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è¿™ç¯‡æ–‡ç« çš„ä½œè€…æ˜¯å‘¨å›½å¹³ï¼š</p><hr><p><strong>æœ‰æ—¶å€™ï¼Œçˆ±æ˜¯ä¸€ç§é”™è§‰</strong></p><p>ä½ ç¿»é˜…ä»–çš„äººç”Ÿå±¥å†ï¼Œè¿½å¯»ç€ä»–çš„è¶³è¿¹ï¼Œæ„Ÿå—ç€ä»–çš„å–œæ€’å“€ä¹ï¼Œå¹¶ä¸ºç€ä»–çš„å¼€å¿ƒè€Œå¼€å¿ƒï¼Œä¸ºç€ä»–çš„å¿§éƒè€Œå¿§éƒã€‚<br>ä½ ä»¥ä¸ºè¿™å°±æ˜¯çˆ±äº†ã€‚<br>ä½ è¯»ä»–çš„æ–‡å­—ï¼Œæ¬£èµç€ä»–çš„æ‰æ°”ï¼Œå–œæ¬¢å¬ä»–çš„è¨€è°ˆæ¬¢ç¬‘ï¼Œå–œæ¬¢è´´è¿‘ä»–çš„æ„Ÿè§‰ï¼Œç”šè‡³ä¸ºç€ä»–æ„¿æ„ä¸ä½ è¯´è¯ï¼Œè€Œæ¬£å–œå¼‚å¸¸ã€‚<br>ä½ ä»¥ä¸ºè¿™å°±æ˜¯çˆ±äº†ã€‚<br>ä½ å¯¹è‡ªå·±è¯´ä½ æ˜¯æ„¿æ„åšä»–çš„æ–°å¨˜ï¼Œæ„¿æ„ä¸ä»–æºæ‰‹ç™¾å¹´ï¼Œæ„¿æ„ä¸ºä»–ç½®ä¸€å¤„æ¸©æš–çš„å®¶ï¼Œè®©ä»–ä»æ­¤ä¸å†æ¼‚æ³Šï¼Œæ„¿æ„ä¸ºä»–ç”Ÿå„¿è‚²å¥³å…±äº«å¤©ä¼¦ã€‚<br>ä½ ä»¥ä¸ºè¿™å°±æ˜¯çˆ±äº†ã€‚</p><span id="more"></span><p>ä¸å¯å¦è®¤ï¼Œä½ çš„ç¡®å¯¹ä»–åŠ¨æƒ…åŠ¨å¿ƒäº†ã€‚<br>åªæ˜¯ï¼ŒæŸä¸€å¤©ï¼Œå½“ä»–ç¦»ä½ è€Œå»ï¼Œæœ€å¼€åˆï¼Œä½ æœ‰è¿‡æ€å¿µï¼Œæœ‰è¿‡å¤±è½ï¼Œç”šè‡³æœ‰è¿‡æƒ†æ€…ä¸ç—›æ¥šã€‚ä½†æ˜¯ï¼Œéšåçš„æ—¥å­ï¼Œä½ å¿˜è®°å¾—å¾ˆå¿«ã€‚å¦ä¸€å¤„é£æ™¯é—¯å…¥ä½ çš„è§†é‡ï¼Œä»£æ›¿äº†å…ˆå‰æ‰€æœ‰çš„æ€å¿µï¼Œä½ è§‰å¾—ç›¸å½¢ä¹‹ä¸‹ï¼Œä½ æ›´çˆ±çœ¼å‰çš„é£æ™¯ã€‚<br>ä½ æ¬£èµç€çœ¼å‰è¿™ä¸ªä»–ï¼Œå–œæ¬¢ç€çœ¼å‰è¿™ä¸ªä»–ï¼Œå¹¶æ—¶å¸¸å¹»æƒ³ç€ä¸è¿™ä¸ªä»–å…±ç»“è¿ç†ã€‚äº¦å¦‚å½“åˆå¯¹å…ˆå‰çš„ä»–ï¼Œæ„Ÿè§‰æ˜¯æƒŠäººçš„ç›¸ä¼¼ã€‚<br>è¿™ä¸ªæ—¶å€™ï¼Œå¶å°”æƒ³èµ·å…ˆå‰çš„ä»–ï¼Œä½ åªæ˜¯ç¬‘ç¬‘ï¼Œç¬‘è‡ªå·±å½“åˆçš„å¹¼ç¨šä¸å¤©çœŸï¼Œä½ è¯´ï¼Œé‚£ä¸æ˜¯çˆ±ï¼Œé‚£åªæ˜¯è‡ªå·±ç»™è‡ªå·±ç¼–ç»‡çš„æƒ…ç½‘ï¼Œä½ å–œæ¬¢å‚é’“çˆ±æƒ…ï¼Œé’“çš„æ˜¯è‡ªå·±çš„æ„Ÿè§‰å’Œè‡ªå·±çš„è¡€è‚‰ã€‚<br>å¯æ˜¯ï¼Œä½ åˆå¦‚ä½•æŠŠæ¡çœ¼å‰è¿™ä¸€ä»½æ„Ÿè§‰ï¼Œå°±çœŸçš„æ˜¯çˆ±äº†å‘¢ï¼Ÿ<br>æˆ–è®¸ï¼Œä½ å–œæ¬¢çš„åªæ˜¯ä»–å¤´ä¸Šçš„å…‰ç¯ï¼Œå–œæ¬¢çš„åªæ˜¯æ‰“è´¥èº«è¾¹é‚£äº›ä»°æ…•è€…çš„æ„Ÿè§‰ã€‚<br>å› ä¸ºå¹´è½»ï¼Œä½ è€ä¸ä½å¯‚å¯ï¼›å› ä¸ºå¹´è½»ï¼Œä½ äº‰å¼ºå¥½èƒœï¼›å› ä¸ºå¹´è½»ï¼Œä½ é…·çˆ±ç€å¾æœã€‚ä½ ç”¨å¾æœç”·äººï¼Œæ¥è§è¯ç€ä½ çš„é­…åŠ›ï¼›å¾æœç”·äººï¼Œä¹Ÿå¸¦ç»™ä½ åšå¥³äººçš„å¿«ä¹ã€‚<br>æ­£å¦‚æŸäººæ‰€è¯´ï¼Œ<strong>ä½ çˆ±çš„ä¸æ˜¯ä»–è¿™ä¸ªäººæœ¬èº«ï¼Œè€Œæ˜¯æ‹çˆ±çš„æ„Ÿè§‰</strong>ï¼Œä½ éœ€è¦æœ‰ä¸€ç§æ‹çˆ±çš„å‘³é“ã€æ‹çˆ±çš„æ°”æ¯ã€æ‹çˆ±çš„çƒ­é—¹ï¼Œå……æ–¥ä½ å¹´è½»çš„ç”Ÿå‘½è¿‡ç¨‹ï¼Œæ¶ˆè€—ä½ è¿‡å‰©çš„ç²¾åŠ›ã€‚å› æ­¤ï¼Œä½ ä¸æ–­çš„åˆ¶é€ ç€çˆ±çš„å¯¹è±¡ï¼Œåˆ¶é€ ç€çˆ±çš„æ„Ÿè§‰ï¼Œä½ çˆ±ç€çˆ±ä»–çš„æ„Ÿè§‰ï¼Œçˆ±ç€æƒ³å¿µä»–çš„å‘³é“ï¼Œçˆ±ç€ä¸ºä»–å†™æƒ…ä¹¦çš„æ¿€åŠ¨ï¼ŒåŒæ—¶ä¹Ÿçˆ±ç€è¢«ä»–å†·è½ã€è¢«ä»–ç²—æš´çš„æ•™è®­çš„é…¸æ¶©ï¼Œçˆ±ç€å› ä¸ºä»–å–œæ¬¢ä¼—å¤šå¥³äººå’Œä¼—å¤šå¥³äººå–œæ¬¢ä»–è€Œå¼•å‘çš„é†‹å‘³ã€‚ä½ æ²‰è¿·åœ¨è¿™ç§çˆ±çš„ç—›å¿«ä¹‹ä¸­ï¼Œæ— æ³•è‡ªæ‹”ã€‚<br><strong>è¿™ï¼Œå…¶å®æ˜¯çˆ±çš„é”™è§‰ã€‚</strong><br>çˆ±çš„é”™è§‰ï¼Œè®©ä½ å¿½ç•¥äº†ä¸€æ ·ï¼Œæœ€ç°å®çš„ä¸€æ ·ï¼Œé‚£ä¾¿æ˜¯ä¸ä»–çœŸå®ç›¸å®ˆä¸€è¾ˆå­ï¼Œé‚£äº›å¹³å¹³æ·¡æ·¡å²æœˆé‡Œï¼ŒæŸ´ç±³æ²¹ç›çš„çç¢ï¼›é‚£äº›é£éœœé›ªé›¨æ¥ä¸´æ—¶ï¼Œç”Ÿå‘½è¦æ‰¿å—çš„åˆ€å…‰å‰‘å½±ã€‚å¯¹è¿™äº›ï¼Œä½ æ²¡æœ‰æƒ³è¿‡ï¼Œæˆ–è®¸ä½ æƒ³è¿‡ï¼Œå´åªæ˜¯è½»ææ·¡å†™çš„ä»¥ä¸ºé‚£å¾ˆç®€å•ã€‚<br>åœ¨ä½ çœ‹æ¥ï¼Œæœ‰çˆ±å°±å¤Ÿäº†ã€‚<br>å¯æ˜¯ï¼Œæœ‰çˆ±æ˜¯ç»å¯¹ä¸å¤Ÿçš„ã€‚çº¸ä¸Šè°ˆå…µä¼¼çš„æ‹æƒ…ï¼Œæ— å¼‚äºç”»é¥¼å……é¥¥ï¼›åªæ²‰æµ¸åœ¨ç”œè¨€èœœè¯­ä¸­çš„æ‹æƒ…ï¼Œç»ä¸èµ·æ—¶é—´å’Œéœœé›ªè€ƒéªŒã€‚<br>çˆ±çš„é”™è§‰æ˜¯ä¸€åœºçˆ±çš„ä½œç§€ï¼Œåœ¨æŸä¸ªæ—¶å€™ï¼Œä¼šåˆ‡å‰²é’æ˜¥ï¼Œä¼šæ£ç¢ä½ ç¾å¥½çš„ç†æƒ³ï¼Œç„¶åæŠŠç°æš—çš„è‰²æ³½æ¶‚æŠ¹åœ¨ä½ ç”Ÿå‘½çš„å¤©ç©ºï¼Œä»¥è‡³äºå½±å“åˆ°ä½ ä»¥åçš„çˆ±æƒ…è§‚ä»·å€¼è§‚äººç”Ÿã€‚æ›´æœ‰ç”šè€…ï¼Œä½ æˆ–è®¸è¿˜ä¼šæŠŠè¿™ç§é”™è§‰å˜æˆä¸€æŠŠåˆ©åˆƒï¼Œåœ¨ä½ è‡ªä»¥ä¸ºçˆ±ç€çš„äººèº«ä¸Šï¼Œç•™ä¸‹æ·±æ·±çš„åˆ›å£ã€‚æ˜¯çš„ï¼Œçˆ±çš„é”™è§‰å¾€å¾€åœ¨ä½ çš„çˆ±æ²¡æœ‰å¾—åˆ°ä½ æ¸´æœ›å¾—åˆ°çš„å›åº”æ—¶ï¼Œå˜æˆæ€¨æ¨ï¼Œæ—¢è€Œåœ¨æŸä¸€æ®µæ—¶é—´ï¼Œé‚£ä¸ªä½ è‡ªä»¥ä¸ºæ·±çˆ±çš„äººï¼Œä¼šæ²¦ä¸ºä½ è¯…å’’çš„å¯¹è±¡ã€‚å¤§å‡¡æˆä¸äº†æ‹äººï¼Œä¾¿æˆä¸ºä»‡æ•Œï¼Œéƒ½æ˜¯çˆ±çš„é”™è§‰ä¸‹çš„ç•¸å½¢äº§ç‰©ã€‚<br>çˆ±æºäºä¸€ç§æ„Ÿè§‰ï¼Œè¿™æ„Ÿè§‰æœ‰äº›åƒæµ·å¸‚èœƒæ¥¼ï¼Œç¾åˆ™ç¾å·²ï¼Œå´å¤ªè™šå¹»ã€‚<br>æ˜¯çš„ï¼Œè¯´çˆ±æ˜¯å¾ˆå®¹æ˜“çš„äº‹æƒ…ï¼Œå†™ä¸€å°æƒ…ä¹¦ä¹Ÿä¸æ˜¯å¾ˆéš¾ï¼Œä½œå‡ºä¸€ä¸ªçˆ±çš„å£å¤´æ‰¿è¯ºä¹Ÿä»…ä»…æ˜¯å¼€å‡ºä¸€å¼ ç©ºå¤´æ”¯ç¥¨ã€‚<br>æˆ–è®¸ä½ ç²¾äºçš„å…¶å®åªæ˜¯æ‹çˆ±çš„æŠ€å·§ï¼Œä½ è‡ªä»¥ä¸ºæˆç†Ÿçš„åªæ˜¯å°†çˆ±å†™æˆè¯ï¼Œè°±æˆæ›²ï¼Œç„¶åéå¸¸å¼ æ‰¬çš„æ”¾å£°æ­Œå”±ã€‚å¯æ˜¯ï¼Œä½ æ˜¯å¦çŸ¥é“ï¼Œçˆ±çš„è¿‡ç¨‹å´æ˜¯é•¿ä¹…çš„è·‹æ¶‰ï¼Œé™¤äº†èŠ±å‰æœˆä¸‹ï¼Œé™¤äº†å¿å¿æˆ‘æˆ‘ï¼Œé™¤äº†è‚Œè‚¤ä¸Šçš„äº²å»çˆ±æŠšï¼Œè¿˜æœ‰ä¹‰åŠ¡ã€è´£ä»»ï¼Œé‚£äº›ä¸œè¥¿çœ‹èµ·æ¥ä¸€ç‚¹å„¿ä¹Ÿä¸æµªæ¼«ï¼Œç”šè‡³æ˜¯æ²‰é‡çš„ï¼Œå´éœ€è¦ä½ ä»˜å‡ºæ¯•ç”Ÿçš„ç²¾åŠ›ï¼›ä½ æ˜¯å¦çŸ¥é“ï¼Œæœ€çœŸå®åŠ¨äººçš„æƒ…ä¹¦ï¼Œä¸æ˜¯å†™åœ¨çº¸ä¸Šï¼Œä¸æ˜¯å”±åœ¨å˜´é‡Œï¼Œå´æ˜¯ä»˜å°åœ¨ä½ æ¯å¤©ä¸ºä½ å’Œä»–ç»„åˆçš„é‚£ä¸ªå®¶çš„æ“åŠ³ä¹‹ä¸­ã€‚<br>å› æ­¤ï¼ŒçœŸæ­£çš„æ‹çˆ±ï¼Œæ˜¯ä»ç»„åˆäº†å®¶æ‰å¼€å§‹çš„ï¼Œå¼€åˆçš„ä¸€åˆ‡ï¼Œéƒ½åªæ˜¯çˆ±çš„åºå¹•ï¼Œåšå®è€Œç²¾å½©çš„å†…å®¹ï¼Œåœ¨ä»¥åçš„ç« èŠ‚ã€‚<br>é‚£ä¹ˆï¼Œå½“ä½ ä»¥ä¸ºè‡ªå·±çˆ±äº†çš„æ—¶å€™ï¼Œä¸å¦¨è®©è‡ªå·±æš‚æ—¶çš„è¿œç¦»ï¼ŒæŠŠå¿ƒé‡Œå‡è…¾çš„çˆ±ç«äººä¸ºçš„ç­ä¸€ç­ï¼Œç„¶åé‡æ–°æ‰“é‡ä½ è‡ªä»¥ä¸ºçˆ±ç€çš„å¯¹è±¡ï¼Œçœ‹çœ‹è‡ªå·±æ˜¯ä¸æ˜¯å…·æœ‰è¶³å¤Ÿæ‡‚å¾—ä»–çš„èƒ½åŠ›ï¼Œè‡³å°‘æ˜¯ä¸æ˜¯æ„¿æ„åŠªåŠ›çš„å»äº†è§£ä»–ã€ç†è§£ä»–ï¼Œå¹¶å§‹ç»ˆæ¬£èµç€ä»–ã€‚<br><strong>ç„¶åï¼Œä½ è¿˜éœ€æŠŠä»–æ‰€æœ‰çš„ä¼˜ç‚¹å…¨éƒ¨æŠ›å¼€ï¼Œåªçœ‹ä»–çš„ç¼ºç‚¹ï¼Œå¹¶å°½å¯èƒ½æ”¾å¤§ä»–çš„ç¼ºç‚¹ï¼Œå†é—®é—®è‡ªå·±ï¼Œä½ èƒ½ä¸èƒ½å¤ŸåŒ…å®¹ï¼Ÿåœ¨ä»Šåçš„å²æœˆé‡Œï¼Œä½ ä¼šä¸ä¼šå› äº†ä»–çš„è¿™äº›ç¼ºç‚¹ä¸ä»…æ²¡æœ‰æ”¹å˜ï¼Œåè€Œè†¨æ¶¨ï¼Œè€Œè½»æ˜“çš„ç¦»å¼ƒï¼Ÿä½ æ˜¯å¦æ„¿æ„æ— è®ºè´«å¯Œã€ç–¾ç—…ã€ç¯å¢ƒæ¶åŠ£ã€äººç”Ÿå¤±æ„å¤±åˆ©ï¼Œéƒ½ä¸€å¿ƒä¸€æ„å¿ è´ä¸æ¸åœ°çˆ±æŠ¤ä»–ï¼Œåœ¨äººç”Ÿçš„æ—…ç¨‹ä¸­æ°¸è¿œä¸ä»–å¿ƒå¿ƒç›¸å°ç›¸ä¾ç›¸åï¼Œç›´è‡³ç™½å¤´å•è€ï¼Ÿ</strong><br>è¯·æŠŠæ¯ç§æƒ…å½¢éƒ½å¥½å¥½çš„æ€è™‘ä¸€éï¼Œå¹¶è®¤çœŸçš„åœ¨å¿ƒé‡Œæ¼”ç»ä¸€æ¬¡ã€‚</p><p>ç„¶åä½ å¯ä»¥ä½œå‡ºè‚¯å®šæˆ–å¦å®šçš„å›ç­”äº†ã€‚</p><hr>]]></content>
      
      
      
        <tags>
            
            <tag> è¯»ä¹¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Server-Sent Events / EventSource</title>
      <link href="/2021/02/19/Server-Sent%20Events/"/>
      <url>/2021/02/19/Server-Sent%20Events/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>å…¬å¸çš„ OA é¡¹ç›®ä¸­ï¼Œå¾€å¾€éœ€è¦æ¥å…¥å¾ˆå¤šä¸šåŠ¡ç³»ç»Ÿï¼Œä½“ç°åœ¨ App UI ä¸Šå°±ç±»ä¼¼æ”¯ä»˜å®é¦–é¡µçš„ä¹å®«æ ¼ã€‚è¿™äº›ä¸šåŠ¡ç³»ç»Ÿå‘¢åˆä¸ä¸€å®šæ¥è‡ªåŒä¸€å®¶å‚å•†ï¼Œå½“ App éœ€è¦å’Œä»–ä»¬åšä¸€äº›äº¤äº’çš„æ—¶å€™ï¼ˆä¾‹å¦‚è·å–æ¯ä¸ªä¸šåŠ¡çš„å¾…åŠæ•°ç›®ï¼Œå±•ç¤ºåœ¨é¦–é¡µå›¾æ ‡çš„è§’æ ‡ä¸Šï¼‰ï¼Œæ‰‹æœºç«¯å¼€å‘è€…å°±å¾ˆå¤´ç–¼äº†ã€‚</p><p>å°±ä»¥å¾…åŠæ•°ç›®ä¸ºä¾‹ï¼Œæ¥å£ä¸ç»Ÿä¸€ã€å‚æ•°ä¸ç»Ÿä¸€ã€å“åº”é€Ÿåº¦ä¸ç»Ÿä¸€ã€éšæ—¶æ¥å…¥æ–°çš„ç³»ç»Ÿï¼Œäº¤äº’è¿‡ç¨‹å¦‚æœå†™åœ¨ App ä¸­ï¼Œé‚£å°±éœ€è¦é¢‘ç¹çš„æ›´æ–° Appï¼Œè¿™å¯¹ç”¨æˆ·æ¥è¯´ï¼Œæ˜¯éå¸¸ä¸å‹å¥½çš„ã€‚è¿™ä¸ªæ—¶å€™é€šå¸¸éµå¾ªçš„ä¸€ä¸ªåŸåˆ™å°±æ˜¯ï¼Œå°†å˜åŒ–æ”¾åœ¨ OA-Serverï¼ŒOA-App åªéœ€è¦ä¸ OA-Server çº¦å®šå¥½æ¥å£è§„èŒƒï¼Œåªè®¿é—®è‡ªå·±çš„åå°å³å¯ï¼Œä¸å„ä¸ªä¸šåŠ¡çš„äº¤äº’äº¤ç»™åå°ã€‚é‚£ OA-App å‘é€è¯·æ±‚åˆ°  OA-Serverï¼ŒOA-Server æ”¶åˆ°å¤šä¸ªä¸šåŠ¡å“åº”çš„å¾…åŠæ•°ç›®ä»¥åæ€ä¹ˆåŠæ—¶çš„é€šçŸ¥ OA-App å‘¢ï¼Ÿ</p><span id="more"></span><p>æåˆ°æœåŠ¡ç«¯æ•°æ®æ¨é€ï¼Œå¯èƒ½ä¸€ä¸‹å­å®¹æ˜“æƒ³åˆ° WebSocketã€‚WebSocket æ˜¯ä¸€ç§å…¨æ–°çš„åè®®ï¼Œéšç€ HTML5 è‰æ¡ˆçš„ä¸æ–­å®Œå–„ï¼Œè¶Šæ¥è¶Šå¤šçš„ç°ä»£æµè§ˆå™¨å¼€å§‹å…¨é¢æ”¯æŒ WebSocket æŠ€æœ¯äº†ï¼Œå®ƒå°† TCP çš„ Socketï¼ˆå¥—æ¥å­—ï¼‰åº”ç”¨åœ¨äº†web page ä¸Šï¼Œä»è€Œä½¿é€šä¿¡åŒæ–¹å»ºç«‹èµ·ä¸€ä¸ªä¿æŒåœ¨æ´»åŠ¨çŠ¶æ€è¿æ¥é€šé“ã€‚å®ƒæ˜¯ä¸€ç§å…¨åŒå·¥é€šä¿¡ï¼Œè€Œæˆ‘ä»¬å‰é¢æåˆ°çš„è·å–å¾…åŠæ•°ç›®çš„åœºæ™¯ï¼ŒApp å‘é€ä¸€æ¬¡è¯·æ±‚å°±å¯ä»¥ï¼Œserver æ‹¿åˆ°å„ä¸ªä¸šåŠ¡çš„æ•°æ®åå†åˆ†åˆ«å®æ—¶è¿”å›ç»™ App ï¼Œæ›´åƒæ˜¯ä¸€ç§å•å‘é€šä¿¡ï¼Œä½¿ç”¨ WebSocket å²‚ä¸æ˜¯æ€é¸¡ç”¨ç‰›åˆ€ï¼Ÿé‚£è½®è¯¢å‘¢ï¼Ÿè€—è´¹ server èµ„æºä¸è¯´ï¼Œä¸ä¸€å®šè¾¾åˆ°å®æ—¶çš„æ•ˆæœã€‚(PSï¼šè¿™é‡Œåæ§½ä¸‹å®¢æˆ·ï¼Œå¾…åŠæ•°æœ‰çš„ 999 å¤šï¼Œä¹Ÿä¸å¤„ç†ï¼Œå±…ç„¶åªä¼šå«Œå¼ƒæˆ‘ä»¬æ•°æ®è·å–çš„ä¸åŠæ—¶ğŸ¤“)â€¦â€¦</p><p>å¥½å·§ä¸å·§ï¼Œçœ‹åˆ°äº†å¦ä¸€ä¸ªè½»é‡çº§çš„æ–¹æ¡ˆï¼šServer-Sent Eventsã€‚</p><h2 id="Server-Sent-Events"><a href="#Server-Sent-Events" class="headerlink" title="Server-Sent Events"></a>Server-Sent Events</h2><p>HTML5 ä¸­æœ‰ä¸€ä¸ªè½»é‡çš„æ›¿ä»£ WebSocketçš„æ–¹æ¡ˆï¼šServer-Sent Eventsï¼Œä»¥ä¸‹ç®€ç§° SSEã€‚</p><h3 id="SSE-æœ¬è´¨"><a href="#SSE-æœ¬è´¨" class="headerlink" title="SSE æœ¬è´¨"></a>SSE æœ¬è´¨</h3><p>ä¸¥æ ¼åœ°è¯´ï¼ŒHTTP åè®®æ— æ³•åšåˆ°æœåŠ¡å™¨ä¸»åŠ¨æ¨é€ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ç§å˜é€šæ–¹æ³•ï¼Œå°±æ˜¯æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å£°æ˜ï¼Œæ¥ä¸‹æ¥è¦å‘é€çš„æ˜¯æµä¿¡æ¯ï¼ˆstreamingï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‘é€çš„ä¸æ˜¯ä¸€æ¬¡æ€§çš„æ•°æ®åŒ…ï¼Œè€Œæ˜¯ä¸€ä¸ªæ•°æ®æµï¼Œä¼šè¿ç»­ä¸æ–­åœ°å‘é€è¿‡æ¥ã€‚è¿™æ—¶ï¼Œå®¢æˆ·ç«¯ä¸ä¼šå…³é—­è¿æ¥ï¼Œä¼šä¸€ç›´ç­‰ç€æœåŠ¡å™¨å‘è¿‡æ¥çš„æ–°çš„æ•°æ®æµï¼Œè§†é¢‘æ’­æ”¾å°±æ˜¯è¿™æ ·çš„ä¾‹å­ã€‚æœ¬è´¨ä¸Šï¼Œè¿™ç§é€šä¿¡å°±æ˜¯ä»¥æµä¿¡æ¯çš„æ–¹å¼ï¼Œå®Œæˆä¸€æ¬¡ç”¨æ—¶å¾ˆé•¿çš„ä¸‹è½½ã€‚SSE å°±æ˜¯åˆ©ç”¨è¿™ç§æœºåˆ¶ï¼Œä½¿ç”¨æµä¿¡æ¯å‘æµè§ˆå™¨æ¨é€ä¿¡æ¯ã€‚</p><h3 id="SSE-ç‰¹ç‚¹"><a href="#SSE-ç‰¹ç‚¹" class="headerlink" title="SSE ç‰¹ç‚¹"></a>SSE ç‰¹ç‚¹</h3><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/25.jpg"></p><p>WebSocket å’Œ SSE éƒ½æ˜¯ä¼ ç»Ÿè¯·æ±‚-å“åº” Web æ¶æ„çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä½†å®ƒä»¬ä¸æ˜¯å®Œå…¨å†²çªçš„æŠ€æœ¯ã€‚</p><ul><li>SSE ä½¿ç”¨ HTTP åè®®ï¼Œç°æœ‰çš„æœåŠ¡å™¨è½¯ä»¶éƒ½æ”¯æŒã€‚WebSocket æ˜¯ä¸€ä¸ªç‹¬ç«‹åè®®ã€‚</li><li>SSE å±äºè½»é‡çº§ï¼Œä½¿ç”¨ç®€å•ï¼›WebSocket åè®®ç›¸å¯¹å¤æ‚ã€‚</li><li>SSE é»˜è®¤æ”¯æŒæ–­çº¿é‡è¿ï¼ŒWebSocket éœ€è¦è‡ªå·±å®ç°ã€‚</li><li>SSE ä¸€èˆ¬åªç”¨æ¥ä¼ é€æ–‡æœ¬ï¼ŒäºŒè¿›åˆ¶æ•°æ®éœ€è¦ç¼–ç åä¼ é€ï¼ŒWebSocket é»˜è®¤æ”¯æŒä¼ é€äºŒè¿›åˆ¶æ•°æ®ã€‚</li><li>SSE æ”¯æŒè‡ªå®šä¹‰å‘é€çš„æ¶ˆæ¯ç±»å‹ã€‚</li></ul><p>æ˜¾ç„¶ï¼Œæˆ‘ä»¬ä¸Šé¢æåˆ°çš„ å¾…åŠæ•°ç›® åœºæ™¯ï¼Œå¾ˆé€‚åˆä½¿ç”¨ SSEã€‚</p><h2 id="EventSource"><a href="#EventSource" class="headerlink" title="EventSource"></a>EventSource</h2><p>EventSource æ˜¯ SSE å¯¹åº”çš„å®¢æˆ·ç«¯ APIï¼Œå¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½æ˜¯é»˜è®¤æ”¯æŒçš„ã€‚ç½‘ä¸Šçš„å¾ˆå¤šèµ„æ–™ä¹Ÿéƒ½æ˜¯ä»æµè§ˆå™¨çš„è§’åº¦æ¥è®²çš„ã€‚é‚£è¿™é‡Œæˆ‘ä»¬å°±ä» HTTP åè®®çš„è§’åº¦è®²ä¸€ä¸‹äº¤äº’è¿‡ç¨‹å§ã€‚ğŸ™„ï¼Œæ¯•ç«Ÿæˆ‘ä¸æ‡‚ web å‰ç«¯ã€‚</p><blockquote><p>API ä»‹ç»ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Server-sent_events/EventSource"><strong>EventSource</strong></a></p></blockquote><h3 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h3><ul><li>é¦–å…ˆ Client å‘é€ä¸€ä¸ªæ™®æ™®é€šé€šçš„ GET è¯·æ±‚åˆ° SSE-Serverã€‚</li><li>SSE-Server æ— è®ºéœ€è¦è¿”å›å‡ æ¬¡æ•°æ®ï¼Œæ•°æ®æ ¼å¼å¿…é¡»æ˜¯ UTF-8 ç¼–ç çš„æ–‡æœ¬ï¼ŒHTTP å¤´éƒ¨ä¿¡æ¯éœ€è¦ç±»ä¼¼å¦‚ä¸‹è®¾ç½®ï¼š</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>text/event-stream</span><br><span class="line"><span class="attribute">Cache-Control</span><span class="punctuation">: </span>no-cache</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>keep-alive</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä¸‰è¡Œä¹‹ä¸­ï¼Œç¬¬ä¸€è¡Œçš„ <code>Content-Type</code> å¿…é¡»æŒ‡å®š MIME ç±»å‹ä¸º <code>event-steam</code> ã€‚</p><ul><li>SSE-Server æ¯ä¸€æ¬¡å‘é€çš„ä¿¡æ¯ï¼Œç”±è‹¥å¹²ä¸ª <code>message </code> ç»„æˆï¼Œæ¯ä¸ª <code>message</code> ä¹‹é—´ç”¨ <code>\n\n</code> åˆ†éš”ã€‚æ¯ä¸ª <code>message</code> å†…éƒ¨ç”±è‹¥å¹²è¡Œç»„æˆï¼Œæ¯ä¸€è¡Œéƒ½æ˜¯å¦‚ä¸‹æ ¼å¼ï¼š</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[field]: value\n</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ <code>field</code> å¯ä»¥å–å››ä¸ªå€¼ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data</span><br><span class="line">event</span><br><span class="line">id</span><br><span class="line">retry</span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥æœ‰å†’å·å¼€å¤´çš„è¡Œï¼Œè¡¨ç¤ºæ³¨é‡Šã€‚é€šå¸¸ï¼ŒæœåŠ¡å™¨æ¯éš”ä¸€æ®µæ—¶é—´å°±ä¼šå‘æµè§ˆå™¨å‘é€ä¸€ä¸ªæ³¨é‡Šï¼Œä¿æŒè¿æ¥ä¸ä¸­æ–­ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">: This is a comment</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">: this is a test stream\n\n</span><br><span class="line"></span><br><span class="line">data: some text\n\n</span><br><span class="line"></span><br><span class="line">data: another message\n</span><br><span class="line">data: with two lines \n\n</span><br></pre></td></tr></table></figure><ul><li>Client æ‹¿åˆ° message ä»¥åè‡ªå·±è§£æã€‚</li></ul><h4 id="message"><a href="#message" class="headerlink" title="message"></a>message</h4><p>å‰é¢æåˆ°çš„  <code>field</code>  æœ‰å››ä¸ªå€¼ï¼Œå¯ä»¥åˆ†åˆ«ç”¨ä½œä¸åŒçš„ç”¨é€”ã€‚</p><h5 id="data-æ•°æ®å†…å®¹"><a href="#data-æ•°æ®å†…å®¹" class="headerlink" title="data æ•°æ®å†…å®¹"></a>data æ•°æ®å†…å®¹</h5><p>å¦‚æœæ•°æ®å¾ˆé•¿ï¼Œå¯ä»¥åˆ†æˆå¤šè¡Œï¼Œæœ€åä¸€è¡Œç”¨ <code>\n\n</code> ç»“å°¾ï¼Œå‰é¢è¡Œéƒ½ç”¨ <code>\n</code> ç»“å°¾ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">data:  message\n\n</span><br><span class="line"></span><br><span class="line">data: begin message\n</span><br><span class="line">data: continue message\n\n</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘é€json</span></span><br><span class="line">data: &#123;\n</span><br><span class="line">data: <span class="string">&quot;foo&quot;</span>: <span class="string">&quot;bar&quot;</span>,\n</span><br><span class="line">data: <span class="string">&quot;baz&quot;</span>, 555\n</span><br><span class="line">data: &#125;\n\n</span><br></pre></td></tr></table></figure><h5 id="id-æ•°æ®æ ‡è¯†"><a href="#id-æ•°æ®æ ‡è¯†" class="headerlink" title="id æ•°æ®æ ‡è¯†"></a>id æ•°æ®æ ‡è¯†</h5><p>ç›¸å½“äºæ¯æ¡æ•°æ®çš„ç¼–å·ã€‚</p><p>æµè§ˆå™¨ç”¨ <code>lastEventId</code> å±æ€§è¯»å–è¿™ä¸ªå€¼ã€‚ä¸€æ—¦è¿æ¥æ–­çº¿ï¼Œæµè§ˆå™¨ä¼šå‘é€ä¸€ä¸ª HTTP å¤´ï¼Œé‡Œé¢åŒ…å«ä¸€ä¸ªç‰¹æ®Šçš„ <code>Last-Event-ID</code> å¤´ä¿¡æ¯ï¼Œå°†è¿™ä¸ªå€¼å‘é€å›å»ï¼Œç”¨æ¥å¸®åŠ©æœåŠ¡å™¨ç«¯é‡å»ºè¿æ¥ã€‚å› æ­¤ï¼Œè¿™ä¸ªå¤´ä¿¡æ¯å¯ä»¥è¢«è§†ä¸ºä¸€ç§åŒæ­¥æœºåˆ¶ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">id: msg1\n</span><br><span class="line">data: message\n\n</span><br></pre></td></tr></table></figure><h5 id="event-è‡ªå®šä¹‰çš„äº‹ä»¶ç±»å‹"><a href="#event-è‡ªå®šä¹‰çš„äº‹ä»¶ç±»å‹" class="headerlink" title="event è‡ªå®šä¹‰çš„äº‹ä»¶ç±»å‹"></a>event è‡ªå®šä¹‰çš„äº‹ä»¶ç±»å‹</h5><p>é»˜è®¤æ˜¯<code>message</code>äº‹ä»¶ã€‚æµè§ˆå™¨å¯ä»¥ç”¨<code>addEventListener()</code>ç›‘å¬è¯¥äº‹ä»¶ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">event: foo\n</span><br><span class="line">data: a foo event\n\n</span><br><span class="line"></span><br><span class="line">data: an unnamed event\n\n</span><br><span class="line"></span><br><span class="line">event: bar\n</span><br><span class="line">data: a bar event\n\n</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç åˆ›é€ äº†ä¸‰æ¡ä¿¡æ¯ã€‚ç¬¬ä¸€æ¡çš„åå­—æ˜¯ <code>foo</code> ï¼Œè§¦å‘æµè§ˆå™¨çš„ <code>foo</code> äº‹ä»¶ï¼›ç¬¬äºŒæ¡æœªå–åï¼Œè¡¨ç¤ºé»˜è®¤ç±»å‹ï¼Œè§¦å‘æµè§ˆå™¨çš„ <code>message</code> äº‹ä»¶ï¼›ç¬¬ä¸‰æ¡æ˜¯ <code>bar</code> ï¼Œè§¦å‘æµè§ˆå™¨çš„ <code>bar</code> äº‹ä»¶ã€‚</p><p>ä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">event: userconnect</span><br><span class="line">data: &#123;<span class="attr">&quot;username&quot;</span>: <span class="string">&quot;bobby&quot;</span>, <span class="attr">&quot;time&quot;</span>: <span class="string">&quot;02:33:48&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">event: usermessage</span><br><span class="line">data: &#123;<span class="attr">&quot;username&quot;</span>: <span class="string">&quot;bobby&quot;</span>, <span class="attr">&quot;time&quot;</span>: <span class="string">&quot;02:34:11&quot;</span>, <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;Hi everyone.&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">event: userdisconnect</span><br><span class="line">data: &#123;<span class="attr">&quot;username&quot;</span>: <span class="string">&quot;bobby&quot;</span>, <span class="attr">&quot;time&quot;</span>: <span class="string">&quot;02:34:23&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">event: usermessage</span><br><span class="line">data: &#123;<span class="attr">&quot;username&quot;</span>: <span class="string">&quot;sean&quot;</span>, <span class="attr">&quot;time&quot;</span>: <span class="string">&quot;02:34:36&quot;</span>, <span class="attr">&quot;text&quot;</span>: <span class="string">&quot;Bye, bobby.&quot;</span>&#125;</span><br></pre></td></tr></table></figure><h5 id="retry-é‡è¿é—´éš”"><a href="#retry-é‡è¿é—´éš”" class="headerlink" title="retry é‡è¿é—´éš”"></a>retry é‡è¿é—´éš”</h5><p>æœåŠ¡å™¨å¯ä»¥ç”¨ <code>retry</code> å­—æ®µï¼ŒæŒ‡å®šæµè§ˆå™¨é‡æ–°å‘èµ·è¿æ¥çš„æ—¶é—´é—´éš”ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">retry: <span class="number">10000</span>\n</span><br></pre></td></tr></table></figure><p>ä¸¤ç§æƒ…å†µä¼šå¯¼è‡´æµè§ˆå™¨é‡æ–°å‘èµ·è¿æ¥ï¼šä¸€ç§æ˜¯æ—¶é—´é—´éš”åˆ°æœŸï¼ŒäºŒæ˜¯ç”±äºç½‘ç»œé”™è¯¯ç­‰åŸå› ï¼Œå¯¼è‡´è¿æ¥å‡ºé”™ã€‚</p><h2 id="iOS-å®ç°"><a href="#iOS-å®ç°" class="headerlink" title="iOS å®ç°"></a>iOS å®ç°</h2><p>ä»ä¸Šé¢çš„å†…å®¹æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œæ—¢ç„¶ EventSource å®¢æˆ·ç«¯ä¸ server å»ºç«‹è¿æ¥æ˜¯åŸºäºæ ‡å‡†çš„ HTTP åè®®ï¼Œé‚£æˆ‘ä»¬æƒ³è¦å®ç°ä¸€å¥—è‡ªå·±çš„ EventSource API ï¼Œåªéœ€è¦æŒ‰è§„åˆ™è§£æ message å³å¯ã€‚</p><p>å¤§è‡´çš„æ€è·¯ï¼š</p><ul><li>ä½¿ç”¨ <code>NSURLSession</code> æ¥å‘èµ·è¯·æ±‚ä»¥åŠå¤„ç†æœåŠ¡å™¨çš„å“åº”ã€‚</li><li>åœ¨ <code>NSURLSession</code>  çš„ä»£ç†æ–¹æ³•ä¸­è§£æå¾—åˆ°çš„æ–‡æœ¬ä¿¡æ¯ï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„ <code>Event</code> å¯¹è±¡æ¥æ”¶ã€‚</li><li>é€šè¿‡å›è°ƒå°† <code>Event</code> ä¼ é€’ç»™è°ƒç”¨è€…ã€‚</li></ul><p>ä»£ç æ˜¯åœ¨ä¸‹é¢è¿™ä»½ä¸Šåšçš„æ”¹åŠ¨ï¼Œæ·»åŠ äº†ä¸€äº›çº¿ç¨‹å®‰å…¨çš„å¤„ç†ï¼Œä»¥åŠ session çš„é‡Šæ”¾ï¼Œä¸ç„¶ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚</p><blockquote><p>å¼•ç”¨çš„OCä»£ç  <a href="https://github.com/neilco/EventSource">Github</a></p></blockquote><p>æ”¹åŠ¨åçš„æºç ï¼š<a href="https://github.com/ATommyGirl/YYEventSource">ATommyGirl/YYEventSource</a></p><h3 id="æ¨¡æ‹Ÿæµ‹è¯•"><a href="#æ¨¡æ‹Ÿæµ‹è¯•" class="headerlink" title="æ¨¡æ‹Ÿæµ‹è¯•"></a>æ¨¡æ‹Ÿæµ‹è¯•</h3><p>å¯åŠ¨æœåŠ¡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node sse-server.js</span><br></pre></td></tr></table></figure><p>ä¼šåœ¨æœ¬æœº <code>http://127.0.0.1:8844/stream</code> å¯åŠ¨ä¸€ä¸ª SSE æœåŠ¡ã€‚</p><p>ä½¿ç”¨æµè§ˆå™¨æˆ–è€… OC ä»£ç è®¿é—®è¿™ä¸ªåœ°å€å°±ä¼šçœ‹åˆ°ä¿¡æ¯è¾“å‡ºäº†ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&quot;EventSource.h&quot;</span></span></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NSString</span> *url = <span class="string">@&quot;http://127.0.0.1:8844/stream&quot;</span>;</span><br><span class="line">EventSource *eventSource = [EventSource eventSourceWithURL:[<span class="built_in">NSURL</span> URLWithString:url]];</span><br><span class="line"></span><br><span class="line">[eventSource onMessage:^(Event *e) &#123;</span><br><span class="line">    <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>, e);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">[eventSource onError:^(Event *event) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;error:%@&quot;</span>, event.error);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><h2 id="å­¦ä¹ èµ„æ–™"><a href="#å­¦ä¹ èµ„æ–™" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h2><p><a href="https://www.ruanyifeng.com/blog/2017/05/server-sent_events.html">é˜®ä¸€å³°</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>UIDocumentInteractionController</title>
      <link href="/2021/02/07/UIDocumentInteractionController/"/>
      <url>/2021/02/07/UIDocumentInteractionController/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><blockquote><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://developer.apple.com/documentation/uikit/uidocumentinteractioncontroller">UIDocumentInteractionController</a></p></blockquote><p>ä¸€ç§è§†å›¾æ§åˆ¶å™¨ï¼Œç”¨äºé¢„è§ˆã€æ‰“å¼€æˆ–æ‰“å°åº”ç”¨ç¨‹åºæ— æ³•ç›´æ¥å¤„ç†çš„æ–‡ä»¶æ ¼å¼çš„æ–‡ä»¶ã€‚åå­—å«æ§åˆ¶å™¨ï¼Œä½†å´æ˜¯ç»§æ‰¿è‡ª  NSObject â€¦â€¦</p><h2 id="iPhone"><a href="#iPhone" class="headerlink" title="iPhone"></a>iPhone</h2><p>åœ¨ iOS ä¸Šç®€å•çš„ä½¿ç”¨å®ƒæ¥æ‰“å¼€æ–‡ä»¶æ˜¯ç±»ä¼¼è¿™æ ·çš„ï¼š</p><span id="more"></span><p>åˆå§‹åŒ–çš„æ—¶å€™ï¼ŒåŸºæœ¬å°±æ˜¯æŒ‡å®šæ–‡ä»¶è·¯å¾„ã€æŒ‡å®šæœ¬åº”ç”¨å†…æ‰“å¼€ï¼Œè¿˜æ˜¯ç›´æ¥å¼¹å‡ºé€‰æ‹©èœå•å¯ä»¥å…¶ä»–åº”ç”¨å†…æ‰“å¼€</p><ul><li>åˆå§‹åŒ–ï¼š</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url <span class="operator">=</span> <span class="type">Bundle</span>.main.url(forResource: <span class="string">&quot;hhh&quot;</span>, withExtension: <span class="string">&quot;docx&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> documentController <span class="operator">=</span> <span class="type">UIDocumentInteractionController</span>.<span class="keyword">init</span>(url: url<span class="operator">!</span>)</span><br></pre></td></tr></table></figure><ul><li>æœ¬åº”ç”¨å†…é¢„è§ˆæ–‡æ¡£</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®ä»£ç† --æœ¬åº”ç”¨å†…é¢„è§ˆå¿…é¡»è¦æ·»åŠ ä»£ç† UIDocumentInteractionControllerDelegate</span></span><br><span class="line">documentController.delegate <span class="operator">=</span> <span class="keyword">self</span></span><br><span class="line"><span class="comment">//å½“å‰APPæ‰“å¼€  éœ€å®ç°åè®®æ–¹æ³•æ‰å¯ä»¥å®Œæˆé¢„è§ˆåŠŸèƒ½</span></span><br><span class="line">documentController.presentPreview(animated: <span class="literal">true</span>)</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">documentInteractionControllerViewControllerForPreview</span>(<span class="keyword">_</span> <span class="params">controller</span>: <span class="type">UIDocumentInteractionController</span>)</span> -&gt; <span class="type">UIViewController</span> &#123;</span><br><span class="line">  <span class="comment">//è¿™é‡Œéœ€è¦è¿”å›ç»™ä¸€ä¸ªæ§åˆ¶å™¨ç”¨äºå±•ç° documentController åœ¨å…¶ä¸Šé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±è¿”å›å½“å‰æ§åˆ¶å™¨self</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªæ–‡æ¡£çš„æ—¶å€™å°±æ˜¯å·¦è¾¹è¿™æ ·çš„æ•ˆæœï¼Œç›´æ¥é¢„è§ˆæ–‡æ¡£ã€‚å³ä¸Šè§’çš„åˆ†äº«æŒ‰é’®ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»– App æ‰“å¼€æ–‡æ¡£ï¼š</p><center>    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/28.png" class width="300"></div>    <div style="display:inline-block;margin-left:10px;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/29.png" class width="300"></div></center><ul><li>å…¶ä»–åº”ç”¨å†…é¢„è§ˆæ–‡æ¡£</li></ul><p>ç½‘ä¸Šå¾ˆå¤šéƒ½æ˜¯è¯´ï¼ŒåŠ ä¸Šæ‰“å¼€ Menu èœå•(è§å³å›¾)çš„ä¸€å¥ä»£ç å°±å¯ä»¥ç”¨ç¬¬ä¸‰æ–¹åº”ç”¨æ‰“å¼€ï¼Œä¾‹å¦‚:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url <span class="operator">=</span> <span class="type">Bundle</span>.main.url(forResource: <span class="string">&quot;hhh&quot;</span>, withExtension: <span class="string">&quot;docx&quot;</span>)</span><br><span class="line"><span class="keyword">let</span> documentController <span class="operator">=</span> <span class="type">UIDocumentInteractionController</span>.<span class="keyword">init</span>(url: url<span class="operator">!</span>)</span><br><span class="line">documentController.delegate <span class="operator">=</span> <span class="keyword">self</span></span><br><span class="line">documentController.presentOptionsMenu(from: <span class="keyword">self</span>.view.frame, in: <span class="keyword">self</span>.view, animated: <span class="literal">true</span>)</span><br></pre></td></tr></table></figure><p>åªè¿™æ ·å†™ä½ ä¼šå‘ç°ï¼Œèœå•ç¡®å®å¯ä»¥å¼¹å‡ºï¼Œä½†ä½ ç‚¹åˆ†äº«åˆ°ä»»ä½•ä¸€ä¸ª App ï¼ˆåŒ…æ‹¬ Quick Lookï¼‰éƒ½æ˜¯æ²¡ååº”çš„ï¼Œè€Œä¸”åœ¨ console ä¸­ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Could not instantiate <span class="keyword">class</span> <span class="built_in">NSURL</span>. Error: Error Domain=<span class="built_in">NSCocoaErrorDomain</span> Code=<span class="number">4864</span> <span class="string">&quot;The URL archive of type â€œpublic.urlâ€ contains invalid data.&quot;</span> UserInfo=&#123;<span class="built_in">NSDebugDescription</span>=The URL archive of type â€œpublic.urlâ€ contains invalid data.&#125;</span><br></pre></td></tr></table></figure><p>â€¦â€¦</p><p>ç½‘ä¸Šçš„èµ„æ–™ç»™çš„è§£å†³åŠæ³•æ˜¯ documentController è¿™ä¸ªå˜é‡éœ€è¦è¢«æŒæœ‰ä¸€ä¸‹ï¼Œæ‰å¯ä»¥ç”¨ç¬¬ä¸‰æ–¹ App æ‰“å¼€æ–‡æ¡£ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å°±å˜æˆäº†è¿™æ ·ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewController</span>: <span class="title">UIViewController</span>, <span class="title">UIDocumentInteractionControllerDelegate</span>  </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> documentController <span class="operator">=</span> <span class="type">UIDocumentInteractionController</span>()</span><br><span class="line">  <span class="comment">//...</span></span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">showDocInteractController</span>()</span> -&gt; <span class="type">Void</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> url <span class="operator">=</span> <span class="type">Bundle</span>.main.url(forResource: <span class="string">&quot;hhh&quot;</span>, withExtension: <span class="string">&quot;docx&quot;</span>)</span><br><span class="line">    documentController.url <span class="operator">=</span> url</span><br><span class="line">    documentController.delegate <span class="operator">=</span> <span class="keyword">self</span></span><br><span class="line">    documentController.presentOptionsMenu(from: <span class="keyword">self</span>.view.frame, in: <span class="keyword">self</span>.view, animated: <span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŒæœ‰ä¸€ä¸‹å°±å¯ä»¥ï¼Œå’©~~~</p><p>PS : è®¾ç½® <code>presentOptionsMenuFromRect</code> çš„è¯ï¼Œæˆ‘ä»¬ç»™çš„æ˜¯ å…¨å±ï¼Œé‚£ç»™ä¸€åŠå„¿çš„å¤§å°è¿™ä¸ªé€‰æ‹©èœå•ä¼šæ€ä¹ˆå¼¹å‘¢ï¼Œæ„Ÿå…´è¶£è‡ªå·±è¯•ä¸€ä¸‹ğŸ¤“â€¦â€¦</p><p>è¿™äº›ä¸æ˜¯é‡ç‚¹ï¼Œé‡ç‚¹æ˜¯åœ¨ iPad ä¸Šï¼Œèœå•çš„å¼¹å‡ºä¼šæœ‰äº›ä¸ä¸€æ ·çš„ç°è±¡</p><h2 id="iPad"><a href="#iPad" class="headerlink" title="iPad"></a>iPad</h2><p>ä¸Šé¢åŒæ ·å…¶ä»–åº”ç”¨å†…é¢„è§ˆæ–‡æ¡£çš„ä»£ç ï¼Œæµ‹è¯•å‘ç°ç‚¹å‡»æ–‡æ¡£ä»¥åï¼Œæ²¡æœ‰å¼¹å‡ºé€‰æ‹©èœå•ï¼Œå½“ç„¶æ–‡æ¡£ä¹Ÿæ²¡æœ‰æ‰“å¼€ã€‚console ä¸­æŠ¥æ³¨å…¥å¸ƒå±€å¼‚å¸¸çš„é”™è¯¯ï¼š</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2021</span>-<span class="number">02</span>-<span class="number">26</span> <span class="number">14</span>:<span class="number">43</span>:<span class="number">02</span><span class="variable">.326794</span>+<span class="number">0800</span> UIDocumentInteraction[<span class="number">13039</span>:<span class="number">85917</span>] [LayoutConstraints] Unable to simultaneously satisfy constraints.</span><br><span class="line">Probably at least one of the constraints in the following list is one you don&#x27;t want. </span><br><span class="line">Try <span class="keyword">this</span>: </span><br><span class="line">(<span class="number">1</span>) look at each <span class="keyword">constraint</span> <span class="keyword">and</span> try to figure out which you don&#x27;t <span class="keyword">expect</span>; </span><br><span class="line">(<span class="number">2</span>) find the code that added the unwanted <span class="keyword">constraint</span> <span class="keyword">or</span> constraints <span class="keyword">and</span> fix it. </span><br><span class="line">(</span><br><span class="line">    <span class="string">&quot;&lt;NSLayoutConstraint:0x600001912da0 H:|-(0)-[_UIActivityContentTitleView:0x7fa2ccc33b10]   (active, names: &#x27;|&#x27;:_UINavigationBarContentView:0x7fa2ccc26a40 )&gt;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;&lt;NSLayoutConstraint:0x600001912e40 _UIActivityContentTitleView:0x7fa2ccc33b10.trailing == _UINavigationBarContentView:0x7fa2ccc26a40.trailing   (active)&gt;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;&lt;NSLayoutConstraint:0x6000019130c0 LPLinkView:0x7fa2ccc33f30.leading == UILayoutGuide:0x600000322680&#x27;UIViewLayoutMarginsGuide&#x27;.leading   (active)&gt;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;&lt;NSLayoutConstraint:0x600001912f30 H:[LPLinkView:0x7fa2ccc33f30]-(27)-|   (active, names: &#x27;|&#x27;:_UIActivityContentTitleView:0x7fa2ccc33b10 )&gt;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;&lt;NSLayoutConstraint:0x600001919d10 &#x27;UIView-Encapsulated-Layout-Width&#x27; _UINavigationBarContentView:0x7fa2ccc26a40.width == 0   (active)&gt;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;&lt;NSLayoutConstraint:0x600001912fd0 &#x27;UIView-leftMargin-guide-constraint&#x27; H:|-(16)-[UILayoutGuide:0x600000322680&#x27;UIViewLayoutMarginsGuide&#x27;](LTR)   (active, names: &#x27;|&#x27;:_UIActivityContentTitleView:0x7fa2ccc33b10 )&gt;&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">Will attempt to recover by breaking <span class="keyword">constraint</span> </span><br><span class="line">&lt;NSLayoutConstraint:<span class="number">0</span>x6000019130c0 LPLinkView:<span class="number">0</span>x7fa2ccc33f30<span class="variable">.leading</span> == UILayoutGuide:<span class="number">0</span>x600000322680&#x27;UIViewLayoutMarginsGuide&#x27;<span class="variable">.leading</span>   (active)&gt;</span><br><span class="line"></span><br><span class="line">Make a symbolic breakpoint at UIViewAlertForUnsatisfiableConstraints to catch <span class="keyword">this</span> in the debugger.</span><br><span class="line">The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in &lt;UIKitCore/UIView<span class="variable">.h</span>&gt; may also be helpful.</span><br><span class="line"><span class="number">2021</span>-<span class="number">02</span>-<span class="number">26</span> <span class="number">14</span>:<span class="number">43</span>:<span class="number">02</span><span class="variable">.327098</span>+<span class="number">0800</span> UIDocumentInteraction[<span class="number">13039</span>:<span class="number">87855</span>] [Fetching] LPFileMetadataProviderSpecialization failed to retrieve a thumbnail from QuickLookThumbnailing (Error Domain=QLThumbnailErrorDomain Code=<span class="number">0</span> <span class="string">&quot;Could not generate a thumbnail&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å…ˆçœ‹ä¸‹ Safari ä¸­çš„ Menu æ˜¯ä»€ä¹ˆæ ·å­:</p><center>    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/26.png" class width="600"></div></center><center>    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/27.png" class width="500"></div></center><p>å’¦ï¼Œæ— è®ºæ¨ªç«–å±ï¼ŒMenu ä¸å†æ˜¯ä»¥å±å¹•å®½åº¦æˆ–è€…é«˜åº¦æ¥å¤„ç†çš„äº†ï¼Œè€Œä¸”å¤´ä¸Šå¤šäº†ä¸€ç‚¹ â€œå°å°–å°–~â€ã€‚æ‰€ä»¥çŒœæµ‹æˆ‘ä»¬éœ€è¦ç»™å®šå®ƒä¸€ä¸ªå¼¹å‡ºç‚¹ã€‚ä½† API è²Œä¼¼åˆæ²¡æœ‰å¯¹åº”çš„æ¥å£ã€‚</p><p>å‚è€ƒäº†å®˜æ–¹ä¸€ä¸ª issue è®¨è®ºï¼Œemmmmmmï¼Œå…¶å®æˆ‘ä¹Ÿæ²¡å¤ªçœ‹æ‡‚å•¥æ„æ€ ğŸ˜‚ï¼Œæ€»ä¹‹~~</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> frame <span class="operator">=</span> <span class="type">CGRect</span>.<span class="keyword">init</span>(x: <span class="keyword">self</span>.view.frame.midX, y: <span class="keyword">self</span>.view.frame.midY, width: <span class="number">0</span>, height: <span class="keyword">self</span>.view.frame.height <span class="operator">*</span> <span class="number">0.5</span>)</span><br><span class="line">documentController.presentOptionsMenu(from: frame, in: <span class="keyword">self</span>.view, animated: <span class="literal">true</span>)</span><br></pre></td></tr></table></figure><p>è¿™å¥ä»£ç ä¸­çš„ frame ä¸ç»™å…¨å±å°±å¯ä»¥æ­£å¸¸å¼¹å‡ºï¼Œå°å°–å°–çš„ä½ç½®è‡ªå·±æœ‰å…´è¶£å¯ä»¥è°ƒä¸€è°ƒç©ä¸€ç©å„¿~~</p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOS åŠ¨æ€ä¿®æ”¹çŠ¶æ€æ é£æ ¼</title>
      <link href="/2021/01/20/iOS%20%E5%8A%A8%E6%80%81%E4%BF%AE%E6%94%B9%E7%8A%B6%E6%80%81%E6%A0%8F%E9%A3%8E%E6%A0%BC/"/>
      <url>/2021/01/20/iOS%20%E5%8A%A8%E6%80%81%E4%BF%AE%E6%94%B9%E7%8A%B6%E6%80%81%E6%A0%8F%E9%A3%8E%E6%A0%BC/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>App ä¸­ç»å¸¸éœ€è¦æ ¹æ®é¡µé¢çš„é£æ ¼æ”¹å˜ç”µæ± æ æ–‡å­—çš„é¢œè‰²ï¼Œè®°å½•ä¸€ä¸‹éƒ½æ˜¯å¦‚ä½•è°ƒæ•´çš„ã€‚</p><ul><li> UIStatusBarStyle çš„æ ·å¼</li><li>æ”¹å˜çŠ¶æ€æ æ–‡å­—é¢œè‰²çš„æ–¹å¼</li><li>çŠ¶æ€æ çš„æ˜¾ç¤ºå’Œéšè—</li></ul><span id="more"></span><h2 id="UIStatusBarStyle-çš„æ ·å¼"><a href="#UIStatusBarStyle-çš„æ ·å¼" class="headerlink" title="UIStatusBarStyle çš„æ ·å¼"></a>UIStatusBarStyle çš„æ ·å¼</h2><p>iOS 13.0 ä¸­æ–°å¢äº†æš—é»‘æ¨¡å¼ï¼Œå¯¹åº”çš„çŠ¶æ€æ é£æ ¼ä¹Ÿå¢åŠ äº†ä¸€ä¸ª <code>darkContent</code>ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">UIStatusBarStyle</span> : <span class="title">Int</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">case</span> <span class="keyword">default</span> <span class="operator">=</span> <span class="number">0</span> <span class="comment">// Automatically chooses light or dark content based on the user interface style</span></span><br><span class="line">    <span class="keyword">@available</span>(<span class="keyword">iOS</span> <span class="number">7.0</span>, <span class="operator">*</span>)</span><br><span class="line">    <span class="keyword">case</span> lightContent <span class="operator">=</span> <span class="number">1</span> <span class="comment">// Light content, for use on dark backgrounds</span></span><br><span class="line">    <span class="keyword">@available</span>(<span class="keyword">iOS</span> <span class="number">13.0</span>, <span class="operator">*</span>)</span><br><span class="line">    <span class="keyword">case</span> darkContent <span class="operator">=</span> <span class="number">3</span> <span class="comment">// Dark content, for use on light backgrounds</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ”¹å˜çŠ¶æ€æ æ–‡å­—çš„é¢œè‰²"><a href="#æ”¹å˜çŠ¶æ€æ æ–‡å­—çš„é¢œè‰²" class="headerlink" title="æ”¹å˜çŠ¶æ€æ æ–‡å­—çš„é¢œè‰²"></a>æ”¹å˜çŠ¶æ€æ æ–‡å­—çš„é¢œè‰²</h2><p>æ˜¯å¦å¯ä»¥åœ¨ä¸åŒé¡µé¢è®¾ç½®ä¸åŒçš„é£æ ¼ï¼Œé¦–å…ˆè¦é…ç½®å¥½ <code>Info.plist</code> ä¸­çš„ </p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">View</span> controller<span class="operator">-</span>based status bar appearance</span><br></pre></td></tr></table></figure><p>å±æ€§ï¼Œé»˜è®¤ä¸º <code>YES</code>ã€‚</p><ul><li>å¦‚æœæ•´ä¸ªåº”ç”¨åªéœ€è¦ä½¿ç”¨å›ºå®šçš„é£æ ¼ï¼Œä¸Šè¿°å±æ€§æ”¹ä¸º <code>NO</code>ã€‚åœ¨åº”ç”¨é…ç½®æˆ–è€…ä»£ç ä¸­è®¾å®šå¥½é£æ ¼å³å¯ã€‚</li><li>å¦‚æœçŠ¶æ€æ é¢œè‰²éœ€è¦è§†é¡µé¢è€Œå®šï¼Œä¸Šè¿°å±æ€§æ”¹ä¸º <code>YES</code>ï¼Œå¹¶ä¸”é‡å†™æ§åˆ¶å™¨çš„ <code>preferredStatusBarStyle</code> æ–¹æ³•ã€‚</li></ul><p>å¯¹äºéœ€è¦è°ƒæ•´ <code>ViewController</code> é£æ ¼çš„é¡µé¢ï¼Œæˆ‘ä»¬é‡å†™å®ƒçš„ getterï¼Œè¿™æ˜¯ä¸€ä¸ª åªè¯» çš„å±æ€§ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="keyword">var</span> preferredStatusBarStyle: <span class="type">UIStatusBarStyle</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="type">UIStatusBarStyle</span>.lightContent</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“ç„¶å¦‚æœå¯¼èˆªæ§åˆ¶å™¨é‡å†™äº†è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒçš„å­æ§åˆ¶å™¨éƒ½ä¼šä»¥ å¯¼èˆªæ§åˆ¶å™¨ çš„ä¸ºå‡†ã€‚å¦‚æœå­æ§åˆ¶å™¨ä¸­æœ‰éœ€è¦æ”¹å˜é£æ ¼çš„ï¼ŒåŒæ ·ä¹Ÿéœ€è¦è‡ªå·±å®ç°è¿™ä¸ªæ–¹æ³•ã€‚</p><h2 id="çŠ¶æ€æ çš„æ˜¾ç¤ºå’Œéšè—"><a href="#çŠ¶æ€æ çš„æ˜¾ç¤ºå’Œéšè—" class="headerlink" title="çŠ¶æ€æ çš„æ˜¾ç¤ºå’Œéšè—"></a>çŠ¶æ€æ çš„æ˜¾ç¤ºå’Œéšè—</h2><ul><li>å…¨å±€éšè—çš„è¯ï¼Œå¾ˆç®€å•ï¼Œç›´æ¥æ”¹é…ç½®ã€‚</li><li>éƒ¨åˆ†é¡µé¢éšè—ï¼ŒåŒä¸Šï¼Œé‡å†™~~</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="keyword">var</span> prefersStatusBarHidden: <span class="type">Bool</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»¿è±†å„¿æ²¡äº†</title>
      <link href="/2021/01/11/%E7%BB%BF%E8%B1%86%E5%84%BF%E6%B2%A1%E4%BA%86/"/>
      <url>/2021/01/11/%E7%BB%BF%E8%B1%86%E5%84%BF%E6%B2%A1%E4%BA%86/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><center>  <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/%E8%B1%86%E5%84%BF.jpg" class width="500"></div></center><p>æˆ‘çš„ç»¿è±†å„¿æ­»äº†ã€‚</p><p>æ˜¨å¤©æ™šä¸Š11ç‚¹å¤šï¼Œæ‰æƒ³èµ·æ¥çœ‹çœ‹ç»¿è±†å„¿å†¬çœ çš„æ€ä¹ˆæ ·ï¼Œç»“æœæ‹¿èµ·æ¥ä¸€çœ‹â€¦â€¦é‚£ä¸ªç”»é¢æ„Ÿè§‰è¿™è¾ˆå­å¿˜ä¸äº†â€¦â€¦</p><p>ç»ˆç©¶æ˜¯æˆ‘æ²¡ç…§é¡¾å¥½å¥¹ã€‚å¸Œæœ›å¥¹å»äº†å¥¹æƒ³å»çš„åœ°æ–¹ã€‚</p><p>è¾›è‹¦èåœå›æŠŠå¥¹å’Œå°ç™½åŸ‹åœ¨ä¸€èµ·äº†ã€‚ğŸ˜”ğŸ˜­</p>]]></content>
      
      
      
        <tags>
            
            <tag> æˆ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Inferred (Constraints) å’Œ Autoresizing Mask</title>
      <link href="/2021/01/07/Inferred-Constraints-%E5%92%8C-Autoresizing-Mask/"/>
      <url>/2021/01/07/Inferred-Constraints-%E5%92%8C-Autoresizing-Mask/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å¾ˆä¹…æ²¡æœ‰å†™è¿‡UIäº†ï¼Œå‰ä¸€é˜µæ›´æ–°å®Œ Xcode 12.2 å’Œ iOS 14.* åï¼Œè€é¡¹ç›®å’Œæ–°é¡¹ç›®éƒ½éœ€è¦è°ƒæ•´ç‚¹é¡µé¢å¸ƒå±€çš„é—®é¢˜ã€‚åœ¨ Copy æˆ–è€… æ–°å»º View åï¼Œåˆ‡æ¢ä½¿ç”¨çš„è®¾å¤‡æ—¶å¸ƒå±€æ²¡æœ‰è‡ªé€‚åº”ã€‚ä»¥ä¸ºçº¦æŸæ²¡åŠ ä¸Šï¼Œä½†å½“æˆ‘è¦å»åŠ çº¦æŸçš„æ—¶å€™ï¼Œå‘ç°å·²ç»æ— æ³•æ“ä½œäº†ï¼Ÿï¼ï¼ï¼</p><h5 id="ä¹Œé¾™"><a href="#ä¹Œé¾™" class="headerlink" title="ä¹Œé¾™"></a>ä¹Œé¾™</h5><p>å¯ç”¨ä¸ä¸å¯ç”¨ï¼š</p><p>â€‹        <span id="more"></span></p><center>    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/18.png" class width="300"></div>    <div style="display:inline-block;margin-left:10px;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/19.png" class width="300"></div></center><p>å“æ­»æˆ‘äº†ï¼ŒCV å¤§æ³•å±…ç„¶éƒ½ä¸å¥½ä½¿äº†ï¼Ÿï¼ï¼ï¼ï¼ï¼</p><p>å¯¹æ¯”äº†ä¸€ä¸‹ä¸¤ä¸ª View çš„è®¾ç½®ä»¥åï¼Œå‘ç°æ˜¯ Layout é€‰é¡¹ä¸åŒçš„åŸå› ï¼Œ<code>Inferred (Constraints)</code> å’Œ <code>Autoresizing Mask</code> ã€‚</p><center>    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/20.png" class width="300"></div>    <div style="display:inline-block;margin-left:10px;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/21.png" class width="300"></div></center><p>æ–°é¡µé¢è‡ªåŠ¨ä½¿ç”¨ <code>Autoresizing Mask</code> ï¼Œä¸æ¸…æ¥šæ˜¯ä¸æ˜¯ Xcode 12.* çš„bugï¼Œæˆ‘è®°å¾— <code>Autoresizing Mask</code>  æ—©äº›æ—¶å€™å°±ä¸æ€ä¹ˆç”¨äº†ï¼Œå±…ç„¶åˆå‡ºæ¥äº†ï¼Œè¿˜æ˜¯å¾ˆæœ‰æ„æ€çš„ã€‚</p><h5 id="PS-æœ‰å…´è¶£å¯ä»¥çœ‹çœ‹è¿™ä¸¤ä¸ªè®¨è®º"><a href="#PS-æœ‰å…´è¶£å¯ä»¥çœ‹çœ‹è¿™ä¸¤ä¸ªè®¨è®º" class="headerlink" title="PS: æœ‰å…´è¶£å¯ä»¥çœ‹çœ‹è¿™ä¸¤ä¸ªè®¨è®º"></a>PS: æœ‰å…´è¶£å¯ä»¥çœ‹çœ‹è¿™ä¸¤ä¸ªè®¨è®º</h5><p><a href="https://developer.apple.com/forums/thread/669586">Constraint Layout No Longer Available</a></p><p><a href="https://dev.classmethod.jp/articles/new-auto-layout-feature/">[iOS 10] Auto Layout ã®æ–°æ©Ÿèƒ½ã«ã¤ã„ã¦</a></p><h5 id="PPS-Hexo-é‡Œå›¾ç‰‡å¹¶æ’åŸæ¥å¯ä»¥è¿™æ ·å†™â€¦â€¦"><a href="#PPS-Hexo-é‡Œå›¾ç‰‡å¹¶æ’åŸæ¥å¯ä»¥è¿™æ ·å†™â€¦â€¦" class="headerlink" title="PPS:  Hexo é‡Œå›¾ç‰‡å¹¶æ’åŸæ¥å¯ä»¥è¿™æ ·å†™â€¦â€¦"></a>PPS:  Hexo é‡Œå›¾ç‰‡å¹¶æ’åŸæ¥å¯ä»¥è¿™æ ·å†™â€¦â€¦</h5><p><a href="https://blog.ahao.moe/posts/Hexo_multiple_images_side_by_side.html">å‚è€ƒè‡ª</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display:inline-block;&quot;</span>&gt;</span>&#123;%img /img/1.png 300%&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display:inline-block;margin-left:10px;&quot;</span>&gt;</span>&#123;%img /img/2.png 300%&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iTerm 2 åˆ†å±åˆ‡æ¢</title>
      <link href="/2020/12/14/iTerm%202%20%E5%88%86%E5%B1%8F/"/>
      <url>/2020/12/14/iTerm%202%20%E5%88%86%E5%B1%8F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul><li><code>âŒ˜ + d</code>:  å‚ç›´åˆ†å±</li><li><code>âŒ˜ + shift + d</code>:  æ°´å¹³åˆ†å±</li><li><code>âŒ˜ + ]</code>å’Œ<code>âŒ˜ + [</code> ï¼šåœ¨æœ€è¿‘ä½¿ç”¨çš„åˆ†å±ç›´æ¥åˆ‡æ¢</li><li><code>âŒ˜ + opt + æ–¹å‘é”®</code>ï¼šåˆ‡æ¢åˆ°æŒ‡å®šä½ç½®çš„åˆ†å±</li><li><code>âŒ˜ + æ•°å­—</code>ï¼šåˆ‡æ¢æ ‡ç­¾é¡µ</li><li><code>âŒ˜ + æ–¹å‘é”®</code> ï¼šæŒ‰æ–¹å‘åˆ‡æ¢æ ‡ç­¾é¡µ</li><li><code>shift + âŒ˜ + s</code>ï¼šä¿å­˜å½“å‰çª—å£å¿«ç…§</li><li><code>âŒ˜ + opt + b</code>ï¼šå¿«ç…§å›æ”¾ï¼Œå¾ˆæœ‰æ„æ€çš„åŠŸèƒ½ï¼Œä½ å¯ä»¥å¯¹ä½ çš„æ“ä½œæ ¹æ®æ—¶é—´è½´è¿›è¡Œå›æ”¾ã€‚å¯ä»¥æ‹–åŠ¨ä¸‹æ–¹çš„æ—¶é—´è½´ï¼Œä¹Ÿå¯ä»¥æŒ‰å·¦å³æ–¹å‘é”®ã€‚</li></ul><p>PS: å¦‚æœå‘ç°å¿«æ·é”®æ²¡èµ·ä½œç”¨ï¼Œå¯ä»¥çœ‹çœ‹æ˜¯ä¸æ˜¯å’Œç³»ç»Ÿæˆ–è€…å…¶ä»–è½¯ä»¶çš„å¿«æ·é”®å†²çªäº†â€¦â€¦</p>]]></content>
      
      
      
        <tags>
            
            <tag> Mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”± Pod å¯¼è‡´çš„ File not found</title>
      <link href="/2020/09/04/%E7%94%B1Pod%E5%AF%BC%E8%87%B4%E7%9A%84FileNotFound/"/>
      <url>/2020/09/04/%E7%94%B1Pod%E5%AF%BC%E8%87%B4%E7%9A%84FileNotFound/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä»Šå¤©å¯¹ä¸€ä¸ª Pod åº“åšäº†å°ç‰ˆæœ¬çš„å‡çº§ï¼Œç„¶ååˆå›é€€åˆ°åŸæ¥çš„ç‰ˆæœ¬ï¼ŒCocoaPods å°±ä¸ä¹æ„äº†ï¼Œ ä¸€ç›´æŠ¥ <code>#import &lt;Masonry/Masonry.h&gt; file not found</code> ç±»ä¼¼çš„é”™è¯¯ï¼Œæ‰€æœ‰çš„ Pod åº“éƒ½è¿™æ ·ï¼Œç€å®è®©äººå¤´å¤§ã€‚</p><span id="more"></span><p>è§£å†³æ–¹æ³•ï¼š<br> ç‚¹å‡» <code>YourProject -&gt; Project -&gt; é€‰ä¸­ YourProject -&gt; Info -&gt; Configurations -&gt;</code> æŠŠå¯¹åº”çš„ <code>Debug</code> å’Œ <code>Release</code> é‡Œçš„å‚æ•°è®¾ä¸º <code>Pods-xxxxxx.Debug / Pods-xxxxxx.Release</code>ï¼ˆè¿™äº›å‚æ•°åœ¨æœªè®¾ç½®å‰åº”è¯¥æ˜¯ Noneï¼Œå¯èƒ½ CocoaPods åœ¨å®‰è£…ç¬¬ä¸‰æ–¹åº“æ—¶æ²¡æ­£ç¡®è®¾ç½®è¿™ä¸ªå‚æ•°ï¼‰ã€‚<br> é‡æ–°ç¼–è¯‘å·¥ç¨‹ï¼Œåº”è¯¥èƒ½æˆåŠŸäº†ã€‚</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/11.png"></p><h6 id><a href="#" class="headerlink" title></a></h6>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> Xcode </tag>
            
            <tag> pod </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DeviceCheck</title>
      <link href="/2020/06/05/DeviceCheck/"/>
      <url>/2020/06/05/DeviceCheck/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/14.png"></p><p>æœ€è¿‘æ‰æ³¨æ„ iOS 11.0 ä¸­ä¸€ä¸ªæ–°å¢çš„å°æ¡†æ¶ï¼Œäºæ˜¯ç®€å•å­¦ä¹ äº†ä¸€ä¸‹ï¼Œå·²ç»æœ‰å‰è¾ˆå†™çš„å¾ˆè¯¦ç»†äº†ï¼Œæ‰€ä»¥~~<a href="https://www.sunyazhou.com/2017/09/30/20170930DeviceCheck/">å‚è€ƒè‡ª</a></p><span id="more"></span><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>iOS11 è‹¹æœæ”¹åŠ¨äº†ä¸€ä¸ªæ¯”è¾ƒå¼•å¼€å‘è€…å…³æ³¨çš„äº®ç‚¹</p><p><strong>UDIDä¹‹ç±»çš„å†™åˆ°ç³»ç»Ÿ keychain çš„å”¯ä¸€æ ‡è¯†ä¼šéšç€ app åˆ é™¤è€Œåˆ é™¤</strong></p><p>è¿™ä¸ªé—®é¢˜åœ¨å¾®åšä¸Šå·²ç»äº‰è®ºå¥½å‡ å¤©ï¼šiOS11æ–°çš„è®¾å¤‡å”¯ä¸€æ ‡è¯† DCDevice</p><h2 id="ä»‹ç»-API"><a href="#ä»‹ç»-API" class="headerlink" title="ä»‹ç» API"></a>ä»‹ç» API</h2><p>æˆ‘ä»¬é¦–å…ˆçœ‹çœ‹<code>DCDevice</code>ç±»éƒ½æœ‰å•¥</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;DeviceCheck/DeviceCheck.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NS_ASSUME_NONNULL_BEGIN</span></span><br><span class="line"></span><br><span class="line">API_AVAILABLE(ios(<span class="number">11.0</span>), tvos(<span class="number">11.0</span>)) API_UNAVAILABLE(watchos, macos)</span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">DCDevice</span> : <span class="title">NSObject</span></span></span><br><span class="line"><span class="comment">// The current device. </span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">class</span>, <span class="keyword">readonly</span>) DCDevice *currentDevice;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Check if this API is supported on the current device.</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">getter</span>=isSupported, <span class="keyword">readonly</span>) <span class="built_in">BOOL</span> supported;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Generate a new device token that can be used to get/set the persistent bits for this device.This call generates a new value every time.</span></span><br><span class="line">- (<span class="keyword">void</span>)generateTokenWithCompletionHandler:(<span class="keyword">void</span>(^)(<span class="built_in">NSData</span> * _Nullable token, <span class="built_in">NSError</span> * _Nullable error))completion;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">NS_ASSUME_NONNULL_END</span></span><br></pre></td></tr></table></figure><p>æ¥å£ç®€ç›´ä¸èƒ½å†ç®€å•äº† <strong>åˆ›å»ºå®ä¾‹è°ƒæ–¹æ³•</strong></p><h2 id="ä½¿ç”¨-API"><a href="#ä½¿ç”¨-API" class="headerlink" title="ä½¿ç”¨ API"></a>ä½¿ç”¨ API</h2><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•ä½¿ç”¨<code>DCDevice</code></p><p>å¯¼å…¥å¤´æ–‡ä»¶</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">&lt;DeviceCheck/DeviceCheck.h&gt;</span></span></span><br></pre></td></tr></table></figure><p>check æ˜¯å¦æ”¯æŒ å¦‚æœæ”¯æŒ çš„è¯ä¼šåœ¨å›è°ƒä»¥åè¿”å› <code>token</code>(NSData)</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="comment">// Do any additional setup after loading the view.</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ([DCDevice.currentDevice isSupported]) &#123;</span><br><span class="line">        [DCDevice.currentDevice generateTokenWithCompletionHandler:^(<span class="built_in">NSData</span> * _Nullable token, <span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">            <span class="keyword">if</span> (error) &#123;</span><br><span class="line">                <span class="built_in">NSLog</span>(<span class="string">@&quot;%@&quot;</span>, error.description);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// upload token to APP server</span></span><br><span class="line">                <span class="built_in">NSString</span> *deviceToken = [token base64EncodedStringWithOptions:<span class="built_in">NSDataBase64EncodingEndLineWithLineFeed</span>];</span><br><span class="line">                <span class="built_in">NSLog</span>(<span class="string">@&quot;%lu %@&quot;</span>, token.length, deviceToken);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>token æ˜¯ä¸ª 2188å­—èŠ‚(2k å¤šç‚¹)çš„äºŒè¿›åˆ¶æµ,å¾ˆå°</p><h2 id="åˆ é™¤-é‡è£…App-å¦‚ä½•å¤„ç†"><a href="#åˆ é™¤-é‡è£…App-å¦‚ä½•å¤„ç†" class="headerlink" title="åˆ é™¤/é‡è£…App å¦‚ä½•å¤„ç†"></a>åˆ é™¤/é‡è£…App å¦‚ä½•å¤„ç†</h2><blockquote><p>DeviceCheck å…è®¸ä½ é€šè¿‡ä½ çš„æœåŠ¡å™¨ä¸ Apple æœåŠ¡å™¨é€šè®¯ï¼Œå¹¶ä¸ºå•ä¸ªè®¾å¤‡è®¾ç½®2kå·¦å³ çš„æ•°æ®ã€‚ åœ¨è®¾å¤‡ä¸Šç”¨ DeviceCheck API ç”Ÿæˆä¸€ä¸ª 2å­—èŠ‚çš„ token (00, 01,10,11)ï¼Œç„¶åå°†è¿™ä¸ª token å‘ç»™è‡ªå·±çš„æœåŠ¡å™¨ï¼Œå†ç”±è‡ªå·±çš„æœåŠ¡å™¨ä¸ Apple çš„ API è¿›è¡Œé€šè®¯ï¼Œæ¥æ›´æ–°æˆ–è€…æŸ¥è¯¢è¯¥è®¾å¤‡çš„å€¼ã€‚è¿™ä¸¤å­—èŠ‚ çš„æ•°æ®ç”¨æ¥è¿½è¸ªç”¨æˆ·ã€‚æ¯”å¦‚ã€‚å€ŸåŠ©ä¸¤ä¸ªè‡ªå·±çš„æ•°æ®ï¼Œä½ å¯ä»¥å¾—çŸ¥ç”¨æˆ·ç©¶ç«Ÿä½¿ç”¨äº†è¯¥ App å¤šä¹…ã€‚ è¯¥ API å¯ä»¥æˆä¸ºï¼šåæ¬ºè¯ˆé¢†åŸŸï¼š è¯•ç”¨7å¤© Uberã€æ»´æ»´å¸æœºè¢«å°å·åï¼Œé˜²æ­¢é‡æ–°æ³¨å†Œè´¦å·æ¥å• è¯¥ç”¨æˆ·æ˜¯å¦å·²ç»é¢†å–è¿‡é¦–æ¬¡æ³¨å†Œçº¢åŒ… APPé˜²å¤šå¼€ å› ä¸ºä¼ è¾“çš„æ˜¯ flag çº§åˆ«çš„æ•°æ®ï¼Œå¹¶ä¸ä¼šå®šä½åˆ°è¯¥è®¾å¤‡çš„ä½¿ç”¨è€…ï¼Œæ‰€ä»¥ç›¸å¯¹å®‰å…¨ã€‚</p></blockquote><blockquote><p>ä½†æ˜¯å¯¹äºè´­ä¹°äº†äºŒæ‰‹æ‰‹æœºçš„ä½¿ç”¨åœºæ™¯ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€äº›è¾¹ç•Œæƒ…å†µï¼Œè¿™ä¸ªåœ¨ä¸šåŠ¡ä¸­ä¹Ÿéœ€è¦è€ƒè™‘è¿›å»ã€‚</p></blockquote><p>å¼•è‡ª<a href="https://github.com/ChenYilong/iOS11AdaptationTips/issues/22">iOS11å¼€å‘æ–°ç‰¹æ€§ä¹‹å®ç”¨å°tips</a></p><p>é¦–å…ˆè¦æ˜ç™½æˆ‘ä»¬ çš„ token éœ€è¦å‘ç»™è°</p><ol><li>token éœ€è¦å‘é€ç»™æˆ‘ä»¬è‡ªå·±å…¬å¸çš„<code>server</code>åšè®°å½•</li><li>æˆ‘ä»¬å…¬å¸è‡ªå·±çš„<code>server</code>å»<code>Apple</code>çš„<code>server</code>æŸ¥è¯¢<code>token</code>æ˜¯å¦æœ‰æ•ˆ,ä»è€Œæ¥æ›´æ–°æˆ–è€…æŸ¥è¯¢è¯¥è®¾å¤‡å€¼.</li><li>è¿™<code>2k å·¦å³çš„ token</code>ä¸ä¼šå› ä¸ºè®¾å¤‡åˆ é™¤ app è€Œåˆ é™¤ ä¼šä¸€ç›´å­˜åœ¨è‹¹æœçš„ server(å…¶å®æˆ‘è§‰å¾—å°±æ˜¯è‹¹æœè‡ªå·±å»è·å–çš„è®¾å¤‡å”¯ä¸€æ ‡è¯†).</li></ol><p>é‚£ä¹ˆ æ€ä¹ˆæŸ¥è¯¢å’Œæ›´æ–°å‘¢</p><h3 id="æŸ¥è¯¢æ¥å£"><a href="#æŸ¥è¯¢æ¥å£" class="headerlink" title="æŸ¥è¯¢æ¥å£"></a>æŸ¥è¯¢æ¥å£</h3><p><strong><a href="https://api.development.devicecheck.apple.com/v1/query_two_bits">https://api.development.devicecheck.apple.com/v1/query_two_bits</a></strong></p><p>å¯ä»¥ç”¨ç»ˆç«¯è‡ªå·±æ¨¡æ‹Ÿä¸€ä¸‹ å°±å½“ä½œä½ è‡ªå·±æ˜¯è‡ªå·±çš„æœåŠ¡å™¨è®¿é—®Apple çš„æœåŠ¡å™¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -i --verbose -H <span class="string">&quot;Authorization: Bearer &lt;GeneratedJWT&gt;&quot;</span> \</span><br><span class="line">-X POST --data-binary @ValidQueryRequest.json \ </span><br><span class="line">https://api.development.devicecheck.apple.com/v1/query_two_bits</span><br></pre></td></tr></table></figure><p>json çš„å®šä¹‰å¦‚ä¸‹:</p><table><thead><tr><th align="center">å­—æ®µ key</th><th align="center">ç±»å‹</th><th align="center">è¯´æ˜</th><th align="center">å¿…é¡»</th></tr></thead><tbody><tr><td align="center">device_token</td><td align="center">String</td><td align="center">è®¾å¤‡å”¯ä¸€æ ‡è¯† token</td><td align="center">æ˜¯</td></tr><tr><td align="center">transaction_id</td><td align="center">String</td><td align="center">æœåŠ¡å™¨äº§ç”Ÿçš„ä¸€ä¸ªID</td><td align="center">æ˜¯</td></tr><tr><td align="center">timestamp</td><td align="center">Long</td><td align="center">æœåŠ¡å™¨ç”Ÿæˆçš„UTCæ—¶é—´æˆ³</td><td align="center">æ˜¯</td></tr></tbody></table><p>å®ƒä¼š è¿”å› å¦‚ä¸‹æ ¼å¼</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="attr">&quot;device_token&quot;</span> : <span class="string">&quot;wlkCDA2Hy/CfrMqVAShs1BAR/0sAiuRIUm5jQg0a...&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;transaction_id&quot;</span> : <span class="string">&quot;5b737ca6-a4c7-488e-b928-8452960c4be9&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;timestamp&quot;</span> : <span class="number">1487716472000</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°æ¥å£"><a href="#æ›´æ–°æ¥å£" class="headerlink" title="æ›´æ–°æ¥å£"></a>æ›´æ–°æ¥å£</h3><p><strong><a href="https://api.development.devicecheck.apple.com/v1/update_two_bits">https://api.development.devicecheck.apple.com/v1/update_two_bits</a></strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -i --verbose -H <span class="string">&quot;Authorization: Bearer &lt;GeneratedJWT&gt;&quot;</span> \</span><br><span class="line">-X POST --data-binary @ValidUpdateRequest.json \</span><br><span class="line">https://api.development.devicecheck.apple.com/v1/update_two_bits</span><br></pre></td></tr></table></figure><p>json çš„å®šä¹‰å¦‚ä¸‹:</p><table><thead><tr><th align="center">å­—æ®µ key</th><th align="center">ç±»å‹</th><th align="center">è¯´æ˜</th><th align="center">å¿…é¡»</th></tr></thead><tbody><tr><td align="center">device_token</td><td align="center">String</td><td align="center">è®¾å¤‡å”¯ä¸€æ ‡è¯† token</td><td align="center">æ˜¯</td></tr><tr><td align="center">transaction_id</td><td align="center">String</td><td align="center">æœåŠ¡å™¨äº§ç”Ÿçš„ä¸€ä¸ªID</td><td align="center">æ˜¯</td></tr><tr><td align="center">timestamp</td><td align="center">Long</td><td align="center">æœåŠ¡å™¨ç”Ÿæˆçš„UTCæ—¶é—´æˆ³</td><td align="center">æ˜¯</td></tr><tr><td align="center">bit0</td><td align="center">Boolean</td><td align="center">æ–°çš„å¸ƒå°”å€¼1</td><td align="center">å¦</td></tr><tr><td align="center">bit1</td><td align="center">Boolean</td><td align="center">æ–°çš„å¸ƒå°”å€¼2</td><td align="center">å¦</td></tr></tbody></table><p>json çš„ç¤ºä¾‹:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="attr">&quot;device_token&quot;</span> : <span class="string">&quot;wlkCDA2Hy/CfrMqVAShs1BAR/0sAiuRIUm5jQg0a...&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;transaction_id&quot;</span> : <span class="string">&quot;5b737ca6-a4c7-488e-b928-8452960c4be9&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;timestamp&quot;</span> : <span class="number">1487716472000</span>,</span><br><span class="line">   <span class="attr">&quot;bit0&quot;</span> : <span class="literal">true</span>,</span><br><span class="line">   <span class="attr">&quot;bit1&quot;</span> : <span class="literal">false</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æœ€ç»ˆçš„æ–¹æ¡ˆ"><a href="#æœ€ç»ˆçš„æ–¹æ¡ˆ" class="headerlink" title="æœ€ç»ˆçš„æ–¹æ¡ˆ"></a>æœ€ç»ˆçš„æ–¹æ¡ˆ</h2><ol><li>iOS11ä»¥å‰ç‰ˆæœ¬æš‚ä¸”æ‰ç”¨ UUID ç­‰ keychian æ–¹å¼</li><li>iOS11å°½é‡æ‰ç”¨æ–°çš„ api æ¥é€‚é…è§£å†³</li></ol><p>å¯¹äº server æ¥è®²å¯ä»¥ æŠŠ token ææˆæ–°çš„é™„å±å­—æ®µ æ¯”å¦‚ä¸€ä¸ªè´¦å·ä¸‹ç™»å½•å¤šå°‘ä¸ªè®¾å¤‡</p><p>é‚£ä¹ˆ ä¸€ä¸ª UID ä¸‹é¢ å°±è¦é™„å± iOS ç‰ˆæœ¬+ token</p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¹Œé¾™ ä¹‹ æˆ‘åäº†</title>
      <link href="/2020/06/02/%E4%B9%8C%E9%BE%99-%E6%88%91%E5%90%90%E4%BA%86/"/>
      <url>/2020/06/02/%E4%B9%8C%E9%BE%99-%E6%88%91%E5%90%90%E4%BA%86/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¹‹å‰ç”¨çš„ hexo ä¸»é¢˜ä½œè€…ä¸ç»´æŠ¤äº†ï¼Œæ‰€ä»¥æ¢äº†ä¸ªæ´‹æ°”çš„~~~</p><p>ä¹Œé¾™å°±è¿™æ ·å¼€å§‹äº†ï¼š</p><span id="more"></span><p>æ–‡ç« é‡Œçš„ä»£ç å—ï¼Œæ˜æ˜è®¾ç½®äº†è¯­è¨€objective-cï¼Œå¯æ˜¯é«˜äº®å´æ€ä¹ˆéƒ½ä¸èµ·ä½œç”¨ï¼Œé¼“æ£äº†ä¸€é€šhljsï¼Œå…¶å®hexo é»˜è®¤çš„å°±æ˜¯hljsï¼Œæˆ‘è¿˜è·‘å»ç»™äººä¸»é¢˜ä½œè€…ç•™äº†è¨€ã€‚ã€‚ã€‚</p><p>æœç´¢äº†åŠå¤©å¤§å®¶éƒ½æ˜¯æ€ä¹ˆè®¾ç½®é«˜äº®çš„ï¼Œæˆ‘å‘ç°å‘è¡¨æ„è§çš„äººä¸­ï¼Œå¶æœ‰å‡ ä¸ªæ˜¯åŒè¡Œï¼ŒæŠ›å¼€è®¾ç½®è¯­è¨€çš„æ–¹å¼ï¼Œä»–ä»¬ç»™ä»£ç è®¾ç½®çš„è¯­è¨€éƒ½æ˜¯ <strong>objc</strong></p><p>äºæ˜¯æˆ‘ä¹Ÿ</p><blockquote><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">â€‹```objc</span><br></pre></td></tr></table></figure></blockquote><p>.</p><p>.</p><p>.</p><p>å°±å¥½äº†ã€‚ã€‚ã€‚ã€‚ã€‚</p><p><strong>objective-c</strong>æ”¹ä¸º<strong>objc</strong> ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚å°±å¥½äº†ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p><p>æˆ‘åäº†çœŸçš„æ˜¯~~~~~~</p><p>PSï¼šä½¿ç”¨çš„mdç¼–è¾‘å™¨æ˜¯Typoraï¼Œæˆ‘çœ‹äººå®¶æœ‰ä¸ªè¯­è¨€çš„é€‰é¡¹æ˜¯ objective-cï¼Œæˆ‘å°±é€‰äº†ã€‚ã€‚ã€‚ã€‚ã€‚ç§€é€—äº†ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/9.png" alt="å›¾ä¸€"></p>]]></content>
      
      
      
        <tags>
            
            <tag> çæ‰¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åƒé¥­å•¦</title>
      <link href="/2020/05/22/%E5%90%83%E9%A5%AD%E5%95%A6/"/>
      <url>/2020/05/22/%E5%90%83%E9%A5%AD%E5%95%A6/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/cfl.jpg"></p><p>å°±ç®—ä¸€ä¸ªäººåœ¨å®¶æ¬¡é¥­ï¼Œä¹Ÿè¦å…ƒæ°”æ»¡æ»¡çš„å“¦ï¼Œä»‹ç»ä¸€ä¸‹è¿™ä¸ªå°èœå•å§ï¼Œå“ˆå“ˆï¼š</p><p>ğŸŸğŸŸğŸŸğŸŸæ¸…çƒ¤å¤šæ˜¥é±¼</p><blockquote><p>äº¬éƒ½å¤šæ˜¥é›¨ï¼Œå›é¦–å¤šæ˜¥å…‰ã€‚å…¬å­å¤šæ˜¥æƒ…ï¼Œç»¿è‰å¤šæ˜¥èŠ³ã€‚å…«è½½å¤šæ˜¥ä¼¤ï¼Œæ©™å­å¤šæ˜¥é±¼ã€‚</p></blockquote><span id="more"></span><p>â€‹    å¤šæ˜¥é±¼çš„åå­—èµ·å¾—å¯ä»¥è¯´éå¸¸è´´åˆ‡ï¼Œå››å­£å¤šå­ï¼Œæ»¡è…¹é±¼å­ï¼Œåƒèµ·æ¥Qå¼¹åˆæœ‰è¥å…»ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ‹”æ‰é±¼é³ƒå’Œå†…è„</span><br><span class="line">åŠ ä¸€äº›æ–™é…’å‘€ã€ç”Ÿå§œå‘€ã€èƒ¡æ¤’ç²‰ è…Œ10åˆ†é’Ÿå°±å¯ä»¥å–½</span><br><span class="line">çƒ¤ç®±ä¸Šä¸‹220é¢„çƒ­5åˆ†é’Ÿï¼Œçƒ˜çƒ¤æ—¶é—´è®¾ç½®ä¸º15åˆ†é’Ÿ</span><br><span class="line">é¢„çƒ­æœŸé—´å¯ä»¥å‡†å¤‡åˆ·æ²¹äº†ï¼Œè½»è½»åˆ·ä¸€ç‚¹å°±å¥½äº†ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯æ¸…çƒ¤å˜›ï¼Œå˜»å˜»~~</span><br></pre></td></tr></table></figure><p>ğŸ†æ¸…è’¸èŒ„å­</p><p>æ¸…è’¸èŒ„å­æ˜¯æˆ‘å¤å¤©æœ€å–œæ¬¢åƒçš„ä¸€é“èœï¼Œçˆ½å£åˆæ²¡æœ‰çƒ­é‡ğŸ˜³</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">èŒ„å­æ´—å‡€åˆ‡ç‰‡ï¼Œä¸Šé”…è’¸</span><br><span class="line">å‡†å¤‡è’œå’Œé¦™æ²¹ï¼Œè’œåˆ‡æœ«å¤‡ç”¨ï¼Œçœ‹è‡ªå·±å–œå¥½æ”¾å¤šå°‘å§</span><br><span class="line">èŒ„å­æ•´å¥½ä»¥åï¼Œæ”¾åœ¨å®¹å™¨ä¸­ï¼ŒåŠ å…¥ç›ã€è’œæœ«ã€é¦™æ²¹å‡ æ»´</span><br><span class="line">å¯ä»¥å¼€åŠ¨äº†ï¼Œé¦™å–·å–·ç¾æ»‹æ»‹å‘€</span><br></pre></td></tr></table></figure><p>PSï¼šæˆ‘ä¸ªäººå¾ˆå–œæ¬¢åœ¨èœé‡Œæ”¾å¤§è’œï¼Œå› ä¸ºåƒå¤§è’œå¯ä»¥è®©äººå¿«ä¹ã€‚å“ˆå“ˆã€‚</p><p>ğŸŒ²å¦ä¸€ä¸ªèœå«ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å…¶å®æˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œå“ˆå“ˆï¼ŒåœŸè±†ã€é’æ¤’ã€æ´‹è‘±å¤§æ‚çƒ©ï¼Œåˆ‡æˆå°ç‰‡ï¼Œä¸€èµ·ç¿»ç‚’ï¼Œå–œæ¬¢åƒè‚‰å¯ä»¥æ”¾ç‚¹è‚‰ç²’ï¼Œæˆ‘ä¸å–œæ¬¢ï¼Œæ‰€ä»¥æ˜¯ç´ ç‚’çš„ã€‚</p><p>ğŸšæœ€åé…ä¸Šä¸€ç¢—ç™½ç±³é¥­ï¼Œå¯ä»¥å¼€åŠ¨å•¦~~~</p><p>å•èº«ç‹—ä»¬çœ‹å®Œä¼šä¸ä¼šè§‰å¾—å¾ˆéº»çƒ¦å‘¢ï¼Œä¸€ä¸ªäººåšè¿™ä¹ˆå¤šè¦å¤šä¹…å‘€ï¼Œå¥½çƒ¦ã€‚å‘ï¼Œæ—¶é—´ç®¡ç†å¤§å¸ˆè¯´è¿‡(ä¸æ˜¯ç½—å¿—ç¥¥ğŸ™…â€â™‚ï¸)ï¼Œæ‰€æœ‰çš„ä»»åŠ¡è¦åŒºåˆ†å¥½ï¼Œå¹¶è¡Œå’Œä¸²è¡Œï¼æ‹¿æˆ‘ä»¬è¿™æ¬¡çš„åˆé¤ä¸¾ä¾‹ï¼š</p><blockquote><p>è’¸ğŸš -&gt; å¤„ç†ğŸ† -&gt; ä¸Šé”…è’¸ -&gt; å¤„ç†ğŸŸ + åˆ‡åœŸè±†ç­‰ç­‰ -&gt; ğŸŸè¿›çƒ¤ç®± -&gt; ğŸ†å‡ºé”… -&gt; ç‚’å¤§æ‚çƒ© = åƒé¥­å•¦~~~</p></blockquote><p>ä¸ºä»€ä¹ˆåˆ†äº«ç¾é£Ÿå‘¢ï¼Œå…¶å®æˆ‘å°±æ˜¯è¯•ä¸€ä¸‹å›¾ç‰‡ä¸ºä»€ä¹ˆåŠ ä¸è¿›å»äº†ï¼Œç°åœ¨å¥½äº†~~~QTQ</p>]]></content>
      
      
      
        <tags>
            
            <tag> æˆ‘ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>1Q84ä¸­çš„å“²å­¦</title>
      <link href="/2020/03/07/1Q84%20%E4%B8%AD%E7%9A%84%E5%93%B2%E5%AD%A6/"/>
      <url>/2020/03/07/1Q84%20%E4%B8%AD%E7%9A%84%E5%93%B2%E5%AD%A6/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><ul><li>äººè¢«èµ‹äºˆå¸Œæœ›ï¼Œä»¥æ­¤ä¸ºç‡ƒæ–™ä¸ºç›®çš„åº¦è¿‡äººç”Ÿã€‚æ²¡æœ‰å¸Œæœ›ï¼Œäººå°±æ´»ä¸ä¸‹å»ã€‚ç„¶è€Œè¿™å’ŒæŠ›ç¡¬å¸ç›¸åŒã€‚æ­£é¢å‘ä¸Šè¿˜æ˜¯åé¢å‘ä¸Šï¼Œåªæœ‰ç­‰ç¡¬å¸è½ä¸‹æ¥æ‰èƒ½çŸ¥é“ã€‚</li></ul><span id="more"></span><ul><li><p>ç¯å°ä¹‹ä¸‹æœ€é»‘æš—ã€‚</p></li><li><p>æœ‰å…‰æ˜çš„åœ°æ–¹å°±å¿…ç„¶æœ‰é˜´å½±ï¼Œæœ‰é˜´å½±çš„åœ°æ–¹å°±å¿…ç„¶æœ‰å…‰æ˜ã€‚ä¸å­˜åœ¨æ²¡æœ‰å…‰æ˜çš„é˜´å½±ï¼Œä¹Ÿä¸å­˜åœ¨æ²¡æœ‰é˜´å½±çš„å…‰æ˜ã€‚</p></li><li><p>äººå¹¶ä¸æ˜¯å¤§é™ä¸€åˆ°å°±æº˜ç„¶é•¿é€çš„ï¼Œè€Œæ˜¯å…ˆä»å†…éƒ¨ç¼“ç¼“åœ°æ­»å»ï¼Œæœ€ç»ˆè¿æ¥æœ€åç»“ç®—çš„æ—¥å­ã€‚è°éƒ½é€ƒè„±ä¸äº†ã€‚äººå¿…é¡»ä¸ºæ”¶ä¸‹çš„ä¸œè¥¿æ”¯ä»˜ä»£ä»·ã€‚</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> è¯»ä¹¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Command CompileAssetCatalog failed with a nonzero exit code</title>
      <link href="/2020/02/14/LaunchImage/"/>
      <url>/2020/02/14/LaunchImage/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å‡ å¹´å‰è¾ƒè€çš„å·¥ç¨‹ ç”¨ xcode 11 æ‰“å¼€ä»¥åï¼ŒdebugæŠ¥é”™ï¼ŒåŸå› æ˜¯  LaunchImage æ–‡ä»¶æ²¡æ‰¾åˆ°<br>å¦‚æœé‡åˆ°äº†åŒæ ·çš„é—®é¢˜ï¼Œå¯ä»¥æ£€æŸ¥ä¸‹æ˜¯å¦ç¼ºå¤±äº†ã€‚</p><span id="more"></span><p>æ›´æ–°ï¼š<br>åœ¨ iOS 13 ä»¥åï¼ŒLaunchImage è¢«åºŸå¼ƒäº†ï¼Œè¦æ±‚ä½¿ç”¨ LaunchScreen.storyboardã€‚è€é¡¹ç›®é‡Œä¸‹å›¾ä¸­çš„è¿™ä¸ªä½ç½®ä¼šé»˜è®¤æŒ‡å®šçš„ä½¿ç”¨  LaunchImageï¼Œä½†æ–‡ä»¶ä¸­åˆæ²¡æœ‰ï¼Œæ‰€ä»¥ä¼šæŠ¥è¿™ä¸ªé”™è¯¯ã€‚åˆ æ‰è¿™é‡Œçš„é…ç½®å°±å¥½äº†ã€‚</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/23.png" alt="LaunchImage Setting.png"></p><div contenteditable="plaintext-only"><div contenteditable="plaintext-only"><center>  <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/flag.jpeg" class width="200"></div></center></div></div>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Xcode 11 IPA processing failed åˆè§</title>
      <link href="/2020/01/20/Xcode%2011%20IPA%20processing/"/>
      <url>/2020/01/20/Xcode%2011%20IPA%20processing/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><h3 id="âš ï¸-warning-Configuration-issue-platform-iPhoneSimulator-platform-doesnâ€™t-have-any-non-simulator-SDKs-ignoring-it"><a href="#âš ï¸-warning-Configuration-issue-platform-iPhoneSimulator-platform-doesnâ€™t-have-any-non-simulator-SDKs-ignoring-it" class="headerlink" title="âš ï¸ warning: Configuration issue: platform iPhoneSimulator.platform doesnâ€™t have any non-simulator SDKs; ignoring it"></a>âš ï¸ warning: Configuration issue: platform iPhoneSimulator.platform doesnâ€™t have any non-simulator SDKs; ignoring it</h3><h3 id="âŒ-Assertion-failed-Expected-2-archs-in-otool-output"><a href="#âŒ-Assertion-failed-Expected-2-archs-in-otool-output" class="headerlink" title="âŒ Assertion failed: Expected 2 archs in otool output"></a>âŒ Assertion failed: Expected 2 archs in otool output</h3><p>ä»Šå¤©å‡†å¤‡æ‰“ä¸€ä¸ªä¼ä¸šipaçš„æ—¶å€™ï¼ŒæŠ¥äº†ä¸€ä¸ªé”™ï¼Œå“å‡ºäº†ä¸€èº«å†·æ±—ï¼š<code>IPA processing failed</code><br>çœ‹åˆ°äº† Show Logsï¼Œå°±æŠ±ç€è¯•è¯•çœ‹çš„æ€åº¦ï¼Œç‚¹å¼€äº†ï¼Œæ¯•ç«Ÿè¯•è¯•åˆä¸ä¼šæ€€å­•~~~</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/35.png" alt="IPA processing failed"></p><span id="more"></span><p>Show Logs æˆ‘ä»¬ä¼šçœ‹åˆ°ä¸‹é¢å››ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œå°±æ˜¯æˆ‘ä»¬æœ¬æ¬¡Archive~Packageè¿‡ç¨‹ä¸­çš„æ—¥å¿—ï¼Œç„¶åæˆ‘ä»¬ç€é‡çœ‹ä¸€ä¸‹ç¬¬äºŒä¸ªé€‰ä¸­çš„log</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/36.png" alt="log"></p><p>æœç´¢ä¸€ä¸‹ <code>error</code> æˆ–è€… <code>failed</code> æ€»ä¼šå‘ç°ä»€ä¹ˆçš„ï¼Œå–ï¼Œæˆ‘ä»¬å‘ç°äº†å°±åŒ…å«ä¸€ä¸ªfailedï¼Œæ³¨æ„ä¸Šä¸‹æ–‡åˆ’çº¿çš„å‡ å¥è¯ï¼Œåº”è¯¥æ˜¯æç¤ºçš„é‚£ä¸ªframeworkåŒ…å«äº†æ¨¡æ‹Ÿå™¨æ¶æ„ï¼Œä¸Šæ¶è‚¯å®šæ˜¯è¦ç§»é™¤çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¿½ç•¥å®ƒï¼Œæ¢å¥è¯è¯´ï¼Œå®ƒå¤ªèƒ–äº†ï¼Œæˆ‘ä»¬éœ€è¦ç»™å®ƒç˜¦ä¸ªèº«ğŸ¤¹â€â™‚ï¸ğŸ¤¹â€â™‚ï¸ğŸ¤¹â€â™‚ï¸ğŸ¤¹â€â™‚ï¸ğŸ¤¹â€â™‚ï¸</p><blockquote><p>æ¨¡æ‹Ÿå™¨32ä½å¤„ç†å™¨æµ‹è¯•éœ€è¦i386æ¶æ„ï¼Œï¼ˆiphone5ï¼Œiphone5sä»¥ä¸‹çš„æ¨¡æ‹Ÿå™¨ï¼‰<br>æ¨¡æ‹Ÿå™¨64ä½å¤„ç†å™¨æµ‹è¯•éœ€è¦x86_64æ¶æ„ï¼Œ(iphone6ä»¥ä¸Šçš„æ¨¡æ‹Ÿå™¨)<br>çœŸæœº32ä½å¤„ç†å™¨éœ€è¦armv7,æˆ–è€…armv7sæ¶æ„ï¼Œï¼ˆiphone4çœŸæœº/armv7, ipnone5ï¼Œiphone5sçœŸæœº/armv7sï¼‰<br>çœŸæœº64ä½å¤„ç†å™¨éœ€è¦arm64æ¶æ„ï¼Œ(iphone6ï¼Œiphone6pä»¥ä¸Šçš„çœŸæœº)</p></blockquote><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/37.png" alt="å¯»æ‰¾ææƒ§"></p><h2 id="Framework-ç˜¦èº«å¤§æ³•"><a href="#Framework-ç˜¦èº«å¤§æ³•" class="headerlink" title="Framework ç˜¦èº«å¤§æ³•"></a>Framework ç˜¦èº«å¤§æ³•</h2><blockquote><p>æœ¬æ®µå†…å®¹æ¥è‡ªäºï¼š<a href="%5Bhttps://www.jianshu.com/p/3c6b1dd7a0ed%5D(https://www.jianshu.com/p/3c6b1dd7a0ed)">xcode11æ‰“åŒ…å¤±è´¥ IPA processing failed é—®é¢˜è§£å†³</a></p></blockquote><ul><li><p>1ã€ è¿›å…¥frameworkæ‰€åœ¨çš„ç›®å½•ï¼ˆä»¥ä¸‹çš„æ¡†æ¶åç§°æ¢æˆè‡ªå·±çš„å³å¯ï¼‰</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> [your framework path]</span><br></pre></td></tr></table></figure></li><li><p>2ã€æŸ¥çœ‹SDKçš„äºŒè¿›åˆ¶æ–‡ä»¶æ”¯æŒçš„CPUæ¶æ„ï¼Œå¦‚æœåªæ˜¾ç¤ºarmv7 arm64ï¼Œé‚£ä¹ˆå°±æ²¡é—®é¢˜ï¼Œå¦‚æœæœ‰æ¨¡æ‹Ÿå™¨çš„æ¶æ„x86_64, i386é‚£å°±æ˜¯æœ‰é—®é¢˜</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lipo -info OAChatClient.framework/OAChatClient</span><br></pre></td></tr></table></figure></li><li><p>3ã€ç§»é™¤æ”¯æŒx86_64,i386çš„äºŒè¿›åˆ¶æ–‡ä»¶<br>psï¼šç§»é™¤è‡ªå·±å¯¹åº”çš„ç±»å‹å°±å¯ä»¥ï¼Œè¿™é‡Œåªæ˜¯ä¸¾ä¸ªä¾‹å­ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lipo OAChatClient.framework/OAChatClient -remove x86_64 -remove i386 -output OAChatClient</span><br></pre></td></tr></table></figure></li><li><p>4ã€ç”¨ç¬¬3æ­¥ç”Ÿæˆçš„æ–°çš„å¯æ‰§è¡Œæ–‡ä»¶ æ›¿æ¢framworkå†…éƒ¨çš„å¯æ‰§è¡Œæ–‡ä»¶[è®°å¾—å¤‡ä»½]</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv OAChatClient OAChatClient.framework/OAChatClient</span><br></pre></td></tr></table></figure></li><li><p>5ã€æŸ¥çœ‹æˆ‘ä»¬ç˜¦èº«åçš„å¯æ‰§è¡Œæ–‡ä»¶æ˜¯å¦æ­£ç¡®ï¼Œæ˜¾ç¤ºarmv7æˆ–arm64ï¼Œå°±å®Œæˆå‰¥ç¦»ï¼Œå†æ‰“åŒ…åº”è¯¥å°±å¯ä»¥äº†ï¼Œå•Šå“ˆå“ˆå“ˆ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lipo -info OAChatClient.framework/OAChatClient</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœä½ è§‰å¾—ä»¥ä¸Šæ“ä½œæ¯”è¾ƒéº»çƒ¦ï¼Œæ¯æ¬¡æ¨¡æ‹Ÿå™¨è°ƒè¯•å’Œæ‰“åŒ…è¿˜è¦æ›¿æ¢å¯¹åº”çš„SDK,é‚£ä¹ˆä»¥ä¸‹æ–¹å¼å°†æ›´åŠ ç®€ä¾¿çš„è§£å†³ä½ çš„é—®é¢˜ï¼š<br>buildPhases-&gt;New Run Script Phaseæ·»åŠ ä»¥ä¸‹å†…å®¹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">APP_PATH=<span class="string">&quot;<span class="variable">$&#123;TARGET_BUILD_DIR&#125;</span>/<span class="variable">$&#123;WRAPPER_NAME&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This script loops through the frameworks embedded in the application and</span></span><br><span class="line"><span class="comment"># removes unused architectures.</span></span><br><span class="line">find <span class="string">&quot;<span class="variable">$APP_PATH</span>&quot;</span> -name <span class="string">&#x27;*.framework&#x27;</span> -<span class="built_in">type</span> d | <span class="keyword">while</span> <span class="built_in">read</span> -r FRAMEWORK</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">FRAMEWORK_EXECUTABLE_NAME=$(defaults <span class="built_in">read</span> <span class="string">&quot;<span class="variable">$FRAMEWORK</span>/Info.plist&quot;</span> CFBundleExecutable)</span><br><span class="line">FRAMEWORK_EXECUTABLE_PATH=<span class="string">&quot;<span class="variable">$FRAMEWORK</span>/<span class="variable">$FRAMEWORK_EXECUTABLE_NAME</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Executable is <span class="variable">$FRAMEWORK_EXECUTABLE_PATH</span>&quot;</span></span><br><span class="line"></span><br><span class="line">EXTRACTED_ARCHS=()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ARCH <span class="keyword">in</span> <span class="variable">$ARCHS</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Extracting <span class="variable">$ARCH</span> from <span class="variable">$FRAMEWORK_EXECUTABLE_NAME</span>&quot;</span></span><br><span class="line">lipo -extract <span class="string">&quot;<span class="variable">$ARCH</span>&quot;</span> <span class="string">&quot;<span class="variable">$FRAMEWORK_EXECUTABLE_PATH</span>&quot;</span> -o <span class="string">&quot;<span class="variable">$FRAMEWORK_EXECUTABLE_PATH</span>-<span class="variable">$ARCH</span>&quot;</span></span><br><span class="line">EXTRACTED_ARCHS+=(<span class="string">&quot;<span class="variable">$FRAMEWORK_EXECUTABLE_PATH</span>-<span class="variable">$ARCH</span>&quot;</span>)</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Merging extracted architectures: <span class="variable">$&#123;ARCHS&#125;</span>&quot;</span></span><br><span class="line">lipo -o <span class="string">&quot;<span class="variable">$FRAMEWORK_EXECUTABLE_PATH</span>-merged&quot;</span> -create <span class="string">&quot;<span class="variable">$&#123;EXTRACTED_ARCHS[@]&#125;</span>&quot;</span></span><br><span class="line">rm <span class="string">&quot;<span class="variable">$&#123;EXTRACTED_ARCHS[@]&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Replacing original executable with thinned version&quot;</span></span><br><span class="line">rm <span class="string">&quot;<span class="variable">$FRAMEWORK_EXECUTABLE_PATH</span>&quot;</span></span><br><span class="line">mv <span class="string">&quot;<span class="variable">$FRAMEWORK_EXECUTABLE_PATH</span>-merged&quot;</span> <span class="string">&quot;<span class="variable">$FRAMEWORK_EXECUTABLE_PATH</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="å°ä¹Œé¾™"><a href="#å°ä¹Œé¾™" class="headerlink" title="å°ä¹Œé¾™"></a>å°ä¹Œé¾™</h2><p>PSï¼šå‘ç°è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯å› ä¸ºæƒ³ä½¿ç”¨äººå®¶é‡ç«çš„IM demoï¼Œè‡ªå·±æ‰“ä¸ªåŒ…ï¼Œç»“æœå°±æŠ¥äº†ä¸Šé¢çš„é—®é¢˜ï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤æ”¹å®Œä¸€ä¸ªframeworkåï¼Œå‘ç°ï¼Œå…¶å®é‡ç«çš„å·¥ç¨‹é‡Œï¼Œå·²ç»å†™å¥½äº†è„šæœ¬ï¼ˆæ–‡ä»¶ï¼šremovex86.shï¼Œæ˜¯ä¸æ˜¯çœ‹åå­—å°±çŸ¥é“æ˜¯å¹²å˜›çš„äº†ï¼‰ï¼Œå“ˆå“ˆå“ˆï¼Œåªéœ€è¦è¿è¡Œä¸€ä¸‹å°±okäº†ğŸ¤“ğŸ¤“ğŸ¤“ğŸ¤“ğŸ¤“ğŸ¤“ğŸ¤“ğŸ¤“ğŸ¤“ğŸ¤“</p><p>è¿™æ˜¯äººå®¶çš„shellï¼Œå¦‚æœæœ‰å’Œæˆ‘ä¸€æ ·çš„äººï¼Œä¸€å®šè¦æ³¨æ„å“¦ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> Frameworks</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;æœ‹å‹åœˆçš„åº“å¦‚æœä¸å­˜åœ¨ï¼Œè„šæœ¬ä¼šæŠ¥é”™è¯¯ï¼Œå¯ä»¥å¿½ç•¥æ‰ï¼&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#lipo WFChatUIKit.framework/WFChatUIKit -thin armv7 -output XXXX_armv7</span></span><br><span class="line">lipo WFChatUIKit.framework/WFChatUIKit -thin arm64 -output XXXX_arm64</span><br><span class="line"><span class="comment">#lipo -create XXXX_armv7 XXXX_arm64 -output XXXX</span></span><br><span class="line">mv XXXX_arm64 WFChatUIKit.framework/WFChatUIKit</span><br><span class="line">rm -rf XXXX*</span><br><span class="line"></span><br><span class="line"><span class="comment"># lipo WFAVEngineKit.framework/WFAVEngineKit -thin armv7 -output XXXX_armv7</span></span><br><span class="line">lipo WFAVEngineKit.framework/WFAVEngineKit -thin arm64 -output XXXX_arm64</span><br><span class="line"><span class="comment"># lipo -create XXXX_armv7 XXXX_arm64 -output XXXX</span></span><br><span class="line">mv XXXX_arm64 WFAVEngineKit.framework/WFAVEngineKit</span><br><span class="line">rm -rf XXXX*</span><br><span class="line"></span><br><span class="line"><span class="comment"># lipo WFChatClient.framework/WFChatClient -thin armv7 -output XXXX_armv7</span></span><br><span class="line">lipo WFChatClient.framework/WFChatClient -thin arm64 -output XXXX_arm64</span><br><span class="line"><span class="comment"># lipo -create XXXX_armv7 XXXX_arm64 -output XXXX</span></span><br><span class="line">mv XXXX_arm64 WFChatClient.framework/WFChatClient</span><br><span class="line">rm -rf XXXX*</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ../WildFireChat/Moments</span><br><span class="line"><span class="comment">#lipo WFMomentClient.framework/WFMomentClient -thin armv7 -output XXXX_armv7</span></span><br><span class="line">lipo WFMomentClient.framework/WFMomentClient -thin arm64 -output XXXX_arm64</span><br><span class="line"><span class="comment">#lipo -create XXXX_armv7 XXXX_arm64 -output XXXX</span></span><br><span class="line">mv XXXX_arm64 WFMomentClient.framework/WFMomentClient</span><br><span class="line">rm -rf XXXX*</span><br><span class="line"></span><br><span class="line"><span class="comment"># lipo WFMomentUIKit.framework/WFMomentUIKit -thin armv7 -output XXXX_armv7</span></span><br><span class="line">lipo WFMomentUIKit.framework/WFMomentUIKit -thin arm64 -output XXXX_arm64</span><br><span class="line"><span class="comment"># lipo -create XXXX_armv7 XXXX_arm64 -output XXXX</span></span><br><span class="line">mv XXXX_arm64 WFMomentUIKit.framework/WFMomentUIKit</span><br><span class="line">rm -rf XXXX*</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> ../../Frameworks</span><br><span class="line"></span><br><span class="line"><span class="comment">#lipo GoogleWebRTC/Frameworks/frameworks/WebRTC.framework/WebRTC -thin armv7 -output XXXX_armv7</span></span><br><span class="line">lipo GoogleWebRTC/Frameworks/frameworks/WebRTC.framework/WebRTC -thin arm64 -output XXXX_arm64</span><br><span class="line"><span class="comment">#lipo -create XXXX_armv7 XXXX_arm64 -output XXXX</span></span><br><span class="line">mv XXXX_arm64 GoogleWebRTC/Frameworks/frameworks/WebRTC.framework/WebRTC</span><br><span class="line">rm -rf XXXX*</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;æœ‹å‹åœˆçš„åº“å¦‚æœä¸å­˜åœ¨ï¼Œè„šæœ¬ä¼šæŠ¥é”™è¯¯ï¼Œå¯ä»¥å¿½ç•¥æ‰ï¼&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;æ‰§è¡Œè¿™ä¸ªè„šæœ¬åï¼Œæ‰“åŒ…æ—¶ä¸€å®šä¸è¦æ‰“å¼€ios-chatè¿™ä¸ªé¡¹ç›®ç©ºé—´è¿›è¡Œæ‰“åŒ…ï¼Œå› ä¸ºä¼šé‡æ–°ç”Ÿæˆè¿™äº›è¢«ç˜¦èº«çš„åº“ã€‚è¦æ‰“å¼€wfchatè¿™ä¸ªé¡¹ç›®è¿›è¡Œæ‰“åŒ…ï¼&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>PPSï¼šè¿è¡Œè„šæœ¬çš„å‘½ä»¤å°±æ˜¯<code>sh ***.sh</code></p><div contenteditable="plaintext-only"><div contenteditable="plaintext-only"><center>  <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/flag.jpeg" class width="200"></div></center></div></div>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> Xcode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOS13 é€‚é…æ³¨æ„ç‚¹</title>
      <link href="/2019/11/05/iOS13%20%E9%80%82%E9%85%8D%E6%B3%A8%E6%84%8F%E7%82%B9/"/>
      <url>/2019/11/05/iOS13%20%E9%80%82%E9%85%8D%E6%B3%A8%E6%84%8F%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h5 id="âŒ-KVC-è·å–ç§æœ‰å±æ€§-ç›´æ¥å´©æºƒï¼Œæ¯”æ–¹è¯´è·å–-SearchBar-çš„-TextField"><a href="#âŒ-KVC-è·å–ç§æœ‰å±æ€§-ç›´æ¥å´©æºƒï¼Œæ¯”æ–¹è¯´è·å–-SearchBar-çš„-TextField" class="headerlink" title="âŒ KVC è·å–ç§æœ‰å±æ€§ ç›´æ¥å´©æºƒï¼Œæ¯”æ–¹è¯´è·å– SearchBar çš„ TextField"></a>âŒ KVC è·å–ç§æœ‰å±æ€§ ç›´æ¥å´©æºƒï¼Œæ¯”æ–¹è¯´è·å– SearchBar çš„ TextField</h5><p>â€‹    è§£å†³æ–¹æ¡ˆæ˜¯åšç‰ˆæœ¬åˆ¤æ–­ iOS13 çš„ searchbar æ–°å¢äº†ä¸€ä¸ª searchTextField å±æ€§</p><h5 id="âš ï¸-Segementã€SearchBarçš„æ ·å¼å˜äº†ï¼Œæ³¨æ„ä¸€ä¸‹"><a href="#âš ï¸-Segementã€SearchBarçš„æ ·å¼å˜äº†ï¼Œæ³¨æ„ä¸€ä¸‹" class="headerlink" title="âš ï¸ Segementã€SearchBarçš„æ ·å¼å˜äº†ï¼Œæ³¨æ„ä¸€ä¸‹"></a>âš ï¸ Segementã€SearchBarçš„æ ·å¼å˜äº†ï¼Œæ³¨æ„ä¸€ä¸‹</h5><p>â€‹    for å¾ªç¯æŸ¥æ‰¾å­è§†å›¾å¤±æ•ˆï¼Œæ”¹ä¸º  searchBar.searchTextField  </p> <span id="more"></span><h5 id="âŒ-UIWebView-ç»ˆæåºŸå¼ƒï¼Œéœ€è¦æ›¿æ¢-WKWebViewï¼Œä¸ç„¶-AppStore-å®¡æ ¸æ˜¯ä¸é€šè¿‡çš„ã€‚"><a href="#âŒ-UIWebView-ç»ˆæåºŸå¼ƒï¼Œéœ€è¦æ›¿æ¢-WKWebViewï¼Œä¸ç„¶-AppStore-å®¡æ ¸æ˜¯ä¸é€šè¿‡çš„ã€‚" class="headerlink" title="âŒ UIWebView ç»ˆæåºŸå¼ƒï¼Œéœ€è¦æ›¿æ¢ WKWebViewï¼Œä¸ç„¶ AppStore å®¡æ ¸æ˜¯ä¸é€šè¿‡çš„ã€‚"></a>âŒ UIWebView ç»ˆæåºŸå¼ƒï¼Œéœ€è¦æ›¿æ¢ WKWebViewï¼Œä¸ç„¶ AppStore å®¡æ ¸æ˜¯ä¸é€šè¿‡çš„ã€‚</h5><h5 id="âš ï¸-é»‘å¤œæ¨¡å¼"><a href="#âš ï¸-é»‘å¤œæ¨¡å¼" class="headerlink" title="âš ï¸ é»‘å¤œæ¨¡å¼"></a>âš ï¸ é»‘å¤œæ¨¡å¼</h5><h5 id="âš ï¸-TextFieldï¼šLeftView-å¦‚æœæ˜¯å›¾ç‰‡çš„è¯-ä¼šè¦†ç›–æ•´ä¸ª-TextField-è§£å†³åŠæ³•æ˜¯ç”¨ä¸€ä¸ª-view-åŒ…è£¹ä¸€ä¸‹å›¾ç‰‡ä½œä¸º-LeftView"><a href="#âš ï¸-TextFieldï¼šLeftView-å¦‚æœæ˜¯å›¾ç‰‡çš„è¯-ä¼šè¦†ç›–æ•´ä¸ª-TextField-è§£å†³åŠæ³•æ˜¯ç”¨ä¸€ä¸ª-view-åŒ…è£¹ä¸€ä¸‹å›¾ç‰‡ä½œä¸º-LeftView" class="headerlink" title="âš ï¸ TextFieldï¼šLeftView å¦‚æœæ˜¯å›¾ç‰‡çš„è¯ ä¼šè¦†ç›–æ•´ä¸ª TextField è§£å†³åŠæ³•æ˜¯ç”¨ä¸€ä¸ª view åŒ…è£¹ä¸€ä¸‹å›¾ç‰‡ä½œä¸º LeftView"></a>âš ï¸ TextFieldï¼šLeftView å¦‚æœæ˜¯å›¾ç‰‡çš„è¯ ä¼šè¦†ç›–æ•´ä¸ª TextField è§£å†³åŠæ³•æ˜¯ç”¨ä¸€ä¸ª view åŒ…è£¹ä¸€ä¸‹å›¾ç‰‡ä½œä¸º LeftView</h5><h5 id="âŒ-UniversalLink"><a href="#âŒ-UniversalLink" class="headerlink" title="âŒ UniversalLink"></a>âŒ UniversalLink</h5><h5 id="https-www-jianshu-com-p-03e6b7828307"><a href="#https-www-jianshu-com-p-03e6b7828307" class="headerlink" title="https://www.jianshu.com/p/03e6b7828307"></a><a href="https://www.jianshu.com/p/03e6b7828307">https://www.jianshu.com/p/03e6b7828307</a></h5><p>â€‹    å¾®ä¿¡åˆ†äº«å¼ºåˆ¶ä½¿ç”¨ã€‚æ³¨å†Œå¾®ä¿¡å¼€æ”¾å¹³å°çš„æ—¶å€™ iOSçš„é¡¹ç›®å¿…é¡»å¡«è¿™ä¸ªã€‚</p><h5 id="âš ï¸-æ¨¡æ€å‡ºçš„é¡µé¢ï¼Œéœ€è¦æŒ‡å®šå¯¹åº”çš„å¼¹å‡ºæ¨¡å¼"><a href="#âš ï¸-æ¨¡æ€å‡ºçš„é¡µé¢ï¼Œéœ€è¦æŒ‡å®šå¯¹åº”çš„å¼¹å‡ºæ¨¡å¼" class="headerlink" title="âš ï¸ æ¨¡æ€å‡ºçš„é¡µé¢ï¼Œéœ€è¦æŒ‡å®šå¯¹åº”çš„å¼¹å‡ºæ¨¡å¼"></a>âš ï¸ æ¨¡æ€å‡ºçš„é¡µé¢ï¼Œéœ€è¦æŒ‡å®šå¯¹åº”çš„å¼¹å‡ºæ¨¡å¼</h5><p>â€‹    ä¾‹å¦‚ï¼šUIModalPresentationOverFullScreen</p><p>â€‹    æ£€æŸ¥å›¾ç‰‡é€‰æ‹©å™¨ï¼Ÿ</p><h5 id="âŒ-Tabbarçš„æ–‡å­—é¢œè‰²"><a href="#âŒ-Tabbarçš„æ–‡å­—é¢œè‰²" class="headerlink" title="âŒ Tabbarçš„æ–‡å­—é¢œè‰²"></a>âŒ Tabbarçš„æ–‡å­—é¢œè‰²</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[tabbarItem setTitleTextAttributes:@&#123;NSForegroundColorAttributeName:selectColor&#125; forState:UIControlStateSelected];</span><br></pre></td></tr></table></figure><p>â€‹    æ­¤æ–¹æ³•åœ¨ iOS 13 ä¼šæœ‰ bugï¼Œå½“æˆ‘ä»¬ push åˆ°ä¸‹ä¸€é¡µå†æ¬¡è¿”å›æ—¶ tabbar å­—ä½“é¢œè‰²è®¾ç½®ä¼šå¤±æ•ˆã€‚</p><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.tabBar.tintColor = selectColor;</span><br></pre></td></tr></table></figure><h5 id="âŒ-é€šè¿‡-NSURLSessionDataTask-ä¸‹è½½æ–‡ä»¶æµ"><a href="#âŒ-é€šè¿‡-NSURLSessionDataTask-ä¸‹è½½æ–‡ä»¶æµ" class="headerlink" title="âŒ é€šè¿‡ NSURLSessionDataTask ä¸‹è½½æ–‡ä»¶æµ"></a>âŒ é€šè¿‡ NSURLSessionDataTask ä¸‹è½½æ–‡ä»¶æµ</h5><p>â€‹    éœ€è¦åœ¨å¤´éƒ¨æŒ‡å®šæ¥å—çš„è¿”å›æ ¼å¼ï¼š<code>application/octet-stream</code></p><h5 id="âŒ-Cocoapods"><a href="#âŒ-Cocoapods" class="headerlink" title="âŒ Cocoapods"></a>âŒ Cocoapods</h5><p>â€‹    å‡çº§ CocoaPods åˆ° 1.8.4 ç‰ˆæœ¬</p><p>â€‹    ä½†æ˜¯éšå³é—®é¢˜å°±æ¥äº†, æ‰§è¡Œ pod install ä¸‹è½½åº“æ—¶ï¼Œå‡ºç°é”™è¯¯</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[!] <span class="symbol">CDN:</span> trunk URL couldn<span class="string">&#x27;t be downloaded: https://cdn.cocoapods.org/all_pods_versions_a_7_5.txt, error: execution expired</span></span><br></pre></td></tr></table></figure><p>åæ¥æŸ¥äº†åŠå¤©èµ„æ–™, æœ€ç»ˆåœ¨ <a href="https://github.com/CocoaPods/CocoaPods/issues/9303">github CocoaPods issues</a> æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼šåœ¨ Podfile åŠ ä¸Š source <code>https://github.com/CocoaPods/Specs.git</code> ä¸ä½¿ç”¨æ–°ç‰ˆæœ¬çš„ CDN</p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOS å¼€å‘ä¸­çš„å¸¸è§é—®é¢˜è®°å½•</title>
      <link href="/2019/11/05/iOS_Problem/"/>
      <url>/2019/11/05/iOS_Problem/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Xcode"><a href="#Xcode" class="headerlink" title="Xcode"></a>Xcode</h2><h3 id="âŒ-Thread-1-EXC-BAD-ACCESS-code-1-address-0x0"><a href="#âŒ-Thread-1-EXC-BAD-ACCESS-code-1-address-0x0" class="headerlink" title="âŒ Thread 1: EXC_BAD_ACCESS (code=1, address=0x0)"></a>âŒ Thread 1: EXC_BAD_ACCESS (code=1, address=0x0)</h3><p>å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œè¯´æ˜ä½ è®¿é—®äº†å·²ç»é‡Šæ”¾çš„å†…å­˜ã€‚</p><p>æŠ¥é”™è¡Œå¦‚æœæœ‰ä½¿ç”¨åˆ°å‚æ•°ï¼Œå¯ä»¥çœ‹çœ‹å‚æ•°æ˜¯ä¸æ˜¯å·²ç»ä¸º NULL äº†ã€‚</p><p>æŠ¥é”™è¡Œå¦‚æœæ²¡æœ‰å‚æ•°ï¼Œé‚£éœ€è¦çœ‹è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„å¯¹è±¡æ˜¯ä¸æ˜¯å·²ç»è¢«é‡Šæ”¾äº†ã€‚</p><h3 id="âŒ-No-architectures-to-compile-for-ONLY-ACTIVE-ARCH-YES-active-arch-x86-64"><a href="#âŒ-No-architectures-to-compile-for-ONLY-ACTIVE-ARCH-YES-active-arch-x86-64" class="headerlink" title="âŒ No architectures to compile for (ONLY_ACTIVE_ARCH=YES, active arch=x86_64)"></a>âŒ No architectures to compile for (ONLY_ACTIVE_ARCH=YES, active arch=x86_64)</h3><p>åŸå› æ˜¯æ¨¡æ‹Ÿå™¨ç¼ºå°‘ x86_64 æŒ‡ä»¤é›†ï¼Œåœ¨ VALID_ARCHS ä¸­ Debug æ¨¡å¼ä¸‹æ·»åŠ å¦‚ä¸‹ï¼š</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/valid_archs.png"></p><h3 id="âŒ-Building-for-iOS-Simulator-but-the-linked-library-â€˜-â€™-was-built-for-iOS"><a href="#âŒ-Building-for-iOS-Simulator-but-the-linked-library-â€˜-â€™-was-built-for-iOS" class="headerlink" title="âŒ Building for iOS Simulator, but the linked library â€˜***â€™ was built for iOS."></a>âŒ Building for iOS Simulator, but the linked library â€˜***â€™ was built for iOS.</h3><p>Xcode -&gt; File -&gt; Workspace Settings -&gt; Build System é€‰æ‹© Legacy Build Systemï¼Œå½“ç„¶è¿™ä¸ªåªèƒ½åšä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºè¿™å¥—ç¼–è¯‘ç³»ç»Ÿåœ¨æ–°ç‰ˆæœ¬ Xcode ä¸­å·²ç»åºŸå¼ƒäº†ï¼Œä¸åŒçš„å¼€å‘äººå‘˜åº”è¯¥é€‰æ‹©åŒä¸€å¥—ç¼–è¯‘ç³»ç»Ÿã€‚</p><h3 id="âŒ-Multiple-commands-produce-Info-plist"><a href="#âŒ-Multiple-commands-produce-Info-plist" class="headerlink" title="âŒ Multiple commands produce *** Info.plist"></a>âŒ Multiple commands produce *** Info.plist</h3><p>æ£€æŸ¥ä¸€ä¸‹ Build Phases -&gt; Copy Bundle resources ä¸­æ˜¯å¦æŠŠ Info.plist ä½œä¸ºèµ„æºæ–‡ä»¶è¿›è¡Œç®¡ç†äº†ï¼Œå¦‚æœå¯ä»¥æœåˆ°ï¼ŒæŠŠè¿™ä¸€è¡Œçš„å¼•ç”¨åˆ é™¤ã€‚</p><h3 id="âŒ-Property-xxx-cannot-be-found-in-forward-class-object-xxx"><a href="#âŒ-Property-xxx-cannot-be-found-in-forward-class-object-xxx" class="headerlink" title="âŒ Property xxx cannot be found in forward class object xxx"></a>âŒ Property xxx cannot be found in forward class object xxx</h3><p>å‡ºç°è¿™ç±»é”™è¯¯ï¼Œé€šå¸¸ç”±äºå¤´æ–‡ä»¶å¼•èµ·çš„ï¼š</p><ul><li><p>æ²¡æœ‰å¼•å…¥ç›¸åº”çš„å¤´æ–‡ä»¶ï¼›</p></li><li><p>æŸå¤´æ–‡ä»¶å‡ºç°äº†å¾ªç¯å¼•ç”¨ï¼šAå¼•ç”¨Bï¼ŒBå¼•ç”¨Cï¼ŒCå¼•ç”¨A ã€‚</p></li></ul><p>æ˜¯ä¸æ˜¯æ²¡æƒ³åˆ°è‡ªå·±å±…ç„¶ä¼šçŠ¯å¼•ç”¨çš„é”™è¯¯ï¼Œå“ˆå“ˆå“ˆ~</p><h3 id="âŒ-ISO-C-17-does-not-allow-â€˜registerâ€™-storage-class-specifier"><a href="#âŒ-ISO-C-17-does-not-allow-â€˜registerâ€™-storage-class-specifier" class="headerlink" title="âŒ ISO C++17 does not allow â€˜registerâ€™ storage class specifier"></a>âŒ ISO C++17 does not allow â€˜registerâ€™ storage class specifier</h3><p>C++ ä¸­çš„å…³é”®å­— <code>register</code> åœ¨ 2011 å¹´ï¼ˆC++11ï¼‰è¢«å¼ƒç”¨ï¼Œè‡ªé‚£ä»¥å <code>register</code> å·²ç»æ²¡æœ‰æ„ä¹‰ï¼Œç°åœ¨å·²ç»è¢«åˆ é™¤ã€‚å¦‚æœåœ¨ä½¿ç”¨åŸºäº C++ çš„ä¸‰æ–¹åº“æ—¶æç¤ºäº†è¿™ä¸ªé”™è¯¯ï¼Œå¯ä»¥å°è¯•ä¿®æ”¹ Xcode  ä¸­çš„ <code>Build Settings</code> -&gt; <code>C++ Language Dialect</code> å’Œ <code>C++ Standard Library</code>çš„ <code>Compiler Default</code>ã€‚</p><p>æˆ‘çš„é¡¹ç›®ä¸­æŠŠ  <code>C++ Language Dialect</code> ä» <code>GUN++17</code> é™ä¸º <code>GUN++11</code> ä¸€å®šç¨‹åº¦è§£å†³äº† C++ è¯­æ³•ä¸Šçš„é”™è¯¯ã€‚</p><h3 id="âŒ-NSKeyedUnarchiver-validateAllowedClass-forKey"><a href="#âŒ-NSKeyedUnarchiver-validateAllowedClass-forKey" class="headerlink" title="âŒ -[NSKeyedUnarchiver validateAllowedClass:forKey:]"></a>âŒ -[NSKeyedUnarchiver validateAllowedClass:forKey:]</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-[<span class="built_in">NSKeyedUnarchiver</span> validateAllowedClass:forKey:]: <span class="built_in">NSSecureCoding</span> allowed classes list contains [<span class="built_in">NSObject</span> <span class="keyword">class</span>], which bypasses security by allowing any Objective-C <span class="keyword">class</span> to be implicitly decoded. Consider reducing the scope of allowed classes during decoding by listing only the classes you expect to decode, or a more specific base <span class="keyword">class</span> than <span class="built_in">NSObject</span>. This will become an error <span class="keyword">in</span> the future. Allowed <span class="keyword">class</span> list: &#123;(</span><br><span class="line"></span><br><span class="line">  <span class="string">&quot;&#x27;NSObject&#x27; (0x7fff862bc6e8) [/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Library/Developer/CoreSimulator/Profiles/Runtimes/iOS.simruntime/Contents/Resources/RuntimeRoot/usr/lib]&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Pod"><a href="#Pod" class="headerlink" title="Pod"></a>Pod</h2><h3 id="âŒ-pod-install"><a href="#âŒ-pod-install" class="headerlink" title="âŒ pod install"></a>âŒ <code>pod install</code></h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">RPC failed; <span class="built_in">curl</span> <span class="number">56</span> LibreSSL SSL_read: SSL_ERROR_SYSCALL, errno <span class="number">54</span></span><br><span class="line"><span class="comment"># æˆ–ï¼š</span></span><br><span class="line"></span><br><span class="line">error: RPC failed; <span class="built_in">curl</span> <span class="number">18</span> transfer closed with outstanding read <span class="keyword">data</span> remaining</span><br><span class="line"><span class="comment"># æˆ–ï¼š</span></span><br><span class="line"></span><br><span class="line">fatal: the remote <span class="keyword">end</span> hung up unexpectedly</span><br></pre></td></tr></table></figure><p>å‡ºç°æ­¤ç±»é—®é¢˜ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯ç½‘ç»œå¯¼è‡´çš„ï¼Œæ¯•ç«Ÿæˆ‘ä»¬å¤©æœçš„ç½‘ç»œå¯æ˜¯å¾ˆä¸ä¸€èˆ¬çš„â€¦â€¦</p><p>å¦‚æœï¼Œæˆ‘æ˜¯è¯´å¦‚æœä½ æœ‰ç§‘å­¦ä¸Šç½‘çš„è¯ï¼Œå¯ä»¥å°è¯•ä¸‹é¢çš„é…ç½®ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config -<span class="literal">-global</span> http.https://github.com.proxy socks5://<span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">10086</span></span><br></pre></td></tr></table></figure><p>å–æ¶ˆä»£ç†ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config -<span class="literal">-global</span> -<span class="literal">-unset</span> http.https://github.com.proxy</span><br></pre></td></tr></table></figure><p>æˆ–è€…æ˜¯è¿™ç§é”™è¯¯ï¼š</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LibreSSL SSL_connect: SSL_ERROR_SYSCALL <span class="keyword">in</span> connection to github.com:<span class="number">443</span></span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ä¸€ä¸‹å·²æœ‰çš„ä»£ç†æ˜¯å¦é…ç½®çš„æœ‰é—®é¢˜ï¼Œunset ä¸€ä¸‹ã€‚</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config -<span class="literal">-global</span> -<span class="literal">-list</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOS ä¸Šçº¿ AppStore - App Store Connect ä¸æ˜¾ç¤ºæœ€æ–°ä¸Šä¼ çš„ ipaï¼Ÿ</title>
      <link href="/2019/08/19/AppStoreConnect/"/>
      <url>/2019/08/19/AppStoreConnect/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æœ€æ–°uploadçš„ipaï¼Œåœ¨Connectä¸­ä¸æ˜¾ç¤ºï¼Œä»¥ä¸ºæ˜¯ç½‘ç»œå»¶è¿Ÿï¼Œæˆ–è€…åŒæ­¥ä¿¡æ¯å»¶è¿Ÿã€‚åˆ·æ–°äº†å¥½ä¹…è¿˜æ˜¯ä¸å‡ºç°ï¼Œé‚£å°±æŸ¥æ”¶ä¸€ä¸‹é‚®ä»¶å§ï¼Œæˆ‘æ”¶åˆ°äº†å¦‚ä¸‹çš„é‚®ä»¶ã€‚ã€‚ã€‚</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/12.png" alt="my app&#39;s issues"></p><span id="more"></span><p>è¿™é‡Œé¢æ˜¯æˆ‘ä»¬åˆšåˆšæ‰“åŒ…çš„é—®é¢˜ï¼Œä¸€å®šè¦ä¸€ä¸€ä¿®æ”¹ï¼Œä¸ç„¶Connecté‡Œä¸ä¼šæ˜¾ç¤ºçš„ã€‚æˆ‘è¿™ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æƒé™æè¿°æ²¡æœ‰åŠ â€¦â€¦</p><p>æ³¨æ„ï¼Œç°åœ¨æƒé™çš„æè¿°ï¼Œå¿…é¡»å†™æ¸…æ¥šè¯¥åŠŸèƒ½ç”¨åœ¨äº†å“ªé‡Œï¼Œç±»ä¼¼â€%%%åº”ç”¨æƒ³ä½¿ç”¨æ‚¨çš„éº¦å…‹é£â€œ è¿™ç§æè¿°æ˜¯ä¸è¡Œäº†ï¼Œåº”è¯¥æ˜¯â€%%%åº”ç”¨åœ¨å½•éŸ³æ—¶éœ€è¦ä½¿ç”¨æ‚¨çš„éº¦å…‹é£â€œ ä¹‹ç±»çš„ã€‚</p><p>å½“ä½ æ”¶åˆ°ä¸‹é¢è¿™ç§é‚®ä»¶æ—¶ï¼Œæ‰è¡¨ç¤ºæˆ‘ä»¬çš„ipaæ²¡æœ‰é—®é¢˜ï¼ŒçœŸæ­£ä¸Šä¼ åˆ°Connectäº†ï¼Œè¿™ä¸ªæ—¶å€™ä½ å†å»åˆ·æ–°ä¸€ä¸‹ï¼Œåº”è¯¥å°±å¯ä»¥é€‰æ‹©å¯¹åº”çš„åŒ…äº†ã€‚</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/13.png" alt="UploadçœŸçš„æˆåŠŸäº†"></p><div contenteditable="plaintext-only"><div contenteditable="plaintext-only"><center>  <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/flag.jpeg" class width="200"></div></center></div></div>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOSä¸Šçº¿ AppStore - æ‰“åŒ…ã€upload æ—¶é‡åˆ°çš„é—®é¢˜</title>
      <link href="/2019/08/19/%E4%B8%8A%E7%BA%BF%20AppStore/"/>
      <url>/2019/08/19/%E4%B8%8A%E7%BA%BF%20AppStore/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>iOSæ‰“åŒ…ä¸Šçº¿é‡åˆ°çš„é—®é¢˜è®°å½•å’Œè§£å†³åŠæ³•ï¼š</p><blockquote><p>ERROR ITMS-90034<br>ERROR ITMS-4236<br>ERROR ITMS-90717</p></blockquote><h4 id="âŒ-ERROR-ITMS-90034"><a href="#âŒ-ERROR-ITMS-90034" class="headerlink" title="âŒ ERROR ITMS-90034:"></a>âŒ ERROR ITMS-90034:</h4><p>â€œMissing or invalid signature.The bundleâ€™com.xxx.xxxâ€™ at bundle path â€˜Payload/xxxâ€™ is not signed using an Apple submission certificate.â€</p><span id="more"></span><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/1.png" alt="ERROR ITMS-90034"></p><p>è¿™ä¸ªé”™è¯¯æ˜¾ç¤ºæˆ‘ä»¬ æ²¡æœ‰ä½¿ç”¨ç¬¦åˆè‹¹æœè§„èŒƒçš„è¯ä¹¦ç­¾åApp è€Œå¯¼è‡´çš„ã€‚<br>æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€æ­¥ä¸€æ­¥çš„æ£€æŸ¥è¯ä¹¦åˆ°åº•å“ªé‡Œå‡ºäº†é—®é¢˜ï¼š</p><ul><li>æ‰“å¼€é’¥åŒ™ä¸²ï¼Œæ‰¾åˆ°å¯¹åº”çš„ç”Ÿäº§è¯ä¹¦ï¼Œç¡®ä¿è¯ä¹¦å·²ç»æ·»åŠ åˆ°é’¥åŒ™ä¸²ä¸­ï¼Œå¹¶ä¸”æ˜¾ç¤ºè¯ä¹¦æœ‰æ•ˆã€‚</li></ul><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/2.png" alt="è¯ä¹¦æœ‰æ•ˆå¦"></p><ul><li>å¦‚æœæ˜¾ç¤º <code>æ­¤è¯ä¹¦çš„ç­¾å‘è€…æ— æ•ˆ</code> ï¼š<ul><li>è¯ä¹¦æ˜¯é€šè¿‡ä½ æ‰“åŒ…ç”µè„‘ç”³è¯·ç­¾å‘çš„ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰è¿‡æœŸçš„æ ¹è¯ä¹¦ï¼ŒæŠŠæ‰€æœ‰æ˜¾ç¤ºå·²è¿‡æœŸçš„è¯ä¹¦<code>å…¨éƒ¨åˆ é™¤</code>ã€‚</li></ul></li></ul><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/03.png" alt="æ˜¾ç¤ºå·²è¿‡æœŸçš„è¯ä¹¦"></p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/04.png" alt="åˆ é™¤æ‰€æœ‰è¿‡æœŸçš„è¯ä¹¦"></p><ul><li>è¯ä¹¦æ˜¯åˆ«äººé€šè¿‡P12çš„æ–¹å¼è½¬ç»™ä½ çš„ï¼Œçœ‹çœ‹ç§é’¥æ˜¯ä¸æ˜¯æ²¡æœ‰ï¼Œå¯ä»¥ä»ç­¾å‘P12çš„ç”µè„‘å†é‡æ–°å¯¼å‡ºä¸€ä»½ã€‚åƒä¸‹é¢è¿™ä¸ªè¯ä¹¦æ²¡æœ‰å°ç®­å¤´å°±è¡¨ç¤ºæ²¡æœ‰ç§é’¥ã€‚</li></ul><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/5.png" alt="æ²¡æœ‰ç§é’¥"></p><ul><li>ç‚¹å‡»è¯ä¹¦â€“&gt;æ˜¾ç¤ºç®€ä»‹â€“&gt;ä¿¡ä»»ï¼Œå¦‚æœæ­¤å¤„ï¼Œä¸æ˜¯ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ï¼Œå°±è¿›è¡Œæ›´æ”¹æˆâ€œä½¿ç”¨ç³»ç»Ÿé»˜è®¤â€ã€‚</li></ul><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/6.png" alt="ä¿¡ä»»è¯ä¹¦"></p><p>ä¸Šé¢è¿™äº›æ“ä½œåº”è¯¥å°±èƒ½è§£å†³é—®é¢˜äº†ï¼Œå¯ä»¥æ‰“åŒ…é‡æ–°uploadè¯•è¯•ã€‚</p><h4 id="âŒ-ERROR-ITMS-4236"><a href="#âŒ-ERROR-ITMS-4236" class="headerlink" title="âŒ ERROR ITMS-4236:"></a>âŒ ERROR ITMS-4236:</h4><p>â€œInvalid value â€˜2019-08-16 14:23:22â€™ for bundle_versionâ€ at SoftwareAssetsâ€</p><p>ä¹‹å‰Appçš„æµ‹è¯•ç‰ˆæœ¬ï¼Œä¸ºäº†æ–¹ä¾¿çŸ¥é“æ›´æ–°æ—¶é—´ï¼ŒBuildç‰ˆæœ¬å·æ˜¯é€šè¿‡ Run Script åŠ¨æ€æ³¨å…¥äº†ä¸€ä¸ªæ—¶é—´æ ¼å¼ï¼Œå¦‚ä¸‹ï¼š</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/7.png" alt="Build"></p><p>äº‹å®è¯æ˜ï¼Œä¸è®©è¿™æ ·ç”¨ï¼Œå“ˆå“ˆï¼Œä¹–ä¹–çš„æ”¹å›äº† 2.2.2 ã€‚</p><h4 id="âŒ-ERROR-ITMS-90717"><a href="#âŒ-ERROR-ITMS-90717" class="headerlink" title="âŒ ERROR ITMS-90717:"></a>âŒ ERROR ITMS-90717:</h4><p>â€œInvalid App Store Icon. The App Store Icon in the asset catalog in â€˜.appâ€™ canâ€™t be transparent nor contain an alpha channel.â€</p><p>é”™è¯¯åŸå› ï¼šåº”ç”¨å›¾æ ‡ä¸èƒ½æœ‰é€æ˜åº¦æˆ–è€…åŒ…å«Alpha é€šé“ã€‚</p><ul><li><p>è®©ç¾å·¥å»æ‰å›¾ç‰‡çš„é€æ˜åº¦ã€‚</p></li><li><p>è‡ªå·±ä¿®æ”¹å›¾ç‰‡çš„Alpha é€šé“é€‰é¡¹ä¸º å¦ã€‚é¢„è§ˆ-&gt;æ–‡ä»¶-&gt;å¯¼å‡ºä¸ºPNGï¼Œå–æ¶ˆé€‰ä¸­ã€‚å¦‚ä¸‹å›¾</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/8.png" alt="alpha"></p></li></ul><div contenteditable="plaintext-only"><div contenteditable="plaintext-only"><center>  <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/flag.jpeg" class width="200"></div></center></div></div>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git çš„æ—¥å¸¸ä½¿ç”¨å’Œæäº¤æ¨¡æ¿</title>
      <link href="/2019/05/21/Git%20%E7%9A%84%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E5%92%8C%E6%8F%90%E4%BA%A4%E6%A8%A1%E6%9D%BF/"/>
      <url>/2019/05/21/Git%20%E7%9A%84%E6%97%A5%E5%B8%B8%E4%BD%BF%E7%94%A8%E5%92%8C%E6%8F%90%E4%BA%A4%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Git-çš„ç®€å•ä½¿ç”¨"><a href="#Git-çš„ç®€å•ä½¿ç”¨" class="headerlink" title="Git çš„ç®€å•ä½¿ç”¨"></a>Git çš„ç®€å•ä½¿ç”¨</h2><p>å‰æéœ€è¦æœ‰ä¸ªå·¥ç¨‹æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬å°±å« gitUse å§ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥è¦ä½¿ç”¨Gitçš„ç›®å½•</span></span><br><span class="line">cd gitUse</span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆå§‹åŒ–ä¸€ä¸ªgitä»“åº“</span></span><br><span class="line">git init</span><br><span class="line"><span class="meta">#</span><span class="bash"> é¡¹ç›®ä¸­åº”è¯¥æœ‰ä½ ç¼–è¾‘çš„æ–‡ä»¶ç­‰ç­‰ï¼Œå°†ä»–ä»¬ä»å·¥ä½œåŒºæ”¾åˆ°ç¼“å­˜åŒºï¼Œä¹Ÿå°±æ˜¯SourceTreeä¸­çš„ â€œæš‚å­˜â€</span></span><br><span class="line">git add .</span><br><span class="line"><span class="meta">#</span><span class="bash"> æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œå¹¶å¡«å†™æœ¬æ¬¡æäº¤çš„æè¿°ä¿¡æ¯</span></span><br><span class="line">git commit -m &quot;è¿™é‡Œæ˜¯æœ¬æ¬¡æäº¤çš„æè¿°ä¿¡æ¯&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ–°å»ºè¿œç«¯çš„ä»“åº“ï¼Œå»å¯¹åº”çš„gitç½‘ç«™æ–°å»ºå°±å¥½äº†</span></span><br><span class="line">https://github.com/yylittlecat/gitUse.git</span><br><span class="line"><span class="meta">#</span><span class="bash"> å…³è”æœ¬åœ°ä¸è¿œç¨‹çš„ä»“åº“</span></span><br><span class="line">git remote add origin https://github.com/yylittlecat/gitUse.git</span><br><span class="line"><span class="meta">#</span><span class="bash"> å°†æœ¬åœ°ä»“åº“çš„ä»£ç æ¨é€åˆ°è¿œç¨‹ä»“åº“å¯¹åº”çš„åˆ†æ”¯</span></span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€ä¸ªç®€å•çš„åˆå§‹åŒ–~æäº¤è¿‡ç¨‹å°±å®Œæˆäº†ã€‚</p><h2 id="Git-çš„æäº¤æ¨¡æ¿"><a href="#Git-çš„æäº¤æ¨¡æ¿" class="headerlink" title="Git çš„æäº¤æ¨¡æ¿"></a>Git çš„æäº¤æ¨¡æ¿</h2><p>ä¸è®º SVN è¿˜æ˜¯ Git æ¥è¿›è¡Œä»£ç ç®¡ç†ï¼Œç³Ÿç³•çš„æäº¤ä¿¡æ¯ï¼Œä¸€å®šæ˜¯è¢«æ·±æ¶ç—›ç»çš„ï¼Œå¯èƒ½è‡ªå·±è¿‡æ®µæ—¶é—´çœ‹äº†éƒ½ä¼šä¸å¿ç›´è§†ã€‚ä¸Šé¢æåˆ° commit æ—¶çš„æè¿°ä¿¡æ¯ï¼Œå¦‚æœæäº¤çš„æ—¶å€™èƒ½æœ‰å¡«å†™è§„èŒƒæˆ–è€…æœ‰äº¤äº’å¼çš„çº¦æŸå°±å¥½äº†ã€‚è¿™å°±è¦ç”¨åˆ°  git commit template äº†ã€‚</p><p>æˆ‘ç”µè„‘æ˜¯ Mac ï¼Œç›®å‰ç”¨çš„æ˜¯  <a href="https://github.com/ctaodream/cz-cli">commitizen</a> è¿™ä¸ªå°å·¥å…·ã€‚</p><blockquote><p>å‚è€ƒæ–‡ç« ï¼š<a href="https://www.cnblogs.com/ctaodream/p/6066694.html">è€é¸Ÿéƒ½åº”è¯¥æ³¨æ„çš„git æäº¤è§„èŒƒ</a></p></blockquote><p>commitizen æ˜¯åŸºäº Nodeï¼Œæ‰€ä»¥å…ˆåœ¨ä½ çš„ Mac ä¸Šå®‰è£… node ç¯å¢ƒï¼Œä¹‹åå°±å¯ä»¥å¼€å§‹æˆ‘ä»¬ä¸‹é¢çš„æ­¥éª¤äº†ï¼š</p><ul><li><p>npm å…¨å±€å®‰è£…åˆ©å™¨ commitizen<br><code>npm install -g commitizen</code></p></li><li><p>å…¨å±€å®‰è£…è§„èŒƒæ¨¡æ¿ï¼Œå¥½ä¸œè¥¿å¤§å®¶äº« ğŸ˜‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å…¨å±€ä¸‹è½½æ¨¡æ¿ï¼Œcz-conventional-changelog æ˜¯è¢«ä¸šç•Œå¹¿æ³›èµè®¸çš„AngularJSçš„è§„èŒƒ</span> </span><br><span class="line">npm install -g cz-conventional-changelog </span><br><span class="line"><span class="meta">#</span><span class="bash"> è·¯å¾„</span></span><br><span class="line">echo &#x27;&#123; &quot;path&quot;: &quot;cz-conventional-changelog&quot; &#125;&#x27; &gt; ~/.czrc</span><br></pre></td></tr></table></figure></li><li><p>å±€éƒ¨å®‰è£…è§„èŒƒæ¨¡æ¿ï¼Œå°è¯•ç‰›åˆ€ ğŸ¤“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> è¿›å…¥ Git å·¥ç¨‹ç›®å½•</span></span><br><span class="line">cd gitUse</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœé¡¹ç›®æœ¬èº«å°±æ˜¯ node ç³»åˆ—çš„ï¼Œä¾‹å¦‚ web å‰ç«¯é¡¹ç›®ï¼Œ</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä½ çš„é¡¹ç›®ä¸‹åº”è¯¥æ˜¯æœ‰ä¸ª package.json æ–‡ä»¶çš„ï¼Œç›´æ¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤ å®‰è£…è§„èŒƒæ¨¡æ¿ åº”è¯¥ä¸ä¼šæŠ¥é”™ã€‚</span></span><br><span class="line">commitizen init cz-conventional-changelog  --save --save-exact</span><br><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœ æ˜¯iOS æˆ–è€… Android é¡¹ç›®ï¼Œéœ€è¦å…ˆç”Ÿæˆå¯¹åº”çš„ package.json æ–‡ä»¶</span></span><br><span class="line">npm init</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç„¶åå†æ‰§è¡Œä¸Šé¢é‚£æ¡å‘½ä»¤</span></span><br><span class="line">commitizen init cz-conventional-changelog  --save --save-exact</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯åŸç”Ÿé¡¹ç›®ï¼Œæ‰§è¡Œå®Œä¸Šé¢çš„å‘½ä»¤ï¼Œä½ ä¼šå‘ç°ï¼Œåˆå¤šäº†å‡ ä¸ªæ–‡ä»¶ ğŸ˜‚ï¼Œå°±åƒè¿™ä¸ªé¬¼æ ·å­</p></li></ul><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/git-use5.png" alt="nodeæ–‡ä»¶"></p><p>è¿™äº›æ–‡ä»¶ä¸éœ€è¦åšä»£ç ç®¡ç†ï¼Œé‚£æˆ‘ä»¬å°±åŠ åˆ° å¿½ç•¥æ–‡ä»¶ä¸­å¥½äº†ï¼Œçœ¼ä¸è§ä¸ºå‡€ï¼Œå½“ç„¶ä»–è¿˜æ˜¯èµ«èµ«åœ°ç«‹åœ¨é‚£é‡ŒğŸ¤“ï¼Œæ‰‹åŠ¨å¿½ç•¥æ–‡ä»¶å¯ä»¥å‚è€ƒè¿™é‡Œ <a href="https://www.jianshu.com/p/e64977b40334">SourceTree å…¨å±€å¿½ç•¥XCç¼–è¯‘æ–‡ä»¶æ— æ•ˆ</a> ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨  <code>git cz</code> å‘½ä»¤æ¥æäº¤ä¸€ä¸‹è¯•è¯•</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/git-use3.png" alt="git cz"></p><p>ä¼šå‡ºç°ä¸Šé¢è¿™ä¸ªç®€æ´çš„äº¤äº’ï¼Œé€šè¿‡ä¸Šä¸‹é”®æ¥é€‰æ‹© æœ¬æ¬¡ä¿®æ”¹çš„ç±»å‹ ï¼Œæ¯ä¸ªæäº¤ç±»å‹åé¢éƒ½æœ‰è¯´æ˜ï¼Œçœ‹çœ‹é€‰æ‹©å“ªä¸ªåˆé€‚ï¼Œç„¶åä¸€æ­¥ä¸€æ­¥ è·Ÿç€è¯´æ˜ enter ä¸‹å»å°± ğŸ‘Œ äº†ã€‚</p><h3 id="Type"><a href="#Type" class="headerlink" title="Type:"></a>Type:</h3><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">feat :æ–°åŠŸèƒ½ </span><br><span class="line">fix :ä¿®å¤bug  </span><br><span class="line">doc : æ–‡æ¡£æ”¹å˜</span><br><span class="line">style : ä»£ç æ ¼å¼æ”¹å˜</span><br><span class="line">refactor :æŸä¸ªå·²æœ‰åŠŸèƒ½é‡æ„</span><br><span class="line">perf :æ€§èƒ½ä¼˜åŒ–</span><br><span class="line">test :å¢åŠ æµ‹è¯•</span><br><span class="line">build :æ”¹å˜äº†buildå·¥å…· å¦‚ gruntæ¢æˆäº† npm</span><br><span class="line">revert: æ’¤é”€ä¸Šä¸€æ¬¡çš„ commit </span><br></pre></td></tr></table></figure><h3 id="Scope"><a href="#Scope" class="headerlink" title="Scope:"></a>Scope:</h3><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scope :ç”¨æ¥è¯´æ˜æ­¤æ¬¡ä¿®æ”¹çš„å½±å“èŒƒå›´ å¯ä»¥éšä¾¿å¡«å†™ä»»ä½•ä¸œè¥¿ï¼Œcommitizenä¹Ÿç»™å‡ºäº†å‡ ä¸ª å¦‚ï¼šlocation ã€browserã€compileã€‚</span><br><span class="line">ä¸è¿‡æˆ‘æ¨èä½¿ç”¨ï¼š</span><br><span class="line">all ï¼šè¡¨ç¤ºå½±å“é¢å¤§ ï¼Œå¦‚ä¿®æ”¹äº†ç½‘ç»œæ¡†æ¶  ä¼šå¯¹çœŸä¸ªç¨‹åºäº§ç”Ÿå½±å“</span><br><span class="line">loationï¼š è¡¨ç¤ºå½±å“å°ï¼ŒæŸä¸ªå°å°çš„åŠŸèƒ½</span><br><span class="line">moduleï¼šè¡¨ç¤ºä¼šå½±å“æŸä¸ªæ¨¡å— å¦‚ç™»å½•æ¨¡å—ã€é¦–é¡µæ¨¡å— ã€ç”¨æˆ·ç®¡ç†æ¨¡å—ç­‰ç­‰</span><br></pre></td></tr></table></figure><h3 id="Others"><a href="#Others" class="headerlink" title="Others:"></a>Others:</h3><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">subject: ç”¨æ¥ç®€è¦æè¿°æœ¬æ¬¡æ”¹åŠ¨ï¼Œæ¦‚è¿°å°±å¥½äº†</span><br><span class="line">body:å…·ä½“çš„ä¿®æ”¹ä¿¡æ¯ åº”è¯¥å°½é‡è¯¦ç»†</span><br><span class="line">footerï¼šæ”¾ç½®å†™å¤‡æ³¨å•¥çš„ï¼Œå¦‚æœæ˜¯ bug ï¼Œå¯ä»¥æŠŠbug idæ”¾å…¥</span><br></pre></td></tr></table></figure><p>æœ€åä¼šçœ‹åˆ°è¿™æ ·çš„ç»“æœï¼š</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/git-use2.png" alt="git cz result"></p><p>ä»SourceTree å’Œ è¿œç¨‹ä»“åº“ çœ‹ä¸€ä¸‹æäº¤è®°å½•ï¼Œå¯ä»¥ç›´è§‚çœ‹åˆ°è¯¥æ¬¡æäº¤ä¿®æ”¹çš„æè¿°ï¼š</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/git-use4.png" alt="SourceTree"></p><h2 id="Gitçš„ç®€å•å›æ»šæ“ä½œ"><a href="#Gitçš„ç®€å•å›æ»šæ“ä½œ" class="headerlink" title="Gitçš„ç®€å•å›æ»šæ“ä½œ"></a>Gitçš„ç®€å•å›æ»šæ“ä½œ</h2><p>å°±ç®—Gitä¸­åˆ†æ”¯ã€æäº¤ã€gitflow åˆ†çš„éƒ½å¾ˆæ¸…æ¥šï¼Œä¹Ÿéš¾å…ä¼šé‡åˆ°éœ€è¦å›é€€åˆ°å‰å‡ ä¸ªç‰ˆæœ¬çš„å°´å°¬å¢ƒåœ°ï¼Œä½ éƒ½æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼Ÿæ–½å±•<code>CVå¤§æ³•</code>å—ï¼ŸğŸ˜‚</p><p>ä¸¤ä¸ªç®€å•çš„å‘½ä»¤å°±å¯ä»¥è®©ä»–æ»šå›å»ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git log -(éœ€è¦æŸ¥çœ‹çš„ç‰ˆæœ¬æ¡æ•°)</span><br><span class="line">git reset --hard [æäº¤å¯¹åº”çš„ç¼–å·]</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥è¯•è¯•æŸ¥çœ‹æœ€è¿‘çš„ä¸‰ä¸ªæäº¤æ˜¯æ€ä¹ˆæ ·çš„ <code>git log -3</code></p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/git-use1.png" alt="git log -3"></p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯ä¸€ä¸ªæäº¤ä»ä¸Šåˆ°ä¸‹éƒ½æœ‰ï¼Œå¯¹åº”çš„å“ˆå¸Œå€¼ã€ä½œè€…ã€é‚®ç®±ã€æ—¥æœŸï¼Œä»¥åŠæˆ‘ä¸Šé¢æåˆ°çš„<code>æäº¤ä¿¡æ¯</code>ï¼Œéå¸¸é‡è¦ï¼Œä¸ç„¶ä½ éƒ½ä¸çŸ¥é“è¿™æ¬¡æäº¤æ˜¯ä¸ºäº†ä»€ä¹ˆï¼Œç”šè‡³æ‰¾ä¸åˆ°æ»šå›å»çš„ä½ç½®ã€‚</p><p>å‡è®¾æˆ‘ä»¬è¦å›æ»šåˆ°ç¬¬ä¸‰æ¡ï¼Œä¹Ÿå°±æ˜¯<code>5d9c3b1dab8de8932ebf8deffef821cf2052fd65</code> è¿™ä¸€æ¡ï¼Œæ‰§è¡Œå‘½ä»¤<code>git reset --hard 5d9c3b1dab8de8932ebf8deffef821cf2052fd65</code>  å³å¯ï¼Œå½“å‰åˆ†æ”¯å°±å›é€€åˆ°è¿™ä¸ªç‰ˆæœ¬äº†ã€‚</p><p>å›é€€åï¼Œæˆ‘ä»¬å¯èƒ½ä¼šä¿®æ”¹ä»£ç ï¼Œè¿™ä¸ªæ—¶å€™åˆæœ‰æ–°çš„é—®é¢˜äº†ï¼Œä»¥å‰çš„æäº¤å·²ç»pushåˆ°è¿œç¨‹ä»“åº“ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç›®å‰çš„ä»£ç è½åä¸¤ä¸ªç‰ˆæœ¬ï¼ŒåŒæ—¶æœ‰ä¸€ä¸ªæ–°çš„commitå¾…æäº¤ã€‚</p><p>ä¸¤ä¸ªæ–¹å¼ï¼š</p><p>1ã€å¼ºåŠ¿ä¸€ç‚¹ï¼šç¡¬æ</p><p>  <code>git push -f origin [åˆ†æ”¯åç§°]</code></p><p>2ã€å§”å©‰çš„ï¼šå…ˆæ‹‰å»-&gt;è§£å†³å†²çª-&gt;é‡æ–°æäº¤æ•´åˆåçš„ä»£ç </p><p><code>git pull origin develop</code> -&gt; <code>solve conflct</code> -&gt; <code>git push -u origin develop</code></p><p>è®°å¾—å†™æ¸…æ¥šæäº¤ä¿¡æ¯é¸­ï¼ï¼ï¼ï¼ï¼</p><p>è¿™æ ·ä¸€ä¸ªç®€å•çš„å›æ»šå°±å®Œæˆäº†ã€‚</p><p>ä¸è¦å‘Šè¯‰æˆ‘ä½ ä¸ä¼šè§£å†³å†²çªã€‚ğŸ¤“ğŸ¤“ğŸ¤“ğŸ¤“ğŸ¤“</p><h2 id="Git-å…³è”å¯¹åº”çš„-JIRA-ä»»åŠ¡"><a href="#Git-å…³è”å¯¹åº”çš„-JIRA-ä»»åŠ¡" class="headerlink" title="Git å…³è”å¯¹åº”çš„ JIRA ä»»åŠ¡"></a>Git å…³è”å¯¹åº”çš„ JIRA ä»»åŠ¡</h2><blockquote><p> <a href="https://www.cnblogs.com/hailongchen/p/9004565.html">Gitå…³è”JIRAçš„issue</a></p></blockquote><p>åœ¨æäº¤ä¿®æ”¹çš„æ—¶å€™ï¼Œæè¿°ä¿¡æ¯åŠ ä¸Šåœ¨ JIRA çš„ä»»åŠ¡/é—®é¢˜ ç¼–å·ï¼Œå°±å¯ä»¥å…³è”åˆ°ä¸€èµ·äº†ã€‚</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/git-use6.png" alt="æ·»åŠ JIRA ä»»åŠ¡ç¼–å·"></p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/git-use0.png" alt="JIRA è¯„è®ºç»“æœ"></p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/flag.jpeg" alt="â€œå°±æ˜¯è¿™ä¹ˆä¸è¦è„¸â€ä¸“ç”¨å›¾"></p>]]></content>
      
      
      
        <tags>
            
            <tag> 7788 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac ä¸‹ IDEA æ— æ³•å¯åŠ¨çš„é—®é¢˜</title>
      <link href="/2019/01/24/Mac%E4%B8%8BIDEA%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2019/01/24/Mac%E4%B8%8BIDEA%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è¦ä½¿ç”¨IDEAï¼Œçªç„¶æç¤ºæ‰“ä¸å¼€ï¼Œä¸è¦æ…Œï¼Œé—®é¢˜ä¸å¤§ï¼ŒæŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤è¯•è¯•å…ˆï¼Ÿ</p><blockquote><p>æ‰“å¼€finder-&gt;åº”ç”¨ç¨‹åº-&gt;idea.app-&gt;å³é”®-&gt;æ˜¾ç¤ºåŒ…å†…å®¹-&gt;ç„¶åMaxOS-&gt;åŒå‡»shellè„šæœ¬ï¼ˆideaï¼‰</p></blockquote><span id="more"></span><p>è¿™æ ·æ˜¯é€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼æ¥å¯åŠ¨IDEAã€‚<br>ä»”ç»†çœ‹é‡Œé¢çš„æç¤ºï¼Œå°¤å…¶Errorå¼€å¤´çš„ä¿¡æ¯ï¼Œåº”è¯¥ä¼šæœ‰å…·ä½“åŸå› ã€‚</p><p>æˆ‘çš„IDEA ä½¿ç”¨çš„â€œç ´è§£ç‰ˆâ€â€¦â€¦you knowï¼Ÿ ç„¶å<code>JetbrainsCrack-3.1-release-enc.jar</code> è¢«æˆ‘ä¸å°å¿ƒåˆ äº†ï¼Œæ”¾å›åŸä½å°±å¥½äº†â€¦â€¦</p>]]></content>
      
      
      
        <tags>
            
            <tag> Mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Warning! PATH is not properly set up, &#39;/Users/***/.rvm/gems/ruby-2.4.0/bin&#39; is not at first place.</title>
      <link href="/2018/12/27/Warning!PATH-is/"/>
      <url>/2018/12/27/Warning!PATH-is/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å¿½ç„¶æœ‰ä¸€å¤©ã€‚ã€‚ã€‚ä½¿ç”¨ <code>cocoapods</code> å®‰è£…ä¸‰æ–¹åº“ä¸å¥½ä½¿äº†ï¼ŒæŠ¥äº†å¥½é•¿çš„é”™ã€‚ã€‚ã€‚</p><span id="more"></span><p>å‰<br>æ–¹<br>æœ‰<br>è¶…<br>é•¿<br>å›¾<br>ç‰‡<br>ï¼Œ<br>æ…<br>ç‚¹<br>ã€‚</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/031.png" alt="error"></p><blockquote><p>æŒ‰ç…§é‡Œé¢çš„æç¤ºå»githubæœç´¢äº†cocoapodsä½¿ç”¨ä¸­çš„é—®é¢˜ï¼Œå¤šæ•°éƒ½æ˜¯è¯´ï¼Œé‡è£…gemã€‚ç¬”è€…ä¸æ˜¯å¾ˆæ‡‚è¿™äº›ï¼Œgemï¼Œrubyï¼Œcocoapodsï¼Œå…¨éƒ½æ›´æ–°äº†ä¸€éã€‚ä¾æ—§æ˜¯è¿™ä¸ªé—®é¢˜ã€‚</p></blockquote><p>ç¡äº†ä¸€è§‰é†’æ¥åï¼Œç¬”è€…è®¤çœŸçœ‹äº†çœ‹é”™è¯¯æç¤ºï¼Œæ³¨æ„åˆ°è¿™å¥ï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### Command</span></span><br><span class="line"></span><br><span class="line">/Users/æˆ‘/.rvm/gems/ruby-<span class="number">2.4</span>.<span class="number">0</span>/bin/pod install</span><br></pre></td></tr></table></figure><p>æ—¢ç„¶å‘½ä»¤æ‰§è¡Œæ–‡ä»¶åœ¨è¿™ä¸ªè·¯å¾„ä¸‹ï¼Œå¯èƒ½æ˜¯rvmå‡ºäº†é—®é¢˜ï¼Œæ‰§è¡Œ <code>rvm list</code>æŸ¥çœ‹rubyç‰ˆæœ¬</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/32.png" alt="rvm list"></p><p>æ³¨æ„åˆ°é‡Œé¢æœ‰ä¸ª <code>Warningï¼</code> å’Œå‡ ä¸ªå»ºè®®çš„æ“ä½œï¼ˆåšäº†ä¹Ÿæ²¡ç”¨ï¼Œæ˜¯çš„ï¼Œæˆ‘è¯•è¿‡äº†ï¼‰ğŸ˜Œ</p><blockquote><p>Warning! PATH is not properly set up, â€˜/Users/***/.rvm/gems/ruby-2.4.0/binâ€™ is not at first place.<br>ä»¿ä½›æ˜¯åœ¨è¯´ï¼Œrubyä¸åœ¨æœ€åˆï¼Ÿé¦–å…ˆï¼Ÿç¬¬ä¸€ä¸ªä½ç½®ï¼Ÿ<br>æ€»ä¹‹æŸäº›ä¸œè¥¿è¢«æ”¹äº†ï¼ˆä½†æˆ‘çœŸçš„æ²¡åŠ¨ï¼‰</p></blockquote><p>æœ¬äººè„¾æ°”æš´èºï¼Œæ‰€ä»¥æƒ³ç€ï¼Œæ—¢ç„¶åŠ¨äº†ï¼Œé‚£å°±æš´åŠ›è¿˜åŸå§ï¼Œæ‰§è¡Œ <code>rvm -h</code> æŸ¥çœ‹rvm çš„ç¥æ“ä½œä»¬</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/33.png" alt="rvm -h"></p><p>æ³¨æ„åˆ°äº†å›¾ä¸­çš„è¿™å‡ ä¸ªå‘½ä»¤ï¼š<code>rvm maintenance</code> rvm çš„ç»´æŠ¤ï¼Ÿäºæ˜¯ä¹è¯•äº†ä¸€ä¸‹<br><code>rvm reset</code><br><code>rvm reset</code><br><code>rvm reset</code><br><code>rvm reset</code><br><code>rvm reset</code><br>é‡è¦çš„ äº‹æƒ…è¯´äº”éã€‚<br>commandé‡Œå¹¶æ²¡æœ‰ä»€ä¹ˆè¾“å‡ºï¼Œä»¿ä½›ç§˜å¯†åšäº†ä¸€äº›äº‹æƒ…ï¼Œç„¶åå†è¯•äº†ä¸‹ <code>pod install</code> å°±ğŸ‘Œäº†ã€‚<br>çœ‹åˆ°äº†ä¹…è¿çš„ç»¿è‰²ï¼Œæ”¾å¿ƒäº†ã€‚</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/34.png" alt="ç»¿è‰²èµ°ä¸€æ³¢"></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> Mac </tag>
            
            <tag> Xcode </tag>
            
            <tag> pod </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å»æ‰UIWebViewåº•éƒ¨çš„é»‘æ¡</title>
      <link href="/2018/12/13/%E5%8E%BB%E6%8E%89UIWebView%E5%BA%95%E9%83%A8%E7%9A%84%E9%BB%91%E6%9D%A1/"/>
      <url>/2018/12/13/%E5%8E%BB%E6%8E%89UIWebView%E5%BA%95%E9%83%A8%E7%9A%84%E9%BB%91%E6%9D%A1/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>webview åœ¨å¤šæ¬¡åˆ·æ–°å†…å®¹åï¼Œæ­£æ–‡çš„ä¸‹é¢æœ‰ä¸€å—è«åå…¶å¦™çš„é»‘è‰²åŒºåŸŸï¼Œå¦‚å›¾ä¸€ï¼Œæœ¬ä»¥ä¸ºæ˜¯ç”±äºæˆ‘æ”¹äº†â€œUIWebDocumentViewâ€ çš„åŸå› ï¼Œçœ‹åˆ°è¿™ä¸ªå±æ€§æ”¹äº†ä¸€ä¸‹ï¼Œå‘ç°å±…ç„¶å¥½äº†ã€‚ã€‚ã€‚<br><code>opaque é»˜è®¤æ˜¯YES</code><br>æ”¹ä¸º <code>self.webView.opaque = NO;</code></p><span id="more"></span><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/3.png" alt="å›¾ä¸€"></p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/4.png" alt="å›¾äºŒ"></p><p>çœ‹æ–‡æ¡£é‡Œé¢çš„æ³¨é‡Šï¼Œå‘ç°ï¼Œæˆ‘çš„è‹±æ–‡çœŸçš„ä¸å’‹åœ°ï¼Œè‡ªå·±ç¿»è¯‘å§ã€‚ã€‚ã€‚ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">getter</span>=isOpaque) <span class="built_in">BOOL</span>  opaque;                     </span><br><span class="line"><span class="comment">// default is YES. opaque views must fill their entire bounds or the results are undefined. </span></span><br><span class="line"><span class="comment">//the active CGContext in drawRect: will not have been cleared and may have non-zeroed pixels</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> WebView </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mailcore 2 iOS  ä¹‹äºŒ SMTP</title>
      <link href="/2018/12/12/mailcore2-iOS%E4%B9%8B%E4%BA%8CSMTP/"/>
      <url>/2018/12/12/mailcore2-iOS%E4%B9%8B%E4%BA%8CSMTP/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>èµ·æºè§ <a href="http://atommygirl.github.io/2018/02/02/2018-02-02-mailcore-2-iOS-%E4%B9%8B%E4%B8%80-IMAP/">mailcore2-ios  ä¹‹ä¸€ IMAP</a></p><p>ä¸Šä¸€ç¯‡å¤§è‡´è¯´äº†ä¸‹IMAPåè®®ä¸­çš„ç®€å•ä½¿ç”¨ï¼Œçœ‹åˆ°æ–‡ç« æœ‰äººçœ‹ï¼Œä¸ºäº†æˆ‘çš„<code>ä¸‰ä¸ª</code>ğŸ‘¨â€ğŸ’»â€ğŸ‘¨â€ğŸ’»â€ğŸ‘¨â€ğŸ’»â€ç²‰ä¸ï¼Œé‚£æˆ‘ç»§ç»­æ›´æ–°ä¸€ä¸‹ï¼Œ</p><p>å¸Œæœ›å¯¹ä½ ä»¬æœ‰å¸®åŠ©ï¼Œä¹Ÿåšä¸ªæ²Ÿé€šäº¤æµã€‚</p><ul><li><p>IMAP <a href="http://zhengyatian.github.io/2018/02/02/2018-02-02-mailcore-2-iOS-%E4%B9%8B%E4%B8%80-IMAP/">mailcore2-ios  ä¹‹ä¸€ IMAP</a></p></li><li><p>SMTP</p>  <span id="more"></span><ul><li>ç™»å½•/ç”¨æˆ·éªŒè¯</li><li>åˆ›å»ºé‚®ä»¶ä½“</li><li>é™„ä»¶æ·»åŠ </li><li>å‘é€</li><li>å‘é€æˆåŠŸå<code>æ‰‹åŠ¨</code>æ·»åŠ åˆ°<code>â€œå·²å‘é€â€</code>æ–‡ä»¶å¤¹</li></ul></li></ul><h3 id="SMTP"><a href="#SMTP" class="headerlink" title="SMTP"></a>SMTP</h3><h4 id="1ã€ç™»å½•-ç”¨æˆ·éªŒè¯"><a href="#1ã€ç™»å½•-ç”¨æˆ·éªŒè¯" class="headerlink" title="1ã€ç™»å½•/ç”¨æˆ·éªŒè¯"></a>1ã€ç™»å½•/ç”¨æˆ·éªŒè¯</h4><p>â€‹    ä¸è®ºå“ªç§åè®®ï¼Œéƒ½éœ€è¦å…ˆéªŒè¯é‚®ç®±åœ°å€/æœåŠ¡å™¨ã€å¯†ç ã€ç«¯å£ç­‰ï¼ŒSMTPä¹Ÿä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥ä¸éªŒè¯ï¼Œå¤§ä¸äº†å°±æ˜¯å‘ä¸å‡ºå»é‚®ä»¶ã€‚ã€‚ã€‚ğŸ¤“ğŸ¤“ğŸ¤“ğŸ¤“ğŸ¤“</p><p>åˆ›å»ºsessionï¼Œéƒ½ç±»ä¼¼çš„</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.smtpSession.hostname = session.smtpHost;<span class="comment">//smtp.***.com</span></span><br><span class="line"><span class="keyword">self</span>.smtpSession.username = session.username;<span class="comment">//littlecat@xxx.com.cn</span></span><br><span class="line"><span class="keyword">self</span>.smtpSession.password = session.password;<span class="comment">//password</span></span><br><span class="line"><span class="keyword">self</span>.smtpSession.port     = (<span class="keyword">unsigned</span> <span class="keyword">int</span>)session.smtpPort;<span class="comment">//25ã€465ã€587ï¼Ÿ</span></span><br><span class="line"><span class="keyword">self</span>.smtpSession.connectionType = session.smtpIsSSL ? MCOConnectionTypeTLS: MCOConnectionTypeClear;<span class="comment">//å–å†³äºä½ çš„é‚®ä»¶æœåŠ¡å™¨æ˜¯ä¸æ˜¯SSLçš„ï¼›</span></span><br><span class="line"><span class="keyword">self</span>.smtpSession.authType = MCOAuthTypeSASLLogin;<span class="comment">//sessionæ ¡éªŒçš„ç±»å‹ï¼Œè¿™é‡Œé€‰çš„ç™»å½•ï¼Œå…¶ä»–è¿˜æ²¡ææ˜ç™½(æ²¡çœ‹ã€‚ã€‚)ğŸ˜Œ</span></span><br></pre></td></tr></table></figure><p>æ ¡éªŒé‚®ç®±ä¿¡æ¯</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MCOSMTPOperation *smtpOperation = [smtpSession loginOperation];</span><br><span class="line">[smtpOperation start:^(<span class="built_in">NSError</span> * error) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;finished checking SMTP account.&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (error == <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="comment">//now ,you can send email.</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;error check smtp account: %@&quot;</span>, error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><h4 id="2ã€åˆ›å»ºé‚®ä»¶"><a href="#2ã€åˆ›å»ºé‚®ä»¶" class="headerlink" title="2ã€åˆ›å»ºé‚®ä»¶"></a>2ã€åˆ›å»ºé‚®ä»¶</h4><ul><li>create message builder;</li><li>set sender(from)ã€receiverï¼ˆtoï¼‰ã€cc and bcc;</li><li>set body (html body  or  plain text body);</li></ul><p>æ‡’å¾—æ­£ç»æ‰“å­—äº†ï¼Œbite meï¼ğŸ™„ğŸ™„ğŸ™„ğŸ™„ğŸ™„ğŸ™„ğŸ™„ğŸ™„ğŸ™„ğŸ™„</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)messageBuildFrom:(<span class="built_in">NSString</span> *)displayName <span class="comment">// å‘ä»¶äººæ˜µç§°ï¼Œå¯ä»¥ä¸è®¾ç½®ï¼›</span></span><br><span class="line">                 mailBox:(<span class="built_in">NSString</span> *)mail  <span class="comment">//å‘ä»¶äººé‚®ç®±åœ°å€ï¼›</span></span><br><span class="line">                      to:(<span class="built_in">NSArray</span> *)to  <span class="comment">//æ”¶ä»¶äººï¼ˆé‚®ç®±åœ°å€å­—ç¬¦ä¸²æ ¼å¼ï¼Œä¸‹åŒï¼‰ï¼›</span></span><br><span class="line">                      cc:(<span class="built_in">NSArray</span> *)cc  <span class="comment">//æŠ„é€äººï¼›</span></span><br><span class="line">                     bcc:(<span class="built_in">NSArray</span> *)bcc  <span class="comment">//å¯†é€äººï¼›</span></span><br><span class="line">                 subject:(<span class="built_in">NSString</span> *)subject  <span class="comment">//é‚®ä»¶ä¸»é¢˜ï¼›</span></span><br><span class="line">                textBody:(<span class="built_in">NSString</span> *)body  <span class="comment">//é‚®ä»¶æ­£æ–‡ï¼Œæˆ‘è¿™é‡Œæ˜¯å¸¦æ ‡ç­¾çš„htmlæ–‡æœ¬ï¼›</span></span><br><span class="line">                 attachs:(<span class="built_in">NSDictionary</span> *)attachs  <span class="comment">//é™„ä»¶sï¼ˆæ–‡ä»¶åç§°å’ŒNSDataæ ¼å¼æ•°æ®ï¼‰ï¼›</span></span><br><span class="line">                htmlBody:(MCOAbstractMessage *)msgParser  <span class="comment">//è½¬å‘æ—¶çš„åŸé‚®ä»¶ï¼›</span></span><br><span class="line">         completeHandler:(<span class="keyword">void</span>(^)())complete</span><br><span class="line">                   error:(<span class="keyword">void</span>(^)(<span class="built_in">NSError</span> *error))fail</span><br><span class="line">&#123;</span><br><span class="line">    MCOMessageBuilder *msgBuilder = [[MCOMessageBuilder alloc] init];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//header;</span></span><br><span class="line">    <span class="keyword">if</span> (displayName != <span class="literal">nil</span>) &#123;</span><br><span class="line">        msgBuilder.header.from = [MCOAddress addressWithDisplayName:displayName mailbox:mail];</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        msgBuilder.header.from = [MCOAddress addressWithMailbox:mail];</span><br><span class="line">    &#125;</span><br><span class="line">    msgBuilder.header.to      = [<span class="keyword">self</span> mailStringToMCOAddress:to];<span class="comment">//å­—ç¬¦ä¸²æ ¼å¼çš„é‚®ç®±åœ°å€ï¼Œè¦è½¬æˆaddressç±»ï¼›</span></span><br><span class="line">    msgBuilder.header.cc      = [<span class="keyword">self</span> mailStringToMCOAddress:cc];</span><br><span class="line">    msgBuilder.header.bcc     = [<span class="keyword">self</span> mailStringToMCOAddress:bcc];</span><br><span class="line">    msgBuilder.header.subject = subject;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//body</span></span><br><span class="line">    [msgBuilder setHTMLBody:body];</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//------è§ä¸‹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">NSArray</span> *)mailStringToMCOAddress:(<span class="built_in">NSArray</span> *)arr</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">NSMutableArray</span> *temp = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSString</span> *str <span class="keyword">in</span> arr) &#123;</span><br><span class="line">        MCOAddress *add = [MCOAddress addressWithMailbox:str];</span><br><span class="line">        [temp addObject:add];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> temp.copy;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3ã€é™„ä»¶å¤„ç†"><a href="#3ã€é™„ä»¶å¤„ç†" class="headerlink" title="3ã€é™„ä»¶å¤„ç†"></a>3ã€é™„ä»¶å¤„ç†</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)messageBuildFrom:(<span class="built_in">NSString</span> *)displayName</span><br><span class="line">                 mailBox:(<span class="built_in">NSString</span> *)mail</span><br><span class="line">                      to:(<span class="built_in">NSArray</span> *)to</span><br><span class="line">                      cc:(<span class="built_in">NSArray</span> *)cc</span><br><span class="line">                     bcc:(<span class="built_in">NSArray</span> *)bcc</span><br><span class="line">                 subject:(<span class="built_in">NSString</span> *)subject</span><br><span class="line">                textBody:(<span class="built_in">NSString</span> *)body</span><br><span class="line">                 attachs:(<span class="built_in">NSDictionary</span> *)attachs</span><br><span class="line">                htmlBody:(MCOAbstractMessage *)msgParser</span><br><span class="line">         completeHandler:(<span class="keyword">void</span>(^)())complete</span><br><span class="line">                   error:(<span class="keyword">void</span>(^)(<span class="built_in">NSError</span> *error))fail</span><br><span class="line">&#123;</span><br><span class="line">    MCOMessageBuilder *msgBuilder = [[MCOMessageBuilder alloc] init];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// -------è§ä¸Š ã€‚ã€‚ã€‚ ------//</span></span><br><span class="line">    <span class="keyword">if</span> (msgParser != <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="comment">//é™„åŠ èµ„æºï¼Œ</span></span><br><span class="line">        <span class="built_in">NSArray</span> *inAttach = msgParser.htmlInlineAttachments;</span><br><span class="line">        <span class="keyword">for</span> (MCOAttachment *attach <span class="keyword">in</span> inAttach) &#123;</span><br><span class="line">            <span class="built_in">NSString</span> * path = [<span class="built_in">NSTemporaryDirectory</span>() stringByAppendingPathComponent:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@&quot;%@_%@&quot;</span>,msgParser.header.messageID,attach.filename]];</span><br><span class="line">            <span class="built_in">NSData</span> *data = [<span class="built_in">NSData</span> dataWithContentsOfFile:path];</span><br><span class="line">            <span class="keyword">if</span> (data) &#123;</span><br><span class="line">                MCOAttachment *temp = [MCOAttachment attachmentWithData:data filename:attach.filename];</span><br><span class="line">                temp.inlineAttachment = <span class="literal">YES</span>;</span><br><span class="line">                [msgBuilder addRelatedAttachment:temp];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//çœ‹æ¥å£æ–‡æ¡£çš„æ„æ€ï¼Œä¸Šé¢æ˜¯æŠŠè½¬å‘çš„é‚®ä»¶ä¸­çš„é™„ä»¶æ·»åŠ ä¸Šï¼Œ</span></span><br><span class="line">    <span class="comment">//å¯æ˜¯å¹¶ä¸èµ·ä½œç”¨ã€‚ã€‚ã€‚é‡‡å–çš„æ–¹æ³•æ˜¯ï¼Œä¸‹é¢å¾ªç¯å†æ·»åŠ ä¸€æ¬¡ã€‚ã€‚ã€‚ã€‚ğŸ¤§ğŸ¤§ğŸ¤§ğŸ¤§ğŸ¤§</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//é™„ä»¶</span></span><br><span class="line">    <span class="keyword">if</span> (attachs) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">NSString</span> *name <span class="keyword">in</span> attachs.allKeys) &#123;</span><br><span class="line">            MCOAttachment *attach = [MCOAttachment attachmentWithData:[attachs objectForKey:name] filename:name];</span><br><span class="line">            [msgBuilder addAttachment:attach];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//send</span></span><br><span class="line">    <span class="comment">//--------è§ä¸‹</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4ã€å‘é€é‚®ä»¶"><a href="#4ã€å‘é€é‚®ä»¶" class="headerlink" title="4ã€å‘é€é‚®ä»¶"></a>4ã€å‘é€é‚®ä»¶</h4><p>é‚®ä»¶ä¹Ÿåˆ›å»ºäº†ï¼Œé™„ä»¶æ·»åŠ å®Œï¼Œç»ˆäºè¦å‘é€äº†ï¼Œä½†æ˜¯è¦æ³¨æ„çš„æ˜¯<code>å‘é€æ“ä½œæˆåŠŸå®Œæˆåï¼Œå¯¹æ–¹ç¡®å®å¯ä»¥æˆåŠŸæ”¶åˆ°ï¼Œä½†æ˜¯åœ¨å‘é€æ–¹çš„â€œå·²å‘é€â€æ˜¯æ²¡æœ‰çš„ï¼Œéœ€è¦æ‰‹åŠ¨appendä¸€ä»½è¿‡å»</code>ã€‚<br>æ‰§è¡Œappendæ“ä½œï¼Œéœ€è¦ç”¨<code>imapSession</code>çš„ï¼Œä¸è¦æé”™äº†ã€‚ğŸ˜…<br> â€œå·²å‘é€â€æ–‡ä»¶å¤¹çš„filepathï¼Œå¯èƒ½æ˜¯ <code>Sentã€Sent Messages</code>ç­‰ç­‰ï¼Œå…·ä½“çœ‹ä½ è§£æçš„é‚®ç®±æœåŠ¡å™¨ï¼Œä¸ä¸€å®šéƒ½æ˜¯Sent å“¦ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//send</span></span><br><span class="line"><span class="built_in">NSData</span> *rfc822 = [msgBuilder data];</span><br><span class="line">MCOSMTPSendOperation *send = [smtpSession sendOperationWithData:rfc822];</span><br><span class="line">[send start:^(<span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">        fail(error);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//å‘é€æˆåŠŸåï¼Œæ‰‹åŠ¨æ·»åŠ åˆ°â€œå·²å‘é€â€ï¼›</span></span><br><span class="line">        MCOIMAPAppendMessageOperation *op = [imapSession appendMessageOperationWithFolder:[MMIMAPTool getVirtualNameFor:<span class="string">@&quot;Sent&quot;</span>] messageData:rfc822 flags:MCOMessageFlagMDNSent];</span><br><span class="line">        [op start:^(<span class="built_in">NSError</span> *error, uint32_t createdUID) &#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@&quot;create sent message :%@\nerror:%@&quot;</span>, @(createdUID), error);</span><br><span class="line">        &#125;];</span><br><span class="line">        complete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šä¸Šä¸€ç¯‡IMAPä½¿ç”¨ä¸­æåˆ°è¿‡ï¼Œåˆ›å»ºè‰ç¨¿ï¼Œè¿‡ç¨‹å’Œè¿™ä¸ªç±»ä¼¼ï¼Œä¸è¿‡æœ€åæ‰§è¡Œappend æ˜¯ æ”¾åˆ° <code>è‰ç¨¿ç®±</code>ï¼Œä¸æ˜¯<code>å·²å‘é€</code>äº†ã€‚</p><h4 id="POP-è¿˜æ²¡å†™"><a href="#POP-è¿˜æ²¡å†™" class="headerlink" title="POP è¿˜æ²¡å†™"></a>POP <a href>è¿˜æ²¡å†™</a></h4>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> é‚®ç®± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>URL Loading System ä¹‹ NSURLResponse/URLResponse</title>
      <link href="/2018/04/20/NSURLResponse/"/>
      <url>/2018/04/20/NSURLResponse/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="NSURLResponse"><a href="#NSURLResponse" class="headerlink" title="NSURLResponse"></a>NSURLResponse</h2><blockquote><p>NSURLResponse/URLResponse ç±»ä¸­å­˜æ”¾è¯·æ±‚çš„å›æ‰§ä¿¡æ¯ï¼Œåœ¨å‘é€ç½‘ç»œè¯·æ±‚æ—¶ï¼Œå¦‚æœè¯·æ±‚æˆåŠŸï¼Œé¦–å…ˆä¼šæ¥æ”¶åˆ°æœåŠ¡ç«¯çš„å›æ‰§ä¿¡æ¯ï¼Œç›´æ¥å¼€å§‹æ¥æ”¶å…·ä½“çš„è¿”å›æ•°æ®ã€‚ä¸åè®®æˆ–URLæ–¹æ¡ˆæ— å…³ã€‚</p></blockquote><p>ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªå±æ€§ï¼Œå¹¶ä¸”éƒ½æ˜¯<code>åªè¯»</code>çš„ï¼Œå› ä¸ºæ˜¯æœåŠ¡å™¨å¸®æˆ‘ä»¬æŒ‡å®šçš„ï¼Œæ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬æ˜¯ä¸èƒ½è‡ªå®šä¹‰è¿™äº›å±æ€§çš„ï¼š</p><h3 id="url"><a href="#url" class="headerlink" title="url"></a>url</h3><blockquote><p>æœ¬æ¬¡è¯·æ±‚çš„URLåœ°å€</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">var</span> url: <span class="type">URL</span>? &#123; <span class="keyword">get</span> &#125;</span><br></pre></td></tr></table></figure><h3 id="mimeType"><a href="#mimeType" class="headerlink" title="mimeType"></a>mimeType</h3><blockquote><p>è¿”å›æ•°æ®çš„æ•°æ®ç±»å‹ï¼ˆçº¯æ–‡æœ¬ï¼Œè§†é¢‘ï¼Œè¯­éŸ³ï¼Œè¶…æ–‡æœ¬ç­‰ï¼‰</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">var</span> mimeType: <span class="type">String</span>? &#123; <span class="keyword">get</span> &#125;</span><br></pre></td></tr></table></figure><h3 id="expectedContentLength"><a href="#expectedContentLength" class="headerlink" title="expectedContentLength"></a>expectedContentLength</h3><blockquote><p>è·å–è¿”å›æ•°æ®çš„å†…å®¹é•¿åº¦ï¼ŒæœåŠ¡ç«¯äººå‘˜ä¸é è°±çš„è¯ï¼Œè¿™ä¸ªå±æ€§çš„å€¼å¯èƒ½å¥‡å¥‡æ€ªæ€ªï¼Œåˆ«é—®æˆ‘ä¸ºä»€ä¹ˆ~</p></blockquote><p>å¯ä»¥é¢„è®¡è¯¥èµ„æºçš„å¤§å°ï¼Œè®¡ç®—ä¸‹è½½è¿›åº¦ç­‰ç­‰ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">var</span> expectedContentLength: <span class="type">Int64</span> &#123; <span class="keyword">get</span> &#125;</span><br></pre></td></tr></table></figure><h3 id="textEncodingName"><a href="#textEncodingName" class="headerlink" title="textEncodingName"></a>textEncodingName</h3><blockquote><p>è·å–è¿”å›æ•°æ®çš„ç¼–ç æ–¹å¼</p></blockquote><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">var</span> textEncodingName: <span class="type">String</span>? &#123; <span class="keyword">get</span> &#125;</span><br></pre></td></tr></table></figure><h3 id="suggestedFilename"><a href="#suggestedFilename" class="headerlink" title="suggestedFilename"></a>suggestedFilename</h3><blockquote><p>å»ºè®®çš„æ–‡ä»¶åå­—ï¼ŒMIMETypeä¸ºæ‰©å±•å</p></blockquote><p>å¦‚æœæœåŠ¡ç«¯è¿”å›çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªå±æ€§æ˜¯ä¸€ä¸ªå»ºè®®çš„æ–‡ä»¶åå­—ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç”¨å®ƒæ¥è¿›è¡Œä¿å­˜ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">var</span> suggestedFilename: <span class="type">String</span>? &#123; <span class="keyword">get</span> &#125;</span><br></pre></td></tr></table></figure><h2 id="NSHTTPURLResponse"><a href="#NSHTTPURLResponse" class="headerlink" title="NSHTTPURLResponse"></a>NSHTTPURLResponse</h2><blockquote><p>NSHTTPURLResponse/HTTPURLResponse æ˜¯ NSURLResponse çš„ä¸€ä¸ªå­ç±»ï¼Œå¦‚æœæ˜¯ HTTP è¯·æ±‚ï¼Œè¯·æ±‚å›æ‰§ä¼šè¢«å°è£…ä¸º NSHTTPURLResponse å¯¹è±¡ã€‚</p></blockquote><p>é™¤äº†æœ‰çˆ¶ç±»é‚£äº›å±æ€§å¤–ï¼Œè¿˜æ‰©å±•äº†å‡ ä¸ªå±æ€§ï¼š</p><h3 id="statusCode"><a href="#statusCode" class="headerlink" title="statusCode"></a>statusCode</h3><blockquote><p>è¯·æ±‚çš„çŠ¶æ€ç </p></blockquote><p>æ ‡å‡† HTTP åè®®å†…å®¹ï¼Œä¸åŒçš„ code ç è¡¨ç¤ºä¸åŒçš„è¯·æ±‚çŠ¶æ€ï¼Œå‚è§<a href="https://tommygirl.cn/2015/08/02/HTTP%20%E7%9A%84%E4%B8%80%E7%82%B9%E5%84%BF%E5%B0%8F%E7%9F%A5%E8%AF%86/#%E7%BD%91%E7%BB%9C%E7%9B%B8%E5%BA%94%E7%9A%84%E5%B8%B8%E8%A7%81%E7%8A%B6%E6%80%81">ç½‘ç»œå“åº”çš„å¸¸è§çŠ¶æ€</a> ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">var</span> statusCode: <span class="type">Int</span> &#123; <span class="keyword">get</span> &#125;</span><br></pre></td></tr></table></figure><h3 id="allHeaderFields"><a href="#allHeaderFields" class="headerlink" title="allHeaderFields"></a>allHeaderFields</h3><blockquote><p>è¯·æ±‚å¤´ä¸­æ‰€æœ‰çš„å­—æ®µ</p></blockquote><p>ä¸€ä¸ªå­—å…¸ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ key-value æ¥å–å€¼ï¼Œä¸€ä¸ªç®€å•çš„å¤´éƒ¨ä¿¡æ¯å¯èƒ½åŒ…å«ä¸€äº›é»˜è®¤çš„ HTTP å¤´éƒ¨ä¿¡æ¯ï¼Œå½“ç„¶å¼€å‘ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥å’ŒæœåŠ¡ç«¯çº¦å®šå¥½è‡ªå®šä¹‰çš„å­—æ®µã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> <span class="keyword">var</span> allHeaderFields: [<span class="type">AnyHashable</span> : <span class="keyword">Any</span>] &#123; <span class="keyword">get</span> &#125;</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">(<span class="operator">&lt;</span>NSHTTPURLResponse: <span class="number">0x60000154cd80</span><span class="operator">&gt;</span> &#123; URL: https:<span class="comment">//httpbin.org/get &#125; &#123; Status Code: 200, Headers &#123;</span></span><br><span class="line">    <span class="string">&quot;Access-Control-Allow-Origin&quot;</span> <span class="operator">=</span>     (</span><br><span class="line">        <span class="string">&quot;*&quot;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="string">&quot;Content-Length&quot;</span> <span class="operator">=</span>     (</span><br><span class="line">        <span class="number">404</span></span><br><span class="line">    );</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span> <span class="operator">=</span>     (</span><br><span class="line">        <span class="string">&quot;application/json&quot;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="type">Date</span> <span class="operator">=</span>     (</span><br><span class="line">        <span class="string">&quot;Thu, 08 Jul 2018 10:13:14 GMT&quot;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="type">Server</span> <span class="operator">=</span>     (</span><br><span class="line">        <span class="string">&quot;gunicorn/19.9.0&quot;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="string">&quot;access-control-allow-credentials&quot;</span> <span class="operator">=</span>     (</span><br><span class="line">        <span class="literal">true</span></span><br><span class="line">    );</span><br><span class="line">&#125; &#125;)</span><br></pre></td></tr></table></figure><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><p>iOS çš„æ¥å£ä¸­ï¼Œè¯·æ±‚å›æ‰§å¾€å¾€å®šä¹‰çš„æ˜¯ <code>NSURLResponse</code> ç±»å‹ï¼Œä½†æ˜¯æ­£å¦‚æˆ‘ä»¬ä¸Šé¢æ‰€è¯´ï¼Œå¦‚æœæ˜¯ HTTP è¯·æ±‚ï¼Œè¯·æ±‚å›æ‰§ä¼šè¢«å°è£…ä¸º <code>NSHTTPURLResponse</code>  å¯¹è±¡ã€‚åƒè·å– <code>statusCode</code>  çš„æ—¶å€™å°±éœ€è¦è‡ªå·±åšä¸€ä¸‹ç±»å‹è½¬æ¢ã€‚</p><p>swift ä¸­ä¸¾ä¾‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> statusCode <span class="operator">=</span> (response <span class="keyword">as?</span> <span class="type">HTTPURLResponse</span>)<span class="operator">?</span>.statusCode <span class="operator">??</span> <span class="operator">-</span><span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> statusCode <span class="operator">==</span> <span class="number">200</span> &#123;</span><br><span class="line">    <span class="comment">//request success.</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ç³»åˆ—ï¼š"><a href="#ç³»åˆ—ï¼š" class="headerlink" title="ç³»åˆ—ï¼š"></a>ç³»åˆ—ï¼š</h2><p><a href="https://tommygirl.cn/2018/04/19/URLLoadingSystem/">URL Loading System[è¯‘]</a></p><p><a href="https://tommygirl.cn/2018/04/19/NSURLRequest/">NSURLRequest</a></p><p><a href="https://tommygirl.cn/2018/04/20/NSURLResponse/">NSURLResponse</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>URL Loading System ä¹‹ NSURLRequest/URLRequest</title>
      <link href="/2018/04/19/NSURLRequest/"/>
      <url>/2018/04/19/NSURLRequest/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="NSURLRequest"><a href="#NSURLRequest" class="headerlink" title="NSURLRequest"></a>NSURLRequest</h2><blockquote><p>NSURLRequest /URLRequest å°è£…äº†è¯·æ±‚çš„ä¸¤ä¸ªåŸºæœ¬å±æ€§ï¼šè¦åŠ è½½çš„URLå’Œç”¨äºåŠ è½½è¯¥è¯·æ±‚çš„ç­–ç•¥ã€‚é€šå¸¸ç”¨äº HTTP å’Œ HTTPS è¯·æ±‚ï¼ŒåŒ…æ‹¬ HTTP æ–¹æ³•ï¼ˆ<code>GET</code>ï¼Œ<code>POST</code>ç­‰ï¼‰å’Œ HTTP æ ‡å¤´ã€‚å¯å˜å­ç±»å‹æ˜¯ NSMutableURLRequest ã€‚</p></blockquote><h3 id="ä¸€ä¸ªå¹³å¹³æ— å¥‡çš„-GET-è¯·æ±‚"><a href="#ä¸€ä¸ªå¹³å¹³æ— å¥‡çš„-GET-è¯·æ±‚" class="headerlink" title="ä¸€ä¸ªå¹³å¹³æ— å¥‡çš„ GET è¯·æ±‚"></a>ä¸€ä¸ªå¹³å¹³æ— å¥‡çš„ GET è¯·æ±‚</h3><blockquote><p>ç½‘ç»œè¯·æ±‚çš„æµ‹è¯•ï¼Œæˆ‘ä»¬è®¿é—® httpbin æ¥è¿›è¡Œï¼Œæ–¹ä¾¿å¯¹æ¯”è¯·æ±‚çš„å“åº”</p><p>å®˜ç½‘ï¼š<a href="https://httpbin.org/">https://httpbin.org/</a></p><p>httpbin å¯ä»¥æŠŠæˆ‘ä»¬è¯·æ±‚æ—¶çš„ä¿¡æ¯ï¼Œè¿”å›ç»™æˆ‘ä»¬</p></blockquote><span id="more"></span><p>PS: åœ¨swift ä¸­æ²¡æœ‰ç»†åˆ†å¯å˜å­ç±»å‹äº†ï¼Œ<code>let</code> å£°æ˜çš„å¯¹è±¡å°±æ˜¯ä¸å¯å˜ï¼Œ<code>var</code> å£°æ˜å°±æ˜¯å¯å˜ï¼Œé‚£æˆ‘ä»¬æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªå¤´éƒ¨ä¿¡æ¯ï¼Œçœ‹çœ‹æ•ˆæœã€‚</p><h4 id="url"><a href="#url" class="headerlink" title="url"></a>url</h4><h4 id="allHTTPHeaderFields"><a href="#allHTTPHeaderFields" class="headerlink" title="allHTTPHeaderFields"></a>allHTTPHeaderFields</h4><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> url <span class="operator">=</span> <span class="type">URL</span>.<span class="keyword">init</span>(string: <span class="string">&quot;https://httpbin.org/get&quot;</span>)</span><br><span class="line"><span class="keyword">var</span> request <span class="operator">=</span> <span class="type">URLRequest</span>.<span class="keyword">init</span>(url: url<span class="operator">!</span>)</span><br><span class="line">request.setValue(<span class="string">&quot;Tiantian&quot;</span>, forHTTPHeaderField: <span class="string">&quot;Tommy-Girl&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(request.allHTTPHeaderFields <span class="operator">??</span> [:])</span><br><span class="line"><span class="comment">//è¯·æ±‚æ€ä¹ˆå‘å‡ºå»å‘¢ï¼Ÿæˆ‘ä»¬å…ˆä½¿ç”¨è‹¹æœæä¾›çš„å•ä¾‹å°è¯•ä¸€ä¸‹</span></span><br><span class="line"><span class="keyword">let</span> task <span class="operator">=</span> <span class="type">URLSession</span>.shared.dataTask(with: request) &#123; (data, response, error) <span class="keyword">in</span></span><br><span class="line">    <span class="comment">//æŸ¥çœ‹ responseï¼Œæˆ‘ä»¬æ‰“å°å‡ºæ¥å¯ä»¥çœ‹åˆ°ä¸€ä¸ª NSHTTPURLResponse å¯¹è±¡ï¼Œä»¥åŠéƒ¨åˆ†å¤´éƒ¨ä¿¡æ¯</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Response:&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(response <span class="keyword">as</span> <span class="keyword">Any</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> statusCode <span class="operator">=</span> (response <span class="keyword">as?</span> <span class="type">HTTPURLResponse</span>)<span class="operator">?</span>.statusCode <span class="operator">??</span> <span class="operator">-</span><span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> statusCode <span class="operator">==</span> <span class="number">200</span> &#123;</span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> data <span class="operator">=</span> data <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> object <span class="operator">=</span> <span class="keyword">try</span> <span class="type">JSONSerialization</span>.jsonObject(with: data, options: [])</span><br><span class="line">            <span class="built_in">print</span>(object)</span><br><span class="line">        &#125; <span class="keyword">catch</span> <span class="keyword">let</span> error &#123;</span><br><span class="line">            <span class="built_in">print</span>(error)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">task.resume()</span><br></pre></td></tr></table></figure><p>è¿”å›ç»“æœï¼š</p><p>æˆ‘ä»¬åˆšåˆšæ·»åŠ äº†ä¸€ä¸ª åä¸º Tommy-Girl å€¼ä¸º Tiantian çš„å¤´éƒ¨ä¿¡æ¯ï¼ŒæœåŠ¡å™¨å·²ç»æ”¶åˆ°ï¼Œå¹¶ä¸”åŸå°ä¸åŠ¨å¸®æˆ‘ä»¬è¿”å›äº†ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">GET: </span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;args&quot;</span>: &#123;&#125;, </span><br><span class="line">  <span class="attr">&quot;headers&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;Accept&quot;</span>: <span class="string">&quot;*/*&quot;</span>, </span><br><span class="line">    <span class="attr">&quot;Accept-Encoding&quot;</span>: <span class="string">&quot;gzip, deflate, br&quot;</span>, </span><br><span class="line">    <span class="attr">&quot;Accept-Language&quot;</span>: <span class="string">&quot;en-us&quot;</span>, </span><br><span class="line">    <span class="attr">&quot;Host&quot;</span>: <span class="string">&quot;httpbin.org&quot;</span>, </span><br><span class="line">    <span class="attr">&quot;Tommy-Girl&quot;</span>: <span class="string">&quot;Tiantian&quot;</span>, </span><br><span class="line">    <span class="attr">&quot;User-Agent&quot;</span>: <span class="string">&quot;URLLoadingSystem/1 CFNetwork/1220.1 Darwin/19.6.0&quot;</span>, </span><br><span class="line">    <span class="attr">&quot;X-Amzn-Trace-Id&quot;</span>: <span class="string">&quot;Root=1-6094ffc6-18f7b8391c8bcc4049bc6beb&quot;</span></span><br><span class="line">  &#125;, </span><br><span class="line">  <span class="attr">&quot;origin&quot;</span>: <span class="string">&quot;*.*.*.*&quot;</span>, </span><br><span class="line">  <span class="attr">&quot;url&quot;</span>: <span class="string">&quot;https://httpbin.org/get&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸€ä¸ªç•¥æ˜¾è‹±ä¿Šçš„-POST-è¯·æ±‚"><a href="#ä¸€ä¸ªç•¥æ˜¾è‹±ä¿Šçš„-POST-è¯·æ±‚" class="headerlink" title="ä¸€ä¸ªç•¥æ˜¾è‹±ä¿Šçš„ POST è¯·æ±‚"></a>ä¸€ä¸ªç•¥æ˜¾è‹±ä¿Šçš„ POST è¯·æ±‚</h3><p>PS: GET å’Œ POST è¯·æ±‚çš„åŒºåˆ«ï¼Œä»¥åŠå„<code>Status Code</code> çš„å«ä¹‰è§å¦ä¸€ç¯‡æ–‡ç« <a href="https://atommygirl.github.io/2017/10/02/HTTP%20%E7%9A%84%E4%B8%80%E7%82%B9%E5%84%BF%E5%B0%8F%E7%9F%A5%E8%AF%86/#%E4%B8%89%E3%80%81%E6%96%B9%E6%B3%95">HTTP çš„ä¸€ç‚¹å„¿å°çŸ¥è¯†</a>ã€‚</p><p>å¦‚æœä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠ URL æ›¿æ¢ä¸ºåªå…è®¸ POST è¯·æ±‚çš„æœåŠ¡ï¼Œæˆ‘ä»¬ä¼šæ”¶åˆ°ä¸€ä¸ª 405 çš„code ç ï¼Œ405 ä¸€èˆ¬è¡¨ç¤ºè¯·æ±‚æ–¹æ³•ä¸å…è®¸ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Response:</span><br><span class="line">Optional(&lt;NSHTTPURLResponse: <span class="number">0x6000026150e0</span>&gt; &#123; URL: https:<span class="comment">//httpbin.org/post &#125; </span></span><br><span class="line">&#123; Status Code: <span class="number">405</span>, Headers &#123;</span><br><span class="line">    <span class="attr">&quot;Access-Control-Allow-Origin&quot;</span> =     (</span><br><span class="line">        <span class="attr">&quot;*&quot;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="attr">&quot;Content-Length&quot;</span> =     (</span><br><span class="line">        178</span><br><span class="line">    );</span><br><span class="line">    <span class="attr">&quot;Content-Type&quot;</span> =     (</span><br><span class="line">        <span class="attr">&quot;text/html&quot;</span></span><br><span class="line">    );</span><br><span class="line">    Date =     (</span><br><span class="line">        <span class="attr">&quot;Fri, 07 May 2018 08:22:31 GMT&quot;</span></span><br><span class="line">    );</span><br><span class="line">    Server =     (</span><br><span class="line">        <span class="attr">&quot;gunicorn/19.9.0&quot;</span></span><br><span class="line">    );</span><br><span class="line">    <span class="attr">&quot;access-control-allow-credentials&quot;</span> =     (</span><br><span class="line">        true</span><br><span class="line">    );</span><br><span class="line">    allow =     (</span><br><span class="line">        <span class="attr">&quot;POST, OPTIONS&quot;</span></span><br><span class="line">    );</span><br><span class="line">&#125; &#125;)</span><br></pre></td></tr></table></figure><h4 id="httpMethod"><a href="#httpMethod" class="headerlink" title="httpMethod"></a>httpMethod</h4><p>é‚£æ€ä¹ˆå‘é€ä¸€ä¸ª POST è¯·æ±‚å‘¢ï¼Ÿå¾ˆç®€å•ï¼Œ<code>URLRequest</code> æœ‰ä¸€ä¸ª <code>httpMethod</code> å±æ€§ï¼ŒæŒ‡å®šå¯¹åº”çš„æ–¹æ³•åå³å¯</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.httpMethod <span class="operator">=</span> <span class="string">&quot;POST&quot;</span></span><br></pre></td></tr></table></figure><h4 id="httpBody"><a href="#httpBody" class="headerlink" title="httpBody"></a>httpBody</h4><p>ä¸€ä¸ª <code>NSData/Data</code> ç±»å‹çš„å±æ€§ï¼Œç”¨äºæ·»åŠ å‚æ•°ï¼Œå¯ä»¥ä½†ä¸é™äºï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> parameter <span class="operator">=</span> [<span class="string">&quot;a&quot;</span> : <span class="string">&quot;1&quot;</span>,</span><br><span class="line">                 <span class="string">&quot;b&quot;</span> : <span class="string">&quot;2&quot;</span>]</span><br><span class="line"><span class="keyword">let</span> data <span class="operator">=</span> <span class="keyword">try?</span> <span class="type">JSONSerialization</span>.data(withJSONObject: parameter, options: [])</span><br><span class="line">request.httpBody <span class="operator">=</span> data</span><br></pre></td></tr></table></figure><h4 id="timeoutInterval"><a href="#timeoutInterval" class="headerlink" title="timeoutInterval"></a>timeoutInterval</h4><blockquote><p> è¶…æ—¶æ—¶é—´</p></blockquote><h4 id="httpShouldHandleCookies"><a href="#httpShouldHandleCookies" class="headerlink" title="httpShouldHandleCookies"></a>httpShouldHandleCookies</h4><blockquote><p>å†³å®šè¿™ä¸ªè¯·æ±‚æ˜¯å¦è¦ä½¿ç”¨cookieï¼Œé»˜è®¤ä¸ºYESã€‚</p></blockquote><p>å¸¸ç”¨åˆ°çš„å°±ä¸Šé¢è¿™å‡ ä¸ªå±æ€§ï¼ŒçœŸå®å¼€å‘ä¸­æˆ‘ä»¬å¾ˆå°‘ä¼šç›´æ¥ä½¿ç”¨  <code>Request</code>  å‘é€è¯·æ±‚ï¼Œå¾€å¾€ä¾èµ–äºä¸‰æ–¹æ¡†æ¶ï¼Œåƒ OC çš„ <code>AFNetworking</code> ã€swift çš„ <code>Alamofire</code> ç­‰ç­‰ã€‚</p><h2 id="ç³»åˆ—ï¼š"><a href="#ç³»åˆ—ï¼š" class="headerlink" title="ç³»åˆ—ï¼š"></a>ç³»åˆ—ï¼š</h2><p><a href="https://tommygirl.cn/2018/04/19/URLLoadingSystem/">URL Loading System[è¯‘]</a></p><p><a href="https://tommygirl.cn/2018/04/19/NSURLRequest/">NSURLRequest</a></p><p><a href="https://tommygirl.cn/2018/04/20/NSURLResponse/">NSURLResponse</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>URL Loading System[è¯‘]</title>
      <link href="/2018/04/19/URLLoadingSystem/"/>
      <url>/2018/04/19/URLLoadingSystem/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>Interact with URLs and communicate with servers using standard Internet protocols.</p><p>ä¸URLäº¤äº’å¹¶ä½¿ç”¨æ ‡å‡†Internetåè®®ä¸æœåŠ¡å™¨é€šä¿¡ã€‚</p><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://developer.apple.com/documentation/foundation/url_loading_system?language=objc">è‹¹æœæ–‡æ¡£</a></p></blockquote><h2 id="ç»¼è¿°"><a href="#ç»¼è¿°" class="headerlink" title="ç»¼è¿°"></a>ç»¼è¿°</h2><p>URL Loading System ä½¿ç”¨æ ‡å‡†åè®®ï¼ˆä¾‹å¦‚ https æˆ–è€…æˆ‘ä»¬åˆ›å»ºçš„è‡ªå®šä¹‰åè®®ï¼‰æä¾›å¯¹ URL æ ‡è¯†çš„èµ„æºçš„è®¿é—®ã€‚åŠ è½½æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå› æ­¤ä½ çš„åº”ç”¨å¯ä»¥ä¿æŒå“åº”èƒ½åŠ›ï¼Œå¹¶åœ¨æ•°æ®æˆ–é”™è¯¯åˆ°è¾¾æ—¶å¤„ç†å®ƒä»¬ã€‚ä½¿ç”¨ URLSession å®ä¾‹åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ª URLSessionTask å®ä¾‹ï¼Œè¿™äº› URLSessionTask å®ä¾‹å¯ä»¥è·å–æ•°æ®ã€ä¸‹è½½æ–‡ä»¶æˆ–å°†æ•°æ®å’Œæ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚è¦é…ç½®ä¼šè¯ï¼Œè¯·ä½¿ç”¨ URLSessionConfiguration å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ§åˆ¶è¡Œä¸ºï¼Œä¾‹å¦‚å¦‚ä½•ä½¿ç”¨ç¼“å­˜å’Œ cookieï¼Œæˆ–è€…æ˜¯å¦å…è®¸åœ¨èœ‚çªç½‘ç»œä¸Šè¿›è¡Œè¿æ¥ã€‚</p><p>æˆ‘ä»¬å¯ä»¥é‡å¤ä½¿ç”¨ä¸€ä¸ªä¼šè¯æ¥åˆ›å»ºä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œç½‘ç»œæµè§ˆå™¨å¯èƒ½æœ‰åˆ†å¼€çš„ä¼šè¯ä¾›å¸¸è§„æµè§ˆå’Œç§äººæµè§ˆä½¿ç”¨ï¼Œè€Œç§äººä¼šè¯ä¸ä¼šç¼“å­˜å…¶æ•°æ®ã€‚å›¾1æ˜¾ç¤ºäº†å…·æœ‰è¿™äº›é…ç½®çš„ä¸¤ä¸ªä¼šè¯å¦‚ä½•åˆ›å»ºå¤šä¸ªä»»åŠ¡ã€‚</p><span id="more"></span><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/30.png"></p><p>æ¯ä¸ªä¼šè¯éƒ½ä¸ä¸€ä¸ª delegate ç›¸å…³è”ï¼Œä»¥æ¥æ”¶å®šæœŸæ›´æ–°ï¼ˆæˆ–é”™è¯¯ï¼‰ã€‚delegate é»˜è®¤ä¼šè°ƒç”¨æˆ‘ä»¬æä¾›çš„å®Œæˆå¤„ç†ç¨‹åºå—ï¼Œå¦‚æœé€‰æ‹©æä¾›è‡ªå·±çš„è‡ªå®šä¹‰ delegateï¼Œåˆ™ä¸ä¼šè°ƒç”¨æ­¤å—ã€‚è¿˜å¯ä»¥å°†ä¼šè¯é…ç½®ä¸ºåœ¨åå°è¿è¡Œï¼Œä»¥ä¾¿åœ¨åº”ç”¨ç¨‹åºæŒ‚èµ·æ—¶ï¼Œç³»ç»Ÿå¯ä»¥ä»£è¡¨å®ƒä¸‹è½½æ•°æ®å¹¶å”¤é†’åº”ç”¨ä»¥äº¤ä»˜ç»“æœã€‚</p><h2 id="è¯é¢˜"><a href="#è¯é¢˜" class="headerlink" title="è¯é¢˜"></a>è¯é¢˜</h2><h3 id="åŸºæœ¬"><a href="#åŸºæœ¬" class="headerlink" title="åŸºæœ¬"></a>åŸºæœ¬</h3><p>é…ç½®å¹¶åˆ›å»ºä¼šè¯ï¼Œç„¶åä½¿ç”¨å®ƒä»¬åˆ›å»ºURLä»»åŠ¡ã€‚</p><ul><li>Fetching Website Data into Memoryï¼šé€šè¿‡ä»URLä¼šè¯åˆ›å»ºæ•°æ®ä»»åŠ¡ï¼Œå°†æ•°æ®ç›´æ¥æ¥æ”¶åˆ°å†…å­˜ä¸­ã€‚</li><li>Analyzing HTTP Traffic with Instrumentsï¼šæµ‹é‡åŸºäº HTTP çš„ç½‘ç»œæ€§èƒ½å’Œåº”ç”¨ç¨‹åºçš„ä½¿ç”¨æƒ…å†µã€‚</li><li>NSURLSessionï¼šåè°ƒä¸€ç»„ç›¸å…³çš„ç½‘ç»œæ•°æ®ä¼ è¾“ä»»åŠ¡çš„å¯¹è±¡ã€‚</li><li>NSURLSessionTaskï¼šåœ¨URLä¼šè¯ä¸­æ‰§è¡Œä¸€é¡¹ä»»åŠ¡ï¼Œä¾‹å¦‚ä¸‹è½½ç‰¹å®šèµ„æºã€‚</li></ul><h3 id="è¯·æ±‚ä¸å“åº”"><a href="#è¯·æ±‚ä¸å“åº”" class="headerlink" title="è¯·æ±‚ä¸å“åº”"></a>è¯·æ±‚ä¸å“åº”</h3><ul><li>NSURLRequestï¼šä¸åè®®æˆ– URL æ–¹æ¡ˆæ— å…³çš„ URL åŠ è½½è¯·æ±‚ã€‚</li><li>NSURLResponseï¼šä¸åè®®æˆ– URL æ–¹æ¡ˆæ— å…³çš„ï¼Œå¯¹ URL åŠ è½½è¯·æ±‚çš„å“åº”ç›¸å…³è”çš„å…ƒæ•°æ®ã€‚</li><li>NSHTTPURLResponseï¼šä¸ HTTP åè®® URL åŠ è½½è¯·æ±‚çš„å“åº”å…³è”çš„å…ƒæ•°æ®ã€‚</li></ul><h3 id="ä¸Šä¼ "><a href="#ä¸Šä¼ " class="headerlink" title="ä¸Šä¼ "></a>ä¸Šä¼ </h3><ul><li>Uploading Data to a Websiteï¼šå°†æ•°æ®ä»ä½ çš„åº”ç”¨å‘é€åˆ°æœåŠ¡å™¨ã€‚</li><li>Uploading Streams of Dataï¼šå°†æ•°æ®æµå‘é€åˆ°æœåŠ¡å™¨ã€‚</li></ul><h3 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h3><ul><li>Downloading Files from Websitesï¼šç›´æ¥ä¸‹è½½æ–‡ä»¶åˆ°æ–‡ä»¶ç³»ç»Ÿã€‚</li><li>Pausing and Resuming Downloadsï¼šå…è®¸ç”¨æˆ·ç»§ç»­ä¸‹è½½è€Œæ— éœ€é‡æ–°å¼€å§‹ã€‚</li><li>Downloading Files in the Backgroundï¼šåˆ›å»ºåœ¨åº”ç”¨ä¸æ´»åŠ¨æ—¶ä¸‹è½½æ–‡ä»¶çš„ä»»åŠ¡ã€‚</li></ul><h3 id="ç¼“å­˜è¡Œä¸º"><a href="#ç¼“å­˜è¡Œä¸º" class="headerlink" title="ç¼“å­˜è¡Œä¸º"></a>ç¼“å­˜è¡Œä¸º</h3><ul><li>Accessing Cached Dataï¼šæ§åˆ¶ URL è¯·æ±‚å¦‚ä½•åˆ©ç”¨ä»¥å‰ç¼“å­˜çš„æ•°æ®ã€‚</li><li>CachedURLResponseï¼šå¯¹ URL è¯·æ±‚çš„ç¼“å­˜å“åº”ã€‚</li><li>URLCacheï¼šå°† URL è¯·æ±‚æ˜ å°„åˆ°ç¼“å­˜å“åº”å¯¹è±¡çš„å¯¹è±¡ã€‚</li></ul><h3 id="èº«ä»½éªŒè¯å’Œå‡­è¯"><a href="#èº«ä»½éªŒè¯å’Œå‡­è¯" class="headerlink" title="èº«ä»½éªŒè¯å’Œå‡­è¯"></a>èº«ä»½éªŒè¯å’Œå‡­è¯</h3><ul><li>Handling an Authentication Challengeï¼šå½“æœåŠ¡å™¨è¦æ±‚å¯¹ URL è¯·æ±‚è¿›è¡Œèº«ä»½éªŒè¯æ—¶ï¼Œåšå‡ºé€‚å½“çš„å“åº”ã€‚</li><li>NSURLAuthenticationChallengeï¼šæ¥è‡ªæœåŠ¡å™¨çš„æŒ‘æˆ˜ï¼Œè¦æ±‚æ¥è‡ªå®¢æˆ·ç«¯çš„èº«ä»½éªŒè¯ã€‚</li><li>NSURLCredentialï¼šè®¤è¯å‡­è¯ï¼Œç”±ç‰¹å®šäºå‡­è¯ç±»å‹å’Œè¦ä½¿ç”¨çš„æŒä¹…æ€§å­˜å‚¨ç±»å‹ï¼ˆå¦‚æœæœ‰ï¼‰çš„ä¿¡æ¯ç»„æˆã€‚</li><li>NSURLCredentialStorageï¼šå…±äº«å‡­æ®ç¼“å­˜çš„ç®¡ç†å™¨ã€‚</li><li>NSURLProtectionSpaceï¼šæœåŠ¡å™¨æˆ–æœåŠ¡å™¨ä¸Šéœ€è¦è®¤è¯çš„åŒºåŸŸï¼Œé€šå¸¸æè¿°ä¸ºé¢†åŸŸã€‚</li></ul><h3 id="Cookies"><a href="#Cookies" class="headerlink" title="Cookies"></a>Cookies</h3><ul><li>NSHTTPCookieï¼šHTTP cookie çš„è¡¨ç¤ºå½¢å¼ã€‚</li><li>NSHTTPCookieStorageï¼šä¸€ä¸ªç®¡ç† cookie å­˜å‚¨çš„å®¹å™¨ã€‚</li></ul><h3 id="é”™è¯¯"><a href="#é”™è¯¯" class="headerlink" title="é”™è¯¯"></a>é”™è¯¯</h3><ul><li>URLErrorï¼šURL åŠ è½½ API è¿”å›çš„é”™è¯¯ä»£ç ã€‚</li><li>URL Loading System Error Info Keysï¼šä» URL åŠ è½½ API ç”Ÿæˆçš„é”™è¯¯å¯¹è±¡çš„ç”¨æˆ·ä¿¡æ¯å­—å…¸ä¸­è¯†åˆ«è¿™äº›é”®ã€‚</li></ul><h2 id="ç³»åˆ—ï¼š"><a href="#ç³»åˆ—ï¼š" class="headerlink" title="ç³»åˆ—ï¼š"></a>ç³»åˆ—ï¼š</h2><p><a href="https://tommygirl.cn/2018/04/19/URLLoadingSystem/">URL Loading System[è¯‘]</a></p><p><a href="https://tommygirl.cn/2018/04/19/NSURLRequest/">NSURLRequest</a></p><p><a href="https://tommygirl.cn/2018/04/20/NSURLResponse/">NSURLResponse</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo æ–‡å­—ä¸­å¦‚ä½•æ’å…¥å›¾ç‰‡</title>
      <link href="/2018/02/22/Hexo%E6%96%87%E5%AD%97%E4%B8%AD%E5%A6%82%E4%BD%95%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87/"/>
      <url>/2018/02/22/Hexo%E6%96%87%E5%AD%97%E4%B8%AD%E5%A6%82%E4%BD%95%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨Hexo çš„æ–‡ç« ä¸­åŠ å…¥å›¾ç‰‡ï¼Œå¾ˆç®€å•çš„ï¼Œæ¥è¯•è¯•å…ˆï¼š</p><span id="more"></span><ul><li><p><strong>è®¾ç½®ç«™ç‚¹é…ç½®_config.yml</strong>:</p><p>å°† <code>post_asset_folder: false</code> æ”¹ä¸º <code>post_asset_folder: true</code></p></li><li><p><strong>å®‰è£…æ’ä»¶</strong>:</p><p> <code>npm install https://github.com/CodeFalling/hexo-asset-image -- save</code></p></li><li><p><strong>è¿è¡Œ</strong>:</p><p> <code>hexo n &quot;XXXXXX&quot;</code></p><p>ç”Ÿæˆ XXXXX.md åšæ–‡æ—¶å°±ä¼šåœ¨ <code>/source/_posts</code> ç›®å½•ä¸‹ç”Ÿæˆ XXXXXX çš„æ–‡ä»¶å¤¹ï¼Œå°†ä½ æƒ³åœ¨XXXXXæ–‡ç« ä¸­æ’å…¥çš„ç…§ç‰‡æ”¾ç½®åˆ°è¿™ä¸ªåŒåæ–‡ä»¶å¤¹ä¸­å³å¯ï¼Œå›¾ç‰‡çš„å‘½åéšæ„ã€‚</p></li><li><p><strong>æ·»åŠ å›¾ç‰‡</strong>:</p><p>åœ¨æƒ³æ·»åŠ çš„ä½ç½®å†™å…¥<code>![](å›¾ç‰‡åå­—.å›¾ç‰‡æ ¼å¼)</code>ï¼Œä¾‹å¦‚<code>![](1.png)</code></p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> 7788 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mailcore 2  iOS  ä¹‹ä¸€ IMAP</title>
      <link href="/2018/02/02/mailcore2-iOS%E4%B9%8B%E4%B8%80IMAP/"/>
      <url>/2018/02/02/mailcore2-iOS%E4%B9%8B%E4%B8%80IMAP/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å…¬å¸å¼€å‘oaä¸­çš„é‚®ç®±ï¼Œèµ„æºé™åˆ¶ï¼Œæœ€åiOSå¼€å‘é‡‡ç”¨çš„mailcore2-iosæ¡†æ¶ã€‚ç ”ç©¶çš„ä¸æ·±ï¼Œåªå½“åšä¸ªåˆ†äº«ï¼Œå£æ¡ä¸å¥½ï¼Œå‡‘åˆçœ‹å§ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>æˆ‘ç›´æ¥ç”¨çš„cocoapodsï¼Œéå¸¸æ–¹ä¾¿ï¼Œåªæ˜¯èµ„æºåŒ…å¤§äº†ä¸€ç‚¹ï¼Œè€å¿ƒç­‰å¾…å°±å¥½äº†ï¼Œå…¶ä»–æ–¹å¼æ²¡è¯•è¿‡ã€‚<br><code>pod &#39;mailcore2-ios&#39;</code></p><p><a href="https://github.com/MailCore/mailcore2">https://github.com/MailCore/mailcore2</a> å®˜æ–¹ï¼Œæœ‰é—®é¢˜æissueï¼Œå¼€å‘è€…ä¼šå¾ˆçƒ­å¿ƒå›ç­”çš„ã€‚</p><span id="more"></span><h2 id="æ›´æ–°-çº é”™æ—¥å¿—"><a href="#æ›´æ–°-çº é”™æ—¥å¿—" class="headerlink" title="æ›´æ–°/çº é”™æ—¥å¿—"></a>æ›´æ–°/çº é”™æ—¥å¿—</h2><ul><li>2018-12-11 çº é”™ï¼šIMAP-4.å•å°é‚®ä»¶è·å–å’Œå¤„ç†.æ ¹æ®uidè·å–å•å°é‚®ä»¶ æœ‰è¯¯ï¼Œ<code>rangeçš„èŒƒå›´åº”è¯¥æ˜¯ï¼ˆuid, 0ï¼‰ï¼Œè€Œä¸æ˜¯(uid, 1)ï¼Œè¿™æ ·è·å–åˆ°çš„æ˜¯ä¸¤å°</code>ï¼Œè„‘å­ç§€é€—äº†ã€‚</li><li>2018-12-11 æ›´æ–°ï¼šåˆ›å»ºè‰ç¨¿é‚®ä»¶</li><li>2018-12-12 æ›´æ–°ï¼šSMTPåè®®</li></ul><h2 id="å¼€å‘"><a href="#å¼€å‘" class="headerlink" title="å¼€å‘"></a>å¼€å‘</h2><p>ä¸ªäººæ¯”è¾ƒå–œæ¬¢imapåè®®ï¼ŒåŠŸèƒ½æ¯”è¾ƒä¸°å¯Œï¼Œä¸è¿‡ç”¨mailcoreæèµ·æ¥ä¼¼ä¹è´¹åŠ²äº†ä¸€ç‚¹ï¼Œæˆ‘ä¹Ÿåªæ˜¯å®ç°äº†ä¸€äº›åŸºæœ¬åŠŸèƒ½ï¼Œé«˜çº§çš„è¿˜åœ¨ç ”ç©¶ã€‚</p><p>è®¡åˆ’åˆ†äº«ä¸€ä¸‹ä¸‹é¢å‡ é¡¹ğŸ¤—ğŸ¤—ğŸ¤—ğŸ¤—ğŸ¤—</p><ul><li>IMAP<ul><li>ç™»å½•</li><li>æ–‡ä»¶å¤¹åˆ—è¡¨ã€å‘½åç©ºé—´</li><li>é‚®ä»¶åˆ—è¡¨æ‹‰å–</li><li>é‚®ä»¶åˆ—è¡¨ä¸­å•å°é‚®ä»¶å†…å®¹è·å–å’Œå¤„ç†</li><li>é‚®ä»¶çš„å„ç§æ ‡è®°æ·»åŠ </li><li>åˆ é™¤é‚®ä»¶</li><li>é™„ä»¶å’Œhtmlå†…å®¹è§£æ</li><li>è‰ç¨¿ç®±é‚®ä»¶åˆ›å»º</li></ul></li><li>POP</li><li>SMTP<ul><li>è§<a href="https://atommygirl.github.io/2018/12/12/mailcore2-iOS%E4%B9%8B%E4%BA%8CSMTP/">mailcore2-ios  ä¹‹äºŒ SMTP</a></li></ul></li></ul><h3 id="IMAP"><a href="#IMAP" class="headerlink" title="IMAP"></a>IMAP</h3><h4 id="1-ç™»å½•"><a href="#1-ç™»å½•" class="headerlink" title="1.ç™»å½•"></a>1.ç™»å½•</h4><p>é¦–å…ˆè®¾ç½®è´¦å·ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºsessionï¼›ç„¶åæ ¡éªŒï¼›</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">self</span>.imapSession.hostname = session.imapHost; <span class="comment">//imap.xxx.com.cn</span></span><br><span class="line"><span class="keyword">self</span>.imapSession.username = session.username; <span class="comment">//littlecat@xxx.com.cn</span></span><br><span class="line"><span class="keyword">self</span>.imapSession.password = session.password; <span class="comment">//password</span></span><br><span class="line"><span class="keyword">self</span>.imapSession.port     = (<span class="keyword">unsigned</span> <span class="keyword">int</span>)session.imapPort;<span class="comment">//143ã€993</span></span><br><span class="line"><span class="keyword">self</span>.imapSession.connectionType = session.imapIsSSL ? MCOConnectionTypeTLS: MCOConnectionTypeClear;<span class="comment">//å–å†³äºä½ çš„é‚®ä»¶æœåŠ¡å™¨æ˜¯ä¸æ˜¯SSLçš„ï¼›</span></span><br></pre></td></tr></table></figure><p>æ ¡éªŒä¿¡æ¯ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MCOIMAPOperation *checkOp = [session checkAccountOperation];<span class="comment">//è¿™é‡Œçš„sessionå°±æ˜¯é…ç½®å¸å·ä¿¡æ¯çš„session</span></span><br><span class="line">[checkOp start:^(<span class="built_in">NSError</span> *error) &#123;</span><br><span class="line">     <span class="built_in">NSLog</span>(<span class="string">@&quot;finished checking account.&quot;</span>);</span><br><span class="line">     <span class="keyword">if</span> (error == <span class="literal">nil</span>) &#123;</span><br><span class="line">         complete(<span class="literal">nil</span>);</span><br><span class="line">     &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">         err(error);</span><br><span class="line">         <span class="built_in">NSLog</span>(<span class="string">@&quot;error loading account: %@&quot;</span>, [error userInfo][<span class="string">@&quot;NSLocalizedDescription&quot;</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><h4 id="2-è·å–æ–‡ä»¶å¤¹ç›®å½•"><a href="#2-è·å–æ–‡ä»¶å¤¹ç›®å½•" class="headerlink" title="2.è·å–æ–‡ä»¶å¤¹ç›®å½•"></a>2.è·å–æ–‡ä»¶å¤¹ç›®å½•</h4><p>å‘½åç©ºé—´ï¼šå®ƒè¿™é‡Œæœ‰ä¸ªnamespaceï¼Œå¯¹äº<code>ä¸­æ–‡åç§°</code>çš„ğŸ“‚åç§°ï¼Œéœ€è¦é€šè¿‡<code>å‘½åç©ºé—´</code>æ¥è§£æï¼Œ<code>ä¸ç„¶å¾ˆå¯èƒ½æ˜¯ğŸ‘‡è¿™ç§ä¹±ç </code>ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™æ˜¯å½“æ—¶è§£æç½‘æ˜“é‚®ç®±çš„ä¹±ç ï¼Œæ‰¾åŸå› æ‰¾äº†å¥½ä¹…ğŸ˜­ğŸ˜­ğŸ˜­ï¼Œåœ¨ä¸€ç¯‡åšå®¢ä¸Šçœ‹åˆ°çš„è§£å†³åŠæ³•ã€‚</span></span><br><span class="line">INBOX</span><br><span class="line">&amp;g0l6P3ux-</span><br><span class="line">&amp;XfJT0ZAB-</span><br><span class="line">&amp;XfJSIJZk-</span><br><span class="line">&amp;V4NXPpCuTvY-</span><br><span class="line">&amp;dcVr0mWHTvZZOQ-</span><br><span class="line">&amp;Xn9USpCuTvY-</span><br><span class="line">&amp;i6KWBZCuTvY-</span><br><span class="line">Deleted Messages</span><br><span class="line">Archive</span><br><span class="line">Junk</span><br></pre></td></tr></table></figure><p>å…ˆæŠŠæ­£ç¡®çš„æ”¾å‡ºæ¥ï¼Œæ‰¾å›ç‚¹èµ°ä¸‹å»çš„ä¿¡å¿ƒğŸ’”ğŸ’”ğŸ’—ğŸ’–â€¦</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">INBOX</span><br><span class="line">è‰ç¨¿ç®±</span><br><span class="line">å·²å‘é€</span><br><span class="line">å·²åˆ é™¤</span><br><span class="line">åƒåœ¾é‚®ä»¶</span><br><span class="line">ç—…æ¯’æ–‡ä»¶å¤¹</span><br><span class="line">å¹¿å‘Šé‚®ä»¶</span><br><span class="line">è®¢é˜…é‚®ä»¶</span><br><span class="line">Deleted Messages</span><br><span class="line">Archive</span><br><span class="line">Junk</span><br></pre></td></tr></table></figure><p>å› ä¸º<code>æŸäº›é‚®ç®±çš„sessionè«åå…¶å¦™æ²¡æœ‰è‡ªå¸¦é»˜è®¤çš„å‘½åç©ºé—´</code>ï¼Œæˆ‘é‡‡å–çš„ç¬¨åŠæ³•æ˜¯å…ˆå»è·å–ä¸€ä¸‹namespaceï¼Œä¸è¿‡å˜›ï¼Œï¼Œï¼Œå±…ç„¶è·å–åˆ°çš„ä¹Ÿæ—¶æœ‰æ—¶æ— ğŸ˜±ğŸ˜±ğŸ˜±ğŸ˜±ğŸ˜±</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MCOIMAPSession *session = [MMIMAPTool getSession];</span><br><span class="line">MCOIMAPFetchNamespaceOperation * op = [session fetchNamespaceOperation];</span><br><span class="line">[op start:^(<span class="built_in">NSError</span> * __<span class="keyword">nullable</span> error, <span class="built_in">NSDictionary</span> * namespaces) &#123;</span><br><span class="line">     MCOIMAPNamespace * namespace = (session.defaultNamespace != <span class="literal">nil</span>) ? session.defaultNamespace : [namespaces objectForKey:MCOIMAPNamespacePersonal];</span><br><span class="line">    <span class="keyword">if</span> (!namespace) &#123;</span><br><span class="line">        <span class="comment">//æ²¡æœ‰å‘½åç©ºé—´ï¼Œå¾ˆå¯èƒ½æ–‡ä»¶å¤¹çš„åå­—è§£æå‡ºæ¥æ˜¯ä¹±ç ï¼Œè¿™ä¸ªçœ‹ä¸ªäººæ€ä¹ˆå¤„ç†å§ï¼›</span></span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¦‚æœæ‹¿åˆ°äº†namespaceï¼Œå¯ä»¥å®‰å¿ƒè·å–folderlistäº†</span></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p>å…³é”®çš„ä¸€å¥ï¼š<code>NSString *folername = [namespace componentsFromPath:f.path][0];</code></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">MCOIMAPFetchFoldersOperation * ops = [session fetchAllFoldersOperation];</span><br><span class="line">[ops start:^(<span class="built_in">NSError</span> * error,<span class="built_in">NSArray</span> *folders) &#123;</span><br><span class="line">   <span class="keyword">if</span> (error) &#123;</span><br><span class="line">      <span class="keyword">return</span> ;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">NSMutableDictionary</span> *dic = [<span class="built_in">NSMutableDictionary</span> dictionary];</span><br><span class="line">   <span class="keyword">for</span> (MCOIMAPFolder *f <span class="keyword">in</span> folders) &#123;</span><br><span class="line">      <span class="built_in">NSString</span> *folername = [namespace componentsFromPath:f.path][<span class="number">0</span>];</span><br><span class="line">      [dic setValue:f.path forKey:folername];</span><br><span class="line">   &#125;</span><br><span class="line">  <span class="comment">//ç»§ç»­å…¶ä»–å¤„ç†ï¼›</span></span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p>è·å–æŸä¸ªæ–‡ä»¶å¤¹çš„mailæ•°ç›®ç­‰ä¿¡æ¯</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MCOIMAPFolderInfoOperation *folderInfo = [session folderInfoOperation:foldername];</span><br><span class="line"></span><br><span class="line">[folderInfo start:^(<span class="built_in">NSError</span> *error, MCOIMAPFolderInfo *info) &#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;    </span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">     &#125;</span><br><span class="line">    complete(info.messageCount);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><h4 id="3-æ‹‰å–æŸä¸ªæ–‡ä»¶å¤¹é‚®ä»¶åˆ—è¡¨"><a href="#3-æ‹‰å–æŸä¸ªæ–‡ä»¶å¤¹é‚®ä»¶åˆ—è¡¨" class="headerlink" title="3.æ‹‰å–æŸä¸ªæ–‡ä»¶å¤¹é‚®ä»¶åˆ—è¡¨"></a>3.æ‹‰å–æŸä¸ªæ–‡ä»¶å¤¹é‚®ä»¶åˆ—è¡¨</h4><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™é‡Œçš„kindæˆ‘è§‰å¾—æ˜¯éœ€è¦æ‹‰å–çš„å†…å®¹ä»¬ï¼Œæˆ‘æ˜¯å‡ ä¹å¤§éƒ¨åˆ†éƒ½downäº†ï¼Œå¯ä»¥çœ‹æƒ…å†µè‡ªå·±é€‰æ‹©ï¼›</span></span><br><span class="line"><span class="comment">//æ‹‰å–èŒƒå›´ï¼Œï¼ˆ0ï¼ŒUINT64_MAXï¼‰å°±æ˜¯éƒ½æ‹‰å–äº†ï¼Œæˆ‘æ˜¯10æ¡10æ¡çš„æ¥çš„ã€‚</span></span><br><span class="line">MCOIMAPMessagesRequestKind requestKind = (MCOIMAPMessagesRequestKind)</span><br><span class="line">(MCOIMAPMessagesRequestKindHeaders |</span><br><span class="line"> MCOIMAPMessagesRequestKindStructure |</span><br><span class="line"> MCOIMAPMessagesRequestKindInternalDate|</span><br><span class="line"> MCOIMAPMessagesRequestKindHeaderSubject |</span><br><span class="line"> MCOIMAPMessagesRequestKindFlags);</span><br><span class="line"></span><br><span class="line">MCOIndexSet *uids = [MCOIndexSet indexSetWithRange:MCORangeMake(range.location, range.length)];<span class="comment">//rangeæ§åˆ¶æ‹‰å–çš„é‚®ä»¶çš„èŒƒå›´ï¼ŒUINT64_MAX</span></span><br><span class="line">MCOIMAPFetchMessagesOperation *op = [session fetchMessagesOperationWithFolder:foldername requestKind:requestKind uids:uids];</span><br><span class="line">[op start:^(<span class="built_in">NSError</span> * _Nullable error, <span class="built_in">NSArray</span> * _Nullable messages, MCOIndexSet * _Nullable vanishedMessages) &#123;</span><br><span class="line">     <span class="built_in">NSMutableArray</span> *listArr = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line">     <span class="built_in">NSInteger</span> count = messages.count;</span><br><span class="line">     <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i ++) &#123;</span><br><span class="line">            MCOIMAPMessage *msg = messages[i];</span><br><span class="line">            <span class="comment">//ä¸€å †å±æ€§ï¼Œè‡ªå·±æ‘˜å–å§ï¼Œå¤§å¤šæ˜¯headeré‡Œçš„ï¼Œä¸ºäº†æ˜¾ç¤ºé‚®ä»¶åˆ—è¡¨ï¼Œé‚®ä»¶å†…å®¹æ˜¯å¦å¤–å•ç‹¬è·å–çš„ï¼Œå­˜å‚¨ä¹Ÿåªæ˜¯å­˜å‚¨äº†åˆ—è¡¨ï¼›</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆæ‹äº†ä¸€æ¬¡é¡ºåºï¼Œå¥½åƒæœ‰ç‚¹è ¢ğŸ™„ğŸ™„ğŸ™„ğŸ™„ğŸ™„ã€‚ã€‚ã€‚æˆ‘æ˜¯æ ¹æ®uidæ’åºçš„ï¼Œç›®å‰è¿˜æ²¡å‘ç°ä¹±åºä»€ä¹ˆçš„</span></span><br><span class="line">    <span class="built_in">NSSortDescriptor</span> *sortDescriptor = [<span class="built_in">NSSortDescriptor</span> sortDescriptorWithKey:<span class="string">@&quot;uid&quot;</span> ascending:<span class="literal">NO</span>];</span><br><span class="line">    [listArr sortUsingDescriptors:[<span class="built_in">NSArray</span> arrayWithObject:sortDescriptor]];</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰å¦å¤–ä¸€ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯å®åœ¨æ²¡å¤ªææ‡‚é‡Œé¢çš„numberå‚æ•°ï¼Œæ–‡æ¡£é‡Œè¯´sequence numberä¸èƒ½æ’åºç”¨ï¼Œæ‰€ä»¥æˆ‘æ²¡é€‰æ‹©è¿™ä¸ªæ–¹æ³•ï¼Œä¸»è¦æ˜¯æ²¡æ‡‚ğŸ‘ºğŸ‘ºğŸ‘ºğŸ‘ºğŸ‘ºğŸ‘ºğŸ‘º</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Returns an operation to fetch messages by (sequence) number.</span></span><br><span class="line">- (MCOIMAPFetchMessagesOperation *) fetchMessagesByNumberOperationWithFolder:(<span class="built_in">NSString</span> *)folder requestKind:(MCOIMAPMessagesRequestKind)requestKind numbers:(MCOIndexSet *)numbers;</span><br></pre></td></tr></table></figure><h4 id="4-å•å°é‚®ä»¶è·å–å’Œå¤„ç†"><a href="#4-å•å°é‚®ä»¶è·å–å’Œå¤„ç†" class="headerlink" title="4.å•å°é‚®ä»¶è·å–å’Œå¤„ç†"></a>4.å•å°é‚®ä»¶è·å–å’Œå¤„ç†</h4><ul><li><p>æ ¹æ®uidè·å–å•å°é‚®ä»¶</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å’Œè·å–é‚®ä»¶åˆ—è¡¨ä¸€æ ·ï¼Œä¸è¿‡rangeçš„é•¿åº¦æ˜¯0ï¼›</span></span><br><span class="line">MCOIndexSet *uids = [MCOIndexSet indexSetWithRange:MCORangeMake(uid, <span class="number">0</span>)];</span><br><span class="line"><span class="comment">//ä¹‹å‰å†™é”™äº†ï¼Œrangeé•¿åº¦åº”è¯¥æ˜¯0ï¼Œè€Œä¸æ˜¯1ï¼›</span></span><br><span class="line"><span class="comment">//MCOIndexSet *uids = [MCOIndexSet indexSetWithRange:MCORangeMake(uid, 1)];</span></span><br></pre></td></tr></table></figure></li><li><p>è·å–é‚®ä»¶çº¯æ–‡æœ¬å†…å®¹ï¼ˆä¸åŒ…æ‹¬htmlæ ·å¼ç­‰ï¼‰</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">     <span class="comment">//è¿™é‡Œæ˜¯åœ¨ä¸Šä¸€æ­¥è·å–å•ä¸ªé‚®ä»¶çš„å›è°ƒå†…è¿›è¡Œçš„</span></span><br><span class="line">     <span class="comment">//è¿™ä¸ªæ–¹æ³•æ˜¯è‡ªåŠ¨æŠŠæ–‡æœ¬ä¸­çš„ç©ºè¡Œä¹‹ç±»çš„å»æ‰äº†ï¼Œä¹Ÿæœ‰ä¸å»æ‰å’Œå¯é€‰æ˜¯å¦å»æ‰çš„æ–¹æ³•</span></span><br><span class="line">        MCOIMAPMessage *msg = [<span class="comment">//ä¸Šä¸€æ­¥çš„message];</span></span><br><span class="line">        MCOIMAPMessageRenderingOperation *  messageRenderingOperation = [session plainTextBodyRenderingOperationWithMessage:msg folder:foldername];</span><br><span class="line">        [messageRenderingOperation start:^(<span class="built_in">NSString</span> * plainTextBodyString,<span class="built_in">NSError</span> * error) &#123;</span><br><span class="line">            <span class="keyword">if</span> (error == <span class="literal">nil</span>) &#123;</span><br><span class="line">                complete(plainTextBodyString, msg);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="built_in">NSLog</span>(<span class="string">@&quot;fetch plain text error:%@&quot;</span>,error);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ–‡æ¡£é‡Œæ³¨é‡Šçš„ä¸èƒ½å†æ¸…æ¥šäº†ï¼Œè‡ªå·±æŸ¥é˜…å§ğŸ˜ˆğŸ˜ˆğŸ˜ˆğŸ˜ˆğŸ˜ˆ</span><br><span class="line"><span class="comment">//Returns an operation to render the plain text version of a message.</span></span><br><span class="line">- (MCOIMAPMessageRenderingOperation *) plainTextRenderingOperationWithMessage:(MCOIMAPMessage *)message folder:(<span class="built_in">NSString</span> *)folder;</span><br><span class="line"><span class="comment">// All end of line will be removed and white spaces cleaned up if requested.</span></span><br><span class="line">- (MCOIMAPMessageRenderingOperation *) plainTextBodyRenderingOperationWithMessage:(MCOIMAPMessage *)message folder:(<span class="built_in">NSString</span> *)folder stripWhitespace:(<span class="built_in">BOOL</span>)stripWhitespace;</span><br></pre></td></tr></table></figure><ul><li>è·å–htmlå†…å®¹ï¼Œæ”¾åœ¨ä¸€ä¸ªwebviewä¸­æ˜¾ç¤ºåŸºæœ¬å†…å®¹åº”è¯¥æ²¡é—®é¢˜äº†<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MCOIMAPMessage *msg = [åŒæ ·æ˜¯ä¸Šä¸€æ­¥çš„message];</span><br><span class="line">MCOIMAPMessageRenderingOperation *  messageRenderingOperation = [session htmlBodyRenderingOperationWithMessage:msg folder:foldername];</span><br><span class="line">[messageRenderingOperation start:^(<span class="built_in">NSString</span> * _Nullable htmlString, <span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">     <span class="keyword">if</span> (error == <span class="literal">nil</span>) &#123;</span><br><span class="line">         complete(htmlString, msg);</span><br><span class="line">     &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="built_in">NSLog</span>(<span class="string">@&quot;fetch plain text error:%@&quot;</span>,error);</span><br><span class="line">     &#125;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure></li></ul><h4 id="5-æ·»åŠ å„ç§æ ‡è®°"><a href="#5-æ·»åŠ å„ç§æ ‡è®°" class="headerlink" title="5.æ·»åŠ å„ç§æ ‡è®°"></a>5.æ·»åŠ å„ç§æ ‡è®°</h4><p>å·²è¯»æœªè¯»ï¼Œå°çº¢æ——æ ‡è®°ç­‰ç­‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>â€œkindâ€åŒºåˆ†æ˜¯æ·»åŠ æ ‡è®°è¿˜æ˜¯ç§»é™¤æ ‡è®°</code>ï¼Œä¾‹å¦‚å·²è¯»â€œMCOMessageFlagSeenâ€æ ‡è®°ï¼Œç§»é™¤å°±æˆäº†æœªè¯»ï¼Œ<code>æ²¡æœ‰â€œunseenâ€ä¹‹ç±»çš„ã€‚ã€‚ã€‚</code></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)setFlagged:(<span class="built_in">BOOL</span>)flagged message:(<span class="built_in">NSInteger</span>)uid folder:(<span class="built_in">NSString</span> *)folder &#123;</span><br><span class="line">    MCOIMAPSession *session = <span class="comment">//imap sessionï¼›</span></span><br><span class="line">    MCOIndexSet *uids = [MCOIndexSet indexSetWithIndex:uid];</span><br><span class="line">    MCOIMAPOperation *op = [session storeFlagsOperationWithFolder:folder</span><br><span class="line">                                                             uids:uids</span><br><span class="line">                                                             kind:(flagged ? MCOIMAPStoreFlagsRequestKindSet : MCOIMAPStoreFlagsRequestKindRemove)</span><br><span class="line">                                                            flags:MCOMessageFlagFlagged];</span><br><span class="line">    [op start:^(<span class="built_in">NSError</span> * _Nullable error) &#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;store star flag &#x27;s error: %@&quot;</span>,error);</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦‚æœè¦æ‰¹é‡è®¾ç½®æ ‡è®°ï¼Œuidså¯ä»¥é€šè¿‡rangeæ¥åˆ›å»º</span></span><br><span class="line">    MCOIndexSet *uids = [MCOIndexSet indexSetWithRange:MCORangeMake(range.location, range.length)];</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="6-åˆ é™¤é‚®ä»¶"><a href="#6-åˆ é™¤é‚®ä»¶" class="headerlink" title="6.åˆ é™¤é‚®ä»¶"></a>6.åˆ é™¤é‚®ä»¶</h4><p>ä¸ºä»€ä¹ˆå…ˆè¯´çš„æ ‡è®°é‚£éƒ¨åˆ†ï¼Œå› ä¸ºåˆ é™¤é‚®ä»¶ä¹Ÿæ˜¯æ·»åŠ â€œdeleteâ€æ ‡è®°ã€‚è¿™é‡Œéœ€è¦åšä¸€ä¸ªåŒºåˆ†ï¼Œ<code>è¦åˆ é™¤çš„é‚®ä»¶æ˜¯ä¸æ˜¯åœ¨ â€œå·²åˆ é™¤/è‰ç¨¿ç®±â€ è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹</code>ã€‚</p><p>ä¸»è¦æ“ä½œæœ‰ä¸‰ä¸ªï¼š</p><ul><li>1ã€copyä¸€ä»½åˆ°â€œå·²åˆ é™¤â€</li><li>2ã€è®¾ç½®åˆ é™¤æ ‡è®°</li><li>3ã€æ‰§è¡Œæ“¦é™¤expungeæ“ä½œ</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//**å¦‚æœæ˜¯ä¸åœ¨å·²åˆ é™¤ï¼Œè‰ç¨¿ç®±ï¼Œæ‰§è¡Œ1ã€2ã€3</span></span><br><span class="line"><span class="comment">//**å¦‚æœåœ¨ï¼Œåªæ‰§è¡Œ2ã€3</span></span><br><span class="line">    <span class="keyword">if</span> (![folder isEqualToString:deleteFolder] &amp;&amp; ![folder isEqualToString:draftFolder]) &#123;</span><br><span class="line">        <span class="comment">//copy ä¸€ä»½åˆ°å·²åˆ é™¤</span></span><br><span class="line">        MCOIMAPCopyMessagesOperation *op = [imapSession copyMessagesOperationWithFolder:folder</span><br><span class="line">                                                                                                    uids:[MCOIndexSet indexSetWithIndex:uid]</span><br><span class="line">                                                                                              destFolder:deleteFolder];</span><br><span class="line">        [op start:^(<span class="built_in">NSError</span> *error, <span class="built_in">NSDictionary</span> *uidMapping) &#123;</span><br><span class="line">            <span class="built_in">NSLog</span>(<span class="string">@&quot;Error copy message to folder:%@&quot;</span>, error);</span><br><span class="line">            [<span class="keyword">self</span> unturnedDelete:uid folder:folder];</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        [<span class="keyword">self</span> unturnedDelete:uid folder:folder];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)unturnedDelete:(<span class="built_in">NSInteger</span>)uid folder:(<span class="built_in">NSString</span> *)folder </span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//å…ˆæ·»åŠ åˆ é™¤flags</span></span><br><span class="line">    MCOIMAPOperation * op2 = [imapSession storeFlagsOperationWithFolder:folder</span><br><span class="line">                                                                                    uids:[MCOIndexSet indexSetWithIndex:uid]</span><br><span class="line">                                                                                    kind:MCOIMAPStoreFlagsRequestKindSet</span><br><span class="line">                                                                                   flags:MCOMessageFlagDeleted];</span><br><span class="line">    [op2 start:^(<span class="built_in">NSError</span> * error) &#123;</span><br><span class="line">        <span class="comment">//æ·»åŠ æˆåŠŸä¹‹åå¯¹å½“å‰æ–‡ä»¶å¤¹è¿›è¡Œexpungeæ“ä½œ</span></span><br><span class="line">        MCOIMAPOperation *deleteOp = [imapSession expungeOperation:folder];</span><br><span class="line">        [deleteOp start:^(<span class="built_in">NSError</span> *error) &#123;</span><br><span class="line">            <span class="keyword">if</span>(error) &#123;</span><br><span class="line">                <span class="built_in">NSLog</span>(<span class="string">@&quot;Error expunging folder:%@&quot;</span>, error);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">NSLog</span>(<span class="string">@&quot;Successfully expunged folder&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="7-é™„ä»¶å¤„ç†å’Œhtmlå†…å®¹è§£æ"><a href="#7-é™„ä»¶å¤„ç†å’Œhtmlå†…å®¹è§£æ" class="headerlink" title="7.é™„ä»¶å¤„ç†å’Œhtmlå†…å®¹è§£æ"></a>7.é™„ä»¶å¤„ç†å’Œhtmlå†…å®¹è§£æ</h4><ul><li><p>å®˜æ–¹demo<br><a href="https://github.com/MailCore/mailcore2/tree/master/example/ios/iOS%20UI%20Test/iOS%20UI%20Test">https://github.com/MailCore/mailcore2/tree/master/example/ios/iOS%20UI%20Test/iOS%20UI%20Test</a><br>githubä¸Šä»–ä»¬æœ‰å†™ä¸€ä¸ªdemoï¼Œæˆ‘ç›´æ¥ç”¨äº†é‡Œé¢ä¸¤ä¸ªç±»ï¼ŒmessageViewåˆè‡ªå·±åŠ äº†äº›ä¹±ä¸ƒå…«ç³Ÿçš„é€»è¾‘ã€‚protocolæ–¹ä¾¿è§£æçš„ï¼Œå…·ä½“è®²è§£åç»­æ›´æ–°ã€‚<br><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/24.png"></p></li><li><p>MCOHTMLRendererIMAPDelegate<br>è¿™ä¸ªåè®®é‡Œé¢ï¼Œæä¾›äº†å¯ä»¥è‡ªä¸»è§£æé™„ä»¶ã€å›¾ç‰‡ã€htmlå†…å®¹ï¼Œä»¥åŠç®€å•ç»™å®šhtmlå±•ç¤ºæ ·å¼çš„æ–¹æ³•ã€‚å…ˆè´´å‡ºheaderã€æ­£æ–‡ã€é™„ä»¶ï¼Œæˆ‘è‡ªå·±å†™çš„ä¸€ä¸ªç®€å•å±•ç¤ºæ¨¡æ¿å§ï¼Œå†…å®¹å¤„ç†è¿™å—ä¸œè¥¿å¤ªå¤šäº†ï¼Œæ•´ç†ä¸€ä¸‹å†ç»§ç»­æ›´æ–°ã€‚<br><a href="https://github.com/ATommyGirl/TemplateForMailCore2">TemplateForAttachment.html</a><br><a href="https://github.com/ATommyGirl/TemplateForMailCore2">TemplateForMessage.html</a><br><a href="https://github.com/ATommyGirl/TemplateForMailCore2">TemplateForMainHeader.html</a></p></li></ul><h4 id="8-åˆ›å»ºè‰ç¨¿ç®±é‚®ä»¶"><a href="#8-åˆ›å»ºè‰ç¨¿ç®±é‚®ä»¶" class="headerlink" title="8.åˆ›å»ºè‰ç¨¿ç®±é‚®ä»¶"></a>8.åˆ›å»ºè‰ç¨¿ç®±é‚®ä»¶</h4><p>â€‹     â€œappendâ€ æ‹¼æ¥çš„æ¦‚å¿µï¼Œå¾€ä¸€ä¸ªæ–‡ä»¶å¤¹å†…æ·»åŠ é‚®ä»¶ï¼›</p><ul><li>1ã€æ–°å»ºä¸€å°æ–°é‚®ä»¶(SMTPä¸­è®²åˆ›å»ºé‚®ä»¶)</li><li>2ã€è·å–ä½ çš„è‰ç¨¿ç®±æ–‡ä»¶å¤¹åç§°</li><li>3ã€æ‰§è¡Œappendæ“ä½œ<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™é‡Œçš„dataå°±æ˜¯æ–°å»ºçš„é‚®ä»¶ï¼›</span></span><br><span class="line">- (<span class="keyword">void</span>)createDraft:(<span class="built_in">NSData</span> *)data block:(<span class="keyword">void</span>(^)(<span class="keyword">bool</span> success, uint32_t uid, <span class="built_in">NSString</span> *folder))block</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!imapSession ) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">NSString</span> *folder = <span class="string">@&quot;Drafts&quot;</span> <span class="comment">//è‰ç¨¿ç®± ,æˆ–è€…æ˜¯ä½ é‚®ç®±æœåŠ¡å™¨è§£æåˆ°çš„è‰ç¨¿ç®±æ–‡ä»¶å¤¹åç§°ï¼›</span></span><br><span class="line"></span><br><span class="line">    MCOIMAPAppendMessageOperation *op = [imapSession appendMessageOperationWithFolder:folder messageData:data flags:MCOMessageFlagDraft];</span><br><span class="line">    [op start:^(<span class="built_in">NSError</span> *error, uint32_t createdUID) &#123;</span><br><span class="line">        <span class="comment">//do your operation;</span></span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;create Draft message :%@&quot;</span>,@(createdUID));</span><br><span class="line"></span><br><span class="line">    &#125;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> é‚®ç®± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo + GitHub Pages 404</title>
      <link href="/2017/10/02/GitHubPages404/"/>
      <url>/2017/10/02/GitHubPages404/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å¦‚ä½•é…ç½®GitHub Pagesç½‘ä¸Šèµ„æ–™å¾ˆå¤šï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼Œæˆ‘ä»¬è¡¥å……ä¸€ä¸ªé—®é¢˜çš„è§£å†³æ–¹å¼ã€‚å¾ˆå¤šäººéƒ½å‡ºä¼šå‡ºç°ï¼ŒHexoé¡¹ç›®ä¼ åˆ° GitHub çš„ä»“åº“åï¼Œè®¿é—® <code>username.github.io</code> åŸŸåï¼Œç»“æœæ˜¯404</p><p>æˆ‘æœé›†åˆ°çš„è§£å†³åŠæ³•å¤§æ¦‚æœ‰ä¸‰ä¸ªï¼Œå¸Œæœ›èƒ½å¸®åˆ°ä½ ï¼š</p><p>â€‹        <span id="more"></span></p><h4 id="1ã€Git-ä»“åº“çš„ä»“åº“åå’Œ-GitHub-Pages-çš„åŸŸåï¼ŒæŒ‰ç…§GitHubçš„è¦æ±‚ï¼Œé…ç½®æˆï¼š"><a href="#1ã€Git-ä»“åº“çš„ä»“åº“åå’Œ-GitHub-Pages-çš„åŸŸåï¼ŒæŒ‰ç…§GitHubçš„è¦æ±‚ï¼Œé…ç½®æˆï¼š" class="headerlink" title="1ã€Git ä»“åº“çš„ä»“åº“åå’Œ GitHub Pages çš„åŸŸåï¼ŒæŒ‰ç…§GitHubçš„è¦æ±‚ï¼Œé…ç½®æˆï¼š"></a>1ã€Git ä»“åº“çš„ä»“åº“åå’Œ GitHub Pages çš„åŸŸåï¼ŒæŒ‰ç…§GitHubçš„è¦æ±‚ï¼Œé…ç½®æˆï¼š</h4><p>&lt;githubè´¦å·å&gt;.github.io</p><p>åƒæˆ‘å°±æ˜¯ ATommyGirl.github.io</p><h4 id="2ã€æ£€æŸ¥-Hexo-ç«™ç‚¹çš„é…ç½®æ–‡ä»¶-condig-yml-ä¸­å…³äº-Git-çš„è®¾ç½®æ˜¯å¦æœ‰é—®é¢˜"><a href="#2ã€æ£€æŸ¥-Hexo-ç«™ç‚¹çš„é…ç½®æ–‡ä»¶-condig-yml-ä¸­å…³äº-Git-çš„è®¾ç½®æ˜¯å¦æœ‰é—®é¢˜" class="headerlink" title="2ã€æ£€æŸ¥ Hexo ç«™ç‚¹çš„é…ç½®æ–‡ä»¶ _condig.yml ä¸­å…³äº Git çš„è®¾ç½®æ˜¯å¦æœ‰é—®é¢˜"></a>2ã€æ£€æŸ¥ Hexo ç«™ç‚¹çš„é…ç½®æ–‡ä»¶ _condig.yml ä¸­å…³äº Git çš„è®¾ç½®æ˜¯å¦æœ‰é—®é¢˜</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:ATommyGirl/ATommyGirl.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p>çœ‹ä¸‹ repo å’Œ branch æ˜¯å¦å†™é”™äº†ï¼Œå¦‚æœä½ æ˜¯ä»ç½‘ä¸Šå¤åˆ¶çš„è¿™ä¸€ç«¯é…ç½®ï¼Œé¡ºä¾¿æ£€æŸ¥ä¸€ä¸‹yml æ ¼å¼æ˜¯ä¸æ˜¯é”™äº†ï¼Œå¤šäº†ä¸€ä¸ªç©ºæ ¼ä¹‹ç±»çš„å‘€ï¼Œå“ˆå“ˆå“ˆã€‚</p><h4 id="3ã€ç¼ºå°‘-index-html-æ–‡ä»¶ï¼Œæˆ–è€…è¯´â€é¦–é¡µæ²¡äº†â€ï¼Œè¿™ä¸ªæ˜¯æˆ‘å½“æ—¶é‡åˆ°çš„é—®é¢˜"><a href="#3ã€ç¼ºå°‘-index-html-æ–‡ä»¶ï¼Œæˆ–è€…è¯´â€é¦–é¡µæ²¡äº†â€ï¼Œè¿™ä¸ªæ˜¯æˆ‘å½“æ—¶é‡åˆ°çš„é—®é¢˜" class="headerlink" title="3ã€ç¼ºå°‘ index.html æ–‡ä»¶ï¼Œæˆ–è€…è¯´â€é¦–é¡µæ²¡äº†â€ï¼Œè¿™ä¸ªæ˜¯æˆ‘å½“æ—¶é‡åˆ°çš„é—®é¢˜"></a>3ã€ç¼ºå°‘ index.html æ–‡ä»¶ï¼Œæˆ–è€…è¯´â€é¦–é¡µæ²¡äº†â€ï¼Œè¿™ä¸ªæ˜¯æˆ‘å½“æ—¶é‡åˆ°çš„é—®é¢˜</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åœ¨ç«™ç‚¹ç›®å½•ä¸‹ï¼ŒGit Bash ä¸­ æ‰§è¡Œ</span></span><br><span class="line">npm install hexo-generator-index --save</span><br></pre></td></tr></table></figure><p>ä¹‹åå°±ç”Ÿæˆ index.html æ–‡ä»¶äº†ï¼Œç„¶åé‡æ–°æ‰§è¡Œä¸Šä¼  <code>hexo clean</code> <code>hexo g -d</code> è¯•è¯•ï¼Œåæ­£æˆ‘çš„æ˜¯å¯ä»¥äº†ã€‚æˆ‘æ˜¯åšç§»åŠ¨ç«¯å¼€å‘çš„ï¼Œwebå‰ç«¯ç€å®æœ‰ç‚¹è¿·â€¦â€¦ä¹Ÿéƒ½æ˜¯ä¸œæ‹¼è¥¿å‡‘çš„èµ„æ–™ã€‚</p><p>éœ€è¦è”ç³»çš„ï¼Œå» â€œå…³äº(About)â€ ä¸­æ‰¾åˆ°æˆ‘å§ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> 7788 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>iOSç¼–ç è§„èŒƒæ€»ç»“</title>
      <link href="/2017/01/04/iOS%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/"/>
      <url>/2017/01/04/iOS%E7%BC%96%E7%A0%81%E8%A7%84%E8%8C%83/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ã€ç©ºæ ¼"><a href="#ä¸€ã€ç©ºæ ¼" class="headerlink" title="ä¸€ã€ç©ºæ ¼"></a>ä¸€ã€ç©ºæ ¼</h2><h4 id="åœ¨é€‚å½“çš„åœ°æ–¹ã€é€‚å½“åœ°åŠ ç©ºæ ¼ã€å¯ä»¥é€‚å½“åœ°æé«˜ä»£ç å¯è¯»æ€§"><a href="#åœ¨é€‚å½“çš„åœ°æ–¹ã€é€‚å½“åœ°åŠ ç©ºæ ¼ã€å¯ä»¥é€‚å½“åœ°æé«˜ä»£ç å¯è¯»æ€§" class="headerlink" title="åœ¨é€‚å½“çš„åœ°æ–¹ã€é€‚å½“åœ°åŠ ç©ºæ ¼ã€å¯ä»¥é€‚å½“åœ°æé«˜ä»£ç å¯è¯»æ€§"></a>åœ¨é€‚å½“çš„åœ°æ–¹ã€é€‚å½“åœ°åŠ ç©ºæ ¼ã€å¯ä»¥é€‚å½“åœ°æé«˜ä»£ç å¯è¯»æ€§</h4><p>ä½ ä¸€å®šè¯»è¿‡â€ç´§å‡‘å‹â€çš„ä»£ç ï¼Œä¸€ä¸ªå­—ç¬¦æŒ¨ç€ä¸€ä¸ªå­—ç¬¦ï¼Œå¦‚æœä¸æ˜¯ä¼šæŠ¥é”™ï¼Œå¯èƒ½ç±»åå’Œå˜é‡åä¹‹é—´éƒ½æ²¡æœ‰ç©ºæ ¼äº†ã€‚ç”¨å¤§å­¦ c è¯­è¨€è€å¸ˆçš„è¯è¯´ï¼šä½ ä»¬çš„å¤§æ‹‡æŒ‡æ˜¯æ®‹ç–¾äº†å—ï¼Ÿï¼Ÿ</p><span id="more"></span><p>ä¸ºäº†é¿å…åšå®¢é£æ ¼å½±å“è§†è§‰ï¼Œç›´æ¥ä¸Šå›¾ç‰‡å§ã€‚å…¶å®æˆ‘ä¸çŸ¥é“æ˜¯ä¸æ˜¯æœ‰è¿™æ ·æ˜ç¡®çš„ç¼–ç è§„èŒƒï¼Œæˆ‘åªæ˜¯çœ‹è‹¹æœçš„æ€ä¹ˆå†™ï¼Œæˆ‘å°±æ€ä¹ˆå†™ï¼Œä¸‹é¢ä¹Ÿåªæ˜¯ä¸¾ä¸€äº›ç®€å•çš„ä¾‹å­ã€‚</p><p><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/22.png"></p><h2 id="äºŒã€è®¡æ—¶å™¨"><a href="#äºŒã€è®¡æ—¶å™¨" class="headerlink" title="äºŒã€è®¡æ—¶å™¨"></a>äºŒã€è®¡æ—¶å™¨</h2><h4 id="NSTimer-æ›¿æ¢ä¸ºdispatch-source-timer"><a href="#NSTimer-æ›¿æ¢ä¸ºdispatch-source-timer" class="headerlink" title="NSTimer æ›¿æ¢ä¸ºdispatch source timer"></a>NSTimer æ›¿æ¢ä¸ºdispatch source timer</h4><p>NSTimer åœ¨ä¸»çº¿ç¨‹çš„ Runloop é‡Œä¼šåœ¨ Runloop åˆ‡æ¢å…¶å®ƒæ¨¡å¼æ—¶åœæ­¢ï¼Œè¿™æ—¶å°±éœ€è¦æ‰‹åŠ¨åœ¨å­çº¿ç¨‹å¼€å¯ä¸€ä¸ªæ¨¡å¼ä¸º NSRunLoopCommonModes çš„ Runloopï¼Œå¹¶ä¸”é‡Šæ”¾ä¸åˆ°ä½ï¼Œä¼šå¯¼è‡´å¼•ç”¨ Timer çš„å¯¹è±¡ä¹Ÿå¾—ä¸åˆ°é‡Šæ”¾ã€‚ å¦‚æœä¸æƒ³å¼€å¯ä¸€ä¸ªæ–°çš„ Runloopï¼Œå¹¶ä¸”é¿å…å¼•ç”¨é—®é¢˜ï¼Œå¯ä»¥ç”¨ä¸è·Ÿ Runloop å…³è”çš„ dispatch source timerã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)createTimer &#123;</span><br><span class="line">    __block <span class="keyword">int</span> timeout = <span class="number">60</span>;</span><br><span class="line">    <span class="built_in">dispatch_queue_t</span> global = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</span><br><span class="line">    dispatch_source_t timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, <span class="number">0</span>, <span class="number">0</span>, global);</span><br><span class="line">    </span><br><span class="line">    dispatch_source_set_timer(timer, DISPATCH_TIME_NOW, <span class="number">1.0</span> * <span class="built_in">NSEC_PER_SEC</span>, <span class="number">0</span> * <span class="built_in">NSEC_PER_SEC</span>);</span><br><span class="line">    dispatch_source_set_event_handler(timer, ^&#123;</span><br><span class="line">        timeout --;</span><br><span class="line">        <span class="keyword">if</span> (timeout &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            dispatch_source_cancel(timer);</span><br><span class="line">            <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                <span class="comment">//do something after timer done.</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    </span><br><span class="line">    dispatch_resume(timer);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ›´å¤šå…³äºGCDçš„ç”¨æ³•ï¼Œè¯·è§æˆ‘çš„å¦ä¸€ä¸ªæ€»ç»“<a href="https://atommygirl.github.io/2016/01/13/GCD%EF%BC%88Grand%20Central%20Dispatch%EF%BC%89/">GCD (Grand Central Dispatch)</a> ã€‚</p><h2 id="ä¸‰ã€URLå­—ç¬¦ä¸²è§£æ"><a href="#ä¸‰ã€URLå­—ç¬¦ä¸²è§£æ" class="headerlink" title="ä¸‰ã€URLå­—ç¬¦ä¸²è§£æ"></a>ä¸‰ã€URLå­—ç¬¦ä¸²è§£æ</h2><h4 id="åˆ†æURLå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œä½¿ç”¨-NSURLComponents-ç±»åšè§£æï¼Œä¸è¦é€šè¿‡å­—ç¬¦ä¸²æˆªå–ç­‰æ–¹å¼"><a href="#åˆ†æURLå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œä½¿ç”¨-NSURLComponents-ç±»åšè§£æï¼Œä¸è¦é€šè¿‡å­—ç¬¦ä¸²æˆªå–ç­‰æ–¹å¼" class="headerlink" title="åˆ†æURLå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œä½¿ç”¨ NSURLComponents ç±»åšè§£æï¼Œä¸è¦é€šè¿‡å­—ç¬¦ä¸²æˆªå–ç­‰æ–¹å¼"></a>åˆ†æURLå­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œä½¿ç”¨ NSURLComponents ç±»åšè§£æï¼Œä¸è¦é€šè¿‡å­—ç¬¦ä¸²æˆªå–ç­‰æ–¹å¼</h4><p>æˆ‘çœ‹å¾ˆå¤šäººçš„ä»£ç ï¼Œåœ¨è§£æåˆ«äººä¼ ç»™ä»–çš„URL å­—ç¬¦ä¸²æ—¶ï¼ˆä¾‹å¦‚è‡ªå·±çš„APPè¢«æ‹‰èµ·æ—¶ï¼‰ï¼Œéƒ½æ˜¯ä½¿ç”¨ <code>NSString</code> çš„å„ç§æˆªå–æ–¹æ³•ï¼Œç„¶åå†è‡ªå·±åšåˆ¤æ–­ï¼Œè¿™æ˜¯æœ‰ç‚¹â€å±é™©â€çš„åšæ³•ã€‚å¦‚æœä½ è‡ªä¿¡é€»è¾‘ä¸¥è°¨çš„è¯ï¼Œé‚£æ²¡çš„è¯´ï¼Œå¦‚æœä½ ä¸æ“…é•¿æˆ–è€…æ‡’å¾—åšå¼‚å¸¸å¤„ç†ï¼Œ <code>NSRange</code>  çš„ <code>location</code> å­˜ä¸å­˜åœ¨ä»¥åŠ <code>length</code> è¶Šç•Œé—®é¢˜ï¼Œå°±å¯ä»¥æŠŠç¨‹åºæcrashã€‚æ‰€ä»¥å»ºè®®ä¸è¦è¿™æ ·åšï¼Œä½¿ç”¨ <code>NSURLComponents</code> ã€‚æ–‡æ¡£<a href="https://developer.apple.com/documentation/foundation/nsurlcomponents">NSURLComponents</a></p><p>çœ‹å®Œæ–‡æ¡£å°±ä¼šçŸ¥é“ï¼ŒçœŸçš„å¥½æ–¹ä¾¿ã€‚ã€‚ã€‚</p><ul><li>åˆå§‹åŒ–å°±ä¸å¤šè¯´äº†ï¼Œçœ‹è‡ªå·±éœ€è¦</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Initialize a NSURLComponents with all components undefined. Designated initializer.</span></span><br><span class="line">- (<span class="keyword">instancetype</span>)init;</span><br><span class="line">- (<span class="keyword">nullable</span> <span class="keyword">instancetype</span>)initWithURL:(<span class="built_in">NSURL</span> *)url resolvingAgainstBaseURL:(<span class="built_in">BOOL</span>)resolve;</span><br><span class="line">+ (<span class="keyword">nullable</span> <span class="keyword">instancetype</span>)componentsWithURL:(<span class="built_in">NSURL</span> *)url resolvingAgainstBaseURL:(<span class="built_in">BOOL</span>)resolve;</span><br><span class="line">- (<span class="keyword">nullable</span> <span class="keyword">instancetype</span>)initWithString:(<span class="built_in">NSString</span> *)URLString;</span><br><span class="line">+ (<span class="keyword">nullable</span> <span class="keyword">instancetype</span>)componentsWithString:(<span class="built_in">NSString</span> *)URLString;</span><br></pre></td></tr></table></figure><ul><li>è·å–URLé‡Œçš„å†…å®¹ï¼Œç®€ç›´ä¸è¦å¤ªæ–¹ä¾¿å“¦ï¼ŒURLEncodeä¹‹åçš„å‚æ•°éƒ½å‡†å¤‡å¥½äº†</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *scheme; <span class="comment">// Attempting to set the scheme with an invalid scheme string will cause an exception.</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *user;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *password;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *host;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSNumber</span> *port; <span class="comment">// Attempting to set a negative port number will cause an exception.</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *path;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *query;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *fragment;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *percentEncodedUser;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *percentEncodedPassword;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *percentEncodedHost;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *percentEncodedPath;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *percentEncodedQuery;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *percentEncodedFragment;</span><br><span class="line"></span><br><span class="line"><span class="comment">//begin ios 9.0</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSRange</span> rangeOfScheme;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSRange</span> rangeOfUser;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSRange</span> rangeOfPassword;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSRange</span> rangeOfHost;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSRange</span> rangeOfPort;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSRange</span> rangeOfPath;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSRange</span> rangeOfQuery;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">readonly</span>) <span class="built_in">NSRange</span> rangeOfFragment;</span><br></pre></td></tr></table></figure><p>å½“ç„¶å…³äº NSRange çš„è·å–ï¼Œæ˜¯ä»ios 9.0 å¼€å§‹æœ‰çš„ï¼Œé€‚é…ä½ç‰ˆæœ¬çš„è¯ï¼Œéœ€è¦æ³¨æ„ä¸€å“ˆã€‚</p><ul><li>å‚æ•°çš„é›†åˆï¼Œ<code>NSURLQueryItem</code> ç±»å‘¢å°±æ˜¯é€šè¿‡ key ã€value æ¥å–å‚æ•°ä»¬äº†</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// API_AVAILABLE(macos(10.10), ios(8.0), watchos(2.0), tvos(9.0))</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSArray</span>&lt;<span class="built_in">NSURLQueryItem</span> *&gt; *queryItems;</span><br><span class="line"><span class="comment">// API_AVAILABLE(macosx(10.13), ios(11.0), watchos(4.0), tvos(11.0))</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nullable</span>, <span class="keyword">copy</span>) <span class="built_in">NSArray</span>&lt;<span class="built_in">NSURLQueryItem</span> *&gt; *percentEncodedQueryItems;</span><br></pre></td></tr></table></figure><p>æˆ‘ä¹‹å‰ä¸æ˜¯ç‰¹åˆ«ç†è§£ï¼Œå‚æ•°è¦ç”¨æ•°ç»„ï¼‹Itemçš„æ–¹å¼ï¼Œç›´åˆ°é‡åˆ°äº†é‚£ä½ç»™æˆ‘ä¼ çš„URLé‡Œï¼Œæœ‰ä¸¤ä¸ªåŒåå‚æ•°ä¸åŒå€¼çš„ä»å…„ï¼Œæˆ‘æ‰æ›´åŠ ä½“ä¼šåˆ°äº†è‹¹æœå¼€å‘è€…çš„ä¸¥è°¨ã€‚ã€‚ã€‚</p><h2 id="å››ã€-æšä¸¾"><a href="#å››ã€-æšä¸¾" class="headerlink" title="å››ã€ æšä¸¾"></a>å››ã€ æšä¸¾</h2><p>ä¸¾ä¸€ä¸ªç®€å•çš„åœºæ™¯ï¼šèŠå¤©è½¯ä»¶ï¼Œä¼šåŒºåˆ† å•èŠã€ç¾¤èŠã€èŠå¤©å®¤ã€æœåŠ¡å·ç­‰ç­‰ç­‰ç­‰ ä¸åŒç±»å‹çš„ä¼šè¯ï¼Œå¼€å‘æ—¶åœ¨åšé¡µé¢é—´ä¼ å€¼çš„æ—¶å€™ï¼Œå¾€å¾€éœ€è¦æŠŠç±»å‹ä¼ é€’ä¸‹å»æ¥åšä¸åŒçš„äº‹æƒ…ï¼Œæ€ä¹ˆæ˜ç¡®çš„ä¼ å‘¢ï¼Ÿå¦‚æœè¿™ä¸ªé¡¹ç›®æ˜¯å¤šäººè´Ÿè´£ï¼Œæ¯ä¸ªäººè´Ÿè´£ä¸åŒçš„æ¨¡å—ï¼Œåƒä¸‹é¢è¿™æ ·å†™ä»£ç ï¼Œæ—¶é—´ä¹…äº†è°ä¹Ÿçœ‹ä¸æ‡‚ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//0å•èŠ,1ç¾¤èŠ</span></span><br><span class="line"><span class="keyword">@property</span>(<span class="keyword">nonatomic</span>,<span class="keyword">assign</span>)<span class="built_in">NSInteger</span> type;</span><br></pre></td></tr></table></figure><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vc.type = <span class="number">0</span>;</span><br></pre></td></tr></table></figure><p>ä¸è¦ç¬‘ï¼Œä½ è‚¯å®šä¹Ÿå†™è¿‡è¿™æ ·çš„ä»£ç ï¼Œæ¨¡å—å¤šäº†ã€æ—¶é—´ä¹…äº†ï¼Œtype  æ˜¯ä»€ä¹ˆæ„æ€ï¼ŸWho JB Know å•Šã€‚</p><p><strong>æšä¸¾å°±åœ¨è¿™ä¸ªæ—¶å€™å‘æŒ¥ä½œç”¨äº†ï¼šå¢åŠ ä»£ç å¯è¯»æ€§ã€‚</strong></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSUInteger</span>, ConversationType) &#123;</span><br><span class="line">    <span class="comment">//å•èŠ</span></span><br><span class="line">    ConversationTypePRIVATE = <span class="number">1</span>,</span><br><span class="line">    <span class="comment">//ç¾¤ç»„</span></span><br><span class="line">    ConversationTypeGROUP = <span class="number">2</span>,</span><br><span class="line">    <span class="comment">//èŠå¤©å®¤</span></span><br><span class="line">    ConversationTypeCHATROOM = <span class="number">3</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>è¿™æ ·ä¸€æ¥æ¯”èµ·å•è–„çš„æ•°å­—ï¼Œæ˜¯ä¸æ˜¯æ›´è§åçŸ¥æ„äº†å‘¢ï¼Ÿè€Œä¸” OC ä¸­æšä¸¾å®šä¹‰å€¼çš„æ—¶å€™ï¼Œéƒ½æ˜¯ æšä¸¾å + å…·ä½“åˆ†ç±»ï¼Œä¾‹å¦‚æˆ‘ä»¬å†™çš„è¿™ä¸ªæšä¸¾ä¸­å•èŠçš„å®šä¹‰å°±æ˜¯  <code>ConversationType</code> + <code>PRIVATE</code> = <code>ConversationTypePRIVATE</code>ã€‚æ•²å‡ºæ¥çš„æ—¶å€™å¥½æ•²ï¼Œå“ˆå“ˆã€‚</p><p>æœ‰çš„åŒå­¦å¯èƒ½ä¼šé—®äº†ï¼Œåº”å¯¹ç±»å‹æ˜¯æ•´å‹çš„ type è¿™ä¸ªæšä¸¾æ˜¯å¤Ÿç”¨äº†ï¼Œé‚£ç”¨å­—ç¬¦ä¸²æ¥åˆ†ç±»çš„å‘¢ï¼Ÿæ²¡é”™ï¼Œè¿™æ˜¯ä¸ªé—®é¢˜ï¼Œå°¤å…¶æ˜¯å’ŒæœåŠ¡ç«¯å¯¹æ¥ä¹…äº†ï¼Œä½ ä¼šå‘ç°ï¼Œä»–ä»¬ä½¿ç”¨ å­—ç¬¦ä¸² å¤šè¿‡ æ•°å€¼ç±»å‹ã€‚ä¸æ€¥ï¼Œæˆ‘ä»¬æ¥å°æ¢ä¸€ä¸‹ OC ä¸­æšä¸¾éƒ½æ€ä¹ˆç”¨çš„ï¼š</p><h4 id="æ™®é€šæšä¸¾"><a href="#æ™®é€šæšä¸¾" class="headerlink" title="æ™®é€šæšä¸¾"></a>æ™®é€šæšä¸¾</h4><h5 id="1ã€C-è¯­è¨€çš„æšä¸¾å†™æ³•-enum"><a href="#1ã€C-è¯­è¨€çš„æšä¸¾å†™æ³•-enum" class="headerlink" title="1ã€C è¯­è¨€çš„æšä¸¾å†™æ³• enum"></a>1ã€C è¯­è¨€çš„æšä¸¾å†™æ³• enum</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">enum</span>&#123;</span></span><br><span class="line">    ConversationTypePRIVATE = <span class="number">1</span>,</span><br><span class="line">    ConversationTypeGROUP = <span class="number">2</span>,</span><br><span class="line">    ConversationTypeCHATROOM = <span class="number">3</span>,</span><br><span class="line">&#125; ConversationType;</span><br></pre></td></tr></table></figure><h5 id="2ã€OC-æ•´å‹æšä¸¾"><a href="#2ã€OC-æ•´å‹æšä¸¾" class="headerlink" title="2ã€OC æ•´å‹æšä¸¾"></a>2ã€OC æ•´å‹æšä¸¾</h5><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSUInteger</span>, ConversationType) &#123;</span><br><span class="line">    <span class="comment">//å•èŠ</span></span><br><span class="line">    ConversationTypePRIVATE = <span class="number">1</span>,</span><br><span class="line">    <span class="comment">//ç¾¤ç»„</span></span><br><span class="line">    ConversationTypeGROUP = <span class="number">2</span>,</span><br><span class="line">    <span class="comment">//èŠå¤©å®¤</span></span><br><span class="line">    ConversationTypeCHATROOM = <span class="number">3</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h5 id="3ã€å­—ç¬¦ä¸²æšä¸¾å®ç°æ–¹æ¡ˆ"><a href="#3ã€å­—ç¬¦ä¸²æšä¸¾å®ç°æ–¹æ¡ˆ" class="headerlink" title="3ã€å­—ç¬¦ä¸²æšä¸¾å®ç°æ–¹æ¡ˆ"></a>3ã€å­—ç¬¦ä¸²æšä¸¾å®ç°æ–¹æ¡ˆ</h5><h6 id="1ã€åŸºäºæ™®é€šæšä¸¾ï¼ŒC-è¯­è¨€å®ç°"><a href="#1ã€åŸºäºæ™®é€šæšä¸¾ï¼ŒC-è¯­è¨€å®ç°" class="headerlink" title="1ã€åŸºäºæ™®é€šæšä¸¾ï¼ŒC è¯­è¨€å®ç°"></a>1ã€åŸºäºæ™®é€šæšä¸¾ï¼ŒC è¯­è¨€å®ç°</h6><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å…ˆå®šä¹‰ä¸€ä¸ªæ™®é€šçš„æ•´å‹æšä¸¾</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSUInteger</span>, ConversationType) &#123;</span><br><span class="line">    <span class="comment">//å•èŠ</span></span><br><span class="line">    ConversationTypePRIVATE = <span class="number">1</span>,</span><br><span class="line">    <span class="comment">//ç¾¤ç»„</span></span><br><span class="line">    ConversationTypeGROUP = <span class="number">2</span>,</span><br><span class="line">    <span class="comment">//èŠå¤©å®¤</span></span><br><span class="line">    ConversationTypeCHATROOM = <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ç°ä¸€ä¸ªæ–¹æ³•ï¼Œå®ç°é‡Œåš æ•´å‹ å’Œ å­—ç¬¦ä¸² çš„åŒ¹é…</span></span><br><span class="line"><span class="built_in">NSString</span> *ConversationTypeString(ConversationType status) &#123;</span><br><span class="line">    <span class="keyword">switch</span> (status) &#123;</span><br><span class="line">        <span class="keyword">case</span> ConversationTypePRIVATE:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">@&quot;private&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> ConversationTypeGROUP:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">@&quot;group&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> ConversationTypeCHATROOM:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">@&quot;chatroom&quot;</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">@&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ–è€…ä½¿ç”¨ ä¸€ä¸ª NSString * ç±»å‹çš„æ•°ç»„</span></span><br><span class="line"><span class="built_in">NSString</span> *ConversationTypeStringMap[] = &#123;</span><br><span class="line">    [ConversationTypePRIVATE] = <span class="string">@&quot;private&quot;</span>,</span><br><span class="line">    [ConversationTypeGROUP] = <span class="string">@&quot;group&quot;</span>,</span><br><span class="line">    [ConversationTypeCHATROOM] = <span class="string">@&quot;chatroom&quot;</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>ä½†è¿™ä¸¤ç§æ–¹å¼æœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œå°±æ˜¯ä¸èƒ½åƒæšä¸¾ç±»å‹ä¸€æ ·ç›´æ¥ä½œä¸ºä¸€ä¸ªç±»å‹ é™å®šä¼ å‚çš„ç±»å‹ã€‚</strong></p><h6 id="2ã€å®å®šä¹‰"><a href="#2ã€å®å®šä¹‰" class="headerlink" title="2ã€å®å®šä¹‰"></a>2ã€å®å®šä¹‰</h6><p>åˆæœŸæˆ‘ä½¿ç”¨å®å®šä¹‰æ¯”è¾ƒå¤šï¼Œæ¯ä¸ªç±»å‹å€¼å®šä¹‰ä¸€ä¸ªå®ã€‚ã€‚ã€‚è¿™é‡Œä¸ä¸¾ä¾‹äº†ã€‚ã€‚ã€‚</p><h6 id="3ã€è‹¹æœå®˜æ–¹çš„åšæ³•"><a href="#3ã€è‹¹æœå®˜æ–¹çš„åšæ³•" class="headerlink" title="3ã€è‹¹æœå®˜æ–¹çš„åšæ³•"></a>3ã€è‹¹æœå®˜æ–¹çš„åšæ³•</h6><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//.h ä¸­ </span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">NSString</span> *ConversationTypeKey <span class="built_in">NS_STRING_ENUM</span>;</span><br><span class="line"></span><br><span class="line">FOUNDATION_EXPORT ConversationTypeKey <span class="keyword">const</span> ConversationTypeKeyPRIVATE;</span><br><span class="line">FOUNDATION_EXPORT ConversationTypeKey <span class="keyword">const</span> ConversationTypeKeyGROUP;</span><br><span class="line">FOUNDATION_EXPORT ConversationTypeKey <span class="keyword">const</span> ConversationTypeKeyCHATROOM;</span><br><span class="line"></span><br><span class="line"><span class="comment">//.m ä¸­ </span></span><br><span class="line"><span class="built_in">NSString</span> * <span class="keyword">const</span> ConversationTypeKeyPRIVATE = <span class="string">@&quot;private&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> * <span class="keyword">const</span> ConversationTypeKeyGROUP = <span class="string">@&quot;group&quot;</span>;</span><br><span class="line"><span class="built_in">NSString</span> * <span class="keyword">const</span> ConversationTypeKeyCHATROOM = <span class="string">@&quot;chatroom&quot;</span>; </span><br></pre></td></tr></table></figure><p><strong>ç›¸æ¯”ä¼šäº§ç”Ÿè¿‡å¤šäºŒè¿›åˆ¶æ–‡ä»¶çš„å®å®šä¹‰æ–¹å¼, å»ºè®®ç”¨FOUNDATION_EXPORT</strong></p><h4 id="ä½ç§»æšä¸¾"><a href="#ä½ç§»æšä¸¾" class="headerlink" title="ä½ç§»æšä¸¾"></a>ä½ç§»æšä¸¾</h4><p>==</p>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è½¬è½½ã€‘CentOS å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œå‘½ä»¤</title>
      <link href="/2016/07/01/CentOS%20%E5%B8%B8%E7%94%A8%E7%9A%84%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4/"/>
      <url>/2016/07/01/CentOS%20%E5%B8%B8%E7%94%A8%E7%9A%84%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="cd-pwd"><a href="#cd-pwd" class="headerlink" title="cd pwd"></a>cd pwd</h3><ol><li>æ˜¾ç¤ºå½“å‰è·¯å¾„</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pwd</span> </span><br></pre></td></tr></table></figure><ol start="2"><li>è¿”å›ç”¨æˆ·ä¸»ç›®å½•</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> </span><br></pre></td></tr></table></figure><span id="more"></span><ol start="3"><li>æ”¹å˜åˆ°å…¶å®ƒè·¯å¾„</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc </span><br></pre></td></tr></table></figure><ol start="4"><li>è¿”å›åˆ°ä¸Šä¸€çº§ç›®å½•</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd .. </span><br></pre></td></tr></table></figure><ol start="5"><li>è¿”å›åˆ°æ ¹ç›®å½•</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /</span><br></pre></td></tr></table></figure><h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><blockquote><p>æŸ¥è¯¢æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„ CentOS å¸¸ç”¨å‘½ä»¤</p></blockquote><ol><li>æŸ¥æ‰¾å½“å‰ç”¨æˆ·ä¸»ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ~ </span><br></pre></td></tr></table></figure><ol start="2"><li>è®©å½“å‰ç›®å½•ä¸­æ–‡ä»¶å±ä¸»å…·æœ‰è¯»ã€å†™æƒé™ï¼Œå¹¶ä¸”æ–‡ä»¶æ‰€å±ç»„çš„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·å…·æœ‰è¯»æƒé™çš„æ–‡ä»¶</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -perm 644 -<span class="built_in">exec</span> ls -l &#123;&#125; \; </span><br></pre></td></tr></table></figure><ol start="3"><li>ä¸ºäº†æŸ¥æ‰¾ç³»ç»Ÿä¸­æ‰€æœ‰æ–‡ä»¶é•¿åº¦ä¸º 0 çš„æ™®é€šæ–‡ä»¶ï¼Œå¹¶åˆ—å‡ºå®ƒä»¬çš„å®Œæ•´è·¯å¾„</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / size 0 -<span class="built_in">type</span> f -<span class="built_in">exec</span> ls -l &#123;&#125; \; </span><br></pre></td></tr></table></figure><ol start="4"><li>æŸ¥æ‰¾ / var/logs ç›®å½•ä¸­æ›´æ”¹æ—¶é—´åœ¨ 7 æ—¥ä»¥å‰çš„æ™®é€šæ–‡ä»¶ï¼Œå¹¶åœ¨åˆ é™¤ä¹‹å‰è¯¢é—®å®ƒä»¬</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /var/logs -mtime +7 -<span class="built_in">type</span> f -ok rm -i &#123;&#125; \; </span><br></pre></td></tr></table></figure><ol start="5"><li>ä¸º / æ‰¾ç³»ç»Ÿä¸­æ‰€æœ‰å±äº root ç»„çš„æ–‡ä»¶</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -group root -<span class="built_in">exec</span> ls -l &#123;&#125; \; </span><br></pre></td></tr></table></figure><ol start="6"><li>find å‘½ä»¤å°†åˆ é™¤å½“ç›®å½•ä¸­è®¿é—®æ—¶é—´åœ¨ 7 æ—¥ä»¥æ¥ã€å«æœ‰æ•°å­—åç¼€çš„ admin.log æ–‡ä»¶</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -name <span class="string">&quot;admin.log[0-9][0-9][0-9]&quot;</span> -atime -7 -ok rm &#123; &#125; \; </span><br></pre></td></tr></table></figure><ol start="7"><li>ä¸ºäº†æŸ¥æ‰¾å½“å‰æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ‰€æœ‰ç›®å½•å¹¶æ’åº</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="built_in">type</span> d | sort </span><br></pre></td></tr></table></figure><ol start="8"><li>ä¸ºäº†æŸ¥æ‰¾ç³»ç»Ÿä¸­æ‰€æœ‰çš„ rmt ç£å¸¦è®¾å¤‡</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /dev/rmt</span><br></pre></td></tr></table></figure><h3 id="ls-dir"><a href="#ls-dir" class="headerlink" title="ls / dir"></a>ls / dir</h3><blockquote><p>æ˜¾ç¤ºæ–‡ä»¶ / æ–‡ä»¶å¤¹æ¸…å•çš„ CentOS å¸¸ç”¨å‘½ä»¤</p></blockquote><ol><li>æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬ä»¥. å¼€å¤´çš„éšå«æ–‡ä»¶</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -a </span><br></pre></td></tr></table></figure><ol start="2"><li>æ˜¾ç¤ºæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l </span><br></pre></td></tr></table></figure><ol start="3"><li>æ˜¾ç¤ºå½“å‰ç›®å½•åŠæ‰€æœ‰å­ç›®å½•ä¿¡æ¯</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -Rl </span><br></pre></td></tr></table></figure><ol start="4"><li>ä»¥æ—¶é—´åºæ˜¾ç¤ºç›®å½•, è¿™åœ¨æ‰¾æœ€æ–°æ–‡ä»¶æœ‰ç”¨</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -tl </span><br></pre></td></tr></table></figure><ol start="5"><li>ä»¥æ–‡ä»¶å¤§å°æ’åº</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -Sl </span><br></pre></td></tr></table></figure><ol start="6"><li>æ˜¾ç¤ºæ–‡ä»¶å¤§å°, å¹¶æŒ‰å¤§å°æ’åº</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -s -l -S</span><br></pre></td></tr></table></figure><h3 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h3><blockquote><p> ç§»åŠ¨æˆ–æ›´æ”¹æ–‡ä»¶ / æ–‡ä»¶å¤¹åç§°çš„ CentOS å¸¸ç”¨å‘½ä»¤ ä¸ cp å‘½ä»¤ç”¨æ³•ç›¸ä¼¼</p></blockquote><ol><li>è‹¥ç§»åŠ¨ç›®æ ‡æ–‡ä»¶å·²å­˜åœ¨ï¼Œè¦åœ¨ç§»åŠ¨ä¹‹å‰ï¼Œå…ˆå¤‡ä»½åŸæ¥çš„ç›®å½•æ–‡ä»¶</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv -b test.txt test2/ </span><br></pre></td></tr></table></figure><p>è¿™æ ·åœ¨ test2 ä¸‹å°†æœ‰ä¸¤ä¸ªæ–‡ä»¶ test.txt åŠ text.txt~</p><p>å…¶ä¸­ test.txt~ æ˜¯å¤‡ä»½æ–‡ä»¶ï¼Œtest.txt æ˜¯æ–°çš„æ–‡ä»¶</p><ol start="2"><li>è‹¥ç§»åŠ¨ç›®æ ‡æ–‡ä»¶å·²å­˜åœ¨ï¼Œä½†ä¸æƒ³å¼¹å‡ºæ˜¯å¦è¦†ç›–çš„æç¤ºï¼Œç›´æ¥è¦†ç›–</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> <span class="operator">-f</span> test.txt test2/ </span><br></pre></td></tr></table></figure><ol start="3"><li>å½“æºä¸ç›®æ ‡éƒ½æ‹¥æœ‰åŒä¸€ä¸ªæ–‡ä»¶ï¼Œè‹¥æºæ–‡ä»¶æ¯”ç›®æ ‡æ–°åˆ™ç§»åŠ¨ï¼Œå¦åˆ™ä¸ç§»åŠ¨</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> <span class="literal">-u</span> test.txt test2/ </span><br></pre></td></tr></table></figure><ol start="4"><li>æ›´æ”¹æ–‡ä»¶åç§°</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> test.txt test2.txt </span><br></pre></td></tr></table></figure><ol start="5"><li>æ›´æ”¹ç›®å½•åç§°</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> /test2 /test2_2[/<span class="type">size</span>]</span><br></pre></td></tr></table></figure><h3 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h3><blockquote><p>æ”¹å˜æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æƒé™çš„ CentOS å¸¸ç”¨å‘½ä»¤ </p></blockquote><ol><li>å°†è‡ªå·±çš„ç¬”è®°è®¾ä¸ºåªæœ‰è‡ªå·±æ‰èƒ½çœ‹</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod go<span class="literal">-rwx</span> test.txt </span><br><span class="line"><span class="comment"># æˆ–è€… </span></span><br><span class="line">chmod <span class="number">700</span> test.txt </span><br></pre></td></tr></table></figure><ol start="2"><li>åŒæ—¶ä¿®æ”¹å¤šä¸ªæ–‡ä»¶çš„æƒé™</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod <span class="number">700</span> test1.txt test2.txt </span><br></pre></td></tr></table></figure><ol start="3"><li>ä¿®æ”¹ä¸€ä¸ªç›®å½•çš„æƒé™ï¼ŒåŒ…æ‹¬å…¶å­ç›®å½•åŠæ–‡ä»¶</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod <span class="number">700</span> <span class="literal">-R</span> test</span><br></pre></td></tr></table></figure><h3 id="chown"><a href="#chown" class="headerlink" title="chown"></a>chown</h3><blockquote><p>æ”¹å˜æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ‹¥æœ‰è€…çš„ CentOS å¸¸ç”¨å‘½ä»¤ï¼Œè¯¥å‘½ä»¤åªæœ‰ root æ‰èƒ½ä½¿ç”¨</p></blockquote><ol><li>æ›´æ”¹æŸä¸ªæ–‡ä»¶çš„æ‹¥æœ‰è€…</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown jim:usergroup test.txt</span><br></pre></td></tr></table></figure><ol start="2"><li>æ›´æ”¹æŸä¸ªç›®å½•çš„æ‹¥æœ‰è€…, å¹¶åŒ…å«å­ç›®å½•</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown jim:usergroup -R <span class="built_in">test</span></span><br></pre></td></tr></table></figure><h3 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h3><blockquote><p>æŸ¥çœ‹æ–‡æœ¬æ–‡ä»¶å†…å®¹çš„ CentOS å¸¸ç”¨å‘½ä»¤</p></blockquote><ol><li>æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼Œå¹¶åœ¨æ¯è¡Œå‰é¢åŠ ä¸Šè¡Œå·</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -n test.txt </span><br></pre></td></tr></table></figure><ol start="2"><li>æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼Œåœ¨ä¸æ˜¯ç©ºè¡Œçš„å‰é¢åŠ ä¸Šè¡Œå·</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -b test.txt </span><br></pre></td></tr></table></figure><ol start="3"><li>åˆå¹¶ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat test1.txt test2.txt &gt; test_new.txt </span><br></pre></td></tr></table></figure><ol start="4"><li>å…¨å¹¶ä¸¤å…·æ–‡ä»¶çš„å†…å®¹ï¼Œå¹¶è¿½å›åˆ°ä¸€ä¸ªæ–‡ä»¶</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat test1.txt test2.txt &gt;&gt; test_total.txt </span><br></pre></td></tr></table></figure><ol start="5"><li>æ¸…ç©ºæŸä¸ªæ–‡ä»¶çš„å†…å®¹</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /dev/null &gt; test.txt </span><br></pre></td></tr></table></figure><ol start="6"><li>åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> &gt; new.txt <span class="comment"># æŒ‰ CTRL + C ç»“æŸå½•å…¥</span></span><br></pre></td></tr></table></figure><h3 id="vi"><a href="#vi" class="headerlink" title="vi"></a>vi</h3><blockquote><p>ç¼–è¾‘æ–‡ä»¶æ–‡ä»¶çš„ CentOS å¸¸ç”¨å‘½ä»¤ </p></blockquote><ol><li>æ–°å»ºæ¡£æ¡ˆæ–‡ä»¶</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi newfile.txt </span><br></pre></td></tr></table></figure><ol start="2"><li>ä¿®æ”¹æ¡£æ¡ˆæ–‡ä»¶</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi test.txt   <span class="comment">#test.txt å·²å­˜åœ¨ </span></span><br></pre></td></tr></table></figure><ol start="3"><li><p>vi çš„ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼šå‘½ä»¤æ¨¡å¼ï¼Œç¼–è¾‘æ¨¡å¼</p></li><li><p>è¿›å…¥ vi åä¸ºå‘½ä»¤æ¨¡å¼ï¼ŒæŒ‰ Insrt é”®è¿›å…¥ç¼–è¾‘æ¨¡å¼; æŒ‰ ESC è¿›å…¥å‘½ä»¤æ¨¡å¼ï¼Œåœ¨å‘½ä»¤æ¨¡å¼ä¸èƒ½ç¼–è¾‘ï¼Œåªèƒ½è¾“å…¥å‘½ä»¤.</p></li><li><p>å‘½ä»¤æ¨¡å¼å¸¸ç”¨å‘½ä»¤</p></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">:w ä¿å­˜å½“å‰æ–‡æ¡£ </span><br><span class="line">:q ç›´æ¥é€€å‡º vi </span><br><span class="line">:wq å…ˆä¿å­˜åé€€å‡º ã€‚</span><br><span class="line">:q! å¼ºåˆ¶ä¸ä¿å­˜é€€å‡º</span><br></pre></td></tr></table></figure><h3 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h3><blockquote><p>åˆ›å»ºç›®å½•çš„ CentOS å¸¸ç”¨å‘½ä»¤ </p></blockquote><ol><li>åœ¨å½“å‰è·¯å¾„åˆ›å»ºä¸€çº§ç›®å½•</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="built_in">test</span> </span><br></pre></td></tr></table></figure><ol start="2"><li>åœ¨å½“å‰è·¯å¾„åˆ›å»ºå¤šçº§ç›®å½•</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="literal">-p</span> mytest/test1/test1_1 </span><br></pre></td></tr></table></figure><ol start="3"><li>åœ¨åˆ›å»ºç›®å½•çš„åŒæ—¶ç»™æ–°å»ºçš„ç›®å½•èµ‹æƒé™</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="literal">-m</span> <span class="number">777</span> testmod </span><br></pre></td></tr></table></figure><p>è¿™æ ·ä»»ä½•äººå¯¹æ­¤ç›®å½•éƒ½æœ‰ä»»ä½•æƒé™</p><h3 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h3><blockquote><p>å¤åˆ¶æ–‡ä»¶ä¸æ–‡ä»¶å¤¹çš„ CentOS å¸¸ç”¨å‘½ä»¤</p></blockquote><ol><li>å¤åˆ¶æŒ‡å®šç›®å½•çš„æ–‡ä»¶åˆ°å½“å‰ç›®å½•ï¼Œå¹¶é‡å‘½å</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ~/.bashrc bashrc_bak </span><br></pre></td></tr></table></figure><ol start="2"><li>å¼ºåˆ¶å¤åˆ¶æŒ‡å®šç›®å½•çš„æ–‡ä»¶åˆ°å½“å‰ç›®å½•ï¼Œè€Œä¸ç®¡å½“å‰ç›®å½•æ˜¯å¦å«æœ‰è¯¥æ–‡ä»¶</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -f ~/.bashrc bashrc </span><br></pre></td></tr></table></figure><ol start="2"><li>å¤åˆ¶æŒ‡å®šç›®å½•åˆ°å½“å‰ç›®å½•</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp -r /root/<span class="built_in">test</span> . </span><br><span class="line">cp -r /root/<span class="built_in">test</span>/ . </span><br></pre></td></tr></table></figure><p>ä¸¤è€…æ•ˆæœä¸€æ ·ï¼Œåœ¨å¤åˆ¶ç›®å½•æ—¶ï¼Œä¼šå°†æºè·¯å¾„çš„æœ€åä¸€çº§ç›®å½•å…¨éƒ¨å¤åˆ¶è¿‡å»ï¼ŒåŒ…æ‹¬å®ƒæœ¬èº«ã€‚</p><ol start="3"><li>å¤åˆ¶æŒ‡å®šç›®å½•çš„æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ~/.bashrc /bak/.bashrc </span><br></pre></td></tr></table></figure><ol start="4"><li>åœ¨å¤åˆ¶æ—¶å°†æºæ–‡ä»¶çš„å…¨éƒ¨å±æ€§ä¹Ÿå¤åˆ¶è¿‡æ¥ã€‚è‹¥ä¸æŒ‡å®šå‚æ•°ï¼Œåˆ™ç›®æ ‡æ–‡ä»¶ä¸æºæ–‡ä»¶å±æ€§å¯èƒ½ä¸ä¸€è‡´</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -a ~/.bashrc /bak/.bashrc </span><br></pre></td></tr></table></figure><ol start="5"><li>è‹¥ä¸¤ä¸ªæ–‡ä»¶å¤¹è¦ä¿è¯åŒæ­¥ï¼Œä¸€ä¸ªæ–‡ä»¶çš„æ”¹äº†ï¼Œå¦ä¸€ä¸ªæ–‡ä»¶ä¹Ÿè·Ÿç€æ”¹ï¼Œä½†æ˜¯è¦ä¿è¯ä¸¤ä¸ªæ–‡ä»¶çš„æ–‡ä»¶éƒ½æ˜¯æœ€æ–°çš„</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -u /src/.bashrc /bak_src/bashrc</span><br></pre></td></tr></table></figure><h3 id="ln"><a href="#ln" class="headerlink" title="ln"></a>ln</h3><blockquote><p>å»ºç«‹é“¾æ¥æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç¡¬é“¾æ¥ä¸è½¯é“¾æ¥çš„ CentOS å¸¸ç”¨å‘½ä»¤</p></blockquote><ol><li>å»ºç«‹ç±»ä¼¼äº Windows çš„å¿«æ·æ–¹å¼</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s test.txt test.txt_slnk </span><br></pre></td></tr></table></figure><ol start="2"><li>å½“æƒ³å¤‡ä»½ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†ç©ºé—´åˆä¸å¤Ÿï¼Œåˆ™å¯ä»¥ä¸ºè¯¥æ–‡ä»¶å»ºç«‹ä¸€ä¸ªç¡¬è¿æ¥ã€‚è¿™æ ·ï¼Œå°±ç®—åŸæ–‡ä»¶åˆ é™¤äº†ï¼Œåªè¦è¯¥ é“¾æ¥æ–‡ä»¶æ²¡è¢«åˆ é™¤ï¼Œåˆ™åœ¨å­˜å‚¨ç©ºé—´é‡Œè¿˜æ˜¯æ²¡æœ‰è¢«åˆ é™¤</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -l test.txt test.txt_hlnk</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ CentOS å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹ cpu</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">more /proc/cpuinfo | grep <span class="string">&quot;model name&quot;</span>   </span><br><span class="line">grep <span class="string">&quot;model name&quot;</span> /proc/cpuinfo   </span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> /]<span class="comment"># grep &quot;CPU&quot; /proc/cpuinfo   </span></span><br><span class="line">model name      : Intel(<span class="built_in">R</span>) Pentium(<span class="built_in">R</span>) Dual CPU E2180 <span class="selector-tag">@</span> <span class="number">2.00</span>GHz   </span><br><span class="line">model name      : Intel(<span class="built_in">R</span>) Pentium(<span class="built_in">R</span>) Dual CPU E2180 <span class="selector-tag">@</span> <span class="number">2.00</span>GHz   </span><br></pre></td></tr></table></figure><p>å¦‚æœè§‰å¾—éœ€è¦çœ‹çš„æ›´åŠ èˆ’æœ</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&quot;model name&quot;</span> /proc/cpuinfo | cut <span class="literal">-f2</span> <span class="literal">-d</span>:</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ CentOS å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹å†…å­˜</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep MemTotal /proc/meminfo  grep MemTotal /proc/meminfo | cut <span class="literal">-f2</span> <span class="literal">-d</span>:  free <span class="literal">-m</span> |grep <span class="string">&quot;Mem&quot;</span> | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ CentOS å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹ cpu æ˜¯ 32 ä½è¿˜æ˜¯ 64 ä½ æŸ¥çœ‹ CPU ä½æ•° (32 or 64)</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getconf LONG_BIT</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ CentOS å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹å½“å‰ linux çš„ç‰ˆæœ¬</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">more /etc/redhat-release</span><br><span class="line">cat /etc/redhat-release</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ CentOS å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br><span class="line">uname -a</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ CentOS å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹å½“å‰æ—¶é—´</p><p>date ä¸Šé¢å·²ç»ä»‹ç»å¦‚ä½•åŒæ­¥æ—¶é—´äº†</p><p>ä½¿ç”¨ CentOS å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹ç¡¬ç›˜å’Œåˆ†åŒº</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df -h</span><br><span class="line">fdisk -l</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥æŸ¥çœ‹åˆ†åŒº</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du -sh</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°å…¨éƒ¨å ç”¨çš„ç©ºé—´</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">du /etc -sh</span><br></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªç›®å½•çš„å¤§å°</p><p>ä½¿ç”¨ CentOS å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹å®‰è£…çš„è½¯ä»¶åŒ…, æŸ¥çœ‹ç³»ç»Ÿå®‰è£…çš„æ—¶å€™è£…çš„è½¯ä»¶åŒ…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat -n /root/install.log</span><br><span class="line">more /root/install.log | wc -l</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ç°åœ¨å·²ç»å®‰è£…äº†é‚£äº›è½¯ä»¶åŒ…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa</span><br><span class="line">rpm -qa | wc -l</span><br><span class="line">yum list installed | wc -l</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ CentOS å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹é”®ç›˜å¸ƒå±€</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/sysconfig/keyboard</span><br><span class="line">cat /etc/sysconfig/keyboard | grep KEYTABLE | cut -f2 -d=</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ CentOS å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹ selinux æƒ…å†µ</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sestatus</span><br><span class="line">sestatus | cut -f2 -d:</span><br><span class="line">cat /etc/sysconfig/selinux</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ CentOS å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹ ipï¼Œmac åœ°å€</p><p>åœ¨ ifcfg-eth0 æ–‡ä»¶é‡Œä½ å¯ä»¥çœ‹åˆ° macï¼Œç½‘å…³ç­‰ä¿¡æ¯</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig  cat /etc/sysconfig/network-scripts/ifcfg-eth0 | grep IPADDR  cat /etc/sysconfig/network-scripts/ifcfg-eth0 | grep IPADDR | cut -f2 -d=  ifconfig eth0 |grep <span class="string">&quot;inet addr:&quot;</span> |awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span>|cut -c 6-  ifconfig   | grep <span class="string">&#x27;inet addr:&#x27;</span>| grep -v <span class="string">&#x27;127.0.0.1&#x27;</span> | cut -d: -f2 | awk <span class="string">&#x27;&#123; print $1&#125;&#x27;</span>  </span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ç½‘å…³</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/sysconfig/network</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ dns</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/resolv.conf </span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ CentOS å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹é»˜è®¤è¯­è¨€</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$LANG</span> <span class="variable">$LANGUAGE</span></span><br><span class="line">cat /etc/sysconfig/i18n</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ CentOS å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹æ‰€å±æ—¶åŒºå’Œæ˜¯å¦ä½¿ç”¨ UTC æ—¶é—´</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/sysconfig/clock</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ CentOS å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹ä¸»æœºå</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hostname</span><br><span class="line">cat /etc/sysconfig/network</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ä¸»æœºåå°±æ˜¯ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼ŒåŒæ—¶æœ€å¥½ä¹ŸæŠŠ host æ–‡ä»¶ä¹Ÿä¿®æ”¹ã€‚</p><p>ä½¿ç”¨ CentOS å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹å¼€æœºè¿è¡Œæ—¶é—´</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uptime</span><br><span class="line">09:44:45 up 67 days, 23:32, ...</span><br></pre></td></tr></table></figure><p>çœ‹æ¥åˆšæ‰ç¡®å®æ˜¯ç½‘æ®µçš„é—®é¢˜ï¼Œæˆ‘çš„æœºå™¨è¿˜æ˜¯ 67 å¤©å‰å¼€æœºçš„ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vmstat 1 -S m  procs -----------memory---------- ---swap-- -----io---- --system-- -----cpu------  r b   swpd   free   buff cache   si   so    bi    bo   <span class="keyword">in</span>   cs us sy id wa st  0 0      0    233    199    778    0    0     4    25    1    1 3 0 96 0 0  0 0      0    233    199    778    0    0     0     0 1029 856 13 1 86 0 0</span><br></pre></td></tr></table></figure><h3 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h3><blockquote><p>åˆ é™¤æ–‡ä»¶çš„ CentOS å¸¸ç”¨å‘½ä»¤ </p></blockquote><ol><li>åˆ é™¤å½“å‰ç›®å½•çš„æ–‡ä»¶</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm test.txt </span><br></pre></td></tr></table></figure><ol start="2"><li>å¼ºåˆ¶åˆ é™¤å½“å‰ç›®å½•çš„æ–‡ä»¶ï¼Œä¸å¼¹å‡ºæç¤º</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -f test.txt </span><br></pre></td></tr></table></figure><ol start="3"><li>å¼ºåˆ¶åˆ é™¤æ•´ä¸ªç›®å½•ï¼ŒåŒ…æ‹¬ç›®å½•ä¸æ–‡ä»¶å…¨éƒ¨åˆ é™¤ï¼Œéœ€è¦ç®¡ç†å‘˜æƒé™</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -r -f <span class="built_in">test</span></span><br></pre></td></tr></table></figure><h3 id="rmdir"><a href="#rmdir" class="headerlink" title="rmdir"></a>rmdir</h3><blockquote><p>åˆ é™¤æ–‡ä»¶å¤¹çš„ CentOS å¸¸ç”¨å‘½ä»¤ </p></blockquote><ol><li>åˆ é™¤ä¸€ä¸ªç©ºç›®å½•</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmdir emptydir </span><br></pre></td></tr></table></figure><ol start="2"><li>åˆ é™¤å¤šçº§ç©ºç›®å½•</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmdir -p emptydir/d1/d11</span><br></pre></td></tr></table></figure><h3 id="mount-umount"><a href="#mount-umount" class="headerlink" title="mount / umount"></a>mount / umount</h3><blockquote><p>æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿä¸å¸è½½æ–‡ä»¶ç³»ç»Ÿçš„ CentOS å¸¸ç”¨å‘½ä»¤</p></blockquote><ol><li>æŒ‚è½½å…‰é©±</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -t iso9660 /dev/cdrom /mnt/cdrom </span><br></pre></td></tr></table></figure><ol start="2"><li>æŒ‚è½½å…‰é©±ï¼Œæ”¯æŒä¸­æ–‡</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -t iso9660 -o codepage=936,iocharset=cp936 /dev/cdrom /mnt/cdrom </span><br></pre></td></tr></table></figure><ol start="3"><li>æŒ‚è½½ Windows åˆ†åŒºï¼ŒFAT æ–‡ä»¶ç³»ç»Ÿ</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -t vfat /dev/hda3 /mnt/cdrom</span><br></pre></td></tr></table></figure><ol start="4"><li>æŒ‚è½½ Windows åˆ†åŒºï¼ŒNTFS æ–‡ä»¶ç³»ç»Ÿ</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -t ntfs -o iocharset=cp936 /dev/hda7 /mnt/had7 </span><br></pre></td></tr></table></figure><ol start="5"><li>æŒ‚è½½ ISO æ–‡ä»¶</li></ol><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -o loop /abc.iso /mnt/cdrom </span><br></pre></td></tr></table></figure><ol start="6"><li>æŒ‚è½½ è½¯é©±</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mount</span> /dev/fd0 /mnt/floppy </span><br></pre></td></tr></table></figure><ol start="7"><li>æŒ‚è½½é—ªç›˜</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mount</span> /dev/sda1 /mnt/cdrom </span><br></pre></td></tr></table></figure><ol start="8"><li>æŒ‚è½½ Windows æ“ä½œç³»ç»Ÿå…±äº«çš„æ–‡ä»¶å¤¹</li></ol><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mount</span> <span class="literal">-t</span> smbfs <span class="literal">-o</span> username=guest,password=guest //machine/path /mnt/cdrom </span><br></pre></td></tr></table></figure><ol start="9"><li>æ˜¾ç¤ºæŒ‚è½½çš„æ–‡ä»¶ç³»ç»Ÿ</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mount </span><br><span class="line">cat /etc/fstab   # æ˜¾ç¤ºç³»ç»Ÿå¯åŠ¨è‡ªåŠ¨åŠ è½½çš„æ–‡ä»¶ç³»ç»Ÿ </span><br><span class="line">cat /etc/mtab   # æ˜¾ç¤ºå½“å‰åŠ è½½çš„æ–‡ä»¶ç³»ç»Ÿ</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> æœåŠ¡å™¨ </tag>
            
            <tag> CentOS </tag>
            
            <tag> è½¬è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€è½¬è½½ã€‘GCD (Grand Central Dispatch)</title>
      <link href="/2016/01/13/GCD/"/>
      <url>/2016/01/13/GCD/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>è½¬è½½è‡ª <a href="https://github.com/ming1016">æˆ´é“­è€å¸ˆ</a></p><hr><p>æ–‡ä¸­è¾ƒè¯¦ç»†ä»‹ç»GCDé˜Ÿåˆ—ï¼Œå„ç§GCDä½¿ç”¨æ–¹æ³•ï¼Œå®ä¾‹å¦‚ä½•ä½¿ç”¨Dispatch Sourceç›‘å¬ç³»ç»Ÿåº•å±‚å¯¹è±¡ï¼Œåˆ†æä¸åŒé”çš„æ€§èƒ½å¯¹æ¯”ï¼Œå®ä¾‹GCDæ­»é”æƒ…å†µã€‚ </p><p>æ–‡ä¸­çš„Demoåœ¨è¿™é‡Œ <a href="https://github.com/ming1016/GCDDemo">Demo</a> å¯¹ç€æ–‡ç« è¯•ç€æ¥è°ƒdemoä½“ä¼šæ›´æ·±å“¦ï¼Œç»†ç»†åš¼æ¶ˆåŒ–å¥½ğŸ¤“</p><span id="more"></span><blockquote><p>å®˜æ–¹æ–‡æ¡£ï¼š</p><p><a href="https://developer.apple.com/library/prerelease/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/">Docs</a></p><p>GCDå±äºç³»ç»Ÿçº§çš„çº¿ç¨‹ç®¡ç†ï¼Œåœ¨Dispatch queueä¸­æ‰§è¡Œéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡æ€§èƒ½éå¸¸çš„é«˜ã€‚ GCDè¿™å—å·²ç»å¼€æºï¼Œ<a href="http://libdispatch.macosforge.org/">åœ°å€</a>ã€‚</p><p><strong>GCDä¸­çš„FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰é˜Ÿåˆ—ç§°ä¸ºdispatch queueï¼Œç”¨æ¥ä¿è¯å…ˆè¿›æ¥çš„ä»»åŠ¡å…ˆå¾—åˆ°æ‰§è¡Œã€‚</strong></p></blockquote><h2 id="GCDæ¦‚è¦"><a href="#GCDæ¦‚è¦" class="headerlink" title="GCDæ¦‚è¦"></a>GCDæ¦‚è¦</h2><ol><li><p>å’Œoperation queueä¸€æ ·éƒ½æ˜¯åŸºäºé˜Ÿåˆ—çš„å¹¶å‘ç¼–ç¨‹APIï¼Œä»–ä»¬é€šè¿‡é›†ä¸­ç®¡ç†å¤§å®¶ååŒä½¿ç”¨çš„çº¿ç¨‹æ± ã€‚</p></li><li><p><strong>å…¬å¼€çš„5ä¸ªä¸åŒé˜Ÿåˆ—</strong>ï¼šè¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸­çš„main queueï¼Œ3ä¸ªä¸åŒä¼˜å…ˆçº§çš„åå°é˜Ÿåˆ—ï¼ˆHigh Priority Queueï¼ŒDefault Priority Queueï¼ŒLow Priority Queueï¼‰ï¼Œä»¥åŠä¸€ä¸ªä¼˜å…ˆçº§æ›´ä½çš„åå°é˜Ÿåˆ—Background Priority Queueï¼ˆç”¨äºI/Oï¼‰ã€‚</p></li><li><p>å¯åˆ›å»ºè‡ªå®šä¹‰é˜Ÿåˆ—ï¼š<strong>ä¸²è¡Œ</strong>æˆ–<strong>å¹¶åˆ—</strong>é˜Ÿåˆ—ã€‚<strong>è‡ªå®šä¹‰ä¸€èˆ¬æ”¾åœ¨Default Priority Queueå’ŒMain Queueé‡Œ</strong>ã€‚</p></li><li><p>æ“ä½œæ˜¯åœ¨å¤šçº¿ç¨‹ä¸Šè¿˜æ˜¯å•çº¿ç¨‹ä¸»è¦æ˜¯çœ‹é˜Ÿåˆ—çš„ç±»å‹å’Œæ‰§è¡Œæ–¹æ³•ï¼Œ<strong>å¹¶è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œæ‰èƒ½åœ¨å¤šçº¿ç¨‹ï¼Œå¹¶è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œå°±åªä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œäº†</strong>ã€‚</p></li></ol><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><h4 id="ä¸€ã€-ç³»ç»Ÿæ ‡å‡†ä¸¤ä¸ªé˜Ÿåˆ—"><a href="#ä¸€ã€-ç³»ç»Ÿæ ‡å‡†ä¸¤ä¸ªé˜Ÿåˆ—" class="headerlink" title="ä¸€ã€ ç³»ç»Ÿæ ‡å‡†ä¸¤ä¸ªé˜Ÿåˆ—"></a>ä¸€ã€ ç³»ç»Ÿæ ‡å‡†ä¸¤ä¸ªé˜Ÿåˆ—</h4><p>â€‹    //å…¨å±€é˜Ÿåˆ—ï¼Œä¸€ä¸ªå¹¶è¡Œçš„é˜Ÿåˆ—</p><p>â€‹    <code>dispatch_get_global_queue</code></p><p>â€‹    //ä¸»é˜Ÿåˆ—ï¼Œä¸»çº¿ç¨‹ä¸­çš„å”¯ä¸€é˜Ÿåˆ—ï¼Œä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—</p><p>â€‹    <code>dispatch_get_main_queue</code></p><h4 id="äºŒã€è‡ªå®šä¹‰é˜Ÿåˆ—"><a href="#äºŒã€è‡ªå®šä¹‰é˜Ÿåˆ—" class="headerlink" title="äºŒã€è‡ªå®šä¹‰é˜Ÿåˆ—"></a>äºŒã€è‡ªå®šä¹‰é˜Ÿåˆ—</h4><p>â€‹    //ä¸²è¡Œé˜Ÿåˆ—</p><p>â€‹    <code>dispatch_queue_create(&quot;com.starming.serialqueue&quot;, DISPATCH_QUEUE_SERIAL)</code></p><p>â€‹    //å¹¶è¡Œé˜Ÿåˆ—</p><p>â€‹    <code>dispatch_queue_create(&quot;com.starming.concurrentqueue&quot;, DISPATCH_QUEUE_CONCURRENT)</code></p><h4 id="ä¸‰ã€åŒæ­¥å¼‚æ­¥çº¿ç¨‹åˆ›å»º"><a href="#ä¸‰ã€åŒæ­¥å¼‚æ­¥çº¿ç¨‹åˆ›å»º" class="headerlink" title="ä¸‰ã€åŒæ­¥å¼‚æ­¥çº¿ç¨‹åˆ›å»º"></a>ä¸‰ã€åŒæ­¥å¼‚æ­¥çº¿ç¨‹åˆ›å»º</h4><p>â€‹    //åŒæ­¥çº¿ç¨‹</p><p>â€‹    <code>dispatch_sync(..., ^(block))</code></p><p>â€‹    //å¼‚æ­¥çº¿ç¨‹</p><p>â€‹    <code>dispatch_async(..., ^(block))</code></p><h2 id="é˜Ÿåˆ—ï¼ˆdispatch-queueï¼‰"><a href="#é˜Ÿåˆ—ï¼ˆdispatch-queueï¼‰" class="headerlink" title="é˜Ÿåˆ—ï¼ˆdispatch queueï¼‰"></a>é˜Ÿåˆ—ï¼ˆdispatch queueï¼‰</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><h4 id="ä¸€ã€dispatch-get-global-queue"><a href="#ä¸€ã€dispatch-get-global-queue" class="headerlink" title="ä¸€ã€dispatch_get_global_queue"></a>ä¸€ã€dispatch_get_global_queue</h4><ol><li>Serialï¼šåˆå«private dispatch queuesï¼ŒåŒæ—¶åªæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ã€‚Serial queueå¸¸ç”¨äºåŒæ­¥è®¿é—®ç‰¹å®šçš„èµ„æºæˆ–æ•°æ®ã€‚ å½“ä½ åˆ›å»ºå¤šä¸ªSerial queueæ—¶ï¼Œè™½ç„¶å„è‡ªæ˜¯åŒæ­¥ï¼Œä½†serial queueä¹‹é—´æ˜¯å¹¶å‘æ‰§è¡Œã€‚ </li><li>Main dispatch queueï¼š<strong>å…¨å±€å¯ç”¨çš„serial queue</strong>ï¼Œåœ¨åº”ç”¨ç¨‹åº<strong>ä¸»çº¿ç¨‹ä¸Š</strong>æ‰§è¡Œä»»åŠ¡ã€‚</li><li>Concurrentï¼šåˆå«global dispatch queueï¼Œå¯ä»¥å¹¶å‘çš„æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œ<strong>ä½†æ‰§è¡Œå®Œæˆé¡ºåºæ˜¯éšæœºçš„</strong>ã€‚ç³»ç»Ÿæä¾›å››ä¸ªå…¨å±€å¹¶å‘é˜Ÿåˆ—ï¼Œè¿™å››ä¸ªé˜Ÿåˆ—æœ‰è¿™å¯¹åº”çš„ä¼˜å…ˆçº§ï¼Œ<strong>ç”¨æˆ·æ˜¯ä¸èƒ½å¤Ÿåˆ›å»ºå…¨å±€é˜Ÿåˆ—çš„ï¼Œåªèƒ½è·å–</strong>ã€‚ </li></ol><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dipatch_queue_t queue;</span><br><span class="line">queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,<span class="number">0</span>);</span><br></pre></td></tr></table></figure><h4 id="äºŒã€dispatch-queue-create"><a href="#äºŒã€dispatch-queue-create" class="headerlink" title="äºŒã€dispatch_queue_create"></a>äºŒã€dispatch_queue_create</h4><ol><li>user create queueï¼šåˆ›å»ºè‡ªå·±å®šä¹‰çš„é˜Ÿåˆ—ï¼Œå¯ä»¥ç”¨dispatch_queue_createå‡½æ•°ã€‚</li><li>å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªè‡ªå®šä¹‰çš„é˜Ÿåˆ—åï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é˜Ÿåˆ—ç±»å‹ï¼Œé»˜è®¤NULLæˆ–è€… DISPATCH_QUEUE_SERIAL çš„æ˜¯ä¸²è¡Œï¼Œå‚æ•°ä¸º DISPATCH_QUEUE_CONCURRENT ä¸ºå¹¶è¡Œé˜Ÿåˆ—ã€‚</li></ol><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dispatch_queue_t</span> queue;</span><br><span class="line">queue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.concurrentqueue&quot;</span>, DISPATCH_QUEUE_CONCURRENT);</span><br></pre></td></tr></table></figure><h4 id="ä¸‰ã€é˜Ÿåˆ—ä¼˜å…ˆçº§"><a href="#ä¸‰ã€é˜Ÿåˆ—ä¼˜å…ˆçº§" class="headerlink" title="ä¸‰ã€é˜Ÿåˆ—ä¼˜å…ˆçº§"></a>ä¸‰ã€é˜Ÿåˆ—ä¼˜å…ˆçº§</h4><ol><li>è‡ªå®šä¹‰é˜Ÿåˆ—çš„ä¼˜å…ˆçº§ï¼šå¯ä»¥é€šè¿‡dipatch_queue_attr_make_with_qos_classæˆ–dispatch_set_target_queueæ–¹æ³•è®¾ç½®é˜Ÿåˆ—çš„ä¼˜å…ˆçº§</li></ol><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dipatch_queue_attr_make_with_qos_class</span></span><br><span class="line">dispatch_queue_attr_t attr = dispatch_queue_attr_make_with_qos_class(DISPATCH_QUEUE_SERIAL, </span><br><span class="line">                                                                     QOS_CLASS_UTILITY, <span class="number">-1</span>);</span><br><span class="line"><span class="built_in">dispatch_queue_t</span> queue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.qosqueue&quot;</span>, attr);</span><br><span class="line"></span><br><span class="line"><span class="comment">//dispatch_set_target_queue</span></span><br><span class="line"><span class="built_in">dispatch_queue_t</span> queue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.settargetqueue&quot;</span>,</span><br><span class="line">                                               <span class="literal">NULL</span>); <span class="comment">//éœ€è¦è®¾ç½®ä¼˜å…ˆçº§çš„queue</span></span><br><span class="line"><span class="built_in">dispatch_queue_t</span> referQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, </span><br><span class="line">                                                        <span class="number">0</span>); <span class="comment">//å‚è€ƒä¼˜å…ˆçº§</span></span><br><span class="line">dispatch_set_target_queue(queue, referQueue); <span class="comment">//è®¾ç½®queueå’ŒreferQueueçš„ä¼˜å…ˆçº§ä¸€æ ·</span></span><br></pre></td></tr></table></figure><ol start="2"><li>dispatch_set_target_queueï¼šå¯ä»¥è®¾ç½®ä¼˜å…ˆçº§ï¼Œä¹Ÿå¯ä»¥è®¾ç½®é˜Ÿåˆ—å±‚çº§ä½“ç³»ï¼Œæ¯”å¦‚è®©å¤šä¸ªä¸²è¡Œå’Œå¹¶è¡Œé˜Ÿåˆ—åœ¨ç»Ÿä¸€ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—é‡Œä¸²è¡Œæ‰§è¡Œï¼Œå¦‚ä¸‹</li></ol><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dispatch_queue_t</span> serialQueue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.serialqueue&quot;</span>, </span><br><span class="line">                                                     DISPATCH_QUEUE_SERIAL);</span><br><span class="line"><span class="built_in">dispatch_queue_t</span> firstQueue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.firstqueue&quot;</span>, </span><br><span class="line">                                                    DISPATCH_QUEUE_SERIAL);</span><br><span class="line"><span class="built_in">dispatch_queue_t</span> secondQueue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.secondqueue&quot;</span>, </span><br><span class="line">                                                     DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line"></span><br><span class="line">dispatch_set_target_queue(firstQueue, serialQueue);</span><br><span class="line">dispatch_set_target_queue(secondQueue, serialQueue);</span><br><span class="line"></span><br><span class="line"><span class="built_in">dispatch_async</span>(firstQueue, ^&#123;</span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@&quot;1&quot;</span>);</span><br><span class="line">  [<span class="built_in">NSThread</span> sleepForTimeInterval:<span class="number">3.</span>f];</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">dispatch_async</span>(secondQueue, ^&#123;</span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@&quot;2&quot;</span>);</span><br><span class="line">  [<span class="built_in">NSThread</span> sleepForTimeInterval:<span class="number">2.</span>f];</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">dispatch_async</span>(secondQueue, ^&#123;</span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@&quot;3&quot;</span>);</span><br><span class="line">  [<span class="built_in">NSThread</span> sleepForTimeInterval:<span class="number">1.</span>f];</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="é˜Ÿåˆ—ç±»å‹"><a href="#é˜Ÿåˆ—ç±»å‹" class="headerlink" title="é˜Ÿåˆ—ç±»å‹"></a>é˜Ÿåˆ—ç±»å‹</h3><p><strong>é˜Ÿåˆ—é»˜è®¤æ˜¯ä¸²è¡Œçš„ï¼Œå¦‚æœè®¾ç½®è¯¥å‚æ•°ä¸ºNULLä¼šæŒ‰ä¸²è¡Œå¤„ç†ï¼Œåªèƒ½æ‰§è¡Œä¸€ä¸ªå•ç‹¬çš„blockï¼Œé˜Ÿåˆ—ä¹Ÿå¯ä»¥æ˜¯å¹¶è¡Œçš„ï¼ŒåŒä¸€æ—¶é—´æ‰§è¡Œå¤šä¸ªblock</strong></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">id</span>)init &#123;</span><br><span class="line">  <span class="keyword">self</span> = [<span class="keyword">super</span> init];</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">self</span> != <span class="literal">nil</span>) &#123;</span><br><span class="line">    <span class="built_in">NSString</span> *label = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@&quot;%@.isolation.%p&quot;</span>, [<span class="keyword">self</span> <span class="keyword">class</span>], <span class="keyword">self</span>];</span><br><span class="line">    <span class="keyword">self</span>.isolationQueue = dispatch_queue_create([label UTF8String], <span class="number">0</span>);</span><br><span class="line">    label = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@&quot;%@.work.%p&quot;</span>, [<span class="keyword">self</span> <span class="keyword">class</span>], <span class="keyword">self</span>];</span><br><span class="line">    <span class="keyword">self</span>.workQueue = dispatch_queue_create([label UTF8String], <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä¸€ã€5ç§é˜Ÿåˆ—"><a href="#ä¸€ã€5ç§é˜Ÿåˆ—" class="headerlink" title="ä¸€ã€5ç§é˜Ÿåˆ—"></a>ä¸€ã€5ç§é˜Ÿåˆ—</h4><p>ä¸»é˜Ÿåˆ—ï¼ˆmain queueï¼‰, å››ç§é€šç”¨è°ƒåº¦é˜Ÿåˆ—ï¼Œè‡ªå·±å®šåˆ¶çš„é˜Ÿåˆ—ã€‚å››ç§é€šç”¨è°ƒåº¦é˜Ÿåˆ—ä¸º ï¼š</p><ol><li><p><strong>QOS_CLASS_USER_INTERACTIVE</strong>ï¼šuser interactiveç­‰çº§è¡¨ç¤ºä»»åŠ¡éœ€è¦è¢«ç«‹å³æ‰§è¡Œæä¾›å¥½çš„ä½“éªŒï¼Œç”¨æ¥æ›´æ–°UIï¼Œå“åº”äº‹ä»¶ç­‰ã€‚è¿™ä¸ªç­‰çº§æœ€å¥½ä¿æŒå°è§„æ¨¡ã€‚ </p></li><li><p><strong>QOS_CLASS_USER_INITIATED</strong>ï¼šuser initiatedç­‰çº§è¡¨ç¤ºä»»åŠ¡ç”±UIå‘èµ·å¼‚æ­¥æ‰§è¡Œã€‚é€‚ç”¨åœºæ™¯æ˜¯éœ€è¦åŠæ—¶ç»“æœåŒæ—¶åˆå¯ä»¥ç»§ç»­äº¤äº’çš„æ—¶å€™ã€‚</p></li><li><p><strong>QOS_CLASS_UTILITY</strong>ï¼šutilityç­‰çº§è¡¨ç¤ºéœ€è¦é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œä¼´æœ‰ç”¨æˆ·å¯è§è¿›åº¦æŒ‡ç¤ºå™¨ã€‚ç»å¸¸ä¼šç”¨æ¥åšè®¡ç®—ï¼ŒI/Oï¼Œç½‘ç»œï¼ŒæŒç»­çš„æ•°æ®å¡«å……ç­‰ä»»åŠ¡ã€‚è¿™ä¸ªä»»åŠ¡èŠ‚èƒ½ã€‚ </p></li><li><p><strong>QOS_CLASS_BACKGROUND</strong>ï¼šbackgroundç­‰çº§è¡¨ç¤ºç”¨æˆ·ä¸ä¼šå¯Ÿè§‰çš„ä»»åŠ¡ï¼Œä½¿ç”¨å®ƒæ¥å¤„ç†é¢„åŠ è½½ï¼Œ æˆ–è€…ä¸éœ€è¦ç”¨æˆ·äº¤äº’å’Œå¯¹æ—¶é—´ä¸æ•æ„Ÿçš„ä»»åŠ¡ã€‚ </p></li></ol><p><strong>ç¤ºä¾‹ï¼šåå°åŠ è½½æ˜¾ç¤ºå›¾ç‰‡</strong></p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span>()</span> &#123;</span><br><span class="line">  <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">  dispatch_async(dispatch_get_global_queue(<span class="type">Int</span>(<span class="type">QOS_CLASS_USER_INITIATED</span>.value), <span class="number">0</span>)) &#123;</span><br><span class="line"><span class="comment">// å°†å·¥ä½œä»ä¸»çº¿ç¨‹è½¬ç§»åˆ°å…¨å±€é˜Ÿåˆ—ä¸­ï¼Œè¿™æ˜¯dispatch_asyncè°ƒç”¨ï¼Œå¼‚æ­¥æäº¤ä¿è¯è°ƒç”¨çº¿ç¨‹ä¼šç»§ç»­æ‰§è¡Œä¸‹å»ï¼Œè¿™æ ·viewDidLoadåœ¨ä¸»çº¿ç¨‹ä¸Šèƒ½å¤Ÿæ›´æ—©å®Œæˆï¼Œ</span></span><br><span class="line">    <span class="keyword">let</span> overlayImage <span class="operator">=</span> <span class="keyword">self</span>.faceOverlayImageFromImage(<span class="keyword">self</span>.image)</span><br><span class="line">dispatch_async(dispatch_get_main_queue()) &#123;</span><br><span class="line">      <span class="comment">// æ–°å›¾å®Œæˆï¼ŒæŠŠä¸€ä¸ªé—­åŒ…åŠ å…¥ä¸»çº¿ç¨‹ç”¨æ¥æ›´æ–°UIImageViewï¼Œåªæœ‰åœ¨ä¸»çº¿ç¨‹èƒ½æ“ä½œUIKitã€‚</span></span><br><span class="line">      <span class="keyword">self</span>.fadeInNewImage(overlayImage) <span class="comment">// æ›´æ–°UI</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="äºŒã€ä½•æ—¶ä½¿ç”¨ä½•ç§é˜Ÿåˆ—ç±»å‹"><a href="#äºŒã€ä½•æ—¶ä½¿ç”¨ä½•ç§é˜Ÿåˆ—ç±»å‹" class="headerlink" title="äºŒã€ä½•æ—¶ä½¿ç”¨ä½•ç§é˜Ÿåˆ—ç±»å‹"></a>äºŒã€ä½•æ—¶ä½¿ç”¨ä½•ç§é˜Ÿåˆ—ç±»å‹</h4><ol><li>ä¸»é˜Ÿåˆ—ï¼ˆé¡ºåºï¼‰ï¼š<strong>é˜Ÿåˆ—ä¸­æœ‰ä»»åŠ¡å®Œæˆéœ€è¦æ›´æ–°UIæ—¶ï¼Œdispatch_afteråœ¨è¿™ç§ç±»å‹ä¸­ä½¿ç”¨</strong>ã€‚</li><li>å¹¶å‘é˜Ÿåˆ—ï¼š<strong>ç”¨æ¥æ‰§è¡Œä¸UIæ— å…³çš„åå°ä»»åŠ¡</strong>ï¼Œdispatch_syncæ”¾åœ¨è¿™é‡Œï¼Œæ–¹ä¾¿ç­‰å¾…ä»»åŠ¡ï¼Œå®Œæˆè¿›è¡Œåç»­å¤„ç†æˆ–å’Œdispatch barrieråŒæ­¥ã€‚dispatch groupsæ”¾åœ¨è¿™é‡Œä¹Ÿä¸é”™ã€‚</li><li>è‡ªå®šä¹‰é¡ºåºé˜Ÿåˆ—ï¼šé¡ºåºæ‰§è¡Œåå°ä»»åŠ¡å¹¶è¿½è¸ªå®ƒæ—¶ã€‚è¿™æ ·åšåŒæ—¶åªæœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œå¯ä»¥é˜²æ­¢èµ„æºç«äº‰ã€‚dipatch barriersè§£å†³è¯»å†™é”é—®é¢˜çš„æ”¾åœ¨è¿™é‡Œå¤„ç†ã€‚dispatch groupsä¹Ÿæ˜¯æ”¾åœ¨è¿™é‡Œã€‚ </li></ol><h4 id="ä¸‰ã€QoSç­‰çº§å‚æ•°çš„å†™æ³•"><a href="#ä¸‰ã€QoSç­‰çº§å‚æ•°çš„å†™æ³•" class="headerlink" title="ä¸‰ã€QoSç­‰çº§å‚æ•°çš„å†™æ³•"></a>ä¸‰ã€QoSç­‰çº§å‚æ•°çš„å†™æ³•</h4><p>å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ç®€åŒ–QoSç­‰çº§å‚æ•°çš„å†™æ³• </p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="type">GlobalMainQueue</span>: dispatch_queue_t &#123;</span><br><span class="line">  <span class="keyword">return</span> dispatch_get_main_queue()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="type">GlobalUserInteractiveQueue</span>: dispatch_queue_t &#123;</span><br><span class="line">  <span class="keyword">return</span> dispatch_get_global_queue(<span class="type">Int</span>(<span class="type">QOS_CLASS_USER_INTERACTIVE</span>.value), <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="type">GlobalUserInitiatedQueue</span>: dispatch_queue_t &#123;</span><br><span class="line">  <span class="keyword">return</span> dispatch_get_global_queue(<span class="type">Int</span>(<span class="type">QOS_CLASS_USER_INITIATED</span>.value), <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="type">GlobalUtilityQueue</span>: dispatch_queue_t &#123;</span><br><span class="line">  <span class="keyword">return</span> dispatch_get_global_queue(<span class="type">Int</span>(<span class="type">QOS_CLASS_UTILITY</span>.value), <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="type">GlobalBackgroundQueue</span>: dispatch_queue_t &#123;</span><br><span class="line">  <span class="keyword">return</span> dispatch_get_global_queue(<span class="type">Int</span>(<span class="type">QOS_CLASS_BACKGROUND</span>.value), <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨èµ·æ¥å°±æ˜¯è¿™æ ·ï¼Œæ˜“è¯»è€Œä¸”å®¹æ˜“çœ‹å‡ºåœ¨ä½¿ç”¨å“ªä¸ªé˜Ÿåˆ—</span></span><br><span class="line">dispatch_async(<span class="type">GlobalUserInitiatedQueue</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> overlayImage <span class="operator">=</span> <span class="keyword">self</span>.faceOverlayImageFromImage(<span class="keyword">self</span>.image)</span><br><span class="line">  dispatch_async(<span class="type">GlobalMainQueue</span>) &#123;</span><br><span class="line">    <span class="keyword">self</span>.fadeInNewImage(overlayImage)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><h3 id="ç®€å•ä½¿ç”¨å’Œä»‹ç»"><a href="#ç®€å•ä½¿ç”¨å’Œä»‹ç»" class="headerlink" title="ç®€å•ä½¿ç”¨å’Œä»‹ç»"></a>ç®€å•ä½¿ç”¨å’Œä»‹ç»</h3><h4 id="ä¸€ã€dispatch-onceç”¨æ³•"><a href="#ä¸€ã€dispatch-onceç”¨æ³•" class="headerlink" title="ä¸€ã€dispatch_onceç”¨æ³•"></a>ä¸€ã€dispatch_onceç”¨æ³•</h4><p>â€‹    <strong>dispatch_once_t è¦æ˜¯å…¨å±€æˆ–staticå˜é‡ï¼Œä¿è¯dispatch_once_tåªæœ‰ä¸€ä»½å®ä¾‹</strong></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">UIColor</span> *)boringColor &#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">UIColor</span> *color;</span><br><span class="line">  <span class="comment">//åªè¿è¡Œä¸€æ¬¡</span></span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">dispatch_once_t</span> onceToken;</span><br><span class="line">  <span class="built_in">dispatch_once</span>(&amp;onceToken, ^&#123;</span><br><span class="line">    color = [<span class="built_in">UIColor</span> colorWithRed:<span class="number">0.380</span>f green:<span class="number">0.376</span>f blue:<span class="number">0.376</span>f alpha:<span class="number">1.000</span>f];</span><br><span class="line">&#125;);</span><br><span class="line">  <span class="keyword">return</span> color;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="äºŒã€dispatch-async"><a href="#äºŒã€dispatch-async" class="headerlink" title="äºŒã€dispatch_async"></a>äºŒã€dispatch_async</h4><p>â€‹    è®¾è®¡ä¸€ä¸ªå¼‚æ­¥çš„APIè°ƒç”¨dispatch_async()ï¼Œè¿™ä¸ªè°ƒç”¨æ”¾åœ¨APIçš„æ–¹æ³•æˆ–å‡½æ•°ä¸­åšã€‚è®©APIçš„ä½¿ç”¨è€…è®¾ç½®ä¸€ä¸ªå›è°ƒå¤„ç†é˜Ÿåˆ—ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)processImage:(<span class="built_in">UIImage</span> *)image completionHandler:(<span class="keyword">void</span>(^)(<span class="built_in">BOOL</span> success))handler &#123;</span><br><span class="line">  <span class="built_in">dispatch_async</span>(<span class="keyword">self</span>.isolationQueue, ^(<span class="keyword">void</span>)&#123;</span><br><span class="line">    <span class="comment">// do actual processing here</span></span><br><span class="line">    <span class="built_in">dispatch_async</span>(<span class="keyword">self</span>.resultQueue, ^(<span class="keyword">void</span>)&#123;</span><br><span class="line">      handler(<span class="literal">YES</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è±†ç“£ä¸­æ•°æ®åŠ è½½çš„æ—¶å€™ç”¨åˆ°çš„å°±æ˜¯è¿™ç§æ–¹æ³•ï¼Œæ•°æ®å¤„ç†ä¸­ä½¿ç”¨</p><p><strong>å¯ä»¥é¿å…ç•Œé¢ä¼šè¢«ä¸€äº›è€—æ—¶çš„æ“ä½œå¡æ­»ï¼Œæ¯”å¦‚è¯»å–ç½‘ç»œæ•°æ®ï¼Œå¤§æ•°æ®IOï¼Œè¿˜æœ‰å¤§é‡æ•°æ®çš„æ•°æ®åº“è¯»å†™ï¼Œè¿™æ—¶éœ€è¦åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­å¤„ç†ï¼Œç„¶åé€šçŸ¥ä¸»çº¿ç¨‹æ›´æ–°ç•Œé¢ï¼ŒGCDä½¿ç”¨èµ·æ¥æ¯”NSThreadå’ŒNSOperationæ–¹æ³•è¦ç®€å•æ–¹ä¾¿ã€‚</strong></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»£ç æ¡†æ¶</span></span><br><span class="line"><span class="built_in">dispatch_async</span>(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>), ^&#123;</span><br><span class="line">  <span class="comment">// è€—æ—¶çš„æ“ä½œ</span></span><br><span class="line">  <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">    <span class="comment">// æ›´æ–°ç•Œé¢</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸‹è½½å›¾ç‰‡çš„ç¤ºä¾‹</span></span><br><span class="line"><span class="built_in">dispatch_async</span>(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>), ^&#123;</span><br><span class="line">  <span class="built_in">NSURL</span> * url = [<span class="built_in">NSURL</span> URLWithString:<span class="string">@&quot;&lt;http://avatar.csdn.net/2/C/D/1_totogo2010.jpg&gt;&quot;</span>];</span><br><span class="line">  <span class="built_in">NSData</span> * data = [[<span class="built_in">NSData</span> alloc]initWithContentsOfURL:url];</span><br><span class="line">  <span class="built_in">UIImage</span> *image = [[<span class="built_in">UIImage</span> alloc]initWithData:data];</span><br><span class="line">  <span class="keyword">if</span> (data != <span class="literal">nil</span>) &#123;</span><br><span class="line">    <span class="built_in">dispatch_async</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">      <span class="keyword">self</span>.imageView.image = image;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="ä¸‰ã€dispatch-afterå»¶åæ‰§è¡Œ"><a href="#ä¸‰ã€dispatch-afterå»¶åæ‰§è¡Œ" class="headerlink" title="ä¸‰ã€dispatch_afterå»¶åæ‰§è¡Œ"></a>ä¸‰ã€dispatch_afterå»¶åæ‰§è¡Œ</h4><p><strong>dispatch_afteråªæ˜¯å»¶æ—¶æäº¤blockï¼Œä¸æ˜¯å»¶æ—¶ç«‹åˆ»æ‰§è¡Œã€‚</strong></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)foo &#123;</span><br><span class="line">  <span class="keyword">double</span> delayInSeconds = <span class="number">2.0</span>;</span><br><span class="line">  dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, </span><br><span class="line">                                          (int64_t) (delayInSeconds * <span class="built_in">NSEC_PER_SEC</span>));</span><br><span class="line">  dispatch_after(popTime, dispatch_get_main_queue(), ^(<span class="keyword">void</span>)&#123;</span><br><span class="line">    [<span class="keyword">self</span> bar];</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>èŒƒä¾‹ï¼Œå®ç°ä¸€ä¸ªæ¨è¿Ÿå‡ºç°å¼¹å‡ºæ¡†æç¤ºï¼Œæ¯”å¦‚è¯´æç¤ºç”¨æˆ·è¯„ä»·ç­‰åŠŸèƒ½ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">showOrHideNavPrompt</span>()</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> delayInSeconds <span class="operator">=</span> <span class="number">1.0</span></span><br><span class="line">  <span class="keyword">let</span> popTime <span class="operator">=</span> dispatch_time(<span class="type">DISPATCH_TIME_NOW</span>,</span><br><span class="line">                              <span class="type">Int64</span>(delayInSeconds <span class="operator">*</span> <span class="type">Double</span>(<span class="type">NSEC_PER_SEC</span>))) <span class="comment">// åœ¨è¿™é‡Œå£°æ˜æ¨è¿Ÿçš„æ—¶é—´</span></span><br><span class="line">  dispatch_after(popTime, <span class="type">GlobalMainQueue</span>) &#123; <span class="comment">// ç­‰å¾…delayInSecondså°†é—­åŒ…å¼‚æ­¥åˆ°ä¸»é˜Ÿåˆ—</span></span><br><span class="line">    <span class="keyword">let</span> count <span class="operator">=</span> <span class="type">PhotoManager</span>.sharedManager.photos.count</span><br><span class="line">    <span class="keyword">if</span> count <span class="operator">&gt;</span> <span class="number">0</span> &#123;</span><br><span class="line">      <span class="keyword">self</span>.navigationItem.prompt <span class="operator">=</span> <span class="literal">nil</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">self</span>.navigationItem.prompt <span class="operator">=</span> <span class="string">&quot;Add photos with faces to Googlyify them!&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾‹å­ä¸­çš„dispatch timeçš„å‚æ•°ï¼Œå¯ä»¥å…ˆçœ‹çœ‹å‡½æ•°åŸå‹ </p><p><code>dispatch_time_t dispatch_time ( dispatch_time_t when, int64_t delta ); </code></p><p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºDISPATCH_TIME_NOWè¡¨ç¤ºå½“å‰ã€‚ç¬¬äºŒä¸ªå‚æ•°çš„deltaè¡¨ç¤ºçº³ç§’ï¼Œä¸€ç§’å¯¹åº”çš„çº³ç§’ä¸º1000000000ï¼Œç³»ç»Ÿæä¾›äº†ä¸€äº›å®æ¥ç®€åŒ– </p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NSEC_PER_SEC 1000000000ull <span class="comment">//æ¯ç§’æœ‰å¤šå°‘çº³ç§’</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> USEC_PER_SEC 1000000ull <span class="comment">//æ¯ç§’æœ‰å¤šå°‘æ¯«ç§’</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NSEC_PER_USEC 1000ull <span class="comment">//æ¯æ¯«ç§’æœ‰å¤šå°‘çº³ç§’</span></span></span><br></pre></td></tr></table></figure><p>è¿™æ ·å¦‚æœè¦è¡¨ç¤ºä¸€ç§’å°±å¯ä»¥è¿™æ ·å†™ </p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dispatch_time(DISPATCH_TIME_NOW, <span class="number">1</span> * <span class="built_in">NSEC_PER_SEC</span>);</span><br><span class="line">dispatch_time(DISPATCH_TIME_NOW, <span class="number">1000</span> * USEC_PER_SEC);</span><br><span class="line">dispatch_time(DISPATCH_TIME_NOW, USEC_PER_SEC * <span class="built_in">NSEC_PER_USEC</span>);</span><br></pre></td></tr></table></figure><h4 id="å››ã€dispatch-barrier-asyncä½¿ç”¨Barrier-Taskæ–¹æ³•"><a href="#å››ã€dispatch-barrier-asyncä½¿ç”¨Barrier-Taskæ–¹æ³•" class="headerlink" title="å››ã€dispatch_barrier_asyncä½¿ç”¨Barrier Taskæ–¹æ³•"></a>å››ã€dispatch_barrier_asyncä½¿ç”¨Barrier Taskæ–¹æ³•</h4><ol><li>Dispatch Barrierè§£å†³å¤šçº¿ç¨‹å¹¶å‘è¯»å†™åŒä¸€ä¸ªèµ„æºå‘ç”Ÿæ­»é”</li><li>Dispatch Barrierç¡®ä¿æäº¤çš„é—­åŒ…æ˜¯æŒ‡å®šé˜Ÿåˆ—ä¸­åœ¨ç‰¹å®šæ—¶æ®µå”¯ä¸€åœ¨æ‰§è¡Œçš„ä¸€ä¸ªã€‚ </li><li>åœ¨æ‰€æœ‰å…ˆäºDispatch Barrierçš„ä»»åŠ¡éƒ½å®Œæˆçš„æƒ…å†µä¸‹è¿™ä¸ªé—­åŒ…æ‰å¼€å§‹æ‰§è¡Œã€‚ </li><li>è½®åˆ°è¿™ä¸ªé—­åŒ…æ—¶barrierä¼šæ‰§è¡Œè¿™ä¸ªé—­åŒ…å¹¶ä¸”ç¡®ä¿é˜Ÿåˆ—åœ¨æ­¤è¿‡ç¨‹ä¸ä¼šæ‰§è¡Œå…¶å®ƒä»»åŠ¡ã€‚ </li><li>é—­åŒ…å®Œæˆå é˜Ÿåˆ—æ¢å¤ã€‚ </li><li><strong>éœ€è¦æ³¨æ„dispatch_barrier_asyncåªåœ¨è‡ªå·±åˆ›å»ºçš„é˜Ÿåˆ—ä¸Šæœ‰è¿™ç§ä½œç”¨ï¼Œåœ¨å…¨å±€å¹¶å‘é˜Ÿåˆ—å’Œä¸²è¡Œé˜Ÿåˆ—ä¸Šï¼Œæ•ˆæœå’Œ dispatch_syncä¸€æ ·</strong></li></ol><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line"><span class="keyword">self</span>.isolationQueue = dispatch_queue_create([label UTF8String], DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line"><span class="comment">//æ”¹å˜setter</span></span><br><span class="line">- (<span class="keyword">void</span>)setCount:(<span class="built_in">NSUInteger</span>)count forKey:(<span class="built_in">NSString</span> *)key &#123;</span><br><span class="line">  key = [key <span class="keyword">copy</span>];</span><br><span class="line">  <span class="comment">//ç¡®ä¿æ‰€æœ‰barrieréƒ½æ˜¯asyncå¼‚æ­¥çš„</span></span><br><span class="line">  dispatch_barrier_async(<span class="keyword">self</span>.isolationQueue, ^()&#123;</span><br><span class="line">    <span class="keyword">if</span> (count == <span class="number">0</span>) &#123;</span><br><span class="line">      [<span class="keyword">self</span>.counts removeObjectForKey:key];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">self</span>.counts[key] = @(count);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)dispatchBarrierAsyncDemo &#123;</span><br><span class="line">    <span class="comment">//é˜²æ­¢æ–‡ä»¶è¯»å†™å†²çªï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—ï¼Œæ“ä½œéƒ½åœ¨è¿™ä¸ªé˜Ÿåˆ—ä¸­è¿›è¡Œï¼Œæ²¡æœ‰æ›´æ–°æ•°æ®è¯»ç”¨å¹¶è¡Œï¼Œå†™ç”¨ä¸²è¡Œã€‚</span></span><br><span class="line">    <span class="built_in">dispatch_queue_t</span> dataQueue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.dataqueue&quot;</span>,</span><br><span class="line">                                                       DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line">    <span class="built_in">dispatch_async</span>(dataQueue, ^&#123;</span><br><span class="line">      [<span class="built_in">NSThread</span> sleepForTimeInterval:<span class="number">2.</span>f];</span><br><span class="line">      <span class="built_in">NSLog</span>(<span class="string">@&quot;read data 1&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  </span><br><span class="line">    <span class="built_in">dispatch_async</span>(dataQueue, ^&#123;</span><br><span class="line">      <span class="built_in">NSLog</span>(<span class="string">@&quot;read data 2&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//ç­‰å¾…å‰é¢çš„éƒ½å®Œæˆï¼Œåœ¨æ‰§è¡Œbarrieråé¢çš„</span></span><br><span class="line">    dispatch_barrier_async(dataQueue, ^&#123;</span><br><span class="line">      <span class="built_in">NSLog</span>(<span class="string">@&quot;write data 1&quot;</span>);</span><br><span class="line">      [<span class="built_in">NSThread</span> sleepForTimeInterval:<span class="number">1</span>];</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">dispatch_async</span>(dataQueue, ^&#123;</span><br><span class="line">      [<span class="built_in">NSThread</span> sleepForTimeInterval:<span class="number">1.</span>f];</span><br><span class="line">      <span class="built_in">NSLog</span>(<span class="string">@&quot;read data 3&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">dispatch_async</span>(dataQueue, ^&#123;</span><br><span class="line">      <span class="built_in">NSLog</span>(<span class="string">@&quot;read data 4&quot;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>swiftç¤ºä¾‹</strong></p><p>ä½¿ç”¨dispatch_queue_createåˆå§‹åŒ–ä¸€ä¸ªå¹¶å‘é˜Ÿåˆ—ã€‚ç¬¬ä¸€ä¸ªå‚æ•°éµå¾ª<strong>åå‘DNSå‘½åä¹ æƒ¯</strong>ï¼Œæ–¹ä¾¿æè¿°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æŒ‡å‡ºæ˜¯å¹¶å‘è¿˜æ˜¯é¡ºåºã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">let</span> concurrentPhotoQueue <span class="operator">=</span> dispatch_queue_create(<span class="string">&quot;com.raywenderlich.GooglyPuff.photoQueue&quot;</span>, <span class="type">DISPATCH_QUEUE_CONCURRENT</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addPhoto</span>(<span class="params">photo</span>: <span class="type">Photo</span>)</span> &#123;</span><br><span class="line">  dispatch_barrier_async(concurrentPhotoQueue) &#123;</span><br><span class="line">    <span class="comment">// å°†å†™æ“ä½œåŠ å…¥åˆ°è‡ªå®šä¹‰çš„é˜Ÿåˆ—ã€‚å¼€å§‹æ‰§è¡Œæ—¶è¿™ä¸ªå°±æ˜¯é˜Ÿåˆ—ä¸­å”¯ä¸€çš„ä¸€ä¸ªåœ¨æ‰§è¡Œçš„ä»»åŠ¡ã€‚</span></span><br><span class="line">    <span class="keyword">self</span>._photos.append(photo) </span><br><span class="line">    <span class="comment">// barrierèƒ½å¤Ÿä¿éšœä¸ä¼šå’Œå…¶ä»–ä»»åŠ¡åŒæ—¶è¿›è¡Œã€‚</span></span><br><span class="line">    dispatch_async(<span class="type">GlobalMainQueue</span>) &#123; </span><br><span class="line">      <span class="comment">// æ¶‰åŠåˆ°UIæ‰€ä»¥è¿™ä¸ªé€šçŸ¥åº”è¯¥åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥åˆ†æ´¾å¦ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡åˆ°ä¸»é˜Ÿåˆ—ä¸­ã€‚</span></span><br><span class="line">      <span class="keyword">self</span>.postContentAddedNotification()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯è§£å†³äº†å†™å¯èƒ½å‘ç”Ÿæ­»é”ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨dispatch_syncè§£å†³è¯»æ—¶å¯èƒ½ä¼šå‘ç”Ÿçš„æ­»é”ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> photos: [<span class="type">Photo</span>] &#123;</span><br><span class="line">  <span class="keyword">var</span> photosCopy: [<span class="type">Photo</span>]<span class="operator">!</span></span><br><span class="line">  dispatch_sync(concurrentPhotoQueue) &#123; <span class="comment">// åŒæ­¥è°ƒåº¦åˆ°concurrentPhotoQueueé˜Ÿåˆ—æ‰§è¡Œè¯»æ“ä½œ</span></span><br><span class="line">    photosCopy <span class="operator">=</span> <span class="keyword">self</span>._photos <span class="comment">// ä¿å­˜</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> photosCopy</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·è¯»å†™é—®é¢˜éƒ½è§£å†³äº†ã€‚éƒ½ç”¨å¼‚æ­¥å¤„ç†é¿å…æ­»é”ï¼Œå¼‚æ­¥çš„ç¼ºç‚¹åœ¨äºè°ƒè¯•ä¸æ–¹ä¾¿ï¼Œä½†æ˜¯æ¯”èµ·åŒæ­¥å®¹æ˜“äº§ç”Ÿæ­»é”è¿™ä¸ªå‰¯ä½œç”¨è¿˜ç®—å°çš„ã€‚</p><h4 id="äº”ã€dispatch-applyè¿›è¡Œå¿«é€Ÿè¿­ä»£"><a href="#äº”ã€dispatch-applyè¿›è¡Œå¿«é€Ÿè¿­ä»£" class="headerlink" title="äº”ã€dispatch_applyè¿›è¡Œå¿«é€Ÿè¿­ä»£"></a>äº”ã€dispatch_applyè¿›è¡Œå¿«é€Ÿè¿­ä»£</h4><p>ç±»ä¼¼forå¾ªç¯ï¼Œä½†æ˜¯åœ¨å¹¶å‘é˜Ÿåˆ—çš„æƒ…å†µä¸‹dispatch_applyä¼šå¹¶å‘æ‰§è¡Œblockä»»åŠ¡ã€‚ </p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (size_t y = <span class="number">0</span>; y &lt; height; ++y) &#123;</span><br><span class="line">  <span class="keyword">for</span> (size_t x = <span class="number">0</span>; x &lt; width; ++x) &#123;</span><br><span class="line">    <span class="comment">// Do something with x and y here</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å› ä¸ºå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œæ‰€ä»¥ä½¿ç”¨dispatch_applyå¯ä»¥è¿è¡Œçš„æ›´å¿« </p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)dispatchApplyDemo &#123;</span><br><span class="line">    <span class="built_in">dispatch_queue_t</span> concurrentQueue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.concurre</span></span><br><span class="line"><span class="string">    dispatch_apply(10, concurrentQueue, ^(size_t i) &#123;</span></span><br><span class="line"><span class="string">        NSLog(@&quot;</span>%zu<span class="string">&quot;,i);</span></span><br><span class="line"><span class="string">    &#125;);</span></span><br><span class="line"><span class="string">    NSLog(@&quot;</span>The end<span class="string">&quot;);</span></span><br><span class="line"><span class="string">    //è¿™é‡Œæœ‰ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œdispatch_applyè¿™ä¸ªæ˜¯ä¼šé˜»å¡ä¸»çº¿ç¨‹çš„ã€‚è¿™ä¸ªlogæ‰“å°ä¼šåœ¨dispatch_applyéƒ½ç»“æŸåæ‰å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>dispatch_applyèƒ½é¿å…çº¿ç¨‹çˆ†ç‚¸ï¼Œå› ä¸ºGCDä¼šç®¡ç†å¹¶å‘</strong></p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)dealWiththreadWithMaybeExplode:(<span class="built_in">BOOL</span>)explode &#123;</span><br><span class="line">  <span class="built_in">dispatch_queue_t</span> concurrentQueue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.concurrentqueue&quot;</span>,DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line">  <span class="keyword">if</span> (explode) &#123;</span><br><span class="line">    <span class="comment">//æœ‰é—®é¢˜çš„æƒ…å†µï¼Œå¯èƒ½ä¼šæ­»é”</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">999</span> ; i++) &#123;</span><br><span class="line">      <span class="built_in">dispatch_async</span>(concurrentQueue, ^&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@&quot;wrong %d&quot;</span>,i);</span><br><span class="line">        <span class="comment">//do something hard</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//ä¼šä¼˜åŒ–å¾ˆå¤šï¼Œèƒ½å¤Ÿåˆ©ç”¨GCDç®¡ç†</span></span><br><span class="line">    dispatch_apply(<span class="number">999</span>, concurrentQueue, ^(size_t i)&#123;</span><br><span class="line">      <span class="built_in">NSLog</span>(<span class="string">@&quot;correct %zu&quot;</span>,i);</span><br><span class="line">      <span class="comment">//do something hard</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>swiftç¤ºä¾‹ï¼š </p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">downloadPhotosWithCompletion</span>(<span class="params">completion</span>: <span class="type">BatchPhotoDownloadingCompletionClosure</span>?)</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> storedError: <span class="type">NSError</span>!</span><br><span class="line">  <span class="keyword">var</span> downloadGroup <span class="operator">=</span> dispatch_group_create()</span><br><span class="line">  <span class="keyword">let</span> addresses <span class="operator">=</span> [<span class="type">OverlyAttachedGirlfriendURLString</span>, </span><br><span class="line">                   <span class="type">SuccessKidURLString</span>,</span><br><span class="line">                   <span class="type">LotsOfFacesURLString</span>]</span><br><span class="line">  dispatch_apply(<span class="type">UInt</span>(addresses.count), <span class="type">GlobalUserInitiatedQueue</span>) &#123;</span><br><span class="line">    i <span class="keyword">in</span></span><br><span class="line">    <span class="keyword">let</span> index <span class="operator">=</span> <span class="type">Int</span>(i)</span><br><span class="line">    <span class="keyword">let</span> address <span class="operator">=</span> addresses[index]</span><br><span class="line">    <span class="keyword">let</span> url <span class="operator">=</span> <span class="type">NSURL</span>(string: address)</span><br><span class="line">    dispatch_group_enter(downloadGroup)</span><br><span class="line">    <span class="keyword">let</span> photo <span class="operator">=</span> <span class="type">DownloadPhoto</span>(url: url<span class="operator">!</span>) &#123;</span><br><span class="line">      image, error <span class="keyword">in</span> </span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">let</span> error <span class="operator">=</span> error &#123;</span><br><span class="line">        storedError <span class="operator">=</span> error</span><br><span class="line">      &#125;</span><br><span class="line">      dispatch_group_leave(downloadGroup)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">PhotoManager</span>.sharedManager.addPhoto(photo)</span><br><span class="line">  &#125;</span><br><span class="line">  dispatch_group_notify(downloadGroup, <span class="type">GlobalMainQueue</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> completion <span class="operator">=</span> completion &#123;</span><br><span class="line">      completion(error: storedError)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å…­ã€Blockç»„åˆDispatch-groups"><a href="#å…­ã€Blockç»„åˆDispatch-groups" class="headerlink" title="å…­ã€Blockç»„åˆDispatch_groups"></a>å…­ã€Blockç»„åˆDispatch_groups</h4><p>dispatch groupsæ˜¯ä¸“é—¨ç”¨æ¥ç›‘è§†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ã€‚dispatch_group_tå®ä¾‹ç”¨æ¥è¿½è¸ªä¸åŒé˜Ÿåˆ—ä¸­çš„ä¸åŒä»»åŠ¡ã€‚</p><p>å½“groupé‡Œæ‰€æœ‰äº‹ä»¶éƒ½å®ŒæˆGCD APIæœ‰ä¸¤ç§æ–¹å¼å‘é€é€šçŸ¥: </p><ul><li>ç¬¬ä¸€ç§æ˜¯dispatch_group_waitï¼Œä¼šé˜»å¡å½“å‰è¿›ç¨‹ï¼Œç­‰æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆæˆ–ç­‰å¾…è¶…æ—¶ã€‚ </li><li>ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨dispatch_group_notifyï¼Œå¼‚æ­¥æ‰§è¡Œé—­åŒ…ï¼Œä¸ä¼šé˜»å¡ã€‚ </li></ul><ol><li>ç¬¬ä¸€ç§ä½¿ç”¨dispatch_group_waitçš„swiftçš„ä¾‹å­ï¼š </li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">downloadPhotosWithCompletion</span>(<span class="params">completion</span>: <span class="type">BatchPhotoDownloadingCompletionClosure</span>?)</span> &#123;</span><br><span class="line">  dispatch_async(<span class="type">GlobalUserInitiatedQueue</span>) &#123;</span><br><span class="line">    <span class="comment">// å› ä¸ºdispatch_group_waitä¼šç§Ÿå¡å½“å‰è¿›ç¨‹ï¼Œæ‰€ä»¥è¦ä½¿ç”¨dispatch_asyncå°†æ•´ä¸ªæ–¹æ³•è¦æ”¾åˆ°åå°é˜Ÿåˆ—æ‰èƒ½å¤Ÿä¿è¯ä¸»çº¿ç¨‹ä¸è¢«é˜»å¡</span></span><br><span class="line">    <span class="keyword">var</span> storedError: <span class="type">NSError</span>!</span><br><span class="line">    <span class="keyword">var</span> downloadGroup <span class="operator">=</span> dispatch_group_create() <span class="comment">// åˆ›å»ºä¸€ä¸ªdispatch group</span></span><br><span class="line">    <span class="keyword">let</span> addresses <span class="operator">=</span> [<span class="type">OverlyAttachedGirlfriendURLString</span>,</span><br><span class="line">                     <span class="type">SuccessKidURLString</span>,``</span><br><span class="line">                     <span class="type">LotsOfFacesURLString</span>]</span><br><span class="line">    <span class="keyword">for</span> address <span class="keyword">in</span> addresses &#123;</span><br><span class="line">      <span class="keyword">let</span> url <span class="operator">=</span> <span class="type">NSURL</span>(string: address)</span><br><span class="line">      dispatch_group_enter(downloadGroup)</span><br><span class="line">        <span class="comment">// dispatch_group_enteræ˜¯é€šçŸ¥dispatch groupä»»åŠ¡å¼€å§‹äº†ï¼Œdispatch_group_enterå’Œdispatch_group_leaveæ˜¯æˆå¯¹è°ƒç”¨ï¼Œä¸ç„¶ç¨‹åºå°±å´©æºƒäº†ã€‚</span></span><br><span class="line">      <span class="keyword">let</span> photo <span class="operator">=</span> <span class="type">DownloadPhoto</span>(url: url<span class="operator">!</span>) &#123;</span><br><span class="line">        image, error <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> error <span class="operator">=</span> error &#123;</span><br><span class="line">          storedError <span class="operator">=</span> error</span><br><span class="line">        &#125;</span><br><span class="line">        dispatch_group_leave(downloadGroup) </span><br><span class="line">        <span class="comment">// ä¿æŒå’Œdispatch_group_enteré…å¯¹ã€‚é€šçŸ¥ä»»åŠ¡å·²ç»å®Œæˆ</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="type">PhotoManager</span>.sharedManager.addPhoto(photo)</span><br><span class="line">    &#125;</span><br><span class="line">    dispatch_group_wait(downloadGroup, <span class="type">DISPATCH_TIME_FOREVER</span>)</span><br><span class="line">    <span class="comment">// dispatch_group_waitç­‰å¾…æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆç›´åˆ°è¶…æ—¶ã€‚å¦‚æœä»»åŠ¡å®Œæˆå‰å°±è¶…æ—¶äº†ï¼Œå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéé›¶å€¼ï¼Œå¯ä»¥é€šè¿‡è¿”å›å€¼åˆ¤æ–­æ˜¯å¦è¶…æ—¶ã€‚ä¹Ÿå¯ä»¥ç”¨DISPATCH_TIME_FOREVERè¡¨ç¤ºä¸€ç›´ç­‰ã€‚</span></span><br><span class="line">    dispatch_async(<span class="type">GlobalMainQueue</span>) &#123;</span><br><span class="line">      <span class="comment">// è¿™é‡Œå¯ä»¥ä¿è¯æ‰€æœ‰å›¾ç‰‡ä»»åŠ¡éƒ½å®Œæˆï¼Œç„¶ååœ¨main queueé‡ŒåŠ å…¥å®Œæˆåè¦å¤„ç†çš„é—­åŒ…ï¼Œä¼šåœ¨main queueé‡Œæ‰§è¡Œã€‚</span></span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">let</span> completion <span class="operator">=</span> completion &#123; <span class="comment">// æ‰§è¡Œé—­åŒ…å†…å®¹</span></span><br><span class="line">        completion(error: storedError)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  ocä¾‹å­</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)dispatchGroupWaitDemo &#123;</span><br><span class="line">  <span class="built_in">dispatch_queue_t</span> concurrentQueue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.concurrentqueue&quot;</span>,DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line">  dispatch_group_t group = dispatch_group_create();</span><br><span class="line">  <span class="comment">//åœ¨groupä¸­æ·»åŠ é˜Ÿåˆ—çš„block</span></span><br><span class="line">  dispatch_group_async(group, concurrentQueue, ^&#123;</span><br><span class="line">    [<span class="built_in">NSThread</span> sleepForTimeInterval:<span class="number">2.</span>f];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;1&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  dispatch_group_async(group, concurrentQueue, ^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;2&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  dispatch_group_wait(group, DISPATCH_TIME_FOREVER);</span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@&quot;go on&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>ç¬¬äºŒç§ä½¿ç”¨dispatch_group_notifyçš„<strong>swift</strong>çš„ä¾‹å­ï¼š </li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">downloadPhotosWithCompletion</span>(<span class="params">completion</span>: <span class="type">BatchPhotoDownloadingCompletionClosure</span>?)</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¸ç”¨åŠ dispatch_asyncï¼Œå› ä¸ºæ²¡æœ‰é˜»å¡ä¸»è¿›ç¨‹</span></span><br><span class="line">  <span class="keyword">var</span> storedError: <span class="type">NSError</span>!</span><br><span class="line">  <span class="keyword">var</span> downloadGroup <span class="operator">=</span> dispatch_group_create()</span><br><span class="line">  <span class="keyword">for</span> address <span class="keyword">in</span> [<span class="type">OverlyAttachedGirlfriendURLString</span>,</span><br><span class="line">                  <span class="type">SuccessKidURLString</span>,</span><br><span class="line">                  <span class="type">LotsOfFacesURLString</span>] &#123;</span><br><span class="line">    <span class="keyword">let</span> url <span class="operator">=</span> <span class="type">NSURL</span>(string: address)</span><br><span class="line">    dispatch_group_enter(downloadGroup)</span><br><span class="line">    <span class="keyword">let</span> photo <span class="operator">=</span> <span class="type">DownloadPhoto</span>(url: url<span class="operator">!</span>) &#123;</span><br><span class="line">      image, error <span class="keyword">in</span></span><br><span class="line">      <span class="keyword">if</span> <span class="keyword">let</span> error <span class="operator">=</span> error &#123;</span><br><span class="line">        storedError <span class="operator">=</span> error</span><br><span class="line">      &#125;</span><br><span class="line">      dispatch_group_leave(downloadGroup)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">PhotoManager</span>.sharedManager.addPhoto(photo)</span><br><span class="line">  &#125;</span><br><span class="line">  dispatch_group_notify(downloadGroup, <span class="type">GlobalMainQueue</span>) &#123;</span><br><span class="line">    <span class="comment">// dispatch_group_notifyå’Œdispatch_group_waitçš„åŒºåˆ«å°±æ˜¯æ˜¯å¼‚æ­¥æ‰§è¡Œé—­åŒ…çš„ï¼Œå½“dispatch groupsä¸­æ²¡æœ‰å‰©ä½™çš„ä»»åŠ¡æ—¶é—­åŒ…æ‰æ‰§è¡Œã€‚è¿™é‡Œæ˜¯æŒ‡æ˜åœ¨ä¸»é˜Ÿåˆ—ä¸­æ‰§è¡Œã€‚</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> completion <span class="operator">=</span> completion &#123;</span><br><span class="line">      completion(error: storedError)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ocä¾‹å­ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dispatch_group_notify</span></span><br><span class="line">- (<span class="keyword">void</span>)dispatchGroupNotifyDemo &#123;</span><br><span class="line">  <span class="built_in">dispatch_queue_t</span> concurrentQueue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.concurrentqueue&quot;</span>,DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line"></span><br><span class="line">  dispatch_group_t group = dispatch_group_create();</span><br><span class="line">  dispatch_group_async(group, concurrentQueue, ^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;1&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  dispatch_group_async(group, concurrentQueue, ^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;2&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  dispatch_group_notify(group, dispatch_get_main_queue(), ^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;end&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@&quot;can continue&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//dispatch_group_wait</span></span><br><span class="line">- (<span class="keyword">void</span>)dispatchGroupWaitDemo &#123;</span><br><span class="line">  <span class="built_in">dispatch_queue_t</span> concurrentQueue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.concurrentqueue&quot;</span>,DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line">  dispatch_group_t group = dispatch_group_create();</span><br><span class="line">  <span class="comment">//åœ¨groupä¸­æ·»åŠ é˜Ÿåˆ—çš„block</span></span><br><span class="line">  dispatch_group_async(group, concurrentQueue, ^&#123;</span><br><span class="line">    [<span class="built_in">NSThread</span> sleepForTimeInterval:<span class="number">2.</span>f];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;1&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  dispatch_group_async(group, concurrentQueue, ^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;2&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  dispatch_group_wait(group, DISPATCH_TIME_FOREVER);</span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@&quot;can continue&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>å¦‚ä½•å¯¹ç°æœ‰APIä½¿ç”¨dispatch_group_t </li></ol><p>ç»™Core Dataçš„-performBlock:æ·»åŠ groupsã€‚ç»„åˆå®Œæˆä»»åŠ¡åä½¿ç”¨dispatch_group_notifyæ¥è¿è¡Œä¸€ä¸ªblockå³å¯ã€‚ </p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)withGroup:(dispatch_group_t)group performBlock:(dispatch_block_t)block &#123;</span><br><span class="line">  <span class="keyword">if</span> (group == <span class="literal">NULL</span>) &#123;</span><br><span class="line">    [<span class="keyword">self</span> performBlock:block];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    dispatch_group_enter(group);</span><br><span class="line">    [<span class="keyword">self</span> performBlock:^()&#123;</span><br><span class="line">      block();</span><br><span class="line">      dispatch_group_leave(group);</span><br><span class="line">    &#125;];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>NSURLConnectionä¹Ÿå¯ä»¥è¿™æ ·åš</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)withGroup:(dispatch_group_t)group sendAsynchronousRequest:(<span class="built_in">NSURLRequest</span> *)request</span><br><span class="line">            queue:(<span class="built_in">NSOperationQueue</span> *)queue completionHandler:(<span class="keyword">void</span> (^)(<span class="built_in">NSURLResponse</span>*, <span class="built_in">NSData</span>*, <span class="built_in">NSError</span>*))handler &#123;</span><br><span class="line">    <span class="keyword">if</span> (group == <span class="literal">NULL</span>) &#123;</span><br><span class="line">        [<span class="keyword">self</span> sendAsynchronousRequest:request queue:queue completionHandler:handler];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        dispatch_group_enter(group);</span><br><span class="line">        [<span class="keyword">self</span> sendAsynchronousRequest:request</span><br><span class="line">                                queue:queue</span><br><span class="line">                    completionHandler:^(<span class="built_in">NSURLResponse</span> *response, <span class="built_in">NSData</span> *data, <span class="built_in">NSError</span> *error)&#123;</span><br><span class="line">            handler(response, data, error);</span><br><span class="line">            dispatch_group_leave(group);</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>æ³¨æ„äº‹é¡¹ï¼š</code> </p><ul><li>dispatch_group_async ç­‰ä»·äº dispatch_group_enter() å’Œ dispatch_group_leave() çš„ç»„åˆã€‚ </li><li>dispatch_group_enter() å¿…é¡»è¿è¡Œåœ¨ dispatch_group_leave() ä¹‹å‰ã€‚ </li><li>dispatch_group_enter() å’Œ dispatch_group_leave() éœ€è¦æˆå¯¹å‡ºç°çš„ </li></ul><h4 id="ä¸ƒã€Dispatch-Block"><a href="#ä¸ƒã€Dispatch-Block" class="headerlink" title="ä¸ƒã€Dispatch Block"></a>ä¸ƒã€Dispatch Block</h4><p>â€‹    é˜Ÿåˆ—æ‰§è¡Œä»»åŠ¡éƒ½æ˜¯blockçš„æ–¹å¼</p><ol><li><h5 id="dispatch-block-t-åˆ›å»ºblock"><a href="#dispatch-block-t-åˆ›å»ºblock" class="headerlink" title="dispatch_block_t åˆ›å»ºblock"></a>dispatch_block_t åˆ›å»ºblock</h5></li></ol><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)createDispatchBlock &#123;</span><br><span class="line">  <span class="comment">//normal way</span></span><br><span class="line">  <span class="built_in">dispatch_queue_t</span> concurrentQueue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.concurrentqueue&quot;</span>,DISPATCH_QUEUE_CONCURRENT);</span><br><span class="line"></span><br><span class="line">  dispatch_block_t block = dispatch_block_create(<span class="number">0</span>, ^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;run block&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">dispatch_async</span>(concurrentQueue, block);</span><br><span class="line">  <span class="comment">//QOS way</span></span><br><span class="line">  dispatch_block_t qosBlock = dispatch_block_create_with_qos_class(<span class="number">0</span>, QOS_CLASS_USER_INITIATED, <span class="number">-1</span>, ^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;run qos block&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">dispatch_async</span>(concurrentQueue, qosBlock);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li><h5 id="dispatch-block-wait"><a href="#dispatch-block-wait" class="headerlink" title="dispatch_block_wait"></a>dispatch_block_wait</h5><p>å¯ä»¥æ ¹æ®dispatch blockæ¥è®¾ç½®ç­‰å¾…æ—¶é—´ï¼Œå‚æ•°DISPATCH_TIME_FOREVERä¼šä¸€ç›´ç­‰å¾…blockç»“æŸ </p></li></ol><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)dispatchBlockWaitDemo &#123; </span><br><span class="line"><span class="built_in">dispatch_queue_t</span> serialQueue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.serialqueue&quot;</span>, DISPATCH_QUEUE_SERIAL);</span><br><span class="line">dispatch_block_t block = dispatch_block_create(<span class="number">0</span>, ^&#123;</span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@&quot;star&quot;</span>);</span><br><span class="line">  [<span class="built_in">NSThread</span> sleepForTimeInterval:<span class="number">5.</span>f];</span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@&quot;end&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">dispatch_async</span>(serialQueue, block);</span><br><span class="line"><span class="comment">//è®¾ç½®DISPATCH_TIME_FOREVERä¼šä¸€ç›´ç­‰åˆ°å‰é¢ä»»åŠ¡éƒ½å®Œæˆ</span></span><br><span class="line">dispatch_block_wait(block, DISPATCH_TIME_FOREVER);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;ok, now can go on&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li><h5 id="dispatch-block-notify"><a href="#dispatch-block-notify" class="headerlink" title="dispatch_block_notify"></a>dispatch_block_notify</h5><p>å¯ä»¥ç›‘è§†æŒ‡å®šdispatch blockç»“æŸï¼Œç„¶åå†åŠ å…¥ä¸€ä¸ªblockåˆ°é˜Ÿåˆ—ä¸­ã€‚ </p><p>ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä¸ºï¼Œç¬¬ä¸€ä¸ªæ˜¯éœ€è¦ç›‘è§†çš„blockï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯éœ€è¦æäº¤æ‰§è¡Œçš„é˜Ÿåˆ—ï¼Œç¬¬ä¸‰ä¸ªæ˜¯å¾…åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­çš„block </p></li></ol><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)dispatchBlockNotifyDemo &#123;</span><br><span class="line">  <span class="built_in">dispatch_queue_t</span> serialQueue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.serialqueue&quot;</span>, DISPATCH_QUEUE_SERIAL);</span><br><span class="line">  dispatch_block_t firstBlock = dispatch_block_create(<span class="number">0</span>, ^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;first block start&quot;</span>);</span><br><span class="line">    [<span class="built_in">NSThread</span> sleepForTimeInterval:<span class="number">2.</span>f];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;first block end&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">dispatch_async</span>(serialQueue, firstBlock);</span><br><span class="line">  dispatch_block_t secondBlock = dispatch_block_create(<span class="number">0</span>, ^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;second block run&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">//first blockæ‰§è¡Œå®Œæ‰åœ¨serial queueä¸­æ‰§è¡Œsecond block</span></span><br><span class="line">  dispatch_block_notify(firstBlock, serialQueue, secondBlock);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="4"><li><h5 id="dispatch-block-cancel"><a href="#dispatch-block-cancel" class="headerlink" title="dispatch_block_cancel"></a>dispatch_block_cancel</h5><p>iOS8åGCDæ”¯æŒå¯¹dispatch blockçš„å–æ¶ˆ </p></li></ol><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)dispatchBlockCancelDemo &#123;</span><br><span class="line">  <span class="built_in">dispatch_queue_t</span> serialQueue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.serialqueue&quot;</span>, DISPATCH_QUEUE_SERIAL);</span><br><span class="line">  dispatch_block_t firstBlock = dispatch_block_create(<span class="number">0</span>, ^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;first block start&quot;</span>);</span><br><span class="line">    [<span class="built_in">NSThread</span> sleepForTimeInterval:<span class="number">2.</span>f];</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;first block end&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  dispatch_block_t secondBlock = dispatch_block_create(<span class="number">0</span>, ^&#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;second block run&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">dispatch_async</span>(serialQueue, firstBlock);</span><br><span class="line">  <span class="built_in">dispatch_async</span>(serialQueue, secondBlock);</span><br><span class="line">  <span class="comment">//å–æ¶ˆsecondBlock</span></span><br><span class="line">  dispatch_block_cancel(secondBlock);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li><h5 id="ä½¿ç”¨dispatch-block-objectï¼ˆè°ƒåº¦å—ï¼‰åœ¨ä»»åŠ¡æ‰§è¡Œå‰è¿›è¡Œå–æ¶ˆ"><a href="#ä½¿ç”¨dispatch-block-objectï¼ˆè°ƒåº¦å—ï¼‰åœ¨ä»»åŠ¡æ‰§è¡Œå‰è¿›è¡Œå–æ¶ˆ" class="headerlink" title="ä½¿ç”¨dispatch block objectï¼ˆè°ƒåº¦å—ï¼‰åœ¨ä»»åŠ¡æ‰§è¡Œå‰è¿›è¡Œå–æ¶ˆ"></a>ä½¿ç”¨dispatch block objectï¼ˆè°ƒåº¦å—ï¼‰åœ¨ä»»åŠ¡æ‰§è¡Œå‰è¿›è¡Œå–æ¶ˆ</h5><p>dispatch block objectå¯ä»¥ä¸ºé˜Ÿåˆ—ä¸­çš„å¯¹è±¡è®¾ç½® </p><p>ç¤ºä¾‹ï¼Œä¸‹è½½å›¾ç‰‡ä¸­é€”è¿›è¡Œå–æ¶ˆ </p></li></ol><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">downloadPhotosWithCompletion</span>(<span class="params">completion</span>: <span class="type">BatchPhotoDownloadingCompletionClosure</span>?)</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> storedError: <span class="type">NSError</span>!</span><br><span class="line">  <span class="keyword">let</span> downloadGroup <span class="operator">=</span> dispatch_group_create()</span><br><span class="line">  <span class="keyword">var</span> addresses <span class="operator">=</span> [<span class="type">OverlyAttachedGirlfriendURLString</span>,</span><br><span class="line">                   <span class="type">SuccessKidURLString</span>,</span><br><span class="line">                   <span class="type">LotsOfFacesURLString</span>]</span><br><span class="line">  addresses <span class="operator">+=</span> addresses <span class="operator">+</span> addresses <span class="comment">// æ‰©å±•addressæ•°ç»„ï¼Œå¤åˆ¶3ä»½</span></span><br><span class="line">  <span class="keyword">var</span> blocks: [dispatch_block_t] <span class="operator">=</span> [] <span class="comment">// ä¸€ä¸ªä¿å­˜blockçš„æ•°ç»„</span></span><br><span class="line"> <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span> <span class="operator">..&lt;</span> addresses.count &#123;</span><br><span class="line">    dispatch_group_enter(downloadGroup)</span><br><span class="line">    <span class="keyword">let</span> block <span class="operator">=</span> dispatch_block_create(<span class="type">DISPATCH_BLOCK_INHERIT_QOS_CLASS</span>) &#123;</span><br><span class="line">      <span class="comment">// åˆ›å»ºä¸€ä¸ªblockï¼Œblockçš„æ ‡å¿—æ˜¯DISPATCH_BLOCK_INHERIT_QOS_CLASS</span></span><br><span class="line">      <span class="keyword">let</span> index <span class="operator">=</span> <span class="type">Int</span>(i)</span><br><span class="line">      <span class="keyword">let</span> address <span class="operator">=</span> addresses[index]</span><br><span class="line">      <span class="keyword">let</span> url <span class="operator">=</span> <span class="type">NSURL</span>(string: address)</span><br><span class="line">      <span class="keyword">let</span> photo <span class="operator">=</span> <span class="type">DownloadPhoto</span>(url: url<span class="operator">!</span>) &#123;</span><br><span class="line">        image, error <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> error <span class="operator">=</span> error &#123;</span><br><span class="line">          storedError <span class="operator">=</span> error</span><br><span class="line">        &#125;</span><br><span class="line">        dispatch_group_leave(downloadGroup)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="type">PhotoManager</span>.sharedManager.addPhoto(photo)</span><br><span class="line">    &#125;</span><br><span class="line">    blocks.append(block)</span><br><span class="line">    dispatch_async(<span class="type">GlobalMainQueue</span>, block)</span><br><span class="line">    <span class="comment">// æŠŠè¿™ä¸ªblockæ”¾åˆ°GlobalMainQueueä¸Šå¼‚æ­¥è°ƒç”¨ã€‚å› ä¸ºå…¨å±€é˜Ÿåˆ—æ˜¯ä¸€ä¸ªé¡ºåºé˜Ÿåˆ—æ‰€ä»¥æ–¹ä¾¿å–æ¶ˆå¯¹è±¡blockï¼ŒåŒæ—¶å¯ä»¥ä¿è¯ä¸‹è½½ä»»åŠ¡åœ¨downloadPhotosWithCompletionè¿”å›åæ‰å¼€å§‹æ‰§è¡Œã€‚</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> block <span class="keyword">in</span> blocks[<span class="number">3</span> <span class="operator">..&lt;</span> blocks.count] &#123;</span><br><span class="line">    <span class="keyword">let</span> cancel <span class="operator">=</span> arc4random_uniform(<span class="number">2</span>) <span class="comment">// éšæœºè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œä¼šè¿”å›0æˆ–1</span></span><br><span class="line">    <span class="keyword">if</span> cancel <span class="operator">==</span> <span class="number">1</span> &#123;</span><br><span class="line">      dispatch_block_cancel(block)</span><br><span class="line">      <span class="comment">// å¦‚æœæ˜¯1å°±å–æ¶ˆblockï¼Œè¿™ä¸ªåªèƒ½å‘ç”Ÿåœ¨blockè¿˜åœ¨é˜Ÿåˆ—ä¸­å¹¶æ²¡æœ‰å¼€å§‹çš„æƒ…å†µä¸‹ã€‚å› ä¸ºæŠŠblockå·²ç»æ”¾åˆ°äº†GlobalMainQueueä¸­ï¼Œæ‰€ä»¥è¿™ä¸ªåœ°æ–¹ä¼šå…ˆæ‰§è¡Œï¼Œæ‰§è¡Œå®Œäº†æ‰ä¼šæ‰§è¡Œblockã€‚</span></span><br><span class="line">      <span class="comment">// å› ä¸ºå·²ç»dispatch_group_enteräº†ï¼Œæ‰€ä»¥å–æ¶ˆæ—¶ä¹Ÿè¦å°†å…¶éƒ½leaveæ‰ã€‚</span></span><br><span class="line">      dispatch_group_leave(downloadGroup)       </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  dispatch_group_notify(downloadGroup, <span class="type">GlobalMainQueue</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> completion <span class="operator">=</span> completion &#123;</span><br><span class="line">      completion(error: storedError)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å…«ã€Dispatch-IO-æ–‡ä»¶æ“ä½œ"><a href="#å…«ã€Dispatch-IO-æ–‡ä»¶æ“ä½œ" class="headerlink" title="å…«ã€Dispatch IO æ–‡ä»¶æ“ä½œ"></a>å…«ã€Dispatch IO æ–‡ä»¶æ“ä½œ</h4><p>dispatch ioè¯»å–æ–‡ä»¶çš„æ–¹å¼ç±»ä¼¼äºä¸‹é¢çš„æ–¹å¼ï¼Œå¤šä¸ªçº¿ç¨‹å»è¯»å–æ–‡ä»¶çš„åˆ‡ç‰‡æ•°æ®ï¼Œå¯¹äºå¤§çš„æ•°æ®æ–‡ä»¶è¿™æ ·ä¼šæ¯”å•çº¿ç¨‹è¦å¿«å¾ˆå¤šã€‚ </p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dispatch_async</span>(queue,^&#123;<span class="comment">/*read 0-99 bytes*/</span>&#125;);</span><br><span class="line"><span class="built_in">dispatch_async</span>(queue,^&#123;<span class="comment">/*read 100-199 bytes*/</span>&#125;);</span><br><span class="line"><span class="built_in">dispatch_async</span>(queue,^&#123;<span class="comment">/*read 200-299 bytes*/</span>&#125;);</span><br></pre></td></tr></table></figure><ul><li>dispatch_io_createï¼šåˆ›å»ºdispatch io ã€‚</li><li>dispatch_io_set_low_waterï¼šæŒ‡å®šåˆ‡å‰²æ–‡ä»¶å¤§å° ã€‚</li><li>dispatch_io_readï¼šè¯»å–åˆ‡å‰²çš„æ–‡ä»¶ç„¶ååˆå¹¶ã€‚ </li></ul><blockquote><p>è‹¹æœç³»ç»Ÿæ—¥å¿—APIé‡Œç”¨åˆ°äº†è¿™ä¸ªæŠ€æœ¯ï¼Œå¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ï¼š </p><p><a href="https://github.com/Apple-FOSS-Mirror/Libc/blob/2ca2ae74647714acfc18674c3114b1a5d3325d7d/gen/asl.c">https://github.com/Apple-FOSS-Mirror/Libc/blob/2ca2ae74647714acfc18674c3114b1a5d3325d7d/gen/asl.c</a></p></blockquote><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">pipe_q = dispatch_queue_create(<span class="string">&quot;PipeQ&quot;</span>, <span class="literal">NULL</span>);</span><br><span class="line"><span class="comment">//åˆ›å»º</span></span><br><span class="line">pipe_channel = dispatch_io_create(DISPATCH_IO_STREAM, fd, pipe_q, ^(<span class="keyword">int</span> err)&#123;</span><br><span class="line">  close(fd);</span><br><span class="line">&#125;);</span><br><span class="line">*out_fd = fdpair[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®åˆ‡å‰²å¤§å°</span></span><br><span class="line">dispatch_io_set_low_water(pipe_channel, SIZE_MAX);</span><br><span class="line">dispatch_io_read(pipe_channel, <span class="number">0</span>, SIZE_MAX, pipe_q, ^(<span class="keyword">bool</span> done, dispatch_data_t pipedata, <span class="keyword">int</span> err) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err == <span class="number">0</span>) &#123;</span><br><span class="line">    size_t len = dispatch_data_get_size(pipedata);</span><br><span class="line">    <span class="keyword">if</span> (len &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//å¯¹æ¯æ¬¡åˆ‡å—æ•°æ®çš„å¤„ç†</span></span><br><span class="line">      <span class="keyword">const</span> <span class="keyword">char</span> *bytes = <span class="literal">NULL</span>;</span><br><span class="line">      <span class="keyword">char</span> *encoded;</span><br><span class="line">      uint32_t eval;</span><br><span class="line">      dispatch_data_t md = dispatch_data_create_map(pipedata, </span><br><span class="line">                                                    (<span class="keyword">const</span> <span class="keyword">void</span> **)&amp;bytes, </span><br><span class="line">                                                    &amp;len);</span><br><span class="line">      encoded = asl_core_encode_buffer(bytes, len);</span><br><span class="line">      asl_msg_set_key_val(aux, ASL_KEY_AUX_DATA, encoded);</span><br><span class="line">      free(encoded);</span><br><span class="line">      eval = _asl_evaluate_send(<span class="literal">NULL</span>, (aslmsg)aux, <span class="number">-1</span>);</span><br><span class="line">      _asl_send_message(<span class="literal">NULL</span>, eval, aux, <span class="literal">NULL</span>);</span><br><span class="line">      asl_msg_release(aux);</span><br><span class="line">      dispatch_release(md);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (done) &#123;</span><br><span class="line">    <span class="comment">//semaphore +1ä½¿å¾—ä¸éœ€è¦å†ç­‰å¾…ç»§ç»­æ‰§è¡Œä¸‹å»ã€‚</span></span><br><span class="line">    dispatch_semaphore_signal(sem);</span><br><span class="line">    dispatch_release(pipe_channel);</span><br><span class="line">    dispatch_release(pipe_q);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="ä¹ã€Dispatch-Source-ç”¨GCDç›‘è§†è¿›ç¨‹"><a href="#ä¹ã€Dispatch-Source-ç”¨GCDç›‘è§†è¿›ç¨‹" class="headerlink" title="ä¹ã€Dispatch Source ç”¨GCDç›‘è§†è¿›ç¨‹"></a>ä¹ã€Dispatch Source ç”¨GCDç›‘è§†è¿›ç¨‹</h4><p>Dispatch Sourceç”¨äºç›‘å¬ç³»ç»Ÿçš„åº•å±‚å¯¹è±¡ï¼Œæ¯”å¦‚æ–‡ä»¶æè¿°ç¬¦ï¼ŒMachç«¯å£ï¼Œä¿¡å·é‡ç­‰ã€‚ä¸»è¦å¤„ç†çš„äº‹ä»¶å¦‚ä¸‹è¡¨ </p><table><thead><tr><th align="center">æ–¹æ³•</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">DISPATCH_SOURCE_TYPE_DATA_ADD</td><td align="center">æ•°æ®å¢åŠ </td></tr><tr><td align="center">DISPATCH_SOURCE_TYPE_DATA_OR</td><td align="center">æ•°æ®OR</td></tr><tr><td align="center">DISPATCH_SOURCE_TYPE_MACH_SEND</td><td align="center">Machç«¯å£å‘é€</td></tr><tr><td align="center">DISPATCH_SOURCE_TYPE_MACH_RECV</td><td align="center">Machç«¯å£æ¥æ”¶</td></tr><tr><td align="center">DISPATCH_SOURCE_TYPE_MEMORYPRESSURE</td><td align="center">å†…å­˜æƒ…å†µ</td></tr><tr><td align="center">DISPATCH_SOURCE_TYPE_PROC</td><td align="center">è¿›ç¨‹äº‹ä»¶</td></tr><tr><td align="center">DISPATCH_SOURCE_TYPE_READ</td><td align="center">è¯»æ•°æ®</td></tr><tr><td align="center">DISPATCH_SOURCE_TYPE_SIGNAL</td><td align="center">ä¿¡å·</td></tr><tr><td align="center">DISPATCH_SOURCE_TYPE_TIMER</td><td align="center">å®šæ—¶å™¨</td></tr><tr><td align="center">DISPATCH_SOURCE_TYPE_VNODE</td><td align="center">æ–‡ä»¶ç³»ç»Ÿå˜åŒ–</td></tr><tr><td align="center">DISPATCH_SOURCE_TYPE_WRITE</td><td align="center">æ–‡ä»¶å†™å…¥</td></tr></tbody></table><p>æ–¹æ³• </p><ul><li>dispatch_source_createï¼šåˆ›å»º dispatch source ï¼Œåˆ›å»ºåä¼šå¤„äºæŒ‚èµ·çŠ¶æ€è¿›è¡Œäº‹ä»¶æ¥æ”¶ï¼Œéœ€è¦è®¾ç½®äº‹ä»¶å¤„ç†handlerè¿›è¡Œäº‹ä»¶å¤„ç†ã€‚ </li><li>dispatch_source_set_event_handlerï¼šè®¾ç½®äº‹ä»¶å¤„ç† handler </li><li>dispatch_source_set_cancel_handlerï¼šäº‹ä»¶å–æ¶ˆhandlerï¼Œå°±æ˜¯åœ¨ dispatch source é‡Šæ”¾å‰åšäº›æ¸…ç†çš„äº‹ã€‚ </li><li>dispatch_source_cancelï¼šå…³é—­ dispatch sourceï¼Œè®¾ç½®çš„äº‹ä»¶å¤„ç† handler ä¸ä¼šè¢«æ‰§è¡Œï¼Œå·²ç»æ‰§è¡Œçš„äº‹ä»¶handlerä¸ä¼šå–æ¶ˆã€‚ </li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSRunningApplication</span> *mail = [<span class="built_in">NSRunningApplication</span> runningApplicationsWithBundleIdentifier:<span class="string">@&quot;com.apple.mail&quot;</span>];</span><br><span class="line"><span class="keyword">if</span> (mail == <span class="literal">nil</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pid_t <span class="keyword">const</span> pid = mail.processIdentifier;</span><br><span class="line"><span class="keyword">self</span>.source = dispatch_source_create(DISPATCH_SOURCE_TYPE_PROC, pid, </span><br><span class="line">                                     DISPATCH_PROC_EXIT, </span><br><span class="line">                                     DISPATCH_TARGET_QUEUE_DEFAULT);</span><br><span class="line">dispatch_source_set_event_handler(<span class="keyword">self</span>.source, ^()&#123;</span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@&quot;Mail quit.&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//åœ¨äº‹ä»¶æºä¼ åˆ°ä½ çš„äº‹ä»¶å¤„ç†å‰éœ€è¦è°ƒç”¨dispatch_resume()è¿™ä¸ªæ–¹æ³•</span></span><br><span class="line">dispatch_resume(<span class="keyword">self</span>.source);</span><br></pre></td></tr></table></figure><p>ç›‘è§†æ–‡ä»¶å¤¹å†…æ–‡ä»¶å˜åŒ– </p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSURL</span> *directoryURL; <span class="comment">// assume this is set to a directory</span></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> fd = open([[directoryURL path] fileSystemRepresentation], O_EVTONLY);</span><br><span class="line"><span class="keyword">if</span> (fd &lt; <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="keyword">char</span> buffer[<span class="number">80</span>];</span><br><span class="line">strerror_r(errno, buffer, <span class="keyword">sizeof</span>(buffer));</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;Unable to open &quot;</span>%<span class="string">@&quot;: %s (%d)&quot;</span>, [directoryURL path], buffer, errno);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_VNODE, </span><br><span class="line">                                                  fd,</span><br><span class="line">                                                  DISPATCH_VNODE_WRITE | </span><br><span class="line">                                                  DISPATCH_VNODE_DELETE, </span><br><span class="line">                                                  DISPATCH_TARGET_QUEUE_DEFAULT);</span><br><span class="line"></span><br><span class="line">dispatch_source_set_event_handler(source, ^()&#123;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">const</span> data = dispatch_source_get_data(source);</span><br><span class="line"><span class="keyword">if</span> (data &amp; DISPATCH_VNODE_WRITE) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;The directory changed.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (data &amp; DISPATCH_VNODE_DELETE) &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;The directory has been deleted.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">dispatch_source_set_cancel_handler(source, ^()&#123;</span><br><span class="line">close(fd);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">self</span>.source = source;</span><br><span class="line">dispatch_resume(<span class="keyword">self</span>.source);</span><br></pre></td></tr></table></figure><p><strong>è¿˜è¦æ³¨æ„éœ€è¦ç”¨DISPATCH_VNODE_DELETE å»æ£€æŸ¥ç›‘è§†çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦è¢«åˆ é™¤ï¼Œå¦‚æœåˆ é™¤äº†å°±åœæ­¢ç›‘å¬</strong></p><p>NSTimeråœ¨ä¸»çº¿ç¨‹çš„runloopé‡Œä¼šåœ¨runloopåˆ‡æ¢å…¶å®ƒæ¨¡å¼æ—¶åœæ­¢ï¼Œè¿™æ—¶å°±éœ€è¦æ‰‹åŠ¨åœ¨å­çº¿ç¨‹å¼€å¯ä¸€ä¸ªæ¨¡å¼ä¸º NSRunLoopCommonModesçš„runloopï¼Œ å¦‚æœä¸æƒ³å¼€å¯ä¸€ä¸ªæ–°çš„runloopå¯ä»¥ç”¨ä¸è·Ÿrunloopå…³è”çš„dispatch source timerï¼Œå¦‚ä¸‹ã€‚ </p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER,</span><br><span class="line">                                                  <span class="number">0</span>, </span><br><span class="line">                                                  <span class="number">0</span>, </span><br><span class="line">                                                  DISPATCH_TARGET_QUEUE_DEFAULT);</span><br><span class="line"></span><br><span class="line">dispatch_source_set_event_handler(source, ^()&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;Time flies.&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">dispatch_time_t start</span><br><span class="line">dispatch_source_set_timer(source, </span><br><span class="line">                          DISPATCH_TIME_NOW, </span><br><span class="line">                          <span class="number">5</span>ull * <span class="built_in">NSEC_PER_SEC</span>,</span><br><span class="line">                          <span class="number">100</span>ull * <span class="built_in">NSEC_PER_MSEC</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">self</span>.source = source;</span><br><span class="line">dispatch_resume(<span class="keyword">self</span>.source);</span><br></pre></td></tr></table></figure><h4 id="åã€Dispatch-Semaphoreå’Œçš„ä»‹ç»"><a href="#åã€Dispatch-Semaphoreå’Œçš„ä»‹ç»" class="headerlink" title="åã€Dispatch Semaphoreå’Œçš„ä»‹ç»"></a>åã€Dispatch Semaphoreå’Œçš„ä»‹ç»</h4><p>å¦å¤–ä¸€ç§ä¿è¯åŒæ­¥çš„æ–¹æ³•ã€‚ä½¿ç”¨ dispatch_semaphore_signal åŠ 1 dispatch_semaphore_wait å‡1ï¼Œä¸º0æ—¶ç­‰å¾…çš„è®¾ç½®æ–¹å¼æ¥è¾¾åˆ°çº¿ç¨‹åŒæ­¥çš„ç›®çš„å’Œ åŒæ­¥é”ä¸€æ ·èƒ½å¤Ÿè§£å†³èµ„æºæŠ¢å çš„é—®é¢˜ã€‚ </p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dispatch semaphore</span></span><br><span class="line">- (<span class="keyword">void</span>)dispatchSemaphoreDemo &#123;</span><br><span class="line">  <span class="comment">//åˆ›å»ºsemaphore</span></span><br><span class="line">dispatch_semaphore_t semaphore = dispatch_semaphore_create(<span class="number">0</span>);</span><br><span class="line"><span class="built_in">dispatch_async</span>(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>), ^&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;start&quot;</span>);</span><br><span class="line">[<span class="built_in">NSThread</span> sleepForTimeInterval:<span class="number">1.</span>f];</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;semaphore +1&quot;</span>);</span><br><span class="line">dispatch_semaphore_signal(semaphore); <span class="comment">//+1 semaphore</span></span><br><span class="line">    </span><br><span class="line">&#125;);</span><br><span class="line">dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;continue&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="åä¸€ã€é”"><a href="#åä¸€ã€é”" class="headerlink" title="åä¸€ã€é”"></a>åä¸€ã€é”</h4><p>è¿™é‡Œç®€å•ä»‹ç»ä¸‹iOSä¸­å¸¸ç”¨çš„å„ç§é”å’Œä»–ä»¬çš„æ€§èƒ½ã€‚ </p><ul><li>NSRecursiveLockï¼šé€’å½’é”ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­åå¤è·å–é”ä¸ä¼šé€ æˆæ­»é”ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šè®°å½•è·å–é”å’Œé‡Šæ”¾é”çš„æ¬¡æ•°æ¥è¾¾åˆ°ä½•æ—¶é‡Šæ”¾çš„ä½œç”¨ã€‚ </li><li>NSDistributedLockï¼šåˆ†å¸ƒé”ï¼ŒåŸºäºæ–‡ä»¶æ–¹å¼çš„é”æœºåˆ¶ï¼Œå¯ä»¥è·¨è¿›ç¨‹è®¿é—®ã€‚ </li><li>NSConditionLockï¼šæ¡ä»¶é”ï¼Œç”¨æˆ·å®šä¹‰æ¡ä»¶ï¼Œç¡®ä¿ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è·å–æ»¡è¶³ä¸€å®šæ¡ä»¶çš„é”ã€‚ å› ä¸ºçº¿ç¨‹é—´ç«äº‰ä¼šæ¶‰åŠåˆ°æ¡ä»¶é”æ£€æµ‹ï¼Œç³»ç»Ÿè°ƒç”¨ä¸Šä¸‹åˆ‡æ¢é¢‘ç¹å¯¼è‡´è€—æ—¶æ˜¯å‡ ä¸ªé”é‡Œæœ€é•¿çš„ã€‚ </li><li>OSSpinLockï¼šè‡ªæ—‹é”ï¼Œä¸è¿›å…¥å†…æ ¸ï¼Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæ€§èƒ½æœ€é«˜ï¼Œä½†æŠ¢å å¤šæ—¶ä¼šå ç”¨è¾ƒå¤šcpuï¼Œå¥½ç‚¹å¤šï¼Œè¿™æ—¶ä½¿ç”¨pthread_mutexè¾ƒå¥½ã€‚ </li><li>pthread_mutex_tï¼šåŒæ­¥é”åŸºäºCè¯­è¨€ï¼Œåº•å±‚apiæ€§èƒ½é«˜ï¼Œä½¿ç”¨æ–¹æ³•å’Œå…¶å®ƒçš„ç±»ä¼¼ã€‚ </li><li>@synchronizedï¼šæ›´åŠ ç®€å•ã€‚ </li></ul><h4 id="åäºŒã€dispatch-suspendå’Œdispatch-resumeæŒ‚èµ·å’Œæ¢å¤é˜Ÿåˆ—"><a href="#åäºŒã€dispatch-suspendå’Œdispatch-resumeæŒ‚èµ·å’Œæ¢å¤é˜Ÿåˆ—" class="headerlink" title="åäºŒã€dispatch_suspendå’Œdispatch_resumeæŒ‚èµ·å’Œæ¢å¤é˜Ÿåˆ—"></a>åäºŒã€dispatch_suspendå’Œdispatch_resumeæŒ‚èµ·å’Œæ¢å¤é˜Ÿåˆ—</h4><p>dispatch_suspendè¿™é‡ŒæŒ‚èµ·ä¸ä¼šæš‚åœæ­£åœ¨æ‰§è¡Œçš„blockï¼Œåªæ˜¯èƒ½å¤Ÿæš‚åœè¿˜æ²¡æ‰§è¡Œçš„blockã€‚ </p><h4 id="åä¸‰ã€dispatch-set-contextå’Œdispatch-get-context"><a href="#åä¸‰ã€dispatch-set-contextå’Œdispatch-get-context" class="headerlink" title="åä¸‰ã€dispatch_set_contextå’Œdispatch_get_context"></a>åä¸‰ã€dispatch_set_contextå’Œdispatch_get_context</h4><p>?</p><h2 id="GCDæ·±å…¥æ“ä½œ"><a href="#GCDæ·±å…¥æ“ä½œ" class="headerlink" title="GCDæ·±å…¥æ“ä½œ"></a>GCDæ·±å…¥æ“ä½œ</h2><ul><li>ç¼“å†²åŒºï¼šdispatch_data_t åŸºäºé›¶ç¢çš„å†…å­˜åŒºåŸŸï¼Œä½¿ç”¨ dispatch_data_apply æ¥éå†ï¼Œè¿˜å¯ä»¥ç”¨ dispatch_data_create_subrange æ¥åˆ›å»ºä¸€ä¸ªä¸åšä»»ä½•æ‹·è´çš„å­åŒºåŸŸ </li><li>I/Oè°ƒåº¦ï¼šä½¿ç”¨GCDæä¾›çš„dispatch_io_readï¼Œdispatch_io_writeå’Œdispatch_io_close </li><li>æµ‹è¯•ï¼šä½¿ç”¨ dispatch_benchmark å°å·¥å…· </li><li>åŸå­æ“ä½œï¼š libkern/OSAtomic.h é‡Œå¯ä»¥æŸ¥çœ‹é‚£äº›å‡½æ•°ï¼Œç”¨äºåº•å±‚å¤šçº¿ç¨‹ç¼–ç¨‹ã€‚ </li></ul><h3 id="GCDæ­»é”"><a href="#GCDæ­»é”" class="headerlink" title="GCDæ­»é”"></a>GCDæ­»é”</h3><p>ä¸²è¡Œé˜Ÿåˆ—é‡Œé¢åŒæ­¥ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—å°±ä¼šæ­»é”ï¼Œè§£å†³çš„æ–¹æ³•å°±æ˜¯å°†åŒæ­¥çš„ä¸²è¡Œé˜Ÿåˆ—æ”¾åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹å°±èƒ½å¤Ÿè§£å†³ã€‚ </p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)deadLockCase1 &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;1&quot;</span>);</span><br><span class="line"><span class="comment">//ä¸»é˜Ÿåˆ—çš„åŒæ­¥çº¿ç¨‹ï¼ŒæŒ‰ç…§FIFOçš„åŸåˆ™ï¼ˆå…ˆå…¥å…ˆå‡ºï¼‰ï¼Œ2æ’åœ¨3åé¢ä¼šç­‰3æ‰§è¡Œå®Œï¼Œä½†å› ä¸ºåŒæ­¥çº¿ç¨‹ï¼Œ3åˆè¦ç­‰2æ‰§è¡Œå®Œï¼Œç›¸äº’ç­‰å¾…æˆä¸ºæ­»é”ã€‚</span></span><br><span class="line"><span class="built_in">dispatch_sync</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;3&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)deadLockCase2 &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;1&quot;</span>);</span><br><span class="line"><span class="comment">//3ä¼šç­‰2ï¼Œå› ä¸º2åœ¨å…¨å±€å¹¶è¡Œé˜Ÿåˆ—é‡Œï¼Œä¸éœ€è¦ç­‰å¾…3ï¼Œè¿™æ ·2æ‰§è¡Œå®Œå›åˆ°ä¸»é˜Ÿåˆ—ï¼Œ3å°±å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line"><span class="built_in">dispatch_sync</span>(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, <span class="number">0</span>), ^&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;3&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)deadLockCase3 &#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">dispatch_queue_t</span> serialQueue = dispatch_queue_create(<span class="string">&quot;com.starming.gcddemo.serialqueue&quot;</span>, DISPATCH_QUEUE_SERIAL);</span><br><span class="line">  <span class="built_in">NSLog</span>(<span class="string">@&quot;1&quot;</span>);</span><br><span class="line"><span class="built_in">dispatch_async</span>(serialQueue, ^&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;2&quot;</span>);</span><br><span class="line"><span class="comment">//ä¸²è¡Œé˜Ÿåˆ—é‡Œé¢åŒæ­¥ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—å°±ä¼šæ­»é”</span></span><br><span class="line"><span class="built_in">dispatch_sync</span>(serialQueue, ^&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;3&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;4&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;5&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)deadLockCase4 &#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;1&quot;</span>);</span><br><span class="line"><span class="built_in">dispatch_async</span>(dispatch_get_global_queue(<span class="number">0</span>, <span class="number">0</span>), ^&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;2&quot;</span>);</span><br><span class="line"><span class="comment">//å°†åŒæ­¥çš„ä¸²è¡Œé˜Ÿåˆ—æ”¾åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹å°±èƒ½å¤Ÿè§£å†³</span></span><br><span class="line"><span class="built_in">dispatch_sync</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;3&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;4&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;5&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)deadLockCase5 &#123;</span><br><span class="line"><span class="built_in">dispatch_async</span>(dispatch_get_global_queue(<span class="number">0</span>, <span class="number">0</span>), ^&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;1&quot;</span>);</span><br><span class="line"><span class="comment">//å›åˆ°ä¸»çº¿ç¨‹å‘ç°æ­»å¾ªç¯åé¢å°±æ²¡æ³•æ‰§è¡Œäº†</span></span><br><span class="line"><span class="built_in">dispatch_sync</span>(dispatch_get_main_queue(), ^&#123;</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;2&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;3&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@&quot;4&quot;</span>);</span><br><span class="line"><span class="comment">//æ­»å¾ªç¯</span></span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="GCDå®é™…ä½¿ç”¨"><a href="#GCDå®é™…ä½¿ç”¨" class="headerlink" title="GCDå®é™…ä½¿ç”¨"></a>GCDå®é™…ä½¿ç”¨</h3><p>FMDBå¦‚ä½•ä½¿ç”¨ <strong>dispatch_queue_set_specific</strong> å’Œ <strong>dispatch_get_specific</strong> æ¥é˜²æ­¢æ­»é”ï¼Œä½œç”¨ç±»ä¼¼objc_setAssociatedObjectè·Ÿobjc_getAssociatedObject </p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">void</span> * <span class="keyword">const</span> kDispatchQueueSpecificKey = &amp;kDispatchQueueSpecificKey;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºä¸²è¡Œé˜Ÿåˆ—ï¼Œæ‰€æœ‰æ•°æ®åº“çš„æ“ä½œéƒ½åœ¨è¿™ä¸ªé˜Ÿåˆ—é‡Œ</span></span><br><span class="line">_queue = dispatch_queue_create([[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@&quot;fmdb.%@&quot;</span>, <span class="keyword">self</span>] UTF8String],</span><br><span class="line">                               <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ‡è®°é˜Ÿåˆ—</span></span><br><span class="line">dispatch_queue_set_specific(_queue, kDispatchQueueSpecificKey, (__bridge <span class="keyword">void</span> *)<span class="keyword">self</span>, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ£€æŸ¥æ˜¯å¦æ˜¯åŒä¸€ä¸ªé˜Ÿåˆ—æ¥é¿å…æ­»é”çš„æ–¹æ³•</span></span><br><span class="line">- (<span class="keyword">void</span>)inDatabase:(<span class="keyword">void</span> (^)(FMDatabase *db))block &#123;</span><br><span class="line"> FMDatabaseQueue *currentSyncQueue = (__bridge <span class="keyword">id</span>)dispatch_get_specific(kDispatchQueueSpecificKey);</span><br><span class="line">assert(currentSyncQueue != <span class="keyword">self</span> &amp;&amp; <span class="string">&quot;inDatabase: was called reentrantly on the same queue,which would lead to a deadlock&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="iOSç³»ç»Ÿç‰ˆæœ¬æ–°ç‰¹æ€§"><a href="#iOSç³»ç»Ÿç‰ˆæœ¬æ–°ç‰¹æ€§" class="headerlink" title="iOSç³»ç»Ÿç‰ˆæœ¬æ–°ç‰¹æ€§"></a>iOSç³»ç»Ÿç‰ˆæœ¬æ–°ç‰¹æ€§</h2><h3 id="iOS8"><a href="#iOS8" class="headerlink" title="iOS8"></a>iOS8</h3><p>iOS8 æ–°åŠ äº†ä¸€ä¸ªåŠŸèƒ½å« Quality of Service(QoS)ï¼Œé‡Œé¢æä¾›äº†ä¸€ä¸‹å‡ ä¸ªæ›´å®¹æ˜“ç†è§£çš„æšä¸¾åæ¥ä½¿ç”¨user interactiveï¼Œuser initiatedï¼Œutilityå’Œbackgroundã€‚ä¸‹é¢çš„è¡¨åšäº†å¯¹æ¯” </p><table><thead><tr><th align="center">Global queue</th><th align="center">Corresponding QoS class</th><th align="center">è¯´æ˜</th></tr></thead><tbody><tr><td align="center">Main thread</td><td align="center">NSQualityOfServiceUserInteractive</td><td align="center">UIç›¸å…³ï¼Œäº¤äº’ç­‰ã€‚</td></tr><tr><td align="center">DISPATCH_QUEUE_PRIORITY_HIGH</td><td align="center">NSQualityOfServiceUserInitiated</td><td align="center">ç”¨æˆ·å‘èµ·éœ€è¦é©¬ä¸Šå¾—åˆ°ç»“æœè¿›è¡Œåç»­ä»»åŠ¡ã€‚</td></tr><tr><td align="center">DISPATCH_QUEUE_PRIORITY_DEFAULT</td><td align="center">NSQualityOfServiceDefault</td><td align="center">é»˜è®¤çš„ä¸åº”è¯¥ä½¿ç”¨è¿™ä¸ªè®¾ç½®ä»»åŠ¡ã€‚</td></tr><tr><td align="center">DISPATCH_QUEUE_PRIORITY_LOW</td><td align="center">NSQualityOfServiceUtility</td><td align="center">èŠ±è´¹æ—¶é—´ç¨å¤šæ¯”å¦‚ä¸‹è½½ï¼Œéœ€è¦å‡ ç§’æˆ–å‡ åˆ†é’Ÿçš„ã€‚</td></tr><tr><td align="center">DISPATCH_QUEUE_PRIORITY_BACKGROUND</td><td align="center">NSQualityOfServiceBackground</td><td align="center">ä¸å¯è§åœ¨åå°çš„æ“ä½œå¯èƒ½éœ€è¦å¥½å‡ åˆ†é’Ÿç”šè‡³å‡ å°æ—¶çš„ã€‚</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> iOS </tag>
            
            <tag> è½¬è½½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTP çš„ä¸€ç‚¹å„¿å°çŸ¥è¯†</title>
      <link href="/2015/08/02/HTTP%20%E7%9A%84%E4%B8%80%E7%82%B9%E5%84%BF%E5%B0%8F%E7%9F%A5%E8%AF%86/"/>
      <url>/2015/08/02/HTTP%20%E7%9A%84%E4%B8%80%E7%82%B9%E5%84%BF%E5%B0%8F%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="HTTPè¯·æ±‚"><a href="#HTTPè¯·æ±‚" class="headerlink" title="HTTPè¯·æ±‚"></a>HTTPè¯·æ±‚</h2><h3 id="ä¸€ã€Hypertext-Transfer-Protocol"><a href="#ä¸€ã€Hypertext-Transfer-Protocol" class="headerlink" title="ä¸€ã€Hypertext Transfer Protocol"></a>ä¸€ã€Hypertext Transfer Protocol</h3><blockquote><p>è¶…æ–‡æœ¬ä¼ è¾“åè®® è¶…æ–‡æœ¬ä¼ è¾“åè®®</p><p>httpåè®®è§„å®šäº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®ä¼ è¾“æ ¼å¼ã€‚</p><p>httpåè®®æ˜¯åœ¨ç½‘ç»œå¼€å‘ä¸­æœ€å¸¸ç”¨çš„åè®®ï¼Œä¸ç®¡æ˜¯ç§»åŠ¨å®¢æˆ·ç«¯è¿˜æ˜¯PCç«¯,è®¿é—®ç½‘ç»œèµ„æºç»å¸¸ä½¿ç”¨httpåè®®ã€‚</p></blockquote><p>â€‹        <span id="more"></span></p><p>httpä¼˜ç‚¹:</p><ul><li><strong>ç®€å•å¿«é€Ÿ</strong>ï¼šhttpåè®®ç®€å•,é€šä¿¡é€Ÿåº¦å¾ˆå¿«.</li><li><strong>çµæ´»</strong>ï¼šhttpåè®®å…è®¸ä¼ è¾“ä»»æ„ç±»å‹çš„æ•°æ®.</li><li>httpåè®®æ˜¯<strong>çŸ­è¿æ¥</strong>(éæŒç»­æ€§è¿æ¥) (TCP/IP  UDP/IP)ï¼šhttpåè®®é™åˆ¶æ¯æ¬¡è¿æ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚ä½œå‡ºå“åº”åï¼Œé©¬ä¸Šæ–­å¼€è¿æ¥ï¼Œè¿™ç§æ–¹å¼å¯ä»¥èŠ‚çœä¼ è¾“æ—¶é—´ã€‚</li></ul><h3 id="äºŒã€-httpåè®®çš„ä½¿ç”¨"><a href="#äºŒã€-httpåè®®çš„ä½¿ç”¨" class="headerlink" title="äºŒã€ httpåè®®çš„ä½¿ç”¨"></a>äºŒã€ httpåè®®çš„ä½¿ç”¨</h3><ol><li><strong>è¯·æ±‚</strong>ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç´¢è¦æ•°æ®ã€‚</li></ol><p>â€‹        httpåè®®è§„å®šï¼šä¸€ä¸ªå®Œæ•´çš„httpè¯·æ±‚åŒ…å«<code>è¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“</code>ä¸‰ä¸ªéƒ¨åˆ†ã€‚</p><ul><li>è¯·æ±‚è¡Œ : åŒ…å«äº†è¯·æ±‚æ–¹æ³•ï¼Œè¯·æ±‚èµ„æºè·¯å¾„ï¼Œhttpåè®®ç‰ˆæœ¬ã€‚</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/resources/images/</span> <span class="meta">HTTP/1.1</span></span><br></pre></td></tr></table></figure><ul><li>è¯·æ±‚å¤´ï¼šåŒ…å«äº†å¯¹å®¢æˆ·ç«¯çš„ç¯å¢ƒæè¿°ï¼Œå®¢æˆ·ç«¯è¯·æ±‚çš„ä¸»æœºåœ°å€ç­‰ä¿¡æ¯ã€‚</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">:</span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>text/html // å®¢æˆ·ç«¯æ‰€èƒ½æ¥æ”¶çš„æ•°æ®ç±»å‹</span><br><span class="line"><span class="attribute">Accept-Language</span><span class="punctuation">: </span>zh-cn // å®¢æˆ·ç«¯çš„è¯­è¨€ç¯å¢ƒ</span><br><span class="line"><span class="attribute">Accept-Encoding</span><span class="punctuation">: </span>gzip // å®¢æˆ·ç«¯æ”¯æŒçš„æ•°æ®å‹ç¼©æ ¼å¼</span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>m.baidu.com // å®¢æˆ·ç«¯æƒ³è®¿é—®çš„æœåŠ¡å™¨ä¸»æœºåœ°å€</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:37.0) Gecko/20100101 Firefox/37.0// å®¢æˆ·ç«¯çš„ç±»å‹,å®¢æˆ·ç«¯çš„è½¯ä»¶ç¯å¢ƒ</span><br></pre></td></tr></table></figure><ul><li>è¯·æ±‚ä½“ï¼šå®¢æˆ·ç«¯å‘ç»™æœåŠ¡å™¨çš„å…·ä½“æ•°æ®ï¼Œæ¯”å¦‚æ–‡ä»¶/å›¾ç‰‡ç­‰ã€‚ </li></ul><ol start="2"><li><strong>å“åº”</strong>ï¼šæœåŠ¡å™¨è¿”å›å®¢æˆ·ç«¯æƒ³è¦çš„æ•°æ®ã€‚</li></ol><p>â€‹        httpåè®®è§„å®šï¼šä¸€ä¸ªå®Œæ•´çš„httpå“åº”åŒ…å« <code>çŠ¶æ€è¡Œã€å“åº”å¤´ã€å®ä½“å†…å®¹</code> ä¸‰ä¸ªéƒ¨åˆ†ã€‚</p><ul><li>çŠ¶æ€è¡Œï¼šåŒ…å«äº†httpåè®®ç‰ˆæœ¬,çŠ¶æ€å—,çŠ¶æ€è‹±æ–‡åç§°ã€‚</li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">HTTP/1.1</span> <span class="number">200</span> OK</span><br></pre></td></tr></table></figure><ul><li>å“åº”å¤´ï¼šåŒ…å«äº†å¯¹æœåŠ¡å™¨çš„æè¿°,å¯¹è¿”å›æ•°æ®çš„æè¿°ã€‚    </li></ul><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">:</span><br><span class="line"><span class="attribute">Content-Encoding</span><span class="punctuation">: </span>gzip // æœåŠ¡å™¨æ”¯æŒçš„æ•°æ®å‹ç¼©æ ¼å¼</span><br><span class="line"><span class="attribute">Content-Length</span><span class="punctuation">: </span> 1528 // è¿”å›æ•°æ®çš„é•¿åº¦</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span> application/xhtml+xml;charset=utf-8// è¿”å›æ•°æ®çš„ç±»å‹</span><br><span class="line"><span class="attribute">Date</span><span class="punctuation">: </span>Mon, 15 Jun 201509:06:46 GMT // å“åº”çš„æ—¶é—´</span><br><span class="line"><span class="attribute">Server</span><span class="punctuation">: </span>apache  // æœåŠ¡å™¨ç±»å‹</span><br></pre></td></tr></table></figure><ul><li>å®ä½“å†…å®¹ï¼šæœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯çš„å…·ä½“æ•°æ®(å›¾ç‰‡/html/æ–‡ä»¶â€¦)ã€‚  </li></ul><ol start="3"><li>å‘é€httpè¯·æ±‚</li></ol><p>â€‹        åœ¨iOSå¼€å‘ä¸­,å‘é€httpè¯·æ±‚çš„æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œå¸¸è§çš„æœ‰å¦‚ä¸‹å‡ ç§ï¼š</p><ul><li>è‹¹æœåŸç”Ÿ:</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSURLConnection</span>: ç”¨æ³•ç®€å•,å¤è€ç»å…¸çš„ä¸€ç§æ–¹æ¡ˆ.</span><br><span class="line"><span class="built_in">NSURLSession</span>: iOS7ä»¥åæ¨å‡ºçš„æŠ€æœ¯,åŠŸèƒ½æ¯”<span class="built_in">NSURLConnection</span>æ›´åŠ å¼ºå¤§.</span><br><span class="line"><span class="built_in">CFNetWork</span>: <span class="built_in">NSURL</span> çš„åº•å±‚,çº¯Cè¯­è¨€,ä¸€èˆ¬ä¸ç”¨.</span><br></pre></td></tr></table></figure><ul><li>ç¬¬ä¸‰æ–¹æ¡†æ¶:</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ASIHttpRequest: httpç»ˆç»“è€…,åŠŸèƒ½å¾ˆå¼ºå¤§,å¯æƒœä½œè€…å·²åœæ­¢æ›´æ–°.</span><br><span class="line">AFNetWorking: ç®€å•æ˜“ç”¨,æä¾›äº†åŸºæœ¬å¤Ÿç”¨çš„å¸¸ç”¨åŠŸèƒ½,ç»´æŠ¤å’Œä½¿ç”¨è€…å¤š.</span><br><span class="line"><span class="built_in">MKNetWorkKit</span>: ç®€å•æ˜“ç”¨,äº§è‡ªå°åº¦,ç»´æŠ¤å’Œä½¿ç”¨è€…å°‘. </span><br></pre></td></tr></table></figure><p>â€‹      </p><h3 id="ä¸‰ã€æ–¹æ³•"><a href="#ä¸‰ã€æ–¹æ³•" class="headerlink" title="ä¸‰ã€æ–¹æ³•"></a>ä¸‰ã€æ–¹æ³•</h3><h4 id="1-httpæ–¹æ³•"><a href="#1-httpæ–¹æ³•" class="headerlink" title="1. httpæ–¹æ³•"></a>1. httpæ–¹æ³•</h4><p>â€‹    httpåè®®å®šä¹‰äº†å¾ˆå¤šæ–¹æ³•å¯¹åº”ä¸åŒçš„èµ„æºæ“ä½œ,å…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯GET å’Œ POST æ–¹æ³•.</p><blockquote><p>GETã€POSTã€OPTIONSã€HEADã€PUTã€DELETEã€TRACEã€CONNECTã€PATCH</p><p>å¢:PUT</p><p> åˆ :DELETE</p><p>æ”¹:POST</p><p>æŸ¥:GET    </p></blockquote><ul><li>OPTIONS</li></ul><p>è¿”å›æœåŠ¡å™¨é’ˆå¯¹ç‰¹å®šèµ„æºæ‰€æ”¯æŒçš„HTTPè¯·æ±‚æ–¹æ³•ã€‚ä¹Ÿå¯ä»¥åˆ©ç”¨å‘WebæœåŠ¡å™¨å‘é€â€™*â€™çš„è¯·æ±‚æ¥æµ‹è¯•æœåŠ¡å™¨çš„åŠŸèƒ½æ€§ã€‚</p><ul><li>HEAD</li></ul><p>å‘æœåŠ¡å™¨ç´¢è¦ä¸GETè¯·æ±‚ç›¸ä¸€è‡´çš„å“åº”ï¼Œåªä¸è¿‡å“åº”ä½“å°†ä¸ä¼šè¢«è¿”å›ã€‚è¿™ä¸€æ–¹æ³•å¯ä»¥åœ¨ä¸å¿…ä¼ è¾“æ•´ä¸ªå“åº”å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è·å–åŒ…å«åœ¨å“åº”æ¶ˆæ¯å¤´ä¸­çš„å…ƒä¿¡æ¯ã€‚</p><ul><li>GET</li></ul><p>å‘ç‰¹å®šçš„èµ„æºå‘å‡ºè¯·æ±‚ã€‚æ³¨æ„ï¼šGETæ–¹æ³•ä¸åº”å½“è¢«ç”¨äºäº§ç”Ÿâ€œå‰¯ä½œç”¨â€çš„æ“ä½œä¸­ã€‚</p><ul><li>POST</li></ul><p>å‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼ˆä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚POSTè¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ–°çš„èµ„æºçš„å»ºç«‹å’Œ/æˆ–å·²æœ‰èµ„æºçš„ä¿®æ”¹ã€‚</p><ul><li>PUT</li></ul><p>å‘æŒ‡å®šèµ„æºä½ç½®ä¸Šä¼ å…¶æœ€æ–°å†…å®¹ã€‚</p><ul><li>DELETE</li></ul><p>è¯·æ±‚æœåŠ¡å™¨åˆ é™¤Request-URIæ‰€æ ‡è¯†çš„èµ„æºã€‚</p><ul><li>TRACE</li></ul><p>å›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­ã€‚</p><ul><li>CONNECT</li></ul><p>HTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ã€‚</p><p>â€‹       </p><h4 id="2-å‚æ•°"><a href="#2-å‚æ•°" class="headerlink" title="2. å‚æ•°"></a>2. å‚æ•°</h4><p>å› ä¸º GET å’Œ POST å¯ä»¥å®ç°ä¸Šè¿°æ‰€æœ‰æ“ä½œï¼Œæ‰€ä»¥ï¼Œåœ¨ç°å®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åªè¦ä¼šç”¨GET å’Œ POST æ–¹æ³•å°±å¯ä»¥äº†ã€‚åœ¨ä¸æœåŠ¡å™¨äº¤äº’æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦ç»™æœåŠ¡å™¨å‘é€ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚ç™»å½•æ—¶éœ€è¦å‘é€ç”¨æˆ·åå’Œå¯†ç ã€‚</p><p><strong>å‚æ•°</strong>:å°±æ˜¯æŒ‡ä¼ é€’ç»™æœåŠ¡å™¨çš„å…·ä½“æ•°æ®.</p><h4 id="3-GET-å’Œ-POST-çš„ä¸»è¦åŒºåˆ«è¡¨ç°åœ¨å‚æ•°çš„ä¼ é€’ä¸Š"><a href="#3-GET-å’Œ-POST-çš„ä¸»è¦åŒºåˆ«è¡¨ç°åœ¨å‚æ•°çš„ä¼ é€’ä¸Š" class="headerlink" title="3. GET å’Œ POST çš„ä¸»è¦åŒºåˆ«è¡¨ç°åœ¨å‚æ•°çš„ä¼ é€’ä¸Š"></a>3. GET å’Œ POST çš„ä¸»è¦åŒºåˆ«è¡¨ç°åœ¨å‚æ•°çš„ä¼ é€’ä¸Š</h4><h6 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h6><p>â€‹    GETçš„æœ¬è´¨æ˜¯ä»æœåŠ¡å™¨å¾—åˆ°æ•°æ®ï¼Œæ•ˆç‡æ›´é«˜ï¼Œå¹¶ä¸”GETè¯·æ±‚å¯ä»¥è¢«ç¼“å­˜ã€‚</p><p>â€‹    æ³¨æ„ï¼šç½‘ç»œç¼“å­˜æ•°æ®ï¼Œä¿å­˜åœ¨SQLiteçš„æ•°æ®åº“ä¸­(è·¯å¾„ï¼šNSHomeDirectory())ã€‚</p><p>â€‹        æŸ¥çœ‹ç¼“å­˜æ•°æ®å‘½ä»¤è¡Œï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cd æ–‡ä»¶ç›®å½•   (æ‰“å¼€æ–‡ä»¶ç›®å½•)</span><br><span class="line">ls   æŸ¥çœ‹å½“å‰æ–‡ä»¶ä¸‹ç›®å½•</span><br><span class="line">sqlite3 Cache.db   æ‰“å¼€æ•°æ®åº“</span><br><span class="line">.tables    æŸ¥çœ‹æ•°æ®åº“ä¸­çš„è¡¨å•</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> cfurl_cache_response;   æŸ¥çœ‹æœåŠ¡å™¨å“åº”ç¼“å­˜</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> cfurl_cache_receiver_data;   æŸ¥çœ‹æœåŠ¡å™¨è¿”å›çš„æ•°æ®ç¼“å­˜</span><br></pre></td></tr></table></figure><p>â€‹    åœ¨è¯·æ±‚ URL åé¢ä»¥ ? çš„å½¢å¼è·Ÿä¸Šå‘ç»™æœåŠ¡å™¨çš„å‚æ•°ï¼Œå‚æ•°ä»¥ â€œå‚æ•°åâ€=â€å‚æ•°å€¼â€ çš„å½¢å¼æ‹¼æ¥ï¼Œå¤šä¸ªå‚æ•°ä¹‹é—´ç”¨ &amp; åˆ†éš”ã€‚</p><p>â€‹    æ³¨æ„ï¼šGETçš„é•¿åº¦æ˜¯æœ‰é™åˆ¶çš„ï¼Œä¸åŒçš„æµè§ˆå™¨æœ‰ä¸åŒçš„é•¿åº¦é™åˆ¶ï¼Œä¸€èˆ¬åœ¨2~8Kä¹‹é—´ã€‚         </p><h6 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h6><p>â€‹    POSTçš„æœ¬è´¨æ˜¯å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼Œä¹Ÿå¯ä»¥è·å¾—æœåŠ¡å™¨å¤„ç†ä¹‹åçš„ç»“æœï¼Œæ•ˆç‡ä¸å¦‚GETã€‚POSTè¯·æ±‚ä¸å¯ä»¥è¢«ç¼“å­˜ï¼Œæ¯æ¬¡åˆ·æ–°ä¹‹åéƒ½éœ€è¦é‡æ–°æäº¤è¡¨å•ã€‚å‘é€ç»™æœåŠ¡å™¨çš„å‚æ•°å…¨éƒ¨æ”¾åœ¨ <code>è¯·æ±‚ä½“</code> ä¸­ï¼Œç†è®ºä¸Šï¼ŒPOSTä¼ é€’çš„æ•°æ®é‡æ²¡æœ‰é™åˆ¶ã€‚</p><p>â€‹    æ³¨æ„ï¼šæ‰€æœ‰æ¶‰åŠåˆ°ç”¨æˆ·éšç§çš„æ•°æ®(å¯†ç /é“¶è¡Œå¡å·ç­‰â€¦)éƒ½è¦ç”¨POSTçš„æ–¹å¼ä¼ é€’ã€‚    </p><h4 id="4-æ³¨æ„-URLä¸­ä¸èƒ½å‡ºç°ç©ºæ ¼ä»¥åŠä¸­æ–‡ç­‰ç‰¹æ®Šç¬¦å·"><a href="#4-æ³¨æ„-URLä¸­ä¸èƒ½å‡ºç°ç©ºæ ¼ä»¥åŠä¸­æ–‡ç­‰ç‰¹æ®Šç¬¦å·" class="headerlink" title="4. æ³¨æ„:URLä¸­ä¸èƒ½å‡ºç°ç©ºæ ¼ä»¥åŠä¸­æ–‡ç­‰ç‰¹æ®Šç¬¦å·"></a>4. æ³¨æ„:URLä¸­ä¸èƒ½å‡ºç°ç©ºæ ¼ä»¥åŠä¸­æ–‡ç­‰ç‰¹æ®Šç¬¦å·</h4><ul><li><p>URLä¸­,æ‰€æœ‰çš„å­—ç¬¦éƒ½å¿…é¡»æ˜¯ ASCII ç </p></li><li><p>URLä¸­ä¸èƒ½å‡ºç°ä¸­æ–‡å’Œç‰¹æ®Šç¬¦å·(å¦‚ç©ºæ ¼)</p></li></ul><p>â€‹    æ‰€ä»¥ï¼Œå¦‚æœ URL ä¸­å‡ºç°äº†ä¸­æ–‡ï¼Œéœ€è¦æ·»åŠ ç™¾åˆ†å·è½¬ä¹‰ã€‚    </p><h2 id="URL-ä¸­-äº•å·ï¼ˆé”šç‚¹ï¼‰çš„ç”¨æ³•"><a href="#URL-ä¸­-äº•å·ï¼ˆé”šç‚¹ï¼‰çš„ç”¨æ³•" class="headerlink" title="URL ä¸­ # äº•å·ï¼ˆé”šç‚¹ï¼‰çš„ç”¨æ³•"></a>URL ä¸­ # äº•å·ï¼ˆé”šç‚¹ï¼‰çš„ç”¨æ³•</h2><p>â€‹       æˆ‘ä»¬ç»å¸¸ä½¿ç”¨URL å®šä½ï¼Œä¼ é€’å‚æ•°ç­‰åº”ç”¨ï¼Œæœ€ç»å¸¸ä½¿ç”¨çš„æ˜¯ï¼Ÿ é—®å·ï¼Œä¸€èˆ¬ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œè€Œæˆ‘ä»¬åœ¨æ¥è§¦åˆ°å•é¡µå¼€å‘æ¨¡å¼çš„æ—¶å€™ä¼šæ¥è§¦åˆ°url ä¸­å¤§é‡# äº•å·çš„ä½¿ç”¨ï¼Œæœ‰æ—¶å€™ä¼šå¯¹è¿™ä¸‰ä¸ªå¸¸è§ç¬¦å·æœ‰äº›åˆ†ä¸æ¸…ï¼Œæä¸æ‡‚å…·ä½“å«ä¹‰ã€‚ </p><h3 id="æ¶µä¹‰"><a href="#æ¶µä¹‰" class="headerlink" title="æ¶µä¹‰"></a>æ¶µä¹‰</h3><p> åœ¨url ä¸­ä½¿ç”¨# ä¾‹å¦‚  index.html#product  å«ä¹‰ä¸€èˆ¬æ˜¯å®šä½åˆ°æœ¬é¡µé¢çš„productä½ç½®ï¼Œæ‰€ä»¥# åœ¨url ä¸­ä¸€èˆ¬æ˜¯ä½œä¸ºé¡µé¢å®šä½ä½¿ç”¨ï¼Œé‚£ä¹ˆproduct åˆ°åº•æ˜¯ç”¨ä»€ä¹ˆå®šä½ </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">name</span>=<span class="string">&quot;product&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;product&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥æŠŠæ»šåŠ¨æ¡å®šä½åˆ°é¡µé¢çš„å“åº”ä½ç½® </p><blockquote><p>Twitter åœ¨æ”¹ç‰ˆçš„æ—¶å€™æŠŠ æ”¹ç‰ˆå‰çš„ç”¨æˆ·ä¸»é¡µç½‘å€ä¸º<a href="http://twitter.com/username%E6%94%B9%E7%89%88%E5%90%8E%EF%BC%8C%E5%B0%B1%E5%8F%98%E6%88%90%E4%BA%86http://twitter.com/#!/username">http://twitter.com/usernameæ”¹ç‰ˆåï¼Œå°±å˜æˆäº†http://twitter.com/#!/username</a> è¿™æ˜¯ä¸»æµç½‘ç«™ç¬¬ä¸€æ¬¡å°†â€#â€å¤§è§„æ¨¡ç”¨äºé‡è¦URLä¸­ã€‚è¿™è¡¨æ˜äº•å·ï¼ˆHashï¼‰çš„ä½œç”¨æ­£åœ¨è¢«é‡æ–°è®¤è¯† </p></blockquote><h3 id="ç‰¹æ€§1ï¼šHTTP-è¯·æ±‚ä¸­çš„ä½œç”¨"><a href="#ç‰¹æ€§1ï¼šHTTP-è¯·æ±‚ä¸­çš„ä½œç”¨" class="headerlink" title="ç‰¹æ€§1ï¼šHTTP è¯·æ±‚ä¸­çš„ä½œç”¨"></a>ç‰¹æ€§1ï¼šHTTP è¯·æ±‚ä¸­çš„ä½œç”¨</h3><p>â€‹    æ˜¯ç”¨æ¥æŒ‡å¯¼æµè§ˆå™¨åŠ¨ä½œçš„ï¼Œå¯¹æœåŠ¡å™¨ç«¯å®Œå…¨æ— ç”¨ã€‚æ‰€ä»¥ï¼ŒHTTPè¯·æ±‚ä¸­ä¸åŒ…æ‹¬#ã€‚</p><p>â€‹    æ¯”å¦‚ï¼Œè®¿é—®ä¸‹é¢çš„ç½‘å€ï¼Œ<a href="http://www.example.com/index.html#print%EF%BC%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AE%9E%E9%99%85%E5%8F%91%E5%87%BA%E7%9A%84%E8%AF%B7%E6%B1%82%E6%98%AF%E8%BF%99%E6%A0%B7%E7%9A%84%EF%BC%9A">http://www.example.com/index.html#printï¼Œæµè§ˆå™¨å®é™…å‘å‡ºçš„è¯·æ±‚æ˜¯è¿™æ ·çš„ï¼š</a></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /index.html HTTP/1.1 </span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>www.example.com </span><br></pre></td></tr></table></figure><pre><code> åœ¨ç¬¬ä¸€ä¸ª#åé¢å‡ºç°çš„ä»»ä½•å­—ç¬¦ï¼Œéƒ½ä¼šè¢«æµè§ˆå™¨è§£è¯»ä¸ºä½ç½®æ ‡è¯†ç¬¦ã€‚è¿™æ„å‘³ç€ï¼Œè¿™äº›å­—ç¬¦éƒ½ä¸ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨ç«¯ã€‚</code></pre><p>â€‹    æ¯”å¦‚ï¼Œä¸‹é¢URLçš„åŸæ„æ˜¯æŒ‡å®šä¸€ä¸ªé¢œè‰²å€¼ï¼š<a href="http://www.example.com/?color=#fff%EF%BC%8C%E4%BD%86%E6%98%AF%EF%BC%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AE%9E%E9%99%85%E5%8F%91%E5%87%BA%E7%9A%84%E8%AF%B7%E6%B1%82%E6%98%AF%EF%BC%9A">http://www.example.com/?color=#fffï¼Œä½†æ˜¯ï¼Œæµè§ˆå™¨å®é™…å‘å‡ºçš„è¯·æ±‚æ˜¯ï¼š</a></p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET /?color= HTTP/1.1 </span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>www.example.com </span><br></pre></td></tr></table></figure><h3 id="ç‰¹æ€§2ï¼šæ”¹ç‰ˆ-ä¸ä¼šå¯¼è‡´ç½‘é¡µé‡è½½"><a href="#ç‰¹æ€§2ï¼šæ”¹ç‰ˆ-ä¸ä¼šå¯¼è‡´ç½‘é¡µé‡è½½" class="headerlink" title="ç‰¹æ€§2ï¼šæ”¹ç‰ˆ#ä¸ä¼šå¯¼è‡´ç½‘é¡µé‡è½½"></a>ç‰¹æ€§2ï¼šæ”¹ç‰ˆ#ä¸ä¼šå¯¼è‡´ç½‘é¡µé‡è½½</h3><p>â€‹    å•å•æ”¹å˜#åçš„éƒ¨åˆ†ï¼Œæµè§ˆå™¨åªä¼šæ»šåŠ¨åˆ°ç›¸åº”ä½ç½®ï¼Œä¸ä¼šé‡æ–°åŠ è½½ç½‘é¡µã€‚</p><p>â€‹    æ¯”å¦‚ï¼Œä»<a href="http://www.example.com/index.html#location1%E6%94%B9%E6%88%90http://www.example.com/index.html#location2%EF%BC%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8D%E4%BC%9A%E9%87%8D%E6%96%B0%E5%90%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%B7%E6%B1%82index.html%E3%80%82">http://www.example.com/index.html#location1æ”¹æˆhttp://www.example.com/index.html#location2ï¼Œæµè§ˆå™¨ä¸ä¼šé‡æ–°å‘æœåŠ¡å™¨è¯·æ±‚index.htmlã€‚</a></p><h3 id="ç‰¹æ€§3ï¼šæ”¹ç‰ˆ-åå¯¹history-èŒƒå›´å†å²çš„å½±å“"><a href="#ç‰¹æ€§3ï¼šæ”¹ç‰ˆ-åå¯¹history-èŒƒå›´å†å²çš„å½±å“" class="headerlink" title="ç‰¹æ€§3ï¼šæ”¹ç‰ˆ# åå¯¹history èŒƒå›´å†å²çš„å½±å“"></a>ç‰¹æ€§3ï¼šæ”¹ç‰ˆ# åå¯¹history èŒƒå›´å†å²çš„å½±å“</h3><p>â€‹    æ¯ä¸€æ¬¡æ”¹å˜#åçš„éƒ¨åˆ†ï¼Œéƒ½ä¼šåœ¨æµè§ˆå™¨çš„è®¿é—®å†å²ä¸­å¢åŠ ä¸€ä¸ªè®°å½•ï¼Œä½¿ç”¨â€åé€€â€æŒ‰é’®ï¼Œå°±å¯ä»¥å›åˆ°ä¸Šä¸€ä¸ªä½ç½®ã€‚è¿™å¯¹äºajaxåº”ç”¨ç¨‹åºç‰¹åˆ«æœ‰ç”¨ï¼Œå¯ä»¥ç”¨ä¸åŒçš„#å€¼ï¼Œè¡¨ç¤ºä¸åŒçš„è®¿é—®çŠ¶æ€ï¼Œç„¶åå‘ç”¨æˆ·ç»™å‡ºå¯ä»¥è®¿é—®æŸä¸ªçŠ¶æ€çš„é“¾æ¥ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸Šè¿°è§„åˆ™å¯¹IE 6å’ŒIE 7ä¸æˆç«‹ï¼Œå®ƒä»¬ä¸ä¼šå› ä¸º#çš„æ”¹å˜è€Œå¢åŠ å†å²è®°å½•ã€‚</p><p>â€‹    é‰´äºç‰¹æ€§2ã€3 å®ç°äº†åœ¨å•é¡µä¸‹view çš„è·¯ç”±å’Œå†å²å›é€€ï¼Œç›®å‰h5æ‰‹æœºå¼€å‘æ‰€é‡‡ç”¨çš„å•é¡µæ¨¡å¼çš„åŸºç¡€ã€‚</p><h3 id="ç‰¹æ€§4ï¼šwindow-location-hashè¯»å–-å€¼"><a href="#ç‰¹æ€§4ï¼šwindow-location-hashè¯»å–-å€¼" class="headerlink" title="ç‰¹æ€§4ï¼šwindow.location.hashè¯»å–#å€¼"></a>ç‰¹æ€§4ï¼šwindow.location.hashè¯»å–#å€¼</h3><pre><code> window.location.hash è¿™ä¸ªå±æ€§å¯è¯»å¯å†™ã€‚è¯»å–æ—¶ï¼Œå¯ä»¥ç”¨æ¥åˆ¤æ–­ç½‘é¡µçŠ¶æ€æ˜¯å¦æ”¹å˜ï¼›å†™å…¥æ—¶ï¼Œåˆ™ä¼šåœ¨ä¸é‡è½½ç½‘é¡µçš„å‰æä¸‹ï¼Œåˆ›é€ ä¸€æ¡è®¿é—®å†å²è®°å½•ã€‚</code></pre><h3 id="ç‰¹æ€§5ï¼šonhashchangeäº‹ä»¶-H5æ–°å¢"><a href="#ç‰¹æ€§5ï¼šonhashchangeäº‹ä»¶-H5æ–°å¢" class="headerlink" title="ç‰¹æ€§5ï¼šonhashchangeäº‹ä»¶ H5æ–°å¢"></a>ç‰¹æ€§5ï¼šonhashchangeäº‹ä»¶ H5æ–°å¢</h3><p>â€‹    è¿™æ˜¯ä¸€ä¸ªHTML 5æ–°å¢çš„äº‹ä»¶ï¼Œå½“#å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚IE8+ã€Firefox 3.6+ã€Chrome 5+ã€Safari 4.0+æ”¯æŒè¯¥äº‹ä»¶ã€‚</p><p>ã€€ã€€å®ƒçš„ä½¿ç”¨æ–¹æ³•æœ‰ä¸‰ç§ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">window.onhashchange = func; </span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">onhashchange</span>=<span class="string">&quot;func();&quot;</span>&gt;</span> </span><br><span class="line">window.addEventListener(&quot;hashchange&quot;ï¼Œ func, false); </span><br></pre></td></tr></table></figure><p>å¯¹äºä¸æ”¯æŒonhashchangeçš„æµè§ˆå™¨ï¼Œå¯ä»¥ç”¨setIntervalç›‘æ§location.hashçš„å˜åŒ–ã€‚</p><h3 id="ç‰¹æ€§6ï¼šGoogleæŠ“å–-çš„æœºåˆ¶"><a href="#ç‰¹æ€§6ï¼šGoogleæŠ“å–-çš„æœºåˆ¶" class="headerlink" title="ç‰¹æ€§6ï¼šGoogleæŠ“å–#çš„æœºåˆ¶"></a>ç‰¹æ€§6ï¼šGoogleæŠ“å–#çš„æœºåˆ¶</h3><p>â€‹    é»˜è®¤æƒ…å†µä¸‹ï¼ŒGoogleçš„ç½‘ç»œèœ˜è››å¿½è§†URLçš„#éƒ¨åˆ†ã€‚ä½†æ˜¯ï¼ŒGoogleè¿˜è§„å®šï¼Œå¦‚æœä½ å¸Œæœ›Ajaxç”Ÿæˆçš„å†…å®¹è¢«æµè§ˆå¼•æ“è¯»å–ï¼Œé‚£ä¹ˆURLä¸­å¯ä»¥ä½¿ç”¨â€#!â€ï¼ŒGoogleä¼šè‡ªåŠ¨å°†å…¶åé¢çš„å†…å®¹è½¬æˆæŸ¥è¯¢å­—ç¬¦ä¸²escaped_fragmentçš„å€¼ã€‚</p><p>ã€€ã€€æ¯”å¦‚ï¼ŒGoogleå‘ç°æ–°ç‰ˆTwitterçš„URLï¼š<a href="http://twitter.com/#!/username">http://twitter.com/#!/username</a></p><p>ã€€ã€€å°±ä¼šè‡ªåŠ¨æŠ“å–å¦ä¸€ä¸ªURLï¼š<a href="http://twitter.com/?escaped_fragment=/username">http://twitter.com/?escaped_fragment=/username</a> </p><p>ã€€ã€€é€šè¿‡è¿™ç§æœºåˆ¶ï¼ŒGoogleå°±å¯ä»¥ç´¢å¼•åŠ¨æ€çš„Ajaxå†…å®¹ã€‚</p><p>ç¾¤è®¨è®ºï¼š</p><p>URLä¸­çš„#åªæ˜¯ä½œä¸ºä¸€ä¸ªåˆ†è§£ç¬¦ï¼Œ#åé¢çš„å†…å®¹ï¼ŒæœåŠ¡å™¨ä¸ä¼šå¤„ç†ï¼Œä½†æ˜¯æµè§ˆå™¨é¡µé¢èƒ½è·å–åˆ°ï¼Œä½†æ˜¯æ‹¿åˆ°è¿™ä¸ªå€¼å¹²å•¥ç”¨ï¼Œå°±çœ‹æ€ä¹ˆå¤„ç†äº†ï¼Œæ¯”å¦‚ç°åœ¨H5åšçš„SPAï¼Œå°±æ˜¯é #åé¢çš„å†…å®¹ä½œä¸ºå‚æ•°ï¼Œæ¥å¤„ç†å‰ç«¯è·¯ç”±ã€‚</p><h2 id="ç½‘ç»œå“åº”çš„å¸¸è§çŠ¶æ€"><a href="#ç½‘ç»œå“åº”çš„å¸¸è§çŠ¶æ€" class="headerlink" title="ç½‘ç»œå“åº”çš„å¸¸è§çŠ¶æ€"></a>ç½‘ç»œå“åº”çš„å¸¸è§çŠ¶æ€</h2><h3 id="1xxæ¶ˆæ¯"><a href="#1xxæ¶ˆæ¯" class="headerlink" title="1xxæ¶ˆæ¯"></a>1xxæ¶ˆæ¯</h3><p>â€‹    è¿™ä¸€ç±»å‹çš„çŠ¶æ€ç ï¼Œä»£è¡¨è¯·æ±‚å·²è¢«æ¥å—ï¼Œéœ€è¦ç»§ç»­å¤„ç†ã€‚è¿™ç±»å“åº”æ˜¯ä¸´æ—¶å“åº”ï¼ŒåªåŒ…å«çŠ¶æ€è¡Œå’ŒæŸäº›å¯é€‰çš„å“åº”å¤´ä¿¡æ¯ï¼Œå¹¶ä»¥ç©ºè¡Œç»“æŸã€‚ç”±äºHTTP/1.0åè®®ä¸­æ²¡æœ‰å®šä¹‰ä»»ä½•1xxçŠ¶æ€ç ï¼Œæ‰€ä»¥é™¤éåœ¨æŸäº›è¯•éªŒæ¡ä»¶ä¸‹ï¼ŒæœåŠ¡å™¨ç¦æ­¢å‘æ­¤ç±»å®¢æˆ·ç«¯å‘é€1xxå“åº”ã€‚è¿™äº›çŠ¶æ€ç ä»£è¡¨çš„å“åº”éƒ½æ˜¯ä¿¡æ¯æ€§çš„ï¼Œæ ‡ç¤ºå®¢æˆ·åº”è¯¥é‡‡å–çš„å…¶ä»–è¡ŒåŠ¨ã€‚</p><h4 id="100-Continue"><a href="#100-Continue" class="headerlink" title="100 Continue"></a>100 Continue</h4><p>â€‹    å®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘é€è¯·æ±‚ã€‚è¿™ä¸ªä¸´æ—¶å“åº”æ˜¯ç”¨æ¥é€šçŸ¥å®¢æˆ·ç«¯å®ƒçš„éƒ¨åˆ†è¯·æ±‚å·²ç»è¢«æœåŠ¡å™¨æ¥æ”¶ï¼Œä¸”ä»æœªè¢«æ‹’ç»ã€‚å®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘é€è¯·æ±‚çš„å‰©ä½™éƒ¨åˆ†ï¼Œæˆ–è€…å¦‚æœè¯·æ±‚å·²ç»å®Œæˆï¼Œå¿½ç•¥è¿™ä¸ªå“åº”ã€‚æœåŠ¡å™¨å¿…é¡»åœ¨è¯·æ±‚å®Œæˆåå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæœ€ç»ˆå“åº”ã€‚</p><h4 id="101-Switching-Protocols"><a href="#101-Switching-Protocols" class="headerlink" title="101 Switching Protocols"></a>101 Switching Protocols</h4><p>â€‹    æœåŠ¡å™¨å·²ç»ç†è§£äº†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶å°†é€šè¿‡Upgradeæ¶ˆæ¯å¤´é€šçŸ¥å®¢æˆ·ç«¯é‡‡ç”¨ä¸åŒçš„åè®®æ¥å®Œæˆè¿™ä¸ªè¯·æ±‚ã€‚åœ¨å‘é€å®Œè¿™ä¸ªå“åº”æœ€åçš„ç©ºè¡Œåï¼ŒæœåŠ¡å™¨å°†ä¼šåˆ‡æ¢åˆ°åœ¨Upgradeæ¶ˆæ¯å¤´ä¸­å®šä¹‰çš„é‚£äº›åè®®ã€‚: åªæœ‰åœ¨åˆ‡æ¢æ–°çš„åè®®æ›´æœ‰å¥½å¤„çš„æ—¶å€™æ‰åº”è¯¥é‡‡å–ç±»ä¼¼æªæ–½ã€‚ä¾‹å¦‚ï¼Œåˆ‡æ¢åˆ°æ–°çš„HTTPç‰ˆæœ¬æ¯”æ—§ç‰ˆæœ¬æ›´æœ‰ä¼˜åŠ¿ï¼Œæˆ–è€…åˆ‡æ¢åˆ°ä¸€ä¸ªå®æ—¶ä¸”åŒæ­¥çš„åè®®ä»¥ä¼ é€åˆ©ç”¨æ­¤ç±»ç‰¹æ€§çš„èµ„æºã€‚</p><h4 id="102-Processing"><a href="#102-Processing" class="headerlink" title="102 Processing"></a>102 Processing</h4><p>â€‹    ç”±WebDAVï¼ˆRFC 2518ï¼‰æ‰©å±•çš„çŠ¶æ€ç ï¼Œä»£è¡¨å¤„ç†å°†è¢«ç»§ç»­æ‰§è¡Œã€‚</p><h3 id="2xxæˆåŠŸ"><a href="#2xxæˆåŠŸ" class="headerlink" title="2xxæˆåŠŸ"></a>2xxæˆåŠŸ</h3><p>â€‹    è¿™ä¸€ç±»å‹çš„çŠ¶æ€ç ï¼Œä»£è¡¨è¯·æ±‚å·²æˆåŠŸè¢«æœåŠ¡å™¨æ¥æ”¶ã€ç†è§£ã€å¹¶æ¥å—ã€‚</p><h4 id="200-OK"><a href="#200-OK" class="headerlink" title="200 OK"></a>200 OK</h4><p>â€‹    è¯·æ±‚å·²æˆåŠŸï¼Œè¯·æ±‚æ‰€å¸Œæœ›çš„å“åº”å¤´æˆ–æ•°æ®ä½“å°†éšæ­¤å“åº”è¿”å›ã€‚</p><h4 id="201-Created"><a href="#201-Created" class="headerlink" title="201 Created"></a>201 Created</h4><p>â€‹    è¯·æ±‚å·²ç»è¢«å®ç°ï¼Œè€Œä¸”æœ‰ä¸€ä¸ªæ–°çš„èµ„æºå·²ç»ä¾æ®è¯·æ±‚çš„éœ€è¦è€Œåˆ›å»ºï¼Œä¸”å…¶URIå·²ç»éšLocationå¤´ä¿¡æ¯è¿”å›ã€‚å‡å¦‚éœ€è¦çš„èµ„æºæ— æ³•åŠæ—¶åˆ›å»ºçš„è¯ï¼Œåº”å½“è¿”å›â€™202 Acceptedâ€™ã€‚</p><h4 id="202-Accepted"><a href="#202-Accepted" class="headerlink" title="202 Accepted"></a>202 Accepted</h4><p>â€‹    æœåŠ¡å™¨å·²æ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç†ã€‚æ­£å¦‚å®ƒå¯èƒ½è¢«æ‹’ç»ä¸€æ ·ï¼Œæœ€ç»ˆè¯¥è¯·æ±‚å¯èƒ½ä¼šä¹Ÿå¯èƒ½ä¸ä¼šè¢«æ‰§è¡Œã€‚åœ¨å¼‚æ­¥æ“ä½œçš„åœºåˆä¸‹ï¼Œæ²¡æœ‰æ¯”å‘é€è¿™ä¸ªçŠ¶æ€ç æ›´æ–¹ä¾¿çš„åšæ³•äº†ã€‚:è¿”å›202çŠ¶æ€ç çš„å“åº”çš„ç›®çš„æ˜¯å…è®¸æœåŠ¡å™¨æ¥å—å…¶ä»–è¿‡ç¨‹çš„è¯·æ±‚ï¼ˆä¾‹å¦‚æŸä¸ªæ¯å¤©åªæ‰§è¡Œä¸€æ¬¡çš„åŸºäºæ‰¹å¤„ç†çš„æ“ä½œï¼‰ï¼Œè€Œä¸å¿…è®©å®¢æˆ·ç«¯ä¸€ç›´ä¿æŒä¸æœåŠ¡å™¨çš„è¿æ¥ç›´åˆ°æ‰¹å¤„ç†æ“ä½œå…¨éƒ¨å®Œæˆã€‚åœ¨æ¥å—è¯·æ±‚å¤„ç†å¹¶è¿”å›202çŠ¶æ€ç çš„å“åº”åº”å½“åœ¨è¿”å›çš„å®ä½“ä¸­åŒ…å«ä¸€äº›æŒ‡ç¤ºå¤„ç†å½“å‰çŠ¶æ€çš„ä¿¡æ¯ï¼Œä»¥åŠæŒ‡å‘å¤„ç†çŠ¶æ€ç›‘è§†å™¨æˆ–çŠ¶æ€é¢„æµ‹çš„æŒ‡é’ˆï¼Œä»¥ä¾¿ç”¨æˆ·èƒ½å¤Ÿä¼°è®¡æ“ä½œæ˜¯å¦å·²ç»å®Œæˆã€‚</p><h4 id="203-Non-Authoritative-Information"><a href="#203-Non-Authoritative-Information" class="headerlink" title="203 Non-Authoritative Information"></a>203 Non-Authoritative Information</h4><p>â€‹    æœåŠ¡å™¨å·²æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†è¿”å›çš„å®ä½“å¤´éƒ¨å…ƒä¿¡æ¯ä¸æ˜¯åœ¨åŸå§‹æœåŠ¡å™¨ä¸Šæœ‰æ•ˆçš„ç¡®å®šé›†åˆï¼Œè€Œæ˜¯æ¥è‡ªæœ¬åœ°æˆ–è€…ç¬¬ä¸‰æ–¹çš„æ‹·è´ã€‚å½“å‰çš„ä¿¡æ¯å¯èƒ½æ˜¯åŸå§‹ç‰ˆæœ¬çš„å­é›†æˆ–è€…è¶… é›†ã€‚ä¾‹å¦‚ï¼ŒåŒ…å«èµ„æºçš„å…ƒæ•°æ®å¯èƒ½å¯¼è‡´åŸå§‹æœåŠ¡å™¨çŸ¥é“å…ƒä¿¡æ¯çš„è¶…é›†ã€‚ä½¿ç”¨æ­¤çŠ¶æ€ç ä¸æ˜¯å¿…é¡»çš„ï¼Œè€Œä¸”åªæœ‰åœ¨å“åº”ä¸ä½¿ç”¨æ­¤çŠ¶æ€ç ä¾¿ä¼šè¿”å›200 OKçš„æƒ…å†µä¸‹æ‰æ˜¯åˆé€‚çš„ã€‚</p><h4 id="204-No-Content"><a href="#204-No-Content" class="headerlink" title="204 No Content"></a>204 No Content</h4><p>â€‹    æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†ä¸éœ€è¦è¿”å›ä»»ä½•å®ä½“å†…å®¹ï¼Œå¹¶ä¸”å¸Œæœ›è¿”å›æ›´æ–°äº†çš„å…ƒä¿¡æ¯ã€‚å“åº”å¯èƒ½é€šè¿‡å®ä½“å¤´éƒ¨çš„å½¢å¼ï¼Œè¿”å›æ–°çš„æˆ–æ›´æ–°åçš„å…ƒä¿¡æ¯ã€‚å¦‚æœå­˜åœ¨è¿™äº›å¤´éƒ¨ä¿¡æ¯ï¼Œåˆ™åº”å½“ä¸æ‰€è¯·æ±‚çš„å˜é‡ç›¸å‘¼åº”ã€‚</p><p>â€‹    å¦‚æœå®¢æˆ·ç«¯æ˜¯æµè§ˆå™¨çš„è¯ï¼Œé‚£ä¹ˆç”¨æˆ·æµè§ˆå™¨åº”ä¿ç•™å‘é€äº†è¯¥è¯·æ±‚çš„é¡µé¢ï¼Œè€Œä¸äº§ç”Ÿä»»ä½•æ–‡æ¡£è§†å›¾ä¸Šçš„å˜åŒ–ï¼Œå³ä½¿æŒ‰ç…§è§„èŒƒæ–°çš„æˆ–æ›´æ–°åçš„å…ƒä¿¡æ¯åº”å½“è¢«åº”ç”¨åˆ°ç”¨æˆ·æµè§ˆå™¨æ´»åŠ¨è§†å›¾ä¸­çš„æ–‡æ¡£ã€‚</p><p>â€‹    ç”±äº204å“åº”è¢«ç¦æ­¢åŒ…å«ä»»ä½•æ¶ˆæ¯ä½“ï¼Œå› æ­¤å®ƒå§‹ç»ˆä»¥æ¶ˆæ¯å¤´åçš„ç¬¬ä¸€ä¸ªç©ºè¡Œç»“å°¾ã€‚</p><h4 id="205-Reset-Content"><a href="#205-Reset-Content" class="headerlink" title="205 Reset Content"></a>205 Reset Content</h4><p>â€‹    æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä¸”æ²¡æœ‰è¿”å›ä»»ä½•å†…å®¹ã€‚ä½†æ˜¯ä¸204å“åº”ä¸åŒï¼Œè¿”å›æ­¤çŠ¶æ€ç çš„å“åº”è¦æ±‚è¯·æ±‚è€…é‡ç½®æ–‡æ¡£è§†å›¾ã€‚è¯¥å“åº”ä¸»è¦æ˜¯è¢«ç”¨äºæ¥å—ç”¨æˆ·è¾“å…¥åï¼Œç«‹å³é‡ç½®è¡¨å•ï¼Œä»¥ä¾¿ç”¨æˆ·èƒ½å¤Ÿè½»æ¾åœ°å¼€å§‹å¦ä¸€æ¬¡è¾“å…¥ã€‚</p><pre><code> ä¸204å“åº”ä¸€æ ·ï¼Œè¯¥å“åº”ä¹Ÿè¢«ç¦æ­¢åŒ…å«ä»»ä½•æ¶ˆæ¯ä½“ï¼Œä¸”ä»¥æ¶ˆæ¯å¤´åçš„ç¬¬ä¸€ä¸ªç©ºè¡Œç»“æŸã€‚</code></pre><h4 id="206-Partial-Content"><a href="#206-Partial-Content" class="headerlink" title="206 Partial Content"></a>206 Partial Content</h4><p>â€‹    æœåŠ¡å™¨å·²ç»æˆåŠŸå¤„ç†äº†éƒ¨åˆ†GETè¯·æ±‚ã€‚ç±»ä¼¼äºFlashGetæˆ–è€…è¿…é›·è¿™ç±»çš„HTTP ä¸‹è½½å·¥å…·éƒ½æ˜¯ä½¿ç”¨æ­¤ç±»å“åº”å®ç°æ–­ç‚¹ç»­ä¼ æˆ–è€…å°†ä¸€ä¸ªå¤§æ–‡æ¡£åˆ†è§£ä¸ºå¤šä¸ªä¸‹è½½æ®µåŒæ—¶ä¸‹è½½ã€‚</p><p>â€‹    è¯¥è¯·æ±‚å¿…é¡»åŒ…å«Rangeå¤´ä¿¡æ¯æ¥æŒ‡ç¤ºå®¢æˆ·ç«¯å¸Œæœ›å¾—åˆ°çš„å†…å®¹èŒƒå›´ï¼Œå¹¶ä¸”å¯èƒ½åŒ…å«If-Rangeæ¥ä½œä¸ºè¯·æ±‚æ¡ä»¶ã€‚</p><p>â€‹    å“åº”å¿…é¡»åŒ…å«å¦‚ä¸‹çš„å¤´éƒ¨åŸŸï¼š</p><blockquote><p>Content-Rangeç”¨ä»¥æŒ‡ç¤ºæœ¬æ¬¡å“åº”ä¸­è¿”å›çš„å†…å®¹çš„èŒƒå›´ï¼›å¦‚æœæ˜¯Content-Typeä¸ºmultipart/byterangesçš„å¤šæ®µä¸‹è½½ï¼Œåˆ™æ¯ä¸€multipartæ®µä¸­éƒ½åº”åŒ…å«Content-RangeåŸŸç”¨ä»¥æŒ‡ç¤ºæœ¬æ®µçš„å†…å®¹èŒƒå›´ã€‚å‡å¦‚å“åº”ä¸­åŒ…å«Content-Lengthï¼Œé‚£ä¹ˆå®ƒçš„æ•°å€¼å¿…é¡»åŒ¹é…å®ƒè¿”å›çš„å†…å®¹èŒƒå›´çš„çœŸå®å­—èŠ‚æ•°ã€‚</p><p>Date</p><p>ETagå’Œï¼æˆ–Content-Locationï¼Œå‡å¦‚åŒæ ·çš„è¯·æ±‚æœ¬åº”è¯¥è¿”å›200å“åº”ã€‚</p><p>Expires, Cache-Controlï¼Œå’Œï¼æˆ–Varyï¼Œå‡å¦‚å…¶å€¼å¯èƒ½ä¸ä¹‹å‰ç›¸åŒå˜é‡çš„å…¶ä»–å“åº”å¯¹åº”çš„å€¼ä¸åŒçš„è¯ã€‚</p></blockquote><p>â€‹    å‡å¦‚æœ¬å“åº”è¯·æ±‚ä½¿ç”¨äº†If-Rangeå¼ºç¼“å­˜éªŒè¯ï¼Œé‚£ä¹ˆæœ¬æ¬¡å“åº”ä¸åº”è¯¥åŒ…å«å…¶ä»–å®ä½“å¤´ï¼›å‡å¦‚æœ¬å“åº”çš„è¯·æ±‚ä½¿ç”¨äº†If-Rangeå¼±ç¼“å­˜éªŒè¯ï¼Œé‚£ä¹ˆæœ¬æ¬¡å“åº”ç¦æ­¢åŒ…å«å…¶ä»–å®ä½“å¤´ï¼›è¿™é¿å…äº†ç¼“å­˜çš„å®ä½“å†…å®¹å’Œæ›´æ–°äº†çš„å®ä½“å¤´ä¿¡æ¯ä¹‹é—´çš„ä¸ä¸€è‡´ã€‚å¦åˆ™ï¼Œæœ¬å“åº”å°±åº”å½“åŒ…å«æ‰€æœ‰æœ¬åº”è¯¥è¿”å›200å“åº”ä¸­åº”å½“è¿”å›çš„æ‰€æœ‰å®ä½“å¤´éƒ¨åŸŸã€‚</p><p>â€‹    å‡å¦‚ETagæˆ–Last-Modifiedå¤´éƒ¨ä¸èƒ½ç²¾ç¡®åŒ¹é…çš„è¯ï¼Œåˆ™å®¢æˆ·ç«¯ç¼“å­˜åº”ç¦æ­¢å°†206å“åº”è¿”å›çš„å†…å®¹ä¸ä¹‹å‰ä»»ä½•ç¼“å­˜è¿‡çš„å†…å®¹ç»„åˆåœ¨ä¸€èµ·ã€‚</p><p>â€‹    ä»»ä½•ä¸æ”¯æŒRangeä»¥åŠContent-Rangeå¤´çš„ç¼“å­˜éƒ½ç¦æ­¢ç¼“å­˜206å“åº”è¿”å›çš„å†…å®¹ã€‚</p><p>207 Multi-Status</p><p>â€‹    ç”±WebDAV(RFC 2518)æ‰©å±•çš„çŠ¶æ€ç ï¼Œä»£è¡¨ä¹‹åçš„æ¶ˆæ¯ä½“å°†æ˜¯ä¸€ä¸ªXMLæ¶ˆæ¯ï¼Œå¹¶ä¸”å¯èƒ½ä¾ç…§ä¹‹å‰å­è¯·æ±‚æ•°é‡çš„ä¸åŒï¼ŒåŒ…å«ä¸€ç³»åˆ—ç‹¬ç«‹çš„å“åº”ä»£ç ã€‚</p><h3 id="3xxé‡å®šå‘"><a href="#3xxé‡å®šå‘" class="headerlink" title="3xxé‡å®šå‘"></a>3xxé‡å®šå‘</h3><p>â€‹    è¿™ç±»çŠ¶æ€ç ä»£è¡¨éœ€è¦å®¢æˆ·ç«¯é‡‡å–è¿›ä¸€æ­¥çš„æ“ä½œæ‰èƒ½å®Œæˆè¯·æ±‚ã€‚é€šå¸¸ï¼Œè¿™äº›çŠ¶æ€ç ç”¨æ¥é‡å®šå‘ï¼Œåç»­çš„è¯·æ±‚åœ°å€ï¼ˆé‡å®šå‘ç›®æ ‡ï¼‰åœ¨æœ¬æ¬¡å“åº”çš„LocationåŸŸä¸­æŒ‡æ˜ã€‚</p><p>â€‹    å½“ä¸”ä»…å½“åç»­çš„è¯·æ±‚æ‰€ä½¿ç”¨çš„æ–¹æ³•æ˜¯GETæˆ–è€…HEADæ—¶ï¼Œç”¨æˆ·æµè§ˆå™¨æ‰å¯ä»¥åœ¨æ²¡æœ‰ç”¨æˆ·ä»‹å…¥çš„æƒ…å†µä¸‹è‡ªåŠ¨æäº¤æ‰€éœ€è¦çš„åç»­è¯·æ±‚ã€‚å®¢æˆ·ç«¯åº”å½“è‡ªåŠ¨ç›‘æµ‹æ— é™å¾ªç¯é‡å®šå‘ï¼ˆä¾‹å¦‚ï¼šAâ†’Bâ†’Câ†’â€¦â€¦â†’Aæˆ–Aâ†’Aï¼‰ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å¤§é‡ä¸å¿…è¦çš„èµ„æºæ¶ˆè€—ã€‚æŒ‰ç…§HTTP/1.0ç‰ˆè§„èŒƒçš„å»ºè®®ï¼Œæµè§ˆå™¨ä¸åº”è‡ªåŠ¨è®¿é—®è¶…è¿‡5æ¬¡çš„é‡å®šå‘ã€‚</p><h4 id="300-Multiple-Choices"><a href="#300-Multiple-Choices" class="headerlink" title="300 Multiple Choices"></a>300 Multiple Choices</h4><p>â€‹    è¢«è¯·æ±‚çš„èµ„æºæœ‰ä¸€ç³»åˆ—å¯ä¾›é€‰æ‹©çš„å›é¦ˆä¿¡æ¯ï¼Œæ¯ä¸ªéƒ½æœ‰è‡ªå·±ç‰¹å®šçš„åœ°å€å’Œæµè§ˆå™¨é©±åŠ¨çš„å•†è®®ä¿¡æ¯ã€‚ç”¨æˆ·æˆ–æµè§ˆå™¨èƒ½å¤Ÿè‡ªè¡Œé€‰æ‹©ä¸€ä¸ªé¦–é€‰çš„åœ°å€è¿›è¡Œé‡å®šå‘ã€‚</p><p>â€‹    é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™è¯¥å“åº”åº”å½“åŒ…æ‹¬ä¸€ä¸ªèµ„æºç‰¹æ€§åŠåœ°å€çš„åˆ—è¡¨çš„å®ä½“ï¼Œä»¥ä¾¿ç”¨æˆ·æˆ–æµè§ˆå™¨ä»ä¸­é€‰æ‹©æœ€åˆé€‚çš„é‡å®šå‘åœ°å€ã€‚è¿™ä¸ªå®ä½“çš„æ ¼å¼ç”±Content-Typeå®šä¹‰çš„æ ¼å¼æ‰€å†³å®šã€‚æµè§ˆå™¨å¯èƒ½æ ¹æ®å“åº”çš„æ ¼å¼ä»¥åŠæµè§ˆå™¨è‡ªèº«èƒ½åŠ›ï¼Œè‡ªåŠ¨ä½œå‡ºæœ€åˆé€‚çš„é€‰æ‹©ã€‚å½“ç„¶ï¼ŒRFC 2616è§„èŒƒå¹¶æ²¡æœ‰è§„å®šè¿™æ ·çš„è‡ªåŠ¨é€‰æ‹©è¯¥å¦‚ä½•è¿›è¡Œã€‚</p><p>â€‹    å¦‚æœæœåŠ¡å™¨æœ¬èº«å·²ç»æœ‰äº†é¦–é€‰çš„å›é¦ˆé€‰æ‹©ï¼Œé‚£ä¹ˆåœ¨Locationä¸­åº”å½“æŒ‡æ˜è¿™ä¸ªå›é¦ˆçš„URIï¼›æµè§ˆå™¨å¯èƒ½ä¼šå°†è¿™ä¸ªLocationå€¼ä½œä¸ºè‡ªåŠ¨é‡å®šå‘çš„åœ°å€ã€‚æ­¤å¤–ï¼Œé™¤éé¢å¤–æŒ‡å®šï¼Œå¦åˆ™è¿™ä¸ªå“åº”ä¹Ÿæ˜¯å¯ç¼“å­˜çš„ã€‚</p><h4 id="301-Moved-Permanently"><a href="#301-Moved-Permanently" class="headerlink" title="301 Moved Permanently"></a>301 Moved Permanently</h4><p>â€‹    è¢«è¯·æ±‚çš„èµ„æºå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ï¼Œå¹¶ä¸”å°†æ¥ä»»ä½•å¯¹æ­¤èµ„æºçš„å¼•ç”¨éƒ½åº”è¯¥ä½¿ç”¨æœ¬å“åº”è¿”å›çš„è‹¥å¹²ä¸ªURIä¹‹ä¸€ã€‚å¦‚æœå¯èƒ½ï¼Œæ‹¥æœ‰é“¾æ¥ç¼–è¾‘åŠŸèƒ½çš„å®¢æˆ·ç«¯åº”å½“è‡ªåŠ¨æŠŠè¯·æ±‚çš„åœ°å€ä¿®æ”¹ä¸ºä»æœåŠ¡å™¨åé¦ˆå›æ¥çš„åœ°å€ã€‚é™¤éé¢å¤–æŒ‡å®šï¼Œå¦åˆ™è¿™ä¸ªå“åº”ä¹Ÿæ˜¯å¯ç¼“å­˜çš„ã€‚</p><p>â€‹    æ–°çš„æ°¸ä¹…æ€§çš„URIåº”å½“åœ¨å“åº”çš„LocationåŸŸä¸­è¿”å›ã€‚é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™å“åº”çš„å®ä½“ä¸­åº”å½“åŒ…å«æŒ‡å‘æ–°çš„URIçš„è¶…é“¾æ¥åŠç®€çŸ­è¯´æ˜ã€‚</p><p>â€‹    å¦‚æœè¿™ä¸æ˜¯ä¸€ä¸ªGETæˆ–è€…HEADè¯·æ±‚ï¼Œå› æ­¤æµè§ˆå™¨ç¦æ­¢è‡ªåŠ¨è¿›è¡Œé‡å®šå‘ï¼Œé™¤éå¾—åˆ°ç”¨æˆ·çš„ç¡®è®¤ï¼Œå› ä¸ºè¯·æ±‚çš„æ¡ä»¶å¯èƒ½å› æ­¤å‘ç”Ÿå˜åŒ–ã€‚</p><p>â€‹    æ³¨æ„ï¼šå¯¹äºæŸäº›ä½¿ç”¨HTTP/1.0åè®®çš„æµè§ˆå™¨ï¼Œå½“å®ƒä»¬å‘é€çš„POSTè¯·æ±‚å¾—åˆ°äº†ä¸€ä¸ª301å“åº”çš„è¯ï¼Œæ¥ä¸‹æ¥çš„é‡å®šå‘è¯·æ±‚å°†ä¼šå˜æˆGETæ–¹å¼ã€‚</p><h4 id="302-Found"><a href="#302-Found" class="headerlink" title="302 Found"></a>302 Found</h4><p>â€‹    è¯·æ±‚çš„èµ„æºç°åœ¨ä¸´æ—¶ä»ä¸åŒçš„URIå“åº”è¯·æ±‚ã€‚ç”±äºè¿™æ ·çš„é‡å®šå‘æ˜¯ä¸´æ—¶çš„ï¼Œå®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘åŸæœ‰åœ°å€å‘é€ä»¥åçš„è¯·æ±‚ã€‚åªæœ‰åœ¨Cache-Controlæˆ–Expiresä¸­è¿›è¡Œäº†æŒ‡å®šçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå“åº”æ‰æ˜¯å¯ç¼“å­˜çš„ã€‚</p><p>â€‹    æ–°çš„ä¸´æ—¶æ€§çš„URIåº”å½“åœ¨å“åº”çš„LocationåŸŸä¸­è¿”å›ã€‚é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™å“åº”çš„å®ä½“ä¸­åº”å½“åŒ…å«æŒ‡å‘æ–°çš„URIçš„è¶…é“¾æ¥åŠç®€çŸ­è¯´æ˜ã€‚</p><p>â€‹    å¦‚æœè¿™ä¸æ˜¯ä¸€ä¸ªGETæˆ–è€…HEADè¯·æ±‚ï¼Œé‚£ä¹ˆæµè§ˆå™¨ç¦æ­¢è‡ªåŠ¨è¿›è¡Œé‡å®šå‘ï¼Œé™¤éå¾—åˆ°ç”¨æˆ·çš„ç¡®è®¤ï¼Œå› ä¸ºè¯·æ±‚çš„æ¡ä»¶å¯èƒ½å› æ­¤å‘ç”Ÿå˜åŒ–ã€‚</p><p>â€‹    æ³¨æ„ï¼šè™½ç„¶RFC 1945å’ŒRFC 2068è§„èŒƒä¸å…è®¸å®¢æˆ·ç«¯åœ¨é‡å®šå‘æ—¶æ”¹å˜è¯·æ±‚çš„æ–¹æ³•ï¼Œä½†æ˜¯å¾ˆå¤šç°å­˜çš„æµè§ˆå™¨å°†302å“åº”è§†ä½œä¸º303å“åº”ï¼Œå¹¶ä¸”ä½¿ç”¨GETæ–¹å¼è®¿é—®åœ¨Locationä¸­è§„å®šçš„URIï¼Œè€Œæ— è§†åŸå…ˆè¯·æ±‚çš„æ–¹æ³•ã€‚çŠ¶æ€ç 303å’Œ307è¢«æ·»åŠ äº†è¿›æ¥ï¼Œç”¨ä»¥æ˜ç¡®æœåŠ¡å™¨æœŸå¾…å®¢æˆ·ç«¯è¿›è¡Œä½•ç§ååº”ã€‚</p><h4 id="303-See-Other"><a href="#303-See-Other" class="headerlink" title="303 See Other"></a>303 See Other</h4><p>â€‹    å¯¹åº”å½“å‰è¯·æ±‚çš„å“åº”å¯ä»¥åœ¨å¦ä¸€ä¸ªURIä¸Šè¢«æ‰¾åˆ°ï¼Œè€Œä¸”å®¢æˆ·ç«¯åº”å½“é‡‡ç”¨GETçš„æ–¹å¼è®¿é—®é‚£ä¸ªèµ„æºã€‚è¿™ä¸ªæ–¹æ³•çš„å­˜åœ¨ä¸»è¦æ˜¯ä¸ºäº†å…è®¸ç”±è„šæœ¬æ¿€æ´»çš„POSTè¯·æ±‚è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–°çš„èµ„æºã€‚è¿™ä¸ªæ–°çš„URIä¸æ˜¯åŸå§‹èµ„æºçš„æ›¿ä»£å¼•ç”¨ã€‚åŒæ—¶ï¼Œ303å“åº”ç¦æ­¢è¢«ç¼“å­˜ã€‚å½“ç„¶ï¼Œç¬¬äºŒä¸ªè¯·æ±‚ï¼ˆé‡å®šå‘ï¼‰å¯èƒ½è¢«ç¼“å­˜ã€‚</p><p>â€‹    æ–°çš„URIåº”å½“åœ¨å“åº”çš„LocationåŸŸä¸­è¿”å›ã€‚é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™å“åº”çš„å®ä½“ä¸­åº”å½“åŒ…å«æŒ‡å‘æ–°çš„URIçš„è¶…é“¾æ¥åŠç®€çŸ­è¯´æ˜ã€‚</p><p>â€‹    æ³¨æ„ï¼šè®¸å¤šHTTP/1.1ç‰ˆä»¥å‰çš„æµè§ˆå™¨ä¸èƒ½æ­£ç¡®ç†è§£303çŠ¶æ€ã€‚å¦‚æœéœ€è¦è€ƒè™‘ä¸è¿™äº›æµè§ˆå™¨ä¹‹é—´çš„äº’åŠ¨ï¼Œ302çŠ¶æ€ç åº”è¯¥å¯ä»¥èƒœä»»ï¼Œå› ä¸ºå¤§å¤šæ•°çš„æµè§ˆå™¨å¤„ç†302å“åº”æ—¶çš„æ–¹å¼æ°æ°å°±æ˜¯ä¸Šè¿°è§„èŒƒè¦æ±‚å®¢æˆ·ç«¯å¤„ç†303å“åº”æ—¶åº”å½“åšçš„ã€‚</p><h4 id="304-Not-Modified"><a href="#304-Not-Modified" class="headerlink" title="304 Not Modified"></a>304 Not Modified</h4><p>â€‹    å¦‚æœå®¢æˆ·ç«¯å‘é€äº†ä¸€ä¸ªå¸¦æ¡ä»¶çš„GETè¯·æ±‚ä¸”è¯¥è¯·æ±‚å·²è¢«å…è®¸ï¼Œè€Œæ–‡æ¡£çš„å†…å®¹ï¼ˆè‡ªä¸Šæ¬¡è®¿é—®ä»¥æ¥æˆ–è€…æ ¹æ®è¯·æ±‚çš„æ¡ä»¶ï¼‰å¹¶æ²¡æœ‰æ”¹å˜ï¼Œåˆ™æœåŠ¡å™¨åº”å½“è¿”å›è¿™ä¸ªçŠ¶æ€ç ã€‚304å“åº”ç¦æ­¢åŒ…å«æ¶ˆæ¯ä½“ï¼Œå› æ­¤å§‹ç»ˆä»¥æ¶ˆæ¯å¤´åçš„ç¬¬ä¸€ä¸ªç©ºè¡Œç»“å°¾ã€‚</p><p>â€‹    è¯¥å“åº”å¿…é¡»åŒ…å«ä»¥ä¸‹çš„å¤´ä¿¡æ¯ï¼š</p><blockquote><p>Dateï¼Œé™¤éè¿™ä¸ªæœåŠ¡å™¨æ²¡æœ‰æ—¶é’Ÿã€‚å‡å¦‚æ²¡æœ‰æ—¶é’Ÿçš„æœåŠ¡å™¨ä¹Ÿéµå®ˆè¿™äº›è§„åˆ™ï¼Œé‚£ä¹ˆä»£ç†æœåŠ¡å™¨ä»¥åŠå®¢æˆ·ç«¯å¯ä»¥è‡ªè¡Œå°†Dateå­—æ®µæ·»åŠ åˆ°æ¥æ”¶åˆ°çš„å“åº”å¤´ä¸­å»ï¼ˆæ­£å¦‚RFC 2068ä¸­è§„å®šçš„ä¸€æ ·ï¼‰ï¼Œç¼“å­˜æœºåˆ¶å°†ä¼šæ­£å¸¸å·¥ä½œã€‚</p><p>ETagå’Œï¼æˆ–Content-Locationï¼Œå‡å¦‚åŒæ ·çš„è¯·æ±‚æœ¬åº”è¿”å›200å“åº”ã€‚</p><p>Expires, Cache-Controlï¼Œå’Œï¼æˆ–Varyï¼Œå‡å¦‚å…¶å€¼å¯èƒ½ä¸ä¹‹å‰ç›¸åŒå˜é‡çš„å…¶ä»–å“åº”å¯¹åº”çš„å€¼ä¸åŒçš„è¯ã€‚</p></blockquote><p>â€‹    å‡å¦‚æœ¬å“åº”è¯·æ±‚ä½¿ç”¨äº†å¼ºç¼“å­˜éªŒè¯ï¼Œé‚£ä¹ˆæœ¬æ¬¡å“åº”ä¸åº”è¯¥åŒ…å«å…¶ä»–å®ä½“å¤´ï¼›å¦åˆ™ï¼ˆä¾‹å¦‚ï¼ŒæŸä¸ªå¸¦æ¡ä»¶çš„GETè¯·æ±‚ä½¿ç”¨äº†å¼±ç¼“å­˜éªŒè¯ï¼‰ï¼Œæœ¬æ¬¡å“åº”ç¦æ­¢åŒ…å«å…¶ä»–å®ä½“å¤´ï¼›è¿™é¿å…äº†ç¼“å­˜äº†çš„å®ä½“å†…å®¹å’Œæ›´æ–°äº†çš„å®ä½“å¤´ä¿¡æ¯ä¹‹é—´çš„ä¸ä¸€è‡´ã€‚</p><p>â€‹    å‡å¦‚æŸä¸ª304å“åº”æŒ‡æ˜äº†å½“å‰æŸä¸ªå®ä½“æ²¡æœ‰ç¼“å­˜ï¼Œé‚£ä¹ˆç¼“å­˜ç³»ç»Ÿå¿…é¡»å¿½è§†è¿™ä¸ªå“åº”ï¼Œå¹¶ä¸”é‡å¤å‘é€ä¸åŒ…å«é™åˆ¶æ¡ä»¶çš„è¯·æ±‚ã€‚</p><p>â€‹    å‡å¦‚æ¥æ”¶åˆ°ä¸€ä¸ªè¦æ±‚æ›´æ–°æŸä¸ªç¼“å­˜æ¡ç›®çš„304å“åº”ï¼Œé‚£ä¹ˆç¼“å­˜ç³»ç»Ÿå¿…é¡»æ›´æ–°æ•´ä¸ªæ¡ç›®ä»¥åæ˜ æ‰€æœ‰åœ¨å“åº”ä¸­è¢«æ›´æ–°çš„å­—æ®µçš„å€¼ã€‚</p><h4 id="305-Use-Proxy"><a href="#305-Use-Proxy" class="headerlink" title="305 Use Proxy"></a>305 Use Proxy</h4><p>â€‹    è¢«è¯·æ±‚çš„èµ„æºå¿…é¡»é€šè¿‡æŒ‡å®šçš„ä»£ç†æ‰èƒ½è¢«è®¿é—®ã€‚LocationåŸŸä¸­å°†ç»™å‡ºæŒ‡å®šçš„ä»£ç†æ‰€åœ¨çš„URIä¿¡æ¯ï¼Œæ¥æ”¶è€…éœ€è¦é‡å¤å‘é€ä¸€ä¸ªå•ç‹¬çš„è¯·æ±‚ï¼Œé€šè¿‡è¿™ä¸ªä»£ç†æ‰èƒ½è®¿é—®ç›¸åº”èµ„æºã€‚åªæœ‰åŸå§‹æœåŠ¡å™¨æ‰èƒ½åˆ›å»º305å“åº”ã€‚</p><p>â€‹    æ³¨æ„ï¼šRFC 2068ä¸­æ²¡æœ‰æ˜ç¡®305å“åº”æ˜¯ä¸ºäº†é‡å®šå‘ä¸€ä¸ªå•ç‹¬çš„è¯·æ±‚ï¼Œè€Œä¸”åªèƒ½è¢«åŸå§‹æœåŠ¡å™¨åˆ›å»ºã€‚å¿½è§†è¿™äº›é™åˆ¶å¯èƒ½å¯¼è‡´ä¸¥é‡çš„å®‰å…¨åæœã€‚</p><h4 id="306-Switch-Proxy"><a href="#306-Switch-Proxy" class="headerlink" title="306 Switch Proxy"></a>306 Switch Proxy</h4><p>â€‹    åœ¨æœ€æ–°ç‰ˆçš„è§„èŒƒä¸­ï¼Œ306çŠ¶æ€ç å·²ç»ä¸å†è¢«ä½¿ç”¨ã€‚</p><h4 id="307-Temporary-Redirect"><a href="#307-Temporary-Redirect" class="headerlink" title="307 Temporary Redirect"></a>307 Temporary Redirect</h4><p>â€‹    è¯·æ±‚çš„èµ„æºç°åœ¨ä¸´æ—¶ä»ä¸åŒçš„URIå“åº”è¯·æ±‚ã€‚ç”±äºè¿™æ ·çš„é‡å®šå‘æ˜¯ä¸´æ—¶çš„ï¼Œå®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘åŸæœ‰åœ°å€å‘é€ä»¥åçš„è¯·æ±‚ã€‚åªæœ‰åœ¨Cache-Controlæˆ–Expiresä¸­è¿›è¡Œäº†æŒ‡å®šçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå“åº”æ‰æ˜¯å¯ç¼“å­˜çš„ã€‚</p><p>â€‹    æ–°çš„ä¸´æ—¶æ€§çš„URIåº”å½“åœ¨å“åº”çš„LocationåŸŸä¸­è¿”å›ã€‚é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™å“åº”çš„å®ä½“ä¸­åº”å½“åŒ…å«æŒ‡å‘æ–°çš„URIçš„è¶…é“¾æ¥åŠç®€çŸ­è¯´æ˜ã€‚å› ä¸ºéƒ¨åˆ†æµè§ˆå™¨ä¸èƒ½è¯†åˆ«307å“åº”ï¼Œå› æ­¤éœ€è¦æ·»åŠ ä¸Šè¿°å¿…è¦ä¿¡æ¯ä»¥ä¾¿ç”¨æˆ·èƒ½å¤Ÿç†è§£å¹¶å‘æ–°çš„URIå‘å‡ºè®¿é—®è¯·æ±‚ã€‚</p><p>â€‹    å¦‚æœè¿™ä¸æ˜¯ä¸€ä¸ªGETæˆ–è€…HEADè¯·æ±‚ï¼Œé‚£ä¹ˆæµè§ˆå™¨ç¦æ­¢è‡ªåŠ¨è¿›è¡Œé‡å®šå‘ï¼Œé™¤éå¾—åˆ°ç”¨æˆ·çš„ç¡®è®¤ï¼Œå› ä¸ºè¯·æ±‚çš„æ¡ä»¶å¯èƒ½å› æ­¤å‘ç”Ÿå˜åŒ–ã€‚</p><h3 id="4xxå®¢æˆ·ç«¯é”™è¯¯"><a href="#4xxå®¢æˆ·ç«¯é”™è¯¯" class="headerlink" title="4xxå®¢æˆ·ç«¯é”™è¯¯"></a>4xxå®¢æˆ·ç«¯é”™è¯¯</h3><p>â€‹    è¿™ç±»çš„çŠ¶æ€ç ä»£è¡¨äº†å®¢æˆ·ç«¯çœ‹èµ·æ¥å¯èƒ½å‘ç”Ÿäº†é”™è¯¯ï¼Œå¦¨ç¢äº†æœåŠ¡å™¨çš„å¤„ç†ã€‚é™¤éå“åº”çš„æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™æœåŠ¡å™¨å°±åº”è¯¥è¿”å›ä¸€ä¸ªè§£é‡Šå½“å‰é”™è¯¯çŠ¶å†µçš„å®ä½“ï¼Œä»¥åŠè¿™æ˜¯ä¸´æ—¶çš„è¿˜æ˜¯æ°¸ä¹…æ€§çš„çŠ¶å†µã€‚è¿™äº›çŠ¶æ€ç é€‚ç”¨äºä»»ä½•è¯·æ±‚æ–¹æ³•ã€‚æµè§ˆå™¨åº”å½“å‘ç”¨æˆ·æ˜¾ç¤ºä»»ä½•åŒ…å«åœ¨æ­¤ç±»é”™è¯¯å“åº”ä¸­çš„å®ä½“å†…å®¹ã€‚</p><p>â€‹    å¦‚æœé”™è¯¯å‘ç”Ÿæ—¶å®¢æˆ·ç«¯æ­£åœ¨ä¼ é€æ•°æ®ï¼Œé‚£ä¹ˆä½¿ç”¨TCPçš„æœåŠ¡å™¨å®ç°åº”å½“ä»”ç»†ç¡®ä¿åœ¨å…³é—­å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ä¹‹å‰ï¼Œå®¢æˆ·ç«¯å·²ç»æ”¶åˆ°äº†åŒ…å«é”™è¯¯ä¿¡æ¯çš„æ•°æ®åŒ…ã€‚å¦‚æœå®¢æˆ·ç«¯åœ¨æ”¶åˆ°é”™è¯¯ä¿¡æ¯åç»§ç»­å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼ŒæœåŠ¡å™¨çš„TCPæ ˆå°†å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªé‡ç½®æ•°æ®åŒ…ï¼Œä»¥æ¸…é™¤è¯¥å®¢æˆ·ç«¯æ‰€æœ‰è¿˜æœªè¯†åˆ«çš„è¾“å…¥ç¼“å†²ï¼Œä»¥å…è¿™äº›æ•°æ®è¢«æœåŠ¡å™¨ä¸Šçš„åº”ç”¨ç¨‹åºè¯»å–å¹¶å¹²æ‰°åè€…ã€‚</p><h4 id="400-Bad-Request"><a href="#400-Bad-Request" class="headerlink" title="400 Bad Request"></a>400 Bad Request</h4><p>â€‹    ç”±äºåŒ…å«è¯­æ³•é”™è¯¯ï¼Œå½“å‰è¯·æ±‚æ— æ³•è¢«æœåŠ¡å™¨ç†è§£ã€‚é™¤éè¿›è¡Œä¿®æ”¹ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¸åº”è¯¥é‡å¤æäº¤è¿™ä¸ªè¯·æ±‚ã€‚</p><h4 id="401-Unauthorized"><a href="#401-Unauthorized" class="headerlink" title="401 Unauthorized"></a>401 Unauthorized</h4><p>â€‹    å½“å‰è¯·æ±‚éœ€è¦ç”¨æˆ·éªŒè¯ã€‚è¯¥å“åº”å¿…é¡»åŒ…å«ä¸€ä¸ªé€‚ç”¨äºè¢«è¯·æ±‚èµ„æºçš„WWW-Authenticateä¿¡æ¯å¤´ç”¨ä»¥è¯¢é—®ç”¨æˆ·ä¿¡æ¯ã€‚å®¢æˆ·ç«¯å¯ä»¥é‡å¤æäº¤ä¸€ä¸ªåŒ…å«æ°å½“çš„Authorizationå¤´ä¿¡æ¯çš„è¯·æ±‚ã€‚å¦‚æœå½“å‰è¯·æ±‚å·²ç»åŒ…å«äº†Authorizationè¯ä¹¦ï¼Œé‚£ä¹ˆ401å“åº”ä»£è¡¨ç€æœåŠ¡å™¨éªŒè¯å·²ç»æ‹’ç»äº†é‚£äº›è¯ä¹¦ã€‚å¦‚æœ401å“åº”åŒ…å«äº†ä¸å‰ä¸€ä¸ªå“åº”ç›¸åŒçš„èº«ä»½éªŒè¯è¯¢é—®ï¼Œä¸”æµè§ˆå™¨å·²ç»è‡³å°‘å°è¯•äº†ä¸€æ¬¡éªŒè¯ï¼Œé‚£ä¹ˆæµè§ˆå™¨åº”å½“å‘ç”¨æˆ·å±•ç¤ºå“åº”ä¸­åŒ…å«çš„å®ä½“ä¿¡æ¯ï¼Œå› ä¸ºè¿™ä¸ªå®ä½“ä¿¡æ¯ä¸­å¯èƒ½åŒ…å«äº†ç›¸å…³è¯Šæ–­ä¿¡æ¯ã€‚å‚è§RFC 2617ã€‚</p><h4 id="402-Payment-Required"><a href="#402-Payment-Required" class="headerlink" title="402 Payment Required"></a>402 Payment Required</h4><p>â€‹    è¯¥çŠ¶æ€ç æ˜¯ä¸ºäº†å°†æ¥å¯èƒ½çš„éœ€æ±‚è€Œé¢„ç•™çš„ã€‚</p><h4 id="403-Forbidden"><a href="#403-Forbidden" class="headerlink" title="403 Forbidden"></a>403 Forbidden</h4><p>â€‹    æœåŠ¡å™¨å·²ç»ç†è§£è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æ‰§è¡Œå®ƒã€‚ä¸401å“åº”ä¸åŒçš„æ˜¯ï¼Œèº«ä»½éªŒè¯å¹¶ä¸èƒ½æä¾›ä»»ä½•å¸®åŠ©ï¼Œè€Œä¸”è¿™ä¸ªè¯·æ±‚ä¹Ÿä¸åº”è¯¥è¢«é‡å¤æäº¤ã€‚å¦‚æœè¿™ä¸æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œè€Œä¸”æœåŠ¡å™¨å¸Œæœ›èƒ½å¤Ÿè®²æ¸…æ¥šä¸ºä½•è¯·æ±‚ä¸èƒ½è¢«æ‰§è¡Œï¼Œé‚£ä¹ˆå°±åº”è¯¥åœ¨å®ä½“å†…æè¿°æ‹’ç»çš„åŸå› ã€‚å½“ç„¶æœåŠ¡å™¨ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ª404å“åº”ï¼Œå‡å¦‚å®ƒä¸å¸Œæœ›è®©å®¢æˆ·ç«¯è·å¾—ä»»ä½•ä¿¡æ¯ã€‚</p><h4 id="404-Not-Found"><a href="#404-Not-Found" class="headerlink" title="404 Not Found"></a>404 Not Found</h4><p>â€‹    è¯·æ±‚å¤±è´¥ï¼Œè¯·æ±‚æ‰€å¸Œæœ›å¾—åˆ°çš„èµ„æºæœªè¢«åœ¨æœåŠ¡å™¨ä¸Šå‘ç°ã€‚æ²¡æœ‰ä¿¡æ¯èƒ½å¤Ÿå‘Šè¯‰ç”¨æˆ·è¿™ä¸ªçŠ¶å†µåˆ°åº•æ˜¯æš‚æ—¶çš„è¿˜æ˜¯æ°¸ä¹…çš„ã€‚å‡å¦‚æœåŠ¡å™¨çŸ¥é“æƒ…å†µçš„è¯ï¼Œåº”å½“ä½¿ç”¨410çŠ¶æ€ç æ¥å‘ŠçŸ¥æ—§èµ„æºå› ä¸ºæŸäº›å†…éƒ¨çš„é…ç½®æœºåˆ¶é—®é¢˜ï¼Œå·²ç»æ°¸ä¹…çš„ä¸å¯ç”¨ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å¯ä»¥è·³è½¬çš„åœ°å€ã€‚404è¿™ä¸ªçŠ¶æ€ç è¢«å¹¿æ³›åº”ç”¨äºå½“æœåŠ¡å™¨ä¸æƒ³æ­ç¤ºåˆ°åº•ä¸ºä½•è¯·æ±‚è¢«æ‹’ç»æˆ–è€…æ²¡æœ‰å…¶ä»–é€‚åˆçš„å“åº”å¯ç”¨çš„æƒ…å†µä¸‹ã€‚</p><h4 id="405-Method-Not-Allowed"><a href="#405-Method-Not-Allowed" class="headerlink" title="405 Method Not Allowed"></a>405 Method Not Allowed</h4><p>â€‹    è¯·æ±‚è¡Œä¸­æŒ‡å®šçš„è¯·æ±‚æ–¹æ³•ä¸èƒ½è¢«ç”¨äºè¯·æ±‚ç›¸åº”çš„èµ„æºã€‚è¯¥å“åº”å¿…é¡»è¿”å›ä¸€ä¸ªAllowå¤´ä¿¡æ¯ç”¨ä»¥è¡¨ç¤ºå‡ºå½“å‰èµ„æºèƒ½å¤Ÿæ¥å—çš„è¯·æ±‚æ–¹æ³•çš„åˆ—è¡¨ã€‚</p><p>â€‹    é‰´äºPUTï¼ŒDELETEæ–¹æ³•ä¼šå¯¹æœåŠ¡å™¨ä¸Šçš„èµ„æºè¿›è¡Œå†™æ“ä½œï¼Œå› è€Œç»å¤§éƒ¨åˆ†çš„ç½‘é¡µæœåŠ¡å™¨éƒ½ä¸æ”¯æŒæˆ–è€…åœ¨é»˜è®¤é…ç½®ä¸‹ä¸å…è®¸ä¸Šè¿°è¯·æ±‚æ–¹æ³•ï¼Œå¯¹äºæ­¤ç±»è¯·æ±‚å‡ä¼šè¿”å›405é”™è¯¯ã€‚</p><h4 id="406-Not-Acceptable"><a href="#406-Not-Acceptable" class="headerlink" title="406 Not Acceptable"></a>406 Not Acceptable</h4><p>â€‹    è¯·æ±‚çš„èµ„æºçš„å†…å®¹ç‰¹æ€§æ— æ³•æ»¡è¶³è¯·æ±‚å¤´ä¸­çš„æ¡ä»¶ï¼Œå› è€Œæ— æ³•ç”Ÿæˆå“åº”å®ä½“ã€‚</p><p>â€‹    é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™è¯¥å“åº”å°±åº”å½“è¿”å›ä¸€ä¸ªåŒ…å«å¯ä»¥è®©ç”¨æˆ·æˆ–è€…æµè§ˆå™¨ä»ä¸­é€‰æ‹©æœ€åˆé€‚çš„å®ä½“ç‰¹æ€§ä»¥åŠåœ°å€åˆ—è¡¨çš„å®ä½“ã€‚å®ä½“çš„æ ¼å¼ç”±Content-Typeå¤´ä¸­å®šä¹‰çš„åª’ä½“ç±»å‹å†³å®šã€‚æµè§ˆå™¨å¯ä»¥æ ¹æ®æ ¼å¼åŠè‡ªèº«èƒ½åŠ›è‡ªè¡Œä½œå‡ºæœ€ä½³é€‰æ‹©ã€‚ä½†æ˜¯ï¼Œè§„èŒƒä¸­å¹¶æ²¡æœ‰å®šä¹‰ä»»ä½•ä½œå‡ºæ­¤ç±»è‡ªåŠ¨é€‰æ‹©çš„æ ‡å‡†ã€‚</p><h4 id="407-Proxy-Authentication-Required"><a href="#407-Proxy-Authentication-Required" class="headerlink" title="407 Proxy Authentication Required"></a>407 Proxy Authentication Required</h4><p>â€‹    ä¸401å“åº”ç±»ä¼¼ï¼Œåªä¸è¿‡å®¢æˆ·ç«¯å¿…é¡»åœ¨ä»£ç†æœåŠ¡å™¨ä¸Šè¿›è¡Œèº«ä»½éªŒè¯ã€‚ä»£ç†æœåŠ¡å™¨å¿…é¡»è¿”å›ä¸€ä¸ªProxy-Authenticateç”¨ä»¥è¿›è¡Œèº«ä»½è¯¢é—®ã€‚å®¢æˆ·ç«¯å¯ä»¥è¿”å›ä¸€ä¸ªProxy-Authorizationä¿¡æ¯å¤´ç”¨ä»¥éªŒè¯ã€‚å‚è§RFC 2617ã€‚</p><h4 id="408-Request-Timeout"><a href="#408-Request-Timeout" class="headerlink" title="408 Request Timeout"></a>408 Request Timeout</h4><p>â€‹    è¯·æ±‚è¶…æ—¶ã€‚å®¢æˆ·ç«¯æ²¡æœ‰åœ¨æœåŠ¡å™¨é¢„å¤‡ç­‰å¾…çš„æ—¶é—´å†…å®Œæˆä¸€ä¸ªè¯·æ±‚çš„å‘é€ã€‚å®¢æˆ·ç«¯å¯ä»¥éšæ—¶å†æ¬¡æäº¤è¿™ä¸€è¯·æ±‚è€Œæ— éœ€è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚</p><h4 id="409-Conflict"><a href="#409-Conflict" class="headerlink" title="409 Conflict"></a>409 Conflict</h4><p>â€‹    ç”±äºå’Œè¢«è¯·æ±‚çš„èµ„æºçš„å½“å‰çŠ¶æ€ä¹‹é—´å­˜åœ¨å†²çªï¼Œè¯·æ±‚æ— æ³•å®Œæˆã€‚è¿™ä¸ªä»£ç åªå…è®¸ç”¨åœ¨è¿™æ ·çš„æƒ…å†µä¸‹æ‰èƒ½è¢«ä½¿ç”¨ï¼šç”¨æˆ·è¢«è®¤ä¸ºèƒ½å¤Ÿè§£å†³å†²çªï¼Œå¹¶ä¸”ä¼šé‡æ–°æäº¤æ–°çš„è¯·æ±‚ã€‚è¯¥å“åº”åº”å½“åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯ä»¥ä¾¿ç”¨æˆ·å‘ç°å†²çªçš„æºå¤´ã€‚</p><p>â€‹    å†²çªé€šå¸¸å‘ç”Ÿäºå¯¹PUTè¯·æ±‚çš„å¤„ç†ä¸­ã€‚ä¾‹å¦‚ï¼Œåœ¨é‡‡ç”¨ç‰ˆæœ¬æ£€æŸ¥çš„ç¯å¢ƒä¸‹ï¼ŒæŸæ¬¡PUTæäº¤çš„å¯¹ç‰¹å®šèµ„æºçš„ä¿®æ”¹è¯·æ±‚æ‰€é™„å¸¦çš„ç‰ˆæœ¬ä¿¡æ¯ä¸ä¹‹å‰çš„æŸä¸ªï¼ˆç¬¬ä¸‰æ–¹ï¼‰è¯·æ±‚å‘å†²çªï¼Œé‚£ä¹ˆæ­¤æ—¶æœåŠ¡å™¨å°±åº”è¯¥è¿”å›ä¸€ä¸ª409é”™è¯¯ï¼Œå‘ŠçŸ¥ç”¨æˆ·è¯·æ±‚æ— æ³•å®Œæˆã€‚æ­¤æ—¶ï¼Œå“åº”å®ä½“ä¸­å¾ˆå¯èƒ½ä¼šåŒ…å«ä¸¤ä¸ªå†²çªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚æ¯”è¾ƒï¼Œä»¥ä¾¿ç”¨æˆ·é‡æ–°æäº¤å½’å¹¶ä»¥åçš„æ–°ç‰ˆæœ¬ã€‚</p><h4 id="410-Gone"><a href="#410-Gone" class="headerlink" title="410 Gone"></a>410 Gone</h4><p>â€‹    è¢«è¯·æ±‚çš„èµ„æºåœ¨æœåŠ¡å™¨ä¸Šå·²ç»ä¸å†å¯ç”¨ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å·²çŸ¥çš„è½¬å‘åœ°å€ã€‚è¿™æ ·çš„çŠ¶å†µåº”å½“è¢«è®¤ä¸ºæ˜¯æ°¸ä¹…æ€§çš„ã€‚å¦‚æœå¯èƒ½ï¼Œæ‹¥æœ‰é“¾æ¥ç¼–è¾‘åŠŸèƒ½çš„å®¢æˆ·ç«¯åº”å½“åœ¨è·å¾—ç”¨æˆ·è®¸å¯ååˆ é™¤æ‰€æœ‰æŒ‡å‘è¿™ä¸ªåœ°å€çš„å¼•ç”¨ã€‚å¦‚æœæœåŠ¡å™¨ä¸çŸ¥é“æˆ–è€…æ— æ³•ç¡®å®šè¿™ä¸ªçŠ¶å†µæ˜¯å¦æ˜¯æ°¸ä¹…çš„ï¼Œé‚£ä¹ˆå°±åº”è¯¥ä½¿ç”¨404çŠ¶æ€ç ã€‚é™¤éé¢å¤–è¯´æ˜ï¼Œå¦åˆ™è¿™ä¸ªå“åº”æ˜¯å¯ç¼“å­˜çš„ã€‚</p><p>â€‹    410å“åº”çš„ç›®çš„ä¸»è¦æ˜¯å¸®åŠ©ç½‘ç«™ç®¡ç†å‘˜ç»´æŠ¤ç½‘ç«™ï¼Œé€šçŸ¥ç”¨æˆ·è¯¥èµ„æºå·²ç»ä¸å†å¯ç”¨ï¼Œå¹¶ä¸”æœåŠ¡å™¨æ‹¥æœ‰è€…å¸Œæœ›æ‰€æœ‰æŒ‡å‘è¿™ä¸ªèµ„æºçš„è¿œç«¯è¿æ¥ä¹Ÿè¢«åˆ é™¤ã€‚è¿™ç±»äº‹ä»¶åœ¨é™æ—¶ã€å¢å€¼æœåŠ¡ä¸­å¾ˆæ™®éã€‚åŒæ ·ï¼Œ410å“åº”ä¹Ÿè¢«ç”¨äºé€šçŸ¥å®¢æˆ·ç«¯åœ¨å½“å‰æœåŠ¡å™¨ç«™ç‚¹ä¸Šï¼ŒåŸæœ¬å±äºæŸä¸ªä¸ªäººçš„èµ„æºå·²ç»ä¸å†å¯ç”¨ã€‚å½“ç„¶ï¼Œæ˜¯å¦éœ€è¦æŠŠæ‰€æœ‰æ°¸ä¹…ä¸å¯ç”¨çš„èµ„æºæ ‡è®°ä¸ºâ€™410 Goneâ€™ï¼Œä»¥åŠæ˜¯å¦éœ€è¦ä¿æŒæ­¤æ ‡è®°å¤šé•¿æ—¶é—´ï¼Œå®Œå…¨å–å†³äºæœåŠ¡å™¨æ‹¥æœ‰è€…ã€‚</p><h4 id="411-Length-Required"><a href="#411-Length-Required" class="headerlink" title="411 Length Required"></a>411 Length Required</h4><p>â€‹    æœåŠ¡å™¨æ‹’ç»åœ¨æ²¡æœ‰å®šä¹‰Content-Lengthå¤´çš„æƒ…å†µä¸‹æ¥å—è¯·æ±‚ã€‚åœ¨æ·»åŠ äº†è¡¨æ˜è¯·æ±‚æ¶ˆæ¯ä½“é•¿åº¦çš„æœ‰æ•ˆContent-Lengthå¤´ä¹‹åï¼Œå®¢æˆ·ç«¯å¯ä»¥å†æ¬¡æäº¤è¯¥è¯·æ±‚ã€‚</p><h4 id="412-Precondition-Failed"><a href="#412-Precondition-Failed" class="headerlink" title="412 Precondition Failed"></a>412 Precondition Failed</h4><p>â€‹    æœåŠ¡å™¨åœ¨éªŒè¯åœ¨è¯·æ±‚çš„å¤´å­—æ®µä¸­ç»™å‡ºå…ˆå†³æ¡ä»¶æ—¶ï¼Œæ²¡èƒ½æ»¡è¶³å…¶ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªã€‚è¿™ä¸ªçŠ¶æ€ç å…è®¸å®¢æˆ·ç«¯åœ¨è·å–èµ„æºæ—¶åœ¨è¯·æ±‚çš„å…ƒä¿¡æ¯ï¼ˆè¯·æ±‚å¤´å­—æ®µæ•°æ®ï¼‰ä¸­è®¾ç½®å…ˆå†³æ¡ä»¶ï¼Œä»¥æ­¤é¿å…è¯¥è¯·æ±‚æ–¹æ³•è¢«åº”ç”¨åˆ°å…¶å¸Œæœ›çš„å†…å®¹ä»¥å¤–çš„èµ„æºä¸Šã€‚</p><h4 id="413-Request-Entity-Too-Large"><a href="#413-Request-Entity-Too-Large" class="headerlink" title="413 Request Entity Too Large"></a>413 Request Entity Too Large</h4><p>â€‹    æœåŠ¡å™¨æ‹’ç»å¤„ç†å½“å‰è¯·æ±‚ï¼Œå› ä¸ºè¯¥è¯·æ±‚æäº¤çš„å®ä½“æ•°æ®å¤§å°è¶…è¿‡äº†æœåŠ¡å™¨æ„¿æ„æˆ–è€…èƒ½å¤Ÿå¤„ç†çš„èŒƒå›´ã€‚æ­¤ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨å¯ä»¥å…³é—­è¿æ¥ä»¥å…å®¢æˆ·ç«¯ç»§ç»­å‘é€æ­¤è¯·æ±‚ã€‚</p><p>â€‹    å¦‚æœè¿™ä¸ªçŠ¶å†µæ˜¯ä¸´æ—¶çš„ï¼ŒæœåŠ¡å™¨åº”å½“è¿”å›ä¸€ä¸ªRetry-Afterçš„å“åº”å¤´ï¼Œä»¥å‘ŠçŸ¥å®¢æˆ·ç«¯å¯ä»¥åœ¨å¤šå°‘æ—¶é—´ä»¥åé‡æ–°å°è¯•ã€‚</p><h4 id="414-Request-URI-Too-Long"><a href="#414-Request-URI-Too-Long" class="headerlink" title="414 Request-URI Too Long"></a>414 Request-URI Too Long</h4><p>â€‹    è¯·æ±‚çš„URIé•¿åº¦è¶…è¿‡äº†æœåŠ¡å™¨èƒ½å¤Ÿè§£é‡Šçš„é•¿åº¦ï¼Œå› æ­¤æœåŠ¡å™¨æ‹’ç»å¯¹è¯¥è¯·æ±‚æä¾›æœåŠ¡ã€‚è¿™æ¯”è¾ƒå°‘è§ï¼Œé€šå¸¸çš„æƒ…å†µåŒ…æ‹¬ï¼š</p><p>â€‹        æœ¬åº”ä½¿ç”¨POSTæ–¹æ³•çš„è¡¨å•æäº¤å˜æˆäº†GETæ–¹æ³•ï¼Œå¯¼è‡´æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆQuery Stringï¼‰è¿‡é•¿ã€‚</p><p>â€‹        é‡å®šå‘URIâ€œé»‘æ´â€ï¼Œä¾‹å¦‚æ¯æ¬¡é‡å®šå‘æŠŠæ—§çš„URIä½œä¸ºæ–°çš„URIçš„ä¸€éƒ¨åˆ†ï¼Œå¯¼è‡´åœ¨è‹¥å¹²æ¬¡é‡å®šå‘åURIè¶…é•¿ã€‚</p><p>â€‹        å®¢æˆ·ç«¯æ­£åœ¨å°è¯•åˆ©ç”¨æŸäº›æœåŠ¡å™¨ä¸­å­˜åœ¨çš„å®‰å…¨æ¼æ´æ”»å‡»æœåŠ¡å™¨ã€‚è¿™ç±»æœåŠ¡å™¨ä½¿ç”¨å›ºå®šé•¿åº¦çš„ç¼“å†²è¯»å–æˆ–æ“ä½œè¯·æ±‚çš„URIï¼Œå½“GETåçš„å‚æ•°è¶…è¿‡æŸä¸ªæ•°å€¼åï¼Œå¯èƒ½ä¼šäº§ç”Ÿç¼“å†²åŒºæº¢å‡ºï¼Œå¯¼è‡´ä»»æ„ä»£ç è¢«æ‰§è¡Œ[1]ã€‚æ²¡æœ‰æ­¤ç±»æ¼æ´çš„æœåŠ¡å™¨ï¼Œåº”å½“è¿”å›414çŠ¶æ€ç ã€‚</p><h4 id="415-Unsupported-Media-Type"><a href="#415-Unsupported-Media-Type" class="headerlink" title="415 Unsupported Media Type"></a>415 Unsupported Media Type</h4><p>â€‹    å¯¹äºå½“å‰è¯·æ±‚çš„æ–¹æ³•å’Œæ‰€è¯·æ±‚çš„èµ„æºï¼Œè¯·æ±‚ä¸­æäº¤çš„å®ä½“å¹¶ä¸æ˜¯æœåŠ¡å™¨ä¸­æ‰€æ”¯æŒçš„æ ¼å¼ï¼Œå› æ­¤è¯·æ±‚è¢«æ‹’ç»ã€‚</p><p>416 Requested Range Not Satisfiable</p><p>â€‹    å¦‚æœè¯·æ±‚ä¸­åŒ…å«äº†Rangeè¯·æ±‚å¤´ï¼Œå¹¶ä¸”Rangeä¸­æŒ‡å®šçš„ä»»ä½•æ•°æ®èŒƒå›´éƒ½ä¸å½“å‰èµ„æºçš„å¯ç”¨èŒƒå›´ä¸é‡åˆï¼ŒåŒæ—¶è¯·æ±‚ä¸­åˆæ²¡æœ‰å®šä¹‰If-Rangeè¯·æ±‚å¤´ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±åº”å½“è¿”å›416çŠ¶æ€ç ã€‚</p><p>â€‹    å‡å¦‚Rangeä½¿ç”¨çš„æ˜¯å­—èŠ‚èŒƒå›´ï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µå°±æ˜¯æŒ‡è¯·æ±‚æŒ‡å®šçš„æ‰€æœ‰æ•°æ®èŒƒå›´çš„é¦–å­—èŠ‚ä½ç½®éƒ½è¶…è¿‡äº†å½“å‰èµ„æºçš„é•¿åº¦ã€‚æœåŠ¡å™¨ä¹Ÿåº”å½“åœ¨è¿”å›416çŠ¶æ€ç çš„åŒæ—¶ï¼ŒåŒ…å«ä¸€ä¸ªContent-Rangeå®ä½“å¤´ï¼Œç”¨ä»¥æŒ‡æ˜å½“å‰èµ„æºçš„é•¿åº¦ã€‚è¿™ä¸ªå“åº”ä¹Ÿè¢«ç¦æ­¢ä½¿ç”¨multipart/byterangesä½œä¸ºå…¶Content-Typeã€‚</p><h4 id="417-Expectation-Failed"><a href="#417-Expectation-Failed" class="headerlink" title="417 Expectation Failed"></a>417 Expectation Failed</h4><p>â€‹    åœ¨è¯·æ±‚å¤´Expectä¸­æŒ‡å®šçš„é¢„æœŸå†…å®¹æ— æ³•è¢«æœåŠ¡å™¨æ»¡è¶³ï¼Œæˆ–è€…è¿™ä¸ªæœåŠ¡å™¨æ˜¯ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œå®ƒæœ‰æ˜æ˜¾çš„è¯æ®è¯æ˜åœ¨å½“å‰è·¯ç”±çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ŒExpectçš„å†…å®¹æ— æ³•è¢«æ»¡è¶³ã€‚</p><h4 id="418-Iâ€™m-a-teapot"><a href="#418-Iâ€™m-a-teapot" class="headerlink" title="418 Iâ€™m a teapot"></a>418 Iâ€™m a teapot</h4><p>â€‹    æœ¬æ“ä½œç æ˜¯åœ¨1998å¹´ä½œä¸ºIETFçš„ä¼ ç»Ÿæ„šäººèŠ‚ç¬‘è¯, åœ¨RFC 2324è¶…æ–‡æœ¬å’–å•¡å£¶æ§åˆ¶åè®®ä¸­å®šä¹‰çš„ï¼Œå¹¶ä¸éœ€è¦åœ¨çœŸå®çš„HTTPæœåŠ¡å™¨ä¸­å®šä¹‰ã€‚</p><h4 id="421-There-are-too-many-connections-from-your-internet-address"><a href="#421-There-are-too-many-connections-from-your-internet-address" class="headerlink" title="421 There are too many connections from your internet address"></a>421 There are too many connections from your internet address</h4><p>â€‹    ä»å½“å‰å®¢æˆ·ç«¯æ‰€åœ¨çš„IPåœ°å€åˆ°æœåŠ¡å™¨çš„è¿æ¥æ•°è¶…è¿‡äº†æœåŠ¡å™¨è®¸å¯çš„æœ€å¤§èŒƒå›´ã€‚é€šå¸¸ï¼Œè¿™é‡Œçš„IPåœ°å€æŒ‡çš„æ˜¯ä»æœåŠ¡å™¨ä¸Šçœ‹åˆ°çš„å®¢æˆ·ç«¯åœ°å€ï¼ˆæ¯”å¦‚ç”¨æˆ·çš„ç½‘å…³æˆ–è€…ä»£ç†æœåŠ¡å™¨åœ°å€ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿æ¥æ•°çš„è®¡ç®—å¯èƒ½æ¶‰åŠåˆ°ä¸æ­¢ä¸€ä¸ªç»ˆç«¯ç”¨æˆ·ã€‚</p><h4 id="422-Unprocessable-Entity"><a href="#422-Unprocessable-Entity" class="headerlink" title="422 Unprocessable Entity"></a>422 Unprocessable Entity</h4><p>â€‹    è¯·æ±‚æ ¼å¼æ­£ç¡®ï¼Œä½†æ˜¯ç”±äºå«æœ‰è¯­ä¹‰é”™è¯¯ï¼Œæ— æ³•å“åº”ã€‚ï¼ˆRFC 4918 WebDAVï¼‰</p><h4 id="423-Locked"><a href="#423-Locked" class="headerlink" title="423 Locked"></a>423 Locked</h4><p>â€‹    å½“å‰èµ„æºè¢«é”å®šã€‚ï¼ˆRFC 4918 WebDAVï¼‰</p><h4 id="424-Failed-Dependency"><a href="#424-Failed-Dependency" class="headerlink" title="424 Failed Dependency"></a>424 Failed Dependency</h4><p>â€‹    ç”±äºä¹‹å‰çš„æŸä¸ªè¯·æ±‚å‘ç”Ÿçš„é”™è¯¯ï¼Œå¯¼è‡´å½“å‰è¯·æ±‚å¤±è´¥ï¼Œä¾‹å¦‚PROPPATCHã€‚ï¼ˆRFC 4918 WebDAVï¼‰</p><h4 id="425-Unordered-Collection"><a href="#425-Unordered-Collection" class="headerlink" title="425 Unordered Collection"></a>425 Unordered Collection</h4><p>â€‹    åœ¨WebDav Advanced Collectionsè‰æ¡ˆä¸­å®šä¹‰ï¼Œä½†æ˜¯æœªå‡ºç°åœ¨ã€ŠWebDAVé¡ºåºé›†åè®®ã€‹ï¼ˆRFC 3658ï¼‰ä¸­ã€‚</p><h4 id="426-Upgrade-Required"><a href="#426-Upgrade-Required" class="headerlink" title="426 Upgrade Required"></a>426 Upgrade Required</h4><p>â€‹    å®¢æˆ·ç«¯åº”å½“åˆ‡æ¢åˆ°TLS/1.0ã€‚ï¼ˆRFC 2817ï¼‰</p><h4 id="449-Retry-With"><a href="#449-Retry-With" class="headerlink" title="449 Retry With"></a>449 Retry With</h4><p>â€‹    ç”±å¾®è½¯æ‰©å±•ï¼Œä»£è¡¨è¯·æ±‚åº”å½“åœ¨æ‰§è¡Œå®Œé€‚å½“çš„æ“ä½œåè¿›è¡Œé‡è¯•ã€‚</p><h3 id="5xxæœåŠ¡å™¨é”™è¯¯"><a href="#5xxæœåŠ¡å™¨é”™è¯¯" class="headerlink" title="5xxæœåŠ¡å™¨é”™è¯¯"></a>5xxæœåŠ¡å™¨é”™è¯¯</h3><p>â€‹    è¿™ç±»çŠ¶æ€ç ä»£è¡¨äº†æœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­æœ‰é”™è¯¯æˆ–è€…å¼‚å¸¸çŠ¶æ€å‘ç”Ÿï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æœåŠ¡å™¨æ„è¯†åˆ°ä»¥å½“å‰çš„è½¯ç¡¬ä»¶èµ„æºæ— æ³•å®Œæˆå¯¹è¯·æ±‚çš„å¤„ç†ã€‚é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™æœåŠ¡å™¨åº”å½“åŒ…å«ä¸€ä¸ªè§£é‡Šå½“å‰é”™è¯¯çŠ¶æ€ä»¥åŠè¿™ä¸ªçŠ¶å†µæ˜¯ä¸´æ—¶çš„è¿˜æ˜¯æ°¸ä¹…çš„è§£é‡Šä¿¡æ¯å®ä½“ã€‚æµè§ˆå™¨åº”å½“å‘ç”¨æˆ·å±•ç¤ºä»»ä½•åœ¨å½“å‰å“åº”ä¸­è¢«åŒ…å«çš„å®ä½“ã€‚</p><p>â€‹    è¿™äº›çŠ¶æ€ç é€‚ç”¨äºä»»ä½•å“åº”æ–¹æ³•ã€‚</p><h4 id="500-Internal-Server-Error"><a href="#500-Internal-Server-Error" class="headerlink" title="500 Internal Server Error"></a>500 Internal Server Error</h4><p>â€‹    æœåŠ¡å™¨é‡åˆ°äº†ä¸€ä¸ªæœªæ›¾é¢„æ–™çš„çŠ¶å†µï¼Œå¯¼è‡´äº†å®ƒæ— æ³•å®Œæˆå¯¹è¯·æ±‚çš„å¤„ç†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªé—®é¢˜éƒ½ä¼šåœ¨æœåŠ¡å™¨çš„ç¨‹åºç å‡ºé”™æ—¶å‡ºç°ã€‚</p><h4 id="501-Not-Implemented"><a href="#501-Not-Implemented" class="headerlink" title="501 Not Implemented"></a>501 Not Implemented</h4><p>â€‹    æœåŠ¡å™¨ä¸æ”¯æŒå½“å‰è¯·æ±‚æ‰€éœ€è¦çš„æŸä¸ªåŠŸèƒ½ã€‚å½“æœåŠ¡å™¨æ— æ³•è¯†åˆ«è¯·æ±‚çš„æ–¹æ³•ï¼Œå¹¶ä¸”æ— æ³•æ”¯æŒå…¶å¯¹ä»»ä½•èµ„æºçš„è¯·æ±‚ã€‚</p><h4 id="502-Bad-Gateway"><a href="#502-Bad-Gateway" class="headerlink" title="502 Bad Gateway"></a>502 Bad Gateway</h4><p>â€‹    ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œä»ä¸Šæ¸¸æœåŠ¡å™¨æ¥æ”¶åˆ°æ— æ•ˆçš„å“åº”ã€‚</p><h4 id="503-Service-Unavailable"><a href="#503-Service-Unavailable" class="headerlink" title="503 Service Unavailable"></a>503 Service Unavailable</h4><p>â€‹    ç”±äºä¸´æ—¶çš„æœåŠ¡å™¨ç»´æŠ¤æˆ–è€…è¿‡è½½ï¼ŒæœåŠ¡å™¨å½“å‰æ— æ³•å¤„ç†è¯·æ±‚ã€‚è¿™ä¸ªçŠ¶å†µæ˜¯ä¸´æ—¶çš„ï¼Œå¹¶ä¸”å°†åœ¨ä¸€æ®µæ—¶é—´ä»¥åæ¢å¤ã€‚å¦‚æœèƒ½å¤Ÿé¢„è®¡å»¶è¿Ÿæ—¶é—´ï¼Œé‚£ä¹ˆå“åº”ä¸­å¯ä»¥åŒ…å«ä¸€ä¸ªRetry-Afterå¤´ç”¨ä»¥æ ‡æ˜è¿™ä¸ªå»¶è¿Ÿæ—¶é—´ã€‚å¦‚æœæ²¡æœ‰ç»™å‡ºè¿™ä¸ªRetry-Afterä¿¡æ¯ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯åº”å½“ä»¥å¤„ç†500å“åº”çš„æ–¹å¼å¤„ç†å®ƒã€‚</p><h4 id="504-Gateway-Timeout"><a href="#504-Gateway-Timeout" class="headerlink" title="504 Gateway Timeout"></a>504 Gateway Timeout</h4><p>â€‹    ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œæœªèƒ½åŠæ—¶ä»ä¸Šæ¸¸æœåŠ¡å™¨ï¼ˆURIæ ‡è¯†å‡ºçš„æœåŠ¡å™¨ï¼Œä¾‹å¦‚HTTPã€FTPã€LDAPï¼‰æˆ–è€…è¾…åŠ©æœåŠ¡å™¨ï¼ˆä¾‹å¦‚DNSï¼‰æ”¶åˆ°å“åº”ã€‚</p><p>â€‹    æ³¨æ„ï¼šæŸäº›ä»£ç†æœåŠ¡å™¨åœ¨DNSæŸ¥è¯¢è¶…æ—¶æ—¶ä¼šè¿”å›400æˆ–è€…500é”™è¯¯</p><h4 id="505-HTTP-Version-Not-Supported"><a href="#505-HTTP-Version-Not-Supported" class="headerlink" title="505 HTTP Version Not Supported"></a>505 HTTP Version Not Supported</h4><p>â€‹    æœåŠ¡å™¨ä¸æ”¯æŒï¼Œæˆ–è€…æ‹’ç»æ”¯æŒåœ¨è¯·æ±‚ä¸­ä½¿ç”¨çš„HTTPç‰ˆæœ¬ã€‚è¿™æš—ç¤ºç€æœåŠ¡å™¨ä¸èƒ½æˆ–ä¸æ„¿ä½¿ç”¨ä¸å®¢æˆ·ç«¯ç›¸åŒçš„ç‰ˆæœ¬ã€‚å“åº”ä¸­åº”å½“åŒ…å«ä¸€ä¸ªæè¿°äº†ä¸ºä½•ç‰ˆæœ¬ä¸è¢«æ”¯æŒä»¥åŠæœåŠ¡å™¨æ”¯æŒå“ªäº›åè®®çš„å®ä½“ã€‚</p><h4 id="506-Variant-Also-Negotiates"><a href="#506-Variant-Also-Negotiates" class="headerlink" title="506 Variant Also Negotiates"></a>506 Variant Also Negotiates</h4><p>â€‹    ç”±ã€Šé€æ˜å†…å®¹åå•†åè®®ã€‹ï¼ˆRFC 2295ï¼‰æ‰©å±•ï¼Œä»£è¡¨æœåŠ¡å™¨å­˜åœ¨å†…éƒ¨é…ç½®é”™è¯¯ï¼šè¢«è¯·æ±‚çš„åå•†å˜å…ƒèµ„æºè¢«é…ç½®ä¸ºåœ¨é€æ˜å†…å®¹åå•†ä¸­ä½¿ç”¨è‡ªå·±ï¼Œå› æ­¤åœ¨ä¸€ä¸ªåå•†å¤„ç†ä¸­ä¸æ˜¯ä¸€ä¸ªåˆé€‚çš„é‡ç‚¹ã€‚</p><h4 id="507-Insufficient-Storage"><a href="#507-Insufficient-Storage" class="headerlink" title="507 Insufficient Storage"></a>507 Insufficient Storage</h4><p>â€‹    æœåŠ¡å™¨æ— æ³•å­˜å‚¨å®Œæˆè¯·æ±‚æ‰€å¿…é¡»çš„å†…å®¹ã€‚è¿™ä¸ªçŠ¶å†µè¢«è®¤ä¸ºæ˜¯ä¸´æ—¶çš„ã€‚WebDAVï¼ˆRFC 4918ï¼‰</p><h4 id="509-Bandwidth-Limit-Exceeded"><a href="#509-Bandwidth-Limit-Exceeded" class="headerlink" title="509 Bandwidth Limit Exceeded"></a>509 Bandwidth Limit Exceeded</h4><p>â€‹    æœåŠ¡å™¨è¾¾åˆ°å¸¦å®½é™åˆ¶ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªå®˜æ–¹çš„çŠ¶æ€ç ï¼Œä½†æ˜¯ä»è¢«å¹¿æ³›ä½¿ç”¨ã€‚</p><h4 id="510-Not-Extended"><a href="#510-Not-Extended" class="headerlink" title="510 Not Extended"></a>510 Not Extended</h4><p>â€‹    è·å–èµ„æºæ‰€éœ€è¦çš„ç­–ç•¥å¹¶æ²¡æœ‰æ²¡æ»¡è¶³ã€‚</p>]]></content>
      
      
      
        <tags>
            
            <tag> ç½‘ç»œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ—¥å¸¸åˆ†äº«æ­Œå•</title>
      <link href="/1000/01/01/Music/"/>
      <url>/1000/01/01/Music/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><p>è¿™ç¯‡éšè—çš„å¾ˆæ·±ï¼Œåªç»™æœ‰ç¼˜äººï¼Œå“ˆå“ˆå“ˆâ€¦â€¦</p><p>åˆ†äº«æœ€è¿‘å¬çš„éŸ³ä¹ï¼š</p><h4 id="ã€½ï¸-ç‹è²-ã€Šç™¾å¹´å­¤å¯‚ã€‹"><a href="#ã€½ï¸-ç‹è²-ã€Šç™¾å¹´å­¤å¯‚ã€‹" class="headerlink" title="ã€½ï¸ ç‹è² - ã€Šç™¾å¹´å­¤å¯‚ã€‹"></a>ã€½ï¸ ç‹è² - <strong>ã€Šç™¾å¹´å­¤å¯‚ã€‹</strong></h4><p>æ—å¤•ä½œè¯çš„ä¸€é¦–æ­Œï¼Œåˆ›ä½œèƒŒæ™¯å’±ä¸äº†è§£ï¼Œä½†å¬èµ·æ¥ç¡®å®æ„Ÿè§‰å¤§æ°”ç£…ç¤´ã€‚ä¹‹å‰æ²¡æ€ä¹ˆç•™æ„ï¼Œä½†ä»Šå¹´åå¤å¾ªç¯å¬äº†ä¸€é˜µå„¿ã€‚æœ€å–œæ¬¢è¿™ä¸¤æ®µè¯å„¿ï¼š</p><blockquote><p>å¿ƒå±äºä½ çš„ æˆ‘å€Ÿæ¥å¯„æ‰˜</p><p>å´å˜æˆæˆ‘çš„å¿ƒé­”</p><p>ä½ å±äºè°çš„ æˆ‘åˆšå¥½ç»è¿‡</p><p>å´å¸¦æ¥æ½®èµ·æ½®è½</p><p>â€¦</p><p>èƒŒå½±æ˜¯çœŸçš„ äººæ˜¯å‡çš„ æ²¡ä»€ä¹ˆæ‰§ç€</p><p>ä¸€ç™¾å¹´å‰ ä½ ä¸æ˜¯ä½  æˆ‘ä¸æ˜¯æˆ‘</p><p>æ‚²å“€æ˜¯çœŸçš„ æ³ªæ˜¯å‡çš„ æœ¬æ¥æ²¡å› æœ</p><p>ä¸€ç™¾å¹´å æ²¡æœ‰ä½  ä¹Ÿæ²¡æœ‰æˆ‘</p><p>â€¦</p><p>é£å±äºå¤©çš„ æˆ‘å€Ÿæ¥å¹å¹</p><p>å´å¹èµ·äººé—´çƒŸç«</p><p>å¤©å±äºè°çš„ æˆ‘å€Ÿæ¥æ¬£èµ</p><p>å´çœ‹åˆ°ä½ çš„è½®å»“</p><p>â€¦</p></blockquote><p>å¬æ¥åŠè‡ªå·±çš„ï¼šåšäººè¦æ‹¿å¾—èµ·æ”¾å¾—ä¸‹ã€‚å¬å®Œä¹Ÿç¡®å®å„æ–¹é¢çœ‹å¼€ä¸€äº›ã€‚æ˜å¹´å¹²å·´çˆ¹~ğŸ’ª</p><h4 id="â˜„ï¸-å¼ å­¦å‹-ã€Šæƒ…ç½‘ã€‹"><a href="#â˜„ï¸-å¼ å­¦å‹-ã€Šæƒ…ç½‘ã€‹" class="headerlink" title="â˜„ï¸ å¼ å­¦å‹ - ã€Šæƒ…ç½‘ã€‹"></a>â˜„ï¸ å¼ å­¦å‹ - <strong>ã€Šæƒ…ç½‘ã€‹</strong></h4><p>è½¦é‡Œç”µå°æ”¾çš„æ—¶å€™ï¼Œè¢«è¿™ç§ç•¥å¸¦å“€æ€¨çš„åŸå”±å¸å¼•äº†ï¼Œäºæ˜¯æ¡æ¥å¬äº†å‡ å¤©ã€‚ä¸å¾—ä¸è¯´ï¼Œè¿˜æ˜¯è€æ­Œæœ‰å‘³é“ã€‚</p><blockquote><p>è€Œä½ æ˜¯ä¸€å¼ æ— è¾¹æ— é™…çš„ç½‘<br>è½»æ˜“å°±æŠŠæˆ‘å›°åœ¨ç½‘ä¸­å¤®<br>æˆ‘è¶Šé™·è¶Šæ·±è¶Šè¿·æƒ˜<br>è·¯è¶Šèµ°è¶Šè¿œè¶Šæ¼«é•¿</p><p>â€¦</p></blockquote><h4 id="ğŸ–•-xxx-ã€Šå®‰å’Œæ¡¥ã€‹"><a href="#ğŸ–•-xxx-ã€Šå®‰å’Œæ¡¥ã€‹" class="headerlink" title="ğŸ–• xxx - ã€Šå®‰å’Œæ¡¥ã€‹"></a>ğŸ–• xxx - <strong>ã€Šå®‰å’Œæ¡¥ã€‹</strong></h4><p>æ›¾ç»æœ‰ä¸ªäººè®©æˆ‘å¬ä¸€ä¸‹è¿™é¦–æ­Œ 01:58 çš„ä½ç½®â€¦å¬è¯´æ­Œæ‰‹å¸æ¯’ï¼Œé‚£æˆ‘å°±ä¸æŠŠä»–å†™åœ¨è¿™é‡Œäº†ã€‚</p><blockquote><p>æˆ‘çŸ¥é“è¿™ä¸ªä¸–ç•Œ<br>æ¯å¤©éƒ½æœ‰å¤ªå¤šé—æ†¾<br>æ‰€ä»¥ä½ å¥½å†è§</p><p>â€¦</p></blockquote><h4 id="ğŸ¤¦â€â™€ï¸-åº·å§†å£«ä¹å›¢-ã€Šä½ è¦å¦‚ä½•ï¼Œæˆ‘ä»¬å°±å¦‚ä½•ã€‹"><a href="#ğŸ¤¦â€â™€ï¸-åº·å§†å£«ä¹å›¢-ã€Šä½ è¦å¦‚ä½•ï¼Œæˆ‘ä»¬å°±å¦‚ä½•ã€‹" class="headerlink" title="ğŸ¤¦â€â™€ï¸ åº·å§†å£«ä¹å›¢ - ã€Šä½ è¦å¦‚ä½•ï¼Œæˆ‘ä»¬å°±å¦‚ä½•ã€‹"></a>ğŸ¤¦â€â™€ï¸ åº·å§†å£«ä¹å›¢ - <strong>ã€Šä½ è¦å¦‚ä½•ï¼Œæˆ‘ä»¬å°±å¦‚ä½•ã€‹</strong></h4><p>è¢«ä¸€å¥â€œåˆ«å“­å‰é¢ä¸€å®šæœ‰è·¯â€å¸å¼•æ¥çš„ï¼Œä¹Ÿç®—æ˜¯æ”¯æ’‘è‡ªå·±è¿™ä¸€å¹´å¤šçš„ä¸€é¦–æ­Œï¼Œä¸è¿‡ç¬¬ä¸€æ¬¡å¬å¥½åƒæ˜¯åœ¨ä¸€ä¸ªæç¬‘çŸ­è§†é¢‘é‡Œé¢ã€‚ğŸ˜‚</p><blockquote><p>å¦‚æœæˆ‘ ä¸å¯¹çœŸçš„å°±æ˜¯æˆ‘ æƒ³å¸¦ä½ é£<br>åˆ«å“­ å‰é¢ä¸€å®šæœ‰è·¯<br>ä»¿ä½› å¹¸ç¦åœ¨ä¸è¿œå¤„</p><p>â€¦</p></blockquote><h4 id="ğŸ¤–-é™ˆå¥•è¿…-ã€Šå­¤å‹‡è€…ã€‹"><a href="#ğŸ¤–-é™ˆå¥•è¿…-ã€Šå­¤å‹‡è€…ã€‹" class="headerlink" title="ğŸ¤– é™ˆå¥•è¿… - ã€Šå­¤å‹‡è€…ã€‹"></a>ğŸ¤– é™ˆå¥•è¿… - <strong>ã€Šå­¤å‹‡è€…ã€‹</strong></h4><p>å‰å‡ å¤©åŒäº‹æ¨èçš„ï¼Œå¬è¯´æ˜¯ä¸ºè‹±é›„è”ç›Ÿåˆ›ä½œçš„åŠ¨ç”»ä¸­æ–‡ä¸»é¢˜æ›²ã€‚å·è¿‡æ¥å¬äº†å¬ï¼Œæœ‰å‡ å¥æ­Œè¯æ¯”è¾ƒç¬¦åˆè‡ªå·±ç§¯æåˆå¼ºåŠ¿çš„æ€§æ ¼ï¼Œå“ˆå“ˆï¼Œå¾ˆå–œæ¬¢ï¼š</p><blockquote><p>çˆ±ä½ å­¤èº«èµ°æš—å··</p><p>çˆ±ä½ ä¸è·ªçš„æ¨¡æ ·</p><p>çˆ±ä½ å¯¹å³™è¿‡ç»æœ›</p><p>ä¸è‚¯å“­ä¸€åœº</p><p>çˆ±ä½ ç ´çƒ‚çš„è¡£è£³</p><p>å´æ•¢å µå‘½è¿çš„æª</p><p>çˆ±ä½ å’Œæˆ‘é‚£ä¹ˆåƒ</p><p>ç¼ºå£éƒ½ä¸€æ ·</p><p>å»å— é…å— è¿™è¤´è¤›çš„æŠ«é£</p><p>æˆ˜å— æˆ˜å•Š ä»¥æœ€å‘å¾®çš„æ¢¦</p></blockquote><h4 id="ğŸ¤·â€â™€ï¸-å‘Šäº”äºº-ã€Šçˆ±äººé”™è¿‡ã€‹"><a href="#ğŸ¤·â€â™€ï¸-å‘Šäº”äºº-ã€Šçˆ±äººé”™è¿‡ã€‹" class="headerlink" title="ğŸ¤·â€â™€ï¸ å‘Šäº”äºº - ã€Šçˆ±äººé”™è¿‡ã€‹"></a>ğŸ¤·â€â™€ï¸ å‘Šäº”äºº - <strong>ã€Šçˆ±äººé”™è¿‡ã€‹</strong></h4><p>å–œæ¬¢å¬è¿™ä¸ªå€’ä¸æ˜¯è¯´æ„Ÿå¹æƒ…å‘€çˆ±å‘€çš„ï¼Œæ˜¯å› ä¸ºè¿™ä¸¤å¥æ­Œè¯ï¼Œå“ˆå“ˆï¼š</p><blockquote><p>ä½ å¦ˆæ²¡æœ‰å‘Šè¯‰ä½ </p><p>æ’åˆ°äººè¦è¯´å¯¹ä¸èµ·</p></blockquote><h4 id="ğŸ¤º-æ±ªè‹æ³·-å¤§å¼ ä¼Ÿ-çš„-Live-ç‰ˆ-ã€Šå‰‘é­‚ã€‹"><a href="#ğŸ¤º-æ±ªè‹æ³·-å¤§å¼ ä¼Ÿ-çš„-Live-ç‰ˆ-ã€Šå‰‘é­‚ã€‹" class="headerlink" title="ğŸ¤º æ±ªè‹æ³·/å¤§å¼ ä¼Ÿ çš„ Live ç‰ˆ - ã€Šå‰‘é­‚ã€‹"></a>ğŸ¤º æ±ªè‹æ³·/å¤§å¼ ä¼Ÿ çš„ Live ç‰ˆ - <strong>ã€Šå‰‘é­‚ã€‹</strong></h4><blockquote><p>å±±å¤–è¿˜æœ‰å±±æ¯”å±±é«˜</p><p>åŠå±±è…°</p><p>ä¸€å£°æƒŠé›·æ‘‡æ™ƒæ ‘æ¢¢</p><p>äººå¤–è¿˜æœ‰äººå¿˜ä¸æ‰</p><p>â€¦</p></blockquote><h4 id="ğŸŒ-é‚“ç´«æ£‹-ã€ŠBang-Bangã€‹"><a href="#ğŸŒ-é‚“ç´«æ£‹-ã€ŠBang-Bangã€‹" class="headerlink" title="ğŸŒ é‚“ç´«æ£‹ - ã€ŠBang Bangã€‹"></a>ğŸŒ é‚“ç´«æ£‹ - <strong>ã€ŠBang Bangã€‹</strong></h4><p>æ®è¯´æ˜¯ç»™å°é»„äººå¤§ç”µå½±åšçš„ä¸»é¢˜æ›²ï¼Œä¿çš®åˆæ¬¢å¿«ã€‚</p><blockquote><p>ä»Šå¤©ä½ è¯´çˆ±ä¸Šæˆ‘<br>å°±æŠŠè‡ªå·±ä¸Šäº†é”<br>è¦æ˜¯åˆ«äººæ¥è¯±æƒ‘<br>é‚£å°±æƒ…æµ·èµ·é£æ³¢</p><p>â€¦</p></blockquote><h4 id="ğŸ‘-å‘¨æ°ä¼¦ã€æ¨ç‘ä»£-ã€Šç­‰ä½ ä¸‹è¯¾ã€‹"><a href="#ğŸ‘-å‘¨æ°ä¼¦ã€æ¨ç‘ä»£-ã€Šç­‰ä½ ä¸‹è¯¾ã€‹" class="headerlink" title="ğŸ‘ å‘¨æ°ä¼¦ã€æ¨ç‘ä»£ - ã€Šç­‰ä½ ä¸‹è¯¾ã€‹"></a>ğŸ‘ å‘¨æ°ä¼¦ã€æ¨ç‘ä»£ - <strong>ã€Šç­‰ä½ ä¸‹è¯¾ã€‹</strong></h4><p>å¬å¥½å¤šå¹´äº†ï¼Œä½†æ˜¯å› ä¸ºå‘¨è‘£å‘æ–°ä¸“è¾‘ï¼Œå¼€å§‹äºŒæ¬¡æ”¶è´¹äº†ã€‚ğŸ˜‚</p><blockquote><p>å½“æˆ‘å¼€å§‹å­¦ä¼šåšè›‹é¥¼<br>æ‰å‘ç°ä½ ä¸åƒæ—©é¤</p><p>â€¦</p><p>åœ¨äººæ¥äººå¾€æ‰¾å¯»ç€ä½ <br>å®ˆæŠ¤ç€ä½ ä¸æ±‚ç»“å±€</p><p>â€¦</p></blockquote><h4 id="ğŸ¥-Tank-ã€Šä¸‰å›½æ‹ã€‹"><a href="#ğŸ¥-Tank-ã€Šä¸‰å›½æ‹ã€‹" class="headerlink" title="ğŸ¥ Tank - ã€Šä¸‰å›½æ‹ã€‹"></a>ğŸ¥ Tank - <strong>ã€Šä¸‰å›½æ‹ã€‹</strong></h4><p>å°æ—¶å€™å¬çš„ï¼Œæ€€æ—§ä¸€ä¸‹ï¼Œå“ˆå“ˆï¼Œæš´éœ²å¹´é¾„äº†ã€‚</p><blockquote><p>ç­‰å¾…<del>è‰¯äººå½’æ¥é‚£ä¸€åˆ»<br>çœ¼</del>æ³ª~ä¸ºä½ å”±æ­Œ</p><p>â€¦</p></blockquote><h4 id="ğŸ»-å‘¨æ°ä¼¦-ã€Šæ–­äº†çš„å¼¦ã€‹"><a href="#ğŸ»-å‘¨æ°ä¼¦-ã€Šæ–­äº†çš„å¼¦ã€‹" class="headerlink" title="ğŸ» å‘¨æ°ä¼¦ - ã€Šæ–­äº†çš„å¼¦ã€‹"></a>ğŸ» å‘¨æ°ä¼¦ - <strong>ã€Šæ–­äº†çš„å¼¦ã€‹</strong></h4><blockquote><p>æˆ‘çªç„¶é‡Šæ€€çš„ç¬‘</p><p>â€¦</p></blockquote><p>çªç„¶é—´é†’æ‚Ÿäº†ä¸€ä¸ªäººã€ä¸‰ä¸¤ä¸ªäºº å†…å¿ƒæœ‰å¤šé˜´é™©ã€é˜´æš—ï¼Œåªæ€ªè‡ªå·±å¤ªè ¢ã€‚</p><h4 id="âš ï¸-å‘¨æ°ä¼¦-ã€Šé»‘è‰²æ¯›è¡£ã€‹"><a href="#âš ï¸-å‘¨æ°ä¼¦-ã€Šé»‘è‰²æ¯›è¡£ã€‹" class="headerlink" title="âš ï¸ å‘¨æ°ä¼¦ - ã€Šé»‘è‰²æ¯›è¡£ã€‹"></a>âš ï¸ å‘¨æ°ä¼¦ - <strong>ã€Šé»‘è‰²æ¯›è¡£ã€‹</strong></h4><blockquote><p>çœ‹ç€é‚£ç™½è‰²çš„èœ»èœ“ åœ¨ç©ºä¸­å¿˜äº†å‰è¿›</p><p>è¿˜èƒ½ä¸èƒ½ é‡æ–°ç¼–ç»‡ è„‘æµ·ä¸­èµ·æ¯›çƒçš„è®°å¿†</p><p>å†è¯´æˆ‘çˆ±ä½  å¯èƒ½é›¨ä¹Ÿä¸ä¼šåœ</p><p>â€¦</p></blockquote><p>å½“æ„è¯†åˆ°ç»“æœä¸å†é‡è¦çš„æ—¶å€™ï¼Œå®ˆä½é‚£ä¸€ç‚¹ç‚¹è‡ªä»¥ä¸ºçš„å›å¿†å’Œç¾å¥½å°±å¤Ÿäº†ï¼Œåªæ˜¯å›å¿†å†ä¹Ÿä¸ä½ æ— å…³äº†ã€‚</p><h4 id="ğŸŠ-å‘¨æ°ä¼¦-ã€Šå…°äº­åºã€‹"><a href="#ğŸŠ-å‘¨æ°ä¼¦-ã€Šå…°äº­åºã€‹" class="headerlink" title="ğŸŠ å‘¨æ°ä¼¦ - ã€Šå…°äº­åºã€‹"></a>ğŸŠ å‘¨æ°ä¼¦ - <strong>ã€Šå…°äº­åºã€‹</strong></h4><blockquote><p>â€¦</p><p>æ— å…³é£æœˆ æˆ‘é¢˜åºç­‰ä½ å›<br>æ‰‹ä¹¦æ— æ„§ æ— æƒ§äººé—´æ˜¯é<br>é›¨æ‰“è•‰å¶ åˆè§è§äº†å‡ å¤œ<br>æˆ‘ç­‰æ˜¥é›· æ¥æé†’ä½ çˆ±è°ã€‚</p></blockquote><hr>]]></content>
      
      
      
        <tags>
            
            <tag> æˆ‘ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>å›å¿†</title>
      <link href="/gallery/index.html"/>
      <url>/gallery/index.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="About-Me"><a href="#About-Me" class="headerlink" title="About Me"></a>About Me</h2><p>ä¸€ä¸ªå–œæ¬¢åƒæ©˜å­çš„ç¨‹åºå‘˜ğŸ‘©â€ğŸ’»ï¼š</p><ul><li>ç¬”åï¼šYYLittleCat</li><li>æ³•å·ï¼šè¿·</li><li>ç‰¹ç‚¹ï¼šæ˜çœ¸çš“é½¿ã€å·§ç¬‘å«£ç„¶</li><li>çˆ±å¥½ï¼šå‘¨æ˜Ÿé©°ã€åä¾¦æ¢æŸ¯å—</li><li>å® ç‰©ï¼šğŸˆã€ğŸˆã€ğŸ¢</li><li>èŒä¸šï¼šå…¨èœå·¥ç¨‹å¸ˆã€åŠä¸ªPM</li><li>å¹´é¾„ï¼šåˆä»£ç›®90å</li></ul><p>â€œå…³äºâ€ï¼Œæƒ³äº†å¾ˆä¹…ä¸çŸ¥é“å†™ç‚¹å„¿ä»€ä¹ˆï¼Œæˆ‘å°±æ˜¯ä¸€ä¸ªç®€ç®€å•å•çš„äººï¼Œå–œæ¬¢å’Œä¹è§‚çš„äººè°ˆå¿ƒã€å’Œåšé“çš„äººäº¤æœ‹å‹ã€å’Œé è°±çš„äººå…±äº‹ã€‚ä¸ºä»€ä¹ˆå–œæ¬¢åƒæ©˜å­ï¼Ÿå› ä¸ºä¸ç”¨æ´—å‘€ï¼Œå¾ˆå¤šäººéƒ½è¿™æ ·ä¸æ˜¯å—ï¼Œä¾‹å¦‚è èã€é¦™è•‰ã€è‰è“ï¼Œä½ çš„ç¬¬ä¸€é€‰æ‹©æ˜¯ä»€ä¹ˆï¼Ÿé¦™è•‰ã€‚å‰¥äº†çš®å°±å¯ä»¥åƒå˜›ï¼Œä½†å…¶å®æˆ‘æœ€çˆ±åƒçš„æ°´æœæ˜¯è èğŸå’Œè‰è“ğŸ“ã€‚</p><h2 id="Find-Me"><a href="#Find-Me" class="headerlink" title="Find Me"></a>Find Me</h2><ul><li><p>E-Mailï¼š<a href="mailto:&#122;&#x68;&#101;&#110;&#103;&#x79;&#x74;&#x5f;&#x39;&#49;&#x40;&#x31;&#x36;&#x33;&#46;&#99;&#x6f;&#x6d;">&#122;&#x68;&#101;&#110;&#103;&#x79;&#x74;&#x5f;&#x39;&#49;&#x40;&#x31;&#x36;&#x33;&#46;&#99;&#x6f;&#x6d;</a> | <a href="mailto:&#122;&#x68;&#101;&#x6e;&#x67;&#x79;&#x74;&#64;&#x66;&#x6f;&#120;&#109;&#x61;&#x69;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;">&#122;&#x68;&#101;&#x6e;&#x67;&#x79;&#x74;&#64;&#x66;&#x6f;&#120;&#109;&#x61;&#x69;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;</a></p></li><li><p>Githubï¼š<a href="https://github.com/ATommyGirl">ATommyGirl</a></p></li><li><p>ç¤¾äº¤ä¿¡æ¯ï¼š</p></li></ul><center>    <div style="display:inline-block;"><img src="/about/index/myicon.jpg" class width="100"></div>    <div style="display:inline-block;margin-left:10px;"><img src="/about/index/myicon.jpg" class width="100"></div></center><p>æ¬¢è¿æ–‡æ˜äº¤æµï¼</p><p>åŸæœ¬ï¼Œåœ¨è¿™é‡Œæ”¾çš„æ˜¯ä¸¤å¼ å¾®ä¿¡åç‰‡ï¼Œæ„åœ¨å¸Œæœ›æ‰€å‰©ä¸å¤šçš„ iOS å¼€å‘è€…å¯ä»¥æŠ±å›¢å–æš–ï¼Œä½†ä¹‹å‰æœ‰ä¸ªç¥å¨å¨çš„å¼€å‘è€…åŠ å¥½å‹ï¼Œç€å®æ¶å¿ƒåˆ°äº†æœ¬å–µï¼Œæœ¬å–µå±ç™½è‰²ï¼Œä¸æ„¿åœ¨æ±¡æ³¥çƒ‚æ²Ÿé‡Œæ…å’Œâ€¦â€¦æ€æ¥æƒ³å»è¿˜æ˜¯æŠŠå¾®ä¿¡åç‰‡ä¸‹çº¿äº†ï¼Œæœ‰éœ€è¦äº¤æµçš„æœ‹å‹ç•™æ„ E-Mail å’Œ Github çš„ä¿¡æ¯å§ï¼Œä¹Ÿå¯ä»¥åœ¨æœ€æ–°çš„æ–‡ç« è¯„è®ºä¸­ç•™è¨€ã€‚</p><h2 id="The-End"><a href="#The-End" class="headerlink" title="The End"></a>The End</h2><p>é€ç»™è¯»åˆ°è¿™é‡Œçš„ä½ ä¸€ä¸ªç¾ä¸½çš„æ—¥è½ï¼š</p><p><video controls src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/sundown.MOV" type="video/mp4">æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæ’­æ”¾è¯¥è§†é¢‘ï¼</video></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>æ ‡ç­¾ğŸ·</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><table><thead><tr><th align="center">ğŸ¤“ <a href="iOS">iOS</a></th><th align="center">ğŸ›  <a href="/tags/Xcode/">Xcode</a></th><th align="center">ğŸ”¨ <a href="pod">Pod</a></th></tr></thead><tbody><tr><td align="center">ğŸ˜œ <a href="/tags/7788/">7788</a></td><td align="center">ğŸ“– <a href="/tags/%E8%AF%BB%E4%B9%A6/">è¯»ä¹¦</a></td><td align="center">ğŸ•¸ <a href="/tags/%E7%BD%91%E7%BB%9C/">ç½‘ç»œ</a></td></tr><tr><td align="center">ğŸ’» <a href="/tags/Mac/">Mac</a></td><td align="center">ğŸ“® <a href="%E9%82%AE%E7%AE%B1">é‚®ç®±</a></td><td align="center">ğŸ¤¡ <a href="/tags/%E7%9E%8E%E6%89%AF/">çæ‰¯</a></td></tr><tr><td align="center">ğŸ“‘ <a href="WebView">WebView</a></td><td align="center">ğŸ˜ <a href="/tags/%E6%88%91/">æˆ‘</a></td><td align="center">ğŸ’¾ <a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/">æœåŠ¡å™¨</a></td></tr><tr><td align="center">ğŸ’¿ <a href="/tags/CentOS/">CentOS</a></td><td align="center"></td><td align="center"></td></tr></tbody></table>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>categories</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>search</title>
      <link href="/search/index.html"/>
      <url>/search/index.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>æ˜†æ˜</title>
      <link href="/gallery/%E6%98%86%E6%98%8E/index.html"/>
      <url>/gallery/%E6%98%86%E6%98%8E/index.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><a href="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/%E6%98%86%E6%98%8E/km_5.jpg">https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/%E6%98%86%E6%98%8E/km_5.jpg</a></p>]]></content>
      
    </entry>
    
    
  
</search>
