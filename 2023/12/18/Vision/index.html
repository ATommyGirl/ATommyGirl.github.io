<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Barcode&amp;#8195;&amp;#8195;â€Barcodeâ€ï¼ˆæ¡å½¢ç ï¼‰æ˜¯ä¸€ç§ç”¨äºå‚¨å­˜å’Œæ£€ç´¢æ•°æ®çš„å›¾å½¢æ ‡è¯†ç¬¦ã€‚å®ƒé€šå¸¸ç”±ä¸€ç³»åˆ—å®½åº¦å’Œé—´éš™ä¸åŒçš„æ¡å’Œç©ºç»„æˆï¼Œç”¨äºè¡¨ç¤ºæ•°å­—ã€å­—æ¯å’Œå…¶ä»–å­—ç¬¦ã€‚æ¡å½¢ç åœ¨å•†ä¸šã€ç‰©æµã€åº“å­˜ç®¡ç†å’Œå…¶ä»–é¢†åŸŸå¹¿æ³›åº”ç”¨ï¼Œä»¥æé«˜æ•°æ®çš„è¿½è¸ªå’Œç®¡ç†æ•ˆç‡ã€‚ æ¡å½¢ç çš„ä¸»è¦ç±»å‹åŒ…æ‹¬ä¸€ç»´ç ï¼ˆ1D Barcodeï¼‰å’ŒäºŒç»´ç ï¼ˆ2D Barcodeï¼‰ã€‚  ä¸€ç»´ç ï¼ˆ1D Barcodeï¼‰ï¼š ä¸€ç»´ç æ˜¯ç”±ä¸€ç³»åˆ—å®½">
<meta property="og:type" content="article">
<meta property="og:title" content="ä¸€ç å½’ä¸€ç ">
<meta property="og:url" content="https://tiantian.fyi/2023/12/18/Vision/index.html">
<meta property="og:site_name" content="ç™½å°å’ª">
<meta property="og:description" content="Barcode&amp;#8195;&amp;#8195;â€Barcodeâ€ï¼ˆæ¡å½¢ç ï¼‰æ˜¯ä¸€ç§ç”¨äºå‚¨å­˜å’Œæ£€ç´¢æ•°æ®çš„å›¾å½¢æ ‡è¯†ç¬¦ã€‚å®ƒé€šå¸¸ç”±ä¸€ç³»åˆ—å®½åº¦å’Œé—´éš™ä¸åŒçš„æ¡å’Œç©ºç»„æˆï¼Œç”¨äºè¡¨ç¤ºæ•°å­—ã€å­—æ¯å’Œå…¶ä»–å­—ç¬¦ã€‚æ¡å½¢ç åœ¨å•†ä¸šã€ç‰©æµã€åº“å­˜ç®¡ç†å’Œå…¶ä»–é¢†åŸŸå¹¿æ³›åº”ç”¨ï¼Œä»¥æé«˜æ•°æ®çš„è¿½è¸ªå’Œç®¡ç†æ•ˆç‡ã€‚ æ¡å½¢ç çš„ä¸»è¦ç±»å‹åŒ…æ‹¬ä¸€ç»´ç ï¼ˆ1D Barcodeï¼‰å’ŒäºŒç»´ç ï¼ˆ2D Barcodeï¼‰ã€‚  ä¸€ç»´ç ï¼ˆ1D Barcodeï¼‰ï¼š ä¸€ç»´ç æ˜¯ç”±ä¸€ç³»åˆ—å®½">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_4.jpg">
<meta property="og:image" content="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_6.PNG">
<meta property="og:image" content="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_7.PNG">
<meta property="og:image" content="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_1.jpg">
<meta property="og:image" content="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_2.jpg">
<meta property="og:image" content="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_3.jpg">
<meta property="og:image" content="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_8.PNG">
<meta property="og:image" content="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_9.PNG">
<meta property="og:image" content="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_5.jpg">
<meta property="og:image" content="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_10.jpg">
<meta property="og:image" content="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_10.jpg">
<meta property="og:image" content="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_10.jpg">
<meta property="og:image" content="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_10.jpg">
<meta property="og:image" content="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_10.jpg">
<meta property="article:published_time" content="2023-12-18T11:58:32.000Z">
<meta property="article:modified_time" content="2023-12-18T11:58:32.000Z">
<meta property="article:author" content="YYLittleCat">
<meta property="article:tag" content="iOS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_4.jpg">
    
    
      
        
          <link rel="shortcut icon" href="/images/mini-icon.svg">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>ä¸€ç å½’ä¸€ç </title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.0.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" "Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives">å½’æ¡£</a></li>
         
          <li><a href="/tags">æ ‡ç­¾</a></li>
         
          <li><a href="/about">å…³äº</a></li>
         
          <li><a href="/search/">æœç´¢</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" aria-label="ä¸‹ä¸€ç¯‡ " href="/2023/11/14/badman/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="è¿”å›é¡¶éƒ¨ " href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="åˆ†äº«æ–‡ç«  " href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">ä¸Šä¸€ç¯‡</span>
      <span id="i-next" class="info" style="display:none;">ä¸‹ä¸€ç¯‡</span>
      <span id="i-top" class="info" style="display:none;">è¿”å›é¡¶éƒ¨</span>
      <span id="i-share" class="info" style="display:none;">åˆ†äº«æ–‡ç« </span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://tiantian.fyi/2023/12/18/Vision/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://tiantian.fyi/2023/12/18/Vision/&text=ä¸€ç å½’ä¸€ç "><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://tiantian.fyi/2023/12/18/Vision/&title=ä¸€ç å½’ä¸€ç "><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://tiantian.fyi/2023/12/18/Vision/&is_video=false&description=ä¸€ç å½’ä¸€ç "><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=ä¸€ç å½’ä¸€ç &body=Check out this article: https://tiantian.fyi/2023/12/18/Vision/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://tiantian.fyi/2023/12/18/Vision/&title=ä¸€ç å½’ä¸€ç "><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://tiantian.fyi/2023/12/18/Vision/&title=ä¸€ç å½’ä¸€ç "><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://tiantian.fyi/2023/12/18/Vision/&title=ä¸€ç å½’ä¸€ç "><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://tiantian.fyi/2023/12/18/Vision/&title=ä¸€ç å½’ä¸€ç "><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://tiantian.fyi/2023/12/18/Vision/&name=ä¸€ç å½’ä¸€ç &description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://tiantian.fyi/2023/12/18/Vision/&t=ä¸€ç å½’ä¸€ç "><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Barcode"><span class="toc-number">1.</span> <span class="toc-text">Barcode</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#QR-Scanner"><span class="toc-number">2.</span> <span class="toc-text">QR Scanner</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vision"><span class="toc-number">3.</span> <span class="toc-text">Vision</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#VNImageRequestHandler"><span class="toc-number">3.1.</span> <span class="toc-text">VNImageRequestHandler</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E5%BD%A2%E7%A0%81%E7%9A%84%E8%83%8C%E6%99%AF%E8%89%B2"><span class="toc-number">3.2.</span> <span class="toc-text">æ¡å½¢ç çš„èƒŒæ™¯è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%8B%E5%8A%A8%E7%9A%84%E5%B0%8F%E7%AE%AD%E5%A4%B4"><span class="toc-number">3.3.</span> <span class="toc-text">å¾‹åŠ¨çš„å°ç®­å¤´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E7%9A%84%E5%B0%8F%E6%83%85%E6%80%80"><span class="toc-number">3.4.</span> <span class="toc-text">æˆ‘çš„å°æƒ…æ€€</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-number">4.</span> <span class="toc-text">ä»£ç </span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        ä¸€ç å½’ä¸€ç 
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">YYLittleCat</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2023-12-18T11:58:32.000Z" itemprop="datePublished">2023-12-18</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/iOS/" rel="tag">iOS</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <hr>
<h2 id="Barcode"><a href="#Barcode" class="headerlink" title="Barcode"></a>Barcode</h2><p>&#8195;&#8195;â€Barcodeâ€ï¼ˆæ¡å½¢ç ï¼‰æ˜¯ä¸€ç§ç”¨äºå‚¨å­˜å’Œæ£€ç´¢æ•°æ®çš„å›¾å½¢æ ‡è¯†ç¬¦ã€‚å®ƒé€šå¸¸ç”±ä¸€ç³»åˆ—å®½åº¦å’Œé—´éš™ä¸åŒçš„æ¡å’Œç©ºç»„æˆï¼Œç”¨äºè¡¨ç¤ºæ•°å­—ã€å­—æ¯å’Œå…¶ä»–å­—ç¬¦ã€‚æ¡å½¢ç åœ¨å•†ä¸šã€ç‰©æµã€åº“å­˜ç®¡ç†å’Œå…¶ä»–é¢†åŸŸå¹¿æ³›åº”ç”¨ï¼Œä»¥æé«˜æ•°æ®çš„è¿½è¸ªå’Œç®¡ç†æ•ˆç‡ã€‚</p>
<p>æ¡å½¢ç çš„ä¸»è¦ç±»å‹åŒ…æ‹¬ä¸€ç»´ç ï¼ˆ1D Barcodeï¼‰å’ŒäºŒç»´ç ï¼ˆ2D Barcodeï¼‰ã€‚</p>
<ol>
<li><strong>ä¸€ç»´ç ï¼ˆ1D Barcodeï¼‰ï¼š</strong> ä¸€ç»´ç æ˜¯ç”±ä¸€ç³»åˆ—å®½åº¦å’Œé—´éš™ä¸åŒçš„æ¡å’Œç©ºç»„æˆçš„å›¾å½¢ï¼Œç”¨äºè¡¨ç¤ºçº¿æ€§çš„æ•°æ®ã€‚ä¸€ç»´ç ä¸»è¦ç”¨äºè¡¨ç¤ºæ•°å­—ã€å­—æ¯å’Œå…¶ä»–ç‰¹å®šå­—ç¬¦ã€‚å¸¸è§çš„ä¸€ç»´ç ç±»å‹åŒ…æ‹¬Code 39ã€Code 128ã€UPCã€EANç­‰ã€‚</li>
<li><strong>äºŒç»´ç ï¼ˆ2D Barcodeï¼‰ï¼š</strong> äºŒç»´ç æ˜¯ç”±ä¸€ç³»åˆ—é»‘ç™½å—ç»„æˆçš„å›¾å½¢ï¼Œå¯ä»¥åœ¨æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šè¡¨ç¤ºæ•°æ®ã€‚ç›¸æ¯”ä¸€ç»´ç ï¼ŒäºŒç»´ç å¯ä»¥å­˜å‚¨æ›´å¤šçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€é“¾æ¥ã€å›¾åƒç­‰ã€‚å¸¸è§çš„äºŒç»´ç ç±»å‹åŒ…æ‹¬QR Codeã€Data Matrixã€Aztec Codeç­‰ã€‚</li>
</ol>
<p>&#8195;&#8195;ç”Ÿæ´»ä¸­æˆ‘ä»¬æåˆ°â€œæ¡å½¢ç â€ï¼Œå…¶å®å¤šæ•°åœºæ™¯æŒ‡çš„æ˜¯ä¸€ç»´çš„ã€‚ä¹‹å‰æ¥å…¥çš„å‚å•†é—®æˆ‘æœ€å¸¸ç”¨çš„æ¡å½¢ç æ˜¯å“ªç§ï¼Œç¡®å®é—®ç€æˆ‘äº†ï¼Œå“ˆå“ˆå“ˆã€‚</p>
<p>&#8195;&#8195;æ¡å½¢ç æ˜¯ä¸€ç§ç”¨äºå‚¨å­˜å’Œè·å–ä¿¡æ¯çš„ç¼–ç æ–¹å¼ï¼Œä¸åŒçš„åº”ç”¨åœºæ™¯å’Œéœ€æ±‚å¯¼è‡´äº†å¤šç§ç±»å‹çš„æ¡å½¢ç çš„äº§ç”Ÿã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„æ¡å½¢ç ç±»å‹ï¼š</p>
<ol>
<li><strong>UPC (Universal Product Code):</strong> é€šç”¨äº§å“ä»£ç ï¼Œä¸»è¦ç”¨äºé›¶å”®ä¸šï¼Œå°¤å…¶æ˜¯åœ¨åŒ—ç¾åœ°åŒºã€‚UPC é€šå¸¸ç”¨äºæ ‡è¯†å•†å“ã€‚</li>
<li><strong>EAN (International Article Number):</strong> å›½é™…å•†å“ç¼–ç ï¼Œä¸UPCç±»ä¼¼ï¼Œä¹Ÿç”¨äºå•†å“æ ‡è¯†ã€‚EAN é€šå¸¸æ˜¯ 13 ä½çš„æ•°å­—ç ï¼Œå½“ç„¶ä¹Ÿæœ‰ 8 ä½çš„ã€‚</li>
<li><strong>Code 39:</strong> ä¸€ç§å¸¸è§çš„çº¿æ€§æ¡å½¢ç ï¼Œæ”¯æŒå­—æ¯ã€æ•°å­—å’Œä¸€äº›ç‰¹æ®Šå­—ç¬¦ã€‚å¸¸ç”¨äºå·¥ä¸šã€ç‰©æµå’Œæ ‡ç­¾æ‰“å°ã€‚</li>
<li><strong>Code 128:</strong> å¦ä¸€ç§å¸¸è§çš„çº¿æ€§æ¡å½¢ç ï¼Œå…·æœ‰æ›´é«˜çš„æ•°æ®å¯†åº¦å’Œå­—ç¬¦é›†æ”¯æŒã€‚å¹¿æ³›ç”¨äºç‰©æµå’Œåˆ¶é€ ä¸šã€‚</li>
<li><strong>QR Code (Quick Response Code):</strong> äºŒç»´ç ï¼Œå¯ä»¥å­˜å‚¨æ›´å¤šçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ–‡æœ¬ã€é“¾æ¥ã€å›¾åƒç­‰ã€‚å¸¸è§äºå¹¿å‘Šã€ç§»åŠ¨æ”¯ä»˜ã€ç¥¨åŠ¡ç­‰é¢†åŸŸã€‚</li>
<li><strong>Aztec Codeï¼š</strong>å¦ä¸€ç§äºŒç»´ç ï¼Œé˜¿å…¹ç‰¹å…‹ç ï¼Œå¸¸ç”¨äºéœ€è¦é«˜å¯†åº¦æ•°æ®å­˜å‚¨çš„åœºæ™¯ï¼Œä¾‹å¦‚ç¥¨åŠ¡ã€èº«ä»½è¯ã€æ”¯ä»˜ç³»ç»Ÿç­‰ã€‚</li>
<li><strong>Data Matrix:</strong> å¦ä¸€ç§äºŒç»´ç ï¼Œå¯ä»¥å­˜å‚¨å¤§é‡æ•°æ®ï¼Œç‰¹åˆ«é€‚ç”¨äºå°ç©ºé—´ã€‚å¸¸ç”¨äºç”µå­å…ƒä»¶ã€åˆ¶é€ ä¸šå’ŒåŒ»ç–—è®¾å¤‡ã€‚</li>
<li><strong>PDF417:</strong> ä¸€ç§å †å å¼çš„äºŒç»´ç ï¼Œå¯ä»¥å­˜å‚¨å¤§é‡ä¿¡æ¯ã€‚é€šå¸¸ç”¨äºèº«ä»½è¯ã€é©¾é©¶è¯ç­‰è¯ä»¶ã€‚</li>
</ol>
<p>&#8195;&#8195;è¿™åªæ˜¯ä¸€å°éƒ¨åˆ†å¸¸è§çš„æ¡å½¢ç ç±»å‹ï¼Œå®é™…ä¸Šè¿˜æœ‰è®¸å¤šå…¶ä»–ç±»å‹ï¼Œæ¯ç§éƒ½æœ‰å…¶ç‰¹å®šçš„ç”¨é€”å’Œåº”ç”¨é¢†åŸŸã€‚é€‰æ‹©æ¡å½¢ç ç±»å‹é€šå¸¸å–å†³äºéœ€è¦å­˜å‚¨çš„ä¿¡æ¯é‡ã€å¯è¯»æ€§è¦æ±‚ä»¥åŠåº”ç”¨çš„å…·ä½“è¦æ±‚ã€‚</p>
<h2 id="QR-Scanner"><a href="#QR-Scanner" class="headerlink" title="QR Scanner"></a>QR Scanner</h2><p>&#8195;&#8195;å¾€å¸¸æ‰«ç çš„éœ€æ±‚ä¸å¤šï¼Œå¤šæ•°åœºæ™¯ä»…éœ€è¦æ‰«æäºŒç»´ç ï¼Œæ‰€ä»¥ç›´æ¥é€šè¿‡ <code>AVFoundation</code> æ¥æ‰«æå¹¶è¯†åˆ«æ¡ç ï¼Œ<code>AVMetadataObject.ObjectType</code> æ”¯æŒçš„æ¡ç ç±»å‹åŒ…å«äº†å¤§éƒ¨åˆ†å¸¸è§çš„ç±»å‹:</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">AVMetadataObjectTypeUPCECode</span></span><br><span class="line"><span class="type">AVMetadataObjectTypeCode39Code</span></span><br><span class="line"><span class="type">AVMetadataObjectTypeCode39Mod43Code</span></span><br><span class="line"><span class="type">AVMetadataObjectTypeEAN13Code</span></span><br><span class="line"><span class="type">AVMetadataObjectTypeEAN8Code</span></span><br><span class="line"><span class="type">AVMetadataObjectTypeCode93Code</span></span><br><span class="line"><span class="type">AVMetadataObjectTypeCode128Code</span></span><br><span class="line"><span class="type">AVMetadataObjectTypePDF417Code</span></span><br><span class="line"><span class="type">AVMetadataObjectTypeQRCode</span></span><br><span class="line"><span class="type">AVMetadataObjectTypeAztecCode</span></span><br><span class="line"><span class="type">AVMetadataObjectTypeInterleaved2of5Code</span></span><br><span class="line"><span class="type">AVMetadataObjectTypeITF14Code</span></span><br><span class="line"><span class="type">AVMetadataObjectTypeDataMatrixCode</span></span><br></pre></td></tr></table></figure>

<p>&#8195;&#8195;å¯¹äºè¯†åˆ«å›¾ç‰‡ä¸­çš„æ¡å½¢ç ï¼Œè¿™ä¸ªåº“ä½¿ç”¨çš„æ˜¯</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">CIDetector</span>(ofType: <span class="type">CIDetectorTypeQRCode</span>, context: context)</span><br></pre></td></tr></table></figure>

<p>ï¼Œå…³äºæ¡å½¢ç æ”¯æŒçš„ç±»å‹ä¹Ÿå¾ˆç›´ç™½ - CIDetectorTypeQRCodeï¼Œåªæ”¯æŒäºŒç»´ç â€¦æ‰€ä»¥æƒ³ä»ç…§ç‰‡ä¸­è¯†åˆ«ä¸€ç»´ç ï¼Œè¦æ¢ä¸ªæ€è·¯äº†ã€‚</p>
<h2 id="Vision"><a href="#Vision" class="headerlink" title="Vision"></a>Vision</h2><p>&#8195;&#8195;è‹¹æœä» ios11.0 å¼€å§‹æ”¯æŒ FaceIDï¼Œç›¸åº”æ¨å‡ºäº† Vision æ¡†æ¶ã€‚Vision æ˜¯ä¸€ä¸ªç”¨äºå›¾åƒå’Œè§†è§‰å¤„ç†çš„æ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—çš„å·¥å…·å’ŒåŠŸèƒ½ï¼Œæ¶µç›–äº†å¤šä¸ªé¢†åŸŸï¼ŒåŒ…æ‹¬é¢éƒ¨è¯†åˆ«ã€æ–‡æœ¬è¯†åˆ«ã€ç‰©ä½“è¿½è¸ªç­‰ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº› Vision æ¡†æ¶çš„ä¸»è¦åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>é¢éƒ¨è¯†åˆ«ï¼ˆFace Recognitionï¼‰ï¼š</strong> Vision æ¡†æ¶å¯ä»¥æ£€æµ‹å›¾åƒä¸­çš„é¢éƒ¨ï¼Œè¯†åˆ«é¢éƒ¨çš„ç‰¹å¾ï¼Œä¾‹å¦‚çœ¼ç›ã€å˜´å·´ã€é¼»å­ç­‰ã€‚å®ƒè¿˜èƒ½å¤Ÿè¿›è¡Œé¢éƒ¨è¿½è¸ªï¼Œè·Ÿè¸ªåœ¨è§†é¢‘ä¸­ç§»åŠ¨çš„é¢éƒ¨ã€‚</li>
<li><strong>æ–‡æœ¬è¯†åˆ«ï¼ˆText Recognitionï¼‰ï¼š</strong> Vision æ¡†æ¶æ”¯æŒå¯¹å›¾åƒä¸­çš„æ–‡æœ¬è¿›è¡Œè¯†åˆ«ã€‚è¿™å¯¹äºä»ç…§ç‰‡æˆ–æ‘„åƒå¤´ä¸­æ•æ‰åˆ°çš„æ–‡æœ¬è¿›è¡Œå®æ—¶å¤„ç†å¾ˆæœ‰ç”¨ã€‚</li>
<li><strong>ç‰©ä½“è¿½è¸ªï¼ˆObject Trackingï¼‰ï¼š</strong> Vision æ¡†æ¶å¯ä»¥è¿½è¸ªå›¾åƒæˆ–è§†é¢‘ä¸­çš„ç‰©ä½“ï¼Œä½¿å¾—ä½ èƒ½å¤Ÿè·Ÿè¸ªç‰©ä½“çš„ä½ç½®éšæ—¶é—´çš„å˜åŒ–ã€‚</li>
<li><strong>å›¾åƒåˆ†ç±»å’Œè¯†åˆ«ï¼ˆImage Classificationï¼‰ï¼š</strong> Vision æ¡†æ¶æ”¯æŒé€šè¿‡æœºå™¨å­¦ä¹ æ¨¡å‹å¯¹å›¾åƒè¿›è¡Œåˆ†ç±»å’Œè¯†åˆ«ã€‚ä½ å¯ä»¥ä½¿ç”¨é¢„è®­ç»ƒçš„æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥é›†æˆè‡ªå·±è®­ç»ƒçš„æ¨¡å‹ã€‚</li>
<li><strong>å›¾åƒåˆ†å‰²ï¼ˆImage Segmentationï¼‰ï¼š</strong> Vision æ¡†æ¶å…è®¸å¯¹å›¾åƒè¿›è¡Œåˆ†å‰²ï¼Œå°†å›¾åƒä¸­çš„ä¸åŒåŒºåŸŸæ ‡è®°ä¸ºä¸åŒçš„å¯¹è±¡ã€‚</li>
</ol>
<p>è®²çœŸï¼Œä¹‹å‰åœ¨å·¥ä½œä¸­ä¸€ä¸ªä¹Ÿæ²¡ç”¨ä¸Šâ€¦æ‰€ä»¥ä¸å†æ•¢ç§°è‡ªå·±ä¸ºå¼€å‘è€…äº†ï¼ŒiOSer ç§’å˜ Ioserï¼Œæ‡‚å¾—éƒ½æ‡‚ã€‚ğŸ¤§</p>
<p>è¨€å½’æ­£ä¼ ï¼š</p>
<p>&#8195;&#8195;ç¿»ä¸€ç¿»æ¡†æ¶åŒ…å« detect å­—æ ·çš„ APIï¼Œå¾ˆå¤š â€œVision/VNDetectâ€“â€ï¼Œæœ‰ä¸€ä¸ª <strong>VNDetectBarcodesRequest</strong> çœ‹ä¸Šå»éå¸¸ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ã€‚å‘é€å›¾åƒè¯†åˆ«è¯·æ±‚ï¼Œéœ€è¦é€šè¿‡ <strong>VNImageRequestHandler</strong>ï¼Œè¿™ä¸ªç±»å‹ç”¨äºå¤„ç†å•ä¸ªå›¾åƒä¸Šçš„ Vision è¯·æ±‚ã€‚</p>
<h3 id="VNImageRequestHandler"><a href="#VNImageRequestHandler" class="headerlink" title="VNImageRequestHandler"></a>VNImageRequestHandler</h3><p>&#8195;&#8195;å°è¯•äº†å‡ ä¸ª APIã€åœ¨ OC ä¸­ä¸å°å¿ƒé€ äº†ä¸ªåƒµå°¸ã€æŠ“åƒµå°¸æŠ“äº†åŠå¤©ğŸ˜ˆï¼Œæœ€ç»ˆé€‰æ‹©ç”¨ CVPixelBuffer æ¥åˆ›å»ºè¯·æ±‚ï¼Œå…¶ä»–ä½¿ç”¨ CGImage çš„æ–¹å¼å ç”¨çš„å†…å­˜ä¼¼ä¹æ¯”è¾ƒé«˜ï¼Ÿï¼Œå› ä¸ºæˆ‘æ‹¿ä¸€å¼ å•åç›¸æœºæ‹çš„ç•¥å¤§è‰ºæœ¯ç…§åšæµ‹è¯•ï¼ŒæŒ‚æ‰äº†â€¦</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">detectBarcodeFromImg</span>(<span class="keyword">_</span> <span class="params">oriImg</span>: <span class="type">UIImage</span>, <span class="keyword">_</span> <span class="params">completion</span>: <span class="keyword">@escaping</span> (<span class="type">Barcode</span>) -&gt; <span class="type">Void</span>)</span> &#123;</span><br><span class="line">		<span class="operator">...</span></span><br><span class="line">    <span class="type">DispatchQueue</span>.<span class="keyword">init</span>(label: <span class="string">&quot;com.yydetector.session.queue&quot;</span>).async &#123; [<span class="keyword">self</span>] <span class="keyword">in</span>                                                                     </span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> buffer <span class="operator">=</span> pixelBuffer(from: oriImg<span class="operator">!</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Image type not support!&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">                                                                     </span><br><span class="line">        <span class="keyword">let</span> requestHandler <span class="operator">=</span> <span class="type">VNImageRequestHandler</span>.<span class="keyword">init</span>(cvPixelBuffer: buffer)</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> detectRequest <span class="operator">=</span> <span class="type">VNDetectBarcodesRequest</span> &#123; [<span class="keyword">self</span>] request, error <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">let</span> error <span class="operator">=</span> error &#123;</span><br><span class="line">                    <span class="built_in">print</span>(error.localizedDescription)</span><br><span class="line">                    <span class="keyword">return</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> request.results<span class="operator">!</span>.isEmpty &#123;</span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;No result of request!&quot;</span>)</span><br><span class="line">                    <span class="keyword">return</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> <span class="keyword">case</span> <span class="keyword">let</span> barcode <span class="keyword">as</span> <span class="type">VNBarcodeObservation</span> <span class="keyword">in</span> request.results<span class="operator">!</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> barcode.payloadStringValue <span class="operator">!=</span> <span class="literal">nil</span> &#123;</span><br><span class="line">                        <span class="keyword">let</span> formatter <span class="operator">=</span> printBarcode(barcode)</span><br><span class="line">                        <span class="built_in">print</span>(formatter)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="built_in">print</span>(<span class="string">&quot;No payload string value!&quot;</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> requestHandler.perform([detectRequest])</span><br><span class="line">        &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">          	<span class="built_in">print</span>(error.localizedDescription)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&#8195;&#8195;è¯†åˆ«åˆ°çš„ç»“æœä¼šé€šè¿‡ VNBarcodeObservation ç±»å‹æ¥è¿”å›ï¼Œé‡Œé¢çš„å±æ€§éå¸¸è¯¦ç»†ï¼Œæ‰“å°äº†å‡ ä¸ªï¼Œå…¶ä»–çš„ä¸åœ¨è¿™é‡Œç½—åˆ—äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">âœ…</span> <span class="type">VNBarcodeObservation</span>:</span><br><span class="line"> ã€½ï¸value <span class="operator">=</span> http:<span class="comment">//weixin.qq.com/r/cHVyahfEvErDrVMJ9yBi, </span></span><br><span class="line"> ã€½ï¸type <span class="operator">=</span> <span class="type">VNBarcodeSymbologyQR</span>, </span><br><span class="line"> ã€½ï¸confidence <span class="operator">=</span> <span class="number">1.0</span>, </span><br><span class="line"> ã€½ï¸boundingBox <span class="operator">=</span> </span><br><span class="line">	 x <span class="operator">=</span> <span class="number">0.267</span>, </span><br><span class="line">	 y <span class="operator">=</span> <span class="number">0.407</span>, </span><br><span class="line">	 w <span class="operator">=</span> <span class="number">0.130</span>, </span><br><span class="line">	 h <span class="operator">=</span> <span class="number">0.060</span>, </span><br><span class="line"> ã€½ï¸desc : </span><br><span class="line">	 symbolVersion <span class="operator">=</span> <span class="number">3</span>, </span><br><span class="line">	 maskPattern <span class="operator">=</span> <span class="number">2</span>, </span><br><span class="line">	 errorCorrectionLevel <span class="operator">=</span> <span class="number">76</span>, </span><br><span class="line">	 errorCorrectedPayload <span class="operator">=</span>  </span><br></pre></td></tr></table></figure>

<p>payloadStringValue(value) - æ¡ç å†…å®¹ï¼›<br>symbology(type) - æ¡ç ç±»å‹ï¼›<br>confidence - è¡¨æ˜äº†è¯†åˆ«è¿™ä¸ªç çš„ä¿¡å¿ƒï¼Œ0.6~1 è²Œä¼¼æ¯”è¾ƒå¤šï¼Œå¤ªä½çš„è¯æ¡†æ¶ä¹Ÿå°±ä¸è¯†åˆ«äº†ã€æˆ–è€…ä¸å»ºè®®ä½¿ç”¨ï¼›<br>boundingBox - æ˜¯æ¡å½¢ç çš„è¯†åˆ«åŒºåŸŸï¼›<br>errorCorrectionLevel - çº é”™çº§åˆ«ï¼›</p>
<h3 id="æ¡å½¢ç çš„èƒŒæ™¯è‰²"><a href="#æ¡å½¢ç çš„èƒŒæ™¯è‰²" class="headerlink" title="æ¡å½¢ç çš„èƒŒæ™¯è‰²"></a>æ¡å½¢ç çš„èƒŒæ™¯è‰²</h3><p>&#8195;&#8195;åŸæœ¬ä»¥ä¸ºå†™åˆ°è¿™é‡Œä½œä¸ºä¸€ä¸ªè¡¥å……åŠŸèƒ½ä¹Ÿç®—æ˜¯å¤Ÿç”¨äº†ï¼Œç›´åˆ°æµ‹è¯•æ‹¿å‡ºäº†ä¸‹é¢è¿™å¼ å›¾ï¼šç”¨åœ¨çº¿å·¥å…·éšä¾¿ç”Ÿæˆäº†ä¸€ä¸ªæ¡å½¢ç ã€ä¿å­˜åˆ°æ‰‹æœºç›¸å†Œã€è¯†åˆ«ï¼Œæ‰«ç å¯ä»¥æ‰«å‡ºæ¥ï¼Œä½†è¯†åˆ«ä¸å‡ºæ¥[Emm][Emm]â€¦</p>
<center>
    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_4.jpg" class width="300"></div>
</center>

<p>&#8195;&#8195;ç çœ‹ç€æ˜¯ä¸ªæ­£ç»ç ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¯†åˆ«ä¸å‡ºæ¥å‘¢ï¼Ÿå·¦å³ä¸¤ä¾§çš„è¾¹ç¼˜å¤„è´´è¾¹äº†ï¼ŸPC ä¸Šæˆªå›¾å†ä¿å­˜ï¼Œä¹Ÿæ˜¯å¯ä»¥è¯†åˆ«å‡ºæ¥çš„ï¼Œé‚£ä¼°è®¡å°±æ˜¯è´´è¾¹å¯¼è‡´çš„â€¦è¯´åˆ°è¿™é‡Œï¼Œä½ å¯ä»¥éšæ‰‹æ‹¿èµ·ä¸€ä¸ªèº«è¾¹æœ‰æ¡ç çš„ç‰©å“ï¼Œä¸è®ºç‰©å“çš„å¤–åŒ…è£…æ˜¯ä»€ä¹ˆé¢œè‰²çš„ï¼Œæ¡ç ä¸€èˆ¬éƒ½ä¼šå•ç‹¬æœ‰ä¸€ä¸ªç™½è‰²ï¼ˆæµ…è‰²ï¼‰çš„ã€ç çš„å››å‘¨æœ‰ç©ºç™½çš„èƒŒæ™¯åŒºåŸŸï¼Œç›®çš„å°±æ˜¯ä¸ºäº†æ‰«ç çš„æ—¶å€™å¯ä»¥è¯†åˆ«çš„å¿«ä¸€ç‚¹ã€‚çœ‹åˆ°æœ‰ä¸ªå¤–å›½ç½‘å‹æé—®ï¼šâ€œè‡ªå·±åœ¨å¸®ä¸€ä¸ªå½©è‰²æ°´ç¬”çš„å…¬å¸åšæ‰«ç åŠŸèƒ½ï¼Œä»–ä»¬æ°´ç¬”çš„å¤–åŒ…è£…æ˜¯åæš—é»‘è‰²çš„ã€æ°´ç¬”çš„æ¡å½¢ç æ˜¯â€¦äº”é¢œå…­è‰²çš„å½©è‰²ï¼Œç»“è´¦æ‰«ç æ—¶æ€»æ˜¯å¾ˆæ…¢ï¼Œå¦‚ä½•æåˆ°æ‰«ç çš„æ•ˆç‡ï¼Ÿâ€å’±å°±æ˜¯è¯´ï¼Œæ¢ä¸ªå¤–åŒ…è£…å‘¢ğŸ˜¶â€¦</p>
<p>&#8195;&#8195;é‚£å½±å“æ‰«ç æ•ˆç‡çš„å› ç´ éƒ½æœ‰å“ªäº›ï¼Œé™¤äº†ç çš„å½¢çŠ¶(å¤æ‚åº¦)ï¼Œæ˜¯ä¸æ˜¯è¿˜æœ‰èƒŒæ™¯è‰²æˆ–è€…è¯´å¯¹æ¯”åº¦ï¼Ÿæœ¬æ¥æƒ³å°è¯•ä¸€ä¸‹â€œæŠ å›¾â€ï¼ŒæŠŠè¿™ä¸ªè´´è¾¹çš„æ¡å½¢ç æ‰£åˆ°ä¸€ä¸ªç™½è‰²èƒŒæ™¯ä¸Šï¼Œç»“æœç®—æ³•æ²¡æ•´æ˜ç™½ï¼ŒæŠ å‡ºæ¥ä¸€ä¸ªè«åå…¶å¦™çš„æ•ˆæœï¼š</p>
<center>
    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_6.PNG" class width="200"></div>
    <div style="display:inline-block;margin-left:10px;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_7.PNG" class width="200"></div>
</center>

<p>soâ€¦æ”¾å¼ƒã€‚æŠ å®ƒå¹²å˜›å‘¢ï¼Œç›´æ¥ç”»åˆ°ä¸€ä¸ªç™½è‰²çš„èƒŒæ™¯å›¾ç‰‡ä¸Šå‘¢ï¼Ÿä¸ºäº†é¿å…å†å‡ºç°è¿™ç§è´´è¾¹çš„å›¾ã€é•‚ç©ºçš„å›¾ï¼Œå…ˆæ˜¯ç”»äº†ä¸€ä¸ªæ¯”åŸå›¾çš„å®½é«˜éƒ½å¤§ 10 çš„ç™½è‰²å›¾ç‰‡ï¼Œç„¶åæŠŠåŸå›¾æ”¾åˆ°ç™½è‰²èƒŒæ™¯æ¿çš„ä¸­å¿ƒï¼Œå†è¯†åˆ«ï¼Œå°±æˆåŠŸäº†ã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">imageFromColor</span>(<span class="keyword">_</span> <span class="params">color</span>: <span class="type">UIColor</span>, <span class="params">size</span>: <span class="type">CGSize</span>)</span> -&gt; <span class="type">UIImage</span>! &#123;</span><br><span class="line">    <span class="keyword">let</span> rect <span class="operator">=</span> <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: size.width <span class="operator">+</span> <span class="number">10</span>, height: size.height <span class="operator">+</span> <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="type">UIGraphicsBeginImageContext</span>(rect.size)</span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> context <span class="operator">=</span> <span class="type">UIGraphicsGetCurrentContext</span>() <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">UIImage</span>(named: <span class="string">&quot;scan_bg&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    context.setFillColor(color.cgColor)</span><br><span class="line">    context.fill(rect)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> image <span class="operator">=</span> <span class="type">UIGraphicsGetImageFromCurrentImageContext</span>()</span><br><span class="line">    <span class="type">UIGraphicsEndImageContext</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> image</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">drawImage</span>(<span class="keyword">_</span> <span class="params">oriImg</span>: <span class="type">CGImage</span>, <span class="params">toCenter</span> <span class="params">bgImg</span>: <span class="type">CGImage</span>)</span> -&gt; <span class="type">UIImage</span>? &#123;</span><br><span class="line">    <span class="keyword">let</span> targetSize <span class="operator">=</span> <span class="type">CGSize</span>(width: <span class="type">CGFloat</span>(bgImg.width), height: <span class="type">CGFloat</span>(bgImg.height))</span><br><span class="line"></span><br><span class="line">    <span class="type">UIGraphicsBeginImageContextWithOptions</span>(targetSize, <span class="literal">false</span>, <span class="number">0.0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> bottomImage <span class="operator">=</span> <span class="type">UIImage</span>(cgImage: bgImg)</span><br><span class="line">    bottomImage.draw(in: <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: targetSize.width, height: targetSize.height))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> scaledSize <span class="operator">=</span> <span class="type">CGSize</span>(width: <span class="type">CGFloat</span>(oriImg.width), height: <span class="type">CGFloat</span>(oriImg.height))</span><br><span class="line">    <span class="keyword">let</span> destinationRect <span class="operator">=</span> <span class="type">CGRect</span>(</span><br><span class="line">        x: (targetSize.width <span class="operator">-</span> scaledSize.width) <span class="operator">/</span> <span class="number">2</span>,</span><br><span class="line">        y: (targetSize.height <span class="operator">-</span> scaledSize.height) <span class="operator">/</span> <span class="number">2</span>,</span><br><span class="line">        width: scaledSize.width,</span><br><span class="line">        height: scaledSize.height</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> centeredImage <span class="operator">=</span> <span class="type">UIImage</span>(cgImage: oriImg)</span><br><span class="line">    centeredImage.draw(in: destinationRect)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> finalImage <span class="operator">=</span> <span class="type">UIGraphicsGetImageFromCurrentImageContext</span>()</span><br><span class="line">    <span class="type">UIGraphicsEndImageContext</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> finalImage</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">âœ…</span> <span class="type">VNBarcodeObservation</span>:</span><br><span class="line"> ã€½ï¸value <span class="operator">=</span> 304329G00015157, </span><br><span class="line"> ã€½ï¸type <span class="operator">=</span> <span class="type">VNBarcodeSymbologyCode128</span>, </span><br><span class="line"> ã€½ï¸confidence <span class="operator">=</span> <span class="number">0.8</span>, </span><br><span class="line"> ã€½ï¸boundingBox <span class="operator">=</span> </span><br><span class="line">	 x <span class="operator">=</span> <span class="number">0.015</span>, </span><br><span class="line">	 y <span class="operator">=</span> <span class="number">0.116</span>, </span><br><span class="line">	 w <span class="operator">=</span> <span class="number">0.970</span>, </span><br><span class="line">	 h <span class="operator">=</span> <span class="number">0.024</span>, </span><br><span class="line"> ã€½ï¸desc :  </span><br></pre></td></tr></table></figure>

<h3 id="å¾‹åŠ¨çš„å°ç®­å¤´"><a href="#å¾‹åŠ¨çš„å°ç®­å¤´" class="headerlink" title="å¾‹åŠ¨çš„å°ç®­å¤´"></a>å¾‹åŠ¨çš„å°ç®­å¤´</h3><p>&#8195;&#8195;å½“çœ‹åˆ° Vision è¿”å›äº† boundingBox æ—¶ï¼Œåˆæƒ³åˆ°äº†ä¸€ä¸ªéœ€æ±‚ï¼šå¦‚æœå›¾ç‰‡ä¸Šæœ‰å¤šä¸ªæ¡ç æ—¶ï¼Œåœ¨æ¯ä¸ªå¯è¯†åˆ«çš„åŒºåŸŸåŠ ä¸€ä¸ªå°ç®­å¤´ğŸ”œï¼Œè®©ç”¨æˆ·è‡ªå·±é€‰æ‹©ä½¿ç”¨å“ªä¸ªç»“æœã€‚æ•ˆæœå¦‚ä¸‹ï¼š</p>
<center>
    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_1.jpg" class width="200"></div>
    <div style="display:inline-block;margin-left:10px;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_2.jpg" class width="200"></div>
  <div style="display:inline-block;margin-left:10px;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_3.jpg" class width="200"></div>
</center>
æ€è·¯æ˜¯ï¼š

<ol>
<li>è¯†åˆ«åˆ°æ¯ä¸ªæ¡ç çš„ <strong>boundingBox</strong>ï¼Œæ³¨æ„åæ ‡ç³»æ˜¯ (0,1) åæ ‡ï¼Œå…ˆç®€ç§°ä¸º CI åæ ‡ç³»å§ï¼›</li>
<li>å›¾ç‰‡åœ¨ ImageView ä¸Šçš„é¢„è§ˆæ¨¡å¼æ˜¯ UIView.ContentMode = <strong>scaleAspectFit</strong>ï¼Œæƒ³å‡†ç¡®æ”¾ç½®å°ç®­å¤´ï¼Œé‚£éœ€è¦å…ˆæ‹¿åˆ°å›¾ç‰‡åŸºäº ImageView çš„åŒºåŸŸï¼Œè¿™é‡Œç§°ä¸º UI åæ ‡ç³»ï¼šï¼ˆæ­¤ç‰‡æ®µæ¥è‡ª ChatGPTï¼Œå“ˆå“ˆã€‚è®²çœŸï¼Œä»£ç è§„èŒƒæ¯”æˆ‘ä»¬æŸäº›åŒå¿—çš„ä»£ç éƒ½å¹²å‡€ï¼‰</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIImageView</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">renderingRectForImage</span>()</span> -&gt; <span class="type">CGRect</span>? &#123;</span><br><span class="line">      <span class="operator">...</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">case</span> .scaleAspectFit:</span><br><span class="line">            <span class="keyword">let</span> scale <span class="operator">=</span> <span class="built_in">min</span>(imageViewBounds.width <span class="operator">/</span> imageSize.width, imageViewBounds.height <span class="operator">/</span> imageSize.height)</span><br><span class="line">            <span class="keyword">let</span> width <span class="operator">=</span> imageSize.width <span class="operator">*</span> scale</span><br><span class="line">            <span class="keyword">let</span> height <span class="operator">=</span> imageSize.height <span class="operator">*</span> scale</span><br><span class="line">            renderingRect.size <span class="operator">=</span> <span class="type">CGSize</span>(width: width, height: height)</span><br><span class="line">            renderingRect.origin.x <span class="operator">=</span> (imageViewBounds.width <span class="operator">-</span> width) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line">            renderingRect.origin.y <span class="operator">=</span> (imageViewBounds.height <span class="operator">-</span> height) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">case</span> .scaleAspectFill:</span><br><span class="line">            <span class="keyword">let</span> scale <span class="operator">=</span> <span class="built_in">max</span>(imageViewBounds.width <span class="operator">/</span> imageSize.width, imageViewBounds.height <span class="operator">/</span> imageSize.height)</span><br><span class="line">            <span class="keyword">let</span> width <span class="operator">=</span> imageSize.width <span class="operator">*</span> scale</span><br><span class="line">            <span class="keyword">let</span> height <span class="operator">=</span> imageSize.height <span class="operator">*</span> scale</span><br><span class="line">            renderingRect.size <span class="operator">=</span> <span class="type">CGSize</span>(width: width, height: height)</span><br><span class="line">            renderingRect.origin.x <span class="operator">=</span> (imageViewBounds.width <span class="operator">-</span> width) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line">            renderingRect.origin.y <span class="operator">=</span> (imageViewBounds.height <span class="operator">-</span> height) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">case</span> .center:</span><br><span class="line">            renderingRect.size <span class="operator">=</span> imageSize</span><br><span class="line">            renderingRect.origin.x <span class="operator">=</span> (imageViewBounds.width <span class="operator">-</span> imageSize.width) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line">            renderingRect.origin.y <span class="operator">=</span> (imageViewBounds.height <span class="operator">-</span> imageSize.height) <span class="operator">/</span> <span class="number">2</span></span><br><span class="line">            </span><br><span class="line">        <span class="comment">// å…¶ä»– contentMode ç±»å‹å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œæ‰©å±•</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line"> 	 <span class="operator">...</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> renderingRect</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>å¾—åˆ°å›¾ç‰‡åŒºåŸŸä»¥åï¼ŒæŠŠåŸºäº CI åæ ‡çš„ boundingBox è½¬æ¢ä¸º UI åæ ‡ï¼Œç”¨æ¥æ·»åŠ  viewï¼š</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">convertCIBoundingRectToUIRect</span>(<span class="keyword">_</span> <span class="params">ci</span>: <span class="type">CGRect</span>)</span> -&gt; <span class="type">CGRect</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> renderingRect <span class="operator">=</span> imgV.renderingRectForImage()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> w <span class="operator">=</span> ci.size.width <span class="operator">*</span> renderingRect<span class="operator">!</span>.size.width</span><br><span class="line">    <span class="keyword">let</span> h <span class="operator">=</span> ci.size.height <span class="operator">*</span> renderingRect<span class="operator">!</span>.size.height</span><br><span class="line">    <span class="keyword">let</span> x <span class="operator">=</span> ci.origin.x <span class="operator">*</span> renderingRect<span class="operator">!</span>.size.width <span class="operator">+</span> renderingRect<span class="operator">!</span>.origin.x</span><br><span class="line">    <span class="keyword">let</span> y <span class="operator">=</span> ci.origin.y <span class="operator">*</span> renderingRect<span class="operator">!</span>.size.height <span class="operator">+</span> renderingRect<span class="operator">!</span>.origin.y</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="type">CGRectMake</span>(x, y, w, h)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>åŸºäºè½¬æ¢åçš„åæ ‡åˆ›å»ºæŠ–åŠ¨çš„ç»¿è‰²å°ç®­å¤´ï¼Œå‘Šè¯‰ç”¨æˆ·â€œç‚¹æˆ‘<del>ç‚¹æˆ‘</del>â€ã€‚åˆ°è¿™ä¸€æ­¥åŸºæœ¬ä¸Šå·²ç»è¾¾åˆ°ä¸Šå›¾çš„ç›®çš„äº†ã€‚</li>
</ol>
<p>Butâ€¦<br>Butâ€¦<br>Butâ€¦</p>
<p>&#8195;&#8195;ä¸Šé¢çš„å°ç®­å¤´å…¶å®æ˜¯ç»è¿‡ä¸€æ¬¡â€œå˜æ€â€è½¬æ¢ä¹‹åçš„æ•ˆæœã€‚ç”¨è¿‡ CI åæ ‡çš„éƒ½çŸ¥é“ï¼Œåœ¨ CoreImage ä¸­æˆ–è€…è¯´è¯»åˆ°å†…å­˜ä¸­çš„å›¾ç‰‡ï¼Œåæ ‡ç³»çš„åŸç‚¹å’Œå›¾ç‰‡æ–¹å‘æ˜¯æœ‰å…³ç³»çš„ï¼Œå¹¶ä¸æ˜¯å•çº¯å’Œ UI åæ ‡ä¸Šä¸‹åè¿‡æ¥çš„å…³ç³»ã€‚æ­£å¸¸æƒ…å†µä¸‹å›¾ç‰‡çš„æ–¹å‘æ˜¯ <strong>CGImagePropertyOrientation.up</strong>ï¼Œæƒ³æ¨¡æ‹Ÿå…¶ä»–æ–¹å‘å¯ä»¥æŠŠæ‰‹æœºæ¨ªç€æˆ–è€…å€’è¿‡æ¥æ‹ç…§è¯•è¯•ï¼Œè¿˜ç”¨ä¸Šé¢çš„å¤šæ¡ç å›¾ç‰‡ä¸¾ä¾‹ï¼ŒæŒ‰ç…§æˆ‘ä»¬ 1-4 æ­¥éª¤å‡ºæ¥çš„æ•ˆæœå…¶å®æ˜¯è¿™æ ·çš„;</p>
<center>
    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_8.PNG" class width="200"></div>
</center>

<p>å¾ˆæ˜æ˜¾ï¼Œè¯†åˆ«åŒºåŸŸéƒ½æ˜¯æœ‰çš„ï¼Œä½†åæ ‡æ–¹å‘æ˜¯ä¸å‡†ç¡®çš„ã€‚å¯ä»¥çœ‹ä¸€ä¸‹ <strong>CGImagePropertyOrientation</strong> çš„æ³¨è§£ï¼Œå¯¹æ¯ä¸ªæ–¹å‘çš„åŸç‚¹ä½ç½®éƒ½åšäº†è¯´æ˜ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@frozen</span> <span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">CGImagePropertyOrientation</span> : <span class="title">UInt32</span>, @<span class="title">unchecked</span> <span class="title">Sendable</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">case</span> up <span class="operator">=</span> <span class="number">1</span> <span class="comment">// 0th row at top,    0th column on left   - default orientation</span></span><br><span class="line"><span class="operator">...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸‹ä¸€æ­¥ï¼Œ</p>
<ol start="5">
<li>éœ€è¦æŠŠå›¾ç‰‡æ–¹å‘â€œæŒ‡å®šâ€ä¸€ä¸‹ï¼Œåæ ‡è½¬æ¢æ—¶åŠ ä¸€æ¬¡â€œå˜æ€â€è½¬æ¢ - <strong>CGAffineTransform</strong>ï¼š</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">detectBarcodeFromImg</span>(<span class="keyword">_</span> <span class="params">oriImg</span>: <span class="type">UIImage</span>, <span class="keyword">_</span> <span class="params">completion</span>: <span class="keyword">@escaping</span> (<span class="type">Barcode</span>) -&gt; <span class="type">Void</span>)</span> &#123;</span><br><span class="line">		<span class="operator">...</span></span><br><span class="line">    <span class="type">DispatchQueue</span>.<span class="keyword">init</span>(label: <span class="string">&quot;com.yydetector.session.queue&quot;</span>).async &#123; [<span class="keyword">self</span>] <span class="keyword">in</span>                                                                     </span><br><span class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> buffer <span class="operator">=</span> pixelBuffer(from: oriImg<span class="operator">!</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Image type not support!&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">                                                                     </span><br><span class="line">        <span class="keyword">let</span> tempOrientation <span class="operator">=</span> getCGImagePropertyOrientation(from: oriImg.imageOrientation)</span><br><span class="line">        <span class="keyword">let</span> requestHandler <span class="operator">=</span> <span class="type">VNImageRequestHandler</span>.<span class="keyword">init</span>(cvPixelBuffer: buffer, orientation: tempOrientation)</span><br><span class="line">        <span class="operator">...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">convertCIBoundingRectToUIRect</span>(<span class="keyword">_</span> <span class="params">cii</span>: <span class="type">CGRect</span>)</span> -&gt; <span class="type">CGRect</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> renderingRect <span class="operator">=</span> imgV.renderingRectForImage()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> ci <span class="operator">=</span> cii.applying(getCGAffineTransform(from: orientation<span class="operator">!</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> w <span class="operator">=</span> ci.size.width <span class="operator">*</span> renderingRect<span class="operator">!</span>.size.width</span><br><span class="line">    <span class="keyword">let</span> h <span class="operator">=</span> ci.size.height <span class="operator">*</span> renderingRect<span class="operator">!</span>.size.height</span><br><span class="line">    <span class="keyword">let</span> x <span class="operator">=</span> ci.origin.x <span class="operator">*</span> renderingRect<span class="operator">!</span>.size.width <span class="operator">+</span> renderingRect<span class="operator">!</span>.origin.x</span><br><span class="line">    <span class="keyword">let</span> y <span class="operator">=</span> ci.origin.y <span class="operator">*</span> renderingRect<span class="operator">!</span>.size.height <span class="operator">+</span> renderingRect<span class="operator">!</span>.origin.y</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="type">CGRectMake</span>(x, y, w, h)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">getCGAffineTransform</span>(<span class="params">from</span> <span class="params">orientation</span>: <span class="type">CGImagePropertyOrientation</span>)</span> -&gt; <span class="type">CGAffineTransform</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> orientation &#123;</span><br><span class="line">    <span class="keyword">case</span> .up, .down:</span><br><span class="line">        <span class="keyword">return</span> <span class="type">CGAffineTransform</span>(scaleX: <span class="number">1</span>, y: <span class="number">1</span>).translatedBy(x: <span class="number">0</span>, y: <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="type">CGAffineTransform</span>(scaleX: <span class="operator">-</span><span class="number">1</span>, y: <span class="operator">-</span><span class="number">1</span>).translatedBy(x: <span class="operator">-</span><span class="number">1</span>, y: <span class="operator">-</span><span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<center>
    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_9.PNG" class width="200"></div>
</center>

<p>åˆ°è¿™é‡Œåº”è¯¥å¯ä»¥äº†å§ï¼Ÿ</p>
<p>Butâ€¦<br>Butâ€¦<br>Butâ€¦</p>
<h3 id="æˆ‘çš„å°æƒ…æ€€"><a href="#æˆ‘çš„å°æƒ…æ€€" class="headerlink" title="æˆ‘çš„å°æƒ…æ€€"></a>æˆ‘çš„å°æƒ…æ€€</h3><p>&#8195;&#8195;æˆ‘ä¸ªäººå¯¹æŸäº›æœºå‹æˆ–è€…ç³»ç»Ÿæœ‰è‡ªå·±å¥‡å¥‡æ€ªæ€ªçš„æƒ…æ€€ï¼Œå¾ˆå°‘ä»¥æ—§æ¢æ–°ã€‚ä¾‹å¦‚æœ‰å° iPhone 5s æ˜¯ç¬¬ä¸€ä»£æŒ‡çº¹è¯†åˆ«çš„ HOME é”®ï¼Œè®©å®ƒçš„ç³»ç»Ÿä¸€ç›´åœç•™åœ¨äº† ios9ï¼›åˆä¾‹å¦‚æœ‰å° iPhone 12 è¾¹æ¡†æ˜¯æ–¹çš„æ‰€ä»¥å–œæ¬¢ï¼Œè®©å®ƒåœåœ¨äº† ios15.4ï¼Œä¹Ÿå› ä¸ºè«åå…¶å¦™è§‰å¾—å®ƒæ¯”è¾ƒçœç”µã€‚è¿™ä¸æ˜¯é‡ç‚¹ï¼Œé‡ç‚¹æ˜¯åŒæ ·çš„ APIã€åŒæ ·çš„å¾‹åŠ¨å°ç®­å¤´ã€åŒæ ·çš„ä¸€ä¸ªè´´è¾¹å„¿æ¡å½¢ç ï¼Œåœ¨è¿™å° iPhone 12 ä¸Šï¼Œè¯†åˆ«å‡ºæ¥æ˜¯è¿™æ ·çš„ï¼Œå…·ä½“è¯†åˆ«å‡ºæ¥äº†å‡ ä¸ªï¼Œæˆ‘ä¹Ÿæ²¡æ•°ğŸ¤·â€â™€ï¸ï¼š</p>
<center>
    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_5.jpg" class width="200"></div>
</center>

<p>â€¦<br>â€¦</p>
<center>
    <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_10.jpg" class width="80"></div>
  <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_10.jpg" class width="80"></div>
  <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_10.jpg" class width="80"></div>
  <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_10.jpg" class width="80"></div>
  <div style="display:inline-block;"><img src="https://yyblog-images-1258406742.cos.ap-beijing.myqcloud.com/vision_10.jpg" class width="80"></div>
</center>




<p>&#8195;&#8195;å“ªä¸ªåäººæ€»è¯´å®¢æˆ·ç«¯ç®€å•çš„ï¼Ÿæ‰“ä½ å“¦ã€‚</p>
<p>&#8195;&#8195;æ­£ç»äººè°åšå®¢æˆ·ç«¯å¼€å‘å•Šã€‚</p>
<p>&#8195;&#8195;å…³æœºï¼Œä¿å‘½ï¼Œå†è§ã€‚</p>
<h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>æœ€åä¸€å¥ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/ATommyGirl/Vision.git">ä»£ç åœ¨è¿™é‡Œ</a>ï¼Œéœ€è¦è‡ªå–ã€‚</p>
<hr>

  </div>
</article>


    
<div class="gitalk" id="gitalk-container"></div>
<link rel="stylesheet" href="/gDark.css" media="screen" type="text/css"> 

<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>


<script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>

<script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: 'c0fd3fecc668416852dc',
    clientSecret: '5f849bbb22f9233b3fe19627c9eb28be39b721d1',
    repo: 'YYBlogGiTalk',
    owner: 'ATommyGirl',
    admin: ['ATommyGirl'],
    // id: location.pathname,      // Ensure uniqueness and length less than 50
    id: md5(location.pathname),
    distractionFreeMode: false,  // Facebook-like distraction free mode
    pagerDirection: 'last',
    proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token'
  })

  gitalk.render('gitalk-container')
</script>


    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>åŠ è½½è¯„è®ºéœ€è¦åœ¨æµè§ˆå™¨å¯ç”¨ JavaScript è„šæœ¬æ”¯æŒã€‚</noscript>
        </div>
    </div>
    



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives">å½’æ¡£</a></li>
         
          <li><a href="/tags">æ ‡ç­¾</a></li>
         
          <li><a href="/about">å…³äº</a></li>
         
          <li><a href="/search/">æœç´¢</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Barcode"><span class="toc-number">1.</span> <span class="toc-text">Barcode</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#QR-Scanner"><span class="toc-number">2.</span> <span class="toc-text">QR Scanner</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Vision"><span class="toc-number">3.</span> <span class="toc-text">Vision</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#VNImageRequestHandler"><span class="toc-number">3.1.</span> <span class="toc-text">VNImageRequestHandler</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E5%BD%A2%E7%A0%81%E7%9A%84%E8%83%8C%E6%99%AF%E8%89%B2"><span class="toc-number">3.2.</span> <span class="toc-text">æ¡å½¢ç çš„èƒŒæ™¯è‰²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%8B%E5%8A%A8%E7%9A%84%E5%B0%8F%E7%AE%AD%E5%A4%B4"><span class="toc-number">3.3.</span> <span class="toc-text">å¾‹åŠ¨çš„å°ç®­å¤´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%91%E7%9A%84%E5%B0%8F%E6%83%85%E6%80%80"><span class="toc-number">3.4.</span> <span class="toc-text">æˆ‘çš„å°æƒ…æ€€</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-number">4.</span> <span class="toc-text">ä»£ç </span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://tiantian.fyi/2023/12/18/Vision/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://tiantian.fyi/2023/12/18/Vision/&text=ä¸€ç å½’ä¸€ç "><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://tiantian.fyi/2023/12/18/Vision/&title=ä¸€ç å½’ä¸€ç "><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://tiantian.fyi/2023/12/18/Vision/&is_video=false&description=ä¸€ç å½’ä¸€ç "><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=ä¸€ç å½’ä¸€ç &body=Check out this article: https://tiantian.fyi/2023/12/18/Vision/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://tiantian.fyi/2023/12/18/Vision/&title=ä¸€ç å½’ä¸€ç "><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://tiantian.fyi/2023/12/18/Vision/&title=ä¸€ç å½’ä¸€ç "><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://tiantian.fyi/2023/12/18/Vision/&title=ä¸€ç å½’ä¸€ç "><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://tiantian.fyi/2023/12/18/Vision/&title=ä¸€ç å½’ä¸€ç "><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://tiantian.fyi/2023/12/18/Vision/&name=ä¸€ç å½’ä¸€ç &description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://tiantian.fyi/2023/12/18/Vision/&t=ä¸€ç å½’ä¸€ç "><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> èœå•</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> ç›®å½•</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> åˆ†äº«</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> è¿”å›é¡¶éƒ¨</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives">å½’æ¡£</a></li>
         
          <li><a href="/tags">æ ‡ç­¾</a></li>
         
          <li><a href="/about">å…³äº</a></li>
         
          <li><a href="/search/">æœç´¢</a></li>
        
      </ul>
    </nav> 
  </div>
  <div class="footer-right">
      YYLittleCat
      Copyright &copy;
      
      
      2015-2023
  </div>
  <a target="_blank" rel="noopener" href="https://beian.miit.gov.cn">æ´¥ICPå¤‡2021005176å·</a>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"å¤åˆ¶åˆ°ç²˜è´´æ¿!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "å¤åˆ¶æˆåŠŸ!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"left","width":300,"height":600,"vOffset":-100,"hOffset":50},"mobile":{"show":false},"log":false});</script></body>
</html>
